import{s as S}from"./index-057c3f23.js";import{_ as w,r as d,o as y,c as L,a as t,w as e,g as l,e as v,j as b,h as f,t as D,p as k,k as I}from"./index-ca136035.js";const A={components:{scEcharts:S},data(){return{logsChartOption2:{legend:{top:"5%",left:"center"},series:[{label:{show:!0},data:[],type:"pie",radius:[20,140],center:["50%","50%"],itemStyle:{borderRadius:5},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(n){return Math.random()*200}}]},logsChartOption:{legend:{top:"5%",left:"center"},color:["#660022","orange","#00a65a"],grid:{top:"0px",left:"10px",right:"10px",bottom:"0px"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!0,data:[]},yAxis:{show:!0,type:"value"},series:[{label:{show:!0},data:[],type:"line",name:"失败",stack:"Total",label:{normal:{show:!0,position:"top"}},areaStyle:{normal:{}},barWidth:"15px"},{data:[],type:"line",name:"进行中",stack:"Total",areaStyle:{normal:{}},barWidth:"15px"},{data:[],name:"成功",type:"line",stack:"Total",areaStyle:{normal:{}},barWidth:"15px"}]},infoData:{}}},mounted(){this.intiInfo(),this.intiCharts()},methods:{async intiInfo(){this.$API.scheduler.info.get().then(n=>{var p;this.infoData=(p=n==null?void 0:n.data)==null?void 0:p.content})},async intiCharts(){const n={},p=this.$TOOL.date.getDateRang("pastWeek");n.startDate=p[0],n.endDate=p[1],this.$API.scheduler.joblogChart.get(n).then(s=>{var x,r,C,_,i,h,u,c,g,m;s.code==="00000"&&(this.logsChartOption.xAxis.data.length=0,this.logsChartOption.xAxis.data=(x=s.data)==null?void 0:x.content.triggerDayList,this.logsChartOption.series[0].data=(r=s.data)==null?void 0:r.content.triggerDayCountFailList,this.logsChartOption.series[1].data=(C=s.data)==null?void 0:C.content.triggerDayCountRunningList,this.logsChartOption.series[2].data=(_=s.data)==null?void 0:_.content.triggerDayCountSucList,this.logsChartOption2.series[0].data.push({value:(i=s.data)==null?void 0:i.content.triggerDayCountFailList.reduce(function(o,a){return o+a},0),itemStyle:{color:"#660022"},name:"失败: "+((h=s.data)==null?void 0:h.content.triggerDayCountFailList.reduce(function(o,a){return o+a},0))}),this.logsChartOption2.series[0].data.push({value:(u=s.data)==null?void 0:u.content.triggerDayCountRunningList.reduce(function(o,a){return o+a},0),itemStyle:{color:"orange"},name:"进行中: "+((c=s.data)==null?void 0:c.content.triggerDayCountRunningList.reduce(function(o,a){return o+a},0))}),this.logsChartOption2.series[0].data.push({value:(g=s.data)==null?void 0:g.content.triggerDayCountSucList.reduce(function(o,a){return o+a},0),itemStyle:{color:"#00a65a"},name:"成功: "+((m=s.data)==null?void 0:m.content.triggerDayCountSucList.reduce(function(o,a){return o+a},0))}))})}}},O=n=>(k("data-v-3f1f1e3a"),n=n(),I(),n),T={class:"card-header"},j={class:"button",text:""},E=O(()=>l("div",null,"调度中心运行的任务数量",-1)),R={class:"card-header"},B={class:"button",text:""},W=O(()=>l("div",null,"调度中心触发的调度次数",-1)),z={class:"card-header"},F={class:"button",text:""},N=O(()=>l("div",null,"调度中心在线的执行器机器数量",-1));function V(n,p,s,x,r,C){const _=d("el-icon"),i=d("el-col"),h=d("el-tag"),u=d("el-divider"),c=d("el-row"),g=d("el-card"),m=d("el-space"),o=d("scEcharts");return y(),L("div",null,[t(c,null,{default:e(()=>[t(m,{wrap:"",class:"box-parent"},{default:e(()=>[t(g,{class:"box-card",style:{height:"140px"}},{header:e(()=>[l("div",T,[t(c,{class:"box-flex"},{default:e(()=>[t(i,{span:6},{default:e(()=>[t(_,{style:{"font-size":"60px"}},{default:e(()=>[(y(),v(b("el-icon-menu")))]),_:1})]),_:1}),t(i,{span:18},{default:e(()=>[l("div",j,[f("任务数量 "),t(h,null,{default:e(()=>{var a;return[f(D((a=r.infoData)==null?void 0:a.jobInfoCount),1)]}),_:1})]),t(u),E]),_:1})]),_:1})])]),_:1}),t(g,{class:"box-card",style:{height:"140px"}},{header:e(()=>[l("div",R,[t(c,{class:"box-flex"},{default:e(()=>[t(i,{span:6},{default:e(()=>[t(_,{style:{"font-size":"60px"}},{default:e(()=>[(y(),v(b("el-icon-alarm-clock")))]),_:1})]),_:1}),t(i,{span:18},{default:e(()=>[l("div",B,[f("调度次数 "),t(h,null,{default:e(()=>{var a;return[f(D((a=r.infoData)==null?void 0:a.jobLogCount),1)]}),_:1})]),t(u),W]),_:1})]),_:1})])]),_:1}),t(g,{class:"box-card",style:{height:"140px"}},{header:e(()=>[l("div",z,[t(c,{class:"box-flex"},{default:e(()=>[t(i,{span:6},{default:e(()=>[t(_,{style:{"font-size":"60px"}},{default:e(()=>[(y(),v(b("el-icon-takeaway-box")))]),_:1})]),_:1}),t(i,{span:18},{default:e(()=>[l("div",F,[f("执行器数量 "),t(h,null,{default:e(()=>{var a;return[f(D((a=r.infoData)==null?void 0:a.executorCount),1)]}),_:1})]),t(u),N]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(u),t(c,null,{default:e(()=>[t(i,{span:12,style:{height:"400px"}},{default:e(()=>[t(o,{height:"100%",option:r.logsChartOption},null,8,["option"])]),_:1}),t(i,{span:12,style:{height:"400px"}},{default:e(()=>[t(o,{height:"100%",option:r.logsChartOption2},null,8,["option"])]),_:1})]),_:1})])}const G=w(A,[["render",V],["__scopeId","data-v-3f1f1e3a"],["__file","Z:/workspace/vue-support-parent-starter/vue-support-scheduler-starter/src/views/scheduler/jobgroup/summary.vue"]]);export{G as default};
