import{_ as R,r,y as B,o as d,c as w,a as e,w as l,b as j,g as b,e as u,h as a,F as V,i as T,t as k,z as D}from"./index-bd432aa0.js";const I={name:"JobGroup",data(){return{loading:!1,showOnlineAddress:!1,form:{appname:""},rules:{appname:[{trigger:"blur",required:!0,message:"名称不能为空"},{min:4,max:64,message:"名称长度在3到10个字符",trigger:"change"}],title:[{trigger:"blur",required:!0,message:"描述不能为空"}],addressList:[{trigger:"blur",required:!0,message:"注册地址不能为空"}]},forms:{addressType:0},jobName:"全部",jobGroupName:"全部",data:[],onlineAddress:[],apiObj:this.$API.scheduler.jobgroupPageList,addShow:!1}},methods:{showRegistryList(n){this.onlineAddress=n||[],this.showOnlineAddress=!0},del(n){this.$API.scheduler.jobgroupDel.get({id:n.id}).then(o=>{if(o.code==="00000")return this.$message.success("操作成功"),this.data=this.data.filter(_=>_.id!=n.id),!1;this.$message.error(o.msg)})},addSubmit(){this.$refs.addRef.validate(n=>{if(n){var o=void 0;this.forms.id?o=this.$API.scheduler.jobgroupUpdate:o=this.$API.scheduler.jobgroupAdd,this.loading=!0,o.get(this.forms).then(_=>{if(_.code==="00000")return this.$message.success("操作成功"),this.search(),this.addShow=!1,!1;this.$message.error(_.msg)}).finally(()=>this.loading=!1)}})},add(n={}){this.addShow=!0,this.loading=!1,n?Object.assign(this.forms,n):this.forms={}},async initial(){this.search()},search(){this.$refs.table.reload(this.form)}}},q=b("div",{class:"left-panel"},null,-1),F={class:"right-panel"},G={class:"dialog-footer"};function E(n,o,_,J,s,m){const g=r("el-input"),p=r("el-form-item"),x=r("el-form"),i=r("el-button"),O=r("el-header"),f=r("el-table-column"),c=r("el-tag"),v=r("el-row"),S=r("el-tooltip"),U=r("el-button-group"),N=r("scTable"),C=r("el-main"),y=r("el-container"),L=r("el-radio-button"),z=r("el-radio-group"),A=r("el-dialog"),P=B("time");return d(),w(V,null,[e(y,null,{default:l(()=>[j(` <el-aside width="220px">\r
			<el-tree ref="category" class="menu" node-key="label" :data="category" :default-expanded-keys="['系统日志']"\r
				current-node-key="系统日志" :highlight-current="true" :expand-on-click-node="false">\r
			</el-tree>\r
		</el-aside> `),e(y,null,{default:l(()=>[e(C,{class:"nopadding"},{default:l(()=>[e(y,null,{default:l(()=>[e(O,null,{default:l(()=>[q,b("div",F,[e(x,{model:s.form,"label-width":"50px",style:{height:"32px",display:"inline-flex"}},{default:l(()=>[e(p,{label:"名称:"},{default:l(()=>[e(g,{modelValue:s.form.appname,"onUpdate:modelValue":o[0]||(o[0]=t=>s.form.appname=t),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{label:"描述:"},{default:l(()=>[e(g,{modelValue:s.form.title,"onUpdate:modelValue":o[1]||(o[1]=t=>s.form.title=t),placeholder:"应用描述",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),e(i,{type:"primary",icon:"el-icon-search",onClick:m.search},null,8,["onClick"]),e(i,{type:"primary",icon:"el-icon-plus",onClick:m.add},null,8,["onClick"])])]),_:1}),e(C,{class:"nopadding"},{default:l(()=>[e(N,{ref:"table",loading:s.loading,params:s.form,apiObj:s.apiObj,stripe:"",highlightCurrentRow:""},{default:l(()=>[e(f,{label:"应用名称",prop:"appname"}),e(f,{label:"应用描述",prop:"title"}),e(f,{label:"注册方式",prop:"addressType","show-overflow-tooltip":""},{default:l(t=>[t.row.addressType==0?(d(),u(c,{key:0},{default:l(()=>[a("自动注册")]),_:1})):(d(),u(c,{key:1},{default:l(()=>[a("手动注册")]),_:1}))]),_:1}),e(f,{label:"OnLine 机器地址",prop:"registryList"},{default:l(t=>[(t.row.registryList||[]).length>0?(d(),u(S,{key:0,placement:"top"},{content:l(()=>[(d(!0),w(V,null,T(t.row.registryList,h=>(d(),u(v,null,{default:l(()=>[b("p",null,k(h),1)]),_:2},1024))),256))]),default:l(()=>[e(i,{onClick:h=>m.showRegistryList(t.row.registryList),text:"",type:"primary",size:"small"},{default:l(()=>[a("查看("+k(t.row.registryList?t.row.registryList.length:0)+") ",1)]),_:2},1032,["onClick"])]),_:2},1024)):(d(),u(i,{key:1,text:"",type:"primary",size:"small"},{default:l(()=>[a("无")]),_:1}))]),_:1}),e(f,{label:"更新时间",prop:"updateTime"},{default:l(t=>[D(e(c,null,null,512),[[P,t.row.updateTime]])]),_:1}),e(f,{label:"操作",fixed:"right",align:"right",width:"170"},{default:l(t=>[e(U,null,{default:l(()=>[e(i,{text:"",type:"primary",size:"small",onClick:h=>m.add(t.row)},{default:l(()=>[a("编辑")]),_:2},1032,["onClick"]),e(i,{text:"",type:"primary",size:"small",onClick:h=>m.del(t.row,t.$index)},{default:l(()=>[a("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["loading","params","apiObj"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{title:"添加执行器",modelValue:s.addShow,"onUpdate:modelValue":o[7]||(o[7]=t=>s.addShow=t),onClose:o[8]||(o[8]=t=>n.clearShow=!1)},{footer:l(()=>[b("span",G,[e(i,{loading:s.loading,onClick:o[6]||(o[6]=t=>s.addShow=!1)},{default:l(()=>[a("取消")]),_:1},8,["loading"]),e(i,{loading:s.loading,type:"primary",onClick:m.addSubmit},{default:l(()=>[a("确定")]),_:1},8,["loading","onClick"])])]),default:l(()=>[e(x,{ref:"addRef",rules:s.rules,model:s.forms,"label-width":"120px"},{default:l(()=>[e(p,{label:"执行器名称",prop:"appname"},{default:l(()=>[e(g,{modelValue:s.forms.appname,"onUpdate:modelValue":o[2]||(o[2]=t=>s.forms.appname=t),max:"64",min:"4"},null,8,["modelValue"])]),_:1}),e(p,{label:"描述",prop:"title"},{default:l(()=>[e(g,{modelValue:s.forms.title,"onUpdate:modelValue":o[3]||(o[3]=t=>s.forms.title=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"注册方式",prop:"addressType"},{default:l(()=>[e(z,{modelValue:s.forms.addressType,"onUpdate:modelValue":o[4]||(o[4]=t=>s.forms.addressType=t)},{default:l(()=>[e(L,{label:0},{default:l(()=>[a("自动注册")]),_:1}),e(L,{label:1},{default:l(()=>[a("手动注册")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s.forms.addressType===1?(d(),u(p,{key:0,label:"机器地址",prop:"addressList"},{default:l(()=>[e(g,{type:"textarea",modelValue:s.forms.addressList,"onUpdate:modelValue":o[5]||(o[5]=t=>s.forms.addressList=t)},null,8,["modelValue"])]),_:1})):j("v-if",!0)]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),e(A,{draggable:"",width:"15%",title:"在线列表",modelValue:s.showOnlineAddress,"onUpdate:modelValue":o[9]||(o[9]=t=>s.showOnlineAddress=t),onClose:o[10]||(o[10]=t=>s.showOnlineAddress=!1)},{default:l(()=>[(d(!0),w(V,null,T(s.onlineAddress,t=>(d(),u(v,null,{default:l(()=>[e(c,null,{default:l(()=>[a(k(t),1)]),_:2},1024)]),_:2},1024))),256))]),_:1},8,["modelValue"])],64)}const K=R(I,[["render",E],["__file","F:/workspace/vue-support-parent-starter/vue-support-scheduler-starter/src/views/scheduler/jobgroup/index.vue"]]);export{K as default};
