# =====================================================
# Spring Support Parent Starter - 完整配置示例
# =====================================================
# 此文件包含所有模块的配置示例，仅供参考
# 实际使用时请根据需要选择性启用和配置

spring:
  application:
    name: your-application-name
  
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/your_database?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: your_password
    
    # Hikari连接池配置
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  # Redis配置
  redis:
    host: localhost
    port: 6379
    password:
    database: 0
    timeout: 5000
    lettuce:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5
        max-wait: -1

# =====================================================
# Plugin 配置 - 所有模块配置
# =====================================================
plugin:
  
  # ----------------------------------------------------
  # 基础功能模块配置
  # ----------------------------------------------------
  
  # API统一响应配置
  api:
    enable: true                          # 是否启用API统一响应处理，默认：false
    success-code: 200                     # 成功响应码，默认：200
    error-code: 500                       # 错误响应码，默认：500
    result-field: data                    # 数据字段名，默认：data
    code-field: code                      # 状态码字段名，默认：code
    message-field: message                # 消息字段名，默认：message
    timestamp-field: timestamp            # 时间戳字段名，默认：timestamp
    include-timestamp: true               # 是否包含时间戳，默认：true
    
    # CORS跨域配置
    cors:
      enable: true                        # 是否启用CORS，默认：false
      allowed-origins: "*"                # 允许的源，默认：*
      allowed-methods: "*"                # 允许的方法，默认：*
      allowed-headers: "*"                # 允许的请求头，默认：*
      exposed-headers: ""                 # 暴露的响应头，默认：空
      allow-credentials: true             # 是否允许携带凭证，默认：true
      max-age: 3600                       # 预检请求缓存时间（秒），默认：3600
  
  # Actuator监控端点配置
  actuator:
    enable: true                          # 是否启用Actuator，默认：false
    base-path: /actuator                  # 端点基础路径，默认：/actuator
    expose-endpoints: health,info,metrics # 暴露的端点，默认：health,info
  
  # Jackson JSON序列化配置
  jackson:
    enable: true                          # 是否启用Jackson配置，默认：false
    date-format: yyyy-MM-dd HH:mm:ss      # 日期格式，默认：yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8                      # 时区，默认：GMT+8
    null-to-empty: false                  # 是否将null转为空，默认：false
    pretty-print: false                   # 是否格式化输出，默认：false
  
  # 日志配置
  log:
    enable: true                          # 是否启用日志增强，默认：false
    level: INFO                           # 日志级别，默认：INFO
    pattern: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n"
    file:
      enabled: true                       # 是否启用文件日志，默认：true
      path: ./logs                        # 日志文件路径，默认：./logs
      max-size: 100MB                     # 单个文件最大大小，默认：100MB
      max-history: 30                     # 保留天数，默认：30
  
  # 异步任务配置
  async:
    enable: true                          # 是否启用异步任务，默认：false
    core-pool-size: 10                    # 核心线程数，默认：10
    max-pool-size: 50                     # 最大线程数，默认：50
    queue-capacity: 200                   # 队列容量，默认：200
    keep-alive-seconds: 60                # 线程空闲时间（秒），默认：60
    thread-name-prefix: async-            # 线程名前缀，默认：async-
    await-termination-seconds: 60         # 等待终止时间（秒），默认：60
    wait-for-tasks-to-complete: true      # 是否等待任务完成，默认：true
  
  # 验证码配置
  captcha:
    enable: true                          # 是否启用验证码，默认：false
    type: ARITHMETIC                      # 验证码类型：ARITHMETIC, CHINESE, GIF, SPEC，默认：ARITHMETIC
    length: 4                             # 验证码长度，默认：4
    width: 111                            # 图片宽度，默认：111
    height: 36                            # 图片高度，默认：36
    expire-seconds: 300                   # 过期时间（秒），默认：300
  
  # IP解析配置
  ip:
    enable: true                          # 是否启用IP解析，默认：false
    database-path: classpath:ip2region.xdb  # IP数据库路径
    cache-enabled: true                   # 是否启用缓存，默认：true
  
  # 消息转换配置
  message-converter:
    enable: true                          # 是否启用消息转换，默认：false
    charset: UTF-8                        # 字符编码，默认：UTF-8
    write-accept-charset: true            # 是否写入Accept-Charset，默认：true
  
  # 通知配置
  notice:
    enable: true                          # 是否启用通知，默认：false
    type: EMAIL                           # 通知类型：EMAIL, SMS, WECHAT，默认：EMAIL
  
  # 缓存配置
  cache:
    enable: true                          # 是否启用缓存，默认：false
    type: [redis, caffeine]               # 缓存类型，默认：[default]
    default-ttl: 3600                     # 默认过期时间（秒），默认：3600
    redis:
      ttl: 600                            # Redis缓存过期时间（秒），默认：600
      topic: cache:topic                  # Redis消息主题，默认：cache:topic
    caffeine:
      maximum-size: 1000                  # Caffeine最大容量，默认：1000
      expire-after-write: 600             # 写入后过期时间（秒），默认：600
  
  # ----------------------------------------------------
  # 数据库模块配置
  # ----------------------------------------------------
  
  # MyBatis配置
  mybatis:
    enable: true                          # 是否启用MyBatis，默认：false
    mapper-locations: classpath*:/mapper/**/*.xml  # Mapper文件位置
    type-aliases-package: com.your.entity # 实体类包路径
    configuration:
      map-underscore-to-camel-case: true  # 下划线转驼峰，默认：true
      cache-enabled: true                 # 是否启用二级缓存，默认：true
      log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl  # 日志实现
    
    # 分页配置
    page:
      limit: 10                           # 默认每页条数，默认：10
      max-limit: 1000                     # 最大每页条数，默认：1000
      overflow: true                      # 溢出总页数后是否继续，默认：true
      reasonable: true                    # 分页合理化，默认：true
    
    # 逻辑删除配置
    logic-delete:
      enabled: true                       # 是否启用逻辑删除，默认：false
      logic-delete-value: 1               # 删除值，默认：1
      logic-not-delete-value: 0           # 未删除值，默认：0
    
    # 乐观锁配置
    optimistic-locker:
      enabled: true                       # 是否启用乐观锁，默认：false
  
  # 多租户配置
  tenant:
    enable: false                         # 是否启用多租户，默认：false
    tenant-id-column: tenant_id           # 租户ID列名，默认：tenant_id
    ignore-tables: [sys_user, sys_role]   # 忽略的表，默认：空
  
  # 数据源脚本配置
  datasource:
    script:
      enable: false                       # 是否启用数据源脚本，默认：false
      location: classpath:db/init.sql     # 脚本位置
      encoding: UTF-8                     # 脚本编码，默认：UTF-8
    
    # 多数据源配置
    multi:
      enable: false                       # 是否启用多数据源，默认：false
      primary: master                     # 主数据源名称，默认：master
      datasources:
        master:
          driver-class-name: com.mysql.cj.jdbc.Driver
          url: jdbc:mysql://localhost:3306/db_master
          username: root
          password: password
        slave:
          driver-class-name: com.mysql.cj.jdbc.Driver
          url: jdbc:mysql://localhost:3306/db_slave
          username: root
          password: password
  
  # 自动建表配置
  create-table:
    enable: false                         # 是否启用自动建表，默认：false
    base-packages: com.your.entity        # 实体类包路径
    update-existing: false                # 是否更新已存在的表，默认：false
  
  # 事务管理配置
  transaction:
    enable: true                          # 是否启用事务增强，默认：false
    timeout: 30                           # 事务超时时间（秒），默认：30
    rollback-on: [Exception]              # 回滚异常类型，默认：Exception
  
  # ----------------------------------------------------
  # 缓存和存储模块配置
  # ----------------------------------------------------
  
  # Redis服务配置
  redis:
    server:
      enable: true                        # 是否启用Redis服务，默认：false
      key-prefix: app:                    # Key前缀，默认：空
      default-ttl: 3600                   # 默认过期时间（秒），默认：3600
      enable-transaction: false           # 是否启用事务，默认：false
      
      # 分布式锁配置
      lock:
        enabled: true                     # 是否启用分布式锁，默认：false
        wait-time: 10000                  # 等待时间（毫秒），默认：10000
        lease-time: 60000                 # 锁持有时间（毫秒），默认：60000
  
  # MinIO对象存储配置
  minio:
    enable: false                         # 是否启用MinIO，默认：false
    endpoint: http://localhost:9000       # MinIO服务地址
    access-key: minioadmin                # 访问密钥
    secret-key: minioadmin                # 秘密密钥
    bucket-name: default-bucket           # 默认存储桶名称
    auto-create-bucket: true              # 是否自动创建存储桶，默认：true
  
  # Elasticsearch配置
  elasticsearch:
    enable: false                         # 是否启用Elasticsearch，默认：false
    hosts: localhost:9200                 # ES服务地址
    username:                             # 用户名
    password:                             # 密码
    connection-timeout: 5000              # 连接超时时间（毫秒），默认：5000
    socket-timeout: 60000                 # Socket超时时间（毫秒），默认：60000
  
  # ----------------------------------------------------
  # 认证和安全模块配置
  # ----------------------------------------------------
  
  # OAuth客户端配置
  oauth:
    client:
      enable: false                       # 是否启用OAuth客户端，默认：false
      client-id: your-client-id           # 客户端ID
      client-secret: your-client-secret   # 客户端密钥
      authorization-uri: https://oauth-server/oauth/authorize  # 授权地址
      token-uri: https://oauth-server/oauth/token              # Token地址
      user-info-uri: https://oauth-server/user/info            # 用户信息地址
      redirect-uri: http://localhost:8080/login/oauth2/code    # 回调地址
      scope: [read, write]                # 权限范围
  
  # ----------------------------------------------------
  # 消息和通信模块配置
  # ----------------------------------------------------
  
  # 消息队列配置
  queue:
    enable: false                         # 是否启用消息队列，默认：false
    type: rabbitmq                        # 队列类型：rabbitmq, kafka, rocketmq, mqtt
    
    # 死信队列配置
    dead-letter:
      enabled: true                       # 是否启用死信队列，默认：false
      exchange: dlx.exchange              # 死信交换机
      routing-key: dlx.routing.key        # 死信路由键
      queue: dlx.queue                    # 死信队列
      ttl: 86400000                       # 消息存活时间（毫秒），默认：24小时
  
  # MQTT配置
  mqtt:
    enable: false                         # 是否启用MQTT，默认：false
    server-uri: tcp://localhost:1883      # MQTT服务地址
    client-id: mqtt-client-${random.uuid} # 客户端ID
    username:                             # 用户名
    password:                             # 密码
    clean-session: true                   # 是否清除会话，默认：true
    keep-alive-interval: 60               # 心跳间隔（秒），默认：60
    connection-timeout: 30                # 连接超时时间（秒），默认：30
  
  # Socket配置
  socket:
    enable: false                         # 是否启用Socket，默认：false
    server-type: websocket                # 服务类型：websocket, socketio, rsocket, sse
    port: 8081                            # Socket服务端口，默认：8081
    path: /socket                         # Socket路径，默认：/socket
  
  # Socket.IO配置
  socketio:
    enable: false                         # 是否启用Socket.IO，默认：false
    hostname: localhost                   # 主机名，默认：localhost
    port: 9092                            # 端口，默认：9092
    ping-interval: 25000                  # Ping间隔（毫秒），默认：25000
    ping-timeout: 60000                   # Ping超时（毫秒），默认：60000
  
  # SSE配置
  sse:
    enable: false                         # 是否启用SSE，默认：false
    path: /sse                            # SSE路径，默认：/sse
    heartbeat-interval: 30000             # 心跳间隔（毫秒），默认：30000
  
  # RPC配置
  rpc:
    enable: false                         # 是否启用RPC，默认：false
    protocol: dubbo                       # RPC协议：dubbo, grpc
    registry-address: zookeeper://localhost:2181  # 注册中心地址
    port: 20880                           # RPC服务端口，默认：20880
  
  # 同步服务配置
  sync:
    enable: false                         # 是否启用同步服务，默认：false
    batch-size: 100                       # 批量大小，默认：100
    interval: 5000                        # 同步间隔（毫秒），默认：5000
  
  # 消息推送配置
  message:
    enable: false                         # 是否启用消息推送，默认：false
    type: wechat                          # 推送类型：wechat, sms, email
  
  # ----------------------------------------------------
  # 服务治理模块配置
  # ----------------------------------------------------
  
  # 服务发现配置
  discovery:
    enable: false                         # 是否启用服务发现，默认：false
    service-name: ${spring.application.name}  # 服务名称
    registry-type: nacos                  # 注册中心类型：nacos, eureka, consul
    server-addr: localhost:8848           # 注册中心地址
    namespace:                            # 命名空间
    group: DEFAULT_GROUP                  # 分组，默认：DEFAULT_GROUP
  
  # 配置中心配置
  config-center:
    enable: false                         # 是否启用配置中心，默认：false
    server-addr: localhost:8848           # 配置中心地址
    namespace:                            # 命名空间
    group: DEFAULT_GROUP                  # 分组，默认：DEFAULT_GROUP
    data-id: ${spring.application.name}.yaml  # 配置ID
    file-extension: yaml                  # 文件扩展名，默认：yaml
    refresh-enabled: true                 # 是否启用自动刷新，默认：true
  
  # ----------------------------------------------------
  # 监控运维模块配置
  # ----------------------------------------------------
  
  # 上报客户端配置
  report:
    enable: false                         # 是否启用上报客户端，默认：false
    server-url: http://localhost:9999     # 上报服务器地址
    interval: 60000                       # 上报间隔（毫秒），默认：60000
    batch-size: 50                        # 批量大小，默认：50
  
  # Arthas诊断配置
  arthas:
    enable: false                         # 是否启用Arthas，默认：false
    tunnel-server: ws://localhost:7777/ws # Arthas Tunnel服务器地址
    http-port: 8563                       # HTTP端口，默认：8563
    telnet-port: 3658                     # Telnet端口，默认：3658
  
  # ----------------------------------------------------
  # API文档模块配置
  # ----------------------------------------------------
  
  # Knife4j（Swagger）配置
  knife4j:
    enable: true                          # 是否启用Knife4j，默认：false
    title: ${spring.application.name} API文档  # 文档标题
    description: API接口文档               # 文档描述
    version: 4.0.0                        # API版本
    contact:
      name: Your Name                     # 联系人姓名
      email: your-email@example.com       # 联系人邮箱
      url: https://your-website.com       # 联系人网站
    base-package: com.your.controller     # Controller包路径
    production: false                     # 是否生产环境（生产环境将禁用），默认：false
  
  # ----------------------------------------------------
  # 运维管理模块配置
  # ----------------------------------------------------
  
  # Shell服务配置
  shell:
    enable: false                         # 是否启用Shell服务，默认：false
    port: 2222                            # SSH端口，默认：2222
    max-sessions: 10                      # 最大会话数，默认：10
  
  # SSH服务配置
  ssh:
    enable: false                         # 是否启用SSH服务，默认：false
    port: 2222                            # SSH端口，默认：2222
    host-key-path: classpath:hostkey.ser  # 主机密钥路径
    authentication-timeout: 120000        # 认证超时时间（毫秒），默认：120000
  
  # 定时任务配置
  job:
    enable: false                         # 是否启用定时任务，默认：false
    pool-size: 10                         # 线程池大小，默认：10
    await-termination-seconds: 60         # 等待终止时间（秒），默认：60
  
  # ----------------------------------------------------
  # 第三方服务集成模块配置
  # ----------------------------------------------------
  
  # 腾讯云配置
  tencent:
    mini-app:
      enable: false                       # 是否启用腾讯小程序，默认：false
      app-id: your-app-id                 # 小程序AppID
      app-secret: your-app-secret         # 小程序AppSecret
    
    cos:
      enable: false                       # 是否启用腾讯云COS，默认：false
      secret-id: your-secret-id           # SecretId
      secret-key: your-secret-key         # SecretKey
      region: ap-guangzhou                # 地域
      bucket: your-bucket                 # 存储桶名称
  
  # 支付配置
  pay:
    enable: false                         # 是否启用支付，默认：false
    alipay:
      enabled: false                      # 是否启用支付宝，默认：false
      app-id: your-app-id                 # 应用ID
      private-key: your-private-key       # 私钥
      public-key: your-public-key         # 公钥
      gateway-url: https://openapi.alipay.com/gateway.do  # 网关地址
    wechat:
      enabled: false                      # 是否启用微信支付，默认：false
      app-id: your-app-id                 # 应用ID
      mch-id: your-mch-id                 # 商户号
      api-key: your-api-key               # API密钥
      cert-path: classpath:apiclient_cert.p12  # 证书路径
  
  # ----------------------------------------------------
  # API网关模块配置
  # ----------------------------------------------------
  
  # API网关配置
  gateway:
    enable: false                         # 是否启用API网关，默认：false
    routes:
      - id: service1                      # 路由ID
        uri: lb://service1                # 目标服务URI
        predicates:
          - Path=/api/service1/**         # 路径匹配
        filters:
          - StripPrefix=2                 # 去除路径前缀
