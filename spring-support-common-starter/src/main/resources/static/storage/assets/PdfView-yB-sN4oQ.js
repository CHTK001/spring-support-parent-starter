import{k as defineComponent,l as ref,x as onMounted,o as openBlock,d as createElementBlock,y as createBaseVNode,L as pushScopeId,M as popScopeId}from"./display-_0nm5nf0.js";import{a,f}from"./_commonjsHelpers-SRRim4kG.js";import{r}from"./_commonjs-dynamic-modules-OUSn7nVQ.js";import{i}from"./worker-ref-CHNAV_Da.js";import{F as Fe}from"./fileView-myRAlRds.js";var Yi=Object.defineProperty,Ki=(T,c,t)=>c in T?Yi(T,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):T[c]=t,Et=(T,c,t)=>(Ki(T,typeof c!="symbol"?c+"":c,t),t),Fr=(T,c,t)=>{if(!c.has(T))throw TypeError("Cannot "+t)},Ue=(T,c,t)=>(Fr(T,c,"read from private field"),t?t.call(T):c.get(T)),nt=(T,c,t)=>{if(c.has(T))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(T):c.set(T,t)},rt=(T,c,t,s)=>(Fr(T,c,"write to private field"),s?s.call(T,t):c.set(T,t),t),Kn=(T,c,t,s)=>({set _(_){rt(T,c,_,t)},get _(){return Ue(T,c,s)}}),pdfExports$1={},pdf$1={get exports(){return pdfExports$1},set exports(T){pdfExports$1=T}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$7=a(__viteBrowserExternal$1);var path2dPolyfill_min={},hasRequiredPath2dPolyfill_min;function requirePath2dPolyfill_min(){return hasRequiredPath2dPolyfill_min||(hasRequiredPath2dPolyfill_min=1,function(){function T(g,M,P){if(P||arguments.length===2)for(var b,n=0,h=M.length;n<h;n++)!b&&n in M||(b||(b=Array.prototype.slice.call(M,0,n)),b[n]=M[n]);return g.concat(b||Array.prototype.slice.call(M))}var c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi,s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function _(g){var M=[],P=String(g).trim();return P[0]!=="M"&&P[0]!=="m"||P.replace(t,function(b,n,h){var x=function(N){var w=N.match(s);return w?w.map(Number):[]}(h),y=n.toLowerCase(),j=n;if(y==="m"&&x.length>2&&(M.push(T([j],x.splice(0,2),!0)),y="l",j=j==="m"?"l":"L"),x.length<c[y])return"";for(M.push(T([j],x.splice(0,c[y]),!0));x.length>=c[y]&&x.length&&c[y];)M.push(T([j],x.splice(0,c[y]),!0));return""}),M}function O(g,M){var P=g.x*Math.cos(M)-g.y*Math.sin(M),b=g.y*Math.cos(M)+g.x*Math.sin(M);g.x=P,g.y=b}function F(g,M){g.x*=M,g.y*=M}var S=function(){function g(M){var P;this.commands=[],M&&M instanceof g?(P=this.commands).push.apply(P,M.commands):M&&(this.commands=_(M))}return g.prototype.addPath=function(M){var P;M&&M instanceof g&&(P=this.commands).push.apply(P,M.commands)},g.prototype.moveTo=function(M,P){this.commands.push(["M",M,P])},g.prototype.lineTo=function(M,P){this.commands.push(["L",M,P])},g.prototype.arc=function(M,P,b,n,h,x){this.commands.push(["AC",M,P,b,n,h,!!x])},g.prototype.arcTo=function(M,P,b,n,h){this.commands.push(["AT",M,P,b,n,h])},g.prototype.ellipse=function(M,P,b,n,h,x,y,j){this.commands.push(["E",M,P,b,n,h,x,y,!!j])},g.prototype.closePath=function(){this.commands.push(["Z"])},g.prototype.bezierCurveTo=function(M,P,b,n,h,x){this.commands.push(["C",M,P,b,n,h,x])},g.prototype.quadraticCurveTo=function(M,P,b,n){this.commands.push(["Q",M,P,b,n])},g.prototype.rect=function(M,P,b,n){this.commands.push(["R",M,P,b,n])},g.prototype.roundRect=function(M,P,b,n,h){h===void 0?this.commands.push(["RR",M,P,b,n,0]):this.commands.push(["RR",M,P,b,n,h])},g}();function C(g,M){var P,b,n,h,x,y,j,N,w,o,A,U,$,V,H,Y,ue,se,ne,Q,ce,le,J,ve,ae=0,D=0,oe=null,re=null,B=null,L=null,te=null,de=null;g.beginPath();for(var pe=0;pe<M.length;++pe){(se=M[pe][0])!=="S"&&se!=="s"&&se!=="C"&&se!=="c"&&(oe=null,re=null),se!=="T"&&se!=="t"&&se!=="Q"&&se!=="q"&&(B=null,L=null);var ie=void 0;switch(se){case"m":case"M":ie=M[pe],se==="m"?(ae+=ie[1],D+=ie[2]):(ae=ie[1],D=ie[2]),se!=="M"&&te||(te={x:ae,y:D}),g.moveTo(ae,D);break;case"l":ae+=(ie=M[pe])[1],D+=ie[2],g.lineTo(ae,D);break;case"L":ae=(ie=M[pe])[1],D=ie[2],g.lineTo(ae,D);break;case"H":ae=(ie=M[pe])[1],g.lineTo(ae,D);break;case"h":ae+=(ie=M[pe])[1],g.lineTo(ae,D);break;case"V":D=(ie=M[pe])[1],g.lineTo(ae,D);break;case"v":D+=(ie=M[pe])[1],g.lineTo(ae,D);break;case"a":case"A":if(ie=M[pe],de===null)throw new Error("This should never happen");se==="a"?(ae+=ie[6],D+=ie[7]):(ae=ie[6],D=ie[7]),V=ie[1],H=ie[2],j=ie[3]*Math.PI/180,n=!!ie[4],h=!!ie[5],x={x:ae,y:D},O(y={x:(de.x-x.x)/2,y:(de.y-x.y)/2},-j),(N=y.x*y.x/(V*V)+y.y*y.y/(H*H))>1&&(V*=N=Math.sqrt(N),H*=N),w=V*V*H*H,o=V*V*y.y*y.y+H*H*y.x*y.x,F(ne={x:V*y.y/H,y:-H*y.x/V},h!==n?Math.sqrt((w-o)/o)||0:-Math.sqrt((w-o)/o)||0),b=Math.atan2((y.y-ne.y)/H,(y.x-ne.x)/V),P=Math.atan2(-(y.y+ne.y)/H,-(y.x+ne.x)/V),O(ne,j),le=ne,J=(x.x+de.x)/2,ve=(x.y+de.y)/2,le.x+=J,le.y+=ve,g.save(),g.translate(ne.x,ne.y),g.rotate(j),g.scale(V,H),g.arc(0,0,1,b,P,!h),g.restore();break;case"C":oe=(ie=M[pe])[3],re=ie[4],ae=ie[5],D=ie[6],g.bezierCurveTo(ie[1],ie[2],oe,re,ae,D);break;case"c":ie=M[pe],g.bezierCurveTo(ie[1]+ae,ie[2]+D,ie[3]+ae,ie[4]+D,ie[5]+ae,ie[6]+D),oe=ie[3]+ae,re=ie[4]+D,ae+=ie[5],D+=ie[6];break;case"S":ie=M[pe],oe!==null&&re!==null||(oe=ae,re=D),g.bezierCurveTo(2*ae-oe,2*D-re,ie[1],ie[2],ie[3],ie[4]),oe=ie[1],re=ie[2],ae=ie[3],D=ie[4];break;case"s":ie=M[pe],oe!==null&&re!==null||(oe=ae,re=D),g.bezierCurveTo(2*ae-oe,2*D-re,ie[1]+ae,ie[2]+D,ie[3]+ae,ie[4]+D),oe=ie[1]+ae,re=ie[2]+D,ae+=ie[3],D+=ie[4];break;case"Q":B=(ie=M[pe])[1],L=ie[2],ae=ie[3],D=ie[4],g.quadraticCurveTo(B,L,ae,D);break;case"q":B=(ie=M[pe])[1]+ae,L=ie[2]+D,ae+=ie[3],D+=ie[4],g.quadraticCurveTo(B,L,ae,D);break;case"T":B!==null&&L!==null||(B=ae,L=D),B=2*ae-B,L=2*D-L,ae=(ie=M[pe])[1],D=ie[2],g.quadraticCurveTo(B,L,ae,D);break;case"t":B!==null&&L!==null||(B=ae,L=D),B=2*ae-B,L=2*D-L,ae+=(ie=M[pe])[1],D+=ie[2],g.quadraticCurveTo(B,L,ae,D);break;case"z":case"Z":te&&(ae=te.x,D=te.y),te=null,g.closePath();break;case"AC":ae=(ie=M[pe])[1],D=ie[2],$=ie[3],b=ie[4],P=ie[5],Q=ie[6],g.arc(ae,D,$,b,P,Q);break;case"AT":A=(ie=M[pe])[1],U=ie[2],ae=ie[3],D=ie[4],$=ie[5],g.arcTo(A,U,ae,D,$);break;case"E":ae=(ie=M[pe])[1],D=ie[2],V=ie[3],H=ie[4],j=ie[5],b=ie[6],P=ie[7],Q=ie[8],g.save(),g.translate(ae,D),g.rotate(j),g.scale(V,H),g.arc(0,0,1,b,P,Q),g.restore();break;case"R":ae=(ie=M[pe])[1],D=ie[2],Y=ie[3],ue=ie[4],te={x:ae,y:D},g.rect(ae,D,Y,ue);break;case"RR":ae=(ie=M[pe])[1],D=ie[2],Y=ie[3],ue=ie[4],ce=ie[5],te={x:ae,y:D},g.roundRect(ae,D,Y,ue,ce)}de?(de.x=ae,de.y=D):de={x:ae,y:D}}}function u(g,M,P,b,n){var h=this;if(n===void 0&&(n=0),typeof n=="number"&&(n=[n]),Array.isArray(n)){if(n.length===0||n.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(n.length," radii provided. Between one and four radii are necessary."));if(n.forEach(function(o){if(o<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(h.constructor.name,"': Radius value ").concat(o," is negative."))}),n.length===1&&n[0]===0)return this.rect(g,M,P,b);var x,y,j,N=Math.min(P,b)/2,w=x=y=j=Math.min(N,n[0]);n.length===2&&(x=j=Math.min(N,n[1])),n.length===3&&(x=j=Math.min(N,n[1]),y=Math.min(N,n[2])),n.length===4&&(x=Math.min(N,n[1]),y=Math.min(N,n[2]),j=Math.min(N,n[3])),this.moveTo(g,M+b-j),this.arcTo(g,M,g+w,M,w),this.arcTo(g+P,M,g+P,M+x,x),this.arcTo(g+P,M+b,g+P-y,M+b,y),this.arcTo(g,M+b,g,M+b-j,j),this.moveTo(g,M)}}(function(g){if(g&&g.CanvasRenderingContext2D&&!g.Path2D){var M=g.CanvasRenderingContext2D,P=M.prototype.fill,b=M.prototype.stroke,n=M.prototype.isPointInPath;M.prototype.fill=function(){for(var h=[],x=0;x<arguments.length;x++)h[x]=arguments[x];if(!(h[0]instanceof S))return j=h[0]||"nonzero",P.apply(this,[j]);var y=h[0],j=h[1]||"nonzero";C(this,y.commands),P.apply(this,[j])},M.prototype.stroke=function(h){h&&C(this,h.commands),b.apply(this)},M.prototype.isPointInPath=function(){for(var h=[],x=0;x<arguments.length;x++)h[x]=arguments[x];if(h[0]instanceof S){var y=h[0],j=h[1],N=h[2],w=h[3]||"nonzero";return C(this,y.commands),n.apply(this,[j,N,w])}return n.apply(this,h)},g.Path2D=S}})(window),function(g){if(g&&g.CanvasRenderingContext2D){var M=g.CanvasRenderingContext2D,P=g.Path2D;M&&!M.prototype.roundRect&&(M.prototype.roundRect=u),P&&!P.prototype.roundRect&&(P.prototype.roundRect=u)}}(window)}()),path2dPolyfill_min}var ponyfillExports={},ponyfill={get exports(){return ponyfillExports},set exports(T){ponyfillExports=T}},hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(T,c){(function(t,s){s(c)})(f,function(t){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(e){return"Symbol("+e+")"};function _(){}function O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof f<"u")return f}var F=O();function S(e){return typeof e=="object"&&e!==null||typeof e=="function"}var C=_,u=Promise,g=Promise.prototype.then,M=Promise.resolve.bind(u),P=Promise.reject.bind(u);function b(e){return new u(e)}function n(e){return M(e)}function h(e){return P(e)}function x(e,d,Z){return g.call(e,d,Z)}function y(e,d,Z){x(x(e,d,Z),void 0,C)}function j(e,d){y(e,d)}function N(e,d){y(e,void 0,d)}function w(e,d,Z){return x(e,d,Z)}function o(e){x(e,void 0,C)}var A=function(){var e=F&&F.queueMicrotask;if(typeof e=="function")return e;var d=n(void 0);return function(Z){return x(d,Z)}}();function U(e,d,Z){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,d,Z)}function $(e,d,Z){try{return n(U(e,d,Z))}catch(we){return h(we)}}var V=16384,H=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(d){var Z=this._back,we=Z;Z._elements.length===V-1&&(we={_elements:[],_next:void 0}),Z._elements.push(d),we!==Z&&(this._back=we,Z._next=we),++this._size},e.prototype.shift=function(){var d=this._front,Z=d,we=this._cursor,De=we+1,He=d._elements,Ye=He[we];return De===V&&(Z=d._next,De=0),--this._size,this._cursor=De,d!==Z&&(this._front=Z),He[we]=void 0,Ye},e.prototype.forEach=function(d){for(var Z=this._cursor,we=this._front,De=we._elements;(Z!==De.length||we._next!==void 0)&&!(Z===De.length&&(we=we._next,De=we._elements,Z=0,De.length===0));)d(De[Z]),++Z},e.prototype.peek=function(){var d=this._front,Z=this._cursor;return d._elements[Z]},e}();function Y(e,d){e._ownerReadableStream=d,d._reader=e,d._state==="readable"?Q(e):d._state==="closed"?le(e):ce(e,d._storedError)}function ue(e,d){var Z=e._ownerReadableStream;return jt(Z,d)}function se(e){e._ownerReadableStream._state==="readable"?J(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):ve(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ne(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Q(e){e._closedPromise=b(function(d,Z){e._closedPromise_resolve=d,e._closedPromise_reject=Z})}function ce(e,d){Q(e),J(e,d)}function le(e){Q(e),ae(e)}function J(e,d){e._closedPromise_reject!==void 0&&(o(e._closedPromise),e._closedPromise_reject(d),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function ve(e,d){ce(e,d)}function ae(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var D=s("[[AbortSteps]]"),oe=s("[[ErrorSteps]]"),re=s("[[CancelSteps]]"),B=s("[[PullSteps]]"),L=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},te=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function de(e){return typeof e=="object"||typeof e=="function"}function pe(e,d){if(e!==void 0&&!de(e))throw new TypeError(d+" is not an object.")}function ie(e,d){if(typeof e!="function")throw new TypeError(d+" is not a function.")}function Ae(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Ce(e,d){if(!Ae(e))throw new TypeError(d+" is not an object.")}function Te(e,d,Z){if(e===void 0)throw new TypeError("Parameter "+d+" is required in '"+Z+"'.")}function Me(e,d,Z){if(e===void 0)throw new TypeError(d+" is required in '"+Z+"'.")}function Ne(e){return Number(e)}function xe(e){return e===0?0:e}function q(e){return xe(te(e))}function X(e,d){var Z=0,we=Number.MAX_SAFE_INTEGER,De=Number(e);if(De=xe(De),!L(De))throw new TypeError(d+" is not a finite number");if(De=q(De),De<Z||De>we)throw new TypeError(d+" is outside the accepted range of "+Z+" to "+we+", inclusive");return!L(De)||De===0?0:De}function G(e,d){if(!Zt(e))throw new TypeError(d+" is not a ReadableStream.")}function K(e){return new Re(e)}function me(e,d){e._reader._readRequests.push(d)}function Se(e,d,Z){var we=e._reader,De=we._readRequests.shift();Z?De._closeSteps():De._chunkSteps(d)}function fe(e){return e._reader._readRequests.length}function ge(e){var d=e._reader;return!(d===void 0||!Ee(d))}var Re=function(){function e(d){if(Te(d,1,"ReadableStreamDefaultReader"),G(d,"First parameter"),Kt(d))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Y(this,d),this._readRequests=new H}return Object.defineProperty(e.prototype,"closed",{get:function(){return Ee(this)?this._closedPromise:h(je("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(d){return d===void 0&&(d=void 0),Ee(this)?this._ownerReadableStream===void 0?h(ne("cancel")):ue(this,d):h(je("cancel"))},e.prototype.read=function(){if(!Ee(this))return h(je("read"));if(this._ownerReadableStream===void 0)return h(ne("read from"));var d,Z,we=b(function(He,Ye){d=He,Z=Ye}),De={_chunkSteps:function(He){return d({value:He,done:!1})},_closeSteps:function(){return d({value:void 0,done:!0})},_errorSteps:function(He){return Z(He)}};return Ie(this,De),we},e.prototype.releaseLock=function(){if(!Ee(this))throw je("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");se(this)}},e}();Object.defineProperties(Re.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Re.prototype,s.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ee(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Re}function Ie(e,d){var Z=e._ownerReadableStream;Z._disturbed=!0,Z._state==="closed"?d._closeSteps():Z._state==="errored"?d._errorSteps(Z._storedError):Z._readableStreamController[B](d)}function je(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}var Be,Ge;typeof s.asyncIterator=="symbol"&&(Ge=(Be={},Be[s.asyncIterator]=function(){return this},Be),Object.defineProperty(Ge,s.asyncIterator,{enumerable:!1}));var at=function(){function e(d,Z){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=d,this._preventCancel=Z}return e.prototype.next=function(){var d=this,Z=function(){return d._nextSteps()};return this._ongoingPromise=this._ongoingPromise?w(this._ongoingPromise,Z,Z):Z(),this._ongoingPromise},e.prototype.return=function(d){var Z=this,we=function(){return Z._returnSteps(d)};return this._ongoingPromise?w(this._ongoingPromise,we,we):we()},e.prototype._nextSteps=function(){var d=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var Z=this._reader;if(Z._ownerReadableStream===void 0)return h(ne("iterate"));var we,De,He=b(function(ot,ut){we=ot,De=ut}),Ye={_chunkSteps:function(ot){d._ongoingPromise=void 0,A(function(){return we({value:ot,done:!1})})},_closeSteps:function(){d._ongoingPromise=void 0,d._isFinished=!0,se(Z),we({value:void 0,done:!0})},_errorSteps:function(ot){d._ongoingPromise=void 0,d._isFinished=!0,se(Z),De(ot)}};return Ie(Z,Ye),He},e.prototype._returnSteps=function(d){if(this._isFinished)return Promise.resolve({value:d,done:!0});this._isFinished=!0;var Z=this._reader;if(Z._ownerReadableStream===void 0)return h(ne("finish iterating"));if(!this._preventCancel){var we=ue(Z,d);return se(Z),w(we,function(){return{value:d,done:!0}})}return se(Z),n({value:d,done:!0})},e}(),tt={next:function(){return z(this)?this._asyncIteratorImpl.next():h(ee("next"))},return:function(e){return z(this)?this._asyncIteratorImpl.return(e):h(ee("return"))}};Ge!==void 0&&Object.setPrototypeOf(tt,Ge);function be(e,d){var Z=K(e),we=new at(Z,d),De=Object.create(tt);return De._asyncIteratorImpl=we,De}function z(e){if(!S(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof at}catch{return!1}}function ee(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}var Pe=Number.isNaN||function(e){return e!==e};function qe(e){return e.slice()}function Qe(e,d,Z,we,De){new Uint8Array(e).set(new Uint8Array(Z,we,De),d)}function Ze(e){return!1}function Le(e,d,Z){if(e.slice)return e.slice(d,Z);var we=Z-d,De=new ArrayBuffer(we);return Qe(De,0,e,d,we),De}function Xe(e){return!(typeof e!="number"||Pe(e)||e<0)}function Oe(e){var d=Le(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(d)}function ye(e){var d=e._queue.shift();return e._queueTotalSize-=d.size,e._queueTotalSize<0&&(e._queueTotalSize=0),d.value}function We(e,d,Z){if(!Xe(Z)||Z===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:d,size:Z}),e._queueTotalSize+=Z}function Je(e){var d=e._queue.peek();return d.value}function $e(e){e._queue=new H,e._queueTotalSize=0}var lt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!ke(this))throw Gr("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(d){if(!ke(this))throw Gr("respond");if(Te(d,1,"respond"),d=X(d,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ze(this._view.buffer),Xt(this._associatedReadableByteStreamController,d)},e.prototype.respondWithNewView=function(d){if(!ke(this))throw Gr("respondWithNewView");if(Te(d,1,"respondWithNewView"),!ArrayBuffer.isView(d))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ze(d.buffer),kt(this._associatedReadableByteStreamController,d)},e}();Object.defineProperties(lt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,s.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var _e=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!he(this))throw dr("byobRequest");return Ut(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!he(this))throw dr("desiredSize");return Ht(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!he(this))throw dr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var d=this._controlledReadableByteStream._state;if(d!=="readable")throw new TypeError("The stream (in "+d+" state) is not in the readable state and cannot be closed");Dt(this)},e.prototype.enqueue=function(d){if(!he(this))throw dr("enqueue");if(Te(d,1,"enqueue"),!ArrayBuffer.isView(d))throw new TypeError("chunk must be an array buffer view");if(d.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(d.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var Z=this._controlledReadableByteStream._state;if(Z!=="readable")throw new TypeError("The stream (in "+Z+" state) is not in the readable state and cannot be enqueued to");Nt(this,d)},e.prototype.error=function(d){if(d===void 0&&(d=void 0),!he(this))throw dr("error");vt(this,d)},e.prototype[re]=function(d){ze(this),$e(this);var Z=this._cancelAlgorithm(d);return Ft(this),Z},e.prototype[B]=function(d){var Z=this._controlledReadableByteStream;if(this._queueTotalSize>0){var we=this._queue.shift();this._queueTotalSize-=we.byteLength,dt(this);var De=new Uint8Array(we.buffer,we.byteOffset,we.byteLength);d._chunkSteps(De);return}var He=this._autoAllocateChunkSize;if(He!==void 0){var Ye=void 0;try{Ye=new ArrayBuffer(He)}catch(ut){d._errorSteps(ut);return}var ot={buffer:Ye,bufferByteLength:He,byteOffset:0,byteLength:He,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(ot)}me(Z,d),Ve(this)},e}();Object.defineProperties(_e.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(_e.prototype,s.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function he(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof _e}function ke(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof lt}function Ve(e){var d=Lt(e);if(d){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var Z=e._pullAlgorithm();y(Z,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ve(e))},function(we){vt(e,we)})}}function ze(e){pt(e),e._pendingPullIntos=new H}function Ke(e,d){var Z=!1;e._state==="closed"&&(Z=!0);var we=et(d);d.readerType==="default"?Se(e,we,Z):Zn(e,we,Z)}function et(e){var d=e.bytesFilled,Z=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,d/Z)}function st(e,d,Z,we){e._queue.push({buffer:d,byteOffset:Z,byteLength:we}),e._queueTotalSize+=we}function ct(e,d){var Z=d.elementSize,we=d.bytesFilled-d.bytesFilled%Z,De=Math.min(e._queueTotalSize,d.byteLength-d.bytesFilled),He=d.bytesFilled+De,Ye=He-He%Z,ot=De,ut=!1;Ye>we&&(ot=Ye-d.bytesFilled,ut=!0);for(var ft=e._queue;ot>0;){var gt=ft.peek(),bt=Math.min(ot,gt.byteLength),Ct=d.byteOffset+d.bytesFilled;Qe(d.buffer,Ct,gt.buffer,gt.byteOffset,bt),gt.byteLength===bt?ft.shift():(gt.byteOffset+=bt,gt.byteLength-=bt),e._queueTotalSize-=bt,it(e,bt,d),ot-=bt}return ut}function it(e,d,Z){Z.bytesFilled+=d}function dt(e){e._queueTotalSize===0&&e._closeRequested?(Ft(e),yr(e._controlledReadableByteStream)):Ve(e)}function pt(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function mt(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var d=e._pendingPullIntos.peek();ct(e,d)&&(yt(e),Ke(e._controlledReadableByteStream,d))}}function Pt(e,d,Z){var we=e._controlledReadableByteStream,De=1;d.constructor!==DataView&&(De=d.constructor.BYTES_PER_ELEMENT);var He=d.constructor,Ye=d.buffer,ot={buffer:Ye,bufferByteLength:Ye.byteLength,byteOffset:d.byteOffset,byteLength:d.byteLength,bytesFilled:0,elementSize:De,viewConstructor:He,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(ot),un(we,Z);return}if(we._state==="closed"){var ut=new He(ot.buffer,ot.byteOffset,0);Z._closeSteps(ut);return}if(e._queueTotalSize>0){if(ct(e,ot)){var ft=et(ot);dt(e),Z._chunkSteps(ft);return}if(e._closeRequested){var gt=new TypeError("Insufficient bytes to fill elements in the given buffer");vt(e,gt),Z._errorSteps(gt);return}}e._pendingPullIntos.push(ot),un(we,Z),Ve(e)}function xt(e,d){var Z=e._controlledReadableByteStream;if(Xr(Z))for(;dn(Z)>0;){var we=yt(e);Ke(Z,we)}}function wt(e,d,Z){if(it(e,d,Z),!(Z.bytesFilled<Z.elementSize)){yt(e);var we=Z.bytesFilled%Z.elementSize;if(we>0){var De=Z.byteOffset+Z.bytesFilled,He=Le(Z.buffer,De-we,De);st(e,He,0,He.byteLength)}Z.bytesFilled-=we,Ke(e._controlledReadableByteStream,Z),mt(e)}}function Rt(e,d){var Z=e._pendingPullIntos.peek();pt(e);var we=e._controlledReadableByteStream._state;we==="closed"?xt(e):wt(e,d,Z),Ve(e)}function yt(e){var d=e._pendingPullIntos.shift();return d}function Lt(e){var d=e._controlledReadableByteStream;if(d._state!=="readable"||e._closeRequested||!e._started)return!1;if(ge(d)&&fe(d)>0||Xr(d)&&dn(d)>0)return!0;var Z=Ht(e);return Z>0}function Ft(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Dt(e){var d=e._controlledReadableByteStream;if(!(e._closeRequested||d._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){var Z=e._pendingPullIntos.peek();if(Z.bytesFilled>0){var we=new TypeError("Insufficient bytes to fill elements in the given buffer");throw vt(e,we),we}}Ft(e),yr(d)}}function Nt(e,d){var Z=e._controlledReadableByteStream;if(!(e._closeRequested||Z._state!=="readable")){var we=d.buffer,De=d.byteOffset,He=d.byteLength,Ye=we;if(e._pendingPullIntos.length>0){var ot=e._pendingPullIntos.peek();Ze(ot.buffer),ot.buffer=ot.buffer}if(pt(e),ge(Z))if(fe(Z)===0)st(e,Ye,De,He);else{e._pendingPullIntos.length>0&&yt(e);var ut=new Uint8Array(Ye,De,He);Se(Z,ut,!1)}else Xr(Z)?(st(e,Ye,De,He),mt(e)):st(e,Ye,De,He);Ve(e)}}function vt(e,d){var Z=e._controlledReadableByteStream;Z._state==="readable"&&(ze(e),$e(e),Ft(e),Ln(Z,d))}function Ut(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var d=e._pendingPullIntos.peek(),Z=new Uint8Array(d.buffer,d.byteOffset+d.bytesFilled,d.byteLength-d.bytesFilled),we=Object.create(lt.prototype);ir(we,e,Z),e._byobRequest=we}return e._byobRequest}function Ht(e){var d=e._controlledReadableByteStream._state;return d==="errored"?null:d==="closed"?0:e._strategyHWM-e._queueTotalSize}function Xt(e,d){var Z=e._pendingPullIntos.peek(),we=e._controlledReadableByteStream._state;if(we==="closed"){if(d!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(d===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(Z.bytesFilled+d>Z.byteLength)throw new RangeError("bytesWritten out of range")}Z.buffer=Z.buffer,Rt(e,d)}function kt(e,d){var Z=e._pendingPullIntos.peek(),we=e._controlledReadableByteStream._state;if(we==="closed"){if(d.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(d.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(Z.byteOffset+Z.bytesFilled!==d.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(Z.bufferByteLength!==d.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(Z.bytesFilled+d.byteLength>Z.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var De=d.byteLength;Z.buffer=d.buffer,Rt(e,De)}function Tt(e,d,Z,we,De,He,Ye){d._controlledReadableByteStream=e,d._pullAgain=!1,d._pulling=!1,d._byobRequest=null,d._queue=d._queueTotalSize=void 0,$e(d),d._closeRequested=!1,d._started=!1,d._strategyHWM=He,d._pullAlgorithm=we,d._cancelAlgorithm=De,d._autoAllocateChunkSize=Ye,d._pendingPullIntos=new H,e._readableStreamController=d;var ot=Z();y(n(ot),function(){d._started=!0,Ve(d)},function(ut){vt(d,ut)})}function It(e,d,Z){var we=Object.create(_e.prototype),De=function(){},He=function(){return n(void 0)},Ye=function(){return n(void 0)};d.start!==void 0&&(De=function(){return d.start(we)}),d.pull!==void 0&&(He=function(){return d.pull(we)}),d.cancel!==void 0&&(Ye=function(ut){return d.cancel(ut)});var ot=d.autoAllocateChunkSize;if(ot===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Tt(e,we,De,He,Ye,Z,ot)}function ir(e,d,Z){e._associatedReadableByteStreamController=d,e._view=Z}function Gr(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function dr(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function hn(e){return new pr(e)}function un(e,d){e._reader._readIntoRequests.push(d)}function Zn(e,d,Z){var we=e._reader,De=we._readIntoRequests.shift();Z?De._closeSteps(d):De._chunkSteps(d)}function dn(e){return e._reader._readIntoRequests.length}function Xr(e){var d=e._reader;return!(d===void 0||!er(d))}var pr=function(){function e(d){if(Te(d,1,"ReadableStreamBYOBReader"),G(d,"First parameter"),Kt(d))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!he(d._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Y(this,d),this._readIntoRequests=new H}return Object.defineProperty(e.prototype,"closed",{get:function(){return er(this)?this._closedPromise:h(Ar("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(d){return d===void 0&&(d=void 0),er(this)?this._ownerReadableStream===void 0?h(ne("cancel")):ue(this,d):h(Ar("cancel"))},e.prototype.read=function(d){if(!er(this))return h(Ar("read"));if(!ArrayBuffer.isView(d))return h(new TypeError("view must be an array buffer view"));if(d.byteLength===0)return h(new TypeError("view must have non-zero byteLength"));if(d.buffer.byteLength===0)return h(new TypeError("view's buffer must have non-zero byteLength"));if(Ze(d.buffer),this._ownerReadableStream===void 0)return h(ne("read from"));var Z,we,De=b(function(Ye,ot){Z=Ye,we=ot}),He={_chunkSteps:function(Ye){return Z({value:Ye,done:!1})},_closeSteps:function(Ye){return Z({value:Ye,done:!0})},_errorSteps:function(Ye){return we(Ye)}};return pn(this,d,He),De},e.prototype.releaseLock=function(){if(!er(this))throw Ar("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");se(this)}},e}();Object.defineProperties(pr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(pr.prototype,s.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function er(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof pr}function pn(e,d,Z){var we=e._ownerReadableStream;we._disturbed=!0,we._state==="errored"?Z._errorSteps(we._storedError):Pt(we._readableStreamController,d,Z)}function Ar(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function fr(e,d){var Z=e.highWaterMark;if(Z===void 0)return d;if(Pe(Z)||Z<0)throw new RangeError("Invalid highWaterMark");return Z}function Pr(e){var d=e.size;return d||function(){return 1}}function Er(e,d){pe(e,d);var Z=e==null?void 0:e.highWaterMark,we=e==null?void 0:e.size;return{highWaterMark:Z===void 0?void 0:Ne(Z),size:we===void 0?void 0:Qn(we,d+" has member 'size' that")}}function Qn(e,d){return ie(e,d),function(Z){return Ne(e(Z))}}function Jn(e,d){pe(e,d);var Z=e==null?void 0:e.abort,we=e==null?void 0:e.close,De=e==null?void 0:e.start,He=e==null?void 0:e.type,Ye=e==null?void 0:e.write;return{abort:Z===void 0?void 0:ei(Z,e,d+" has member 'abort' that"),close:we===void 0?void 0:ti(we,e,d+" has member 'close' that"),start:De===void 0?void 0:ri(De,e,d+" has member 'start' that"),write:Ye===void 0?void 0:ni(Ye,e,d+" has member 'write' that"),type:He}}function ei(e,d,Z){return ie(e,Z),function(we){return $(e,d,[we])}}function ti(e,d,Z){return ie(e,Z),function(){return $(e,d,[])}}function ri(e,d,Z){return ie(e,Z),function(we){return U(e,d,[we])}}function ni(e,d,Z){return ie(e,Z),function(we,De){return $(e,d,[we,De])}}function fn(e,d){if(!sr(e))throw new TypeError(d+" is not a WritableStream.")}function ii(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}var si=typeof AbortController=="function";function ai(){if(si)return new AbortController}var gr=function(){function e(d,Z){d===void 0&&(d={}),Z===void 0&&(Z={}),d===void 0?d=null:Ce(d,"First parameter");var we=Er(Z,"Second parameter"),De=Jn(d,"First parameter");mn(this);var He=De.type;if(He!==void 0)throw new RangeError("Invalid type is specified");var Ye=Pr(we),ot=fr(we,1);yi(this,De,ot,Ye)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!sr(this))throw Mr("locked");return ar(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(d){return d===void 0&&(d=void 0),sr(this)?ar(this)?h(new TypeError("Cannot abort a stream that already has a writer")):xr(this,d):h(Mr("abort"))},e.prototype.close=function(){return sr(this)?ar(this)?h(new TypeError("Cannot close a stream that already has a writer")):Bt(this)?h(new TypeError("Cannot close an already-closing stream")):vn(this):h(Mr("close"))},e.prototype.getWriter=function(){if(!sr(this))throw Mr("getWriter");return gn(this)},e}();Object.defineProperties(gr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(gr.prototype,s.toStringTag,{value:"WritableStream",configurable:!0});function gn(e){return new mr(e)}function oi(e,d,Z,we,De,He){De===void 0&&(De=1),He===void 0&&(He=function(){return 1});var Ye=Object.create(gr.prototype);mn(Ye);var ot=Object.create(or.prototype);return An(Ye,ot,e,d,Z,we,De,He),Ye}function mn(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new H,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function sr(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof gr}function ar(e){return e._writer!==void 0}function xr(e,d){var Z;if(e._state==="closed"||e._state==="errored")return n(void 0);e._writableStreamController._abortReason=d,(Z=e._writableStreamController._abortController)===null||Z===void 0||Z.abort();var we=e._state;if(we==="closed"||we==="errored")return n(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;var De=!1;we==="erroring"&&(De=!0,d=void 0);var He=b(function(Ye,ot){e._pendingAbortRequest={_promise:void 0,_resolve:Ye,_reject:ot,_reason:d,_wasAlreadyErroring:De}});return e._pendingAbortRequest._promise=He,De||Yr(e,d),He}function vn(e){var d=e._state;if(d==="closed"||d==="errored")return h(new TypeError("The stream (in "+d+" state) is not in the writable state and cannot be closed"));var Z=b(function(De,He){var Ye={_resolve:De,_reject:He};e._closeRequest=Ye}),we=e._writer;return we!==void 0&&e._backpressure&&d==="writable"&&sn(we),wi(e._writableStreamController),Z}function li(e){var d=b(function(Z,we){var De={_resolve:Z,_reject:we};e._writeRequests.push(De)});return d}function $r(e,d){var Z=e._state;if(Z==="writable"){Yr(e,d);return}Zr(e)}function Yr(e,d){var Z=e._writableStreamController;e._state="erroring",e._storedError=d;var we=e._writer;we!==void 0&&_n(we,d),!pi(e)&&Z._started&&Zr(e)}function Zr(e){e._state="errored",e._writableStreamController[oe]();var d=e._storedError;if(e._writeRequests.forEach(function(De){De._reject(d)}),e._writeRequests=new H,e._pendingAbortRequest===void 0){kr(e);return}var Z=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,Z._wasAlreadyErroring){Z._reject(d),kr(e);return}var we=e._writableStreamController[D](Z._reason);y(we,function(){Z._resolve(),kr(e)},function(De){Z._reject(De),kr(e)})}function ci(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function hi(e,d){e._inFlightWriteRequest._reject(d),e._inFlightWriteRequest=void 0,$r(e,d)}function ui(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var d=e._state;d==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var Z=e._writer;Z!==void 0&&kn(Z)}function di(e,d){e._inFlightCloseRequest._reject(d),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(d),e._pendingAbortRequest=void 0),$r(e,d)}function Bt(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function pi(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function fi(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function gi(e){e._inFlightWriteRequest=e._writeRequests.shift()}function kr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var d=e._writer;d!==void 0&&rn(d,e._storedError)}function Kr(e,d){var Z=e._writer;Z!==void 0&&d!==e._backpressure&&(d?Ci(Z):sn(Z)),e._backpressure=d}var mr=function(){function e(d){if(Te(d,1,"WritableStreamDefaultWriter"),fn(d,"First parameter"),ar(d))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=d,d._writer=this;var Z=d._state;if(Z==="writable")!Bt(d)&&d._backpressure?Ir(this):Cn(this),Rr(this);else if(Z==="erroring")nn(this,d._storedError),Rr(this);else if(Z==="closed")Cn(this),xi(this);else{var we=d._storedError;nn(this,we),xn(this,we)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return tr(this)?this._closedPromise:h(rr("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!tr(this))throw rr("desiredSize");if(this._ownerWritableStream===void 0)throw vr("desiredSize");return _i(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return tr(this)?this._readyPromise:h(rr("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(d){return d===void 0&&(d=void 0),tr(this)?this._ownerWritableStream===void 0?h(vr("abort")):mi(this,d):h(rr("abort"))},e.prototype.close=function(){if(!tr(this))return h(rr("close"));var d=this._ownerWritableStream;return d===void 0?h(vr("close")):Bt(d)?h(new TypeError("Cannot close an already-closing stream")):bn(this)},e.prototype.releaseLock=function(){if(!tr(this))throw rr("releaseLock");var d=this._ownerWritableStream;d!==void 0&&yn(this)},e.prototype.write=function(d){return d===void 0&&(d=void 0),tr(this)?this._ownerWritableStream===void 0?h(vr("write to")):wn(this,d):h(rr("write"))},e}();Object.defineProperties(mr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(mr.prototype,s.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function tr(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof mr}function mi(e,d){var Z=e._ownerWritableStream;return xr(Z,d)}function bn(e){var d=e._ownerWritableStream;return vn(d)}function vi(e){var d=e._ownerWritableStream,Z=d._state;return Bt(d)||Z==="closed"?n(void 0):Z==="errored"?h(d._storedError):bn(e)}function bi(e,d){e._closedPromiseState==="pending"?rn(e,d):ki(e,d)}function _n(e,d){e._readyPromiseState==="pending"?Tn(e,d):Ti(e,d)}function _i(e){var d=e._ownerWritableStream,Z=d._state;return Z==="errored"||Z==="erroring"?null:Z==="closed"?0:Pn(d._writableStreamController)}function yn(e){var d=e._ownerWritableStream,Z=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");_n(e,Z),bi(e,Z),d._writer=void 0,e._ownerWritableStream=void 0}function wn(e,d){var Z=e._ownerWritableStream,we=Z._writableStreamController,De=Si(we,d);if(Z!==e._ownerWritableStream)return h(vr("write to"));var He=Z._state;if(He==="errored")return h(Z._storedError);if(Bt(Z)||He==="closed")return h(new TypeError("The stream is closing or closed and cannot be written to"));if(He==="erroring")return h(Z._storedError);var Ye=li(Z);return Ai(we,d,De),Ye}var Sn={},or=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!Qr(this))throw tn("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!Qr(this))throw tn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(d){if(d===void 0&&(d=void 0),!Qr(this))throw tn("error");var Z=this._controlledWritableStream._state;Z==="writable"&&En(this,d)},e.prototype[D]=function(d){var Z=this._abortAlgorithm(d);return Cr(this),Z},e.prototype[oe]=function(){$e(this)},e}();Object.defineProperties(or.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(or.prototype,s.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Qr(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof or}function An(e,d,Z,we,De,He,Ye,ot){d._controlledWritableStream=e,e._writableStreamController=d,d._queue=void 0,d._queueTotalSize=void 0,$e(d),d._abortReason=void 0,d._abortController=ai(),d._started=!1,d._strategySizeAlgorithm=ot,d._strategyHWM=Ye,d._writeAlgorithm=we,d._closeAlgorithm=De,d._abortAlgorithm=He;var ut=en(d);Kr(e,ut);var ft=Z(),gt=n(ft);y(gt,function(){d._started=!0,Tr(d)},function(bt){d._started=!0,$r(e,bt)})}function yi(e,d,Z,we){var De=Object.create(or.prototype),He=function(){},Ye=function(){return n(void 0)},ot=function(){return n(void 0)},ut=function(){return n(void 0)};d.start!==void 0&&(He=function(){return d.start(De)}),d.write!==void 0&&(Ye=function(ft){return d.write(ft,De)}),d.close!==void 0&&(ot=function(){return d.close()}),d.abort!==void 0&&(ut=function(ft){return d.abort(ft)}),An(e,De,He,Ye,ot,ut,Z,we)}function Cr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function wi(e){We(e,Sn,0),Tr(e)}function Si(e,d){try{return e._strategySizeAlgorithm(d)}catch(Z){return Jr(e,Z),1}}function Pn(e){return e._strategyHWM-e._queueTotalSize}function Ai(e,d,Z){try{We(e,d,Z)}catch(He){Jr(e,He);return}var we=e._controlledWritableStream;if(!Bt(we)&&we._state==="writable"){var De=en(e);Kr(we,De)}Tr(e)}function Tr(e){var d=e._controlledWritableStream;if(e._started&&d._inFlightWriteRequest===void 0){var Z=d._state;if(Z==="erroring"){Zr(d);return}if(e._queue.length!==0){var we=Je(e);we===Sn?Pi(e):Ei(e,we)}}}function Jr(e,d){e._controlledWritableStream._state==="writable"&&En(e,d)}function Pi(e){var d=e._controlledWritableStream;fi(d),ye(e);var Z=e._closeAlgorithm();Cr(e),y(Z,function(){ui(d)},function(we){di(d,we)})}function Ei(e,d){var Z=e._controlledWritableStream;gi(Z);var we=e._writeAlgorithm(d);y(we,function(){ci(Z);var De=Z._state;if(ye(e),!Bt(Z)&&De==="writable"){var He=en(e);Kr(Z,He)}Tr(e)},function(De){Z._state==="writable"&&Cr(e),hi(Z,De)})}function en(e){var d=Pn(e);return d<=0}function En(e,d){var Z=e._controlledWritableStream;Cr(e),Yr(Z,d)}function Mr(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function tn(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function rr(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function vr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Rr(e){e._closedPromise=b(function(d,Z){e._closedPromise_resolve=d,e._closedPromise_reject=Z,e._closedPromiseState="pending"})}function xn(e,d){Rr(e),rn(e,d)}function xi(e){Rr(e),kn(e)}function rn(e,d){e._closedPromise_reject!==void 0&&(o(e._closedPromise),e._closedPromise_reject(d),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ki(e,d){xn(e,d)}function kn(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Ir(e){e._readyPromise=b(function(d,Z){e._readyPromise_resolve=d,e._readyPromise_reject=Z}),e._readyPromiseState="pending"}function nn(e,d){Ir(e),Tn(e,d)}function Cn(e){Ir(e),sn(e)}function Tn(e,d){e._readyPromise_reject!==void 0&&(o(e._readyPromise),e._readyPromise_reject(d),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ci(e){Ir(e)}function Ti(e,d){nn(e,d)}function sn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}var Mn=typeof DOMException<"u"?DOMException:void 0;function Mi(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Ri(){var e=function(d,Z){this.message=d||"",this.name=Z||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var Ii=Mi(Mn)?Mn:Ri();function Rn(e,d,Z,we,De,He){var Ye=K(e),ot=gn(d);e._disturbed=!0;var ut=!1,ft=n(void 0);return b(function(gt,bt){var Ct;if(He!==void 0){if(Ct=function(){var ht=new Ii("Aborted","AbortError"),_t=[];we||_t.push(function(){return d._state==="writable"?xr(d,ht):n(void 0)}),De||_t.push(function(){return e._state==="readable"?jt(e,ht):n(void 0)}),Ot(function(){return Promise.all(_t.map(function(At){return At()}))},!0,ht)},He.aborted){Ct();return}He.addEventListener("abort",Ct)}function Wt(){return b(function(ht,_t){function At(zt){zt?ht():x(hr(),At,_t)}At(!1)})}function hr(){return ut?n(!0):x(ot._readyPromise,function(){return b(function(ht,_t){Ie(Ye,{_chunkSteps:function(At){ft=x(wn(ot,At),void 0,_),ht(!1)},_closeSteps:function(){return ht(!0)},_errorSteps:_t})})})}if(Mt(e,Ye._closedPromise,function(ht){we?Gt(!0,ht):Ot(function(){return xr(d,ht)},!0,ht)}),Mt(d,ot._closedPromise,function(ht){De?Gt(!0,ht):Ot(function(){return jt(e,ht)},!0,ht)}),Vt(e,Ye._closedPromise,function(){Z?Gt():Ot(function(){return vi(ot)})}),Bt(d)||d._state==="closed"){var Qt=new TypeError("the destination writable stream closed before all data could be piped to it");De?Gt(!0,Qt):Ot(function(){return jt(e,Qt)},!0,Qt)}o(Wt());function qt(){var ht=ft;return x(ft,function(){return ht!==ft?qt():void 0})}function Mt(ht,_t,At){ht._state==="errored"?At(ht._storedError):N(_t,At)}function Vt(ht,_t,At){ht._state==="closed"?At():j(_t,At)}function Ot(ht,_t,At){if(ut)return;ut=!0,d._state==="writable"&&!Bt(d)?j(qt(),zt):zt();function zt(){y(ht(),function(){return St(_t,At)},function(Jt){return St(!0,Jt)})}}function Gt(ht,_t){ut||(ut=!0,d._state==="writable"&&!Bt(d)?j(qt(),function(){return St(ht,_t)}):St(ht,_t))}function St(ht,_t){yn(ot),se(Ye),He!==void 0&&He.removeEventListener("abort",Ct),ht?bt(_t):gt(void 0)}})}var lr=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Or(this))throw Nr("desiredSize");return an(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Or(this))throw Nr("close");if(!cr(this))throw new TypeError("The stream is not in a state that permits close");_r(this)},e.prototype.enqueue=function(d){if(d===void 0&&(d=void 0),!Or(this))throw Nr("enqueue");if(!cr(this))throw new TypeError("The stream is not in a state that permits enqueue");return Lr(this,d)},e.prototype.error=function(d){if(d===void 0&&(d=void 0),!Or(this))throw Nr("error");$t(this,d)},e.prototype[re]=function(d){$e(this);var Z=this._cancelAlgorithm(d);return Dr(this),Z},e.prototype[B]=function(d){var Z=this._controlledReadableStream;if(this._queue.length>0){var we=ye(this);this._closeRequested&&this._queue.length===0?(Dr(this),yr(Z)):br(this),d._chunkSteps(we)}else me(Z,d),br(this)},e}();Object.defineProperties(lr.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(lr.prototype,s.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Or(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof lr}function br(e){var d=In(e);if(d){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var Z=e._pullAlgorithm();y(Z,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,br(e))},function(we){$t(e,we)})}}function In(e){var d=e._controlledReadableStream;if(!cr(e)||!e._started)return!1;if(Kt(d)&&fe(d)>0)return!0;var Z=an(e);return Z>0}function Dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function _r(e){if(cr(e)){var d=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Dr(e),yr(d))}}function Lr(e,d){if(cr(e)){var Z=e._controlledReadableStream;if(Kt(Z)&&fe(Z)>0)Se(Z,d,!1);else{var we=void 0;try{we=e._strategySizeAlgorithm(d)}catch(De){throw $t(e,De),De}try{We(e,d,we)}catch(De){throw $t(e,De),De}}br(e)}}function $t(e,d){var Z=e._controlledReadableStream;Z._state==="readable"&&($e(e),Dr(e),Ln(Z,d))}function an(e){var d=e._controlledReadableStream._state;return d==="errored"?null:d==="closed"?0:e._strategyHWM-e._queueTotalSize}function Oi(e){return!In(e)}function cr(e){var d=e._controlledReadableStream._state;return!e._closeRequested&&d==="readable"}function On(e,d,Z,we,De,He,Ye){d._controlledReadableStream=e,d._queue=void 0,d._queueTotalSize=void 0,$e(d),d._started=!1,d._closeRequested=!1,d._pullAgain=!1,d._pulling=!1,d._strategySizeAlgorithm=Ye,d._strategyHWM=He,d._pullAlgorithm=we,d._cancelAlgorithm=De,e._readableStreamController=d;var ot=Z();y(n(ot),function(){d._started=!0,br(d)},function(ut){$t(d,ut)})}function Fi(e,d,Z,we){var De=Object.create(lr.prototype),He=function(){},Ye=function(){return n(void 0)},ot=function(){return n(void 0)};d.start!==void 0&&(He=function(){return d.start(De)}),d.pull!==void 0&&(Ye=function(){return d.pull(De)}),d.cancel!==void 0&&(ot=function(ut){return d.cancel(ut)}),On(e,De,He,Ye,ot,Z,we)}function Nr(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function Di(e,d){return he(e._readableStreamController)?Ni(e):Li(e)}function Li(e,d){var Z=K(e),we=!1,De=!1,He=!1,Ye=!1,ot,ut,ft,gt,bt,Ct=b(function(Mt){bt=Mt});function Wt(){if(we)return De=!0,n(void 0);we=!0;var Mt={_chunkSteps:function(Vt){A(function(){De=!1;var Ot=Vt,Gt=Vt;He||Lr(ft._readableStreamController,Ot),Ye||Lr(gt._readableStreamController,Gt),we=!1,De&&Wt()})},_closeSteps:function(){we=!1,He||_r(ft._readableStreamController),Ye||_r(gt._readableStreamController),(!He||!Ye)&&bt(void 0)},_errorSteps:function(){we=!1}};return Ie(Z,Mt),n(void 0)}function hr(Mt){if(He=!0,ot=Mt,Ye){var Vt=qe([ot,ut]),Ot=jt(e,Vt);bt(Ot)}return Ct}function Qt(Mt){if(Ye=!0,ut=Mt,He){var Vt=qe([ot,ut]),Ot=jt(e,Vt);bt(Ot)}return Ct}function qt(){}return ft=on(qt,Wt,hr),gt=on(qt,Wt,Qt),N(Z._closedPromise,function(Mt){$t(ft._readableStreamController,Mt),$t(gt._readableStreamController,Mt),(!He||!Ye)&&bt(void 0)}),[ft,gt]}function Ni(e){var d=K(e),Z=!1,we=!1,De=!1,He=!1,Ye=!1,ot,ut,ft,gt,bt,Ct=b(function(St){bt=St});function Wt(St){N(St._closedPromise,function(ht){St===d&&(vt(ft._readableStreamController,ht),vt(gt._readableStreamController,ht),(!He||!Ye)&&bt(void 0))})}function hr(){er(d)&&(se(d),d=K(e),Wt(d));var St={_chunkSteps:function(ht){A(function(){we=!1,De=!1;var _t=ht,At=ht;if(!He&&!Ye)try{At=Oe(ht)}catch(zt){vt(ft._readableStreamController,zt),vt(gt._readableStreamController,zt),bt(jt(e,zt));return}He||Nt(ft._readableStreamController,_t),Ye||Nt(gt._readableStreamController,At),Z=!1,we?qt():De&&Mt()})},_closeSteps:function(){Z=!1,He||Dt(ft._readableStreamController),Ye||Dt(gt._readableStreamController),ft._readableStreamController._pendingPullIntos.length>0&&Xt(ft._readableStreamController,0),gt._readableStreamController._pendingPullIntos.length>0&&Xt(gt._readableStreamController,0),(!He||!Ye)&&bt(void 0)},_errorSteps:function(){Z=!1}};Ie(d,St)}function Qt(St,ht){Ee(d)&&(se(d),d=hn(e),Wt(d));var _t=ht?gt:ft,At=ht?ft:gt,zt={_chunkSteps:function(Jt){A(function(){we=!1,De=!1;var ur=ht?Ye:He,Sr=ht?He:Ye;if(Sr)ur||kt(_t._readableStreamController,Jt);else{var Yn=void 0;try{Yn=Oe(Jt)}catch(cn){vt(_t._readableStreamController,cn),vt(At._readableStreamController,cn),bt(jt(e,cn));return}ur||kt(_t._readableStreamController,Jt),Nt(At._readableStreamController,Yn)}Z=!1,we?qt():De&&Mt()})},_closeSteps:function(Jt){Z=!1;var ur=ht?Ye:He,Sr=ht?He:Ye;ur||Dt(_t._readableStreamController),Sr||Dt(At._readableStreamController),Jt!==void 0&&(ur||kt(_t._readableStreamController,Jt),!Sr&&At._readableStreamController._pendingPullIntos.length>0&&Xt(At._readableStreamController,0)),(!ur||!Sr)&&bt(void 0)},_errorSteps:function(){Z=!1}};pn(d,St,zt)}function qt(){if(Z)return we=!0,n(void 0);Z=!0;var St=Ut(ft._readableStreamController);return St===null?hr():Qt(St._view,!1),n(void 0)}function Mt(){if(Z)return De=!0,n(void 0);Z=!0;var St=Ut(gt._readableStreamController);return St===null?hr():Qt(St._view,!0),n(void 0)}function Vt(St){if(He=!0,ot=St,Ye){var ht=qe([ot,ut]),_t=jt(e,ht);bt(_t)}return Ct}function Ot(St){if(Ye=!0,ut=St,He){var ht=qe([ot,ut]),_t=jt(e,ht);bt(_t)}return Ct}function Gt(){}return ft=Dn(Gt,qt,Vt),gt=Dn(Gt,Mt,Ot),Wt(d),[ft,gt]}function ji(e,d){pe(e,d);var Z=e,we=Z==null?void 0:Z.autoAllocateChunkSize,De=Z==null?void 0:Z.cancel,He=Z==null?void 0:Z.pull,Ye=Z==null?void 0:Z.start,ot=Z==null?void 0:Z.type;return{autoAllocateChunkSize:we===void 0?void 0:X(we,d+" has member 'autoAllocateChunkSize' that"),cancel:De===void 0?void 0:Wi(De,Z,d+" has member 'cancel' that"),pull:He===void 0?void 0:Ui(He,Z,d+" has member 'pull' that"),start:Ye===void 0?void 0:Bi(Ye,Z,d+" has member 'start' that"),type:ot===void 0?void 0:qi(ot,d+" has member 'type' that")}}function Wi(e,d,Z){return ie(e,Z),function(we){return $(e,d,[we])}}function Ui(e,d,Z){return ie(e,Z),function(we){return $(e,d,[we])}}function Bi(e,d,Z){return ie(e,Z),function(we){return U(e,d,[we])}}function qi(e,d){if(e=""+e,e!=="bytes")throw new TypeError(d+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function Vi(e,d){pe(e,d);var Z=e==null?void 0:e.mode;return{mode:Z===void 0?void 0:zi(Z,d+" has member 'mode' that")}}function zi(e,d){if(e=""+e,e!=="byob")throw new TypeError(d+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function Hi(e,d){pe(e,d);var Z=e==null?void 0:e.preventCancel;return{preventCancel:!!Z}}function Fn(e,d){pe(e,d);var Z=e==null?void 0:e.preventAbort,we=e==null?void 0:e.preventCancel,De=e==null?void 0:e.preventClose,He=e==null?void 0:e.signal;return He!==void 0&&Gi(He,d+" has member 'signal' that"),{preventAbort:!!Z,preventCancel:!!we,preventClose:!!De,signal:He}}function Gi(e,d){if(!ii(e))throw new TypeError(d+" is not an AbortSignal.")}function Xi(e,d){pe(e,d);var Z=e==null?void 0:e.readable;Me(Z,"readable","ReadableWritablePair"),G(Z,d+" has member 'readable' that");var we=e==null?void 0:e.writable;return Me(we,"writable","ReadableWritablePair"),fn(we,d+" has member 'writable' that"),{readable:Z,writable:we}}var Yt=function(){function e(d,Z){d===void 0&&(d={}),Z===void 0&&(Z={}),d===void 0?d=null:Ce(d,"First parameter");var we=Er(Z,"Second parameter"),De=ji(d,"First parameter");if(ln(this),De.type==="bytes"){if(we.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var He=fr(we,0);It(this,De,He)}else{var Ye=Pr(we),He=fr(we,1);Fi(this,De,He,Ye)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!Zt(this))throw nr("locked");return Kt(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(d){return d===void 0&&(d=void 0),Zt(this)?Kt(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):jt(this,d):h(nr("cancel"))},e.prototype.getReader=function(d){if(d===void 0&&(d=void 0),!Zt(this))throw nr("getReader");var Z=Vi(d,"First parameter");return Z.mode===void 0?K(this):hn(this)},e.prototype.pipeThrough=function(d,Z){if(Z===void 0&&(Z={}),!Zt(this))throw nr("pipeThrough");Te(d,1,"pipeThrough");var we=Xi(d,"First parameter"),De=Fn(Z,"Second parameter");if(Kt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ar(we.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var He=Rn(this,we.writable,De.preventClose,De.preventAbort,De.preventCancel,De.signal);return o(He),we.readable},e.prototype.pipeTo=function(d,Z){if(Z===void 0&&(Z={}),!Zt(this))return h(nr("pipeTo"));if(d===void 0)return h("Parameter 1 is required in 'pipeTo'.");if(!sr(d))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var we;try{we=Fn(Z,"Second parameter")}catch(De){return h(De)}return Kt(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ar(d)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Rn(this,d,we.preventClose,we.preventAbort,we.preventCancel,we.signal)},e.prototype.tee=function(){if(!Zt(this))throw nr("tee");var d=Di(this);return qe(d)},e.prototype.values=function(d){if(d===void 0&&(d=void 0),!Zt(this))throw nr("values");var Z=Hi(d,"First parameter");return be(this,Z.preventCancel)},e}();Object.defineProperties(Yt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Yt.prototype,s.toStringTag,{value:"ReadableStream",configurable:!0}),typeof s.asyncIterator=="symbol"&&Object.defineProperty(Yt.prototype,s.asyncIterator,{value:Yt.prototype.values,writable:!0,configurable:!0});function on(e,d,Z,we,De){we===void 0&&(we=1),De===void 0&&(De=function(){return 1});var He=Object.create(Yt.prototype);ln(He);var Ye=Object.create(lr.prototype);return On(He,Ye,e,d,Z,we,De),He}function Dn(e,d,Z){var we=Object.create(Yt.prototype);ln(we);var De=Object.create(_e.prototype);return Tt(we,De,e,d,Z,0,void 0),we}function ln(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Zt(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Yt}function Kt(e){return e._reader!==void 0}function jt(e,d){if(e._disturbed=!0,e._state==="closed")return n(void 0);if(e._state==="errored")return h(e._storedError);yr(e);var Z=e._reader;Z!==void 0&&er(Z)&&(Z._readIntoRequests.forEach(function(De){De._closeSteps(void 0)}),Z._readIntoRequests=new H);var we=e._readableStreamController[re](d);return w(we,_)}function yr(e){e._state="closed";var d=e._reader;d!==void 0&&(ae(d),Ee(d)&&(d._readRequests.forEach(function(Z){Z._closeSteps()}),d._readRequests=new H))}function Ln(e,d){e._state="errored",e._storedError=d;var Z=e._reader;Z!==void 0&&(J(Z,d),Ee(Z)?(Z._readRequests.forEach(function(we){we._errorSteps(d)}),Z._readRequests=new H):(Z._readIntoRequests.forEach(function(we){we._errorSteps(d)}),Z._readIntoRequests=new H))}function nr(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function Nn(e,d){pe(e,d);var Z=e==null?void 0:e.highWaterMark;return Me(Z,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Ne(Z)}}var jn=function(e){return e.byteLength};try{Object.defineProperty(jn,"name",{value:"size",configurable:!0})}catch{}var jr=function(){function e(d){Te(d,1,"ByteLengthQueuingStrategy"),d=Nn(d,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=d.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Un(this))throw Wn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Un(this))throw Wn("size");return jn},enumerable:!1,configurable:!0}),e}();Object.defineProperties(jr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(jr.prototype,s.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Wn(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function Un(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof jr}var Bn=function(){return 1};try{Object.defineProperty(Bn,"name",{value:"size",configurable:!0})}catch{}var Wr=function(){function e(d){Te(d,1,"CountQueuingStrategy"),d=Nn(d,"First parameter"),this._countQueuingStrategyHighWaterMark=d.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Vn(this))throw qn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Vn(this))throw qn("size");return Bn},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Wr.prototype,s.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function qn(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function Vn(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Wr}function $i(e,d){pe(e,d);var Z=e==null?void 0:e.flush,we=e==null?void 0:e.readableType,De=e==null?void 0:e.start,He=e==null?void 0:e.transform,Ye=e==null?void 0:e.writableType;return{flush:Z===void 0?void 0:Zi(Z,e,d+" has member 'flush' that"),readableType:we,start:De===void 0?void 0:Qi(De,e,d+" has member 'start' that"),transform:He===void 0?void 0:Ji(He,e,d+" has member 'transform' that"),writableType:Ye}}function Zi(e,d,Z){return ie(e,Z),function(we){return $(e,d,[we])}}function Qi(e,d,Z){return ie(e,Z),function(we){return U(e,d,[we])}}function Ji(e,d,Z){return ie(e,Z),function(we,De){return $(e,d,[we,De])}}var Ur=function(){function e(d,Z,we){d===void 0&&(d={}),Z===void 0&&(Z={}),we===void 0&&(we={}),d===void 0&&(d=null);var De=Er(Z,"Second parameter"),He=Er(we,"Third parameter"),Ye=$i(d,"First parameter");if(Ye.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Ye.writableType!==void 0)throw new RangeError("Invalid writableType specified");var ot=fr(He,0),ut=Pr(He),ft=fr(De,1),gt=Pr(De),bt,Ct=b(function(Wt){bt=Wt});es(this,Ct,ft,gt,ot,ut),rs(this,Ye),Ye.start!==void 0?bt(Ye.start(this._transformStreamController)):bt(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!zn(this))throw $n("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!zn(this))throw $n("writable");return this._writable},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Ur.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(Ur.prototype,s.toStringTag,{value:"TransformStream",configurable:!0});function es(e,d,Z,we,De,He){function Ye(){return d}function ot(Ct){return ss(e,Ct)}function ut(Ct){return as(e,Ct)}function ft(){return os(e)}e._writable=oi(Ye,ot,ft,ut,Z,we);function gt(){return ls(e)}function bt(Ct){return qr(e,Ct),n(void 0)}e._readable=on(Ye,gt,bt,De,He),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Vr(e,!0),e._transformStreamController=void 0}function zn(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Ur}function Br(e,d){$t(e._readable._readableStreamController,d),qr(e,d)}function qr(e,d){Hn(e._transformStreamController),Jr(e._writable._writableStreamController,d),e._backpressure&&Vr(e,!1)}function Vr(e,d){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=b(function(Z){e._backpressureChangePromise_resolve=Z}),e._backpressure=d}var wr=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!zr(this))throw Hr("desiredSize");var d=this._controlledTransformStream._readable._readableStreamController;return an(d)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(d){if(d===void 0&&(d=void 0),!zr(this))throw Hr("enqueue");Gn(this,d)},e.prototype.error=function(d){if(d===void 0&&(d=void 0),!zr(this))throw Hr("error");ns(this,d)},e.prototype.terminate=function(){if(!zr(this))throw Hr("terminate");is(this)},e}();Object.defineProperties(wr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof s.toStringTag=="symbol"&&Object.defineProperty(wr.prototype,s.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function zr(e){return!S(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof wr}function ts(e,d,Z,we){d._controlledTransformStream=e,e._transformStreamController=d,d._transformAlgorithm=Z,d._flushAlgorithm=we}function rs(e,d){var Z=Object.create(wr.prototype),we=function(He){try{return Gn(Z,He),n(void 0)}catch(Ye){return h(Ye)}},De=function(){return n(void 0)};d.transform!==void 0&&(we=function(He){return d.transform(He,Z)}),d.flush!==void 0&&(De=function(){return d.flush(Z)}),ts(e,Z,we,De)}function Hn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Gn(e,d){var Z=e._controlledTransformStream,we=Z._readable._readableStreamController;if(!cr(we))throw new TypeError("Readable side is not in a state that permits enqueue");try{Lr(we,d)}catch(He){throw qr(Z,He),Z._readable._storedError}var De=Oi(we);De!==Z._backpressure&&Vr(Z,!0)}function ns(e,d){Br(e._controlledTransformStream,d)}function Xn(e,d){var Z=e._transformAlgorithm(d);return w(Z,void 0,function(we){throw Br(e._controlledTransformStream,we),we})}function is(e){var d=e._controlledTransformStream,Z=d._readable._readableStreamController;_r(Z);var we=new TypeError("TransformStream terminated");qr(d,we)}function ss(e,d){var Z=e._transformStreamController;if(e._backpressure){var we=e._backpressureChangePromise;return w(we,function(){var De=e._writable,He=De._state;if(He==="erroring")throw De._storedError;return Xn(Z,d)})}return Xn(Z,d)}function as(e,d){return Br(e,d),n(void 0)}function os(e){var d=e._readable,Z=e._transformStreamController,we=Z._flushAlgorithm();return Hn(Z),w(we,function(){if(d._state==="errored")throw d._storedError;_r(d._readableStreamController)},function(De){throw Br(e,De),d._storedError})}function ls(e){return Vr(e,!1),e._backpressureChangePromise}function Hr(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function $n(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=jr,t.CountQueuingStrategy=Wr,t.ReadableByteStreamController=_e,t.ReadableStream=Yt,t.ReadableStreamBYOBReader=pr,t.ReadableStreamBYOBRequest=lt,t.ReadableStreamDefaultController=lr,t.ReadableStreamDefaultReader=Re,t.TransformStream=Ur,t.TransformStreamDefaultController=wr,t.WritableStream=gr,t.WritableStreamDefaultController=or,t.WritableStreamDefaultWriter=mr,Object.defineProperty(t,"__esModule",{value:!0})})}(ponyfill,ponyfillExports)),ponyfillExports}var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(T,c){module.exports=c()})(globalThis,()=>(()=>{var __webpack_modules__=[,(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.VerbosityLevel=c.Util=c.UnknownErrorException=c.UnexpectedResponseException=c.UNSUPPORTED_FEATURES=c.TextRenderingMode=c.RenderingIntentFlag=c.PermissionFlag=c.PasswordResponses=c.PasswordException=c.PageActionEventType=c.OPS=c.MissingPDFException=c.LINE_FACTOR=c.LINE_DESCENT_FACTOR=c.InvalidPDFException=c.ImageKind=c.IDENTITY_MATRIX=c.FormatError=c.FeatureTest=c.FONT_IDENTITY_MATRIX=c.DocumentActionEventType=c.CMapCompressionType=c.BaseException=c.BASELINE_FACTOR=c.AnnotationType=c.AnnotationStateModelType=c.AnnotationReviewState=c.AnnotationReplyType=c.AnnotationMode=c.AnnotationMarkedState=c.AnnotationFlag=c.AnnotationFieldFlag=c.AnnotationEditorType=c.AnnotationEditorPrefix=c.AnnotationEditorParamsType=c.AnnotationBorderStyleType=c.AnnotationActionEventType=c.AbortException=void 0,c.assert=oe,c.bytesToString=Ne,c.createPromiseCapability=tt,c.createValidAbsoluteUrl=B,c.getModificationDate=at,c.getVerbosityLevel=J,c.info=ve,c.isArrayBuffer=Be,c.isArrayEqual=Ge,c.objectFromMap=G,c.objectSize=X,c.setVerbosityLevel=le,c.shadow=L,c.string32=q,c.stringToBytes=xe,c.stringToPDFString=Ee,c.stringToUTF8String=Ie,c.unreachable=D,c.utf8StringToString=je,c.warn=ae,globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,t(2));const s=[1,0,0,1,0,0];c.IDENTITY_MATRIX=s;const _=[.001,0,0,.001,0,0];c.FONT_IDENTITY_MATRIX=_;const O=1.35;c.LINE_FACTOR=O;const F=.35;c.LINE_DESCENT_FACTOR=F;const S=F/O;c.BASELINE_FACTOR=S;const C={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};c.RenderingIntentFlag=C;const u={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};c.AnnotationMode=u;const g="pdfjs_internal_editor_";c.AnnotationEditorPrefix=g;const M={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};c.AnnotationEditorType=M;const P={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};c.AnnotationEditorParamsType=P;const b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};c.PermissionFlag=b;const n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};c.TextRenderingMode=n;const h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};c.ImageKind=h;const x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};c.AnnotationType=x;const y={MARKED:"Marked",REVIEW:"Review"};c.AnnotationStateModelType=y;const j={MARKED:"Marked",UNMARKED:"Unmarked"};c.AnnotationMarkedState=j;const N={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};c.AnnotationReviewState=N;const w={GROUP:"Group",REPLY:"R"};c.AnnotationReplyType=w;const o={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};c.AnnotationFlag=o;const A={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};c.AnnotationFieldFlag=A;const U={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};c.AnnotationBorderStyleType=U;const $={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};c.AnnotationActionEventType=$;const V={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};c.DocumentActionEventType=V;const H={O:"PageOpen",C:"PageClose"};c.PageActionEventType=H;const Y={ERRORS:0,WARNINGS:1,INFOS:5};c.VerbosityLevel=Y;const ue={NONE:0,BINARY:1};c.CMapCompressionType=ue;const se={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};c.OPS=se;const ne={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};c.UNSUPPORTED_FEATURES=ne;const Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};c.PasswordResponses=Q;let ce=Y.WARNINGS;function le(be){Number.isInteger(be)&&(ce=be)}function J(){return ce}function ve(be){ce>=Y.INFOS&&console.log(`Info: ${be}`)}function ae(be){ce>=Y.WARNINGS&&console.log(`Warning: ${be}`)}function D(be){throw new Error(be)}function oe(be,z){be||D(z)}function re(be){if(!be)return!1;switch(be.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function B(be){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!be)return null;try{if(ee&&typeof be=="string"){if(ee.addDefaultProtocol&&be.startsWith("www.")){const qe=be.match(/\./g);qe&&qe.length>=2&&(be=`http://${be}`)}if(ee.tryConvertEncoding)try{be=Ie(be)}catch{}}const Pe=z?new URL(be,z):new URL(be);if(re(Pe))return Pe}catch{}return null}function L(be,z,ee){let Pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Object.defineProperty(be,z,{value:ee,enumerable:!Pe,configurable:!0,writable:!1}),ee}const te=function(){function be(z,ee){this.constructor===be&&D("Cannot initialize BaseException."),this.message=z,this.name=ee}return be.prototype=new Error,be.constructor=be,be}();c.BaseException=te;class de extends te{constructor(z,ee){super(z,"PasswordException"),this.code=ee}}c.PasswordException=de;class pe extends te{constructor(z,ee){super(z,"UnknownErrorException"),this.details=ee}}c.UnknownErrorException=pe;class ie extends te{constructor(z){super(z,"InvalidPDFException")}}c.InvalidPDFException=ie;class Ae extends te{constructor(z){super(z,"MissingPDFException")}}c.MissingPDFException=Ae;class Ce extends te{constructor(z,ee){super(z,"UnexpectedResponseException"),this.status=ee}}c.UnexpectedResponseException=Ce;class Te extends te{constructor(z){super(z,"FormatError")}}c.FormatError=Te;class Me extends te{constructor(z){super(z,"AbortException")}}c.AbortException=Me;function Ne(be){(typeof be!="object"||be===null||be.length===void 0)&&D("Invalid argument for bytesToString");const z=be.length,ee=8192;if(z<ee)return String.fromCharCode.apply(null,be);const Pe=[];for(let qe=0;qe<z;qe+=ee){const Qe=Math.min(qe+ee,z),Ze=be.subarray(qe,Qe);Pe.push(String.fromCharCode.apply(null,Ze))}return Pe.join("")}function xe(be){typeof be!="string"&&D("Invalid argument for stringToBytes");const z=be.length,ee=new Uint8Array(z);for(let Pe=0;Pe<z;++Pe)ee[Pe]=be.charCodeAt(Pe)&255;return ee}function q(be){return String.fromCharCode(be>>24&255,be>>16&255,be>>8&255,be&255)}function X(be){return Object.keys(be).length}function G(be){const z=Object.create(null);for(const[ee,Pe]of be)z[ee]=Pe;return z}function K(){const be=new Uint8Array(4);return be[0]=1,new Uint32Array(be.buffer,0,1)[0]===1}function me(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return L(this,"isLittleEndian",K())}static get isEvalSupported(){return L(this,"isEvalSupported",me())}static get isOffscreenCanvasSupported(){return L(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?L(this,"platform",{isWin:!1,isMac:!1}):L(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}c.FeatureTest=Se;const fe=[...Array(256).keys()].map(be=>be.toString(16).padStart(2,"0"));class ge{static makeHexColor(z,ee,Pe){return`#${fe[z]}${fe[ee]}${fe[Pe]}`}static scaleMinMax(z,ee){let Pe;z[0]?(z[0]<0&&(Pe=ee[0],ee[0]=ee[1],ee[1]=Pe),ee[0]*=z[0],ee[1]*=z[0],z[3]<0&&(Pe=ee[2],ee[2]=ee[3],ee[3]=Pe),ee[2]*=z[3],ee[3]*=z[3]):(Pe=ee[0],ee[0]=ee[2],ee[2]=Pe,Pe=ee[1],ee[1]=ee[3],ee[3]=Pe,z[1]<0&&(Pe=ee[2],ee[2]=ee[3],ee[3]=Pe),ee[2]*=z[1],ee[3]*=z[1],z[2]<0&&(Pe=ee[0],ee[0]=ee[1],ee[1]=Pe),ee[0]*=z[2],ee[1]*=z[2]),ee[0]+=z[4],ee[1]+=z[4],ee[2]+=z[5],ee[3]+=z[5]}static transform(z,ee){return[z[0]*ee[0]+z[2]*ee[1],z[1]*ee[0]+z[3]*ee[1],z[0]*ee[2]+z[2]*ee[3],z[1]*ee[2]+z[3]*ee[3],z[0]*ee[4]+z[2]*ee[5]+z[4],z[1]*ee[4]+z[3]*ee[5]+z[5]]}static applyTransform(z,ee){const Pe=z[0]*ee[0]+z[1]*ee[2]+ee[4],qe=z[0]*ee[1]+z[1]*ee[3]+ee[5];return[Pe,qe]}static applyInverseTransform(z,ee){const Pe=ee[0]*ee[3]-ee[1]*ee[2],qe=(z[0]*ee[3]-z[1]*ee[2]+ee[2]*ee[5]-ee[4]*ee[3])/Pe,Qe=(-z[0]*ee[1]+z[1]*ee[0]+ee[4]*ee[1]-ee[5]*ee[0])/Pe;return[qe,Qe]}static getAxialAlignedBoundingBox(z,ee){const Pe=ge.applyTransform(z,ee),qe=ge.applyTransform(z.slice(2,4),ee),Qe=ge.applyTransform([z[0],z[3]],ee),Ze=ge.applyTransform([z[2],z[1]],ee);return[Math.min(Pe[0],qe[0],Qe[0],Ze[0]),Math.min(Pe[1],qe[1],Qe[1],Ze[1]),Math.max(Pe[0],qe[0],Qe[0],Ze[0]),Math.max(Pe[1],qe[1],Qe[1],Ze[1])]}static inverseTransform(z){const ee=z[0]*z[3]-z[1]*z[2];return[z[3]/ee,-z[1]/ee,-z[2]/ee,z[0]/ee,(z[2]*z[5]-z[4]*z[3])/ee,(z[4]*z[1]-z[5]*z[0])/ee]}static singularValueDecompose2dScale(z){const ee=[z[0],z[2],z[1],z[3]],Pe=z[0]*ee[0]+z[1]*ee[2],qe=z[0]*ee[1]+z[1]*ee[3],Qe=z[2]*ee[0]+z[3]*ee[2],Ze=z[2]*ee[1]+z[3]*ee[3],Le=(Pe+Ze)/2,Xe=Math.sqrt((Pe+Ze)**2-4*(Pe*Ze-Qe*qe))/2,Oe=Le+Xe||1,ye=Le-Xe||1;return[Math.sqrt(Oe),Math.sqrt(ye)]}static normalizeRect(z){const ee=z.slice(0);return z[0]>z[2]&&(ee[0]=z[2],ee[2]=z[0]),z[1]>z[3]&&(ee[1]=z[3],ee[3]=z[1]),ee}static intersect(z,ee){const Pe=Math.max(Math.min(z[0],z[2]),Math.min(ee[0],ee[2])),qe=Math.min(Math.max(z[0],z[2]),Math.max(ee[0],ee[2]));if(Pe>qe)return null;const Qe=Math.max(Math.min(z[1],z[3]),Math.min(ee[1],ee[3])),Ze=Math.min(Math.max(z[1],z[3]),Math.max(ee[1],ee[3]));return Qe>Ze?null:[Pe,Qe,qe,Ze]}static bezierBoundingBox(z,ee,Pe,qe,Qe,Ze,Le,Xe){const Oe=[],ye=[[],[]];let We,Je,$e,lt,_e,he,ke,Ve;for(let st=0;st<2;++st){if(st===0?(Je=6*z-12*Pe+6*Qe,We=-3*z+9*Pe-9*Qe+3*Le,$e=3*Pe-3*z):(Je=6*ee-12*qe+6*Ze,We=-3*ee+9*qe-9*Ze+3*Xe,$e=3*qe-3*ee),Math.abs(We)<1e-12){if(Math.abs(Je)<1e-12)continue;lt=-$e/Je,0<lt&&lt<1&&Oe.push(lt);continue}ke=Je*Je-4*$e*We,Ve=Math.sqrt(ke),!(ke<0)&&(_e=(-Je+Ve)/(2*We),0<_e&&_e<1&&Oe.push(_e),he=(-Je-Ve)/(2*We),0<he&&he<1&&Oe.push(he))}let ze=Oe.length,Ke;const et=ze;for(;ze--;)lt=Oe[ze],Ke=1-lt,ye[0][ze]=Ke*Ke*Ke*z+3*Ke*Ke*lt*Pe+3*Ke*lt*lt*Qe+lt*lt*lt*Le,ye[1][ze]=Ke*Ke*Ke*ee+3*Ke*Ke*lt*qe+3*Ke*lt*lt*Ze+lt*lt*lt*Xe;return ye[0][et]=z,ye[1][et]=ee,ye[0][et+1]=Le,ye[1][et+1]=Xe,ye[0].length=ye[1].length=et+2,[Math.min(...ye[0]),Math.min(...ye[1]),Math.max(...ye[0]),Math.max(...ye[1])]}}c.Util=ge;const Re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ee(be){if(be[0]>="ï"){let ee;if(be[0]==="þ"&&be[1]==="ÿ"?ee="utf-16be":be[0]==="ÿ"&&be[1]==="þ"?ee="utf-16le":be[0]==="ï"&&be[1]==="»"&&be[2]==="¿"&&(ee="utf-8"),ee)try{const Pe=new TextDecoder(ee,{fatal:!0}),qe=xe(be);return Pe.decode(qe)}catch(Pe){ae(`stringToPDFString: "${Pe}".`)}}const z=[];for(let ee=0,Pe=be.length;ee<Pe;ee++){const qe=Re[be.charCodeAt(ee)];z.push(qe?String.fromCharCode(qe):be.charAt(ee))}return z.join("")}function Ie(be){return decodeURIComponent(escape(be))}function je(be){return unescape(encodeURIComponent(be))}function Be(be){return typeof be=="object"&&be!==null&&be.byteLength!==void 0}function Ge(be,z){if(be.length!==z.length)return!1;for(let ee=0,Pe=be.length;ee<Pe;ee++)if(be[ee]!==z[ee])return!1;return!0}function at(){let be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[be.getUTCFullYear().toString(),(be.getUTCMonth()+1).toString().padStart(2,"0"),be.getUTCDate().toString().padStart(2,"0"),be.getUTCHours().toString().padStart(2,"0"),be.getUTCMinutes().toString().padStart(2,"0"),be.getUTCSeconds().toString().padStart(2,"0")].join("")}function tt(){const be=Object.create(null);let z=!1;return Object.defineProperty(be,"settled",{get(){return z}}),be.promise=new Promise(function(ee,Pe){be.resolve=function(qe){z=!0,ee(qe)},be.reject=function(qe){z=!0,Pe(qe)}}),be}},(T,c,t)=>{var s=t(3);(function(){globalThis.btoa||!s.isNodeJS||(globalThis.btoa=function(_){return Buffer.from(_,"binary").toString("base64")})})(),function(){globalThis.atob||!s.isNodeJS||(globalThis.atob=function(_){return Buffer.from(_,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!s.isNodeJS||(globalThis.DOMMatrix=require$$7.DOMMatrix)}(),function(){if(globalThis.Path2D||!s.isNodeJS)return;const{CanvasRenderingContext2D:_}=require$$7,{polyfillPath2D:O}=requirePath2dPolyfill_min();globalThis.CanvasRenderingContext2D=_,O(globalThis)}(),function(){globalThis.ReadableStream||!s.isNodeJS||(globalThis.ReadableStream=requirePonyfill().ReadableStream)}(),function(){Array.prototype.at||t(4)}(),function(){Uint8Array.prototype.at||t(78)}(),function(){globalThis.structuredClone||t(88)}()},(T,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isNodeJS=void 0;const t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");c.isNodeJS=t},(T,c,t)=>{t(5);var s=t(77);T.exports=s("Array","at")},(T,c,t)=>{var s=t(6),_=t(43),O=t(67),F=t(65),S=t(72);s({target:"Array",proto:!0},{at:function(C){var u=_(this),g=O(u),M=F(C),P=M>=0?M:g+M;return P<0||P>=g?void 0:u[P]}}),S("at")},(T,c,t)=>{var s=t(7),_=t(8).f,O=t(47),F=t(51),S=t(41),C=t(59),u=t(71);T.exports=function(g,M){var P=g.target,b=g.global,n=g.stat,h,x,y,j,N,w;if(b?x=s:n?x=s[P]||S(P,{}):x=(s[P]||{}).prototype,x)for(y in M){if(N=M[y],g.dontCallGetSet?(w=_(x,y),j=w&&w.value):j=x[y],h=u(b?y:P+(n?".":"#")+y,g.forced),!h&&j!==void 0){if(typeof N==typeof j)continue;C(N,j)}(g.sham||j&&j.sham)&&O(N,"sham",!0),F(x,y,N,g)}}},T=>{var c=function(t){return t&&t.Math==Math&&t};T.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof f=="object"&&f)||function(){return this}()||Function("return this")()},(T,c,t)=>{var s=t(9),_=t(11),O=t(13),F=t(14),S=t(15),C=t(21),u=t(42),g=t(45),M=Object.getOwnPropertyDescriptor;c.f=s?M:function(P,b){if(P=S(P),b=C(b),g)try{return M(P,b)}catch{}if(u(P,b))return F(!_(O.f,P,b),P[b])}},(T,c,t)=>{var s=t(10);T.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},T=>{T.exports=function(c){try{return!!c()}catch{return!0}}},(T,c,t)=>{var s=t(12),_=Function.prototype.call;T.exports=s?_.bind(_):function(){return _.apply(_,arguments)}},(T,c,t)=>{var s=t(10);T.exports=!s(function(){var _=(function(){}).bind();return typeof _!="function"||_.hasOwnProperty("prototype")})},(T,c)=>{var t={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,_=s&&!t.call({1:2},1);c.f=_?function(O){var F=s(this,O);return!!F&&F.enumerable}:t},T=>{T.exports=function(c,t){return{enumerable:!(c&1),configurable:!(c&2),writable:!(c&4),value:t}}},(T,c,t)=>{var s=t(16),_=t(19);T.exports=function(O){return s(_(O))}},(T,c,t)=>{var s=t(17),_=t(10),O=t(18),F=Object,S=s("".split);T.exports=_(function(){return!F("z").propertyIsEnumerable(0)})?function(C){return O(C)=="String"?S(C,""):F(C)}:F},(T,c,t)=>{var s=t(12),_=Function.prototype,O=_.call,F=s&&_.bind.bind(O,O);T.exports=s?F:function(S){return function(){return O.apply(S,arguments)}}},(T,c,t)=>{var s=t(17),_=s({}.toString),O=s("".slice);T.exports=function(F){return O(_(F),8,-1)}},(T,c,t)=>{var s=t(20),_=TypeError;T.exports=function(O){if(s(O))throw _("Can't call method on "+O);return O}},T=>{T.exports=function(c){return c==null}},(T,c,t)=>{var s=t(22),_=t(26);T.exports=function(O){var F=s(O,"string");return _(F)?F:F+""}},(T,c,t)=>{var s=t(11),_=t(23),O=t(26),F=t(33),S=t(36),C=t(37),u=TypeError,g=C("toPrimitive");T.exports=function(M,P){if(!_(M)||O(M))return M;var b=F(M,g),n;if(b){if(P===void 0&&(P="default"),n=s(b,M,P),!_(n)||O(n))return n;throw u("Can't convert object to primitive value")}return P===void 0&&(P="number"),S(M,P)}},(T,c,t)=>{var s=t(24),_=t(25),O=_.all;T.exports=_.IS_HTMLDDA?function(F){return typeof F=="object"?F!==null:s(F)||F===O}:function(F){return typeof F=="object"?F!==null:s(F)}},(T,c,t)=>{var s=t(25),_=s.all;T.exports=s.IS_HTMLDDA?function(O){return typeof O=="function"||O===_}:function(O){return typeof O=="function"}},T=>{var c=typeof document=="object"&&document.all,t=typeof c>"u"&&c!==void 0;T.exports={all:c,IS_HTMLDDA:t}},(T,c,t)=>{var s=t(27),_=t(24),O=t(28),F=t(29),S=Object;T.exports=F?function(C){return typeof C=="symbol"}:function(C){var u=s("Symbol");return _(u)&&O(u.prototype,S(C))}},(T,c,t)=>{var s=t(7),_=t(24),O=function(F){return _(F)?F:void 0};T.exports=function(F,S){return arguments.length<2?O(s[F]):s[F]&&s[F][S]}},(T,c,t)=>{var s=t(17);T.exports=s({}.isPrototypeOf)},(T,c,t)=>{var s=t(30);T.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(T,c,t)=>{var s=t(31),_=t(10);T.exports=!!Object.getOwnPropertySymbols&&!_(function(){var O=Symbol();return!String(O)||!(Object(O)instanceof Symbol)||!Symbol.sham&&s&&s<41})},(T,c,t)=>{var s=t(7),_=t(32),O=s.process,F=s.Deno,S=O&&O.versions||F&&F.version,C=S&&S.v8,u,g;C&&(u=C.split("."),g=u[0]>0&&u[0]<4?1:+(u[0]+u[1])),!g&&_&&(u=_.match(/Edge\/(\d+)/),(!u||u[1]>=74)&&(u=_.match(/Chrome\/(\d+)/),u&&(g=+u[1]))),T.exports=g},T=>{T.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},(T,c,t)=>{var s=t(34),_=t(20);T.exports=function(O,F){var S=O[F];return _(S)?void 0:s(S)}},(T,c,t)=>{var s=t(24),_=t(35),O=TypeError;T.exports=function(F){if(s(F))return F;throw O(_(F)+" is not a function")}},T=>{var c=String;T.exports=function(t){try{return c(t)}catch{return"Object"}}},(T,c,t)=>{var s=t(11),_=t(24),O=t(23),F=TypeError;T.exports=function(S,C){var u,g;if(C==="string"&&_(u=S.toString)&&!O(g=s(u,S))||_(u=S.valueOf)&&!O(g=s(u,S))||C!=="string"&&_(u=S.toString)&&!O(g=s(u,S)))return g;throw F("Can't convert object to primitive value")}},(T,c,t)=>{var s=t(7),_=t(38),O=t(42),F=t(44),S=t(30),C=t(29),u=s.Symbol,g=_("wks"),M=C?u.for||u:u&&u.withoutSetter||F;T.exports=function(P){return O(g,P)||(g[P]=S&&O(u,P)?u[P]:M("Symbol."+P)),g[P]}},(T,c,t)=>{var s=t(39),_=t(40);(T.exports=function(O,F){return _[O]||(_[O]=F!==void 0?F:{})})("versions",[]).push({version:"3.27.2",mode:s?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"})},T=>{T.exports=!1},(T,c,t)=>{var s=t(7),_=t(41),O="__core-js_shared__",F=s[O]||_(O,{});T.exports=F},(T,c,t)=>{var s=t(7),_=Object.defineProperty;T.exports=function(O,F){try{_(s,O,{value:F,configurable:!0,writable:!0})}catch{s[O]=F}return F}},(T,c,t)=>{var s=t(17),_=t(43),O=s({}.hasOwnProperty);T.exports=Object.hasOwn||function(F,S){return O(_(F),S)}},(T,c,t)=>{var s=t(19),_=Object;T.exports=function(O){return _(s(O))}},(T,c,t)=>{var s=t(17),_=0,O=Math.random(),F=s(1 .toString);T.exports=function(S){return"Symbol("+(S===void 0?"":S)+")_"+F(++_+O,36)}},(T,c,t)=>{var s=t(9),_=t(10),O=t(46);T.exports=!s&&!_(function(){return Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a!=7})},(T,c,t)=>{var s=t(7),_=t(23),O=s.document,F=_(O)&&_(O.createElement);T.exports=function(S){return F?O.createElement(S):{}}},(T,c,t)=>{var s=t(9),_=t(48),O=t(14);T.exports=s?function(F,S,C){return _.f(F,S,O(1,C))}:function(F,S,C){return F[S]=C,F}},(T,c,t)=>{var s=t(9),_=t(45),O=t(49),F=t(50),S=t(21),C=TypeError,u=Object.defineProperty,g=Object.getOwnPropertyDescriptor,M="enumerable",P="configurable",b="writable";c.f=s?O?function(n,h,x){if(F(n),h=S(h),F(x),typeof n=="function"&&h==="prototype"&&"value"in x&&b in x&&!x[b]){var y=g(n,h);y&&y[b]&&(n[h]=x.value,x={configurable:P in x?x[P]:y[P],enumerable:M in x?x[M]:y[M],writable:!1})}return u(n,h,x)}:u:function(n,h,x){if(F(n),h=S(h),F(x),_)try{return u(n,h,x)}catch{}if("get"in x||"set"in x)throw C("Accessors not supported");return"value"in x&&(n[h]=x.value),n}},(T,c,t)=>{var s=t(9),_=t(10);T.exports=s&&_(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(T,c,t)=>{var s=t(23),_=String,O=TypeError;T.exports=function(F){if(s(F))return F;throw O(_(F)+" is not an object")}},(T,c,t)=>{var s=t(24),_=t(48),O=t(52),F=t(41);T.exports=function(S,C,u,g){g||(g={});var M=g.enumerable,P=g.name!==void 0?g.name:C;if(s(u)&&O(u,P,g),g.global)M?S[C]=u:F(C,u);else{try{g.unsafe?S[C]&&(M=!0):delete S[C]}catch{}M?S[C]=u:_.f(S,C,{value:u,enumerable:!1,configurable:!g.nonConfigurable,writable:!g.nonWritable})}return S}},(T,c,t)=>{var s=t(17),_=t(10),O=t(24),F=t(42),S=t(9),C=t(53).CONFIGURABLE,u=t(54),g=t(55),M=g.enforce,P=g.get,b=String,n=Object.defineProperty,h=s("".slice),x=s("".replace),y=s([].join),j=S&&!_(function(){return n(function(){},"length",{value:8}).length!==8}),N=String(String).split("String"),w=T.exports=function(o,A,U){h(b(A),0,7)==="Symbol("&&(A="["+x(b(A),/^Symbol\(([^)]*)\)/,"$1")+"]"),U&&U.getter&&(A="get "+A),U&&U.setter&&(A="set "+A),(!F(o,"name")||C&&o.name!==A)&&(S?n(o,"name",{value:A,configurable:!0}):o.name=A),j&&U&&F(U,"arity")&&o.length!==U.arity&&n(o,"length",{value:U.arity});try{U&&F(U,"constructor")&&U.constructor?S&&n(o,"prototype",{writable:!1}):o.prototype&&(o.prototype=void 0)}catch{}var $=M(o);return F($,"source")||($.source=y(N,typeof A=="string"?A:"")),o};Function.prototype.toString=w(function(){return O(this)&&P(this).source||u(this)},"toString")},(T,c,t)=>{var s=t(9),_=t(42),O=Function.prototype,F=s&&Object.getOwnPropertyDescriptor,S=_(O,"name"),C=S&&(function(){}).name==="something",u=S&&(!s||s&&F(O,"name").configurable);T.exports={EXISTS:S,PROPER:C,CONFIGURABLE:u}},(T,c,t)=>{var s=t(17),_=t(24),O=t(40),F=s(Function.toString);_(O.inspectSource)||(O.inspectSource=function(S){return F(S)}),T.exports=O.inspectSource},(T,c,t)=>{var s=t(56),_=t(7),O=t(23),F=t(47),S=t(42),C=t(40),u=t(57),g=t(58),M="Object already initialized",P=_.TypeError,b=_.WeakMap,n,h,x,y=function(o){return x(o)?h(o):n(o,{})},j=function(o){return function(A){var U;if(!O(A)||(U=h(A)).type!==o)throw P("Incompatible receiver, "+o+" required");return U}};if(s||C.state){var N=C.state||(C.state=new b);N.get=N.get,N.has=N.has,N.set=N.set,n=function(o,A){if(N.has(o))throw P(M);return A.facade=o,N.set(o,A),A},h=function(o){return N.get(o)||{}},x=function(o){return N.has(o)}}else{var w=u("state");g[w]=!0,n=function(o,A){if(S(o,w))throw P(M);return A.facade=o,F(o,w,A),A},h=function(o){return S(o,w)?o[w]:{}},x=function(o){return S(o,w)}}T.exports={set:n,get:h,has:x,enforce:y,getterFor:j}},(T,c,t)=>{var s=t(7),_=t(24),O=s.WeakMap;T.exports=_(O)&&/native code/.test(String(O))},(T,c,t)=>{var s=t(38),_=t(44),O=s("keys");T.exports=function(F){return O[F]||(O[F]=_(F))}},T=>{T.exports={}},(T,c,t)=>{var s=t(42),_=t(60),O=t(8),F=t(48);T.exports=function(S,C,u){for(var g=_(C),M=F.f,P=O.f,b=0;b<g.length;b++){var n=g[b];!s(S,n)&&!(u&&s(u,n))&&M(S,n,P(C,n))}}},(T,c,t)=>{var s=t(27),_=t(17),O=t(61),F=t(70),S=t(50),C=_([].concat);T.exports=s("Reflect","ownKeys")||function(u){var g=O.f(S(u)),M=F.f;return M?C(g,M(u)):g}},(T,c,t)=>{var s=t(62),_=t(69),O=_.concat("length","prototype");c.f=Object.getOwnPropertyNames||function(F){return s(F,O)}},(T,c,t)=>{var s=t(17),_=t(42),O=t(15),F=t(63).indexOf,S=t(58),C=s([].push);T.exports=function(u,g){var M=O(u),P=0,b=[],n;for(n in M)!_(S,n)&&_(M,n)&&C(b,n);for(;g.length>P;)_(M,n=g[P++])&&(~F(b,n)||C(b,n));return b}},(T,c,t)=>{var s=t(15),_=t(64),O=t(67),F=function(S){return function(C,u,g){var M=s(C),P=O(M),b=_(g,P),n;if(S&&u!=u){for(;P>b;)if(n=M[b++],n!=n)return!0}else for(;P>b;b++)if((S||b in M)&&M[b]===u)return S||b||0;return!S&&-1}};T.exports={includes:F(!0),indexOf:F(!1)}},(T,c,t)=>{var s=t(65),_=Math.max,O=Math.min;T.exports=function(F,S){var C=s(F);return C<0?_(C+S,0):O(C,S)}},(T,c,t)=>{var s=t(66);T.exports=function(_){var O=+_;return O!==O||O===0?0:s(O)}},T=>{var c=Math.ceil,t=Math.floor;T.exports=Math.trunc||function(s){var _=+s;return(_>0?t:c)(_)}},(T,c,t)=>{var s=t(68);T.exports=function(_){return s(_.length)}},(T,c,t)=>{var s=t(65),_=Math.min;T.exports=function(O){return O>0?_(s(O),9007199254740991):0}},T=>{T.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(T,c)=>{c.f=Object.getOwnPropertySymbols},(T,c,t)=>{var s=t(10),_=t(24),O=/#|\.prototype\./,F=function(M,P){var b=C[S(M)];return b==g?!0:b==u?!1:_(P)?s(P):!!P},S=F.normalize=function(M){return String(M).replace(O,".").toLowerCase()},C=F.data={},u=F.NATIVE="N",g=F.POLYFILL="P";T.exports=F},(T,c,t)=>{var s=t(37),_=t(73),O=t(48).f,F=s("unscopables"),S=Array.prototype;S[F]==null&&O(S,F,{configurable:!0,value:_(null)}),T.exports=function(C){S[F][C]=!0}},(T,c,t)=>{var s=t(50),_=t(74),O=t(69),F=t(58),S=t(76),C=t(46),u=t(57),g=">",M="<",P="prototype",b="script",n=u("IE_PROTO"),h=function(){},x=function(o){return M+b+g+o+M+"/"+b+g},y=function(o){o.write(x("")),o.close();var A=o.parentWindow.Object;return o=null,A},j=function(){var o=C("iframe"),A="java"+b+":",U;return o.style.display="none",S.appendChild(o),o.src=String(A),U=o.contentWindow.document,U.open(),U.write(x("document.F=Object")),U.close(),U.F},N,w=function(){try{N=new ActiveXObject("htmlfile")}catch{}w=typeof document<"u"?document.domain&&N?y(N):j():y(N);for(var o=O.length;o--;)delete w[P][O[o]];return w()};F[n]=!0,T.exports=Object.create||function(o,A){var U;return o!==null?(h[P]=s(o),U=new h,h[P]=null,U[n]=o):U=w(),A===void 0?U:_.f(U,A)}},(T,c,t)=>{var s=t(9),_=t(49),O=t(48),F=t(50),S=t(15),C=t(75);c.f=s&&!_?Object.defineProperties:function(u,g){F(u);for(var M=S(g),P=C(g),b=P.length,n=0,h;b>n;)O.f(u,h=P[n++],M[h]);return u}},(T,c,t)=>{var s=t(62),_=t(69);T.exports=Object.keys||function(O){return s(O,_)}},(T,c,t)=>{var s=t(27);T.exports=s("document","documentElement")},(T,c,t)=>{var s=t(7),_=t(17);T.exports=function(O,F){return _(s[O].prototype[F])}},(T,c,t)=>{t(79)},(T,c,t)=>{var s=t(80),_=t(67),O=t(65),F=s.aTypedArray,S=s.exportTypedArrayMethod;S("at",function(C){var u=F(this),g=_(u),M=O(C),P=M>=0?M:g+M;return P<0||P>=g?void 0:u[P]})},(T,c,t)=>{var s=t(81),_=t(9),O=t(7),F=t(24),S=t(23),C=t(42),u=t(82),g=t(35),M=t(47),P=t(51),b=t(48).f,n=t(28),h=t(84),x=t(86),y=t(37),j=t(44),N=t(55),w=N.enforce,o=N.get,A=O.Int8Array,U=A&&A.prototype,$=O.Uint8ClampedArray,V=$&&$.prototype,H=A&&h(A),Y=U&&h(U),ue=Object.prototype,se=O.TypeError,ne=y("toStringTag"),Q=j("TYPED_ARRAY_TAG"),ce="TypedArrayConstructor",le=s&&!!x&&u(O.opera)!=="Opera",J=!1,ve,ae,D,oe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},re={BigInt64Array:8,BigUint64Array:8},B=function(Ce){if(!S(Ce))return!1;var Te=u(Ce);return Te==="DataView"||C(oe,Te)||C(re,Te)},L=function(Ce){var Te=h(Ce);if(S(Te)){var Me=o(Te);return Me&&C(Me,ce)?Me[ce]:L(Te)}},te=function(Ce){if(!S(Ce))return!1;var Te=u(Ce);return C(oe,Te)||C(re,Te)},de=function(Ce){if(te(Ce))return Ce;throw se("Target is not a typed array")},pe=function(Ce){if(F(Ce)&&(!x||n(H,Ce)))return Ce;throw se(g(Ce)+" is not a typed array constructor")},ie=function(Ce,Te,Me,Ne){if(_){if(Me)for(var xe in oe){var q=O[xe];if(q&&C(q.prototype,Ce))try{delete q.prototype[Ce]}catch{try{q.prototype[Ce]=Te}catch{}}}(!Y[Ce]||Me)&&P(Y,Ce,Me?Te:le&&U[Ce]||Te,Ne)}},Ae=function(Ce,Te,Me){var Ne,xe;if(_){if(x){if(Me){for(Ne in oe)if(xe=O[Ne],xe&&C(xe,Ce))try{delete xe[Ce]}catch{}}if(!H[Ce]||Me)try{return P(H,Ce,Me?Te:le&&H[Ce]||Te)}catch{}else return}for(Ne in oe)xe=O[Ne],xe&&(!xe[Ce]||Me)&&P(xe,Ce,Te)}};for(ve in oe)ae=O[ve],D=ae&&ae.prototype,D?w(D)[ce]=ae:le=!1;for(ve in re)ae=O[ve],D=ae&&ae.prototype,D&&(w(D)[ce]=ae);if((!le||!F(H)||H===Function.prototype)&&(H=function(){throw se("Incorrect invocation")},le))for(ve in oe)O[ve]&&x(O[ve],H);if((!le||!Y||Y===ue)&&(Y=H.prototype,le))for(ve in oe)O[ve]&&x(O[ve].prototype,Y);if(le&&h(V)!==Y&&x(V,Y),_&&!C(Y,ne)){J=!0,b(Y,ne,{get:function(){return S(this)?this[Q]:void 0}});for(ve in oe)O[ve]&&M(O[ve],Q,ve)}T.exports={NATIVE_ARRAY_BUFFER_VIEWS:le,TYPED_ARRAY_TAG:J&&Q,aTypedArray:de,aTypedArrayConstructor:pe,exportTypedArrayMethod:ie,exportTypedArrayStaticMethod:Ae,getTypedArrayConstructor:L,isView:B,isTypedArray:te,TypedArray:H,TypedArrayPrototype:Y}},T=>{T.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(T,c,t)=>{var s=t(83),_=t(24),O=t(18),F=t(37),S=F("toStringTag"),C=Object,u=O(function(){return arguments}())=="Arguments",g=function(M,P){try{return M[P]}catch{}};T.exports=s?O:function(M){var P,b,n;return M===void 0?"Undefined":M===null?"Null":typeof(b=g(P=C(M),S))=="string"?b:u?O(P):(n=O(P))=="Object"&&_(P.callee)?"Arguments":n}},(T,c,t)=>{var s=t(37),_=s("toStringTag"),O={};O[_]="z",T.exports=String(O)==="[object z]"},(T,c,t)=>{var s=t(42),_=t(24),O=t(43),F=t(57),S=t(85),C=F("IE_PROTO"),u=Object,g=u.prototype;T.exports=S?u.getPrototypeOf:function(M){var P=O(M);if(s(P,C))return P[C];var b=P.constructor;return _(b)&&P instanceof b?b.prototype:P instanceof u?g:null}},(T,c,t)=>{var s=t(10);T.exports=!s(function(){function _(){}return _.prototype.constructor=null,Object.getPrototypeOf(new _)!==_.prototype})},(T,c,t)=>{var s=t(17),_=t(50),O=t(87);T.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var F=!1,S={},C;try{C=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),C(S,[]),F=S instanceof Array}catch{}return function(u,g){return _(u),O(g),F?C(u,g):u.__proto__=g,u}}():void 0)},(T,c,t)=>{var s=t(24),_=String,O=TypeError;T.exports=function(F){if(typeof F=="object"||s(F))return F;throw O("Can't set "+_(F)+" as a prototype")}},(T,c,t)=>{t(89),t(96),t(98),t(121),t(123);var s=t(134);T.exports=s.structuredClone},(T,c,t)=>{var s=t(15),_=t(72),O=t(90),F=t(55),S=t(48).f,C=t(91),u=t(95),g=t(39),M=t(9),P="Array Iterator",b=F.set,n=F.getterFor(P);T.exports=C(Array,"Array",function(x,y){b(this,{type:P,target:s(x),index:0,kind:y})},function(){var x=n(this),y=x.target,j=x.kind,N=x.index++;return!y||N>=y.length?(x.target=void 0,u(void 0,!0)):j=="keys"?u(N,!1):j=="values"?u(y[N],!1):u([N,y[N]],!1)},"values");var h=O.Arguments=O.Array;if(_("keys"),_("values"),_("entries"),!g&&M&&h.name!=="values")try{S(h,"name",{value:"values"})}catch{}},T=>{T.exports={}},(T,c,t)=>{var s=t(6),_=t(11),O=t(39),F=t(53),S=t(24),C=t(92),u=t(84),g=t(86),M=t(94),P=t(47),b=t(51),n=t(37),h=t(90),x=t(93),y=F.PROPER,j=F.CONFIGURABLE,N=x.IteratorPrototype,w=x.BUGGY_SAFARI_ITERATORS,o=n("iterator"),A="keys",U="values",$="entries",V=function(){return this};T.exports=function(H,Y,ue,se,ne,Q,ce){C(ue,Y,se);var le=function(de){if(de===ne&&oe)return oe;if(!w&&de in ae)return ae[de];switch(de){case A:return function(){return new ue(this,de)};case U:return function(){return new ue(this,de)};case $:return function(){return new ue(this,de)}}return function(){return new ue(this)}},J=Y+" Iterator",ve=!1,ae=H.prototype,D=ae[o]||ae["@@iterator"]||ne&&ae[ne],oe=!w&&D||le(ne),re=Y=="Array"&&ae.entries||D,B,L,te;if(re&&(B=u(re.call(new H)),B!==Object.prototype&&B.next&&(!O&&u(B)!==N&&(g?g(B,N):S(B[o])||b(B,o,V)),M(B,J,!0,!0),O&&(h[J]=V))),y&&ne==U&&D&&D.name!==U&&(!O&&j?P(ae,"name",U):(ve=!0,oe=function(){return _(D,this)})),ne)if(L={values:le(U),keys:Q?oe:le(A),entries:le($)},ce)for(te in L)(w||ve||!(te in ae))&&b(ae,te,L[te]);else s({target:Y,proto:!0,forced:w||ve},L);return(!O||ce)&&ae[o]!==oe&&b(ae,o,oe,{name:ne}),h[Y]=oe,L}},(T,c,t)=>{var s=t(93).IteratorPrototype,_=t(73),O=t(14),F=t(94),S=t(90),C=function(){return this};T.exports=function(u,g,M,P){var b=g+" Iterator";return u.prototype=_(s,{next:O(+!P,M)}),F(u,b,!1,!0),S[b]=C,u}},(T,c,t)=>{var s=t(10),_=t(24),O=t(23),F=t(73),S=t(84),C=t(51),u=t(37),g=t(39),M=u("iterator"),P=!1,b,n,h;[].keys&&(h=[].keys(),"next"in h?(n=S(S(h)),n!==Object.prototype&&(b=n)):P=!0);var x=!O(b)||s(function(){var y={};return b[M].call(y)!==y});x?b={}:g&&(b=F(b)),_(b[M])||C(b,M,function(){return this}),T.exports={IteratorPrototype:b,BUGGY_SAFARI_ITERATORS:P}},(T,c,t)=>{var s=t(48).f,_=t(42),O=t(37),F=O("toStringTag");T.exports=function(S,C,u){S&&!u&&(S=S.prototype),S&&!_(S,F)&&s(S,F,{configurable:!0,value:C})}},T=>{T.exports=function(c,t){return{value:c,done:t}}},(T,c,t)=>{var s=t(83),_=t(51),O=t(97);s||_(Object.prototype,"toString",O,{unsafe:!0})},(T,c,t)=>{var s=t(83),_=t(82);T.exports=s?{}.toString:function(){return"[object "+_(this)+"]"}},(T,c,t)=>{t(99)},(T,c,t)=>{var s=t(100),_=t(118);s("Map",function(O){return function(){return O(this,arguments.length?arguments[0]:void 0)}},_)},(T,c,t)=>{var s=t(6),_=t(7),O=t(17),F=t(71),S=t(51),C=t(101),u=t(108),g=t(115),M=t(24),P=t(20),b=t(23),n=t(10),h=t(116),x=t(94),y=t(117);T.exports=function(j,N,w){var o=j.indexOf("Map")!==-1,A=j.indexOf("Weak")!==-1,U=o?"set":"add",$=_[j],V=$&&$.prototype,H=$,Y={},ue=function(ve){var ae=O(V[ve]);S(V,ve,ve=="add"?function(D){return ae(this,D===0?0:D),this}:ve=="delete"?function(D){return A&&!b(D)?!1:ae(this,D===0?0:D)}:ve=="get"?function(D){return A&&!b(D)?void 0:ae(this,D===0?0:D)}:ve=="has"?function(D){return A&&!b(D)?!1:ae(this,D===0?0:D)}:function(D,oe){return ae(this,D===0?0:D,oe),this})},se=F(j,!M($)||!(A||V.forEach&&!n(function(){new $().entries().next()})));if(se)H=w.getConstructor(N,j,o,U),C.enable();else if(F(j,!0)){var ne=new H,Q=ne[U](A?{}:-0,1)!=ne,ce=n(function(){ne.has(1)}),le=h(function(ve){new $(ve)}),J=!A&&n(function(){for(var ve=new $,ae=5;ae--;)ve[U](ae,ae);return!ve.has(-0)});le||(H=N(function(ve,ae){g(ve,V);var D=y(new $,ve,H);return P(ae)||u(ae,D[U],{that:D,AS_ENTRIES:o}),D}),H.prototype=V,V.constructor=H),(ce||J)&&(ue("delete"),ue("has"),o&&ue("get")),(J||Q)&&ue(U),A&&V.clear&&delete V.clear}return Y[j]=H,s({global:!0,constructor:!0,forced:H!=$},Y),x(H,j),A||w.setStrong(H,j,o),H}},(T,c,t)=>{var s=t(6),_=t(17),O=t(58),F=t(23),S=t(42),C=t(48).f,u=t(61),g=t(102),M=t(105),P=t(44),b=t(107),n=!1,h=P("meta"),x=0,y=function(U){C(U,h,{value:{objectID:"O"+x++,weakData:{}}})},j=function(U,$){if(!F(U))return typeof U=="symbol"?U:(typeof U=="string"?"S":"P")+U;if(!S(U,h)){if(!M(U))return"F";if(!$)return"E";y(U)}return U[h].objectID},N=function(U,$){if(!S(U,h)){if(!M(U))return!0;if(!$)return!1;y(U)}return U[h].weakData},w=function(U){return b&&n&&M(U)&&!S(U,h)&&y(U),U},o=function(){A.enable=function(){},n=!0;var U=u.f,$=_([].splice),V={};V[h]=1,U(V).length&&(u.f=function(H){for(var Y=U(H),ue=0,se=Y.length;ue<se;ue++)if(Y[ue]===h){$(Y,ue,1);break}return Y},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:g.f}))},A=T.exports={enable:o,fastKey:j,getWeakData:N,onFreeze:w};O[h]=!0},(T,c,t)=>{var s=t(18),_=t(15),O=t(61).f,F=t(103),S=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],C=function(u){try{return O(u)}catch{return F(S)}};T.exports.f=function(u){return S&&s(u)=="Window"?C(u):O(_(u))}},(T,c,t)=>{var s=t(64),_=t(67),O=t(104),F=Array,S=Math.max;T.exports=function(C,u,g){for(var M=_(C),P=s(u,M),b=s(g===void 0?M:g,M),n=F(S(b-P,0)),h=0;P<b;P++,h++)O(n,h,C[P]);return n.length=h,n}},(T,c,t)=>{var s=t(21),_=t(48),O=t(14);T.exports=function(F,S,C){var u=s(S);u in F?_.f(F,u,O(0,C)):F[u]=C}},(T,c,t)=>{var s=t(10),_=t(23),O=t(18),F=t(106),S=Object.isExtensible,C=s(function(){});T.exports=C||F?function(u){return!_(u)||F&&O(u)=="ArrayBuffer"?!1:S?S(u):!0}:S},(T,c,t)=>{var s=t(10);T.exports=s(function(){if(typeof ArrayBuffer=="function"){var _=new ArrayBuffer(8);Object.isExtensible(_)&&Object.defineProperty(_,"a",{value:8})}})},(T,c,t)=>{var s=t(10);T.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},(T,c,t)=>{var s=t(109),_=t(11),O=t(50),F=t(35),S=t(111),C=t(67),u=t(28),g=t(112),M=t(113),P=t(114),b=TypeError,n=function(x,y){this.stopped=x,this.result=y},h=n.prototype;T.exports=function(x,y,j){var N=j&&j.that,w=!!(j&&j.AS_ENTRIES),o=!!(j&&j.IS_RECORD),A=!!(j&&j.IS_ITERATOR),U=!!(j&&j.INTERRUPTED),$=s(y,N),V,H,Y,ue,se,ne,Q,ce=function(J){return V&&P(V,"normal",J),new n(!0,J)},le=function(J){return w?(O(J),U?$(J[0],J[1],ce):$(J[0],J[1])):U?$(J,ce):$(J)};if(o)V=x.iterator;else if(A)V=x;else{if(H=M(x),!H)throw b(F(x)+" is not iterable");if(S(H)){for(Y=0,ue=C(x);ue>Y;Y++)if(se=le(x[Y]),se&&u(h,se))return se;return new n(!1)}V=g(x,H)}for(ne=o?x.next:V.next;!(Q=_(ne,V)).done;){try{se=le(Q.value)}catch(J){P(V,"throw",J)}if(typeof se=="object"&&se&&u(h,se))return se}return new n(!1)}},(T,c,t)=>{var s=t(110),_=t(34),O=t(12),F=s(s.bind);T.exports=function(S,C){return _(S),C===void 0?S:O?F(S,C):function(){return S.apply(C,arguments)}}},(T,c,t)=>{var s=t(18),_=t(17);T.exports=function(O){if(s(O)==="Function")return _(O)}},(T,c,t)=>{var s=t(37),_=t(90),O=s("iterator"),F=Array.prototype;T.exports=function(S){return S!==void 0&&(_.Array===S||F[O]===S)}},(T,c,t)=>{var s=t(11),_=t(34),O=t(50),F=t(35),S=t(113),C=TypeError;T.exports=function(u,g){var M=arguments.length<2?S(u):g;if(_(M))return O(s(M,u));throw C(F(u)+" is not iterable")}},(T,c,t)=>{var s=t(82),_=t(33),O=t(20),F=t(90),S=t(37),C=S("iterator");T.exports=function(u){if(!O(u))return _(u,C)||_(u,"@@iterator")||F[s(u)]}},(T,c,t)=>{var s=t(11),_=t(50),O=t(33);T.exports=function(F,S,C){var u,g;_(F);try{if(u=O(F,"return"),!u){if(S==="throw")throw C;return C}u=s(u,F)}catch(M){g=!0,u=M}if(S==="throw")throw C;if(g)throw u;return _(u),C}},(T,c,t)=>{var s=t(28),_=TypeError;T.exports=function(O,F){if(s(F,O))return O;throw _("Incorrect invocation")}},(T,c,t)=>{var s=t(37),_=s("iterator"),O=!1;try{var F=0,S={next:function(){return{done:!!F++}},return:function(){O=!0}};S[_]=function(){return this},Array.from(S,function(){throw 2})}catch{}T.exports=function(C,u){if(!u&&!O)return!1;var g=!1;try{var M={};M[_]=function(){return{next:function(){return{done:g=!0}}}},C(M)}catch{}return g}},(T,c,t)=>{var s=t(24),_=t(23),O=t(86);T.exports=function(F,S,C){var u,g;return O&&s(u=S.constructor)&&u!==C&&_(g=u.prototype)&&g!==C.prototype&&O(F,g),F}},(T,c,t)=>{var s=t(48).f,_=t(73),O=t(119),F=t(109),S=t(115),C=t(20),u=t(108),g=t(91),M=t(95),P=t(120),b=t(9),n=t(101).fastKey,h=t(55),x=h.set,y=h.getterFor;T.exports={getConstructor:function(j,N,w,o){var A=j(function(Y,ue){S(Y,U),x(Y,{type:N,index:_(null),first:void 0,last:void 0,size:0}),b||(Y.size=0),C(ue)||u(ue,Y[o],{that:Y,AS_ENTRIES:w})}),U=A.prototype,$=y(N),V=function(Y,ue,se){var ne=$(Y),Q=H(Y,ue),ce,le;return Q?Q.value=se:(ne.last=Q={index:le=n(ue,!0),key:ue,value:se,previous:ce=ne.last,next:void 0,removed:!1},ne.first||(ne.first=Q),ce&&(ce.next=Q),b?ne.size++:Y.size++,le!=="F"&&(ne.index[le]=Q)),Y},H=function(Y,ue){var se=$(Y),ne=n(ue),Q;if(ne!=="F")return se.index[ne];for(Q=se.first;Q;Q=Q.next)if(Q.key==ue)return Q};return O(U,{clear:function(){for(var Y=this,ue=$(Y),se=ue.index,ne=ue.first;ne;)ne.removed=!0,ne.previous&&(ne.previous=ne.previous.next=void 0),delete se[ne.index],ne=ne.next;ue.first=ue.last=void 0,b?ue.size=0:Y.size=0},delete:function(Y){var ue=this,se=$(ue),ne=H(ue,Y);if(ne){var Q=ne.next,ce=ne.previous;delete se.index[ne.index],ne.removed=!0,ce&&(ce.next=Q),Q&&(Q.previous=ce),se.first==ne&&(se.first=Q),se.last==ne&&(se.last=ce),b?se.size--:ue.size--}return!!ne},forEach:function(Y){for(var ue=$(this),se=F(Y,arguments.length>1?arguments[1]:void 0),ne;ne=ne?ne.next:ue.first;)for(se(ne.value,ne.key,this);ne&&ne.removed;)ne=ne.previous},has:function(Y){return!!H(this,Y)}}),O(U,w?{get:function(Y){var ue=H(this,Y);return ue&&ue.value},set:function(Y,ue){return V(this,Y===0?0:Y,ue)}}:{add:function(Y){return V(this,Y=Y===0?0:Y,Y)}}),b&&s(U,"size",{get:function(){return $(this).size}}),A},setStrong:function(j,N,w){var o=N+" Iterator",A=y(N),U=y(o);g(j,N,function($,V){x(this,{type:o,target:$,state:A($),kind:V,last:void 0})},function(){for(var $=U(this),V=$.kind,H=$.last;H&&H.removed;)H=H.previous;return!$.target||!($.last=H=H?H.next:$.state.first)?($.target=void 0,M(void 0,!0)):V=="keys"?M(H.key,!1):V=="values"?M(H.value,!1):M([H.key,H.value],!1)},w?"entries":"values",!w,!0),P(N)}}},(T,c,t)=>{var s=t(51);T.exports=function(_,O,F){for(var S in O)s(_,S,O[S],F);return _}},(T,c,t)=>{var s=t(27),_=t(48),O=t(37),F=t(9),S=O("species");T.exports=function(C){var u=s(C),g=_.f;F&&u&&!u[S]&&g(u,S,{configurable:!0,get:function(){return this}})}},(T,c,t)=>{t(122)},(T,c,t)=>{var s=t(100),_=t(118);s("Set",function(O){return function(){return O(this,arguments.length?arguments[0]:void 0)}},_)},(T,c,t)=>{var s=t(39),_=t(6),O=t(7),F=t(27),S=t(17),C=t(10),u=t(44),g=t(24),M=t(124),P=t(20),b=t(23),n=t(26),h=t(108),x=t(50),y=t(82),j=t(42),N=t(104),w=t(47),o=t(67),A=t(125),U=t(126),$=t(128),V=t(129),H=t(130),Y=t(31),ue=t(131),se=t(132),ne=t(133),Q=O.Object,ce=O.Array,le=O.Date,J=O.Error,ve=O.EvalError,ae=O.RangeError,D=O.ReferenceError,oe=O.SyntaxError,re=O.TypeError,B=O.URIError,L=O.PerformanceMark,te=O.WebAssembly,de=te&&te.CompileError||J,pe=te&&te.LinkError||J,ie=te&&te.RuntimeError||J,Ae=F("DOMException"),Ce=$.Map,Te=$.has,Me=$.get,Ne=$.set,xe=V.Set,q=V.add,X=F("Object","keys"),G=S([].push),K=S((!0).valueOf),me=S(1 .valueOf),Se=S("".valueOf),fe=S(le.prototype.getTime),ge=u("structuredClone"),Re="DataCloneError",Ee="Transferring",Ie=function(Le){return!C(function(){var Xe=new O.Set([7]),Oe=Le(Xe),ye=Le(Q(7));return Oe==Xe||!Oe.has(7)||typeof ye!="object"||ye!=7})&&Le},je=function(Le,Xe){return!C(function(){var Oe=new Xe,ye=Le({a:Oe,b:Oe});return!(ye&&ye.a===ye.b&&ye.a instanceof Xe&&ye.a.stack===Oe.stack)})},Be=function(Le){return!C(function(){var Xe=Le(new O.AggregateError([1],ge,{cause:3}));return Xe.name!="AggregateError"||Xe.errors[0]!=1||Xe.message!=ge||Xe.cause!=3})},Ge=O.structuredClone,at=s||!je(Ge,J)||!je(Ge,Ae)||!Be(Ge),tt=!Ge&&Ie(function(Le){return new L(ge,{detail:Le}).detail}),be=Ie(Ge)||tt,z=function(Le){throw new Ae("Uncloneable type: "+Le,Re)},ee=function(Le,Xe){throw new Ae((Xe||"Cloning")+" of "+Le+" cannot be properly polyfilled in this engine",Re)},Pe=function(){var Le;try{Le=new O.DataTransfer}catch{try{Le=new O.ClipboardEvent("").clipboardData}catch{}}return Le&&Le.items&&Le.files?Le:null},qe=function(Le,Xe){if(n(Le)&&z("Symbol"),!b(Le))return Le;if(Xe){if(Te(Xe,Le))return Me(Xe,Le)}else Xe=new Ce;var Oe=y(Le),ye=!1,We,Je,$e,lt,_e,he,ke,Ve,ze,Ke;switch(Oe){case"Array":$e=ce(o(Le)),ye=!0;break;case"Object":$e={},ye=!0;break;case"Map":$e=new Ce,ye=!0;break;case"Set":$e=new xe,ye=!0;break;case"RegExp":$e=new RegExp(Le.source,U(Le));break;case"Error":switch(Je=Le.name,Je){case"AggregateError":$e=F("AggregateError")([]);break;case"EvalError":$e=ve();break;case"RangeError":$e=ae();break;case"ReferenceError":$e=D();break;case"SyntaxError":$e=oe();break;case"TypeError":$e=re();break;case"URIError":$e=B();break;case"CompileError":$e=de();break;case"LinkError":$e=pe();break;case"RuntimeError":$e=ie();break;default:$e=J()}ye=!0;break;case"DOMException":$e=new Ae(Le.message,Le.name),ye=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":We=O[Oe],b(We)||ee(Oe),$e=new We(qe(Le.buffer,Xe),Le.byteOffset,Oe==="DataView"?Le.byteLength:Le.length);break;case"DOMQuad":try{$e=new DOMQuad(qe(Le.p1,Xe),qe(Le.p2,Xe),qe(Le.p3,Xe),qe(Le.p4,Xe))}catch{be?$e=be(Le):ee(Oe)}break;case"FileList":if(lt=Pe(),lt){for(_e=0,he=o(Le);_e<he;_e++)lt.items.add(qe(Le[_e],Xe));$e=lt.files}else be?$e=be(Le):ee(Oe);break;case"ImageData":try{$e=new ImageData(qe(Le.data,Xe),Le.width,Le.height,{colorSpace:Le.colorSpace})}catch{be?$e=be(Le):ee(Oe)}break;default:if(be)$e=be(Le);else switch(Oe){case"BigInt":$e=Q(Le.valueOf());break;case"Boolean":$e=Q(K(Le));break;case"Number":$e=Q(me(Le));break;case"String":$e=Q(Se(Le));break;case"Date":$e=new le(fe(Le));break;case"ArrayBuffer":We=O.DataView,!We&&typeof Le.slice!="function"&&ee(Oe);try{if(typeof Le.slice=="function")$e=Le.slice(0);else for(he=Le.byteLength,$e=new ArrayBuffer(he),ze=new We(Le),Ke=new We($e),_e=0;_e<he;_e++)Ke.setUint8(_e,ze.getUint8(_e))}catch{throw new Ae("ArrayBuffer is detached",Re)}break;case"SharedArrayBuffer":$e=Le;break;case"Blob":try{$e=Le.slice(0,Le.size,Le.type)}catch{ee(Oe)}break;case"DOMPoint":case"DOMPointReadOnly":We=O[Oe];try{$e=We.fromPoint?We.fromPoint(Le):new We(Le.x,Le.y,Le.z,Le.w)}catch{ee(Oe)}break;case"DOMRect":case"DOMRectReadOnly":We=O[Oe];try{$e=We.fromRect?We.fromRect(Le):new We(Le.x,Le.y,Le.width,Le.height)}catch{ee(Oe)}break;case"DOMMatrix":case"DOMMatrixReadOnly":We=O[Oe];try{$e=We.fromMatrix?We.fromMatrix(Le):new We(Le)}catch{ee(Oe)}break;case"AudioData":case"VideoFrame":g(Le.clone)||ee(Oe);try{$e=Le.clone()}catch{z(Oe)}break;case"File":try{$e=new File([Le],Le.name,Le)}catch{ee(Oe)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ee(Oe);default:z(Oe)}}if(Ne(Xe,Le,$e),ye)switch(Oe){case"Array":case"Object":for(ke=X(Le),_e=0,he=o(ke);_e<he;_e++)Ve=ke[_e],N($e,Ve,qe(Le[Ve],Xe));break;case"Map":Le.forEach(function(et,st){Ne($e,qe(st,Xe),qe(et,Xe))});break;case"Set":Le.forEach(function(et){q($e,qe(et,Xe))});break;case"Error":w($e,"message",qe(Le.message,Xe)),j(Le,"cause")&&w($e,"cause",qe(Le.cause,Xe)),Je=="AggregateError"&&($e.errors=qe(Le.errors,Xe));case"DOMException":H&&w($e,"stack",qe(Le.stack,Xe))}return $e},Qe=Ge&&!C(function(){if(se&&Y>92||ne&&Y>94||ue&&Y>97)return!1;var Le=new ArrayBuffer(8),Xe=Ge(Le,{transfer:[Le]});return Le.byteLength!=0||Xe.byteLength!=8}),Ze=function(Le,Xe){if(!b(Le))throw re("Transfer option cannot be converted to a sequence");var Oe=[];h(Le,function(ze){G(Oe,x(ze))});var ye=0,We=o(Oe),Je,$e,lt,_e,he,ke,Ve;if(Qe)for(_e=Ge(Oe,{transfer:Oe});ye<We;)Ne(Xe,Oe[ye],_e[ye++]);else for(;ye<We;){if(Je=Oe[ye++],Te(Xe,Je))throw new Ae("Duplicate transferable",Re);switch($e=y(Je),$e){case"ImageBitmap":lt=O.OffscreenCanvas,M(lt)||ee($e,Ee);try{ke=new lt(Je.width,Je.height),Ve=ke.getContext("bitmaprenderer"),Ve.transferFromImageBitmap(Je),he=ke.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!g(Je.clone)||!g(Je.close))&&ee($e,Ee);try{he=Je.clone(),Je.close()}catch{}break;case"ArrayBuffer":case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ee($e,Ee)}if(he===void 0)throw new Ae("This object cannot be transferred: "+$e,Re);Ne(Xe,Je,he)}};_({global:!0,enumerable:!0,sham:!Qe,forced:at},{structuredClone:function(Le){var Xe=A(arguments.length,1)>1&&!P(arguments[1])?x(arguments[1]):void 0,Oe=Xe?Xe.transfer:void 0,ye;return Oe!==void 0&&(ye=new Ce,Ze(Oe,ye)),qe(Le,ye)}})},(T,c,t)=>{var s=t(17),_=t(10),O=t(24),F=t(82),S=t(27),C=t(54),u=function(){},g=[],M=S("Reflect","construct"),P=/^\s*(?:class|function)\b/,b=s(P.exec),n=!P.exec(u),h=function(y){if(!O(y))return!1;try{return M(u,g,y),!0}catch{return!1}},x=function(y){if(!O(y))return!1;switch(F(y)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return n||!!b(P,C(y))}catch{return!0}};x.sham=!0,T.exports=!M||_(function(){var y;return h(h.call)||!h(Object)||!h(function(){y=!0})||y})?x:h},T=>{var c=TypeError;T.exports=function(t,s){if(t<s)throw c("Not enough arguments");return t}},(T,c,t)=>{var s=t(11),_=t(42),O=t(28),F=t(127),S=RegExp.prototype;T.exports=function(C){var u=C.flags;return u===void 0&&!("flags"in S)&&!_(C,"flags")&&O(S,C)?s(F,C):u}},(T,c,t)=>{var s=t(50);T.exports=function(){var _=s(this),O="";return _.hasIndices&&(O+="d"),_.global&&(O+="g"),_.ignoreCase&&(O+="i"),_.multiline&&(O+="m"),_.dotAll&&(O+="s"),_.unicode&&(O+="u"),_.unicodeSets&&(O+="v"),_.sticky&&(O+="y"),O}},(T,c,t)=>{var s=t(17),_=Map.prototype;T.exports={Map,set:s(_.set),get:s(_.get),has:s(_.has),remove:s(_.delete),proto:_}},(T,c,t)=>{var s=t(17),_=Set.prototype;T.exports={Set,add:s(_.add),has:s(_.has),remove:s(_.delete),proto:_,$has:_.has,$keys:_.keys}},(T,c,t)=>{var s=t(10),_=t(14);T.exports=!s(function(){var O=Error("a");return"stack"in O?(Object.defineProperty(O,"stack",_(1,7)),O.stack!==7):!0})},(T,c,t)=>{var s=t(132),_=t(133);T.exports=!s&&!_&&typeof window=="object"&&typeof document=="object"},T=>{T.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(T,c,t)=>{var s=t(18);T.exports=typeof process<"u"&&s(process)=="process"},(T,c,t)=>{var s=t(7);T.exports=s},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var W,E,p,v,I,k,m;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(136),_display_utils=__w_pdfjs_require__(139),_font_loader=__w_pdfjs_require__(142),_canvas=__w_pdfjs_require__(143),_worker_options=__w_pdfjs_require__(146),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(147),_metadata=__w_pdfjs_require__(148),_optional_content_config=__w_pdfjs_require__(149),_transport_stream=__w_pdfjs_require__(150),_xfa_text=__w_pdfjs_require__(151);function _classPrivateFieldSet(T,c,t){var s=_classExtractFieldDescriptor(T,c,"set");return _classApplyDescriptorSet(T,s,t),t}function _classApplyDescriptorSet(T,c,t){if(c.set)c.set.call(T,t);else{if(!c.writable)throw new TypeError("attempted to set read only private field");c.value=t}}function _classPrivateMethodInitSpec(T,c){_checkPrivateRedeclaration(T,c),c.add(T)}function _classPrivateFieldInitSpec(T,c,t){_checkPrivateRedeclaration(T,c),c.set(T,t)}function _checkPrivateRedeclaration(T,c){if(c.has(T))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(T,c,t){if(!c.has(T))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldGet(T,c){var t=_classExtractFieldDescriptor(T,c,"get");return _classApplyDescriptorGet(T,t)}function _classExtractFieldDescriptor(T,c,t){if(!c.has(T))throw new TypeError("attempted to "+t+" private field on non-instance");return c.get(T)}function _classApplyDescriptorGet(T,c){return c.get?c.get.call(T):c.value}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:T,NodeCMapReaderFactory:c,NodeStandardFontDataFactory:t}=__w_pdfjs_require__(152);exports.DefaultCanvasFactory=DefaultCanvasFactory=T,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=c,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=t}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:T}=__w_pdfjs_require__(153);createPDFNetworkStream=c=>new T(c)}else{const{PDFNetworkStream:T}=__w_pdfjs_require__(156),{PDFFetchStream:c}=__w_pdfjs_require__(157);createPDFNetworkStream=t=>(0,_display_utils.isValidFetchUrl)(t.url)?new c(t):new T(t)}function getDocument(T){if(typeof T=="string"||T instanceof URL)T={url:T};else if((0,_util.isArrayBuffer)(T))T={data:T};else if(T instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),T={range:T};else if(typeof T!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!T.url&&!T.data&&!T.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,t=T.url?getUrlProp(T.url):null,s=T.data?getDataProp(T.data):null,_=T.httpHeaders||null,O=T.withCredentials===!0,F=T.password??null,S=T.range instanceof PDFDataRangeTransport?T.range:null,C=Number.isInteger(T.rangeChunkSize)&&T.rangeChunkSize>0?T.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let u=T.worker instanceof PDFWorker?T.worker:null;const g=T.verbosity,M=typeof T.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(T.docBaseUrl)?T.docBaseUrl:null,P=typeof T.cMapUrl=="string"?T.cMapUrl:null,b=T.cMapPacked!==!1,n=T.CMapReaderFactory||DefaultCMapReaderFactory,h=typeof T.standardFontDataUrl=="string"?T.standardFontDataUrl:null,x=T.StandardFontDataFactory||DefaultStandardFontDataFactory,y=T.stopAtErrors!==!0,j=Number.isInteger(T.maxImageSize)&&T.maxImageSize>-1?T.maxImageSize:-1,N=T.isEvalSupported!==!1,w=typeof T.isOffscreenCanvasSupported=="boolean"?T.isOffscreenCanvasSupported:!_is_node.isNodeJS,o=typeof T.disableFontFace=="boolean"?T.disableFontFace:_is_node.isNodeJS,A=T.fontExtraProperties===!0,U=T.enableXfa===!0,$=T.ownerDocument||globalThis.document,V=T.disableRange===!0,H=T.disableStream===!0,Y=T.disableAutoFetch===!0,ue=T.pdfBug===!0,se=S?S.length:T.length??NaN,ne=typeof T.useSystemFonts=="boolean"?T.useSystemFonts:!_is_node.isNodeJS&&!o,Q=typeof T.useWorkerFetch=="boolean"?T.useWorkerFetch:n===_display_utils.DOMCMapReaderFactory&&x===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(P,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI),ce=null;(0,_util.setVerbosityLevel)(g);const le=Q?null:{cMapReaderFactory:new n({baseUrl:P,isCompressed:b}),standardFontDataFactory:new x({baseUrl:h})};if(!u){const D={verbosity:g,port:_worker_options.GlobalWorkerOptions.workerPort};u=D.port?PDFWorker.fromPort(D):new PDFWorker(D),c._worker=u}const J=c.docId,ve={docId:J,apiVersion:"3.4.120",data:s,password:F,disableAutoFetch:Y,rangeChunkSize:C,length:se,docBaseUrl:M,enableXfa:U,evaluatorOptions:{maxImageSize:j,disableFontFace:o,ignoreErrors:y,isEvalSupported:N,isOffscreenCanvasSupported:w,fontExtraProperties:A,useSystemFonts:ne,cMapUrl:Q?P:null,standardFontDataUrl:Q?h:null}},ae={ignoreErrors:y,isEvalSupported:N,disableFontFace:o,fontExtraProperties:A,enableXfa:U,ownerDocument:$,disableAutoFetch:Y,pdfBug:ue,styleElement:ce};return u.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const D=_fetchDocument(u,ve),oe=new Promise(function(re){let B;S?B=new _transport_stream.PDFDataTransportStream({length:se,initialData:S.initialData,progressiveDone:S.progressiveDone,contentDispositionFilename:S.contentDispositionFilename,disableRange:V,disableStream:H},S):s||(B=createPDFNetworkStream({url:t,length:se,httpHeaders:_,withCredentials:O,rangeChunkSize:C,disableRange:V,disableStream:H})),re(B)});return Promise.all([D,oe]).then(function(re){let[B,L]=re;if(c.destroyed)throw new Error("Loading aborted");const te=new _message_handler.MessageHandler(J,B,u.port),de=new WorkerTransport(te,c,L,ae,le);c._transport=de,te.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(T,c){if(T.destroyed)throw new Error("Worker was destroyed");const t=await T.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(T.destroyed)throw new Error("Worker was destroyed");return t}function getUrlProp(T){if(T instanceof URL)return T.href;try{return new URL(T,window.location).href}catch{if(_is_node.isNodeJS&&typeof T=="string")return T}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(T){if(_is_node.isNodeJS&&typeof Buffer<"u"&&T instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(T);if(T instanceof Uint8Array&&T.byteLength===T.buffer.byteLength)return T;if(typeof T=="string")return(0,_util.stringToBytes)(T);if(typeof T=="object"&&!isNaN(T==null?void 0:T.length)||(0,_util.isArrayBuffer)(T))return new Uint8Array(T);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const l=class{constructor(){nt(this,E,null),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Kn(l,W)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return Ue(this,E)}set onUnsupportedFeature(T){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),rt(this,E,T)}get promise(){return this._capability.promise}async destroy(){var T;this.destroyed=!0,await((T=this._transport)===null||T===void 0?void 0:T.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=l;W=new WeakMap,E=new WeakMap,nt(PDFDocumentLoadingTask,W,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=c,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,t){for(const s of this._rangeListeners)s(c,t)}onDataProgress(c,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(c,t)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,t){this._pdfInfo=c,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,t,s,_){let O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=c,this._pageInfo=t,this._ownerDocument=_,this._transport=s,this._stats=O?new _display_utils.StatTimer:null,this._pdfBug=O,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:c,rotation:t=this.rotate,offsetX:s=0,offsetY:_=0,dontFlip:O=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:t,offsetX:s,offsetY:_,dontFlip:O})}getAnnotations(){let{intent:c="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)===null||c===void 0?void 0:c.children[this._pageIndex])||null}render(c){var t,s;let{canvasContext:_,viewport:O,intent:F="display",annotationMode:S=_util.AnnotationMode.ENABLE,transform:C=null,canvasFactory:u=null,background:g=null,optionalContentConfigPromise:M=null,annotationCanvasMap:P=null,pageColors:b=null,printAnnotationStorage:n=null}=c;(t=this._stats)===null||t===void 0||t.time("Overall");const h=this._transport.getRenderingIntent(F,S,n);this.pendingCleanup=!1,M||(M=this._transport.getOptionalContentConfig());let x=this._intentStates.get(h.cacheKey);x||(x=Object.create(null),this._intentStates.set(h.cacheKey,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const y=u||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),j=!!(h.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!x.displayReadyCapability){var N;x.displayReadyCapability=(0,_util.createPromiseCapability)(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)===null||N===void 0||N.time("Page Request"),this._pumpOperatorList(h)}const w=U=>{var $,V;x.renderTasks.delete(o),(this.cleanupAfterRender||j)&&(this.pendingCleanup=!0),this._tryCleanup(),U?(o.capability.reject(U),this._abortOperatorList({intentState:x,reason:U instanceof Error?U:new Error(U)})):o.capability.resolve(),($=this._stats)===null||$===void 0||$.timeEnd("Rendering"),(V=this._stats)===null||V===void 0||V.timeEnd("Overall")},o=new InternalRenderTask({callback:w,params:{canvasContext:_,viewport:O,transform:C,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:P,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:y,useRequestAnimationFrame:!j,pdfBug:this._pdfBug,pageColors:b});((s=x).renderTasks||(s.renderTasks=new Set)).add(o);const A=o.task;return Promise.all([x.displayReadyCapability.promise,M]).then(U=>{var $;let[V,H]=U;if(this.pendingCleanup){w();return}($=this._stats)===null||$===void 0||$.time("Rendering"),o.initializeGraphics({transparency:V,optionalContentConfig:H}),o.operatorListChanged()}).catch(w),A}getOperatorList(){let{intent:c="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:s=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function _(){F.operatorList.lastChunk&&(F.opListReadCapability.resolve(F.operatorList),F.renderTasks.delete(S))}const O=this._transport.getRenderingIntent(c,t,s,!0);let F=this._intentStates.get(O.cacheKey);F||(F=Object.create(null),this._intentStates.set(O.cacheKey,F));let S;if(!F.opListReadCapability){var C,u;S=Object.create(null),S.operatorListChanged=_,F.opListReadCapability=(0,_util.createPromiseCapability)(),((C=F).renderTasks||(C.renderTasks=new Set)).add(S),F.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)===null||u===void 0||u.time("Page Request"),this._pumpOperatorList(O)}return F.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:c=!1,includeMarkedContent:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:c!==!0,includeMarkedContent:t===!0},{highWaterMark:100,size(_){return _.items.length}})}getTextContent(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(s=>_xfa_text.XfaText.textContent(s));const t=this.streamTextContent(c);return new Promise(function(s,_){function O(){F.read().then(function(C){let{value:u,done:g}=C;if(g){s(S);return}Object.assign(S.styles,u.styles),S.items.push(...u.items),O()},_)}const F=t.getReader(),S={items:[],styles:Object.create(null)};O()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)c.push(s.completed),s.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(c)}cleanup(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(c)}_tryCleanup(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),c&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(c,t){var s,_;const O=this._intentStates.get(t);O&&((s=this._stats)===null||s===void 0||s.timeEnd("Page Request"),(_=O.displayReadyCapability)===null||_===void 0||_.resolve(c))}_renderPageChunk(c,t){for(let s=0,_=c.length;s<_;s++)t.operatorList.fnArray.push(c.fnArray[s]),t.operatorList.argsArray.push(c.argsArray[s]);t.operatorList.lastChunk=c.lastChunk,t.operatorList.separateAnnots=c.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();c.lastChunk&&this._tryCleanup()}_pumpOperatorList(c){let{renderingIntent:t,cacheKey:s,annotationStorageMap:_}=c;const O=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:s,annotationStorage:_}).getReader(),F=this._intentStates.get(s);F.streamReader=O;const S=()=>{O.read().then(C=>{let{value:u,done:g}=C;if(g){F.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,F),S())},C=>{if(F.streamReader=null,!this._transport.destroyed){if(F.operatorList){F.operatorList.lastChunk=!0;for(const u of F.renderTasks)u.operatorListChanged();this._tryCleanup()}if(F.displayReadyCapability)F.displayReadyCapability.reject(C);else if(F.opListReadCapability)F.opListReadCapability.reject(C);else throw C}})};S()}_abortOperatorList(c){let{intentState:t,reason:s,force:_=!1}=c;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!_){if(t.renderTasks.size>0)return;if(s instanceof _display_utils.RenderingCancelledException){let O=RENDERING_CANCELLED_TIMEOUT;s.extraDelay>0&&s.extraDelay<1e3&&(O+=s.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:s,force:!0})},O);return}}if(t.streamReader.cancel(new _util.AbortException(s.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[O,F]of this._intentStates)if(F===t){this._intentStates.delete(O);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){nt(this,p,new Set),nt(this,v,Promise.resolve())}postMessage(c,t){const s={data:structuredClone(c,t)};Ue(this,v).then(()=>{for(const _ of Ue(this,p))_.call(this,s)})}addEventListener(c,t){Ue(this,p).add(t)}removeEventListener(c,t){Ue(this,p).delete(t)}terminate(){Ue(this,p).clear()}}p=new WeakMap,v=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof r=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const T=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;T&&(PDFWorkerUtil.fallbackWorkerSrc=T.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(T,c){let t;try{if(t=new URL(T),!t.origin||t.origin==="null")return!1}catch{return!1}const s=new URL(c,t);return t.origin===s.origin},PDFWorkerUtil.createCDNWrapper=function(T){const c=`importScripts("${T}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class{constructor(){let{name:T=null,port:c=null,verbosity:t=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(c&&Ue(_PDFWorker,I).has(c))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=T,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,c){Ue(_PDFWorker,I).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(T){this._port=T,this._messageHandler=new _message_handler.MessageHandler("main","worker",T),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:T}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,T)||(T=PDFWorkerUtil.createCDNWrapper(new URL(T,window.location).href));const c=new Worker(T),t=new _message_handler.MessageHandler("main","worker",c),s=()=>{c.removeEventListener("error",_),t.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},_=()=>{this._webWorker||s()};c.addEventListener("error",_),t.on("test",F=>{if(c.removeEventListener("error",_),this.destroyed){s();return}F?(this._messageHandler=t,this._port=c,this._webWorker=c,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),c.terminate())}),t.on("ready",F=>{if(c.removeEventListener("error",_),this.destroyed){s();return}try{O()}catch{this._setupFakeWorker()}});const O=()=>{const F=new Uint8Array;t.send("test",F,[F.buffer])};O();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(T=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const t=`fake${PDFWorkerUtil.fakeWorkerId++}`,s=new _message_handler.MessageHandler(t+"_worker",t,c);T.setup(s,c);const _=new _message_handler.MessageHandler(t,t+"_worker",c);this._messageHandler=_,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})}).catch(T=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${T.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Ue(_PDFWorker,I).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(T){if(!(T!=null&&T.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ue(this,I).has(T.port)?Ue(this,I).get(T.port):new _PDFWorker(T)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var T;return((T=globalThis.pdfjsWorker)===null||T===void 0?void 0:T.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof r=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;I=new WeakMap,nt(PDFWorker,I,new WeakMap),exports.PDFWorker=PDFWorker;var _methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_cacheSimpleMethod=new WeakSet;class WorkerTransport{constructor(c,t,s,_,O){_classPrivateMethodInitSpec(this,_cacheSimpleMethod),_classPrivateFieldInitSpec(this,_methodPromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),this.messageHandler=c,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:_.ownerDocument,styleElement:_.styleElement}),this._params=_,this.cMapReaderFactory=O==null?void 0:O.cMapReaderFactory,this.standardFontDataFactory=O==null?void 0:O.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,O=_util.RenderingIntentFlag.DISPLAY,F=null;switch(c){case"any":O=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":O=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(t){case _util.AnnotationMode.DISABLE:O+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:O+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:O+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,F=(O&_util.RenderingIntentFlag.PRINT&&s instanceof _annotation_storage.PrintAnnotationStorage?s:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return _&&(O+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:O,cacheKey:`${O}_${_annotation_storage.AnnotationStorage.getHash(F)}`,annotationStorageMap:F}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const s of _classPrivateFieldGet(this,_pageCache).values())c.push(s._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return c.push(t),Promise.all(c).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldGet(this,_methodPromises).clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:t}=this;c.on("GetReader",(s,_)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=O=>{this._lastProgress={loaded:O.loaded,total:O.total}},_.onPull=()=>{this._fullReader.read().then(function(O){let{value:F,done:S}=O;if(S){_.close();return}(0,_util.assert)(F instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(F),1,[F])}).catch(O=>{_.error(O)})},_.onCancel=O=>{this._fullReader.cancel(O),_.ready.catch(F=>{if(!this.destroyed)throw F})}}),c.on("ReaderHeadersReady",s=>{const _=(0,_util.createPromiseCapability)(),O=this._fullReader;return O.headersReady.then(()=>{if(!O.isStreamingSupported||!O.isRangeSupported){if(this._lastProgress){var F;(F=t.onProgress)===null||F===void 0||F.call(t,this._lastProgress)}O.onProgress=S=>{var C;(C=t.onProgress)===null||C===void 0||C.call(t,{loaded:S.loaded,total:S.total})}}_.resolve({isStreamingSupported:O.isStreamingSupported,isRangeSupported:O.isRangeSupported,contentLength:O.contentLength})},_.reject),_.promise}),c.on("GetRangeReader",(s,_)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const O=this._networkStream.getRangeReader(s.begin,s.end);if(!O){_.close();return}_.onPull=()=>{O.read().then(function(F){let{value:S,done:C}=F;if(C){_.close();return}(0,_util.assert)(S instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(S),1,[S])}).catch(F=>{_.error(F)})},_.onCancel=F=>{O.cancel(F),_.ready.catch(S=>{if(!this.destroyed)throw S})}}),c.on("GetDoc",s=>{let{pdfInfo:_}=s;this._numPages=_.numPages,this._htmlForXfa=_.htmlForXfa,delete _.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(_,this))}),c.on("DocException",function(s){let _;switch(s.name){case"PasswordException":_=new _util.PasswordException(s.message,s.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(s.message);break;case"MissingPDFException":_=new _util.MissingPDFException(s.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(s.message,s.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(s.message,s.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(_)}),c.on("PasswordRequest",s=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const _=O=>{O instanceof Error?this._passwordCapability.reject(O):this._passwordCapability.resolve({password:O})};try{t.onPassword(_,s.code)}catch(O){this._passwordCapability.reject(O)}}else this._passwordCapability.reject(new _util.PasswordException(s.message,s.code));return this._passwordCapability.promise}),c.on("DataLoaded",s=>{var _;(_=t.onProgress)===null||_===void 0||_.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),c.on("StartRenderPage",s=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),c.on("commonobj",s=>{var _;let[O,F,S]=s;if(!this.destroyed&&!this.commonObjs.has(O))switch(F){case"Font":const C=this._params;if("error"in S){const M=S.error;(0,_util.warn)(`Error during font loading: ${M}`),this.commonObjs.resolve(O,M);break}let u=null;C.pdfBug&&(_=globalThis.FontInspector)!==null&&_!==void 0&&_.enabled&&(u={registerFont(M,P){globalThis.FontInspector.fontAdded(M,P)}});const g=new _font_loader.FontFaceObject(S,{isEvalSupported:C.isEvalSupported,disableFontFace:C.disableFontFace,ignoreErrors:C.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:u});this.fontLoader.bind(g).catch(M=>c.sendWithPromise("FontFallback",{id:O})).finally(()=>{!C.fontExtraProperties&&g.data&&(g.data=null),this.commonObjs.resolve(O,g)});break;case"FontPath":case"Image":this.commonObjs.resolve(O,S);break;default:throw new Error(`Got unknown common object type ${F}`)}}),c.on("obj",s=>{let[_,O,F,S]=s;if(this.destroyed)return;const C=_classPrivateFieldGet(this,_pageCache).get(O);if(!C.objs.has(_))switch(F){case"Image":C.objs.resolve(_,S);const g=8e6;if(S){let M;if(S.bitmap){const{width:P,height:b}=S;M=P*b*4}else{var u;M=((u=S.data)===null||u===void 0?void 0:u.length)||0}M>g&&(C.cleanupAfterRender=!0)}break;case"Pattern":C.objs.resolve(_,S);break;default:throw new Error(`Got unknown object type ${F}`)}}),c.on("DocProgress",s=>{var _;this.destroyed||(_=t.onProgress)===null||_===void 0||_.call(t,{loaded:s.loaded,total:s.total})}),c.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),c.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(c){var t,s;let{featureId:_}=c;this.destroyed||(t=(s=this.loadingTask).onUnsupportedFeature)===null||t===void 0||t.call(s,_)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var c;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((c=this._fullReader)===null||c===void 0?void 0:c.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=c-1,s=_classPrivateFieldGet(this,_pagePromises).get(t);if(s)return s;const _=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(O=>{if(this.destroyed)throw new Error("Transport destroyed");const F=new PDFPageProxy(t,O,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(t,F),F});return _classPrivateFieldGet(this,_pagePromises).set(t,_),_}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:t})}getFieldObjects(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"GetFieldObjects")}hasJSActions(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",t=_classPrivateFieldGet(this,_methodPromises).get(c);if(t)return t;const s=this.messageHandler.sendWithPromise(c,null).then(_=>{var O,F;return{info:_[0],metadata:_[1]?new _metadata.Metadata(_[1]):null,contentDispositionFilename:((O=this._fullReader)===null||O===void 0?void 0:O.filename)??null,contentLength:((F=this._fullReader)===null||F===void 0?void 0:F.contentLength)??null}});return _classPrivateFieldGet(this,_methodPromises).set(c,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of _classPrivateFieldGet(this,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),_classPrivateFieldGet(this,_methodPromises).clear()}}get loadingParams(){const{disableAutoFetch:c,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:t})}}function _cacheSimpleMethod2(T){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const t=_classPrivateFieldGet(this,_methodPromises).get(T);if(t)return t;const s=this.messageHandler.sendWithPromise(T,c);return _classPrivateFieldGet(this,_methodPromises).set(T,s),s}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(c){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t){const _=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,c);return _.capability.promise.then(()=>t(_.data)),null}const s=_classPrivateFieldGet(this,_objs)[c];if(!(s!=null&&s.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return s.data}has(c){const t=_classPrivateFieldGet(this,_objs)[c];return(t==null?void 0:t.capability.settled)||!1}resolve(c){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const s=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,c);s.data=t,s.capability.resolve()}clear(){for(const t in _classPrivateFieldGet(this,_objs)){var c;const{data:s}=_classPrivateFieldGet(this,_objs)[t];s==null||(c=s.bitmap)===null||c===void 0||c.close()}_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(T){return _classPrivateFieldGet(this,_objs)[T]||(_classPrivateFieldGet(this,_objs)[T]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(c){nt(this,k,null),rt(this,k,c),this.onContinue=null}get promise(){return Ue(this,k).capability.promise}cancel(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;Ue(this,k).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=Ue(this,k).operatorList;if(!c)return!1;const{annotationCanvasMap:t}=Ue(this,k);return c.form||c.canvas&&(t==null?void 0:t.size)>0}}k=new WeakMap,exports.RenderTask=RenderTask;const R=class{constructor(T){let{callback:c,params:t,objs:s,commonObjs:_,annotationCanvasMap:O,operatorList:F,pageIndex:S,canvasFactory:C,useRequestAnimationFrame:u=!1,pdfBug:g=!1,pageColors:M=null}=T;this.callback=c,this.params=t,this.objs=s,this.commonObjs=_,this.annotationCanvasMap=O,this.operatorListIdx=null,this.operatorList=F,this._pageIndex=S,this.canvasFactory=C,this._pdfBug=g,this.pageColors=M,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(T){var c,t;let{transparency:s=!1,optionalContentConfig:_}=T;if(this.cancelled)return;if(this._canvas){if(Ue(R,m).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ue(R,m).add(this._canvas)}this._pdfBug&&(c=globalThis.StepperManager)!==null&&c!==void 0&&c.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:O,viewport:F,transform:S,background:C}=this.params;this.gfx=new _canvas.CanvasGraphics(O,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:_},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:S,viewport:F,transparency:s,background:C}),this.operatorListIdx=0,this.graphicsReady=!0,(t=this.graphicsReadyCallback)===null||t===void 0||t.call(this)}cancel(){var T;let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(T=this.gfx)===null||T===void 0||T.endDrawing(),this._canvas&&Ue(R,m).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",t))}operatorListChanged(){var T;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(T=this.stepper)===null||T===void 0||T.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&Ue(R,m).delete(this._canvas),this.callback())))}};let InternalRenderTask=R;m=new WeakMap,nt(InternalRenderTask,m,new WeakSet);const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build},(T,c,t)=>{var s;Object.defineProperty(c,"__esModule",{value:!0}),c.PrintAnnotationStorage=c.AnnotationStorage=void 0;var _=t(1),O=t(137),F=t(141);function S(A,U){u(A,U),U.add(A)}function C(A,U,$){u(A,U),U.set(A,$)}function u(A,U){if(U.has(A))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(A,U,$){var V=n(A,U,"set");return M(A,V,$),$}function M(A,U,$){if(U.set)U.set.call(A,$);else{if(!U.writable)throw new TypeError("attempted to set read only private field");U.value=$}}function P(A,U,$){if(!U.has(A))throw new TypeError("attempted to get private field on non-instance");return $}function b(A,U){var $=n(A,U,"get");return h(A,$)}function n(A,U,$){if(!U.has(A))throw new TypeError("attempted to "+$+" private field on non-instance");return U.get(A)}function h(A,U){return U.get?U.get.call(A):U.value}var x=new WeakMap,y=new WeakMap,j=new WeakSet;class N{constructor(){S(this,j),C(this,x,{writable:!0,value:!1}),C(this,y,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(U,$){const V=b(this,y).get(U);return V===void 0?$:Object.assign($,V)}getRawValue(U){return b(this,y).get(U)}remove(U){if(b(this,y).delete(U),b(this,y).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const $ of b(this,y).values())if($ instanceof O.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(U,$){const V=b(this,y).get(U);let H=!1;if(V!==void 0)for(const[Y,ue]of Object.entries($))V[Y]!==ue&&(H=!0,V[Y]=ue);else H=!0,b(this,y).set(U,$);H&&P(this,j,w).call(this),$ instanceof O.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor($.constructor._type)}has(U){return b(this,y).has(U)}getAll(){return b(this,y).size>0?(0,_.objectFromMap)(b(this,y)):null}setAll(U){for(const[$,V]of Object.entries(U))this.setValue($,V)}get size(){return b(this,y).size}resetModified(){b(this,x)&&(g(this,x,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new o(this)}get serializable(){if(b(this,y).size===0)return null;const U=new Map;for(const[$,V]of b(this,y)){const H=V instanceof O.AnnotationEditor?V.serialize():V;H&&U.set($,H)}return U}static getHash(U){if(!U)return"";const $=new F.MurmurHash3_64;for(const[V,H]of U)$.update(`${V}:${JSON.stringify(H)}`);return $.hexdigest()}}c.AnnotationStorage=N;function w(){b(this,x)||(g(this,x,!0),typeof this.onSetModified=="function"&&this.onSetModified())}class o extends N{constructor(U){super(),nt(this,s,null),rt(this,s,structuredClone(U.serializable))}get print(){(0,_.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Ue(this,s)}}s=new WeakMap,c.PrintAnnotationStorage=o},(T,c,t)=>{var s,_,O,F,S,C;Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationEditor=void 0;var u=t(138),g=t(1);const M=class{constructor(b){nt(this,s,this.focusin.bind(this)),nt(this,_,this.focusout.bind(this)),nt(this,O,!1),nt(this,F,!1),nt(this,S,!1),Et(this,"_uiManager",null),nt(this,C,M._zIndex++),this.constructor===M&&(0,g.unreachable)("Cannot initialize AnnotationEditor."),this.parent=b.parent,this.id=b.id,this.width=this.height=null,this.pageIndex=b.parent.pageIndex,this.name=b.name,this.div=null,this._uiManager=b.uiManager;const{rotation:n,rawDims:{pageWidth:h,pageHeight:x,pageX:y,pageY:j}}=this.parent.viewport;this.rotation=n,this.pageDimensions=[h,x],this.pageTranslation=[y,j];const[N,w]=this.parentDimensions;this.x=b.x/N,this.y=b.y/w,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,g.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(b){this._uiManager.addCommands(b)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Ue(this,C)}setParent(b){b!==null&&(this.pageIndex=b.pageIndex,this.pageDimensions=b.pageDimensions),this.parent=b}focusin(b){Ue(this,O)?rt(this,O,!1):this.parent.setSelected(this)}focusout(b){var n;if(!this.isAttachedToDOM)return;const h=b.relatedTarget;h!=null&&h.closest(`#${this.id}`)||(b.preventDefault(),(n=this.parent)!==null&&n!==void 0&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(b){const n=this.parent.div.getBoundingClientRect();this.startX=b.clientX-n.x,this.startY=b.clientY-n.y,b.dataTransfer.setData("text/plain",this.id),b.dataTransfer.effectAllowed="move"}setAt(b,n,h,x){const[y,j]=this.parentDimensions;[h,x]=this.screenToPageTranslation(h,x),this.x=(b+h)/y,this.y=(n+x)/j,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(b,n){const[h,x]=this.parentDimensions;[b,n]=this.screenToPageTranslation(b,n),this.x+=b/h,this.y+=n/x,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(b,n){switch(this.parentRotation){case 90:return[n,-b];case 180:return[-b,-n];case 270:return[-n,b];default:return[b,n]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:b}=this._uiManager.viewParameters,[n,h]=this.pageDimensions;return[n*b,h*b]}setDims(b,n){const[h,x]=this.parentDimensions;this.div.style.width=`${100*b/h}%`,this.div.style.height=`${100*n/x}%`}fixDims(){const{style:b}=this.div,{height:n,width:h}=b,x=h.endsWith("%"),y=n.endsWith("%");if(x&&y)return;const[j,N]=this.parentDimensions;x||(b.width=`${100*parseFloat(h)/j}%`),y||(b.height=`${100*parseFloat(n)/N}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Ue(this,s)),this.div.addEventListener("focusout",Ue(this,_));const[b,n]=this.getInitialTranslation();return this.translate(b,n),(0,u.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(b){const{isMac:n}=g.FeatureTest.platform;if(b.button!==0||b.ctrlKey&&n){b.preventDefault();return}b.ctrlKey&&!n||b.shiftKey||b.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this),rt(this,O,!0)}getRect(b,n){const h=this.parentScale,[x,y]=this.pageDimensions,[j,N]=this.pageTranslation,w=b/h,o=n/h,A=this.x*x,U=this.y*y,$=this.width*x,V=this.height*y;switch(this.rotation){case 0:return[A+w+j,y-U-o-V+N,A+w+$+j,y-U-o+N];case 90:return[A+o+j,y-U+w+N,A+o+V+j,y-U+w+$+N];case 180:return[A-w-$+j,y-U+o+N,A-w+j,y-U+o+V+N];case 270:return[A-o-V+j,y-U-w-$+N,A-o+j,y-U-w+N];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(b,n){const[h,x,y,j]=b,N=y-h,w=j-x;switch(this.rotation){case 0:return[h,n-j,N,w];case 90:return[h,n-x,w,N];case 180:return[y,n-x,N,w];case 270:return[y,n-j,w,N];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rt(this,S,!0)}disableEditMode(){rt(this,S,!1)}isInEditMode(){return Ue(this,S)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var b;(b=this.div)===null||b===void 0||b.addEventListener("focusin",Ue(this,s))}serialize(){(0,g.unreachable)("An editor must be serializable")}static deserialize(b,n,h){const x=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:h});x.rotation=b.rotation;const[y,j]=x.pageDimensions,[N,w,o,A]=x.getRectInCurrentCoords(b.rect,j);return x.x=N/y,x.y=w/j,x.width=o/y,x.height=A/j,x}remove(){this.div.removeEventListener("focusin",Ue(this,s)),this.div.removeEventListener("focusout",Ue(this,_)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var b;(b=this.div)===null||b===void 0||b.classList.add("selectedEditor")}unselect(){var b;(b=this.div)===null||b===void 0||b.classList.remove("selectedEditor")}updateParams(b,n){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return Ue(this,F)}set isEditing(b){rt(this,F,b),b?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let P=M;s=new WeakMap,_=new WeakMap,O=new WeakMap,F=new WeakMap,S=new WeakMap,C=new WeakMap,Et(P,"_colorManager",new u.ColorManager),Et(P,"_zIndex",1),c.AnnotationEditor=P},(T,c,t)=>{var s,_,O,F,S;Object.defineProperty(c,"__esModule",{value:!0}),c.KeyboardManager=c.CommandManager=c.ColorManager=c.AnnotationEditorUIManager=void 0,c.bindEvents=A,c.opacityToHex=U;var C=t(1),u=t(139);function g(Oe,ye,We){return ye=M(ye),ye in Oe?Object.defineProperty(Oe,ye,{value:We,enumerable:!0,configurable:!0,writable:!0}):Oe[ye]=We,Oe}function M(Oe){var ye=P(Oe,"string");return typeof ye=="symbol"?ye:String(ye)}function P(Oe,ye){if(typeof Oe!="object"||Oe===null)return Oe;var We=Oe[Symbol.toPrimitive];if(We!==void 0){var Je=We.call(Oe,ye||"default");if(typeof Je!="object")return Je;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ye==="string"?String:Number)(Oe)}function b(Oe,ye,We){w(Oe,ye),ye.set(Oe,We)}function n(Oe,ye){var We=y(Oe,ye,"get");return h(Oe,We)}function h(Oe,ye){return ye.get?ye.get.call(Oe):ye.value}function x(Oe,ye,We){var Je=y(Oe,ye,"set");return j(Oe,Je,We),We}function y(Oe,ye,We){if(!ye.has(Oe))throw new TypeError("attempted to "+We+" private field on non-instance");return ye.get(Oe)}function j(Oe,ye,We){if(ye.set)ye.set.call(Oe,We);else{if(!ye.writable)throw new TypeError("attempted to set read only private field");ye.value=We}}function N(Oe,ye){w(Oe,ye),ye.add(Oe)}function w(Oe,ye){if(ye.has(Oe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(Oe,ye,We){if(!ye.has(Oe))throw new TypeError("attempted to get private field on non-instance");return We}function A(Oe,ye,We){for(const Je of We)ye.addEventListener(Je,Oe[Je].bind(Oe))}function U(Oe){return Math.round(Math.min(255,Math.max(1,255*Oe))).toString(16).padStart(2,"0")}class ${constructor(){nt(this,s,0)}getId(){return`${C.AnnotationEditorPrefix}${Kn(this,s)._++}`}}s=new WeakMap;class V{constructor(){nt(this,_,[]),nt(this,O,!1),nt(this,F,void 0),nt(this,S,-1);let ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;rt(this,F,ye)}add(ye){let{cmd:We,undo:Je,mustExec:$e,type:lt=NaN,overwriteIfSameType:_e=!1,keepUndo:he=!1}=ye;if($e&&We(),Ue(this,O))return;const ke={cmd:We,undo:Je,type:lt};if(Ue(this,S)===-1){Ue(this,_).length>0&&(Ue(this,_).length=0),rt(this,S,0),Ue(this,_).push(ke);return}if(_e&&Ue(this,_)[Ue(this,S)].type===lt){he&&(ke.undo=Ue(this,_)[Ue(this,S)].undo),Ue(this,_)[Ue(this,S)]=ke;return}const Ve=Ue(this,S)+1;Ve===Ue(this,F)?Ue(this,_).splice(0,1):(rt(this,S,Ve),Ve<Ue(this,_).length&&Ue(this,_).splice(Ve)),Ue(this,_).push(ke)}undo(){Ue(this,S)!==-1&&(rt(this,O,!0),Ue(this,_)[Ue(this,S)].undo(),rt(this,O,!1),rt(this,S,Ue(this,S)-1))}redo(){Ue(this,S)<Ue(this,_).length-1&&(rt(this,S,Ue(this,S)+1),rt(this,O,!0),Ue(this,_)[Ue(this,S)].cmd(),rt(this,O,!1))}hasSomethingToUndo(){return Ue(this,S)!==-1}hasSomethingToRedo(){return Ue(this,S)<Ue(this,_).length-1}destroy(){rt(this,_,null)}}_=new WeakMap,O=new WeakMap,F=new WeakMap,S=new WeakMap,c.CommandManager=V;var H=new WeakSet;class Y{constructor(ye){N(this,H),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:We}=C.FeatureTest.platform;for(const[Je,$e]of ye)for(const lt of Je){const _e=lt.startsWith("mac+");We&&_e?(this.callbacks.set(lt.slice(4),$e),this.allKeys.add(lt.split("+").at(-1))):!We&&!_e&&(this.callbacks.set(lt,$e),this.allKeys.add(lt.split("+").at(-1)))}}exec(ye,We){if(!this.allKeys.has(We.key))return;const Je=this.callbacks.get(o(this,H,ue).call(this,We));Je&&(Je.bind(ye)(),We.stopPropagation(),We.preventDefault())}}c.KeyboardManager=Y;function ue(Oe){Oe.altKey&&this.buffer.push("alt"),Oe.ctrlKey&&this.buffer.push("ctrl"),Oe.metaKey&&this.buffer.push("meta"),Oe.shiftKey&&this.buffer.push("shift"),this.buffer.push(Oe.key);const ye=this.buffer.join("+");return this.buffer.length=0,ye}const se=class{get _colors(){const Oe=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(Oe),(0,C.shadow)(this,"_colors",Oe)}convert(Oe){const ye=(0,u.getRGB)(Oe);if(!window.matchMedia("(forced-colors: active)").matches)return ye;for(const[We,Je]of this._colors)if(Je.every(($e,lt)=>$e===ye[lt]))return se._colorsMapping.get(We);return ye}getHexCode(Oe){const ye=this._colors.get(Oe);return ye?C.Util.makeHexColor(...ye):Oe}};let ne=se;Et(ne,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),c.ColorManager=ne;var Q=new WeakMap,ce=new WeakMap,le=new WeakMap,J=new WeakMap,ve=new WeakMap,ae=new WeakMap,D=new WeakMap,oe=new WeakMap,re=new WeakMap,B=new WeakMap,L=new WeakMap,te=new WeakMap,de=new WeakMap,pe=new WeakMap,ie=new WeakMap,Ae=new WeakMap,Ce=new WeakMap,Te=new WeakMap,Me=new WeakMap,Ne=new WeakMap,xe=new WeakMap,q=new WeakMap,X=new WeakMap,G=new WeakSet,K=new WeakSet,me=new WeakSet,Se=new WeakSet,fe=new WeakSet,ge=new WeakSet,Re=new WeakSet,Ee=new WeakSet,Ie=new WeakSet,je=new WeakSet,Be=new WeakSet;class Ge{constructor(ye,We,Je){N(this,Be),N(this,je),N(this,Ie),N(this,Ee),N(this,Re),N(this,ge),N(this,fe),N(this,Se),N(this,me),N(this,K),N(this,G),b(this,Q,{writable:!0,value:null}),b(this,ce,{writable:!0,value:new Map}),b(this,le,{writable:!0,value:new Map}),b(this,J,{writable:!0,value:null}),b(this,ve,{writable:!0,value:new V}),b(this,ae,{writable:!0,value:0}),b(this,D,{writable:!0,value:null}),b(this,oe,{writable:!0,value:new Set}),b(this,re,{writable:!0,value:null}),b(this,B,{writable:!0,value:new $}),b(this,L,{writable:!0,value:!1}),b(this,te,{writable:!0,value:C.AnnotationEditorType.NONE}),b(this,de,{writable:!0,value:new Set}),b(this,pe,{writable:!0,value:this.copy.bind(this)}),b(this,ie,{writable:!0,value:this.cut.bind(this)}),b(this,Ae,{writable:!0,value:this.paste.bind(this)}),b(this,Ce,{writable:!0,value:this.keydown.bind(this)}),b(this,Te,{writable:!0,value:this.onEditingAction.bind(this)}),b(this,Me,{writable:!0,value:this.onPageChanging.bind(this)}),b(this,Ne,{writable:!0,value:this.onScaleChanging.bind(this)}),b(this,xe,{writable:!0,value:this.onRotationChanging.bind(this)}),b(this,q,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),b(this,X,{writable:!0,value:null}),x(this,X,ye),x(this,re,We),n(this,re)._on("editingaction",n(this,Te)),n(this,re)._on("pagechanging",n(this,Me)),n(this,re)._on("scalechanging",n(this,Ne)),n(this,re)._on("rotationchanging",n(this,xe)),x(this,J,Je),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){o(this,K,tt).call(this),n(this,re)._off("editingaction",n(this,Te)),n(this,re)._off("pagechanging",n(this,Me)),n(this,re)._off("scalechanging",n(this,Ne)),n(this,re)._off("rotationchanging",n(this,xe));for(const ye of n(this,le).values())ye.destroy();n(this,le).clear(),n(this,ce).clear(),n(this,oe).clear(),x(this,Q,null),n(this,de).clear(),n(this,ve).destroy()}onPageChanging(ye){let{pageNumber:We}=ye;x(this,ae,We-1)}focusMainContainer(){n(this,X).focus()}addShouldRescale(ye){n(this,oe).add(ye)}removeShouldRescale(ye){n(this,oe).delete(ye)}onScaleChanging(ye){let{scale:We}=ye;this.commitOrRemove(),this.viewParameters.realScale=We*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Je of n(this,oe))Je.onScaleChanging()}onRotationChanging(ye){let{pagesRotation:We}=ye;this.commitOrRemove(),this.viewParameters.rotation=We}addToAnnotationStorage(ye){!ye.isEmpty()&&n(this,J)&&!n(this,J).has(ye.id)&&n(this,J).setValue(ye.id,ye)}copy(ye){if(ye.preventDefault(),n(this,Q)&&n(this,Q).commitOrRemove(),!this.hasSelection)return;const We=[];for(const Je of n(this,de))Je.isEmpty()||We.push(Je.serialize());We.length!==0&&ye.clipboardData.setData("application/pdfjs",JSON.stringify(We))}cut(ye){this.copy(ye),this.delete()}paste(ye){ye.preventDefault();let We=ye.clipboardData.getData("application/pdfjs");if(!We)return;try{We=JSON.parse(We)}catch($e){(0,C.warn)(`paste: "${$e.message}".`);return}if(!Array.isArray(We))return;this.unselectAll();const Je=n(this,le).get(n(this,ae));try{const $e=[];for(const he of We){const ke=Je.deserialize(he);if(!ke)return;$e.push(ke)}const lt=()=>{for(const he of $e)o(this,Ie,Ze).call(this,he);o(this,Be,Xe).call(this,$e)},_e=()=>{for(const he of $e)he.remove()};this.addCommands({cmd:lt,undo:_e,mustExec:!0})}catch($e){(0,C.warn)(`paste: "${$e.message}".`)}}keydown(ye){var We;(We=this.getActive())!==null&&We!==void 0&&We.shouldGetKeyboardEvents()||Ge._keyboardManager.exec(this,ye)}onEditingAction(ye){["undo","redo","delete","selectAll"].includes(ye.name)&&this[ye.name]()}setEditingState(ye){ye?(o(this,G,at).call(this),o(this,me,be).call(this),o(this,fe,ee).call(this,{isEditing:n(this,te)!==C.AnnotationEditorType.NONE,isEmpty:o(this,je,Le).call(this),hasSomethingToUndo:n(this,ve).hasSomethingToUndo(),hasSomethingToRedo:n(this,ve).hasSomethingToRedo(),hasSelectedEditor:!1})):(o(this,K,tt).call(this),o(this,Se,z).call(this),o(this,fe,ee).call(this,{isEditing:!1}))}registerEditorTypes(ye){if(!n(this,D)){x(this,D,ye);for(const We of n(this,D))o(this,ge,Pe).call(this,We.defaultPropertiesToUpdate)}}getId(){return n(this,B).getId()}get currentLayer(){return n(this,le).get(n(this,ae))}get currentPageIndex(){return n(this,ae)}addLayer(ye){n(this,le).set(ye.pageIndex,ye),n(this,L)?ye.enable():ye.disable()}removeLayer(ye){n(this,le).delete(ye.pageIndex)}updateMode(ye){if(x(this,te,ye),ye===C.AnnotationEditorType.NONE)this.setEditingState(!1),o(this,Ee,Qe).call(this);else{this.setEditingState(!0),o(this,Re,qe).call(this);for(const We of n(this,le).values())We.updateMode(ye)}}updateToolbar(ye){ye!==n(this,te)&&n(this,re).dispatch("switchannotationeditormode",{source:this,mode:ye})}updateParams(ye,We){if(n(this,D)){for(const Je of n(this,de))Je.updateParams(ye,We);for(const Je of n(this,D))Je.updateDefaultParams(ye,We)}}getEditors(ye){const We=[];for(const Je of n(this,ce).values())Je.pageIndex===ye&&We.push(Je);return We}getEditor(ye){return n(this,ce).get(ye)}addEditor(ye){n(this,ce).set(ye.id,ye)}removeEditor(ye){var We;n(this,ce).delete(ye.id),this.unselect(ye),(We=n(this,J))===null||We===void 0||We.remove(ye.id)}setActiveEditor(ye){n(this,Q)!==ye&&(x(this,Q,ye),ye&&o(this,ge,Pe).call(this,ye.propertiesToUpdate))}toggleSelected(ye){if(n(this,de).has(ye)){n(this,de).delete(ye),ye.unselect(),o(this,fe,ee).call(this,{hasSelectedEditor:this.hasSelection});return}n(this,de).add(ye),ye.select(),o(this,ge,Pe).call(this,ye.propertiesToUpdate),o(this,fe,ee).call(this,{hasSelectedEditor:!0})}setSelected(ye){for(const We of n(this,de))We!==ye&&We.unselect();n(this,de).clear(),n(this,de).add(ye),ye.select(),o(this,ge,Pe).call(this,ye.propertiesToUpdate),o(this,fe,ee).call(this,{hasSelectedEditor:!0})}isSelected(ye){return n(this,de).has(ye)}unselect(ye){ye.unselect(),n(this,de).delete(ye),o(this,fe,ee).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return n(this,de).size!==0}undo(){n(this,ve).undo(),o(this,fe,ee).call(this,{hasSomethingToUndo:n(this,ve).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:o(this,je,Le).call(this)})}redo(){n(this,ve).redo(),o(this,fe,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:n(this,ve).hasSomethingToRedo(),isEmpty:o(this,je,Le).call(this)})}addCommands(ye){n(this,ve).add(ye),o(this,fe,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:o(this,je,Le).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ye=[...n(this,de)],We=()=>{for(const $e of ye)$e.remove()},Je=()=>{for(const $e of ye)o(this,Ie,Ze).call(this,$e)};this.addCommands({cmd:We,undo:Je,mustExec:!0})}commitOrRemove(){var ye;(ye=n(this,Q))===null||ye===void 0||ye.commitOrRemove()}selectAll(){for(const ye of n(this,de))ye.commit();o(this,Be,Xe).call(this,n(this,ce).values())}unselectAll(){if(n(this,Q)){n(this,Q).commitOrRemove();return}if(n(this,de).size!==0){for(const ye of n(this,de))ye.unselect();n(this,de).clear(),o(this,fe,ee).call(this,{hasSelectedEditor:!1})}}isActive(ye){return n(this,Q)===ye}getActive(){return n(this,Q)}getMode(){return n(this,te)}}c.AnnotationEditorUIManager=Ge;function at(){n(this,X).addEventListener("keydown",n(this,Ce))}function tt(){n(this,X).removeEventListener("keydown",n(this,Ce))}function be(){document.addEventListener("copy",n(this,pe)),document.addEventListener("cut",n(this,ie)),document.addEventListener("paste",n(this,Ae))}function z(){document.removeEventListener("copy",n(this,pe)),document.removeEventListener("cut",n(this,ie)),document.removeEventListener("paste",n(this,Ae))}function ee(Oe){Object.entries(Oe).some(ye=>{let[We,Je]=ye;return n(this,q)[We]!==Je})&&n(this,re).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(n(this,q),Oe)})}function Pe(Oe){n(this,re).dispatch("annotationeditorparamschanged",{source:this,details:Oe})}function qe(){if(!n(this,L)){x(this,L,!0);for(const Oe of n(this,le).values())Oe.enable()}}function Qe(){if(this.unselectAll(),n(this,L)){x(this,L,!1);for(const Oe of n(this,le).values())Oe.disable()}}function Ze(Oe){const ye=n(this,le).get(Oe.pageIndex);ye?ye.addOrRebuild(Oe):this.addEditor(Oe)}function Le(){if(n(this,ce).size===0)return!0;if(n(this,ce).size===1)for(const Oe of n(this,ce).values())return Oe.isEmpty();return!1}function Xe(Oe){n(this,de).clear();for(const ye of Oe)ye.isEmpty()||(n(this,de).add(ye),ye.select());o(this,fe,ee).call(this,{hasSelectedEditor:!0})}g(Ge,"_keyboardManager",new Y([[["ctrl+a","mac+meta+a"],Ge.prototype.selectAll],[["ctrl+z","mac+meta+z"],Ge.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Ge.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Ge.prototype.delete],[["Escape","mac+Escape"],Ge.prototype.unselectAll]]))},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.StatTimer=c.RenderingCancelledException=c.PixelsPerInch=c.PageViewport=c.PDFDateString=c.DOMStandardFontDataFactory=c.DOMSVGFactory=c.DOMCanvasFactory=c.DOMCMapReaderFactory=c.AnnotationPrefix=void 0,c.deprecated=U,c.getColorValues=ue,c.getCurrentTransform=se,c.getCurrentTransformInverse=ne,c.getFilenameFromUrl=j,c.getPdfFilenameFromUrl=N,c.getRGB=Y,c.getXfaPageViewport=H,c.isDataScheme=x,c.isPdfFile=y,c.isValidFetchUrl=o,c.loadScript=A,c.setLayerDimensions=Q;var s=t(140),_=t(1);const O="http://www.w3.org/2000/svg",F="pdfjs_internal_id_";c.AnnotationPrefix=F;const S=class{};let C=S;Et(C,"CSS",96),Et(C,"PDF",72),Et(C,"PDF_TO_CSS_UNITS",S.CSS/S.PDF),c.PixelsPerInch=C;class u extends s.BaseCanvasFactory{constructor(){let{ownerDocument:le=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=le}_createCanvas(le,J){const ve=this._document.createElement("canvas");return ve.width=le,ve.height=J,ve}}c.DOMCanvasFactory=u;async function g(ce){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(o(ce,document.baseURI)){const J=await fetch(ce);if(!J.ok)throw new Error(J.statusText);return le?new Uint8Array(await J.arrayBuffer()):(0,_.stringToBytes)(await J.text())}return new Promise((J,ve)=>{const ae=new XMLHttpRequest;ae.open("GET",ce,!0),le&&(ae.responseType="arraybuffer"),ae.onreadystatechange=()=>{if(ae.readyState===XMLHttpRequest.DONE){if(ae.status===200||ae.status===0){let D;if(le&&ae.response?D=new Uint8Array(ae.response):!le&&ae.responseText&&(D=(0,_.stringToBytes)(ae.responseText)),D){J(D);return}}ve(new Error(ae.statusText))}},ae.send(null)})}class M extends s.BaseCMapReaderFactory{_fetchData(le,J){return g(le,this.isCompressed).then(ve=>({cMapData:ve,compressionType:J}))}}c.DOMCMapReaderFactory=M;class P extends s.BaseStandardFontDataFactory{_fetchData(le){return g(le,!0)}}c.DOMStandardFontDataFactory=P;class b extends s.BaseSVGFactory{_createSVG(le){return document.createElementNS(O,le)}}c.DOMSVGFactory=b;class n{constructor(le){let{viewBox:J,scale:ve,rotation:ae,offsetX:D=0,offsetY:oe=0,dontFlip:re=!1}=le;this.viewBox=J,this.scale=ve,this.rotation=ae,this.offsetX=D,this.offsetY=oe;const B=(J[2]+J[0])/2,L=(J[3]+J[1])/2;let te,de,pe,ie;switch(ae%=360,ae<0&&(ae+=360),ae){case 180:te=-1,de=0,pe=0,ie=1;break;case 90:te=0,de=1,pe=1,ie=0;break;case 270:te=0,de=-1,pe=-1,ie=0;break;case 0:te=1,de=0,pe=0,ie=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}re&&(pe=-pe,ie=-ie);let Ae,Ce,Te,Me;te===0?(Ae=Math.abs(L-J[1])*ve+D,Ce=Math.abs(B-J[0])*ve+oe,Te=(J[3]-J[1])*ve,Me=(J[2]-J[0])*ve):(Ae=Math.abs(B-J[0])*ve+D,Ce=Math.abs(L-J[1])*ve+oe,Te=(J[2]-J[0])*ve,Me=(J[3]-J[1])*ve),this.transform=[te*ve,de*ve,pe*ve,ie*ve,Ae-te*ve*B-pe*ve*L,Ce-de*ve*B-ie*ve*L],this.width=Te,this.height=Me}get rawDims(){const{viewBox:le}=this;return(0,_.shadow)(this,"rawDims",{pageWidth:le[2]-le[0],pageHeight:le[3]-le[1],pageX:le[0],pageY:le[1]})}clone(){let{scale:le=this.scale,rotation:J=this.rotation,offsetX:ve=this.offsetX,offsetY:ae=this.offsetY,dontFlip:D=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new n({viewBox:this.viewBox.slice(),scale:le,rotation:J,offsetX:ve,offsetY:ae,dontFlip:D})}convertToViewportPoint(le,J){return _.Util.applyTransform([le,J],this.transform)}convertToViewportRectangle(le){const J=_.Util.applyTransform([le[0],le[1]],this.transform),ve=_.Util.applyTransform([le[2],le[3]],this.transform);return[J[0],J[1],ve[0],ve[1]]}convertToPdfPoint(le,J){return _.Util.applyInverseTransform([le,J],this.transform)}}c.PageViewport=n;class h extends _.BaseException{constructor(le,J){let ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;super(le,"RenderingCancelledException"),this.type=J,this.extraDelay=ve}}c.RenderingCancelledException=h;function x(ce){const le=ce.length;let J=0;for(;J<le&&ce[J].trim()==="";)J++;return ce.substring(J,J+5).toLowerCase()==="data:"}function y(ce){return typeof ce=="string"&&/\.pdf$/i.test(ce)}function j(ce){return arguments.length>1&&arguments[1]!==void 0&&arguments[1]||([ce]=ce.split(/[#?]/,1)),ce.substring(ce.lastIndexOf("/")+1)}function N(ce){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof ce!="string")return le;if(x(ce))return(0,_.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),le;const J=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ve=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ae=J.exec(ce);let D=ve.exec(ae[1])||ve.exec(ae[2])||ve.exec(ae[3]);if(D&&(D=D[0],D.includes("%")))try{D=ve.exec(decodeURIComponent(D))[0]}catch{}return D||le}class w{constructor(){Et(this,"started",Object.create(null)),Et(this,"times",[])}time(le){le in this.started&&(0,_.warn)(`Timer is already running for ${le}`),this.started[le]=Date.now()}timeEnd(le){le in this.started||(0,_.warn)(`Timer has not been started for ${le}`),this.times.push({name:le,start:this.started[le],end:Date.now()}),delete this.started[le]}toString(){const le=[];let J=0;for(const{name:ve}of this.times)J=Math.max(ve.length,J);for(const{name:ve,start:ae,end:D}of this.times)le.push(`${ve.padEnd(J)} ${D-ae}ms
`);return le.join("")}}c.StatTimer=w;function o(ce,le){try{const{protocol:J}=le?new URL(ce,le):new URL(ce);return J==="http:"||J==="https:"}catch{return!1}}function A(ce){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((J,ve)=>{const ae=document.createElement("script");ae.src=ce,ae.onload=function(D){le&&ae.remove(),J(D)},ae.onerror=function(){ve(new Error(`Cannot load script at: ${ae.src}`))},(document.head||document.documentElement).append(ae)})}function U(ce){console.log("Deprecated API usage: "+ce)}let $;class V{static toDateObject(le){if(!le||typeof le!="string")return null;$||($=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const J=$.exec(le);if(!J)return null;const ve=parseInt(J[1],10);let ae=parseInt(J[2],10);ae=ae>=1&&ae<=12?ae-1:0;let D=parseInt(J[3],10);D=D>=1&&D<=31?D:1;let oe=parseInt(J[4],10);oe=oe>=0&&oe<=23?oe:0;let re=parseInt(J[5],10);re=re>=0&&re<=59?re:0;let B=parseInt(J[6],10);B=B>=0&&B<=59?B:0;const L=J[7]||"Z";let te=parseInt(J[8],10);te=te>=0&&te<=23?te:0;let de=parseInt(J[9],10)||0;return de=de>=0&&de<=59?de:0,L==="-"?(oe+=te,re+=de):L==="+"&&(oe-=te,re-=de),new Date(Date.UTC(ve,ae,D,oe,re,B))}}c.PDFDateString=V;function H(ce,le){let{scale:J=1,rotation:ve=0}=le;const{width:ae,height:D}=ce.attributes.style,oe=[0,0,parseInt(ae),parseInt(D)];return new n({viewBox:oe,scale:J,rotation:ve})}function Y(ce){if(ce.startsWith("#")){const le=parseInt(ce.slice(1),16);return[(le&16711680)>>16,(le&65280)>>8,le&255]}return ce.startsWith("rgb(")?ce.slice(4,-1).split(",").map(le=>parseInt(le)):ce.startsWith("rgba(")?ce.slice(5,-1).split(",").map(le=>parseInt(le)).slice(0,3):((0,_.warn)(`Not a valid color format: "${ce}"`),[0,0,0])}function ue(ce){const le=document.createElement("span");le.style.visibility="hidden",document.body.append(le);for(const J of ce.keys()){le.style.color=J;const ve=window.getComputedStyle(le).color;ce.set(J,Y(ve))}le.remove()}function se(ce){const{a:le,b:J,c:ve,d:ae,e:D,f:oe}=ce.getTransform();return[le,J,ve,ae,D,oe]}function ne(ce){const{a:le,b:J,c:ve,d:ae,e:D,f:oe}=ce.getTransform().invertSelf();return[le,J,ve,ae,D,oe]}function Q(ce,le){let J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(le instanceof n){const{pageWidth:ae,pageHeight:D}=le.rawDims,{style:oe}=ce,re=`calc(var(--scale-factor) * ${ae}px)`,B=`calc(var(--scale-factor) * ${D}px)`;!J||le.rotation%180===0?(oe.width=re,oe.height=B):(oe.width=B,oe.height=re)}ve&&ce.setAttribute("data-main-rotation",le.rotation)}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BaseStandardFontDataFactory=c.BaseSVGFactory=c.BaseCanvasFactory=c.BaseCMapReaderFactory=void 0;var s=t(1);class _{constructor(){this.constructor===_&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,g){if(u<=0||g<=0)throw new Error("Invalid canvas size");const M=this._createCanvas(u,g);return{canvas:M,context:M.getContext("2d")}}reset(u,g,M){if(!u.canvas)throw new Error("Canvas is not specified");if(g<=0||M<=0)throw new Error("Invalid canvas size");u.canvas.width=g,u.canvas.height=M}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,g){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}c.BaseCanvasFactory=_;class O{constructor(u){let{baseUrl:g=null,isCompressed:M=!0}=u;this.constructor===O&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=M}async fetch(u){let{name:g}=u;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const M=this.baseUrl+g+(this.isCompressed?".bcmap":""),P=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(M,P).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${M}`)})}_fetchData(u,g){(0,s.unreachable)("Abstract method `_fetchData` called.")}}c.BaseCMapReaderFactory=O;class F{constructor(u){let{baseUrl:g=null}=u;this.constructor===F&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch(u){let{filename:g}=u;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const M=`${this.baseUrl}${g}`;return this._fetchData(M).catch(P=>{throw new Error(`Unable to load font data at: ${M}`)})}_fetchData(u){(0,s.unreachable)("Abstract method `_fetchData` called.")}}c.BaseStandardFontDataFactory=F;class S{constructor(){this.constructor===S&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,g){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(u<=0||g<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),M||(P.setAttribute("width",`${u}px`),P.setAttribute("height",`${g}px`)),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${u} ${g}`),P}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,s.unreachable)("Abstract method `_createSVG` called.")}}c.BaseSVGFactory=S},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.MurmurHash3_64=void 0;var s=t(1);const _=3285377520,O=4294901760,F=65535;class S{constructor(u){this.h1=u?u&4294967295:_,this.h2=u?u&4294967295:_}update(u){let g,M;if(typeof u=="string"){g=new Uint8Array(u.length*2),M=0;for(let U=0,$=u.length;U<$;U++){const V=u.charCodeAt(U);V<=255?g[M++]=V:(g[M++]=V>>>8,g[M++]=V&255)}}else if((0,s.isArrayBuffer)(u))g=u.slice(),M=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const P=M>>2,b=M-P*4,n=new Uint32Array(g.buffer,0,P);let h=0,x=0,y=this.h1,j=this.h2;const N=3432918353,w=461845907,o=N&F,A=w&F;for(let U=0;U<P;U++)U&1?(h=n[U],h=h*N&O|h*o&F,h=h<<15|h>>>17,h=h*w&O|h*A&F,y^=h,y=y<<13|y>>>19,y=y*5+3864292196):(x=n[U],x=x*N&O|x*o&F,x=x<<15|x>>>17,x=x*w&O|x*A&F,j^=x,j=j<<13|j>>>19,j=j*5+3864292196);switch(h=0,b){case 3:h^=g[P*4+2]<<16;case 2:h^=g[P*4+1]<<8;case 1:h^=g[P*4],h=h*N&O|h*o&F,h=h<<15|h>>>17,h=h*w&O|h*A&F,P&1?y^=h:j^=h}this.h1=y,this.h2=j}hexdigest(){let u=this.h1,g=this.h2;return u^=g>>>1,u=u*3981806797&O|u*36045&F,g=g*4283543511&O|((g<<16|u>>>16)*2950163797&O)>>>16,u^=g>>>1,u=u*444984403&O|u*60499&F,g=g*3301882366&O|((g<<16|u>>>16)*3120437893&O)>>>16,u^=g>>>1,(u>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}c.MurmurHash3_64=S},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FontLoader=c.FontFaceObject=void 0;var s=t(1),_=t(3);class O{constructor(C){let{onUnsupportedFeature:u,ownerDocument:g=globalThis.document,styleElement:M=null}=C;this._onUnsupportedFeature=u,this._document=g,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(C){this.nativeFontFaces.push(C),this._document.fonts.add(C)}insertRule(C){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const u=this.styleElement.sheet;u.insertRule(C,u.cssRules.length)}clear(){for(const C of this.nativeFontFaces)this._document.fonts.delete(C);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(C){if(C.attached||C.missingFile)return;if(C.attached=!0,this.isFontLoadingAPISupported){const g=C.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(M){throw this._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,s.warn)(`Failed to load font '${g.family}': '${M}'.`),C.disableFontFace=!0,M}}return}const u=C.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const M=this._queueLoadingCallback(g);this._prepareFontLoadEvent(C,M)})}}get isFontLoadingAPISupported(){var C;const u=!!((C=this._document)!==null&&C!==void 0&&C.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",u)}get isSyncFontLoadingSupported(){let C=!1;return(_.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(C=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",C)}_queueLoadingCallback(C){function u(){for((0,s.assert)(!M.done,"completeRequest() cannot be called twice."),M.done=!0;g.length>0&&g[0].done;){const P=g.shift();setTimeout(P.callback,0)}}const{loadingRequests:g}=this,M={done:!1,complete:u,callback:C};return g.push(M),M}get _loadTestFont(){const C=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",C)}_prepareFontLoadEvent(C,u){function g(H,Y){return H.charCodeAt(Y)<<24|H.charCodeAt(Y+1)<<16|H.charCodeAt(Y+2)<<8|H.charCodeAt(Y+3)&255}function M(H,Y,ue,se){const ne=H.substring(0,Y),Q=H.substring(Y+ue);return ne+se+Q}let P,b;const n=this._document.createElement("canvas");n.width=1,n.height=1;const h=n.getContext("2d");let x=0;function y(H,Y){if(++x>30){(0,s.warn)("Load test font never loaded."),Y();return}if(h.font="30px "+H,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){Y();return}setTimeout(y.bind(null,H,Y))}const j=`lt${Date.now()}${this.loadTestFontId++}`;let N=this._loadTestFont;N=M(N,976,j.length,j);const w=16,o=1482184792;let A=g(N,w);for(P=0,b=j.length-3;P<b;P+=4)A=A-o+g(j,P)|0;P<j.length&&(A=A-o+g(j+"XXX",P)|0),N=M(N,w,4,(0,s.string32)(A));const U=`url(data:font/opentype;base64,${btoa(N)});`,$=`@font-face {font-family:"${j}";src:${U}}`;this.insertRule($);const V=this._document.createElement("div");V.style.visibility="hidden",V.style.width=V.style.height="10px",V.style.position="absolute",V.style.top=V.style.left="0px";for(const H of[C.loadedName,j]){const Y=this._document.createElement("span");Y.textContent="Hi",Y.style.fontFamily=H,V.append(Y)}this._document.body.append(V),y(j,()=>{V.remove(),u.complete()})}}c.FontLoader=O;class F{constructor(C,u){let{isEvalSupported:g=!0,disableFontFace:M=!1,ignoreErrors:P=!1,onUnsupportedFeature:b,fontRegistry:n=null}=u;this.compiledGlyphs=Object.create(null);for(const h in C)this[h]=C[h];this.isEvalSupported=g!==!1,this.disableFontFace=M===!0,this.ignoreErrors=P===!0,this._onUnsupportedFeature=b,this.fontRegistry=n}createNativeFontFace(){var C;if(!this.data||this.disableFontFace)return null;let u;if(!this.cssFontInfo)u=new FontFace(this.loadedName,this.data,{});else{const g={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(g.style=`oblique ${this.cssFontInfo.italicAngle}deg`),u=new FontFace(this.cssFontInfo.fontFamily,this.data,g)}return(C=this.fontRegistry)===null||C===void 0||C.registerFont(this),u}createFontFaceRule(){var C;if(!this.data||this.disableFontFace)return null;const u=(0,s.bytesToString)(this.data),g=`url(data:${this.mimetype};base64,${btoa(u)});`;let M;if(!this.cssFontInfo)M=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),M=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${g}}`}return(C=this.fontRegistry)===null||C===void 0||C.registerFont(this,g),M}getPathGenerator(C,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let g;try{g=C.get(this.loadedName+"_path_"+u)}catch(M){if(!this.ignoreErrors)throw M;return this._onUnsupportedFeature({featureId:s.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,s.warn)(`getPathGenerator - ignoring character: "${M}".`),this.compiledGlyphs[u]=function(P,b){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const M=[];for(const P of g){const b=P.args!==void 0?P.args.join(","):"";M.push("c.",P.cmd,"(",b,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",M.join(""))}return this.compiledGlyphs[u]=function(M,P){for(const b of g)b.cmd==="scale"&&(b.args=[P,-P]),M[b.cmd].apply(M,b.args)}}}c.FontFaceObject=F},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CanvasGraphics=void 0;var s=t(1),_=t(139),O=t(144),F=t(145);function S(re,B){C(re,B),B.add(re)}function C(re,B){if(B.has(re))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(re,B,L){if(!B.has(re))throw new TypeError("attempted to get private field on non-instance");return L}const g=16,M=100,P=4096,b=15,n=10,h=1e3,x=16;function y(re,B){if(re._removeMirroring)throw new Error("Context is already forwarding operations.");re.__originalSave=re.save,re.__originalRestore=re.restore,re.__originalRotate=re.rotate,re.__originalScale=re.scale,re.__originalTranslate=re.translate,re.__originalTransform=re.transform,re.__originalSetTransform=re.setTransform,re.__originalResetTransform=re.resetTransform,re.__originalClip=re.clip,re.__originalMoveTo=re.moveTo,re.__originalLineTo=re.lineTo,re.__originalBezierCurveTo=re.bezierCurveTo,re.__originalRect=re.rect,re.__originalClosePath=re.closePath,re.__originalBeginPath=re.beginPath,re._removeMirroring=()=>{re.save=re.__originalSave,re.restore=re.__originalRestore,re.rotate=re.__originalRotate,re.scale=re.__originalScale,re.translate=re.__originalTranslate,re.transform=re.__originalTransform,re.setTransform=re.__originalSetTransform,re.resetTransform=re.__originalResetTransform,re.clip=re.__originalClip,re.moveTo=re.__originalMoveTo,re.lineTo=re.__originalLineTo,re.bezierCurveTo=re.__originalBezierCurveTo,re.rect=re.__originalRect,re.closePath=re.__originalClosePath,re.beginPath=re.__originalBeginPath,delete re._removeMirroring},re.save=function(){B.save(),this.__originalSave()},re.restore=function(){B.restore(),this.__originalRestore()},re.translate=function(L,te){B.translate(L,te),this.__originalTranslate(L,te)},re.scale=function(L,te){B.scale(L,te),this.__originalScale(L,te)},re.transform=function(L,te,de,pe,ie,Ae){B.transform(L,te,de,pe,ie,Ae),this.__originalTransform(L,te,de,pe,ie,Ae)},re.setTransform=function(L,te,de,pe,ie,Ae){B.setTransform(L,te,de,pe,ie,Ae),this.__originalSetTransform(L,te,de,pe,ie,Ae)},re.resetTransform=function(){B.resetTransform(),this.__originalResetTransform()},re.rotate=function(L){B.rotate(L),this.__originalRotate(L)},re.clip=function(L){B.clip(L),this.__originalClip(L)},re.moveTo=function(L,te){B.moveTo(L,te),this.__originalMoveTo(L,te)},re.lineTo=function(L,te){B.lineTo(L,te),this.__originalLineTo(L,te)},re.bezierCurveTo=function(L,te,de,pe,ie,Ae){B.bezierCurveTo(L,te,de,pe,ie,Ae),this.__originalBezierCurveTo(L,te,de,pe,ie,Ae)},re.rect=function(L,te,de,pe){B.rect(L,te,de,pe),this.__originalRect(L,te,de,pe)},re.closePath=function(){B.closePath(),this.__originalClosePath()},re.beginPath=function(){B.beginPath(),this.__originalBeginPath()}}class j{constructor(B){this.canvasFactory=B,this.cache=Object.create(null)}getCanvas(B,L,te){let de;return this.cache[B]!==void 0?(de=this.cache[B],this.canvasFactory.reset(de,L,te)):(de=this.canvasFactory.create(L,te),this.cache[B]=de),de}delete(B){delete this.cache[B]}clear(){for(const B in this.cache){const L=this.cache[B];this.canvasFactory.destroy(L),delete this.cache[B]}}}function N(re,B,L,te,de,pe,ie,Ae,Ce,Te){const[Me,Ne,xe,q,X,G]=(0,_.getCurrentTransform)(re);if(Ne===0&&xe===0){const Se=ie*Me+X,fe=Math.round(Se),ge=Ae*q+G,Re=Math.round(ge),Ee=(ie+Ce)*Me+X,Ie=Math.abs(Math.round(Ee)-fe)||1,je=(Ae+Te)*q+G,Be=Math.abs(Math.round(je)-Re)||1;return re.setTransform(Math.sign(Me),0,0,Math.sign(q),fe,Re),re.drawImage(B,L,te,de,pe,0,0,Ie,Be),re.setTransform(Me,Ne,xe,q,X,G),[Ie,Be]}if(Me===0&&q===0){const Se=Ae*xe+X,fe=Math.round(Se),ge=ie*Ne+G,Re=Math.round(ge),Ee=(Ae+Te)*xe+X,Ie=Math.abs(Math.round(Ee)-fe)||1,je=(ie+Ce)*Ne+G,Be=Math.abs(Math.round(je)-Re)||1;return re.setTransform(0,Math.sign(Ne),Math.sign(xe),0,fe,Re),re.drawImage(B,L,te,de,pe,0,0,Be,Ie),re.setTransform(Me,Ne,xe,q,X,G),[Be,Ie]}re.drawImage(B,L,te,de,pe,ie,Ae,Ce,Te);const K=Math.hypot(Me,Ne),me=Math.hypot(xe,q);return[K*Ce,me*Te]}function w(re){const{width:B,height:L}=re;if(B>h||L>h)return null;const te=1e3,de=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),pe=B+1;let ie=new Uint8Array(pe*(L+1)),Ae,Ce,Te;const Me=B+7&-8;let Ne=new Uint8Array(Me*L),xe=0;for(const K of re.data){let me=128;for(;me>0;)Ne[xe++]=K&me?0:255,me>>=1}let q=0;for(xe=0,Ne[xe]!==0&&(ie[0]=1,++q),Ce=1;Ce<B;Ce++)Ne[xe]!==Ne[xe+1]&&(ie[Ce]=Ne[xe]?2:1,++q),xe++;for(Ne[xe]!==0&&(ie[Ce]=2,++q),Ae=1;Ae<L;Ae++){xe=Ae*Me,Te=Ae*pe,Ne[xe-Me]!==Ne[xe]&&(ie[Te]=Ne[xe]?1:8,++q);let K=(Ne[xe]?4:0)+(Ne[xe-Me]?8:0);for(Ce=1;Ce<B;Ce++)K=(K>>2)+(Ne[xe+1]?4:0)+(Ne[xe-Me+1]?8:0),de[K]&&(ie[Te+Ce]=de[K],++q),xe++;if(Ne[xe-Me]!==Ne[xe]&&(ie[Te+Ce]=Ne[xe]?2:4,++q),q>te)return null}for(xe=Me*(L-1),Te=Ae*pe,Ne[xe]!==0&&(ie[Te]=8,++q),Ce=1;Ce<B;Ce++)Ne[xe]!==Ne[xe+1]&&(ie[Te+Ce]=Ne[xe]?4:8,++q),xe++;if(Ne[xe]!==0&&(ie[Te+Ce]=4,++q),q>te)return null;const X=new Int32Array([0,pe,-1,0,-pe,0,0,0,1]),G=new Path2D;for(Ae=0;q&&Ae<=L;Ae++){let K=Ae*pe;const me=K+B;for(;K<me&&!ie[K];)K++;if(K===me)continue;G.moveTo(K%pe,Ae);const Se=K;let fe=ie[K];do{const ge=X[fe];do K+=ge;while(!ie[K]);const Re=ie[K];Re!==5&&Re!==10?(fe=Re,ie[K]=0):(fe=Re&51*fe>>4,ie[K]&=fe>>2|fe<<2),G.lineTo(K%pe,K/pe|0),ie[K]||--q}while(Se!==K);--Ae}return Ne=null,ie=null,function(K){K.save(),K.scale(1/B,-1/L),K.translate(0,-L),K.fill(G),K.beginPath(),K.restore()}}class o{constructor(B,L){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,B,L])}clone(){const B=Object.create(this);return B.clipBox=this.clipBox.slice(),B}setCurrentPoint(B,L){this.x=B,this.y=L}updatePathMinMax(B,L,te){[L,te]=s.Util.applyTransform([L,te],B),this.minX=Math.min(this.minX,L),this.minY=Math.min(this.minY,te),this.maxX=Math.max(this.maxX,L),this.maxY=Math.max(this.maxY,te)}updateRectMinMax(B,L){const te=s.Util.applyTransform(L,B),de=s.Util.applyTransform(L.slice(2),B);this.minX=Math.min(this.minX,te[0],de[0]),this.minY=Math.min(this.minY,te[1],de[1]),this.maxX=Math.max(this.maxX,te[0],de[0]),this.maxY=Math.max(this.maxY,te[1],de[1])}updateScalingPathMinMax(B,L){s.Util.scaleMinMax(B,L),this.minX=Math.min(this.minX,L[0]),this.maxX=Math.max(this.maxX,L[1]),this.minY=Math.min(this.minY,L[2]),this.maxY=Math.max(this.maxY,L[3])}updateCurvePathMinMax(B,L,te,de,pe,ie,Ae,Ce,Te,Me){const Ne=s.Util.bezierBoundingBox(L,te,de,pe,ie,Ae,Ce,Te);if(Me){Me[0]=Math.min(Me[0],Ne[0],Ne[2]),Me[1]=Math.max(Me[1],Ne[0],Ne[2]),Me[2]=Math.min(Me[2],Ne[1],Ne[3]),Me[3]=Math.max(Me[3],Ne[1],Ne[3]);return}this.updateRectMinMax(B,Ne)}getPathBoundingBox(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O.PathType.FILL,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const te=[this.minX,this.minY,this.maxX,this.maxY];if(B===O.PathType.STROKE){L||(0,s.unreachable)("Stroke bounding box must include transform.");const de=s.Util.singularValueDecompose2dScale(L),pe=de[0]*this.lineWidth/2,ie=de[1]*this.lineWidth/2;te[0]-=pe,te[1]-=ie,te[2]+=pe,te[3]+=ie}return te}updateClipFromPath(){const B=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(B||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(B){this.clipBox=B,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O.PathType.FILL,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s.Util.intersect(this.clipBox,this.getPathBoundingBox(B,L))}}function A(re,B){let L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData<"u"&&B instanceof ImageData){re.putImageData(B,0,0);return}const te=B.height,de=B.width,pe=te%x,ie=(te-pe)/x,Ae=pe===0?ie:ie+1,Ce=re.createImageData(de,x);let Te=0,Me;const Ne=B.data,xe=Ce.data;let q,X,G,K,me,Se,fe,ge;if(L)switch(L.length){case 1:me=L[0],Se=L[0],fe=L[0],ge=L[0];break;case 4:me=L[0],Se=L[1],fe=L[2],ge=L[3];break}if(B.kind===s.ImageKind.GRAYSCALE_1BPP){const Re=Ne.byteLength,Ee=new Uint32Array(xe.buffer,0,xe.byteLength>>2),Ie=Ee.length,je=de+7>>3;let Be=4294967295,Ge=s.FeatureTest.isLittleEndian?4278190080:255;for(ge&&ge[0]===255&&ge[255]===0&&([Be,Ge]=[Ge,Be]),q=0;q<Ae;q++){for(G=q<ie?x:pe,Me=0,X=0;X<G;X++){const at=Re-Te;let tt=0;const be=at>je?de:at*8-7,z=be&-8;let ee=0,Pe=0;for(;tt<z;tt+=8)Pe=Ne[Te++],Ee[Me++]=Pe&128?Be:Ge,Ee[Me++]=Pe&64?Be:Ge,Ee[Me++]=Pe&32?Be:Ge,Ee[Me++]=Pe&16?Be:Ge,Ee[Me++]=Pe&8?Be:Ge,Ee[Me++]=Pe&4?Be:Ge,Ee[Me++]=Pe&2?Be:Ge,Ee[Me++]=Pe&1?Be:Ge;for(;tt<be;tt++)ee===0&&(Pe=Ne[Te++],ee=128),Ee[Me++]=Pe&ee?Be:Ge,ee>>=1}for(;Me<Ie;)Ee[Me++]=0;re.putImageData(Ce,0,q*x)}}else if(B.kind===s.ImageKind.RGBA_32BPP){const Re=!!(me||Se||fe);for(X=0,K=de*x*4,q=0;q<ie;q++){if(xe.set(Ne.subarray(Te,Te+K)),Te+=K,Re)for(let Ee=0;Ee<K;Ee+=4)me&&(xe[Ee+0]=me[xe[Ee+0]]),Se&&(xe[Ee+1]=Se[xe[Ee+1]]),fe&&(xe[Ee+2]=fe[xe[Ee+2]]);re.putImageData(Ce,0,X),X+=x}if(q<Ae){if(K=de*pe*4,xe.set(Ne.subarray(Te,Te+K)),Re)for(let Ee=0;Ee<K;Ee+=4)me&&(xe[Ee+0]=me[xe[Ee+0]]),Se&&(xe[Ee+1]=Se[xe[Ee+1]]),fe&&(xe[Ee+2]=fe[xe[Ee+2]]);re.putImageData(Ce,0,X)}}else if(B.kind===s.ImageKind.RGB_24BPP){const Re=!!(me||Se||fe);for(G=x,K=de*G,q=0;q<Ae;q++){for(q>=ie&&(G=pe,K=de*G),Me=0,X=K;X--;)xe[Me++]=Ne[Te++],xe[Me++]=Ne[Te++],xe[Me++]=Ne[Te++],xe[Me++]=255;if(Re)for(let Ee=0;Ee<Me;Ee+=4)me&&(xe[Ee+0]=me[xe[Ee+0]]),Se&&(xe[Ee+1]=Se[xe[Ee+1]]),fe&&(xe[Ee+2]=fe[xe[Ee+2]]);re.putImageData(Ce,0,q*x)}}else throw new Error(`bad image kind: ${B.kind}`)}function U(re,B){if(B.bitmap){re.drawImage(B.bitmap,0,0);return}const L=B.height,te=B.width,de=L%x,pe=(L-de)/x,ie=de===0?pe:pe+1,Ae=re.createImageData(te,x);let Ce=0;const Te=B.data,Me=Ae.data;for(let Ne=0;Ne<ie;Ne++){const xe=Ne<pe?x:de;({srcPos:Ce}=(0,F.applyMaskImageData)({src:Te,srcPos:Ce,dest:Me,width:te,height:xe})),re.putImageData(Ae,0,Ne*x)}}function $(re,B){const L=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const te of L)re[te]!==void 0&&(B[te]=re[te]);re.setLineDash!==void 0&&(B.setLineDash(re.getLineDash()),B.lineDashOffset=re.lineDashOffset)}function V(re,B){re.strokeStyle=re.fillStyle=B||"#000000",re.fillRule="nonzero",re.globalAlpha=1,re.lineWidth=1,re.lineCap="butt",re.lineJoin="miter",re.miterLimit=10,re.globalCompositeOperation="source-over",re.font="10px sans-serif",re.setLineDash!==void 0&&(re.setLineDash([]),re.lineDashOffset=0)}function H(re,B,L,te){const de=re.length;for(let pe=3;pe<de;pe+=4){const ie=re[pe];if(ie===0)re[pe-3]=B,re[pe-2]=L,re[pe-1]=te;else if(ie<255){const Ae=255-ie;re[pe-3]=re[pe-3]*ie+B*Ae>>8,re[pe-2]=re[pe-2]*ie+L*Ae>>8,re[pe-1]=re[pe-1]*ie+te*Ae>>8}}}function Y(re,B,L){const te=re.length,de=1/255;for(let pe=3;pe<te;pe+=4){const ie=L?L[re[pe]]:re[pe];B[pe]=B[pe]*ie*de|0}}function ue(re,B,L){const te=re.length;for(let de=3;de<te;de+=4){const pe=re[de-3]*77+re[de-2]*152+re[de-1]*28;B[de]=L?B[de]*L[pe>>8]>>8:B[de]*pe>>16}}function se(re,B,L,te,de,pe,ie,Ae,Ce,Te,Me){const Ne=!!pe,xe=Ne?pe[0]:0,q=Ne?pe[1]:0,X=Ne?pe[2]:0;let G;de==="Luminosity"?G=ue:G=Y;const K=Math.min(te,Math.ceil(1048576/L));for(let me=0;me<te;me+=K){const Se=Math.min(K,te-me),fe=re.getImageData(Ae-Te,me+(Ce-Me),L,Se),ge=B.getImageData(Ae,me+Ce,L,Se);Ne&&H(fe.data,xe,q,X),G(fe.data,ge.data,ie),B.putImageData(ge,Ae,me+Ce)}}function ne(re,B,L,te){const de=te[0],pe=te[1],ie=te[2]-de,Ae=te[3]-pe;ie===0||Ae===0||(se(B.context,L,ie,Ae,B.subtype,B.backdrop,B.transferMap,de,pe,B.offsetX,B.offsetY),re.save(),re.globalAlpha=1,re.globalCompositeOperation="source-over",re.setTransform(1,0,0,1,0,0),re.drawImage(L.canvas,0,0),re.restore())}function Q(re,B){const L=s.Util.singularValueDecompose2dScale(re);L[0]=Math.fround(L[0]),L[1]=Math.fround(L[1]);const te=Math.fround((globalThis.devicePixelRatio||1)*_.PixelsPerInch.PDF_TO_CSS_UNITS);return B!==void 0?B:L[0]<=te||L[1]<=te}const ce=["butt","round","square"],le=["miter","round","bevel"],J={},ve={};var ae=new WeakSet;class D{constructor(B,L,te,de,pe,ie,Ae){let{optionalContentConfig:Ce,markedContentStack:Te=null}=pe;S(this,ae),this.ctx=B,this.current=new o(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=L,this.objs=te,this.canvasFactory=de,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Te||[],this.optionalContentConfig=Ce,this.cachedCanvases=new j(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ie,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(Ae==null?void 0:Ae.background)||null,this.foregroundColor=(Ae==null?void 0:Ae.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(B){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof B=="string"?B.startsWith("g_")?this.commonObjs.get(B):this.objs.get(B):L}beginDrawing(B){let{transform:L,viewport:te,transparency:de=!1,background:pe=null}=B;const ie=this.ctx.canvas.width,Ae=this.ctx.canvas.height,Ce=pe||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const Te=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Me=this.backgroundColor=this.ctx.fillStyle;let Ne=!0,xe=Ce;if(this.ctx.fillStyle=Ce,xe=this.ctx.fillStyle,Ne=typeof xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(xe),Te==="#000000"&&Me==="#ffffff"||Te===Me||!Ne)this.foregroundColor=this.backgroundColor=null;else{const[q,X,G]=(0,_.getRGB)(xe),K=Se=>(Se/=255,Se<=.03928?Se/12.92:((Se+.055)/1.055)**2.4),me=Math.round(.2126*K(q)+.7152*K(X)+.0722*K(G));this.selectColor=(Se,fe,ge)=>{const Re=.2126*K(Se)+.7152*K(fe)+.0722*K(ge);return Math.round(Re)===me?Me:Te}}}if(this.ctx.fillStyle=this.backgroundColor||Ce,this.ctx.fillRect(0,0,ie,Ae),this.ctx.restore(),de){const Te=this.cachedCanvases.getCanvas("transparent",ie,Ae);this.compositeCtx=this.ctx,this.transparentCanvas=Te.canvas,this.ctx=Te.context,this.ctx.save(),this.ctx.transform(...(0,_.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),V(this.ctx,this.foregroundColor),L&&(this.ctx.transform(...L),this.outputScaleX=L[0],this.outputScaleY=L[0]),this.ctx.transform(...te.transform),this.viewportScale=te.scale,this.baseTransform=(0,_.getCurrentTransform)(this.ctx)}executeOperatorList(B,L,te,de){const pe=B.argsArray,ie=B.fnArray;let Ae=L||0;const Ce=pe.length;if(Ce===Ae)return Ae;const Te=Ce-Ae>n&&typeof te=="function",Me=Te?Date.now()+b:0;let Ne=0;const xe=this.commonObjs,q=this.objs;let X;for(;;){if(de!==void 0&&Ae===de.nextBreakPoint)return de.breakIt(Ae,te),Ae;if(X=ie[Ae],X!==s.OPS.dependency)this[X].apply(this,pe[Ae]);else for(const G of pe[Ae]){const K=G.startsWith("g_")?xe:q;if(!K.has(G))return K.get(G,te),Ae}if(Ae++,Ae===Ce)return Ae;if(Te&&++Ne>n){if(Date.now()>Me)return te(),Ae;Ne=0}}}endDrawing(){u(this,ae,oe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const B of this._cachedBitmapsMap.values()){for(const L of B.values())typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement&&(L.width=L.height=0);B.clear()}this._cachedBitmapsMap.clear()}_scaleImage(B,L){const te=B.width,de=B.height;let pe=Math.max(Math.hypot(L[0],L[1]),1),ie=Math.max(Math.hypot(L[2],L[3]),1),Ae=te,Ce=de,Te="prescale1",Me,Ne;for(;pe>2&&Ae>1||ie>2&&Ce>1;){let xe=Ae,q=Ce;pe>2&&Ae>1&&(xe=Math.ceil(Ae/2),pe/=Ae/xe),ie>2&&Ce>1&&(q=Math.ceil(Ce/2),ie/=Ce/q),Me=this.cachedCanvases.getCanvas(Te,xe,q),Ne=Me.context,Ne.clearRect(0,0,xe,q),Ne.drawImage(B,0,0,Ae,Ce,0,0,xe,q),B=Me.canvas,Ae=xe,Ce=q,Te=Te==="prescale1"?"prescale2":"prescale1"}return{img:B,paintWidth:Ae,paintHeight:Ce}}_createMaskCanvas(B){const L=this.ctx,{width:te,height:de}=B,pe=this.current.fillColor,ie=this.current.patternFill,Ae=(0,_.getCurrentTransform)(L);let Ce,Te,Me,Ne;if((B.bitmap||B.data)&&B.count>1){const Ie=B.bitmap||B.data.buffer;Te=JSON.stringify(ie?Ae:[Ae.slice(0,4),pe]),Ce=this._cachedBitmapsMap.get(Ie),Ce||(Ce=new Map,this._cachedBitmapsMap.set(Ie,Ce));const je=Ce.get(Te);if(je&&!ie){const Be=Math.round(Math.min(Ae[0],Ae[2])+Ae[4]),Ge=Math.round(Math.min(Ae[1],Ae[3])+Ae[5]);return{canvas:je,offsetX:Be,offsetY:Ge}}Me=je}Me||(Ne=this.cachedCanvases.getCanvas("maskCanvas",te,de),U(Ne.context,B));let xe=s.Util.transform(Ae,[1/te,0,0,-1/de,0,0]);xe=s.Util.transform(xe,[1,0,0,1,0,-de]);const q=s.Util.applyTransform([0,0],xe),X=s.Util.applyTransform([te,de],xe),G=s.Util.normalizeRect([q[0],q[1],X[0],X[1]]),K=Math.round(G[2]-G[0])||1,me=Math.round(G[3]-G[1])||1,Se=this.cachedCanvases.getCanvas("fillCanvas",K,me),fe=Se.context,ge=Math.min(q[0],X[0]),Re=Math.min(q[1],X[1]);fe.translate(-ge,-Re),fe.transform(...xe),Me||(Me=this._scaleImage(Ne.canvas,(0,_.getCurrentTransformInverse)(fe)),Me=Me.img,Ce&&ie&&Ce.set(Te,Me)),fe.imageSmoothingEnabled=Q((0,_.getCurrentTransform)(fe),B.interpolate),N(fe,Me,0,0,Me.width,Me.height,0,0,te,de),fe.globalCompositeOperation="source-in";const Ee=s.Util.transform((0,_.getCurrentTransformInverse)(fe),[1,0,0,1,-ge,-Re]);return fe.fillStyle=ie?pe.getPattern(L,this,Ee,O.PathType.FILL):pe,fe.fillRect(0,0,te,de),Ce&&!ie&&(this.cachedCanvases.delete("fillCanvas"),Ce.set(Te,Se.canvas)),{canvas:Se.canvas,offsetX:Math.round(ge),offsetY:Math.round(Re)}}setLineWidth(B){B!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=B,this.ctx.lineWidth=B}setLineCap(B){this.ctx.lineCap=ce[B]}setLineJoin(B){this.ctx.lineJoin=le[B]}setMiterLimit(B){this.ctx.miterLimit=B}setDash(B,L){const te=this.ctx;te.setLineDash!==void 0&&(te.setLineDash(B),te.lineDashOffset=L)}setRenderingIntent(B){}setFlatness(B){}setGState(B){for(const[L,te]of B)switch(L){case"LW":this.setLineWidth(te);break;case"LC":this.setLineCap(te);break;case"LJ":this.setLineJoin(te);break;case"ML":this.setMiterLimit(te);break;case"D":this.setDash(te[0],te[1]);break;case"RI":this.setRenderingIntent(te);break;case"FL":this.setFlatness(te);break;case"Font":this.setFont(te[0],te[1]);break;case"CA":this.current.strokeAlpha=te;break;case"ca":this.current.fillAlpha=te,this.ctx.globalAlpha=te;break;case"BM":this.ctx.globalCompositeOperation=te;break;case"SMask":this.current.activeSMask=te?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=te}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const B=this.inSMaskMode;this.current.activeSMask&&!B?this.beginSMaskMode():!this.current.activeSMask&&B&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const B=this.ctx.canvas.width,L=this.ctx.canvas.height,te="smaskGroupAt"+this.groupLevel,de=this.cachedCanvases.getCanvas(te,B,L);this.suspendedCtx=this.ctx,this.ctx=de.context;const pe=this.ctx;pe.setTransform(...(0,_.getCurrentTransform)(this.suspendedCtx)),$(this.suspendedCtx,pe),y(pe,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(B){if(!this.current.activeSMask)return;B?(B[0]=Math.floor(B[0]),B[1]=Math.floor(B[1]),B[2]=Math.ceil(B[2]),B[3]=Math.ceil(B[3])):B=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const L=this.current.activeSMask,te=this.suspendedCtx;ne(te,L,this.ctx,B),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?($(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const B=this.current;this.stateStack.push(B),this.current=B.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),$(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(B,L,te,de,pe,ie){this.ctx.transform(B,L,te,de,pe,ie),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(B,L,te){const de=this.ctx,pe=this.current;let ie=pe.x,Ae=pe.y,Ce,Te;const Me=(0,_.getCurrentTransform)(de),Ne=Me[0]===0&&Me[3]===0||Me[1]===0&&Me[2]===0,xe=Ne?te.slice(0):null;for(let q=0,X=0,G=B.length;q<G;q++)switch(B[q]|0){case s.OPS.rectangle:ie=L[X++],Ae=L[X++];const K=L[X++],me=L[X++],Se=ie+K,fe=Ae+me;de.moveTo(ie,Ae),K===0||me===0?de.lineTo(Se,fe):(de.lineTo(Se,Ae),de.lineTo(Se,fe),de.lineTo(ie,fe)),Ne||pe.updateRectMinMax(Me,[ie,Ae,Se,fe]),de.closePath();break;case s.OPS.moveTo:ie=L[X++],Ae=L[X++],de.moveTo(ie,Ae),Ne||pe.updatePathMinMax(Me,ie,Ae);break;case s.OPS.lineTo:ie=L[X++],Ae=L[X++],de.lineTo(ie,Ae),Ne||pe.updatePathMinMax(Me,ie,Ae);break;case s.OPS.curveTo:Ce=ie,Te=Ae,ie=L[X+4],Ae=L[X+5],de.bezierCurveTo(L[X],L[X+1],L[X+2],L[X+3],ie,Ae),pe.updateCurvePathMinMax(Me,Ce,Te,L[X],L[X+1],L[X+2],L[X+3],ie,Ae,xe),X+=6;break;case s.OPS.curveTo2:Ce=ie,Te=Ae,de.bezierCurveTo(ie,Ae,L[X],L[X+1],L[X+2],L[X+3]),pe.updateCurvePathMinMax(Me,Ce,Te,ie,Ae,L[X],L[X+1],L[X+2],L[X+3],xe),ie=L[X+2],Ae=L[X+3],X+=4;break;case s.OPS.curveTo3:Ce=ie,Te=Ae,ie=L[X+2],Ae=L[X+3],de.bezierCurveTo(L[X],L[X+1],ie,Ae,ie,Ae),pe.updateCurvePathMinMax(Me,Ce,Te,L[X],L[X+1],ie,Ae,ie,Ae,xe),X+=4;break;case s.OPS.closePath:de.closePath();break}Ne&&pe.updateScalingPathMinMax(Me,xe),pe.setCurrentPoint(ie,Ae)}closePath(){this.ctx.closePath()}stroke(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const L=this.ctx,te=this.current.strokeColor;L.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof te=="object"&&te!==null&&te!==void 0&&te.getPattern?(L.save(),L.strokeStyle=te.getPattern(L,this,(0,_.getCurrentTransformInverse)(L),O.PathType.STROKE),this.rescaleAndStroke(!1),L.restore()):this.rescaleAndStroke(!0)),B&&this.consumePath(this.current.getClippedPathBoundingBox()),L.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const L=this.ctx,te=this.current.fillColor,de=this.current.patternFill;let pe=!1;de&&(L.save(),L.fillStyle=te.getPattern(L,this,(0,_.getCurrentTransformInverse)(L),O.PathType.FILL),pe=!0);const ie=this.current.getClippedPathBoundingBox();this.contentVisible&&ie!==null&&(this.pendingEOFill?(L.fill("evenodd"),this.pendingEOFill=!1):L.fill()),pe&&L.restore(),B&&this.consumePath(ie)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=J}eoClip(){this.pendingClip=ve}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const B=this.pendingTextPaths,L=this.ctx;if(B===void 0){L.beginPath();return}L.save(),L.beginPath();for(const te of B)L.setTransform(...te.transform),L.translate(te.x,te.y),te.addToPath(L,te.fontSize);L.restore(),L.clip(),L.beginPath(),delete this.pendingTextPaths}setCharSpacing(B){this.current.charSpacing=B}setWordSpacing(B){this.current.wordSpacing=B}setHScale(B){this.current.textHScale=B/100}setLeading(B){this.current.leading=-B}setFont(B,L){const te=this.commonObjs.get(B),de=this.current;if(!te)throw new Error(`Can't find font for ${B}`);if(de.fontMatrix=te.fontMatrix||s.FONT_IDENTITY_MATRIX,(de.fontMatrix[0]===0||de.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+B),L<0?(L=-L,de.fontDirection=-1):de.fontDirection=1,this.current.font=te,this.current.fontSize=L,te.isType3Font)return;const pe=te.loadedName||"sans-serif";let ie="normal";te.black?ie="900":te.bold&&(ie="bold");const Ae=te.italic?"italic":"normal",Ce=`"${pe}", ${te.fallbackName}`;let Te=L;L<g?Te=g:L>M&&(Te=M),this.current.fontSizeScale=L/Te,this.ctx.font=`${Ae} ${ie} ${Te}px ${Ce}`}setTextRenderingMode(B){this.current.textRenderingMode=B}setTextRise(B){this.current.textRise=B}moveText(B,L){this.current.x=this.current.lineX+=B,this.current.y=this.current.lineY+=L}setLeadingMoveText(B,L){this.setLeading(-L),this.moveText(B,L)}setTextMatrix(B,L,te,de,pe,ie){this.current.textMatrix=[B,L,te,de,pe,ie],this.current.textMatrixScale=Math.hypot(B,L),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(B,L,te,de){const pe=this.ctx,ie=this.current,Ae=ie.font,Ce=ie.textRenderingMode,Te=ie.fontSize/ie.fontSizeScale,Me=Ce&s.TextRenderingMode.FILL_STROKE_MASK,Ne=!!(Ce&s.TextRenderingMode.ADD_TO_PATH_FLAG),xe=ie.patternFill&&!Ae.missingFile;let q;(Ae.disableFontFace||Ne||xe)&&(q=Ae.getPathGenerator(this.commonObjs,B)),Ae.disableFontFace||xe?(pe.save(),pe.translate(L,te),pe.beginPath(),q(pe,Te),de&&pe.setTransform(...de),(Me===s.TextRenderingMode.FILL||Me===s.TextRenderingMode.FILL_STROKE)&&pe.fill(),(Me===s.TextRenderingMode.STROKE||Me===s.TextRenderingMode.FILL_STROKE)&&pe.stroke(),pe.restore()):((Me===s.TextRenderingMode.FILL||Me===s.TextRenderingMode.FILL_STROKE)&&pe.fillText(B,L,te),(Me===s.TextRenderingMode.STROKE||Me===s.TextRenderingMode.FILL_STROKE)&&pe.strokeText(B,L,te)),Ne&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_.getCurrentTransform)(pe),x:L,y:te,fontSize:Te,addToPath:q})}get isFontSubpixelAAEnabled(){const{context:B}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);B.scale(1.5,1),B.fillText("I",0,10);const L=B.getImageData(0,0,10,10).data;let te=!1;for(let de=3;de<L.length;de+=4)if(L[de]>0&&L[de]<255){te=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",te)}showText(B){const L=this.current,te=L.font;if(te.isType3Font)return this.showType3Text(B);const de=L.fontSize;if(de===0)return;const pe=this.ctx,ie=L.fontSizeScale,Ae=L.charSpacing,Ce=L.wordSpacing,Te=L.fontDirection,Me=L.textHScale*Te,Ne=B.length,xe=te.vertical,q=xe?1:-1,X=te.defaultVMetrics,G=de*L.fontMatrix[0],K=L.textRenderingMode===s.TextRenderingMode.FILL&&!te.disableFontFace&&!L.patternFill;pe.save(),pe.transform(...L.textMatrix),pe.translate(L.x,L.y+L.textRise),Te>0?pe.scale(Me,-1):pe.scale(Me,1);let me;if(L.patternFill){pe.save();const Ee=L.fillColor.getPattern(pe,this,(0,_.getCurrentTransformInverse)(pe),O.PathType.FILL);me=(0,_.getCurrentTransform)(pe),pe.restore(),pe.fillStyle=Ee}let Se=L.lineWidth;const fe=L.textMatrixScale;if(fe===0||Se===0){const Ee=L.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(Ee===s.TextRenderingMode.STROKE||Ee===s.TextRenderingMode.FILL_STROKE)&&(Se=this.getSinglePixelWidth())}else Se/=fe;if(ie!==1&&(pe.scale(ie,ie),Se/=ie),pe.lineWidth=Se,te.isInvalidPDFjsFont){const Ee=[];let Ie=0;for(const je of B)Ee.push(je.unicode),Ie+=je.width;pe.fillText(Ee.join(""),0,0),L.x+=Ie*G*Me,pe.restore(),this.compose();return}let ge=0,Re;for(Re=0;Re<Ne;++Re){const Ee=B[Re];if(typeof Ee=="number"){ge+=q*Ee*de/1e3;continue}let Ie=!1;const je=(Ee.isSpace?Ce:0)+Ae,Be=Ee.fontChar,Ge=Ee.accent;let at,tt,be=Ee.width;if(xe){const ee=Ee.vmetric||X,Pe=-(Ee.vmetric?ee[1]:be*.5)*G,qe=ee[2]*G;be=ee?-ee[0]:be,at=Pe/ie,tt=(ge+qe)/ie}else at=ge/ie,tt=0;if(te.remeasure&&be>0){const ee=pe.measureText(Be).width*1e3/de*ie;if(be<ee&&this.isFontSubpixelAAEnabled){const Pe=be/ee;Ie=!0,pe.save(),pe.scale(Pe,1),at/=Pe}else be!==ee&&(at+=(be-ee)/2e3*de/ie)}if(this.contentVisible&&(Ee.isInFont||te.missingFile)){if(K&&!Ge)pe.fillText(Be,at,tt);else if(this.paintChar(Be,at,tt,me),Ge){const ee=at+de*Ge.offset.x/ie,Pe=tt-de*Ge.offset.y/ie;this.paintChar(Ge.fontChar,ee,Pe,me)}}let z;xe?z=be*G-je*Te:z=be*G+je*Te,ge+=z,Ie&&pe.restore()}xe?L.y-=ge:L.x+=ge*Me,pe.restore(),this.compose()}showType3Text(B){const L=this.ctx,te=this.current,de=te.font,pe=te.fontSize,ie=te.fontDirection,Ae=de.vertical?1:-1,Ce=te.charSpacing,Te=te.wordSpacing,Me=te.textHScale*ie,Ne=te.fontMatrix||s.FONT_IDENTITY_MATRIX,xe=B.length,q=te.textRenderingMode===s.TextRenderingMode.INVISIBLE;let X,G,K,me;if(!(q||pe===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,L.save(),L.transform(...te.textMatrix),L.translate(te.x,te.y),L.scale(Me,ie),X=0;X<xe;++X){if(G=B[X],typeof G=="number"){me=Ae*G*pe/1e3,this.ctx.translate(me,0),te.x+=me*Me;continue}const Se=(G.isSpace?Te:0)+Ce,fe=de.charProcOperatorList[G.operatorListId];if(!fe){(0,s.warn)(`Type3 character "${G.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=G,this.save(),L.scale(pe,pe),L.transform(...Ne),this.executeOperatorList(fe),this.restore()),K=s.Util.applyTransform([G.width,0],Ne)[0]*pe+Se,L.translate(K,0),te.x+=K*Me}L.restore(),this.processingType3=null}}setCharWidth(B,L){}setCharWidthAndBounds(B,L,te,de,pe,ie){this.ctx.rect(te,de,pe-te,ie-de),this.ctx.clip(),this.endPath()}getColorN_Pattern(B){let L;if(B[0]==="TilingPattern"){const te=B[1],de=this.baseTransform||(0,_.getCurrentTransform)(this.ctx),pe={createCanvasGraphics:ie=>new D(ie,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};L=new O.TilingPattern(B,te,this.ctx,pe,de)}else L=this._getPattern(B[1],B[2]);return L}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(B,L,te){var de;const pe=((de=this.selectColor)===null||de===void 0?void 0:de.call(this,B,L,te))||s.Util.makeHexColor(B,L,te);this.ctx.strokeStyle=pe,this.current.strokeColor=pe}setFillRGBColor(B,L,te){var de;const pe=((de=this.selectColor)===null||de===void 0?void 0:de.call(this,B,L,te))||s.Util.makeHexColor(B,L,te);this.ctx.fillStyle=pe,this.current.fillColor=pe,this.current.patternFill=!1}_getPattern(B){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,te;return this.cachedPatterns.has(B)?te=this.cachedPatterns.get(B):(te=(0,O.getShadingPattern)(this.objs.get(B)),this.cachedPatterns.set(B,te)),L&&(te.matrix=L),te}shadingFill(B){if(!this.contentVisible)return;const L=this.ctx;this.save();const te=this._getPattern(B);L.fillStyle=te.getPattern(L,this,(0,_.getCurrentTransformInverse)(L),O.PathType.SHADING);const de=(0,_.getCurrentTransformInverse)(L);if(de){const pe=L.canvas,ie=pe.width,Ae=pe.height,Ce=s.Util.applyTransform([0,0],de),Te=s.Util.applyTransform([0,Ae],de),Me=s.Util.applyTransform([ie,0],de),Ne=s.Util.applyTransform([ie,Ae],de),xe=Math.min(Ce[0],Te[0],Me[0],Ne[0]),q=Math.min(Ce[1],Te[1],Me[1],Ne[1]),X=Math.max(Ce[0],Te[0],Me[0],Ne[0]),G=Math.max(Ce[1],Te[1],Me[1],Ne[1]);this.ctx.fillRect(xe,q,X-xe,G-q)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(B,L){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(B)&&B.length===6&&this.transform(...B),this.baseTransform=(0,_.getCurrentTransform)(this.ctx),L)){const te=L[2]-L[0],de=L[3]-L[1];this.ctx.rect(L[0],L[1],te,de),this.current.updateRectMinMax((0,_.getCurrentTransform)(this.ctx),L),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(B){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const L=this.ctx;B.isolated||(0,s.info)("TODO: Support non-isolated groups."),B.knockout&&(0,s.warn)("Knockout groups not supported.");const te=(0,_.getCurrentTransform)(L);if(B.matrix&&L.transform(...B.matrix),!B.bbox)throw new Error("Bounding box is required.");let de=s.Util.getAxialAlignedBoundingBox(B.bbox,(0,_.getCurrentTransform)(L));const pe=[0,0,L.canvas.width,L.canvas.height];de=s.Util.intersect(de,pe)||[0,0,0,0];const ie=Math.floor(de[0]),Ae=Math.floor(de[1]);let Ce=Math.max(Math.ceil(de[2])-ie,1),Te=Math.max(Math.ceil(de[3])-Ae,1),Me=1,Ne=1;Ce>P&&(Me=Ce/P,Ce=P),Te>P&&(Ne=Te/P,Te=P),this.current.startNewPathAndClipBox([0,0,Ce,Te]);let xe="groupAt"+this.groupLevel;B.smask&&(xe+="_smask_"+this.smaskCounter++%2);const q=this.cachedCanvases.getCanvas(xe,Ce,Te),X=q.context;X.scale(1/Me,1/Ne),X.translate(-ie,-Ae),X.transform(...te),B.smask?this.smaskStack.push({canvas:q.canvas,context:X,offsetX:ie,offsetY:Ae,scaleX:Me,scaleY:Ne,subtype:B.smask.subtype,backdrop:B.smask.backdrop,transferMap:B.smask.transferMap||null,startTransformInverse:null}):(L.setTransform(1,0,0,1,0,0),L.translate(ie,Ae),L.scale(Me,Ne),L.save()),$(L,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(L),this.groupLevel++}endGroup(B){if(!this.contentVisible)return;this.groupLevel--;const L=this.ctx,te=this.groupStack.pop();if(this.ctx=te,this.ctx.imageSmoothingEnabled=!1,B.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const de=(0,_.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...de);const pe=s.Util.getAxialAlignedBoundingBox([0,0,L.canvas.width,L.canvas.height],de);this.ctx.drawImage(L.canvas,0,0),this.ctx.restore(),this.compose(pe)}}beginAnnotation(B,L,te,de,pe){if(u(this,ae,oe).call(this),V(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(L)&&L.length===4){const ie=L[2]-L[0],Ae=L[3]-L[1];if(pe&&this.annotationCanvasMap){te=te.slice(),te[4]-=L[0],te[5]-=L[1],L=L.slice(),L[0]=L[1]=0,L[2]=ie,L[3]=Ae;const[Ce,Te]=s.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(this.ctx)),{viewportScale:Me}=this,Ne=Math.ceil(ie*this.outputScaleX*Me),xe=Math.ceil(Ae*this.outputScaleY*Me);this.annotationCanvas=this.canvasFactory.create(Ne,xe);const{canvas:q,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(B,q),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.setTransform(Ce,0,0,-Te,0,Ae*Te),V(this.ctx,this.foregroundColor)}else V(this.ctx,this.foregroundColor),this.ctx.rect(L[0],L[1],ie,Ae),this.ctx.clip(),this.endPath()}this.current=new o(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...te),this.transform(...de)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(B){if(!this.contentVisible)return;const L=B.count;B=this.getObject(B.data,B),B.count=L;const te=this.ctx,de=this.processingType3;if(de&&(de.compiled===void 0&&(de.compiled=w(B)),de.compiled)){de.compiled(te);return}const pe=this._createMaskCanvas(B),ie=pe.canvas;te.save(),te.setTransform(1,0,0,1,0,0),te.drawImage(ie,pe.offsetX,pe.offsetY),te.restore(),this.compose()}paintImageMaskXObjectRepeat(B,L){let te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,de=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,pe=arguments.length>4?arguments[4]:void 0,ie=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;B=this.getObject(B.data,B);const Ae=this.ctx;Ae.save();const Ce=(0,_.getCurrentTransform)(Ae);Ae.transform(L,te,de,pe,0,0);const Te=this._createMaskCanvas(B);Ae.setTransform(1,0,0,1,Te.offsetX-Ce[4],Te.offsetY-Ce[5]);for(let Me=0,Ne=ie.length;Me<Ne;Me+=2){const xe=s.Util.transform(Ce,[L,te,de,pe,ie[Me],ie[Me+1]]),[q,X]=s.Util.applyTransform([0,0],xe);Ae.drawImage(Te.canvas,q,X)}Ae.restore(),this.compose()}paintImageMaskXObjectGroup(B){if(!this.contentVisible)return;const L=this.ctx,te=this.current.fillColor,de=this.current.patternFill;for(const pe of B){const{data:ie,width:Ae,height:Ce,transform:Te}=pe,Me=this.cachedCanvases.getCanvas("maskCanvas",Ae,Ce),Ne=Me.context;Ne.save();const xe=this.getObject(ie,pe);U(Ne,xe),Ne.globalCompositeOperation="source-in",Ne.fillStyle=de?te.getPattern(Ne,this,(0,_.getCurrentTransformInverse)(L),O.PathType.FILL):te,Ne.fillRect(0,0,Ae,Ce),Ne.restore(),L.save(),L.transform(...Te),L.scale(1,-1),N(L,Me.canvas,0,0,Ae,Ce,0,-1,1,1),L.restore()}this.compose()}paintImageXObject(B){if(!this.contentVisible)return;const L=this.getObject(B);if(!L){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(L)}paintImageXObjectRepeat(B,L,te,de){if(!this.contentVisible)return;const pe=this.getObject(B);if(!pe){(0,s.warn)("Dependent image isn't ready yet");return}const ie=pe.width,Ae=pe.height,Ce=[];for(let Te=0,Me=de.length;Te<Me;Te+=2)Ce.push({transform:[L,0,0,te,de[Te],de[Te+1]],x:0,y:0,w:ie,h:Ae});this.paintInlineImageXObjectGroup(pe,Ce)}paintInlineImageXObject(B){if(!this.contentVisible)return;const L=B.width,te=B.height,de=this.ctx;this.save(),de.scale(1/L,-1/te);let pe;if(typeof HTMLElement=="function"&&B instanceof HTMLElement||!B.data)pe=B;else{const Ae=this.cachedCanvases.getCanvas("inlineImage",L,te),Ce=Ae.context;A(Ce,B,this.current.transferMaps),pe=Ae.canvas}const ie=this._scaleImage(pe,(0,_.getCurrentTransformInverse)(de));de.imageSmoothingEnabled=Q((0,_.getCurrentTransform)(de),B.interpolate),N(de,ie.img,0,0,ie.paintWidth,ie.paintHeight,0,-te,L,te),this.compose(),this.restore()}paintInlineImageXObjectGroup(B,L){if(!this.contentVisible)return;const te=this.ctx,de=B.width,pe=B.height,ie=this.cachedCanvases.getCanvas("inlineImage",de,pe),Ae=ie.context;A(Ae,B,this.current.transferMaps);for(const Ce of L)te.save(),te.transform(...Ce.transform),te.scale(1,-1),N(te,ie.canvas,Ce.x,Ce.y,Ce.w,Ce.h,0,-1,1,1),te.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(B){}markPointProps(B,L){}beginMarkedContent(B){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(B,L){B==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(L)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(B){const L=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(B);const te=this.ctx;this.pendingClip&&(L||(this.pendingClip===ve?te.clip("evenodd"):te.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),te.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const B=(0,_.getCurrentTransform)(this.ctx);if(B[1]===0&&B[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(B[0]),Math.abs(B[3]));else{const L=Math.abs(B[0]*B[3]-B[2]*B[1]),te=Math.hypot(B[0],B[2]),de=Math.hypot(B[1],B[3]);this._cachedGetSinglePixelWidth=Math.max(te,de)/L}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:B}=this.current,L=(0,_.getCurrentTransform)(this.ctx);let te,de;if(L[1]===0&&L[2]===0){const pe=Math.abs(L[0]),ie=Math.abs(L[3]);if(B===0)te=1/pe,de=1/ie;else{const Ae=pe*B,Ce=ie*B;te=Ae<1?1/Ae:1,de=Ce<1?1/Ce:1}}else{const pe=Math.abs(L[0]*L[3]-L[2]*L[1]),ie=Math.hypot(L[0],L[1]),Ae=Math.hypot(L[2],L[3]);if(B===0)te=Ae/pe,de=ie/pe;else{const Ce=B*pe;te=Ae>Ce?Ae/Ce:1,de=ie>Ce?ie/Ce:1}}this._cachedScaleForStroking=[te,de]}return this._cachedScaleForStroking}rescaleAndStroke(B){const{ctx:L}=this,{lineWidth:te}=this.current,[de,pe]=this.getScaleForStroking();if(L.lineWidth=te||1,de===1&&pe===1){L.stroke();return}let ie,Ae,Ce;B&&(ie=(0,_.getCurrentTransform)(L),Ae=L.getLineDash().slice(),Ce=L.lineDashOffset),L.scale(de,pe);const Te=Math.max(de,pe);L.setLineDash(L.getLineDash().map(Me=>Me/Te)),L.lineDashOffset/=Te,L.stroke(),B&&(L.setTransform(...ie),L.setLineDash(Ae),L.lineDashOffset=Ce)}isContentVisible(){for(let B=this.markedContentStack.length-1;B>=0;B--)if(!this.markedContentStack[B].visible)return!1;return!0}}c.CanvasGraphics=D;function oe(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(const re in s.OPS)D.prototype[re]!==void 0&&(D.prototype[s.OPS[re]]=D.prototype[re])},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TilingPattern=c.PathType=void 0,c.getShadingPattern=b;var s=t(1),_=t(139);const O={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};c.PathType=O;function F(x,y){if(!y)return;const j=y[2]-y[0],N=y[3]-y[1],w=new Path2D;w.rect(y[0],y[1],j,N),x.clip(w)}class S{constructor(){this.constructor===S&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class C extends S{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let j;this._type==="axial"?j=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(j=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const N of this._colorStops)j.addColorStop(N[0],N[1]);return j}getPattern(y,j,N,w){let o;if(w===O.STROKE||w===O.FILL){const A=j.current.getClippedPathBoundingBox(w,(0,_.getCurrentTransform)(y))||[0,0,0,0],U=Math.ceil(A[2]-A[0])||1,$=Math.ceil(A[3]-A[1])||1,V=j.cachedCanvases.getCanvas("pattern",U,$,!0),H=V.context;H.clearRect(0,0,H.canvas.width,H.canvas.height),H.beginPath(),H.rect(0,0,H.canvas.width,H.canvas.height),H.translate(-A[0],-A[1]),N=s.Util.transform(N,[1,0,0,1,A[0],A[1]]),H.transform(...j.baseTransform),this.matrix&&H.transform(...this.matrix),F(H,this._bbox),H.fillStyle=this._createGradient(H),H.fill(),o=y.createPattern(V.canvas,"no-repeat");const Y=new DOMMatrix(N);o.setTransform(Y)}else F(y,this._bbox),o=this._createGradient(y);return o}}function u(x,y,j,N,w,o,A,U){const $=y.coords,V=y.colors,H=x.data,Y=x.width*4;let ue;$[j+1]>$[N+1]&&(ue=j,j=N,N=ue,ue=o,o=A,A=ue),$[N+1]>$[w+1]&&(ue=N,N=w,w=ue,ue=A,A=U,U=ue),$[j+1]>$[N+1]&&(ue=j,j=N,N=ue,ue=o,o=A,A=ue);const se=($[j]+y.offsetX)*y.scaleX,ne=($[j+1]+y.offsetY)*y.scaleY,Q=($[N]+y.offsetX)*y.scaleX,ce=($[N+1]+y.offsetY)*y.scaleY,le=($[w]+y.offsetX)*y.scaleX,J=($[w+1]+y.offsetY)*y.scaleY;if(ne>=J)return;const ve=V[o],ae=V[o+1],D=V[o+2],oe=V[A],re=V[A+1],B=V[A+2],L=V[U],te=V[U+1],de=V[U+2],pe=Math.round(ne),ie=Math.round(J);let Ae,Ce,Te,Me,Ne,xe,q,X;for(let G=pe;G<=ie;G++){if(G<ce){let ge;G<ne?ge=0:ge=(ne-G)/(ne-ce),Ae=se-(se-Q)*ge,Ce=ve-(ve-oe)*ge,Te=ae-(ae-re)*ge,Me=D-(D-B)*ge}else{let ge;G>J?ge=1:ce===J?ge=0:ge=(ce-G)/(ce-J),Ae=Q-(Q-le)*ge,Ce=oe-(oe-L)*ge,Te=re-(re-te)*ge,Me=B-(B-de)*ge}let K;G<ne?K=0:G>J?K=1:K=(ne-G)/(ne-J),Ne=se-(se-le)*K,xe=ve-(ve-L)*K,q=ae-(ae-te)*K,X=D-(D-de)*K;const me=Math.round(Math.min(Ae,Ne)),Se=Math.round(Math.max(Ae,Ne));let fe=Y*G+me*4;for(let ge=me;ge<=Se;ge++)K=(Ae-ge)/(Ae-Ne),K<0?K=0:K>1&&(K=1),H[fe++]=Ce-(Ce-xe)*K|0,H[fe++]=Te-(Te-q)*K|0,H[fe++]=Me-(Me-X)*K|0,H[fe++]=255}}function g(x,y,j){const N=y.coords,w=y.colors;let o,A;switch(y.type){case"lattice":const U=y.verticesPerRow,$=Math.floor(N.length/U)-1,V=U-1;for(o=0;o<$;o++){let H=o*U;for(let Y=0;Y<V;Y++,H++)u(x,j,N[H],N[H+1],N[H+U],w[H],w[H+1],w[H+U]),u(x,j,N[H+U+1],N[H+1],N[H+U],w[H+U+1],w[H+1],w[H+U])}break;case"triangles":for(o=0,A=N.length;o<A;o+=3)u(x,j,N[o],N[o+1],N[o+2],w[o],w[o+1],w[o+2]);break;default:throw new Error("illegal figure")}}class M extends S{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,j,N){const w=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),A=Math.ceil(this._bounds[2])-w,U=Math.ceil(this._bounds[3])-o,$=Math.min(Math.ceil(Math.abs(A*y[0]*1.1)),3e3),V=Math.min(Math.ceil(Math.abs(U*y[1]*1.1)),3e3),H=A/$,Y=U/V,ue={coords:this._coords,colors:this._colors,offsetX:-w,offsetY:-o,scaleX:1/H,scaleY:1/Y},se=$+2*2,ne=V+2*2,Q=N.getCanvas("mesh",se,ne,!1),ce=Q.context,le=ce.createImageData($,V);if(j){const J=le.data;for(let ve=0,ae=J.length;ve<ae;ve+=4)J[ve]=j[0],J[ve+1]=j[1],J[ve+2]=j[2],J[ve+3]=255}for(const J of this._figures)g(le,J,ue);return ce.putImageData(le,2,2),{canvas:Q.canvas,offsetX:w-2*H,offsetY:o-2*Y,scaleX:H,scaleY:Y}}getPattern(y,j,N,w){F(y,this._bbox);let o;if(w===O.SHADING)o=s.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(y));else if(o=s.Util.singularValueDecompose2dScale(j.baseTransform),this.matrix){const U=s.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*U[0],o[1]*U[1]]}const A=this._createMeshCanvas(o,w===O.SHADING?null:this._background,j.cachedCanvases);return w!==O.SHADING&&(y.setTransform(...j.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(A.offsetX,A.offsetY),y.scale(A.scaleX,A.scaleY),y.createPattern(A.canvas,"no-repeat")}}class P extends S{getPattern(){return"hotpink"}}function b(x){switch(x[0]){case"RadialAxial":return new C(x);case"Mesh":return new M(x);case"Dummy":return new P}throw new Error(`Unknown IR type: ${x[0]}`)}const n={COLORED:1,UNCOLORED:2};class h{static get MAX_PATTERN_SIZE(){return(0,s.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(y,j,N,w,o){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=j,this.ctx=N,this.canvasGraphicsFactory=w,this.baseTransform=o}createPatternCanvas(y){const j=this.operatorList,N=this.bbox,w=this.xstep,o=this.ystep,A=this.paintType,U=this.tilingType,$=this.color,V=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+U);const H=N[0],Y=N[1],ue=N[2],se=N[3],ne=s.Util.singularValueDecompose2dScale(this.matrix),Q=s.Util.singularValueDecompose2dScale(this.baseTransform),ce=[ne[0]*Q[0],ne[1]*Q[1]],le=this.getSizeAndScale(w,this.ctx.canvas.width,ce[0]),J=this.getSizeAndScale(o,this.ctx.canvas.height,ce[1]),ve=y.cachedCanvases.getCanvas("pattern",le.size,J.size,!0),ae=ve.context,D=V.createCanvasGraphics(ae);D.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(D,A,$);let oe=H,re=Y,B=ue,L=se;return H<0&&(oe=0,B+=Math.abs(H)),Y<0&&(re=0,L+=Math.abs(Y)),ae.translate(-(le.scale*oe),-(J.scale*re)),D.transform(le.scale,0,0,J.scale,0,0),ae.save(),this.clipBbox(D,oe,re,B,L),D.baseTransform=(0,_.getCurrentTransform)(D.ctx),D.executeOperatorList(j),D.endDrawing(),{canvas:ve.canvas,scaleX:le.scale,scaleY:J.scale,offsetX:oe,offsetY:re}}getSizeAndScale(y,j,N){y=Math.abs(y);const w=Math.max(h.MAX_PATTERN_SIZE,j);let o=Math.ceil(y*N);return o>=w?o=w:N=o/y,{scale:N,size:o}}clipBbox(y,j,N,w,o){const A=w-j,U=o-N;y.ctx.rect(j,N,A,U),y.current.updateRectMinMax((0,_.getCurrentTransform)(y.ctx),[j,N,w,o]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,j,N){const w=y.ctx,o=y.current;switch(j){case n.COLORED:const A=this.ctx;w.fillStyle=A.fillStyle,w.strokeStyle=A.strokeStyle,o.fillColor=A.fillStyle,o.strokeColor=A.strokeStyle;break;case n.UNCOLORED:const U=s.Util.makeHexColor(N[0],N[1],N[2]);w.fillStyle=U,w.strokeStyle=U,o.fillColor=U,o.strokeColor=U;break;default:throw new s.FormatError(`Unsupported paint type: ${j}`)}}getPattern(y,j,N,w){let o=N;w!==O.SHADING&&(o=s.Util.transform(o,j.baseTransform),this.matrix&&(o=s.Util.transform(o,this.matrix)));const A=this.createPatternCanvas(j);let U=new DOMMatrix(o);U=U.translate(A.offsetX,A.offsetY),U=U.scale(1/A.scaleX,1/A.scaleY);const $=y.createPattern(A.canvas,"repeat");return $.setTransform(U),$}}c.TilingPattern=h},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.applyMaskImageData=_;var s=t(1);function _(O){let{src:F,srcPos:S=0,dest:C,destPos:u=0,width:g,height:M,inverseDecode:P=!1}=O;const b=s.FeatureTest.isLittleEndian?4278190080:255,[n,h]=P?[0,b]:[b,0],x=g>>3,y=g&7,j=F.length;C=new Uint32Array(C.buffer);for(let N=0;N<M;N++){for(const o=S+x;S<o;S++){const A=S<j?F[S]:255;C[u++]=A&128?h:n,C[u++]=A&64?h:n,C[u++]=A&32?h:n,C[u++]=A&16?h:n,C[u++]=A&8?h:n,C[u++]=A&4?h:n,C[u++]=A&2?h:n,C[u++]=A&1?h:n}if(y===0)continue;const w=S<j?F[S++]:255;for(let o=0;o<y;o++)C[u++]=w&1<<7-o?h:n}return{srcPos:S,destPos:u}}},(T,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.GlobalWorkerOptions=void 0;const t=Object.create(null);c.GlobalWorkerOptions=t,t.workerPort=null,t.workerSrc=""},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.MessageHandler=void 0;var s=t(1);const _={UNKNOWN:0,DATA:1,ERROR:2},O={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function F(C){switch(C instanceof Error||typeof C=="object"&&C!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),C.name){case"AbortException":return new s.AbortException(C.message);case"MissingPDFException":return new s.MissingPDFException(C.message);case"PasswordException":return new s.PasswordException(C.message,C.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(C.message,C.status);case"UnknownErrorException":return new s.UnknownErrorException(C.message,C.details);default:return new s.UnknownErrorException(C.message,C.toString())}}class S{constructor(u,g,M){this.sourceName=u,this.targetName=g,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const b=P.data;if(b.targetName!==this.sourceName)return;if(b.stream){this._processStreamMessage(b);return}if(b.callback){const h=b.callbackId,x=this.callbackCapabilities[h];if(!x)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],b.callback===_.DATA)x.resolve(b.data);else if(b.callback===_.ERROR)x.reject(F(b.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[b.action];if(!n)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const h=this.sourceName,x=b.sourceName;new Promise(function(y){y(n(b.data))}).then(function(y){M.postMessage({sourceName:h,targetName:x,callback:_.DATA,callbackId:b.callbackId,data:y})},function(y){M.postMessage({sourceName:h,targetName:x,callback:_.ERROR,callbackId:b.callbackId,reason:F(y)})});return}if(b.streamId){this._createStreamSink(b);return}n(b.data)},M.addEventListener("message",this._onComObjOnMessage)}on(u,g){const M=this.actionHandler;if(M[u])throw new Error(`There is already an actionName called "${u}"`);M[u]=g}send(u,g,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:g},M)}sendWithPromise(u,g,M){const P=this.callbackId++,b=(0,s.createPromiseCapability)();this.callbackCapabilities[P]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:P,data:g},M)}catch(n){b.reject(n)}return b.promise}sendWithStream(u,g,M,P){const b=this.streamId++,n=this.sourceName,h=this.targetName,x=this.comObj;return new ReadableStream({start:y=>{const j=(0,s.createPromiseCapability)();return this.streamControllers[b]={controller:y,startCall:j,pullCall:null,cancelCall:null,isClosed:!1},x.postMessage({sourceName:n,targetName:h,action:u,streamId:b,data:g,desiredSize:y.desiredSize},P),j.promise},pull:y=>{const j=(0,s.createPromiseCapability)();return this.streamControllers[b].pullCall=j,x.postMessage({sourceName:n,targetName:h,stream:O.PULL,streamId:b,desiredSize:y.desiredSize}),j.promise},cancel:y=>{(0,s.assert)(y instanceof Error,"cancel must have a valid reason");const j=(0,s.createPromiseCapability)();return this.streamControllers[b].cancelCall=j,this.streamControllers[b].isClosed=!0,x.postMessage({sourceName:n,targetName:h,stream:O.CANCEL,streamId:b,reason:F(y)}),j.promise}},M)}_createStreamSink(u){const g=u.streamId,M=this.sourceName,P=u.sourceName,b=this.comObj,n=this,h=this.actionHandler[u.action],x={enqueue(y){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,N=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=j,w>0&&this.desiredSize<=0&&(this.sinkCapability=(0,s.createPromiseCapability)(),this.ready=this.sinkCapability.promise),b.postMessage({sourceName:M,targetName:P,stream:O.ENQUEUE,streamId:g,chunk:y},N)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:M,targetName:P,stream:O.CLOSE,streamId:g}),delete n.streamSinks[g])},error(y){(0,s.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:M,targetName:P,stream:O.ERROR,streamId:g,reason:F(y)}))},sinkCapability:(0,s.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};x.sinkCapability.resolve(),x.ready=x.sinkCapability.promise,this.streamSinks[g]=x,new Promise(function(y){y(h(u.data,x))}).then(function(){b.postMessage({sourceName:M,targetName:P,stream:O.START_COMPLETE,streamId:g,success:!0})},function(y){b.postMessage({sourceName:M,targetName:P,stream:O.START_COMPLETE,streamId:g,reason:F(y)})})}_processStreamMessage(u){const g=u.streamId,M=this.sourceName,P=u.sourceName,b=this.comObj,n=this.streamControllers[g],h=this.streamSinks[g];switch(u.stream){case O.START_COMPLETE:u.success?n.startCall.resolve():n.startCall.reject(F(u.reason));break;case O.PULL_COMPLETE:u.success?n.pullCall.resolve():n.pullCall.reject(F(u.reason));break;case O.PULL:if(!h){b.postMessage({sourceName:M,targetName:P,stream:O.PULL_COMPLETE,streamId:g,success:!0});break}h.desiredSize<=0&&u.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=u.desiredSize,new Promise(function(x){x(h.onPull&&h.onPull())}).then(function(){b.postMessage({sourceName:M,targetName:P,stream:O.PULL_COMPLETE,streamId:g,success:!0})},function(x){b.postMessage({sourceName:M,targetName:P,stream:O.PULL_COMPLETE,streamId:g,reason:F(x)})});break;case O.ENQUEUE:if((0,s.assert)(n,"enqueue should have stream controller"),n.isClosed)break;n.controller.enqueue(u.chunk);break;case O.CLOSE:if((0,s.assert)(n,"close should have stream controller"),n.isClosed)break;n.isClosed=!0,n.controller.close(),this._deleteStreamController(n,g);break;case O.ERROR:(0,s.assert)(n,"error should have stream controller"),n.controller.error(F(u.reason)),this._deleteStreamController(n,g);break;case O.CANCEL_COMPLETE:u.success?n.cancelCall.resolve():n.cancelCall.reject(F(u.reason)),this._deleteStreamController(n,g);break;case O.CANCEL:if(!h)break;new Promise(function(x){x(h.onCancel&&h.onCancel(F(u.reason)))}).then(function(){b.postMessage({sourceName:M,targetName:P,stream:O.CANCEL_COMPLETE,streamId:g,success:!0})},function(x){b.postMessage({sourceName:M,targetName:P,stream:O.CANCEL_COMPLETE,streamId:g,reason:F(x)})}),h.sinkCapability.reject(F(u.reason)),h.isCancelled=!0,delete this.streamSinks[g];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(u,g){await Promise.allSettled([u.startCall&&u.startCall.promise,u.pullCall&&u.pullCall.promise,u.cancelCall&&u.cancelCall.promise]),delete this.streamControllers[g]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}c.MessageHandler=S},(T,c,t)=>{var s,_;Object.defineProperty(c,"__esModule",{value:!0}),c.Metadata=void 0;var O=t(1);class F{constructor(C){nt(this,s,void 0),nt(this,_,void 0);let{parsedData:u,rawData:g}=C;rt(this,s,u),rt(this,_,g)}getRaw(){return Ue(this,_)}get(C){return Ue(this,s).get(C)??null}getAll(){return(0,O.objectFromMap)(Ue(this,s))}has(C){return Ue(this,s).has(C)}}s=new WeakMap,_=new WeakMap,c.Metadata=F},(T,c,t)=>{var s;Object.defineProperty(c,"__esModule",{value:!0}),c.OptionalContentConfig=void 0;var _=t(1),O=t(141);function F($,V){C($,V),V.add($)}function S($,V,H){C($,V),V.set($,H)}function C($,V){if(V.has($))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u($,V,H){if(!V.has($))throw new TypeError("attempted to get private field on non-instance");return H}function g($,V){var H=b($,V,"get");return M($,H)}function M($,V){return V.get?V.get.call($):V.value}function P($,V,H){var Y=b($,V,"set");return n($,Y,H),H}function b($,V,H){if(!V.has($))throw new TypeError("attempted to "+H+" private field on non-instance");return V.get($)}function n($,V,H){if(V.set)V.set.call($,H);else{if(!V.writable)throw new TypeError("attempted to set read only private field");V.value=H}}const h=Symbol("INTERNAL");class x{constructor(V,H){nt(this,s,!0),this.name=V,this.intent=H}get visible(){return Ue(this,s)}_setVisible(V,H){V!==h&&(0,_.unreachable)("Internal method `_setVisible` called."),rt(this,s,H)}}s=new WeakMap;var y=new WeakMap,j=new WeakMap,N=new WeakMap,w=new WeakMap,o=new WeakSet;class A{constructor(V){if(F(this,o),S(this,y,{writable:!0,value:null}),S(this,j,{writable:!0,value:new Map}),S(this,N,{writable:!0,value:null}),S(this,w,{writable:!0,value:null}),this.name=null,this.creator=null,V!==null){this.name=V.name,this.creator=V.creator,P(this,w,V.order);for(const H of V.groups)g(this,j).set(H.id,new x(H.name,H.intent));if(V.baseState==="OFF")for(const H of g(this,j).values())H._setVisible(h,!1);for(const H of V.on)g(this,j).get(H)._setVisible(h,!0);for(const H of V.off)g(this,j).get(H)._setVisible(h,!1);P(this,N,this.getHash())}}isVisible(V){if(g(this,j).size===0)return!0;if(!V)return(0,_.warn)("Optional content group not defined."),!0;if(V.type==="OCG")return g(this,j).has(V.id)?g(this,j).get(V.id).visible:((0,_.warn)(`Optional content group not found: ${V.id}`),!0);if(V.type==="OCMD"){if(V.expression)return u(this,o,U).call(this,V.expression);if(!V.policy||V.policy==="AnyOn"){for(const H of V.ids){if(!g(this,j).has(H))return(0,_.warn)(`Optional content group not found: ${H}`),!0;if(g(this,j).get(H).visible)return!0}return!1}else if(V.policy==="AllOn"){for(const H of V.ids){if(!g(this,j).has(H))return(0,_.warn)(`Optional content group not found: ${H}`),!0;if(!g(this,j).get(H).visible)return!1}return!0}else if(V.policy==="AnyOff"){for(const H of V.ids){if(!g(this,j).has(H))return(0,_.warn)(`Optional content group not found: ${H}`),!0;if(!g(this,j).get(H).visible)return!0}return!1}else if(V.policy==="AllOff"){for(const H of V.ids){if(!g(this,j).has(H))return(0,_.warn)(`Optional content group not found: ${H}`),!0;if(g(this,j).get(H).visible)return!1}return!0}return(0,_.warn)(`Unknown optional content policy ${V.policy}.`),!0}return(0,_.warn)(`Unknown group type ${V.type}.`),!0}setVisibility(V){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!g(this,j).has(V)){(0,_.warn)(`Optional content group not found: ${V}`);return}g(this,j).get(V)._setVisible(h,!!H),P(this,y,null)}get hasInitialVisibility(){return this.getHash()===g(this,N)}getOrder(){return g(this,j).size?g(this,w)?g(this,w).slice():[...g(this,j).keys()]:null}getGroups(){return g(this,j).size>0?(0,_.objectFromMap)(g(this,j)):null}getGroup(V){return g(this,j).get(V)||null}getHash(){if(g(this,y)!==null)return g(this,y);const V=new O.MurmurHash3_64;for(const[H,Y]of g(this,j))V.update(`${H}:${Y.visible}`);return P(this,y,V.hexdigest())}}c.OptionalContentConfig=A;function U($){const V=$.length;if(V<2)return!0;const H=$[0];for(let Y=1;Y<V;Y++){const ue=$[Y];let se;if(Array.isArray(ue))se=u(this,o,U).call(this,ue);else if(g(this,j).has(ue))se=g(this,j).get(ue).visible;else return(0,_.warn)(`Optional content group not found: ${ue}`),!0;switch(H){case"And":if(!se)return!1;break;case"Or":if(se)return!0;break;case"Not":return!se;default:return!0}}return H==="And"}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFDataTransportStream=void 0;var s=t(1),_=t(139);class O{constructor(u,g){let{length:M,initialData:P,progressiveDone:b=!1,contentDispositionFilename:n=null,disableRange:h=!1,disableStream:x=!1}=u;if((0,s.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=b,this._contentDispositionFilename=n,(P==null?void 0:P.length)>0){const y=P instanceof Uint8Array&&P.byteLength===P.buffer.byteLength?P.buffer:new Uint8Array(P).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!x,this._isRangeSupported=!h,this._contentLength=M,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((y,j)=>{this._onReceiveData({begin:y,chunk:j})}),this._pdfDataRangeTransport.addProgressListener((y,j)=>{this._onProgress({loaded:y,total:j})}),this._pdfDataRangeTransport.addProgressiveReadListener(y=>{this._onReceiveData({chunk:y})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(u){let{begin:g,chunk:M}=u;const P=M instanceof Uint8Array&&M.byteLength===M.buffer.byteLength?M.buffer:new Uint8Array(M).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(P):this._queuedChunks.push(P);else{const b=this._rangeReaders.some(function(n){return n._begin!==g?!1:(n._enqueue(P),!0)});(0,s.assert)(b,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u;return((u=this._fullRequestReader)===null||u===void 0?void 0:u._loaded)??0}_onProgress(u){if(u.total===void 0){var g,M;(g=this._rangeReaders[0])===null||g===void 0||(M=g.onProgress)===null||M===void 0||M.call(g,{loaded:u.loaded})}else{var P,b;(P=this._fullRequestReader)===null||P===void 0||(b=P.onProgress)===null||b===void 0||b.call(P,{loaded:u.loaded,total:u.total})}}_onProgressiveDone(){var u;(u=this._fullRequestReader)===null||u===void 0||u.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const g=this._rangeReaders.indexOf(u);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new F(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,g){if(g<=this._progressiveDataLength)return null;const M=new S(this,u,g);return this._pdfDataRangeTransport.requestDataRange(u,g),this._rangeReaders.push(M),M}cancelAllRequests(u){var g;(g=this._fullRequestReader)===null||g===void 0||g.cancel(u);for(const M of this._rangeReaders.slice(0))M.cancel(u);this._pdfDataRangeTransport.abort()}}c.PDFDataTransportStream=O;class F{constructor(u,g){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=u,this._done=M||!1,this._filename=(0,_.isPdfFile)(P)?P:null,this._queuedChunks=g||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,s.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class S{constructor(u,g,M){this._stream=u,this._begin=g,this._end=M,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,s.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(T,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.XfaText=void 0;class t{static textContent(_){const O=[],F={items:O,styles:Object.create(null)};function S(C){var u;if(!C)return;let g=null;const M=C.name;if(M==="#text")g=C.value;else if(t.shouldBuildText(M))C!=null&&(u=C.attributes)!==null&&u!==void 0&&u.textContent?g=C.attributes.textContent:C.value&&(g=C.value);else return;if(g!==null&&O.push({str:g}),!!C.children)for(const P of C.children)S(P)}return S(_),F}static shouldBuildText(_){return!(_==="textarea"||_==="input"||_==="option"||_==="select")}}c.XfaText=t},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NodeStandardFontDataFactory=c.NodeCanvasFactory=c.NodeCMapReaderFactory=void 0;var s=t(140);const _=function(C){return new Promise((u,g)=>{require$$7.readFile(C,(M,P)=>{if(M||!P){g(new Error(M));return}u(new Uint8Array(P))})})};class O extends s.BaseCanvasFactory{_createCanvas(u,g){return require$$7.createCanvas(u,g)}}c.NodeCanvasFactory=O;class F extends s.BaseCMapReaderFactory{_fetchData(u,g){return _(u).then(M=>({cMapData:M,compressionType:g}))}}c.NodeCMapReaderFactory=F;class S extends s.BaseStandardFontDataFactory{_fetchData(u){return _(u)}}c.NodeStandardFontDataFactory=S},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFNodeStream=void 0;var s=t(1),_=t(154);const O=require$$7,F=require$$7,S=require$$7,C=require$$7,u=/^file:\/\/\/[a-zA-Z]:\//;function g(N){const w=C.parse(N);return w.protocol==="file:"||w.host?w:/^[a-z]:[/\\]/i.test(N)?C.parse(`file:///${N}`):(w.host||(w.protocol="file:"),w)}class M{constructor(w){this.source=w,this.url=g(w.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)===null||w===void 0?void 0:w._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new h(this),this._fullRequestReader}getRangeReader(w,o){if(o<=this._progressiveDataLength)return null;const A=this.isFsUrl?new j(this,w,o):new x(this,w,o);return this._rangeRequestReaders.push(A),A}cancelAllRequests(w){var o;(o=this._fullRequestReader)===null||o===void 0||o.cancel(w);for(const A of this._rangeRequestReaders.slice(0))A.cancel(w)}}c.PDFNodeStream=M;class P{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=w.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)(),this._headersCapability=(0,s.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const o=this._readableStream.read();return o===null?(this._readCapability=(0,s.createPromiseCapability)(),this.read()):(this._loaded+=o.length,(w=this.onProgress)===null||w===void 0||w.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(o).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,s.createPromiseCapability)();const o=w.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var w;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const o=this._readableStream.read();return o===null?(this._readCapability=(0,s.createPromiseCapability)(),this.read()):(this._loaded+=o.length,(w=this.onProgress)===null||w===void 0||w.call(this,{loaded:this._loaded}),{value:new Uint8Array(o).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function n(N,w){return{protocol:N.protocol,auth:N.auth,host:N.hostname,port:N.port,path:N.path,method:"GET",headers:w}}class h extends P{constructor(w){super(w);const o=A=>{if(A.statusCode===404){const H=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=H,this._headersCapability.reject(H);return}this._headersCapability.resolve(),this._setReadableStream(A);const U=H=>this._readableStream.headers[H.toLowerCase()],{allowRangeRequests:$,suggestedLength:V}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:U,isHttp:w.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=$,this._contentLength=V||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(U)};this._request=null,this._url.protocol==="http:"?this._request=F.request(n(this._url,w.httpHeaders),o):this._request=S.request(n(this._url,w.httpHeaders),o),this._request.on("error",A=>{this._storedError=A,this._headersCapability.reject(A)}),this._request.end()}}class x extends b{constructor(w,o,A){super(w),this._httpHeaders={};for(const $ in w.httpHeaders){const V=w.httpHeaders[$];V!==void 0&&(this._httpHeaders[$]=V)}this._httpHeaders.Range=`bytes=${o}-${A-1}`;const U=$=>{if($.statusCode===404){const V=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=V;return}this._setReadableStream($)};this._request=null,this._url.protocol==="http:"?this._request=F.request(n(this._url,this._httpHeaders),U):this._request=S.request(n(this._url,this._httpHeaders),U),this._request.on("error",$=>{this._storedError=$}),this._request.end()}}class y extends P{constructor(w){super(w);let o=decodeURIComponent(this._url.path);u.test(this._url.href)&&(o=o.replace(/^\//,"")),O.lstat(o,(A,U)=>{if(A){A.code==="ENOENT"&&(A=new s.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=A,this._headersCapability.reject(A);return}this._contentLength=U.size,this._setReadableStream(O.createReadStream(o)),this._headersCapability.resolve()})}}class j extends b{constructor(w,o,A){super(w);let U=decodeURIComponent(this._url.path);u.test(this._url.href)&&(U=U.replace(/^\//,"")),this._setReadableStream(O.createReadStream(U,{start:o,end:A-1}))}}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createResponseStatusError=C,c.extractFilenameFromHeader=S,c.validateRangeRequestCapabilities=F,c.validateResponseStatus=u;var s=t(1),_=t(155),O=t(139);function F(g){let{getResponseHeader:M,isHttp:P,rangeChunkSize:b,disableRange:n}=g;const h={allowRangeRequests:!1,suggestedLength:void 0},x=parseInt(M("Content-Length"),10);return!Number.isInteger(x)||(h.suggestedLength=x,x<=2*b)||n||!P||M("Accept-Ranges")!=="bytes"||(M("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function S(g){const M=g("Content-Disposition");if(M){let P=(0,_.getFilenameFromContentDispositionHeader)(M);if(P.includes("%"))try{P=decodeURIComponent(P)}catch{}if((0,O.isPdfFile)(P))return P}return null}function C(g,M){return g===404||g===0&&M.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+M+'".'):new s.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${M}".`,g)}function u(g){return g===200||g===206}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getFilenameFromContentDispositionHeader=_;var s=t(1);function _(O){let F=!0,S=C("filename\\*","i").exec(O);if(S){S=S[1];let h=P(S);return h=unescape(h),h=b(h),h=n(h),g(h)}if(S=M(O),S){const h=n(S);return g(h)}if(S=C("filename","i").exec(O),S){S=S[1];let h=P(S);return h=n(h),g(h)}function C(h,x){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function u(h,x){if(h){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const y=new TextDecoder(h,{fatal:!0}),j=(0,s.stringToBytes)(x);x=y.decode(j),F=!1}catch{}}return x}function g(h){return F&&/[\x80-\xff]/.test(h)&&(h=u("utf-8",h),F&&(h=u("iso-8859-1",h))),h}function M(h){const x=[];let y;const j=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=j.exec(h))!==null;){let[,w,o,A]=y;if(w=parseInt(w,10),w in x){if(w===0)break;continue}x[w]=[o,A]}const N=[];for(let w=0;w<x.length&&w in x;++w){let[o,A]=x[w];A=P(A),o&&(A=unescape(A),w===0&&(A=b(A))),N.push(A)}return N.join("")}function P(h){if(h.startsWith('"')){const x=h.slice(1).split('\\"');for(let y=0;y<x.length;++y){const j=x[y].indexOf('"');j!==-1&&(x[y]=x[y].slice(0,j),x.length=y+1),x[y]=x[y].replace(/\\(.)/g,"$1")}h=x.join('"')}return h}function b(h){const x=h.indexOf("'");if(x===-1)return h;const y=h.slice(0,x),j=h.slice(x+1).replace(/^[^']*'/,"");return u(y,j)}function n(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,y,j,N){if(j==="q"||j==="Q")return N=N.replace(/_/g," "),N=N.replace(/=([0-9a-fA-F]{2})/g,function(w,o){return String.fromCharCode(parseInt(o,16))}),u(y,N);try{N=atob(N)}catch{}return u(y,N)})}return""}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFNetworkStream=void 0;var s=t(1),_=t(154);const O=200,F=206;function S(P){const b=P.response;return typeof b!="string"?b:(0,s.stringToBytes)(b).buffer}class C{constructor(b){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.getXhr=n.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,n,h){const x={begin:b,end:n};for(const y in h)x[y]=h[y];return this.request(x)}requestFull(b){return this.request(b)}request(b){const n=this.getXhr(),h=this.currXhrId++,x=this.pendingRequests[h]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const j=this.httpHeaders[y];j!==void 0&&n.setRequestHeader(y,j)}return this.isHttp&&"begin"in b&&"end"in b?(n.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),x.expectedStatus=F):x.expectedStatus=O,n.responseType="arraybuffer",b.onError&&(n.onerror=function(y){b.onError(n.status)}),n.onreadystatechange=this.onStateChange.bind(this,h),n.onprogress=this.onProgress.bind(this,h),x.onHeadersReceived=b.onHeadersReceived,x.onDone=b.onDone,x.onError=b.onError,x.onProgress=b.onProgress,n.send(null),h}onProgress(b,n){var h;const x=this.pendingRequests[b];x&&((h=x.onProgress)===null||h===void 0||h.call(x,n))}onStateChange(b,n){const h=this.pendingRequests[b];if(!h)return;const x=h.xhr;if(x.readyState>=2&&h.onHeadersReceived&&(h.onHeadersReceived(),delete h.onHeadersReceived),x.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],x.status===0&&this.isHttp){var y;(y=h.onError)===null||y===void 0||y.call(h,x.status);return}const j=x.status||O;if(!(j===O&&h.expectedStatus===F)&&j!==h.expectedStatus){var N;(N=h.onError)===null||N===void 0||N.call(h,x.status);return}const w=S(x);if(j===F){const A=x.getResponseHeader("Content-Range"),U=/bytes (\d+)-(\d+)\/(\d+)/.exec(A);h.onDone({begin:parseInt(U[1],10),chunk:w})}else if(w)h.onDone({begin:0,chunk:w});else{var o;(o=h.onError)===null||o===void 0||o.call(h,x.status)}}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const n=this.pendingRequests[b].xhr;delete this.pendingRequests[b],n.abort()}}class u{constructor(b){this._source=b,this._manager=new C(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const n=this._rangeRequestReaders.indexOf(b);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(b,n){const h=new M(this._manager,b,n);return h.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(h),h}cancelAllRequests(b){var n;(n=this._fullRequestReader)===null||n===void 0||n.cancel(b);for(const h of this._rangeRequestReaders.slice(0))h.cancel(b)}}c.PDFNetworkStream=u;class g{constructor(b,n){this._manager=b;const h={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=b.requestFull(h),this._headersReceivedCapability=(0,s.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,n=this._manager.getRequestXhr(b),h=j=>n.getResponseHeader(j),{allowRangeRequests:x,suggestedLength:y}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:h,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});x&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(h),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,_.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){var n;(n=this.onProgress)===null||n===void 0||n.call(this,{loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=(0,s.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class M{constructor(b,n,h){this._manager=b;const x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(n,h,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var b;(b=this.onClosed)===null||b===void 0||b.call(this,this)}_onDone(b){const n=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,_.createResponseStatusError)(b,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){if(!this.isStreamingSupported){var n;(n=this.onProgress)===null||n===void 0||n.call(this,{loaded:b.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const b=(0,s.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PDFFetchStream=void 0;var s=t(1),_=t(154);function O(M,P,b){return{method:"GET",headers:M,signal:b.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function F(M){const P=new Headers;for(const b in M){const n=M[b];n!==void 0&&P.append(b,n)}return P}function S(M){return M instanceof Uint8Array?M.buffer:M instanceof ArrayBuffer?M:((0,s.warn)(`getArrayBuffer - unexpected data format: ${M}`),new Uint8Array(M).buffer)}class C{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)===null||P===void 0?void 0:P._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(P,b){if(b<=this._progressiveDataLength)return null;const n=new g(this,P,b);return this._rangeRequestReaders.push(n),n}cancelAllRequests(P){var b;(b=this._fullRequestReader)===null||b===void 0||b.cancel(P);for(const n of this._rangeRequestReaders.slice(0))n.cancel(P)}}c.PDFFetchStream=C;class u{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const b=P.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=(0,s.createPromiseCapability)(),this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=F(this._stream.httpHeaders);const n=b.url;fetch(n,O(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,_.validateResponseStatus)(h.status))throw(0,_.createResponseStatusError)(h.status,n);this._reader=h.body.getReader(),this._headersCapability.resolve();const x=N=>h.headers.get(N),{allowRangeRequests:y,suggestedLength:j}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=j||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(x),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;await this._headersCapability.promise;const{value:b,done:n}=await this._reader.read();return n?{value:b,done:n}:(this._loaded+=b.byteLength,(P=this.onProgress)===null||P===void 0||P.call(this,{loaded:this._loaded,total:this._contentLength}),{value:S(b),done:!1})}cancel(P){var b;(b=this._reader)===null||b===void 0||b.cancel(P),this._abortController.abort()}}class g{constructor(P,b,n){this._stream=P,this._reader=null,this._loaded=0;const h=P.source;this._withCredentials=h.withCredentials||!1,this._readCapability=(0,s.createPromiseCapability)(),this._isStreamingSupported=!h.disableStream,this._abortController=new AbortController,this._headers=F(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${n-1}`);const x=h.url;fetch(x,O(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,_.validateResponseStatus)(y.status))throw(0,_.createResponseStatusError)(y.status,x);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;await this._readCapability.promise;const{value:b,done:n}=await this._reader.read();return n?{value:b,done:n}:(this._loaded+=b.byteLength,(P=this.onProgress)===null||P===void 0||P.call(this,{loaded:this._loaded}),{value:S(b),done:!1})}cancel(P){var b;(b=this._reader)===null||b===void 0||b.cancel(P),this._abortController.abort()}}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TextLayerRenderTask=void 0,c.renderTextLayer=h,c.updateTextLayer=x;var s=t(1),_=t(139);const O=1e5,F=30,S=.8,C=new Map;function u(y,j){let N;if(j&&s.FeatureTest.isOffscreenCanvasSupported)N=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const w=document.createElement("canvas");w.width=w.height=y,N=w.getContext("2d",{alpha:!1})}return N}function g(y,j){const N=C.get(y);if(N)return N;const w=u(F,j);w.font=`${F}px ${y}`;const o=w.measureText("");let A=o.fontBoundingBoxAscent,U=Math.abs(o.fontBoundingBoxDescent);if(A){const V=A/(A+U);return C.set(y,V),w.canvas.width=w.canvas.height=0,V}w.strokeStyle="red",w.clearRect(0,0,F,F),w.strokeText("g",0,0);let $=w.getImageData(0,0,F,F).data;U=0;for(let V=$.length-1-3;V>=0;V-=4)if($[V]>0){U=Math.ceil(V/4/F);break}w.clearRect(0,0,F,F),w.strokeText("A",0,F),$=w.getImageData(0,0,F,F).data,A=0;for(let V=0,H=$.length;V<H;V+=4)if($[V]>0){A=F-Math.floor(V/4/F);break}if(w.canvas.width=w.canvas.height=0,A){const V=A/(A+U);return C.set(y,V),V}return C.set(y,S),S}function M(y,j,N){const w=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:j.str!=="",hasEOL:j.hasEOL,fontSize:0};y._textDivs.push(w);const A=s.Util.transform(y._transform,j.transform);let U=Math.atan2(A[1],A[0]);const $=N[j.fontName];$.vertical&&(U+=Math.PI/2);const V=Math.hypot(A[2],A[3]),H=V*g($.fontFamily,y._isOffscreenCanvasSupported);let Y,ue;U===0?(Y=A[4],ue=A[5]-H):(Y=A[4]+H*Math.sin(U),ue=A[5]-H*Math.cos(U));const se="calc(var(--scale-factor)*",ne=w.style;y._container===y._rootContainer?(ne.left=`${(100*Y/y._pageWidth).toFixed(2)}%`,ne.top=`${(100*ue/y._pageHeight).toFixed(2)}%`):(ne.left=`${se}${Y.toFixed(2)}px)`,ne.top=`${se}${ue.toFixed(2)}px)`),ne.fontSize=`${se}${V.toFixed(2)}px)`,ne.fontFamily=$.fontFamily,o.fontSize=V,w.setAttribute("role","presentation"),w.textContent=j.str,w.dir=j.dir,y._fontInspectorEnabled&&(w.dataset.fontName=j.fontName),U!==0&&(o.angle=U*(180/Math.PI));let Q=!1;if(j.str.length>1)Q=!0;else if(j.str!==" "&&j.transform[0]!==j.transform[3]){const ce=Math.abs(j.transform[0]),le=Math.abs(j.transform[3]);ce!==le&&Math.max(ce,le)/Math.min(ce,le)>1.5&&(Q=!0)}Q&&(o.canvasWidth=$.vertical?j.height:j.width),y._textDivProperties.set(w,o),y._isReadableStream&&y._layoutText(w)}function P(y){const{div:j,scale:N,properties:w,ctx:o,prevFontSize:A,prevFontFamily:U}=y,{style:$}=j;let V="";if(w.canvasWidth!==0&&w.hasText){const{fontFamily:H}=$,{canvasWidth:Y,fontSize:ue}=w;(A!==ue||U!==H)&&(o.font=`${ue*N}px ${H}`,y.prevFontSize=ue,y.prevFontFamily=H);const{width:se}=o.measureText(j.textContent);se>0&&(V=`scaleX(${Y*N/se})`)}w.angle!==0&&(V=`rotate(${w.angle}deg) ${V}`),V.length>0&&($.transform=V)}function b(y){if(y._canceled)return;const j=y._textDivs,N=y._capability;if(j.length>O){N.resolve();return}if(!y._isReadableStream)for(const w of j)y._layoutText(w);N.resolve()}class n{constructor(j){var N;let{textContentSource:w,container:o,viewport:A,textDivs:U,textDivProperties:$,textContentItemsStr:V,isOffscreenCanvasSupported:H}=j;this._textContentSource=w,this._isReadableStream=w instanceof ReadableStream,this._container=this._rootContainer=o,this._textDivs=U||[],this._textContentItemsStr=V||[],this._isOffscreenCanvasSupported=H,this._fontInspectorEnabled=!!((N=globalThis.FontInspector)!==null&&N!==void 0&&N.enabled),this._reader=null,this._textDivProperties=$||new WeakMap,this._canceled=!1,this._capability=(0,s.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,H)};const{pageWidth:Y,pageHeight:ue,pageX:se,pageY:ne}=A.rawDims;this._transform=[1,0,0,-1,-se,ne+ue],this._pageWidth=Y,this._pageHeight=ue,(0,_.setLayerDimensions)(o,A),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(j,N){for(const w of j){if(w.str===void 0){if(w.type==="beginMarkedContentProps"||w.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),w.id!==null&&this._container.setAttribute("id",`${w.id}`),o.append(this._container)}else w.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(w.str),M(this,w,N)}}_layoutText(j){const N=this._layoutTextParams.properties=this._textDivProperties.get(j);if(this._layoutTextParams.div=j,P(this._layoutTextParams),N.hasText&&this._container.append(j),N.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this._container.append(w)}}_render(){const j=(0,s.createPromiseCapability)();let N=Object.create(null);if(this._isReadableStream){const w=()=>{this._reader.read().then(o=>{let{value:A,done:U}=o;if(U){j.resolve();return}Object.assign(N,A.styles),this._processItems(A.items,N),w()},j.reject)};this._reader=this._textContentSource.getReader(),w()}else if(this._textContentSource){const{items:w,styles:o}=this._textContentSource;this._processItems(w,o),j.resolve()}else throw new Error('No "textContentSource" parameter specified.');j.promise.then(()=>{N=null,b(this)},this._capability.reject)}}c.TextLayerRenderTask=n;function h(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,_.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const j=new n(y);return j._render(),j}function x(y){let{container:j,viewport:N,textDivs:w,textDivProperties:o,isOffscreenCanvasSupported:A,mustRotate:U=!0,mustRescale:$=!0}=y;if(U&&(0,_.setLayerDimensions)(j,{rotation:N.rotation}),$){const V=u(0,A),H={prevFontSize:null,prevFontFamily:null,div:null,scale:N.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:V};for(const Y of w)H.properties=o.get(Y),H.div=Y,P(H)}}},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationEditorLayer=void 0;var s=t(1),_=t(138),O=t(160),F=t(161),S=t(139);function C(D,oe){b(D,oe),oe.add(D)}function u(D,oe,re){return oe=g(oe),oe in D?Object.defineProperty(D,oe,{value:re,enumerable:!0,configurable:!0,writable:!0}):D[oe]=re,D}function g(D){var oe=M(D,"string");return typeof oe=="symbol"?oe:String(oe)}function M(D,oe){if(typeof D!="object"||D===null)return D;var re=D[Symbol.toPrimitive];if(re!==void 0){var B=re.call(D,oe||"default");if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(oe==="string"?String:Number)(D)}function P(D,oe,re){b(D,oe),oe.set(D,re)}function b(D,oe){if(oe.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n(D,oe,re){if(!oe.has(D))throw new TypeError("attempted to get private field on non-instance");return re}function h(D,oe){var re=j(D,oe,"get");return x(D,re)}function x(D,oe){return oe.get?oe.get.call(D):oe.value}function y(D,oe,re){var B=j(D,oe,"set");return N(D,B,re),re}function j(D,oe,re){if(!oe.has(D))throw new TypeError("attempted to "+re+" private field on non-instance");return oe.get(D)}function N(D,oe,re){if(oe.set)oe.set.call(D,re);else{if(!oe.writable)throw new TypeError("attempted to set read only private field");oe.value=re}}var w=new WeakMap,o=new WeakMap,A=new WeakMap,U=new WeakMap,$=new WeakMap,V=new WeakMap,H=new WeakMap,Y=new WeakMap,ue=new WeakSet,se=new WeakSet,ne=new WeakSet,Q=new WeakSet;class ce{constructor(oe){C(this,Q),C(this,ne),C(this,se),C(this,ue),P(this,w,{writable:!0,value:void 0}),P(this,o,{writable:!0,value:!1}),P(this,A,{writable:!0,value:this.pointerup.bind(this)}),P(this,U,{writable:!0,value:this.pointerdown.bind(this)}),P(this,$,{writable:!0,value:new Map}),P(this,V,{writable:!0,value:!1}),P(this,H,{writable:!0,value:!1}),P(this,Y,{writable:!0,value:void 0}),ce._initialized||(ce._initialized=!0,O.FreeTextEditor.initialize(oe.l10n),F.InkEditor.initialize(oe.l10n)),oe.uiManager.registerEditorTypes([O.FreeTextEditor,F.InkEditor]),y(this,Y,oe.uiManager),this.pageIndex=oe.pageIndex,this.div=oe.div,y(this,w,oe.accessibilityManager),h(this,Y).addLayer(this)}get isEmpty(){return h(this,$).size===0}updateToolbar(oe){h(this,Y).updateToolbar(oe)}updateMode(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(this,Y).getMode();n(this,Q,ae).call(this),oe===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),h(this,Y).unselectAll(),oe!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",oe===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",oe===s.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(oe){if(!(!oe&&h(this,Y).getMode()!==s.AnnotationEditorType.INK)){if(!oe){for(const re of h(this,$).values())if(re.isEmpty()){re.setInBackground();return}}n(this,ne,ve).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(oe){h(this,Y).setEditingState(oe)}addCommands(oe){h(this,Y).addCommands(oe)}enable(){this.div.style.pointerEvents="auto";for(const oe of h(this,$).values())oe.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const oe of h(this,$).values())oe.disableEditing();n(this,Q,ae).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(oe){h(this,Y).getActive()!==oe&&h(this,Y).setActiveEditor(oe)}enableClick(){this.div.addEventListener("pointerdown",h(this,U)),this.div.addEventListener("pointerup",h(this,A))}disableClick(){this.div.removeEventListener("pointerdown",h(this,U)),this.div.removeEventListener("pointerup",h(this,A))}attach(oe){h(this,$).set(oe.id,oe)}detach(oe){var re;h(this,$).delete(oe.id),(re=h(this,w))===null||re===void 0||re.removePointerInTextLayer(oe.contentDiv)}remove(oe){h(this,Y).removeEditor(oe),this.detach(oe),oe.div.style.display="none",setTimeout(()=>{oe.div.style.display="",oe.div.remove(),oe.isAttachedToDOM=!1,document.activeElement===document.body&&h(this,Y).focusMainContainer()},0),h(this,H)||this.addInkEditorIfNeeded(!1)}add(oe){if(n(this,ue,le).call(this,oe),h(this,Y).addEditor(oe),this.attach(oe),!oe.isAttachedToDOM){const re=oe.render();this.div.append(re),oe.isAttachedToDOM=!0}this.moveEditorInDOM(oe),oe.onceAdded(),h(this,Y).addToAnnotationStorage(oe)}moveEditorInDOM(oe){var re;(re=h(this,w))===null||re===void 0||re.moveElementInDOM(this.div,oe.div,oe.contentDiv,!0)}addOrRebuild(oe){oe.needsToBeRebuilt()?oe.rebuild():this.add(oe)}addANewEditor(oe){const re=()=>{this.addOrRebuild(oe)},B=()=>{oe.remove()};this.addCommands({cmd:re,undo:B,mustExec:!0})}addUndoableEditor(oe){const re=()=>{this.addOrRebuild(oe)},B=()=>{oe.remove()};this.addCommands({cmd:re,undo:B,mustExec:!1})}getNextId(){return h(this,Y).getId()}deserialize(oe){switch(oe.annotationType){case s.AnnotationEditorType.FREETEXT:return O.FreeTextEditor.deserialize(oe,this,h(this,Y));case s.AnnotationEditorType.INK:return F.InkEditor.deserialize(oe,this,h(this,Y))}return null}setSelected(oe){h(this,Y).setSelected(oe)}toggleSelected(oe){h(this,Y).toggleSelected(oe)}isSelected(oe){return h(this,Y).isSelected(oe)}unselect(oe){h(this,Y).unselect(oe)}pointerup(oe){const{isMac:re}=s.FeatureTest.platform;if(!(oe.button!==0||oe.ctrlKey&&re)&&oe.target===this.div&&h(this,V)){if(y(this,V,!1),!h(this,o)){y(this,o,!0);return}n(this,ne,ve).call(this,oe)}}pointerdown(oe){const{isMac:re}=s.FeatureTest.platform;if(oe.button!==0||oe.ctrlKey&&re||oe.target!==this.div)return;y(this,V,!0);const B=h(this,Y).getActive();y(this,o,!B||B.isEmpty())}drop(oe){const re=oe.dataTransfer.getData("text/plain"),B=h(this,Y).getEditor(re);if(!B)return;oe.preventDefault(),oe.dataTransfer.dropEffect="move",n(this,ue,le).call(this,B);const L=this.div.getBoundingClientRect(),te=oe.clientX-L.x,de=oe.clientY-L.y;B.translate(te-B.startX,de-B.startY),this.moveEditorInDOM(B),B.div.focus()}dragover(oe){oe.preventDefault()}destroy(){var oe;((oe=h(this,Y).getActive())===null||oe===void 0?void 0:oe.parent)===this&&h(this,Y).setActiveEditor(null);for(const B of h(this,$).values()){var re;(re=h(this,w))===null||re===void 0||re.removePointerInTextLayer(B.contentDiv),B.setParent(null),B.isAttachedToDOM=!1,B.div.remove()}this.div=null,h(this,$).clear(),h(this,Y).removeLayer(this)}render(oe){let{viewport:re}=oe;this.viewport=re,(0,S.setLayerDimensions)(this.div,re),(0,_.bindEvents)(this,this.div,["dragover","drop"]);for(const B of h(this,Y).getEditors(this.pageIndex))this.add(B);this.updateMode()}update(oe){let{viewport:re}=oe;h(this,Y).commitOrRemove(),this.viewport=re,(0,S.setLayerDimensions)(this.div,{rotation:re.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:oe,pageHeight:re}=this.viewport.rawDims;return[oe,re]}}c.AnnotationEditorLayer=ce;function le(D){var oe;D.parent!==this&&(this.attach(D),(oe=D.parent)===null||oe===void 0||oe.detach(D),D.setParent(this),D.div&&D.isAttachedToDOM&&(D.div.remove(),this.div.append(D.div)))}function J(D){switch(h(this,Y).getMode()){case s.AnnotationEditorType.FREETEXT:return new O.FreeTextEditor(D);case s.AnnotationEditorType.INK:return new F.InkEditor(D)}return null}function ve(D){const oe=this.getNextId(),re=n(this,se,J).call(this,{parent:this,id:oe,x:D.offsetX,y:D.offsetY,uiManager:h(this,Y)});return re&&this.add(re),re}function ae(){y(this,H,!0);for(const D of h(this,$).values())D.isEmpty()&&D.remove();y(this,H,!1)}u(ce,"_initialized",!1)},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.FreeTextEditor=void 0;var s=t(1),_=t(138),O=t(137);function F(ae,D){M(ae,D),D.add(ae)}function S(ae,D,oe){return D=C(D),D in ae?Object.defineProperty(ae,D,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ae[D]=oe,ae}function C(ae){var D=u(ae,"string");return typeof D=="symbol"?D:String(D)}function u(ae,D){if(typeof ae!="object"||ae===null)return ae;var oe=ae[Symbol.toPrimitive];if(oe!==void 0){var re=oe.call(ae,D||"default");if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(ae)}function g(ae,D,oe){M(ae,D),D.set(ae,oe)}function M(ae,D){if(D.has(ae))throw new TypeError("Cannot initialize the same private elements twice on an object")}function P(ae,D){var oe=x(ae,D,"get");return b(ae,oe)}function b(ae,D){return D.get?D.get.call(ae):D.value}function n(ae,D,oe){if(!D.has(ae))throw new TypeError("attempted to get private field on non-instance");return oe}function h(ae,D,oe){var re=x(ae,D,"set");return y(ae,re,oe),oe}function x(ae,D,oe){if(!D.has(ae))throw new TypeError("attempted to "+oe+" private field on non-instance");return D.get(ae)}function y(ae,D,oe){if(D.set)D.set.call(ae,oe);else{if(!D.writable)throw new TypeError("attempted to set read only private field");D.value=oe}}var j=new WeakMap,N=new WeakMap,w=new WeakMap,o=new WeakMap,A=new WeakMap,U=new WeakMap,$=new WeakMap,V=new WeakMap,H=new WeakMap,Y=new WeakSet,ue=new WeakSet,se=new WeakSet,ne=new WeakSet;class Q extends O.AnnotationEditor{constructor(D){super({...D,name:"freeTextEditor"}),F(this,ne),F(this,se),F(this,ue),F(this,Y),g(this,j,{writable:!0,value:this.editorDivBlur.bind(this)}),g(this,N,{writable:!0,value:this.editorDivFocus.bind(this)}),g(this,w,{writable:!0,value:this.editorDivInput.bind(this)}),g(this,o,{writable:!0,value:this.editorDivKeydown.bind(this)}),g(this,A,{writable:!0,value:void 0}),g(this,U,{writable:!0,value:""}),g(this,$,{writable:!0,value:`${this.id}-editor`}),g(this,V,{writable:!0,value:!1}),g(this,H,{writable:!0,value:void 0}),h(this,A,D.color||Q._defaultColor||O.AnnotationEditor._defaultLineColor),h(this,H,D.fontSize||Q._defaultFontSize)}static initialize(D){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(re=>[re,D.get(re)]));const oe=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(oe.getPropertyValue("--freetext-padding"))}static updateDefaultParams(D,oe){switch(D){case s.AnnotationEditorParamsType.FREETEXT_SIZE:Q._defaultFontSize=oe;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:Q._defaultColor=oe;break}}updateParams(D,oe){switch(D){case s.AnnotationEditorParamsType.FREETEXT_SIZE:n(this,Y,ce).call(this,oe);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:n(this,ue,le).call(this,oe);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,Q._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,Q._defaultColor||O.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,P(this,H)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,P(this,A)]]}getInitialTranslation(){const D=this.parentScale;return[-Q._internalPadding*D,-(Q._internalPadding+P(this,H))*D]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",P(this,o)),this.editorDiv.addEventListener("focus",P(this,N)),this.editorDiv.addEventListener("blur",P(this,j)),this.editorDiv.addEventListener("input",P(this,w)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",P(this,$)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",P(this,o)),this.editorDiv.removeEventListener("focus",P(this,N)),this.editorDiv.removeEventListener("blur",P(this,j)),this.editorDiv.removeEventListener("input",P(this,w)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(D){super.focusin(D),D.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),P(this,V)||(h(this,V,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),h(this,U,n(this,se,J).call(this).trimEnd()),n(this,ne,ve).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(D){this.enableEditMode(),this.editorDiv.focus()}keydown(D){D.target===this.div&&D.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(D){Q._keyboardManager.exec(this,D)}editorDivFocus(D){this.isEditing=!0}editorDivBlur(D){this.isEditing=!1}editorDivInput(D){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let D,oe;this.width&&(D=this.x,oe=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",P(this,$)),this.enableEditing(),Q._l10nPromise.get("editor_free_text2_aria_label").then(B=>{var L;return(L=this.editorDiv)===null||L===void 0?void 0:L.setAttribute("aria-label",B)}),Q._l10nPromise.get("free_text2_default_content").then(B=>{var L;return(L=this.editorDiv)===null||L===void 0?void 0:L.setAttribute("default-content",B)}),this.editorDiv.contentEditable=!0;const{style:re}=this.editorDiv;if(re.fontSize=`calc(${P(this,H)}px * var(--scale-factor))`,re.color=P(this,A),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[B,L]=this.parentDimensions;this.setAt(D*B,oe*L,this.width*B,this.height*L);for(const te of P(this,U).split(`
`)){const de=document.createElement("div");de.append(te?document.createTextNode(te):document.createElement("br")),this.editorDiv.append(de)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(D,oe,re){const B=super.deserialize(D,oe,re);return h(B,H,D.fontSize),h(B,A,s.Util.makeHexColor(...D.color)),h(B,U,D.value),B}serialize(){if(this.isEmpty())return null;const D=Q._internalPadding*this.parentScale,oe=this.getRect(D,D),re=O.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:P(this,A));return{annotationType:s.AnnotationEditorType.FREETEXT,color:re,fontSize:P(this,H),value:P(this,U),pageIndex:this.pageIndex,rect:oe,rotation:this.rotation}}}c.FreeTextEditor=Q;function ce(ae){const D=re=>{this.editorDiv.style.fontSize=`calc(${re}px * var(--scale-factor))`,this.translate(0,-(re-P(this,H))*this.parentScale),h(this,H,re),n(this,ne,ve).call(this)},oe=P(this,H);this.addCommands({cmd:()=>{D(ae)},undo:()=>{D(oe)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function le(ae){const D=P(this,A);this.addCommands({cmd:()=>{h(this,A,this.editorDiv.style.color=ae)},undo:()=>{h(this,A,this.editorDiv.style.color=D)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function J(){const ae=this.editorDiv.getElementsByTagName("div");if(ae.length===0)return this.editorDiv.innerText;const D=[];for(const oe of ae)D.push(oe.innerText.replace(/\r\n?|\n/,""));return D.join(`
`)}function ve(){const[ae,D]=this.parentDimensions;let oe;if(this.isAttachedToDOM)oe=this.div.getBoundingClientRect();else{const{currentLayer:re,div:B}=this,L=B.style.display;B.style.display="hidden",re.div.append(this.div),oe=B.getBoundingClientRect(),B.remove(),B.style.display=L}this.width=oe.width/ae,this.height=oe.height/D}S(Q,"_freeTextDefaultContent",""),S(Q,"_l10nPromise",void 0),S(Q,"_internalPadding",0),S(Q,"_defaultColor",null),S(Q,"_defaultFontSize",10),S(Q,"_keyboardManager",new _.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Q.prototype.commitOrRemove]])),S(Q,"_type","freetext")},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.InkEditor=void 0,Object.defineProperty(c,"fitCurve",{enumerable:!0,get:function(){return O.fitCurve}});var s=t(1),_=t(137),O=t(162),F=t(138);function S(_e,he){P(_e,he),he.add(_e)}function C(_e,he,ke){return he=u(he),he in _e?Object.defineProperty(_e,he,{value:ke,enumerable:!0,configurable:!0,writable:!0}):_e[he]=ke,_e}function u(_e){var he=g(_e,"string");return typeof he=="symbol"?he:String(he)}function g(_e,he){if(typeof _e!="object"||_e===null)return _e;var ke=_e[Symbol.toPrimitive];if(ke!==void 0){var Ve=ke.call(_e,he||"default");if(typeof Ve!="object")return Ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return(he==="string"?String:Number)(_e)}function M(_e,he,ke){P(_e,he),he.set(_e,ke)}function P(_e,he){if(he.has(_e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(_e,he,ke){return n(_e,he),ke}function n(_e,he){if(_e!==he)throw new TypeError("Private static access of wrong provenance")}function h(_e,he,ke){var Ve=j(_e,he,"set");return x(_e,Ve,ke),ke}function x(_e,he,ke){if(he.set)he.set.call(_e,ke);else{if(!he.writable)throw new TypeError("attempted to set read only private field");he.value=ke}}function y(_e,he){var ke=j(_e,he,"get");return N(_e,ke)}function j(_e,he,ke){if(!he.has(_e))throw new TypeError("attempted to "+ke+" private field on non-instance");return he.get(_e)}function N(_e,he){return he.get?he.get.call(_e):he.value}function w(_e,he,ke){if(!he.has(_e))throw new TypeError("attempted to get private field on non-instance");return ke}const o=16,A=100;var U=new WeakMap,$=new WeakMap,V=new WeakMap,H=new WeakMap,Y=new WeakMap,ue=new WeakMap,se=new WeakMap,ne=new WeakMap,Q=new WeakMap,ce=new WeakMap,le=new WeakMap,J=new WeakMap,ve=new WeakMap,ae=new WeakMap,D=new WeakSet,oe=new WeakSet,re=new WeakSet,B=new WeakSet,L=new WeakSet,te=new WeakSet,de=new WeakSet,pe=new WeakSet,ie=new WeakSet,Ae=new WeakSet,Ce=new WeakSet,Te=new WeakSet,Me=new WeakSet,Ne=new WeakSet,xe=new WeakSet,q=new WeakSet,X=new WeakSet,G=new WeakSet,K=new WeakSet,me=new WeakSet,Se=new WeakSet,fe=new WeakSet;class ge extends _.AnnotationEditor{constructor(he){super({...he,name:"inkEditor"}),S(this,fe),S(this,Se),S(this,me),S(this,K),S(this,G),S(this,X),S(this,q),S(this,xe),S(this,Ne),S(this,Me),S(this,Te),S(this,Ce),S(this,Ae),S(this,ie),S(this,pe),S(this,de),S(this,te),S(this,L),S(this,B),S(this,re),S(this,oe),S(this,D),M(this,U,{writable:!0,value:0}),M(this,$,{writable:!0,value:0}),M(this,V,{writable:!0,value:0}),M(this,H,{writable:!0,value:this.canvasPointermove.bind(this)}),M(this,Y,{writable:!0,value:this.canvasPointerleave.bind(this)}),M(this,ue,{writable:!0,value:this.canvasPointerup.bind(this)}),M(this,se,{writable:!0,value:this.canvasPointerdown.bind(this)}),M(this,ne,{writable:!0,value:!1}),M(this,Q,{writable:!0,value:!1}),M(this,ce,{writable:!0,value:null}),M(this,le,{writable:!0,value:null}),M(this,J,{writable:!0,value:0}),M(this,ve,{writable:!0,value:0}),M(this,ae,{writable:!0,value:null}),this.color=he.color||null,this.thickness=he.thickness||null,this.opacity=he.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(he){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(ke=>[ke,he.get(ke)]))}static updateDefaultParams(he,ke){switch(he){case s.AnnotationEditorParamsType.INK_THICKNESS:ge._defaultThickness=ke;break;case s.AnnotationEditorParamsType.INK_COLOR:ge._defaultColor=ke;break;case s.AnnotationEditorParamsType.INK_OPACITY:ge._defaultOpacity=ke/100;break}}updateParams(he,ke){switch(he){case s.AnnotationEditorParamsType.INK_THICKNESS:w(this,D,Re).call(this,ke);break;case s.AnnotationEditorParamsType.INK_COLOR:w(this,oe,Ee).call(this,ke);break;case s.AnnotationEditorParamsType.INK_OPACITY:w(this,re,Ie).call(this,ke);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,ge._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,ge._defaultColor||_.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(ge._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ge._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||ge._defaultColor||_.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ge._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(w(this,Ce,ee).call(this),w(this,Te,Pe).call(this)),this.isAttachedToDOM||(this.parent.add(this),w(this,Me,qe).call(this)),w(this,Se,$e).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,y(this,le).disconnect(),h(this,le,null),super.remove())}setParent(he){!this.parent&&he?this._uiManager.removeShouldRescale(this):this.parent&&he===null&&this._uiManager.addShouldRescale(this),super.setParent(he)}onScaleChanging(){const[he,ke]=this.parentDimensions,Ve=this.width*he,ze=this.height*ke;this.setDimensions(Ve,ze)}enableEditMode(){y(this,ne)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",y(this,se)),this.canvas.addEventListener("pointerup",y(this,ue)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",y(this,se)),this.canvas.removeEventListener("pointerup",y(this,ue)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){y(this,ne)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),h(this,ne,!0),this.div.classList.add("disabled"),w(this,Se,$e).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(he){super.focusin(he),this.enableEditMode()}canvasPointerdown(he){he.button!==0||!this.isInEditMode()||y(this,ne)||(this.setInForeground(),he.type!=="mouse"&&this.div.focus(),he.stopPropagation(),this.canvas.addEventListener("pointerleave",y(this,Y)),this.canvas.addEventListener("pointermove",y(this,H)),w(this,te,Ge).call(this,he.offsetX,he.offsetY))}canvasPointermove(he){he.stopPropagation(),w(this,de,at).call(this,he.offsetX,he.offsetY)}canvasPointerup(he){he.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(he.stopPropagation(),w(this,Ae,z).call(this,he),this.setInBackground())}canvasPointerleave(he){w(this,Ae,z).call(this,he),this.setInBackground()}render(){if(this.div)return this.div;let he,ke;this.width&&(he=this.x,ke=this.y),super.render(),ge._l10nPromise.get("editor_ink2_aria_label").then(st=>{var ct;return(ct=this.div)===null||ct===void 0?void 0:ct.setAttribute("aria-label",st)});const[Ve,ze,Ke,et]=w(this,B,je).call(this);if(this.setAt(Ve,ze,0,0),this.setDims(Ke,et),w(this,Ce,ee).call(this),this.width){const[st,ct]=this.parentDimensions;this.setAt(he*st,ke*ct,this.width*st,this.height*ct),h(this,Q,!0),w(this,Me,qe).call(this),this.setDims(this.width*st,this.height*ct),w(this,ie,be).call(this),w(this,fe,lt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return w(this,Te,Pe).call(this),this.div}setDimensions(he,ke){const Ve=Math.round(he),ze=Math.round(ke);if(y(this,J)===Ve&&y(this,ve)===ze)return;h(this,J,Ve),h(this,ve,ze),this.canvas.style.visibility="hidden",y(this,U)&&Math.abs(y(this,U)-he/ke)>.01&&(ke=Math.ceil(he/y(this,U)),this.setDims(he,ke));const[Ke,et]=this.parentDimensions;this.width=he/Ke,this.height=ke/et,y(this,ne)&&w(this,Ne,Qe).call(this,he,ke),w(this,Me,qe).call(this),w(this,ie,be).call(this),this.canvas.style.visibility="visible"}static deserialize(he,ke,Ve){const ze=super.deserialize(he,ke,Ve);ze.thickness=he.thickness,ze.color=s.Util.makeHexColor(...he.color),ze.opacity=he.opacity;const[Ke,et]=ze.pageDimensions,st=ze.width*Ke,ct=ze.height*et,it=ze.parentScale,dt=he.thickness/2;h(ze,U,st/ct),h(ze,ne,!0),h(ze,J,Math.round(st)),h(ze,ve,Math.round(ct));for(const{bezier:mt}of he.paths){const Pt=[];ze.paths.push(Pt);let xt=it*(mt[0]-dt),wt=it*(ct-mt[1]-dt);for(let yt=2,Lt=mt.length;yt<Lt;yt+=6){const Ft=it*(mt[yt]-dt),Dt=it*(ct-mt[yt+1]-dt),Nt=it*(mt[yt+2]-dt),vt=it*(ct-mt[yt+3]-dt),Ut=it*(mt[yt+4]-dt),Ht=it*(ct-mt[yt+5]-dt);Pt.push([[xt,wt],[Ft,Dt],[Nt,vt],[Ut,Ht]]),xt=Ut,wt=Ht}const Rt=b(this,ge,Le).call(this,Pt);ze.bezierPath2D.push(Rt)}const pt=w(ze,K,We).call(ze);return h(ze,V,Math.max(o,pt[2]-pt[0])),h(ze,$,Math.max(o,pt[3]-pt[1])),w(ze,Ne,Qe).call(ze,st,ct),ze}serialize(){if(this.isEmpty())return null;const he=this.getRect(0,0),ke=this.rotation%180===0?he[3]-he[1]:he[2]-he[0],Ve=_.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:Ve,thickness:this.thickness,opacity:this.opacity,paths:w(this,q,Xe).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ke),pageIndex:this.pageIndex,rect:he,rotation:this.rotation}}}c.InkEditor=ge;function Re(_e){const he=this.thickness;this.addCommands({cmd:()=>{this.thickness=_e,w(this,Se,$e).call(this)},undo:()=>{this.thickness=he,w(this,Se,$e).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Ee(_e){const he=this.color;this.addCommands({cmd:()=>{this.color=_e,w(this,ie,be).call(this)},undo:()=>{this.color=he,w(this,ie,be).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Ie(_e){_e/=100;const he=this.opacity;this.addCommands({cmd:()=>{this.opacity=_e,w(this,ie,be).call(this)},undo:()=>{this.opacity=he,w(this,ie,be).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function je(){const{parentRotation:_e,parentDimensions:[he,ke]}=this;switch(_e){case 90:return[0,ke,ke,he];case 180:return[he,ke,he,ke];case 270:return[he,0,ke,he];default:return[0,0,he,ke]}}function Be(){const{ctx:_e,color:he,opacity:ke,thickness:Ve,parentScale:ze,scaleFactor:Ke}=this;_e.lineWidth=Ve*ze/Ke,_e.lineCap="round",_e.lineJoin="round",_e.miterLimit=10,_e.strokeStyle=`${he}${(0,F.opacityToHex)(ke)}`}function Ge(_e,he){this.isEditing=!0,y(this,Q)||(h(this,Q,!0),w(this,Me,qe).call(this),this.thickness||(this.thickness=ge._defaultThickness),this.color||(this.color=ge._defaultColor||_.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ge._defaultOpacity)),this.currentPath.push([_e,he]),h(this,ce,null),w(this,L,Be).call(this),this.ctx.beginPath(),this.ctx.moveTo(_e,he),h(this,ae,()=>{y(this,ae)&&(y(this,ce)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):w(this,ie,be).call(this),this.ctx.lineTo(...y(this,ce)),h(this,ce,null),this.ctx.stroke()),window.requestAnimationFrame(y(this,ae)))}),window.requestAnimationFrame(y(this,ae))}function at(_e,he){const[ke,Ve]=this.currentPath.at(-1);_e===ke&&he===Ve||(this.currentPath.push([_e,he]),h(this,ce,[_e,he]))}function tt(_e,he){this.ctx.closePath(),h(this,ae,null),_e=Math.min(Math.max(_e,0),this.canvas.width),he=Math.min(Math.max(he,0),this.canvas.height);const[ke,Ve]=this.currentPath.at(-1);(_e!==ke||he!==Ve)&&this.currentPath.push([_e,he]);let ze;if(this.currentPath.length!==1)ze=(0,O.fitCurve)(this.currentPath,30,null);else{const ct=[_e,he];ze=[[ct,ct.slice(),ct.slice(),ct]]}const Ke=b(ge,ge,Le).call(ge,ze);this.currentPath.length=0;const et=()=>{this.paths.push(ze),this.bezierPath2D.push(Ke),this.rebuild()},st=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(w(this,Ce,ee).call(this),w(this,Te,Pe).call(this)),w(this,Se,$e).call(this))};this.addCommands({cmd:et,undo:st,mustExec:!0})}function be(){if(this.isEmpty()){w(this,xe,Ze).call(this);return}w(this,L,Be).call(this);const{canvas:_e,ctx:he}=this;he.setTransform(1,0,0,1,0,0),he.clearRect(0,0,_e.width,_e.height),w(this,xe,Ze).call(this);for(const ke of this.bezierPath2D)he.stroke(ke)}function z(_e){w(this,pe,tt).call(this,_e.offsetX,_e.offsetY),this.canvas.removeEventListener("pointerleave",y(this,Y)),this.canvas.removeEventListener("pointermove",y(this,H)),this.addToAnnotationStorage()}function ee(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ge._l10nPromise.get("editor_ink_canvas_aria_label").then(_e=>{var he;return(he=this.canvas)===null||he===void 0?void 0:he.setAttribute("aria-label",_e)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function Pe(){let _e=null;h(this,le,new ResizeObserver(he=>{const ke=he[0].contentRect;ke.width&&ke.height&&(_e!==null&&clearTimeout(_e),_e=setTimeout(()=>{this.fixDims(),_e=null},A),this.setDimensions(ke.width,ke.height))})),y(this,le).observe(this.div)}function qe(){if(!y(this,Q))return;const[_e,he]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*_e),this.canvas.height=Math.ceil(this.height*he),w(this,xe,Ze).call(this)}function Qe(_e,he){const ke=w(this,me,Je).call(this),Ve=(_e-ke)/y(this,V),ze=(he-ke)/y(this,$);this.scaleFactor=Math.min(Ve,ze)}function Ze(){const _e=w(this,me,Je).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+_e,this.translationY*this.scaleFactor+_e)}function Le(_e){const he=new Path2D;for(let ke=0,Ve=_e.length;ke<Ve;ke++){const[ze,Ke,et,st]=_e[ke];ke===0&&he.moveTo(...ze),he.bezierCurveTo(Ke[0],Ke[1],et[0],et[1],st[0],st[1])}return he}function Xe(_e,he,ke,Ve){const ze=[],Ke=this.thickness/2;let et,st;for(const ct of this.paths){et=[],st=[];for(let it=0,dt=ct.length;it<dt;it++){const[pt,mt,Pt,xt]=ct[it],wt=_e*(pt[0]+he)+Ke,Rt=Ve-_e*(pt[1]+ke)-Ke,yt=_e*(mt[0]+he)+Ke,Lt=Ve-_e*(mt[1]+ke)-Ke,Ft=_e*(Pt[0]+he)+Ke,Dt=Ve-_e*(Pt[1]+ke)-Ke,Nt=_e*(xt[0]+he)+Ke,vt=Ve-_e*(xt[1]+ke)-Ke;it===0&&(et.push(wt,Rt),st.push(wt,Rt)),et.push(yt,Lt,Ft,Dt,Nt,vt),w(this,X,Oe).call(this,wt,Rt,yt,Lt,Ft,Dt,Nt,vt,4,st)}ze.push({bezier:et,points:st})}return ze}function Oe(_e,he,ke,Ve,ze,Ke,et,st,ct,it){if(w(this,G,ye).call(this,_e,he,ke,Ve,ze,Ke,et,st)){it.push(et,st);return}for(let dt=1;dt<ct-1;dt++){const pt=dt/ct,mt=1-pt;let Pt=pt*_e+mt*ke,xt=pt*he+mt*Ve,wt=pt*ke+mt*ze,Rt=pt*Ve+mt*Ke;const yt=pt*ze+mt*et,Lt=pt*Ke+mt*st;Pt=pt*Pt+mt*wt,xt=pt*xt+mt*Rt,wt=pt*wt+mt*yt,Rt=pt*Rt+mt*Lt,Pt=pt*Pt+mt*wt,xt=pt*xt+mt*Rt,it.push(Pt,xt)}it.push(et,st)}function ye(_e,he,ke,Ve,ze,Ke,et,st){const ct=(3*ke-2*_e-et)**2,it=(3*Ve-2*he-st)**2,dt=(3*ze-_e-2*et)**2,pt=(3*Ke-he-2*st)**2;return Math.max(ct,dt)+Math.max(it,pt)<=10}function We(){let _e=1/0,he=-1/0,ke=1/0,Ve=-1/0;for(const ze of this.paths)for(const[Ke,et,st,ct]of ze){const it=s.Util.bezierBoundingBox(...Ke,...et,...st,...ct);_e=Math.min(_e,it[0]),ke=Math.min(ke,it[1]),he=Math.max(he,it[2]),Ve=Math.max(Ve,it[3])}return[_e,ke,he,Ve]}function Je(){return y(this,ne)?Math.ceil(this.thickness*this.parentScale):0}function $e(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!y(this,ne)){w(this,ie,be).call(this);return}const he=w(this,K,We).call(this),ke=w(this,me,Je).call(this);h(this,V,Math.max(o,he[2]-he[0])),h(this,$,Math.max(o,he[3]-he[1]));const Ve=Math.ceil(ke+y(this,V)*this.scaleFactor),ze=Math.ceil(ke+y(this,$)*this.scaleFactor),[Ke,et]=this.parentDimensions;this.width=Ve/Ke,this.height=ze/et,h(this,U,Ve/ze),w(this,fe,lt).call(this);const st=this.translationX,ct=this.translationY;this.translationX=-he[0],this.translationY=-he[1],w(this,Me,qe).call(this),w(this,ie,be).call(this),h(this,J,Ve),h(this,ve,ze),this.setDims(Ve,ze);const it=_e?ke/this.scaleFactor/2:0;this.translate(st-this.translationX-it,ct-this.translationY-it)}function lt(){const{style:_e}=this.div;y(this,U)>=1?(_e.minHeight=`${o}px`,_e.minWidth=`${Math.round(y(this,U)*o)}px`):(_e.minWidth=`${o}px`,_e.minHeight=`${Math.round(o/y(this,U))}px`)}C(ge,"_defaultColor",null),C(ge,"_defaultOpacity",1),C(ge,"_defaultThickness",1),C(ge,"_l10nPromise",void 0),C(ge,"_type","ink")},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.fitCurve=void 0;const s=t(163);c.fitCurve=s},T=>{function c(n,h,x){if(!Array.isArray(n))throw new TypeError("First argument should be an array");if(n.forEach(w=>{if(!Array.isArray(w)||w.some(o=>typeof o!="number")||w.length!==n[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),n=n.filter((w,o)=>o===0||!w.every((A,U)=>A===n[o-1][U])),n.length<2)return[];const y=n.length,j=M(n[1],n[0]),N=M(n[y-2],n[y-1]);return t(n,j,N,h,x)}function t(n,h,x,y,j){var N,w,o,A,U,$,V,H,Y,ue,se,ne,Q;if(n.length===2)return ne=P.vectorLen(P.subtract(n[0],n[1]))/3,N=[n[0],P.addArrays(n[0],P.mulItems(h,ne)),P.addArrays(n[1],P.mulItems(x,ne)),n[1]],[N];if(w=S(n),[N,A,$]=s(n,w,w,h,x,j),A===0||A<y)return[N];if(A<y*y)for(o=w,U=A,V=$,Q=0;Q<20;Q++){if(o=O(N,n,o),[N,A,$]=s(n,w,o,h,x,j),A<y)return[N];if($===V){let ce=A/U;if(ce>.9999&&ce<1.0001)break}U=A,V=$}return se=[],H=P.subtract(n[$-1],n[$+1]),H.every(ce=>ce===0)&&(H=P.subtract(n[$-1],n[$]),[H[0],H[1]]=[-H[1],H[0]]),Y=P.normalize(H),ue=P.mulItems(Y,-1),se=se.concat(t(n.slice(0,$+1),h,Y,y,j)),se=se.concat(t(n.slice($),ue,x,y,j)),se}function s(n,h,x,y,j,N){var w,o,A;return w=_(n,x,y,j),[o,A]=C(n,w,h),N&&N({bez:w,points:n,params:h,maxErr:o,maxPoint:A}),[w,o,A]}function _(n,h,x,y){var j,N,w,o,A,U,$,V,H,Y,ue,se,ne,Q,ce,le,J,ve=n[0],ae=n[n.length-1];for(j=[ve,null,null,ae],N=P.zeros_Xx2x2(h.length),ne=0,Q=h.length;ne<Q;ne++)le=h[ne],J=1-le,w=N[ne],w[0]=P.mulItems(x,3*le*(J*J)),w[1]=P.mulItems(y,3*J*(le*le));for(o=[[0,0],[0,0]],A=[0,0],ne=0,Q=n.length;ne<Q;ne++)le=h[ne],w=N[ne],o[0][0]+=P.dot(w[0],w[0]),o[0][1]+=P.dot(w[0],w[1]),o[1][0]+=P.dot(w[0],w[1]),o[1][1]+=P.dot(w[1],w[1]),ce=P.subtract(n[ne],b.q([ve,ve,ae,ae],le)),A[0]+=P.dot(w[0],ce),A[1]+=P.dot(w[1],ce);return U=o[0][0]*o[1][1]-o[1][0]*o[0][1],$=o[0][0]*A[1]-o[1][0]*A[0],V=A[0]*o[1][1]-A[1]*o[0][1],H=U===0?0:V/U,Y=U===0?0:$/U,se=P.vectorLen(P.subtract(ve,ae)),ue=1e-6*se,H<ue||Y<ue?(j[1]=P.addArrays(ve,P.mulItems(x,se/3)),j[2]=P.addArrays(ae,P.mulItems(y,se/3))):(j[1]=P.addArrays(ve,P.mulItems(x,H)),j[2]=P.addArrays(ae,P.mulItems(y,Y))),j}function O(n,h,x){return x.map((y,j)=>F(n,h[j],y))}function F(n,h,x){var y=P.subtract(b.q(n,x),h),j=b.qprime(n,x),N=P.mulMatrix(y,j),w=P.sum(P.squareItems(j))+2*P.mulMatrix(y,b.qprimeprime(n,x));return w===0?x:x-N/w}function S(n){var h=[],x,y,j;return n.forEach((N,w)=>{x=w?y+P.vectorLen(P.subtract(N,j)):0,h.push(x),y=x,j=N}),h=h.map(N=>N/y),h}function C(n,h,x){var y,j,N,w,o,A,U,$;j=0,N=Math.floor(n.length/2);const V=u(h,10);for(o=0,A=n.length;o<A;o++)U=n[o],$=g(h,x[o],V,10),w=P.subtract(b.q(h,$),U),y=w[0]*w[0]+w[1]*w[1],y>j&&(j=y,N=o);return[j,N]}var u=function(n,h){for(var x,y=[0],j=n[0],N=0,w=1;w<=h;w++)x=b.q(n,w/h),N+=P.vectorLen(P.subtract(x,j)),y.push(N),j=x;return y=y.map(o=>o/N),y};function g(n,h,x,y){if(h<0)return 0;if(h>1)return 1;for(var j,N,w,o,A,U=1;U<=y;U++)if(h<=x[U]){o=(U-1)/y,w=U/y,N=x[U-1],j=x[U],A=(h-N)/(j-N)*(w-o)+o;break}return A}function M(n,h){return P.normalize(P.subtract(n,h))}class P{static zeros_Xx2x2(h){for(var x=[];h--;)x.push([0,0]);return x}static mulItems(h,x){return h.map(y=>y*x)}static mulMatrix(h,x){return h.reduce((y,j,N)=>y+j*x[N],0)}static subtract(h,x){return h.map((y,j)=>y-x[j])}static addArrays(h,x){return h.map((y,j)=>y+x[j])}static addItems(h,x){return h.map(y=>y+x)}static sum(h){return h.reduce((x,y)=>x+y)}static dot(h,x){return P.mulMatrix(h,x)}static vectorLen(h){return Math.hypot(...h)}static divItems(h,x){return h.map(y=>y/x)}static squareItems(h){return h.map(x=>x*x)}static normalize(h){return this.divItems(h,this.vectorLen(h))}}class b{static q(h,x){var y=1-x,j=P.mulItems(h[0],y*y*y),N=P.mulItems(h[1],3*y*y*x),w=P.mulItems(h[2],3*y*x*x),o=P.mulItems(h[3],x*x*x);return P.addArrays(P.addArrays(j,N),P.addArrays(w,o))}static qprime(h,x){var y=1-x,j=P.mulItems(P.subtract(h[1],h[0]),3*y*y),N=P.mulItems(P.subtract(h[2],h[1]),6*y*x),w=P.mulItems(P.subtract(h[3],h[2]),3*x*x);return P.addArrays(P.addArrays(j,N),w)}static qprimeprime(h,x){return P.addArrays(P.mulItems(P.addArrays(P.subtract(h[2],P.mulItems(h[1],2)),h[0]),6*(1-x)),P.mulItems(P.addArrays(P.subtract(h[3],P.mulItems(h[2],2)),h[1]),6*x))}}T.exports=c,T.exports.fitCubic=t,T.exports.createTangent=M},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.AnnotationLayer=void 0;var s=t(1),_=t(139),O=t(136),F=t(165),S=t(166);function C(xe,q,X){return u(xe,q),X}function u(xe,q){if(xe!==q)throw new TypeError("Private static access of wrong provenance")}function g(xe,q){M(xe,q),q.add(xe)}function M(xe,q){if(q.has(xe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function P(xe,q,X){if(!q.has(xe))throw new TypeError("attempted to get private field on non-instance");return X}const b=1e3,n=9,h=new WeakSet;function x(xe){return{width:xe[2]-xe[0],height:xe[3]-xe[1]}}class y{static create(q){switch(q.data.annotationType){case s.AnnotationType.LINK:return new o(q);case s.AnnotationType.TEXT:return new $(q);case s.AnnotationType.WIDGET:switch(q.data.fieldType){case"Tx":return new H(q);case"Btn":return q.data.radioButton?new ue(q):q.data.checkBox?new Y(q):new se(q);case"Ch":return new ne(q)}return new V(q);case s.AnnotationType.POPUP:return new ce(q);case s.AnnotationType.FREETEXT:return new J(q);case s.AnnotationType.LINE:return new ve(q);case s.AnnotationType.SQUARE:return new ae(q);case s.AnnotationType.CIRCLE:return new D(q);case s.AnnotationType.POLYLINE:return new oe(q);case s.AnnotationType.CARET:return new B(q);case s.AnnotationType.INK:return new L(q);case s.AnnotationType.POLYGON:return new re(q);case s.AnnotationType.HIGHLIGHT:return new te(q);case s.AnnotationType.UNDERLINE:return new de(q);case s.AnnotationType.SQUIGGLY:return new pe(q);case s.AnnotationType.STRIKEOUT:return new ie(q);case s.AnnotationType.STAMP:return new Ae(q);case s.AnnotationType.FILEATTACHMENT:return new Ce(q);default:return new j(q)}}}class j{constructor(q){let{isRenderable:X=!1,ignoreBorder:G=!1,createQuadrilaterals:K=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=X,this.data=q.data,this.layer=q.layer,this.page=q.page,this.viewport=q.viewport,this.linkService=q.linkService,this.downloadManager=q.downloadManager,this.imageResourcesPath=q.imageResourcesPath,this.renderForms=q.renderForms,this.svgFactory=q.svgFactory,this.annotationStorage=q.annotationStorage,this.enableScripting=q.enableScripting,this.hasJSActions=q.hasJSActions,this._fieldObjects=q.fieldObjects,X&&(this.container=this._createContainer(G)),K&&(this.quadrilaterals=this._createQuadrilaterals(G))}_createContainer(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{data:X,page:G,viewport:K}=this,me=document.createElement("section");me.setAttribute("data-annotation-id",X.id);const{pageWidth:Se,pageHeight:fe,pageX:ge,pageY:Re}=K.rawDims,{width:Ee,height:Ie}=x(X.rect),je=s.Util.normalizeRect([X.rect[0],G.view[3]-X.rect[1]+G.view[1],X.rect[2],G.view[3]-X.rect[3]+G.view[1]]);if(!q&&X.borderStyle.width>0){me.style.borderWidth=`${X.borderStyle.width}px`;const Ge=X.borderStyle.horizontalCornerRadius,at=X.borderStyle.verticalCornerRadius;if(Ge>0||at>0){const be=`calc(${Ge}px * var(--scale-factor)) / calc(${at}px * var(--scale-factor))`;me.style.borderRadius=be}else if(this instanceof ue){const be=`calc(${Ee}px * var(--scale-factor)) / calc(${Ie}px * var(--scale-factor))`;me.style.borderRadius=be}switch(X.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:me.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:me.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:me.style.borderBottomStyle="solid";break}const tt=X.borderColor||null;tt?me.style.borderColor=s.Util.makeHexColor(tt[0]|0,tt[1]|0,tt[2]|0):me.style.borderWidth=0}me.style.left=`${100*(je[0]-ge)/Se}%`,me.style.top=`${100*(je[1]-Re)/fe}%`;const{rotation:Be}=X;return X.hasOwnCanvas||Be===0?(me.style.width=`${100*Ee/Se}%`,me.style.height=`${100*Ie/fe}%`):this.setRotation(Be,me),me}setRotation(q){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const{pageWidth:G,pageHeight:K}=this.viewport.rawDims,{width:me,height:Se}=x(this.data.rect);let fe,ge;q%180===0?(fe=100*me/G,ge=100*Se/K):(fe=100*Se/G,ge=100*me/K),X.style.width=`${fe}%`,X.style.height=`${ge}%`,X.setAttribute("data-main-rotation",(360-q)%360)}get _commonActions(){const q=(X,G,K)=>{const me=K.detail[X];K.target.style[G]=F.ColorConverters[`${me[0]}_HTML`](me.slice(1))};return(0,s.shadow)(this,"_commonActions",{display:X=>{const G=X.detail.display%2===1;this.container.style.visibility=G?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:G,print:X.detail.display===0||X.detail.display===3})},print:X=>{this.annotationStorage.setValue(this.data.id,{print:X.detail.print})},hidden:X=>{this.container.style.visibility=X.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:X.detail.hidden})},focus:X=>{setTimeout(()=>X.target.focus({preventScroll:!1}),0)},userName:X=>{X.target.title=X.detail.userName},readonly:X=>{X.detail.readonly?X.target.setAttribute("readonly",""):X.target.removeAttribute("readonly")},required:X=>{this._setRequired(X.target,X.detail.required)},bgColor:X=>{q("bgColor","backgroundColor",X)},fillColor:X=>{q("fillColor","backgroundColor",X)},fgColor:X=>{q("fgColor","color",X)},textColor:X=>{q("textColor","color",X)},borderColor:X=>{q("borderColor","borderColor",X)},strokeColor:X=>{q("strokeColor","borderColor",X)},rotation:X=>{const G=X.detail.rotation;this.setRotation(G),this.annotationStorage.setValue(this.data.id,{rotation:G})}})}_dispatchEventFromSandbox(q,X){const G=this._commonActions;for(const K of Object.keys(X.detail)){const me=q[K]||G[K];me==null||me(X)}}_setDefaultPropertiesFromJS(q){if(!this.enableScripting)return;const X=this.annotationStorage.getRawValue(this.data.id);if(!X)return;const G=this._commonActions;for(const[K,me]of Object.entries(X)){const Se=G[K];if(Se){const fe={detail:{[K]:me},target:q};Se(fe),delete X[K]}}}_createQuadrilaterals(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;const X=[],G=this.data.rect;for(const K of this.data.quadPoints)this.data.rect=[K[2].x,K[2].y,K[1].x,K[1].y],X.push(this._createContainer(q));return this.data.rect=G,X}_createPopup(q,X){let G=this.container;this.quadrilaterals&&(q=q||this.quadrilaterals,G=this.quadrilaterals[0]),q||(q=document.createElement("div"),q.className="popupTriggerArea",G.append(q));const K=new le({container:G,trigger:q,color:X.color,titleObj:X.titleObj,modificationDate:X.modificationDate,contentsObj:X.contentsObj,richText:X.richText,hideWrapper:!0}).render();K.style.left="100%",G.append(K)}_renderQuadrilaterals(q){for(const X of this.quadrilaterals)X.className=q;return this.quadrilaterals}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(q){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const G=[];if(this._fieldObjects){const K=this._fieldObjects[q];if(K)for(const{page:me,id:Se,exportValues:fe}of K){if(me===-1||Se===X)continue;const ge=typeof fe=="string"?fe:null,Re=document.querySelector(`[data-element-id="${Se}"]`);if(Re&&!h.has(Re)){(0,s.warn)(`_getElementsByName - element not allowed: ${Se}`);continue}G.push({id:Se,exportValue:ge,domElement:Re})}return G}for(const K of document.getElementsByName(q)){const{exportValue:me}=K,Se=K.getAttribute("data-element-id");Se!==X&&h.has(K)&&G.push({id:Se,exportValue:me,domElement:K})}return G}}var N=new WeakSet,w=new WeakSet;class o extends j{constructor(q){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(q,{isRenderable:!0,ignoreBorder:!!(X!=null&&X.ignoreBorder),createQuadrilaterals:!0}),g(this,w),g(this,N),this.isTooltipOnly=q.data.isTooltipOnly}render(){const{data:q,linkService:X}=this,G=document.createElement("a");G.setAttribute("data-element-id",q.id);let K=!1;return q.url?(X.addLinkAttributes(G,q.url,q.newWindow),K=!0):q.action?(this._bindNamedAction(G,q.action),K=!0):q.attachment?(this._bindAttachment(G,q.attachment),K=!0):q.setOCGState?(P(this,w,U).call(this,G,q.setOCGState),K=!0):q.dest?(this._bindLink(G,q.dest),K=!0):(q.actions&&(q.actions.Action||q.actions["Mouse Up"]||q.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(G,q),K=!0),q.resetForm?(this._bindResetFormAction(G,q.resetForm),K=!0):this.isTooltipOnly&&!K&&(this._bindLink(G,""),K=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((me,Se)=>{const fe=Se===0?G:G.cloneNode();return me.append(fe),me}):(this.container.className="linkAnnotation",K&&this.container.append(G),this.container)}_bindLink(q,X){q.href=this.linkService.getDestinationHash(X),q.onclick=()=>(X&&this.linkService.goToDestination(X),!1),(X||X==="")&&P(this,N,A).call(this)}_bindNamedAction(q,X){q.href=this.linkService.getAnchorUrl(""),q.onclick=()=>(this.linkService.executeNamedAction(X),!1),P(this,N,A).call(this)}_bindAttachment(q,X){q.href=this.linkService.getAnchorUrl(""),q.onclick=()=>{var G;return(G=this.downloadManager)===null||G===void 0||G.openOrDownloadData(this.container,X.content,X.filename),!1},P(this,N,A).call(this)}_bindJSAction(q,X){q.href=this.linkService.getAnchorUrl("");const G=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(X.actions)){const me=G.get(K);me&&(q[me]=()=>{var Se;return(Se=this.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X.id,name:K}}),!1})}q.onclick||(q.onclick=()=>!1),P(this,N,A).call(this)}_bindResetFormAction(q,X){const G=q.onclick;if(G||(q.href=this.linkService.getAnchorUrl("")),P(this,N,A).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),G||(q.onclick=()=>!1);return}q.onclick=()=>{G==null||G();const{fields:K,refs:me,include:Se}=X,fe=[];if(K.length!==0||me.length!==0){const Ie=new Set(me);for(const je of K){const Be=this._fieldObjects[je]||[];for(const{id:Ge}of Be)Ie.add(Ge)}for(const je of Object.values(this._fieldObjects))for(const Be of je)Ie.has(Be.id)===Se&&fe.push(Be)}else for(const Ie of Object.values(this._fieldObjects))fe.push(...Ie);const ge=this.annotationStorage,Re=[];for(const Ie of fe){const{id:je}=Ie;switch(Re.push(je),Ie.type){case"text":{const Ge=Ie.defaultValue||"";ge.setValue(je,{value:Ge});break}case"checkbox":case"radiobutton":{const Ge=Ie.defaultValue===Ie.exportValues;ge.setValue(je,{value:Ge});break}case"combobox":case"listbox":{const Ge=Ie.defaultValue||"";ge.setValue(je,{value:Ge});break}default:continue}const Be=document.querySelector(`[data-element-id="${je}"]`);if(Be){if(!h.has(Be)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${je}`);continue}}else continue;Be.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var Ee;(Ee=this.linkService.eventBus)===null||Ee===void 0||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Re,name:"ResetForm"}})}return!1}}}function A(){this.container.setAttribute("data-internal-link","")}function U(xe,q){xe.href=this.linkService.getAnchorUrl(""),xe.onclick=()=>(this.linkService.executeSetOCGState(q),!1),P(this,N,A).call(this)}class $ extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me})}render(){this.container.className="textAnnotation";const q=document.createElement("img");return q.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",q.alt="[{{type}} Annotation]",q.dataset.l10nId="text_annotation_type",q.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(q,this.data),this.container.append(q),this.container}}class V extends j{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(q){const{isWin:X,isMac:G}=s.FeatureTest.platform;return X&&q.ctrlKey||G&&q.metaKey}_setEventListener(q,X,G,K){X.includes("mouse")?q.addEventListener(X,me=>{var Se;(Se=this.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:G,value:K(me),shift:me.shiftKey,modifier:this._getKeyModifier(me)}})}):q.addEventListener(X,me=>{var Se;(Se=this.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:G,value:K(me)}})})}_setEventListeners(q,X,G){for(const[me,Se]of X){var K;(Se==="Action"||(K=this.data.actions)!==null&&K!==void 0&&K[Se])&&this._setEventListener(q,me,Se,G)}}_setBackgroundColor(q){const X=this.data.backgroundColor||null;q.style.backgroundColor=X===null?"transparent":s.Util.makeHexColor(X[0],X[1],X[2])}_setTextStyle(q){const X=["left","center","right"],{fontColor:G}=this.data.defaultAppearanceData,K=this.data.defaultAppearanceData.fontSize||n,me=q.style;let Se;const fe=2,ge=Re=>Math.round(10*Re)/10;if(this.data.multiLine){const Re=Math.abs(this.data.rect[3]-this.data.rect[1]-fe),Ee=Math.round(Re/(s.LINE_FACTOR*K))||1,Ie=Re/Ee;Se=Math.min(K,ge(Ie/s.LINE_FACTOR))}else{const Re=Math.abs(this.data.rect[3]-this.data.rect[1]-fe);Se=Math.min(K,ge(Re/s.LINE_FACTOR))}me.fontSize=`calc(${Se}px * var(--scale-factor))`,me.color=s.Util.makeHexColor(G[0],G[1],G[2]),this.data.textAlignment!==null&&(me.textAlign=X[this.data.textAlignment])}_setRequired(q,X){X?q.setAttribute("required",!0):q.removeAttribute("required"),q.setAttribute("aria-required",X)}}class H extends V{constructor(q){const X=q.renderForms||!q.data.hasAppearance&&!!q.data.fieldValue;super(q,{isRenderable:X})}setPropertyOnSiblings(q,X,G,K){const me=this.annotationStorage;for(const Se of this._getElementsByName(q.name,q.id))Se.domElement&&(Se.domElement[X]=G),me.setValue(Se.id,{[K]:G})}render(){const q=this.annotationStorage,X=this.data.id;this.container.className="textWidgetAnnotation";let G=null;if(this.renderForms){const me=q.getValue(X,{value:this.data.fieldValue});let Se=me.formattedValue||me.value||"";const fe=q.getValue(X,{charLimit:this.data.maxLen}).charLimit;fe&&Se.length>fe&&(Se=Se.slice(0,fe));const ge={userValue:Se,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(G=document.createElement("textarea"),G.textContent=Se,this.data.doNotScroll&&(G.style.overflowY="hidden")):(G=document.createElement("input"),G.type="text",G.setAttribute("value",Se),this.data.doNotScroll&&(G.style.overflowX="hidden")),h.add(G),G.setAttribute("data-element-id",X),G.disabled=this.data.readOnly,G.name=this.data.fieldName,G.tabIndex=b,this._setRequired(G,this.data.required),fe&&(G.maxLength=fe),G.addEventListener("input",Ee=>{q.setValue(X,{value:Ee.target.value}),this.setPropertyOnSiblings(G,"value",Ee.target.value,"value")}),G.addEventListener("resetform",Ee=>{const Ie=this.data.defaultFieldValue??"";G.value=ge.userValue=Ie,ge.formattedValue=null});let Re=Ee=>{const{formattedValue:Ie}=ge;Ie!=null&&(Ee.target.value=Ie),Ee.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var K;G.addEventListener("focus",Ie=>{const{target:je}=Ie;ge.userValue&&(je.value=ge.userValue),ge.lastCommittedValue=je.value,ge.commitKey=1}),G.addEventListener("updatefromsandbox",Ie=>{const je={value(Be){ge.userValue=Be.detail.value??"",q.setValue(X,{value:ge.userValue.toString()}),Be.target.value=ge.userValue},formattedValue(Be){const{formattedValue:Ge}=Be.detail;ge.formattedValue=Ge,Ge!=null&&Be.target!==document.activeElement&&(Be.target.value=Ge),q.setValue(X,{formattedValue:Ge})},selRange(Be){Be.target.setSelectionRange(...Be.detail.selRange)},charLimit:Be=>{var Ge;const{charLimit:at}=Be.detail,{target:tt}=Be;if(at===0){tt.removeAttribute("maxLength");return}tt.setAttribute("maxLength",at);let be=ge.userValue;!be||be.length<=at||(be=be.slice(0,at),tt.value=ge.userValue=be,q.setValue(X,{value:be}),(Ge=this.linkService.eventBus)===null||Ge===void 0||Ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:be,willCommit:!0,commitKey:1,selStart:tt.selectionStart,selEnd:tt.selectionEnd}}))}};this._dispatchEventFromSandbox(je,Ie)}),G.addEventListener("keydown",Ie=>{var je;ge.commitKey=1;let Be=-1;if(Ie.key==="Escape"?Be=0:Ie.key==="Enter"&&!this.data.multiLine?Be=2:Ie.key==="Tab"&&(ge.commitKey=3),Be===-1)return;const{value:Ge}=Ie.target;ge.lastCommittedValue!==Ge&&(ge.lastCommittedValue=Ge,ge.userValue=Ge,(je=this.linkService.eventBus)===null||je===void 0||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:Ge,willCommit:!0,commitKey:Be,selStart:Ie.target.selectionStart,selEnd:Ie.target.selectionEnd}}))});const Ee=Re;Re=null,G.addEventListener("blur",Ie=>{if(!Ie.relatedTarget)return;const{value:je}=Ie.target;if(ge.userValue=je,ge.lastCommittedValue!==je){var Be;(Be=this.linkService.eventBus)===null||Be===void 0||Be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:je,willCommit:!0,commitKey:ge.commitKey,selStart:Ie.target.selectionStart,selEnd:Ie.target.selectionEnd}})}Ee(Ie)}),(K=this.data.actions)!==null&&K!==void 0&&K.Keystroke&&G.addEventListener("beforeinput",Ie=>{var je;ge.lastCommittedValue=null;const{data:Be,target:Ge}=Ie,{value:at,selectionStart:tt,selectionEnd:be}=Ge;let z=tt,ee=be;switch(Ie.inputType){case"deleteWordBackward":{const Pe=at.substring(0,tt).match(/\w*[^\w]*$/);Pe&&(z-=Pe[0].length);break}case"deleteWordForward":{const Pe=at.substring(tt).match(/^[^\w]*\w*/);Pe&&(ee+=Pe[0].length);break}case"deleteContentBackward":tt===be&&(z-=1);break;case"deleteContentForward":tt===be&&(ee+=1);break}Ie.preventDefault(),(je=this.linkService.eventBus)===null||je===void 0||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:at,change:Be||"",willCommit:!1,selStart:z,selEnd:ee}})}),this._setEventListeners(G,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ie=>Ie.target.value)}if(Re&&G.addEventListener("blur",Re),this.data.comb){const Ee=(this.data.rect[2]-this.data.rect[0])/fe;G.classList.add("comb"),G.style.letterSpacing=`calc(${Ee}px * var(--scale-factor) - 1ch)`}}else G=document.createElement("div"),G.textContent=this.data.fieldValue,G.style.verticalAlign="middle",G.style.display="table-cell";return this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class Y extends V{constructor(q){super(q,{isRenderable:q.renderForms})}render(){const q=this.annotationStorage,X=this.data,G=X.id;let K=q.getValue(G,{value:X.exportValue===X.fieldValue}).value;typeof K=="string"&&(K=K!=="Off",q.setValue(G,{value:K})),this.container.className="buttonWidgetAnnotation checkBox";const me=document.createElement("input");return h.add(me),me.setAttribute("data-element-id",G),me.disabled=X.readOnly,this._setRequired(me,this.data.required),me.type="checkbox",me.name=X.fieldName,K&&me.setAttribute("checked",!0),me.setAttribute("exportValue",X.exportValue),me.tabIndex=b,me.addEventListener("change",Se=>{const{name:fe,checked:ge}=Se.target;for(const Re of this._getElementsByName(fe,G)){const Ee=ge&&Re.exportValue===X.exportValue;Re.domElement&&(Re.domElement.checked=Ee),q.setValue(Re.id,{value:Ee})}q.setValue(G,{value:ge})}),me.addEventListener("resetform",Se=>{const fe=X.defaultFieldValue||"Off";Se.target.checked=fe===X.exportValue}),this.enableScripting&&this.hasJSActions&&(me.addEventListener("updatefromsandbox",Se=>{const fe={value(ge){ge.target.checked=ge.detail.value!=="Off",q.setValue(G,{value:ge.target.checked})}};this._dispatchEventFromSandbox(fe,Se)}),this._setEventListeners(me,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Se=>Se.target.checked)),this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class ue extends V{constructor(q){super(q,{isRenderable:q.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const q=this.annotationStorage,X=this.data,G=X.id;let K=q.getValue(G,{value:X.fieldValue===X.buttonValue}).value;typeof K=="string"&&(K=K!==X.buttonValue,q.setValue(G,{value:K}));const me=document.createElement("input");if(h.add(me),me.setAttribute("data-element-id",G),me.disabled=X.readOnly,this._setRequired(me,this.data.required),me.type="radio",me.name=X.fieldName,K&&me.setAttribute("checked",!0),me.tabIndex=b,me.addEventListener("change",Se=>{const{name:fe,checked:ge}=Se.target;for(const Re of this._getElementsByName(fe,G))q.setValue(Re.id,{value:!1});q.setValue(G,{value:ge})}),me.addEventListener("resetform",Se=>{const fe=X.defaultFieldValue;Se.target.checked=fe!=null&&fe===X.buttonValue}),this.enableScripting&&this.hasJSActions){const Se=X.buttonValue;me.addEventListener("updatefromsandbox",fe=>{const ge={value:Re=>{const Ee=Se===Re.detail.value;for(const Ie of this._getElementsByName(Re.target.name)){const je=Ee&&Ie.id===G;Ie.domElement&&(Ie.domElement.checked=je),q.setValue(Ie.id,{value:je})}}};this._dispatchEventFromSandbox(ge,fe)}),this._setEventListeners(me,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],fe=>fe.target.checked)}return this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class se extends o{constructor(q){super(q,{ignoreBorder:q.data.hasAppearance})}render(){const q=super.render();q.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(q.title=this.data.alternativeText);const X=q.lastChild;return this.enableScripting&&this.hasJSActions&&X&&(this._setDefaultPropertiesFromJS(X),X.addEventListener("updatefromsandbox",G=>{this._dispatchEventFromSandbox({},G)})),q}}class ne extends V{constructor(q){super(q,{isRenderable:q.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const q=this.annotationStorage,X=this.data.id,G=q.getValue(X,{value:this.data.fieldValue}),K=document.createElement("select");h.add(K),K.setAttribute("data-element-id",X),K.disabled=this.data.readOnly,this._setRequired(K,this.data.required),K.name=this.data.fieldName,K.tabIndex=b;let me=this.data.combo&&this.data.options.length>0;this.data.combo||(K.size=this.data.options.length,this.data.multiSelect&&(K.multiple=!0)),K.addEventListener("resetform",Ee=>{const Ie=this.data.defaultFieldValue;for(const je of K.options)je.selected=je.value===Ie});for(const Ee of this.data.options){const Ie=document.createElement("option");Ie.textContent=Ee.displayValue,Ie.value=Ee.exportValue,G.value.includes(Ee.exportValue)&&(Ie.setAttribute("selected",!0),me=!1),K.append(Ie)}let Se=null;if(me){const Ee=document.createElement("option");Ee.value=" ",Ee.setAttribute("hidden",!0),Ee.setAttribute("selected",!0),K.prepend(Ee),Se=()=>{Ee.remove(),K.removeEventListener("input",Se),Se=null},K.addEventListener("input",Se)}const fe=Ee=>{const Ie=Ee?"value":"textContent",{options:je,multiple:Be}=K;return Be?Array.prototype.filter.call(je,Ge=>Ge.selected).map(Ge=>Ge[Ie]):je.selectedIndex===-1?null:je[je.selectedIndex][Ie]};let ge=fe(!1);const Re=Ee=>{const Ie=Ee.target.options;return Array.prototype.map.call(Ie,je=>({displayValue:je.textContent,exportValue:je.value}))};return this.enableScripting&&this.hasJSActions?(K.addEventListener("updatefromsandbox",Ee=>{const Ie={value(je){var Be;(Be=Se)===null||Be===void 0||Be();const Ge=je.detail.value,at=new Set(Array.isArray(Ge)?Ge:[Ge]);for(const tt of K.options)tt.selected=at.has(tt.value);q.setValue(X,{value:fe(!0)}),ge=fe(!1)},multipleSelection(je){K.multiple=!0},remove(je){const Be=K.options,Ge=je.detail.remove;Be[Ge].selected=!1,K.remove(Ge),Be.length>0&&Array.prototype.findIndex.call(Be,at=>at.selected)===-1&&(Be[0].selected=!0),q.setValue(X,{value:fe(!0),items:Re(je)}),ge=fe(!1)},clear(je){for(;K.length!==0;)K.remove(0);q.setValue(X,{value:null,items:[]}),ge=fe(!1)},insert(je){const{index:Be,displayValue:Ge,exportValue:at}=je.detail.insert,tt=K.children[Be],be=document.createElement("option");be.textContent=Ge,be.value=at,tt?tt.before(be):K.append(be),q.setValue(X,{value:fe(!0),items:Re(je)}),ge=fe(!1)},items(je){const{items:Be}=je.detail;for(;K.length!==0;)K.remove(0);for(const Ge of Be){const{displayValue:at,exportValue:tt}=Ge,be=document.createElement("option");be.textContent=at,be.value=tt,K.append(be)}K.options.length>0&&(K.options[0].selected=!0),q.setValue(X,{value:fe(!0),items:Re(je)}),ge=fe(!1)},indices(je){const Be=new Set(je.detail.indices);for(const Ge of je.target.options)Ge.selected=Be.has(Ge.index);q.setValue(X,{value:fe(!0)}),ge=fe(!1)},editable(je){je.target.disabled=!je.detail.editable}};this._dispatchEventFromSandbox(Ie,Ee)}),K.addEventListener("input",Ee=>{var Ie;const je=fe(!0);q.setValue(X,{value:je}),Ee.preventDefault(),(Ie=this.linkService.eventBus)===null||Ie===void 0||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:X,name:"Keystroke",value:ge,changeEx:je,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(K,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ee=>Ee.target.value)):K.addEventListener("input",function(Ee){q.setValue(X,{value:fe(!0)})}),this.data.combo&&this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}const Q=class extends j{constructor(xe){var q,X,G;const{data:K}=xe,me=!Q.IGNORE_TYPES.has(K.parentType)&&!!((q=K.titleObj)!==null&&q!==void 0&&q.str||(X=K.contentsObj)!==null&&X!==void 0&&X.str||(G=K.richText)!==null&&G!==void 0&&G.str);super(xe,{isRenderable:me})}render(){this.container.className="popupAnnotation";const xe=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(xe.length===0)return this.container;const q=new le({container:this.container,trigger:Array.from(xe),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),X=this.page,G=s.Util.normalizeRect([this.data.parentRect[0],X.view[3]-this.data.parentRect[1]+X.view[1],this.data.parentRect[2],X.view[3]-this.data.parentRect[3]+X.view[1]]),K=G[0]+this.data.parentRect[2]-this.data.parentRect[0],me=G[1],{pageWidth:Se,pageHeight:fe,pageX:ge,pageY:Re}=this.viewport.rawDims;return this.container.style.left=`${100*(K-ge)/Se}%`,this.container.style.top=`${100*(me-Re)/fe}%`,this.container.append(q.render()),this.container}};let ce=Q;Et(ce,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class le{constructor(q){this.container=q.container,this.trigger=q.trigger,this.color=q.color,this.titleObj=q.titleObj,this.modificationDate=q.modificationDate,this.contentsObj=q.contentsObj,this.richText=q.richText,this.hideWrapper=q.hideWrapper||!1,this.pinned=!1}render(){var q,X;const G=document.createElement("div");G.className="popupWrapper",this.hideElement=this.hideWrapper?G:this.container,this.hideElement.hidden=!0;const K=document.createElement("div");K.className="popup";const me=this.color;if(me){const ge=.7*(255-me[0])+me[0],Re=.7*(255-me[1])+me[1],Ee=.7*(255-me[2])+me[2];K.style.backgroundColor=s.Util.makeHexColor(ge|0,Re|0,Ee|0)}const Se=document.createElement("h1");Se.dir=this.titleObj.dir,Se.textContent=this.titleObj.str,K.append(Se);const fe=_.PDFDateString.toDateObject(this.modificationDate);if(fe){const ge=document.createElement("span");ge.className="popupDate",ge.textContent="{{date}}, {{time}}",ge.dataset.l10nId="annotation_date_string",ge.dataset.l10nArgs=JSON.stringify({date:fe.toLocaleDateString(),time:fe.toLocaleTimeString()}),K.append(ge)}if((q=this.richText)!==null&&q!==void 0&&q.str&&(!((X=this.contentsObj)!==null&&X!==void 0&&X.str)||this.contentsObj.str===this.richText.str))S.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:K}),K.lastChild.className="richText popupContent";else{const ge=this._formatContents(this.contentsObj);K.append(ge)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ge of this.trigger)ge.addEventListener("click",this._toggle.bind(this)),ge.addEventListener("mouseover",this._show.bind(this,!1)),ge.addEventListener("mouseout",this._hide.bind(this,!1));return K.addEventListener("click",this._hide.bind(this,!0)),G.append(K),G}_formatContents(q){let{str:X,dir:G}=q;const K=document.createElement("p");K.className="popupContent",K.dir=G;const me=X.split(/(?:\r\n?|\n)/);for(let Se=0,fe=me.length;Se<fe;++Se){const ge=me[Se];K.append(document.createTextNode(ge)),Se<fe-1&&K.append(document.createElement("br"))}return K}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class J extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0}),this.textContent=q.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const q=document.createElement("div");q.className="annotationTextContent",q.setAttribute("role","comment");for(const X of this.textContent){const G=document.createElement("span");G.textContent=X,q.append(G)}this.container.append(q)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ve extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const q=this.data,{width:X,height:G}=x(q.rect),K=this.svgFactory.create(X,G,!0),me=this.svgFactory.createElement("svg:line");return me.setAttribute("x1",q.rect[2]-q.lineCoordinates[0]),me.setAttribute("y1",q.rect[3]-q.lineCoordinates[1]),me.setAttribute("x2",q.rect[2]-q.lineCoordinates[2]),me.setAttribute("y2",q.rect[3]-q.lineCoordinates[3]),me.setAttribute("stroke-width",q.borderStyle.width||1),me.setAttribute("stroke","transparent"),me.setAttribute("fill","transparent"),K.append(me),this.container.append(K),this._createPopup(me,q),this.container}}class ae extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const q=this.data,{width:X,height:G}=x(q.rect),K=this.svgFactory.create(X,G,!0),me=q.borderStyle.width,Se=this.svgFactory.createElement("svg:rect");return Se.setAttribute("x",me/2),Se.setAttribute("y",me/2),Se.setAttribute("width",X-me),Se.setAttribute("height",G-me),Se.setAttribute("stroke-width",me||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),K.append(Se),this.container.append(K),this._createPopup(Se,q),this.container}}class D extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const q=this.data,{width:X,height:G}=x(q.rect),K=this.svgFactory.create(X,G,!0),me=q.borderStyle.width,Se=this.svgFactory.createElement("svg:ellipse");return Se.setAttribute("cx",X/2),Se.setAttribute("cy",G/2),Se.setAttribute("rx",X/2-me/2),Se.setAttribute("ry",G/2-me/2),Se.setAttribute("stroke-width",me||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),K.append(Se),this.container.append(K),this._createPopup(Se,q),this.container}}class oe extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const q=this.data,{width:X,height:G}=x(q.rect),K=this.svgFactory.create(X,G,!0);let me=[];for(const fe of q.vertices){const ge=fe.x-q.rect[0],Re=q.rect[3]-fe.y;me.push(ge+","+Re)}me=me.join(" ");const Se=this.svgFactory.createElement(this.svgElementName);return Se.setAttribute("points",me),Se.setAttribute("stroke-width",q.borderStyle.width||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),K.append(Se),this.container.append(K),this._createPopup(Se,q),this.container}}class re extends oe{constructor(q){super(q),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class B extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class L extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const q=this.data,{width:X,height:G}=x(q.rect),K=this.svgFactory.create(X,G,!0);for(const me of q.inkLists){let Se=[];for(const ge of me){const Re=ge.x-q.rect[0],Ee=q.rect[3]-ge.y;Se.push(`${Re},${Ee}`)}Se=Se.join(" ");const fe=this.svgFactory.createElement(this.svgElementName);fe.setAttribute("points",Se),fe.setAttribute("stroke-width",q.borderStyle.width||1),fe.setAttribute("stroke","transparent"),fe.setAttribute("fill","transparent"),this._createPopup(fe,q),K.append(fe)}return this.container.append(K),this.container}}class te extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class de extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class pe extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ie extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Ae extends j{constructor(q){var X,G,K;const me=!!(q.data.hasPopup||(X=q.data.titleObj)!==null&&X!==void 0&&X.str||(G=q.data.contentsObj)!==null&&G!==void 0&&G.str||(K=q.data.richText)!==null&&K!==void 0&&K.str);super(q,{isRenderable:me,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ce extends j{constructor(q){var X;super(q,{isRenderable:!0});const{filename:G,content:K}=this.data.file;this.filename=(0,_.getFilenameFromUrl)(G,!0),this.content=K,(X=this.linkService.eventBus)===null||X===void 0||X.dispatch("fileattachmentannotation",{source:this,filename:G,content:K})}render(){var q,X;this.container.className="fileAttachmentAnnotation";let G;return this.data.hasAppearance?G=document.createElement("div"):(G=document.createElement("img"),G.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),G.className="popupTriggerArea",G.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((q=this.data.titleObj)!==null&&q!==void 0&&q.str||(X=this.data.contentsObj)!==null&&X!==void 0&&X.str||this.data.richText)&&this._createPopup(G,this.data),this.container.append(G),this.container}_download(){var q;(q=this.downloadManager)===null||q===void 0||q.openOrDownloadData(this.container,this.content,this.filename)}}class Te{static render(q){const{annotations:X,div:G,viewport:K,accessibilityManager:me}=q;(0,_.setLayerDimensions)(G,K);const Se={data:null,layer:G,page:q.page,viewport:K,linkService:q.linkService,downloadManager:q.downloadManager,imageResourcesPath:q.imageResourcesPath||"",renderForms:q.renderForms!==!1,svgFactory:new _.DOMSVGFactory,annotationStorage:q.annotationStorage||new O.AnnotationStorage,enableScripting:q.enableScripting===!0,hasJSActions:q.hasJSActions,fieldObjects:q.fieldObjects};let fe=0;for(const ge of X){if(ge.annotationType!==s.AnnotationType.POPUP){const{width:Ie,height:je}=x(ge.rect);if(Ie<=0||je<=0)continue}Se.data=ge;const Re=y.create(Se);if(!Re.isRenderable)continue;const Ee=Re.render();if(ge.hidden&&(Ee.style.visibility="hidden"),Array.isArray(Ee))for(const Ie of Ee)Ie.style.zIndex=fe++,C(Te,Te,Me).call(Te,Ie,ge.id,G,me);else Ee.style.zIndex=fe++,Re instanceof ce?G.prepend(Ee):C(Te,Te,Me).call(Te,Ee,ge.id,G,me)}C(this,Te,Ne).call(this,G,q.annotationCanvasMap)}static update(q){const{annotationCanvasMap:X,div:G,viewport:K}=q;(0,_.setLayerDimensions)(G,{rotation:K.rotation}),C(this,Te,Ne).call(this,G,X),G.hidden=!1}}c.AnnotationLayer=Te;function Me(xe,q,X,G){const K=xe.firstChild||xe;K.id=`${_.AnnotationPrefix}${q}`,X.append(xe),G==null||G.moveElementInDOM(X,xe,K,!1)}function Ne(xe,q){if(q){for(const[X,G]of q){const K=xe.querySelector(`[data-annotation-id="${X}"]`);if(!K)continue;const{firstChild:me}=K;me?me.nodeName==="CANVAS"?me.replaceWith(G):me.before(G):K.append(G)}q.clear()}}},(T,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ColorConverters=void 0;function t(_){return Math.floor(Math.max(0,Math.min(1,_))*255).toString(16).padStart(2,"0")}class s{static CMYK_G(O){let[F,S,C,u]=O;return["G",1-Math.min(1,.3*F+.59*C+.11*S+u)]}static G_CMYK(O){let[F]=O;return["CMYK",0,0,0,1-F]}static G_RGB(O){let[F]=O;return["RGB",F,F,F]}static G_HTML(O){let[F]=O;const S=t(F);return`#${S}${S}${S}`}static RGB_G(O){let[F,S,C]=O;return["G",.3*F+.59*S+.11*C]}static RGB_HTML(O){let[F,S,C]=O;const u=t(F),g=t(S),M=t(C);return`#${u}${g}${M}`}static T_HTML(){return"#00000000"}static CMYK_RGB(O){let[F,S,C,u]=O;return["RGB",1-Math.min(1,F+u),1-Math.min(1,C+u),1-Math.min(1,S+u)]}static CMYK_HTML(O){const F=this.CMYK_RGB(O).slice(1);return this.RGB_HTML(F)}static RGB_CMYK(O){let[F,S,C]=O;const u=1-F,g=1-S,M=1-C,P=Math.min(u,g,M);return["CMYK",u,g,M,P]}}c.ColorConverters=s},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.XfaLayer=void 0;var s=t(151);class _{static setupStorage(F,S,C,u,g){const M=u.getValue(S,{value:null});switch(C.name){case"textarea":if(M.value!==null&&(F.textContent=M.value),g==="print")break;F.addEventListener("input",P=>{u.setValue(S,{value:P.target.value})});break;case"input":if(C.attributes.type==="radio"||C.attributes.type==="checkbox"){if(M.value===C.attributes.xfaOn?F.setAttribute("checked",!0):M.value===C.attributes.xfaOff&&F.removeAttribute("checked"),g==="print")break;F.addEventListener("change",P=>{u.setValue(S,{value:P.target.checked?P.target.getAttribute("xfaOn"):P.target.getAttribute("xfaOff")})})}else{if(M.value!==null&&F.setAttribute("value",M.value),g==="print")break;F.addEventListener("input",P=>{u.setValue(S,{value:P.target.value})})}break;case"select":if(M.value!==null)for(const P of C.children)P.attributes.value===M.value&&(P.attributes.selected=!0);F.addEventListener("input",P=>{const b=P.target.options,n=b.selectedIndex===-1?"":b[b.selectedIndex].value;u.setValue(S,{value:n})});break}}static setAttributes(F){let{html:S,element:C,storage:u=null,intent:g,linkService:M}=F;const{attributes:P}=C,b=S instanceof HTMLAnchorElement;P.type==="radio"&&(P.name=`${P.name}-${g}`);for(const[n,h]of Object.entries(P))if(h!=null)switch(n){case"class":h.length&&S.setAttribute(n,h.join(" "));break;case"dataId":break;case"id":S.setAttribute("data-element-id",h);break;case"style":Object.assign(S.style,h);break;case"textContent":S.textContent=h;break;default:(!b||n!=="href"&&n!=="newWindow")&&S.setAttribute(n,h)}b&&M.addLinkAttributes(S,P.href,P.newWindow),u&&P.dataId&&this.setupStorage(S,P.dataId,C,u)}static render(F){const S=F.annotationStorage,C=F.linkService,u=F.xfaHtml,g=F.intent||"display",M=document.createElement(u.name);u.attributes&&this.setAttributes({html:M,element:u,intent:g,linkService:C});const P=[[u,-1,M]],b=F.div;if(b.append(M),F.viewport){const x=`matrix(${F.viewport.transform.join(",")})`;b.style.transform=x}g!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const n=[];for(;P.length>0;){var h;const[x,y,j]=P.at(-1);if(y+1===x.children.length){P.pop();continue}const N=x.children[++P.at(-1)[1]];if(N===null)continue;const{name:w}=N;if(w==="#text"){const A=document.createTextNode(N.value);n.push(A),j.append(A);continue}let o;if(N!=null&&(h=N.attributes)!==null&&h!==void 0&&h.xmlns?o=document.createElementNS(N.attributes.xmlns,w):o=document.createElement(w),j.append(o),N.attributes&&this.setAttributes({html:o,element:N,storage:S,intent:g,linkService:C}),N.children&&N.children.length>0)P.push([N,-1,o]);else if(N.value){const A=document.createTextNode(N.value);s.XfaText.shouldBuildText(w)&&n.push(A),o.append(A)}}for(const x of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:n}}static update(F){const S=`matrix(${F.viewport.transform.join(",")})`;F.div.style.transform=S,F.div.hidden=!1}}c.XfaLayer=_},(T,c,t)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SVGGraphics=void 0;var s=t(139),_=t(1),O=t(3);let F=class{constructor(){(0,_.unreachable)("Not implemented: SVGGraphics")}};c.SVGGraphics=F;{let S=function(o){let A=[];const U=[];for(const $ of o){if($.fn==="save"){A.push({fnId:92,fn:"group",items:[]}),U.push(A),A=A.at(-1).items;continue}$.fn==="restore"?A=U.pop():A.push($)}return A},C=function(o){if(Number.isInteger(o))return o.toString();const A=o.toFixed(10);let U=A.length-1;if(A[U]!=="0")return A;do U--;while(A[U]==="0");return A.substring(0,A[U]==="."?U:U+1)},u=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${C(o[0])} ${C(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){const A=Math.acos(o[0])*180/Math.PI;return`rotate(${C(A)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${C(o[4])} ${C(o[5])})`;return`matrix(${C(o[0])} ${C(o[1])} ${C(o[2])} ${C(o[3])} ${C(o[4])} ${C(o[5])})`};const g={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",b=["butt","round","square"],n=["miter","round","bevel"],h=function(o){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!U)return URL.createObjectURL(new Blob([o],{type:A}));const $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let V=`data:${A};base64,`;for(let H=0,Y=o.length;H<Y;H+=3){const ue=o[H]&255,se=o[H+1]&255,ne=o[H+2]&255,Q=ue>>2,ce=(ue&3)<<4|se>>4,le=H+1<Y?(se&15)<<2|ne>>6:64,J=H+2<Y?ne&63:64;V+=$[Q]+$[ce]+$[le]+$[J]}return V},x=function(){const o=new Uint8Array([137,80,78,71,13,10,26,10]),A=12,U=new Int32Array(256);for(let ne=0;ne<256;ne++){let Q=ne;for(let ce=0;ce<8;ce++)Q&1?Q=3988292384^Q>>1&2147483647:Q=Q>>1&2147483647;U[ne]=Q}function $(ne,Q,ce){let le=-1;for(let J=Q;J<ce;J++){const ve=(le^ne[J])&255,ae=U[ve];le=le>>>8^ae}return le^-1}function V(ne,Q,ce,le){let J=le;const ve=Q.length;ce[J]=ve>>24&255,ce[J+1]=ve>>16&255,ce[J+2]=ve>>8&255,ce[J+3]=ve&255,J+=4,ce[J]=ne.charCodeAt(0)&255,ce[J+1]=ne.charCodeAt(1)&255,ce[J+2]=ne.charCodeAt(2)&255,ce[J+3]=ne.charCodeAt(3)&255,J+=4,ce.set(Q,J),J+=Q.length;const ae=$(ce,le+4,J);ce[J]=ae>>24&255,ce[J+1]=ae>>16&255,ce[J+2]=ae>>8&255,ce[J+3]=ae&255}function H(ne,Q,ce){let le=1,J=0;for(let ve=Q;ve<ce;++ve)le=(le+(ne[ve]&255))%65521,J=(J+le)%65521;return J<<16|le}function Y(ne){if(!O.isNodeJS)return ue(ne);try{let Q;parseInt(process.versions.node)>=8?Q=ne:Q=Buffer.from(ne);const ce=require$$7.deflateSync(Q,{level:9});return ce instanceof Uint8Array?ce:new Uint8Array(ce)}catch(Q){(0,_.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return ue(ne)}function ue(ne){let Q=ne.length;const ce=65535,le=Math.ceil(Q/ce),J=new Uint8Array(2+Q+le*5+4);let ve=0;J[ve++]=120,J[ve++]=156;let ae=0;for(;Q>ce;)J[ve++]=0,J[ve++]=255,J[ve++]=255,J[ve++]=0,J[ve++]=0,J.set(ne.subarray(ae,ae+ce),ve),ve+=ce,ae+=ce,Q-=ce;J[ve++]=1,J[ve++]=Q&255,J[ve++]=Q>>8&255,J[ve++]=~Q&65535&255,J[ve++]=(~Q&65535)>>8&255,J.set(ne.subarray(ae),ve),ve+=ne.length-ae;const D=H(ne,0,ne.length);return J[ve++]=D>>24&255,J[ve++]=D>>16&255,J[ve++]=D>>8&255,J[ve++]=D&255,J}function se(ne,Q,ce,le){const J=ne.width,ve=ne.height;let ae,D,oe;const re=ne.data;switch(Q){case _.ImageKind.GRAYSCALE_1BPP:D=0,ae=1,oe=J+7>>3;break;case _.ImageKind.RGB_24BPP:D=2,ae=8,oe=J*3;break;case _.ImageKind.RGBA_32BPP:D=6,ae=8,oe=J*4;break;default:throw new Error("invalid format")}const B=new Uint8Array((1+oe)*ve);let L=0,te=0;for(let Te=0;Te<ve;++Te)B[L++]=0,B.set(re.subarray(te,te+oe),L),te+=oe,L+=oe;if(Q===_.ImageKind.GRAYSCALE_1BPP&&le){L=0;for(let Te=0;Te<ve;Te++){L++;for(let Me=0;Me<oe;Me++)B[L++]^=255}}const de=new Uint8Array([J>>24&255,J>>16&255,J>>8&255,J&255,ve>>24&255,ve>>16&255,ve>>8&255,ve&255,ae,D,0,0,0]),pe=Y(B),ie=o.length+A*3+de.length+pe.length,Ae=new Uint8Array(ie);let Ce=0;return Ae.set(o,Ce),Ce+=o.length,V("IHDR",de,Ae,Ce),Ce+=A+de.length,V("IDATA",pe,Ae,Ce),Ce+=A+pe.length,V("IEND",new Uint8Array(0),Ae,Ce),h(Ae,"image/png",ce)}return function(ne,Q,ce){const le=ne.kind===void 0?_.ImageKind.GRAYSCALE_1BPP:ne.kind;return se(ne,le,Q,ce)}}();class y{constructor(){this.fontSizeScale=1,this.fontWeight=g.fontWeight,this.fontSize=0,this.textMatrix=_.IDENTITY_MATRIX,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=g.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(A,U){this.x=A,this.y=U}}let j=0,N=0,w=0;c.SVGGraphics=F=class{constructor(o,A){let U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new y,this.transformMatrix=_.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!U,this._operatorIdMapping=[];for(const $ in _.OPS)this._operatorIdMapping[_.OPS[$]]=$}getObject(o){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):A}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const A=o.fnArray,U=o.argsArray;for(let $=0,V=A.length;$<V;$++)if(A[$]===_.OPS.dependency)for(const H of U[$]){const Y=H.startsWith("g_")?this.commonObjs:this.objs,ue=new Promise(se=>{Y.get(H,se)});this.current.dependencies.push(ue)}return Promise.all(this.current.dependencies)}transform(o,A,U,$,V,H){const Y=[o,A,U,$,V,H];this.transformMatrix=_.Util.transform(this.transformMatrix,Y),this.tgrp=null}getSVG(o,A){this.viewport=A;const U=this._initialize(A);return this.loadDependencies(o).then(()=>(this.transformMatrix=_.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),U))}convertOpList(o){const A=this._operatorIdMapping,U=o.argsArray,$=o.fnArray,V=[];for(let H=0,Y=$.length;H<Y;H++){const ue=$[H];V.push({fnId:ue,fn:A[ue],args:U[H]})}return S(V)}executeOpTree(o){for(const A of o){const U=A.fn,$=A.fnId,V=A.args;switch($|0){case _.OPS.beginText:this.beginText();break;case _.OPS.dependency:break;case _.OPS.setLeading:this.setLeading(V);break;case _.OPS.setLeadingMoveText:this.setLeadingMoveText(V[0],V[1]);break;case _.OPS.setFont:this.setFont(V);break;case _.OPS.showText:this.showText(V[0]);break;case _.OPS.showSpacedText:this.showText(V[0]);break;case _.OPS.endText:this.endText();break;case _.OPS.moveText:this.moveText(V[0],V[1]);break;case _.OPS.setCharSpacing:this.setCharSpacing(V[0]);break;case _.OPS.setWordSpacing:this.setWordSpacing(V[0]);break;case _.OPS.setHScale:this.setHScale(V[0]);break;case _.OPS.setTextMatrix:this.setTextMatrix(V[0],V[1],V[2],V[3],V[4],V[5]);break;case _.OPS.setTextRise:this.setTextRise(V[0]);break;case _.OPS.setTextRenderingMode:this.setTextRenderingMode(V[0]);break;case _.OPS.setLineWidth:this.setLineWidth(V[0]);break;case _.OPS.setLineJoin:this.setLineJoin(V[0]);break;case _.OPS.setLineCap:this.setLineCap(V[0]);break;case _.OPS.setMiterLimit:this.setMiterLimit(V[0]);break;case _.OPS.setFillRGBColor:this.setFillRGBColor(V[0],V[1],V[2]);break;case _.OPS.setStrokeRGBColor:this.setStrokeRGBColor(V[0],V[1],V[2]);break;case _.OPS.setStrokeColorN:this.setStrokeColorN(V);break;case _.OPS.setFillColorN:this.setFillColorN(V);break;case _.OPS.shadingFill:this.shadingFill(V[0]);break;case _.OPS.setDash:this.setDash(V[0],V[1]);break;case _.OPS.setRenderingIntent:this.setRenderingIntent(V[0]);break;case _.OPS.setFlatness:this.setFlatness(V[0]);break;case _.OPS.setGState:this.setGState(V[0]);break;case _.OPS.fill:this.fill();break;case _.OPS.eoFill:this.eoFill();break;case _.OPS.stroke:this.stroke();break;case _.OPS.fillStroke:this.fillStroke();break;case _.OPS.eoFillStroke:this.eoFillStroke();break;case _.OPS.clip:this.clip("nonzero");break;case _.OPS.eoClip:this.clip("evenodd");break;case _.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _.OPS.paintImageXObject:this.paintImageXObject(V[0]);break;case _.OPS.paintInlineImageXObject:this.paintInlineImageXObject(V[0]);break;case _.OPS.paintImageMaskXObject:this.paintImageMaskXObject(V[0]);break;case _.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(V[0],V[1]);break;case _.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _.OPS.closePath:this.closePath();break;case _.OPS.closeStroke:this.closeStroke();break;case _.OPS.closeFillStroke:this.closeFillStroke();break;case _.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _.OPS.nextLine:this.nextLine();break;case _.OPS.transform:this.transform(V[0],V[1],V[2],V[3],V[4],V[5]);break;case _.OPS.constructPath:this.constructPath(V[0],V[1]);break;case _.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,_.warn)(`Unimplemented operator ${U}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,A,U,$,V,H){const Y=this.current;Y.textMatrix=Y.lineMatrix=[o,A,U,$,V,H],Y.textMatrixScale=Math.hypot(o,A),Y.x=Y.lineX=0,Y.y=Y.lineY=0,Y.xcoords=[],Y.ycoords=[],Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.tspan.setAttributeNS(null,"font-family",Y.fontFamily),Y.tspan.setAttributeNS(null,"font-size",`${C(Y.fontSize)}px`),Y.tspan.setAttributeNS(null,"y",C(-Y.y)),Y.txtElement=this.svgFactory.createElement("svg:text"),Y.txtElement.append(Y.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=_.IDENTITY_MATRIX,o.lineMatrix=_.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,A){const U=this.current;U.x=U.lineX+=o,U.y=U.lineY+=A,U.xcoords=[],U.ycoords=[],U.tspan=this.svgFactory.createElement("svg:tspan"),U.tspan.setAttributeNS(null,"font-family",U.fontFamily),U.tspan.setAttributeNS(null,"font-size",`${C(U.fontSize)}px`),U.tspan.setAttributeNS(null,"y",C(-U.y))}showText(o){const A=this.current,U=A.font,$=A.fontSize;if($===0)return;const V=A.fontSizeScale,H=A.charSpacing,Y=A.wordSpacing,ue=A.fontDirection,se=A.textHScale*ue,ne=U.vertical,Q=ne?1:-1,ce=U.defaultVMetrics,le=$*A.fontMatrix[0];let J=0;for(const D of o){if(D===null){J+=ue*Y;continue}else if(typeof D=="number"){J+=Q*D*$/1e3;continue}const oe=(D.isSpace?Y:0)+H,re=D.fontChar;let B,L,te=D.width;if(ne){let pe;const ie=D.vmetric||ce;pe=D.vmetric?ie[1]:te*.5,pe=-pe*le;const Ae=ie[2]*le;te=ie?-ie[0]:te,B=pe/V,L=(J+Ae)/V}else B=J/V,L=0;(D.isInFont||U.missingFile)&&(A.xcoords.push(A.x+B),ne&&A.ycoords.push(-A.y+L),A.tspan.textContent+=re);let de;ne?de=te*le-oe*ue:de=te*le+oe*ue,J+=de}A.tspan.setAttributeNS(null,"x",A.xcoords.map(C).join(" ")),ne?A.tspan.setAttributeNS(null,"y",A.ycoords.map(C).join(" ")):A.tspan.setAttributeNS(null,"y",C(-A.y)),ne?A.y-=J:A.x+=J*se,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${C(A.fontSize)}px`),A.fontStyle!==g.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==g.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const ve=A.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;if(ve===_.TextRenderingMode.FILL||ve===_.TextRenderingMode.FILL_STROKE?(A.fillColor!==g.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===_.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),ve===_.TextRenderingMode.STROKE||ve===_.TextRenderingMode.FILL_STROKE){const D=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,D)}let ae=A.textMatrix;A.textRise!==0&&(ae=ae.slice(),ae[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${u(ae)} scale(${C(se)}, -1)`),A.txtElement.setAttributeNS(M,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(o,A){this.setLeading(-A),this.moveText(o,A)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=h(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${A}); }
`}setFont(o){const A=this.current,U=this.commonObjs.get(o[0]);let $=o[1];A.font=U,this.embedFonts&&!U.missingFile&&!this.embeddedFonts[U.loadedName]&&(this.addFontStyle(U),this.embeddedFonts[U.loadedName]=U),A.fontMatrix=U.fontMatrix||_.FONT_IDENTITY_MATRIX;let V="normal";U.black?V="900":U.bold&&(V="bold");const H=U.italic?"italic":"normal";$<0?($=-$,A.fontDirection=-1):A.fontDirection=1,A.fontSize=$,A.fontFamily=U.loadedName,A.fontWeight=V,A.fontStyle=H,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",C(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var o;const A=this.current;A.textRenderingMode&_.TextRenderingMode.ADD_TO_PATH_FLAG&&(o=A.txtElement)!==null&&o!==void 0&&o.hasChildNodes()&&(A.element=A.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=b[o]}setLineJoin(o){this.current.lineJoin=n[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,A,U){this.current.strokeColor=_.Util.makeHexColor(o,A,U)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,A,U){this.current.fillColor=_.Util.makeHexColor(o,A,U),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const A=this.viewport.width,U=this.viewport.height,$=_.Util.inverseTransform(this.transformMatrix),V=_.Util.applyTransform([0,0],$),H=_.Util.applyTransform([0,U],$),Y=_.Util.applyTransform([A,0],$),ue=_.Util.applyTransform([A,U],$),se=Math.min(V[0],H[0],Y[0],ue[0]),ne=Math.min(V[1],H[1],Y[1],ue[1]),Q=Math.max(V[0],H[0],Y[0],ue[0]),ce=Math.max(V[1],H[1],Y[1],ue[1]),le=this.svgFactory.createElement("svg:rect");le.setAttributeNS(null,"x",se),le.setAttributeNS(null,"y",ne),le.setAttributeNS(null,"width",Q-se),le.setAttributeNS(null,"height",ce-ne),le.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&le.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(le)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const A=o[1],U=o[2],$=o[3]||_.IDENTITY_MATRIX,[V,H,Y,ue]=o[4],se=o[5],ne=o[6],Q=o[7],ce=`shading${w++}`,[le,J,ve,ae]=_.Util.normalizeRect([..._.Util.applyTransform([V,H],$),..._.Util.applyTransform([Y,ue],$)]),[D,oe]=_.Util.singularValueDecompose2dScale($),re=se*D,B=ne*oe,L=this.svgFactory.createElement("svg:pattern");L.setAttributeNS(null,"id",ce),L.setAttributeNS(null,"patternUnits","userSpaceOnUse"),L.setAttributeNS(null,"width",re),L.setAttributeNS(null,"height",B),L.setAttributeNS(null,"x",`${le}`),L.setAttributeNS(null,"y",`${J}`);const te=this.svg,de=this.transformMatrix,pe=this.current.fillColor,ie=this.current.strokeColor,Ae=this.svgFactory.create(ve-le,ae-J);if(this.svg=Ae,this.transformMatrix=$,Q===2){const Ce=_.Util.makeHexColor(...A);this.current.fillColor=Ce,this.current.strokeColor=Ce}return this.executeOpTree(this.convertOpList(U)),this.svg=te,this.transformMatrix=de,this.current.fillColor=pe,this.current.strokeColor=ie,L.append(Ae.childNodes[0]),this.defs.append(L),`url(#${ce})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const A=`shading${w++}`,U=o[3];let $;switch(o[1]){case"axial":const V=o[4],H=o[5];$=this.svgFactory.createElement("svg:linearGradient"),$.setAttributeNS(null,"id",A),$.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),$.setAttributeNS(null,"x1",V[0]),$.setAttributeNS(null,"y1",V[1]),$.setAttributeNS(null,"x2",H[0]),$.setAttributeNS(null,"y2",H[1]);break;case"radial":const Y=o[4],ue=o[5],se=o[6],ne=o[7];$=this.svgFactory.createElement("svg:radialGradient"),$.setAttributeNS(null,"id",A),$.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),$.setAttributeNS(null,"cx",ue[0]),$.setAttributeNS(null,"cy",ue[1]),$.setAttributeNS(null,"r",ne),$.setAttributeNS(null,"fx",Y[0]),$.setAttributeNS(null,"fy",Y[1]),$.setAttributeNS(null,"fr",se);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const V of U){const H=this.svgFactory.createElement("svg:stop");H.setAttributeNS(null,"offset",V[0]),H.setAttributeNS(null,"stop-color",V[1]),$.append(H)}return this.defs.append($),`url(#${A})`;case"Mesh":return(0,_.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,A){this.current.dashArray=o,this.current.dashPhase=A}constructPath(o,A){const U=this.current;let $=U.x,V=U.y,H=[],Y=0;for(const ue of o)switch(ue|0){case _.OPS.rectangle:$=A[Y++],V=A[Y++];const se=A[Y++],ne=A[Y++],Q=$+se,ce=V+ne;H.push("M",C($),C(V),"L",C(Q),C(V),"L",C(Q),C(ce),"L",C($),C(ce),"Z");break;case _.OPS.moveTo:$=A[Y++],V=A[Y++],H.push("M",C($),C(V));break;case _.OPS.lineTo:$=A[Y++],V=A[Y++],H.push("L",C($),C(V));break;case _.OPS.curveTo:$=A[Y+4],V=A[Y+5],H.push("C",C(A[Y]),C(A[Y+1]),C(A[Y+2]),C(A[Y+3]),C($),C(V)),Y+=6;break;case _.OPS.curveTo2:H.push("C",C($),C(V),C(A[Y]),C(A[Y+1]),C(A[Y+2]),C(A[Y+3])),$=A[Y+2],V=A[Y+3],Y+=4;break;case _.OPS.curveTo3:$=A[Y+2],V=A[Y+3],H.push("C",C(A[Y]),C(A[Y+1]),C($),C(V),C($),C(V)),Y+=4;break;case _.OPS.closePath:H.push("Z");break}H=H.join(" "),U.path&&o.length>0&&o[0]!==_.OPS.rectangle&&o[0]!==_.OPS.moveTo?H=U.path.getAttributeNS(null,"d")+H:(U.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(U.path)),U.path.setAttributeNS(null,"d",H),U.path.setAttributeNS(null,"fill","none"),U.element=U.path,U.setCurrentPoint($,V)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const A=`clippath${j++}`,U=this.svgFactory.createElement("svg:clipPath");U.setAttributeNS(null,"id",A),U.setAttributeNS(null,"transform",u(this.transformMatrix));const $=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?$.setAttributeNS(null,"clip-rule","evenodd"):$.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,U.append($),this.defs.append(U),o.activeClipUrl){o.clipGroup=null;for(const V of this.extraStack)V.clipGroup=null;U.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const A=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",A)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[A,U]of o)switch(A){case"LW":this.setLineWidth(U);break;case"LC":this.setLineCap(U);break;case"LJ":this.setLineJoin(U);break;case"ML":this.setMiterLimit(U);break;case"D":this.setDash(U[0],U[1]);break;case"RI":this.setRenderingIntent(U);break;case"FL":this.setFlatness(U);break;case"Font":this.setFont(U);break;case"CA":this.setStrokeAlpha(U);break;case"ca":this.setFillAlpha(U);break;default:(0,_.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const U=this.current;let $=U.dashArray;A!==1&&$.length>0&&($=$.map(function(V){return A*V})),o.setAttributeNS(null,"stroke",U.strokeColor),o.setAttributeNS(null,"stroke-opacity",U.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",C(U.miterLimit)),o.setAttributeNS(null,"stroke-linecap",U.lineCap),o.setAttributeNS(null,"stroke-linejoin",U.lineJoin),o.setAttributeNS(null,"stroke-width",C(A*U.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",$.map(C).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",C(A*U.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)===null||o===void 0||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)===null||o===void 0||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const A=this.getObject(o);if(!A){(0,_.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(o,A){const U=o.width,$=o.height,V=x(o,this.forceDataSchema,!!A),H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width",C(U)),H.setAttributeNS(null,"height",C($)),this.current.element=H,this.clip("nonzero");const Y=this.svgFactory.createElement("svg:image");Y.setAttributeNS(P,"xlink:href",V),Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y",C(-$)),Y.setAttributeNS(null,"width",C(U)+"px"),Y.setAttributeNS(null,"height",C($)+"px"),Y.setAttributeNS(null,"transform",`scale(${C(1/U)} ${C(-1/$)})`),A?A.append(Y):this._ensureTransformGroup().append(Y)}paintImageMaskXObject(o){const A=this.getObject(o.data,o);if(A.bitmap){(0,_.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const U=this.current,$=A.width,V=A.height,H=U.fillColor;U.maskId=`mask${N++}`;const Y=this.svgFactory.createElement("svg:mask");Y.setAttributeNS(null,"id",U.maskId);const ue=this.svgFactory.createElement("svg:rect");ue.setAttributeNS(null,"x","0"),ue.setAttributeNS(null,"y","0"),ue.setAttributeNS(null,"width",C($)),ue.setAttributeNS(null,"height",C(V)),ue.setAttributeNS(null,"fill",H),ue.setAttributeNS(null,"mask",`url(#${U.maskId})`),this.defs.append(Y),this._ensureTransformGroup().append(ue),this.paintInlineImageXObject(A,Y)}paintFormXObjectBegin(o,A){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),A){const U=A[2]-A[0],$=A[3]-A[1],V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",A[0]),V.setAttributeNS(null,"y",A[1]),V.setAttributeNS(null,"width",C(U)),V.setAttributeNS(null,"height",C($)),this.current.element=V,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const A=this.svgFactory.create(o.width,o.height),U=this.svgFactory.createElement("svg:defs");A.append(U),this.defs=U;const $=this.svgFactory.createElement("svg:g");return $.setAttributeNS(null,"transform",u(o.transform)),A.append($),this.svg=$,A}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",u(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(T){var c=__webpack_module_cache__[T];if(c!==void 0)return c.exports;var t=__webpack_module_cache__[T]={exports:{}};return __webpack_modules__[T](t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var T=__webpack_exports__;Object.defineProperty(T,"__esModule",{value:!0}),Object.defineProperty(T,"AbortException",{enumerable:!0,get:function(){return c.AbortException}}),Object.defineProperty(T,"AnnotationEditorLayer",{enumerable:!0,get:function(){return O.AnnotationEditorLayer}}),Object.defineProperty(T,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return c.AnnotationEditorParamsType}}),Object.defineProperty(T,"AnnotationEditorType",{enumerable:!0,get:function(){return c.AnnotationEditorType}}),Object.defineProperty(T,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return F.AnnotationEditorUIManager}}),Object.defineProperty(T,"AnnotationLayer",{enumerable:!0,get:function(){return S.AnnotationLayer}}),Object.defineProperty(T,"AnnotationMode",{enumerable:!0,get:function(){return c.AnnotationMode}}),Object.defineProperty(T,"CMapCompressionType",{enumerable:!0,get:function(){return c.CMapCompressionType}}),Object.defineProperty(T,"FeatureTest",{enumerable:!0,get:function(){return c.FeatureTest}}),Object.defineProperty(T,"GlobalWorkerOptions",{enumerable:!0,get:function(){return C.GlobalWorkerOptions}}),Object.defineProperty(T,"InvalidPDFException",{enumerable:!0,get:function(){return c.InvalidPDFException}}),Object.defineProperty(T,"MissingPDFException",{enumerable:!0,get:function(){return c.MissingPDFException}}),Object.defineProperty(T,"OPS",{enumerable:!0,get:function(){return c.OPS}}),Object.defineProperty(T,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(T,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(T,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(T,"PasswordResponses",{enumerable:!0,get:function(){return c.PasswordResponses}}),Object.defineProperty(T,"PermissionFlag",{enumerable:!0,get:function(){return c.PermissionFlag}}),Object.defineProperty(T,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(T,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(T,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(T,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return c.UNSUPPORTED_FEATURES}}),Object.defineProperty(T,"UnexpectedResponseException",{enumerable:!0,get:function(){return c.UnexpectedResponseException}}),Object.defineProperty(T,"Util",{enumerable:!0,get:function(){return c.Util}}),Object.defineProperty(T,"VerbosityLevel",{enumerable:!0,get:function(){return c.VerbosityLevel}}),Object.defineProperty(T,"XfaLayer",{enumerable:!0,get:function(){return g.XfaLayer}}),Object.defineProperty(T,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(T,"createPromiseCapability",{enumerable:!0,get:function(){return c.createPromiseCapability}}),Object.defineProperty(T,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return c.createValidAbsoluteUrl}}),Object.defineProperty(T,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(T,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(T,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(T,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(T,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(T,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(T,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(T,"renderTextLayer",{enumerable:!0,get:function(){return _.renderTextLayer}}),Object.defineProperty(T,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(T,"shadow",{enumerable:!0,get:function(){return c.shadow}}),Object.defineProperty(T,"updateTextLayer",{enumerable:!0,get:function(){return _.updateTextLayer}}),Object.defineProperty(T,"version",{enumerable:!0,get:function(){return t.version}});var c=__w_pdfjs_require__(1),t=__w_pdfjs_require__(135),s=__w_pdfjs_require__(139),_=__w_pdfjs_require__(158),O=__w_pdfjs_require__(159),F=__w_pdfjs_require__(138),S=__w_pdfjs_require__(164),C=__w_pdfjs_require__(146),u=__w_pdfjs_require__(167),g=__w_pdfjs_require__(166)})(),__webpack_exports__})())}(pdf$1)),pdfExports$1}var pdfExports=requirePdf(),pdf_viewerExports={},pdf_viewer={get exports(){return pdf_viewerExports},set exports(T){pdf_viewerExports=T}};(function(T,c){(function(t,s){T.exports=s()})(globalThis,()=>(()=>{var t=[,(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.SimpleLinkService=S.PDFLinkService=S.LinkTarget=void 0;var u=C(2);function g(ue,se){P(ue,se),se.add(ue)}function M(ue,se,ne){P(ue,se),se.set(ue,ne)}function P(ue,se){if(se.has(ue))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(ue,se,ne){return n(ue,se),ne}function n(ue,se){if(ue!==se)throw new TypeError("Private static access of wrong provenance")}function h(ue,se,ne){if(!se.has(ue))throw new TypeError("attempted to get private field on non-instance");return ne}function x(ue,se){var ne=y(ue,se,"get");return j(ue,ne)}function y(ue,se,ne){if(!se.has(ue))throw new TypeError("attempted to "+ne+" private field on non-instance");return se.get(ue)}function j(ue,se){return se.get?se.get.call(ue):se.value}const N="noopener noreferrer nofollow",w={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};S.LinkTarget=w;function o(ue){let{url:se,target:ne,rel:Q,enabled:ce=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!se||typeof se!="string")throw new Error('A valid "url" parameter must provided.');const le=(0,u.removeNullCharacters)(se);ce?ue.href=ue.title=le:(ue.href="",ue.title=`Disabled: ${le}`,ue.onclick=()=>!1);let J="";switch(ne){case w.NONE:break;case w.SELF:J="_self";break;case w.BLANK:J="_blank";break;case w.PARENT:J="_parent";break;case w.TOP:J="_top";break}ue.target=J,ue.rel=typeof Q=="string"?Q:N}var A=new WeakMap,U=new WeakSet;class ${constructor(){let{eventBus:se,externalLinkTarget:ne=null,externalLinkRel:Q=null,ignoreDestinationZoom:ce=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};g(this,U),M(this,A,{writable:!0,value:new Map}),this.eventBus=se,this.externalLinkTarget=ne,this.externalLinkRel=Q,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=ce,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(se){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.baseUrl=ne,this.pdfDocument=se,x(this,A).clear()}setViewer(se){this.pdfViewer=se}setHistory(se){this.pdfHistory=se}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(se){this.pdfViewer.currentPageNumber=se}get rotation(){return this.pdfViewer.pagesRotation}set rotation(se){this.pdfViewer.pagesRotation=se}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(se){if(!this.pdfDocument)return;let ne,Q;if(typeof se=="string"?(ne=se,Q=await this.pdfDocument.getDestination(se)):(ne=null,Q=await se),!Array.isArray(Q)){console.error(`PDFLinkService.goToDestination: "${Q}" is not a valid destination array, for dest="${se}".`);return}h(this,U,V).call(this,se,ne,Q)}goToPage(se){if(!this.pdfDocument)return;const ne=typeof se=="string"&&this.pdfViewer.pageLabelToPageNumber(se)||se|0;if(!(Number.isInteger(ne)&&ne>0&&ne<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${se}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(ne)),this.pdfViewer.scrollPageIntoView({pageNumber:ne})}addLinkAttributes(se,ne){let Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;o(se,{url:ne,target:Q?w.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(se){if(typeof se=="string"){if(se.length>0)return this.getAnchorUrl("#"+escape(se))}else if(Array.isArray(se)){const ne=JSON.stringify(se);if(ne.length>0)return this.getAnchorUrl("#"+escape(ne))}return this.getAnchorUrl("")}getAnchorUrl(se){return(this.baseUrl||"")+se}setHash(se){if(!this.pdfDocument)return;let ne,Q;if(se.includes("=")){const ce=(0,u.parseQueryString)(se);if(ce.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:ce.get("search").replace(/"/g,""),phraseSearch:ce.get("phrase")==="true"}),ce.has("page")&&(ne=ce.get("page")|0||1),ce.has("zoom")){const le=ce.get("zoom").split(","),J=le[0],ve=parseFloat(J);J.includes("Fit")?J==="Fit"||J==="FitB"?Q=[null,{name:J}]:J==="FitH"||J==="FitBH"||J==="FitV"||J==="FitBV"?Q=[null,{name:J},le.length>1?le[1]|0:null]:J==="FitR"?le.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):Q=[null,{name:J},le[1]|0,le[2]|0,le[3]|0,le[4]|0]:console.error(`PDFLinkService.setHash: "${J}" is not a valid zoom value.`):Q=[null,{name:"XYZ"},le.length>1?le[1]|0:null,le.length>2?le[2]|0:null,ve?ve/100:J]}Q?this.pdfViewer.scrollPageIntoView({pageNumber:ne||this.page,destArray:Q,allowNegativeOffset:!0}):ne&&(this.page=ne),ce.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:ce.get("pagemode")}),ce.has("nameddest")&&this.goToDestination(ce.get("nameddest"))}else{Q=unescape(se);try{Q=JSON.parse(Q),Array.isArray(Q)||(Q=Q.toString())}catch{}if(typeof Q=="string"||b($,$,H).call($,Q)){this.goToDestination(Q);return}console.error(`PDFLinkService.setHash: "${unescape(se)}" is not a valid destination.`)}}executeNamedAction(se){var ne,Q;switch(se){case"GoBack":(ne=this.pdfHistory)===null||ne===void 0||ne.back();break;case"GoForward":(Q=this.pdfHistory)===null||Q===void 0||Q.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:se})}async executeSetOCGState(se){const ne=this.pdfDocument,Q=await this.pdfViewer.optionalContentConfigPromise;if(ne!==this.pdfDocument)return;let ce;for(const le of se.state){switch(le){case"ON":case"OFF":case"Toggle":ce=le;continue}switch(ce){case"ON":Q.setVisibility(le,!0);break;case"OFF":Q.setVisibility(le,!1);break;case"Toggle":const J=Q.getGroup(le);J&&Q.setVisibility(le,!J.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(Q)}cachePageRef(se,ne){if(!ne)return;const Q=ne.gen===0?`${ne.num}R`:`${ne.num}R${ne.gen}`;x(this,A).set(Q,se)}_cachedPageNumber(se){if(!se)return null;const ne=se.gen===0?`${se.num}R`:`${se.num}R${se.gen}`;return x(this,A).get(ne)||null}isPageVisible(se){return this.pdfViewer.isPageVisible(se)}isPageCached(se){return this.pdfViewer.isPageCached(se)}}S.PDFLinkService=$;function V(ue){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ne=arguments.length>2?arguments[2]:void 0;const Q=ne[0];let ce;if(typeof Q=="object"&&Q!==null){if(ce=this._cachedPageNumber(Q),!ce){this.pdfDocument.getPageIndex(Q).then(le=>{this.cachePageRef(le+1,Q),h(this,U,V).call(this,ue,se,ne)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${Q}" is not a valid page reference, for dest="${ue}".`)});return}}else if(Number.isInteger(Q))ce=Q+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${Q}" is not a valid destination reference, for dest="${ue}".`);return}if(!ce||ce<1||ce>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${ce}" is not a valid page number, for dest="${ue}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:se,explicitDest:ne,pageNumber:ce})),this.pdfViewer.scrollPageIntoView({pageNumber:ce,destArray:ne,ignoreDestinationZoom:this._ignoreDestinationZoom})}function H(ue){if(!Array.isArray(ue))return!1;const se=ue.length;if(se<2)return!1;const ne=ue[0];if(!(typeof ne=="object"&&Number.isInteger(ne.num)&&Number.isInteger(ne.gen))&&!(Number.isInteger(ne)&&ne>=0))return!1;const Q=ue[1];if(!(typeof Q=="object"&&typeof Q.name=="string"))return!1;let ce=!0;switch(Q.name){case"XYZ":if(se!==5)return!1;break;case"Fit":case"FitB":return se===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(se!==3)return!1;break;case"FitR":if(se!==6)return!1;ce=!1;break;default:return!1}for(let le=2;le<se;le++){const J=ue[le];if(!(typeof J=="number"||ce&&J===null))return!1}return!0}class Y{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(se){}get rotation(){return 0}set rotation(se){}get isInPresentationMode(){return!1}async goToDestination(se){}goToPage(se){}addLinkAttributes(se,ne){o(se,{url:ne,enabled:this.externalLinkEnabled})}getDestinationHash(se){return"#"}getAnchorUrl(se){return"#"}setHash(se){}executeNamedAction(se){}executeSetOCGState(se){}cachePageRef(se,ne){}isPageVisible(se){return!0}isPageCached(se){return!0}}S.SimpleLinkService=Y},(F,S)=>{var C,u,g,M,P;Object.defineProperty(S,"__esModule",{value:!0}),S.animationStarted=S.VERTICAL_PADDING=S.UNKNOWN_SCALE=S.TextLayerMode=S.SpreadMode=S.SidebarView=S.ScrollMode=S.SCROLLBAR_PADDING=S.RenderingStates=S.RendererType=S.ProgressBar=S.PresentationModeState=S.OutputScale=S.MIN_SCALE=S.MAX_SCALE=S.MAX_AUTO_SCALE=S.DEFAULT_SCALE_VALUE=S.DEFAULT_SCALE_DELTA=S.DEFAULT_SCALE=S.CursorTool=S.AutoPrintRegExp=void 0,S.apiPageLayoutToViewerModes=me,S.apiPageModeToSidebarView=Se,S.approximateFraction=re,S.backtrackBeforeAllVisibleElements=te,S.binarySearchFirstItem=oe,S.docStyle=void 0,S.getActiveOrFocusedElement=K,S.getPageSizeInches=L,S.getVisibleElements=de,S.isPortraitOrientation=Ne,S.isValidRotation=Ce,S.isValidScrollMode=Te,S.isValidSpreadMode=Me,S.noContextMenuHandler=pe,S.normalizeWheelEventDelta=Ae,S.normalizeWheelEventDirection=ie,S.parseQueryString=J,S.removeNullCharacters=D,S.roundToDivide=B,S.scrollIntoView=ce,S.watchScroll=le;const b="auto";S.DEFAULT_SCALE_VALUE=b;const n=1;S.DEFAULT_SCALE=n;const h=1.1;S.DEFAULT_SCALE_DELTA=h;const x=.1;S.MIN_SCALE=x;const y=10;S.MAX_SCALE=y;const j=0;S.UNKNOWN_SCALE=j;const N=1.25;S.MAX_AUTO_SCALE=N;const w=40;S.SCROLLBAR_PADDING=w;const o=5;S.VERTICAL_PADDING=o;const A={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};S.RenderingStates=A;const U={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};S.PresentationModeState=U;const $={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};S.SidebarView=$;const V={CANVAS:"canvas",SVG:"svg"};S.RendererType=V;const H={DISABLE:0,ENABLE:1};S.TextLayerMode=H;const Y={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};S.ScrollMode=Y;const ue={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};S.SpreadMode=ue;const se={SELECT:0,HAND:1,ZOOM:2};S.CursorTool=se;const ne=/\bprint\s*\(/;S.AutoPrintRegExp=ne;class Q{constructor(){const ge=window.devicePixelRatio||1;this.sx=ge,this.sy=ge}get scaled(){return this.sx!==1||this.sy!==1}}S.OutputScale=Q;function ce(fe,ge){let Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ee=fe.offsetParent;if(!Ee){console.error("offsetParent is not set -- cannot scroll");return}let Ie=fe.offsetTop+fe.clientTop,je=fe.offsetLeft+fe.clientLeft;for(;Ee.clientHeight===Ee.scrollHeight&&Ee.clientWidth===Ee.scrollWidth||Re&&(Ee.classList.contains("markedContent")||getComputedStyle(Ee).overflow==="hidden");)if(Ie+=Ee.offsetTop,je+=Ee.offsetLeft,Ee=Ee.offsetParent,!Ee)return;ge&&(ge.top!==void 0&&(Ie+=ge.top),ge.left!==void 0&&(je+=ge.left,Ee.scrollLeft=je)),Ee.scrollTop=Ie}function le(fe,ge){const Re=function(je){Ie||(Ie=window.requestAnimationFrame(function(){Ie=null;const Be=fe.scrollLeft,Ge=Ee.lastX;Be!==Ge&&(Ee.right=Be>Ge),Ee.lastX=Be;const at=fe.scrollTop,tt=Ee.lastY;at!==tt&&(Ee.down=at>tt),Ee.lastY=at,ge(Ee)}))},Ee={right:!0,down:!0,lastX:fe.scrollLeft,lastY:fe.scrollTop,_eventHandler:Re};let Ie=null;return fe.addEventListener("scroll",Re,!0),Ee}function J(fe){const ge=new Map;for(const[Re,Ee]of new URLSearchParams(fe))ge.set(Re.toLowerCase(),Ee);return ge}const ve=/\x00/g,ae=/[\x01-\x1F]/g;function D(fe){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof fe!="string"?(console.error("The argument must be a string."),fe):(ge&&(fe=fe.replace(ae," ")),fe.replace(ve,""))}function oe(fe,ge){let Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ee=fe.length-1;if(Ee<0||!ge(fe[Ee]))return fe.length;if(ge(fe[Re]))return Re;for(;Re<Ee;){const Ie=Re+Ee>>1,je=fe[Ie];ge(je)?Ee=Ie:Re=Ie+1}return Re}function re(fe){if(Math.floor(fe)===fe)return[fe,1];const ge=1/fe,Re=8;if(ge>Re)return[1,Re];if(Math.floor(ge)===ge)return[1,ge];const Ee=fe>1?ge:fe;let Ie=0,je=1,Be=1,Ge=1;for(;;){const tt=Ie+Be,be=je+Ge;if(be>Re)break;Ee<=tt/be?(Be=tt,Ge=be):(Ie=tt,je=be)}let at;return Ee-Ie/je<Be/Ge-Ee?at=Ee===fe?[Ie,je]:[je,Ie]:at=Ee===fe?[Be,Ge]:[Ge,Be],at}function B(fe,ge){const Re=fe%ge;return Re===0?fe:Math.round(fe-Re+ge)}function L(fe){let{view:ge,userUnit:Re,rotate:Ee}=fe;const[Ie,je,Be,Ge]=ge,at=Ee%180!==0,tt=(Be-Ie)/72*Re,be=(Ge-je)/72*Re;return{width:at?be:tt,height:at?tt:be}}function te(fe,ge,Re){if(fe<2)return fe;let Ee=ge[fe].div,Ie=Ee.offsetTop+Ee.clientTop;Ie>=Re&&(Ee=ge[fe-1].div,Ie=Ee.offsetTop+Ee.clientTop);for(let je=fe-2;je>=0&&(Ee=ge[je].div,!(Ee.offsetTop+Ee.clientTop+Ee.clientHeight<=Ie));--je)fe=je;return fe}function de(fe){let{scrollEl:ge,views:Re,sortByVisibility:Ee=!1,horizontal:Ie=!1,rtl:je=!1}=fe;const Be=ge.scrollTop,Ge=Be+ge.clientHeight,at=ge.scrollLeft,tt=at+ge.clientWidth;function be(Oe){const ye=Oe.div;return ye.offsetTop+ye.clientTop+ye.clientHeight>Be}function z(Oe){const ye=Oe.div,We=ye.offsetLeft+ye.clientLeft,Je=We+ye.clientWidth;return je?We<tt:Je>at}const ee=[],Pe=new Set,qe=Re.length;let Qe=oe(Re,Ie?z:be);Qe>0&&Qe<qe&&!Ie&&(Qe=te(Qe,Re,Be));let Ze=Ie?tt:-1;for(let Oe=Qe;Oe<qe;Oe++){const ye=Re[Oe],We=ye.div,Je=We.offsetLeft+We.clientLeft,$e=We.offsetTop+We.clientTop,lt=We.clientWidth,_e=We.clientHeight,he=Je+lt,ke=$e+_e;if(Ze===-1)ke>=Ge&&(Ze=ke);else if((Ie?Je:$e)>Ze)break;if(ke<=Be||$e>=Ge||he<=at||Je>=tt)continue;const Ve=Math.max(0,Be-$e)+Math.max(0,ke-Ge),ze=Math.max(0,at-Je)+Math.max(0,he-tt),Ke=(_e-Ve)/_e,et=(lt-ze)/lt,st=Ke*et*100|0;ee.push({id:ye.id,x:Je,y:$e,view:ye,percent:st,widthPercent:et*100|0}),Pe.add(ye.id)}const Le=ee[0],Xe=ee.at(-1);return Ee&&ee.sort(function(Oe,ye){const We=Oe.percent-ye.percent;return Math.abs(We)>.001?-We:Oe.id-ye.id}),{first:Le,last:Xe,views:ee,ids:Pe}}function pe(fe){fe.preventDefault()}function ie(fe){let ge=Math.hypot(fe.deltaX,fe.deltaY);const Re=Math.atan2(fe.deltaY,fe.deltaX);return-.25*Math.PI<Re&&Re<.75*Math.PI&&(ge=-ge),ge}function Ae(fe){const ge=fe.deltaMode;let Re=ie(fe);const Ee=30,Ie=30;return ge===WheelEvent.DOM_DELTA_PIXEL?Re/=Ee*Ie:ge===WheelEvent.DOM_DELTA_LINE&&(Re/=Ie),Re}function Ce(fe){return Number.isInteger(fe)&&fe%90===0}function Te(fe){return Number.isInteger(fe)&&Object.values(Y).includes(fe)&&fe!==Y.UNKNOWN}function Me(fe){return Number.isInteger(fe)&&Object.values(ue).includes(fe)&&fe!==ue.UNKNOWN}function Ne(fe){return fe.width<=fe.height}const xe=new Promise(function(fe){window.requestAnimationFrame(fe)});S.animationStarted=xe;const q=document.documentElement.style;S.docStyle=q;function X(fe,ge,Re){return Math.min(Math.max(fe,ge),Re)}class G{constructor(ge){nt(this,C,null),nt(this,u,null),nt(this,g,0),nt(this,M,null),nt(this,P,!0),rt(this,C,ge.classList),rt(this,M,ge.style)}get percent(){return Ue(this,g)}set percent(ge){if(rt(this,g,X(ge,0,100)),isNaN(ge)){Ue(this,C).add("indeterminate");return}Ue(this,C).remove("indeterminate"),Ue(this,M).setProperty("--progressBar-percent",`${Ue(this,g)}%`)}setWidth(ge){if(!ge)return;const Re=ge.parentNode.offsetWidth-ge.offsetWidth;Re>0&&Ue(this,M).setProperty("--progressBar-end-offset",`${Re}px`)}setDisableAutoFetch(){let ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3;isNaN(Ue(this,g))||(Ue(this,u)&&clearTimeout(Ue(this,u)),this.show(),rt(this,u,setTimeout(()=>{rt(this,u,null),this.hide()},ge)))}hide(){Ue(this,P)&&(rt(this,P,!1),Ue(this,C).add("hidden"))}show(){Ue(this,P)||(rt(this,P,!0),Ue(this,C).remove("hidden"))}}C=new WeakMap,u=new WeakMap,g=new WeakMap,M=new WeakMap,P=new WeakMap,S.ProgressBar=G;function K(){let fe=document,ge=fe.activeElement||fe.querySelector(":focus");for(;(Re=ge)!==null&&Re!==void 0&&Re.shadowRoot;){var Re;fe=ge.shadowRoot,ge=fe.activeElement||fe.querySelector(":focus")}return ge}function me(fe){let ge=Y.VERTICAL,Re=ue.NONE;switch(fe){case"SinglePage":ge=Y.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ge=Y.PAGE;case"TwoColumnLeft":Re=ue.ODD;break;case"TwoPageRight":ge=Y.PAGE;case"TwoColumnRight":Re=ue.EVEN;break}return{scrollMode:ge,spreadMode:Re}}function Se(fe){switch(fe){case"UseNone":return $.NONE;case"UseThumbs":return $.THUMBS;case"UseOutlines":return $.OUTLINE;case"UseAttachments":return $.ATTACHMENTS;case"UseOC":return $.LAYERS}return $.NONE}},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.AnnotationLayerBuilder=void 0;var u=C(4),g=C(5),M=C(2);function P(H,Y){n(H,Y),Y.add(H)}function b(H,Y,ue){n(H,Y),Y.set(H,ue)}function n(H,Y){if(Y.has(H))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(H,Y,ue){if(!Y.has(H))throw new TypeError("attempted to get private field on non-instance");return ue}function x(H,Y,ue){var se=N(H,Y,"set");return y(H,se,ue),ue}function y(H,Y,ue){if(Y.set)Y.set.call(H,ue);else{if(!Y.writable)throw new TypeError("attempted to set read only private field");Y.value=ue}}function j(H,Y){var ue=N(H,Y,"get");return w(H,ue)}function N(H,Y,ue){if(!Y.has(H))throw new TypeError("attempted to "+ue+" private field on non-instance");return Y.get(H)}function w(H,Y){return Y.get?Y.get.call(H):Y.value}var o=new WeakMap,A=new WeakMap,U=new WeakSet;class ${constructor(Y){let{pageDiv:ue,pdfPage:se,linkService:ne,downloadManager:Q,annotationStorage:ce=null,imageResourcesPath:le="",renderForms:J=!0,l10n:ve=g.NullL10n,enableScripting:ae=!1,hasJSActionsPromise:D=null,fieldObjectsPromise:oe=null,annotationCanvasMap:re=null,accessibilityManager:B=null}=Y;P(this,U),b(this,o,{writable:!0,value:0}),b(this,A,{writable:!0,value:null}),this.pageDiv=ue,this.pdfPage=se,this.linkService=ne,this.downloadManager=Q,this.imageResourcesPath=le,this.renderForms=J,this.l10n=ve,this.annotationStorage=ce,this.enableScripting=ae,this._hasJSActionsPromise=D||Promise.resolve(!1),this._fieldObjectsPromise=oe||Promise.resolve(null),this._annotationCanvasMap=re,this._accessibilityManager=B,this.div=null,this._cancelled=!1,this._eventBus=ne.eventBus}async render(Y){let ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"display";if(this.div){if(this._cancelled||j(this,o)===0)return;u.AnnotationLayer.update({viewport:Y.clone({dontFlip:!0}),div:this.div,annotationCanvasMap:this._annotationCanvasMap});return}const[se,ne,Q]=await Promise.all([this.pdfPage.getAnnotations({intent:ue}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(!this._cancelled){if(x(this,o,se.length),this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),j(this,o)===0){this.hide();return}if(u.AnnotationLayer.render({viewport:Y.clone({dontFlip:!0}),div:this.div,annotations:se,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:ne,fieldObjects:Q,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}),this.l10n.translate(this.div),this.linkService.isInPresentationMode&&h(this,U,V).call(this,M.PresentationModeState.FULLSCREEN),!j(this,A)){var ce;x(this,A,le=>{h(this,U,V).call(this,le.state)}),(ce=this._eventBus)===null||ce===void 0||ce._on("presentationmodechanged",j(this,A))}}}cancel(){if(this._cancelled=!0,j(this,A)){var Y;(Y=this._eventBus)===null||Y===void 0||Y._off("presentationmodechanged",j(this,A)),x(this,A,null)}}hide(){this.div&&(this.div.hidden=!0)}}S.AnnotationLayerBuilder=$;function V(H){if(!this.div)return;let Y=!1;switch(H){case M.PresentationModeState.FULLSCREEN:Y=!0;break;case M.PresentationModeState.NORMAL:break;default:return}for(const ue of this.div.childNodes)ue.hasAttribute("data-internal-link")||(ue.inert=Y)}},F=>{let S;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?S=window["pdfjs-dist/build/pdf"]:S=requirePdf(),F.exports=S},(F,S)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.NullL10n=void 0,S.fixupLangCode=M,S.getL10nFallback=u;const C={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};C.print_progress_percent="{{progress}}%";function u(n,h){switch(n){case"find_match_count":n=`find_match_count[${h.total===1?"one":"other"}]`;break;case"find_match_count_limit":n=`find_match_count_limit[${h.limit===1?"one":"other"}]`;break}return C[n]||""}const g={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function M(n){return g[n==null?void 0:n.toLowerCase()]||n}function P(n,h){return h?n.replace(/\{\{\s*(\w+)\s*\}\}/g,(x,y)=>y in h?h[y]:"{{"+y+"}}"):n}const b={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(n){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u(n,h);return P(x,h)},async translate(n){}};S.NullL10n=b},(F,S,C)=>{var u;Object.defineProperty(S,"__esModule",{value:!0}),S.DownloadManager=void 0;var g=C(4);function M(b,n){const h=document.createElement("a");if(!h.click)throw new Error('DownloadManager: "a.click()" is not supported.');h.href=b,h.target="_parent","download"in h&&(h.download=n),(document.body||document.documentElement).append(h),h.click(),h.remove()}class P{constructor(){nt(this,u,new WeakMap)}downloadUrl(n,h){if(!(0,g.createValidAbsoluteUrl)(n,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${n}`);return}M(n+"#pdfjs.action=download",h)}downloadData(n,h,x){const y=URL.createObjectURL(new Blob([n],{type:x}));M(y,h)}openOrDownloadData(n,h,x){const y=(0,g.isPdfFile)(x)?"application/pdf":"";return this.downloadData(h,x,y),!1}download(n,h,x){const y=URL.createObjectURL(n);M(y,x)}}u=new WeakMap,S.DownloadManager=P},(F,S)=>{var C;Object.defineProperty(S,"__esModule",{value:!0}),S.WaitOnType=S.EventBus=S.AutomationEventBus=void 0,S.waitOnEventOrTimeout=g;const u={EVENT:"event",TIMEOUT:"timeout"};S.WaitOnType=u;function g(b){let{target:n,name:h,delay:x=0}=b;return new Promise(function(y,j){if(typeof n!="object"||!(h&&typeof h=="string")||!(Number.isInteger(x)&&x>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function N(U){n instanceof M?n._off(h,w):n.removeEventListener(h,w),A&&clearTimeout(A),y(U)}const w=N.bind(null,u.EVENT);n instanceof M?n._on(h,w):n.addEventListener(h,w);const o=N.bind(null,u.TIMEOUT),A=setTimeout(o,x)})}class M{constructor(){nt(this,C,Object.create(null))}on(n,h){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._on(n,h,{external:!0,once:x==null?void 0:x.once})}off(n,h){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._off(n,h,{external:!0,once:x==null?void 0:x.once})}dispatch(n,h){const x=Ue(this,C)[n];if(!x||x.length===0)return;let y;for(const{listener:j,external:N,once:w}of x.slice(0)){if(w&&this._off(n,j),N){(y||(y=[])).push(j);continue}j(h)}if(y){for(const j of y)j(h);y=null}}_on(n,h){var x;let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;((x=Ue(this,C))[n]||(x[n]=[])).push({listener:h,external:(y==null?void 0:y.external)===!0,once:(y==null?void 0:y.once)===!0})}_off(n,h){const x=Ue(this,C)[n];if(x){for(let y=0,j=x.length;y<j;y++)if(x[y].listener===h){x.splice(y,1);return}}}}C=new WeakMap,S.EventBus=M;class P extends M{dispatch(n,h){throw new Error("Not implemented: AutomationEventBus.dispatch")}}S.AutomationEventBus=P},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.GenericL10n=void 0,C(9);var u=C(5);const g=document.webL10n;class M{constructor(b){this._lang=b,this._ready=new Promise((n,h)=>{g.setLanguage((0,u.fixupLangCode)(b),()=>{n(g)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(b){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(0,u.getL10nFallback)(b,n);return(await this._ready).get(b,n,h)}async translate(b){return(await this._ready).translate(b)}}S.GenericL10n=M},()=>{document.webL10n=function(F,S,C){var u={},g="",M="textContent",P="",b={},n="loading",h=!0;function x(){return S.querySelectorAll('link[type="application/l10n"]')}function y(){var Q=S.querySelector('script[type="application/l10n"]');return Q?JSON.parse(Q.innerHTML):null}function j(Q){return Q?Q.querySelectorAll("*[data-l10n-id]"):[]}function N(Q){if(!Q)return{};var ce=Q.getAttribute("data-l10n-id"),le=Q.getAttribute("data-l10n-args"),J={};if(le)try{J=JSON.parse(le)}catch{console.warn("could not parse arguments for #"+ce)}return{id:ce,args:J}}function w(Q,ce,le){ce=ce||function(ve){},le=le||function(){};var J=new XMLHttpRequest;J.open("GET",Q,h),J.overrideMimeType&&J.overrideMimeType("text/plain; charset=utf-8"),J.onreadystatechange=function(){J.readyState==4&&(J.status==200||J.status===0?ce(J.responseText):le())},J.onerror=le,J.ontimeout=le;try{J.send(null)}catch{le()}}function o(Q,ce,le,J){var ve=Q.replace(/[^\/]*$/,"")||"./";function ae(oe){return oe.lastIndexOf("\\")<0?oe:oe.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function D(oe,re){var B={},L=/^\s*|\s*$/,te=/^\s*#|^\s*$/,de=/^\s*\[(.*)\]\s*$/,pe=/^\s*@import\s+url\((.*)\)\s*$/i,ie=/^([^=\s]*)\s*=\s*(.+)$/;function Ae(Te,Me,Ne){var xe=Te.replace(L,"").split(/[\r\n]+/),q="*",X=ce.split("-",1)[0],G=!1,K="";function me(){for(;;){if(!xe.length){Ne();return}var Se=xe.shift();if(!te.test(Se)){if(Me){if(K=de.exec(Se),K){q=K[1].toLowerCase(),G=q!=="*"&&q!==ce&&q!==X;continue}else if(G)continue;if(K=pe.exec(Se),K){Ce(ve+K[1],me);return}}var fe=Se.match(ie);fe&&fe.length==3&&(B[fe[1]]=ae(fe[2]))}}}me()}function Ce(Te,Me){w(Te,function(Ne){Ae(Ne,!1,Me)},function(){console.warn(Te+" not found."),Me()})}Ae(oe,!0,function(){re(B)})}w(Q,function(oe){g+=oe,D(oe,function(re){for(var B in re){var L,te,de=B.lastIndexOf(".");de>0?(L=B.substring(0,de),te=B.substring(de+1)):(L=B,te=M),u[L]||(u[L]={}),u[L][te]=re[B]}le&&le()})},J)}function A(Q,ce){Q&&(Q=Q.toLowerCase()),ce=ce||function(){},U(),P=Q;var le=x(),J=le.length;if(J===0){var ve=y();if(ve&&ve.locales&&ve.default_locale){if(console.log("using the embedded JSON directory, early way out"),u=ve.locales[Q],!u){var ae=ve.default_locale.toLowerCase();for(var D in ve.locales)if(D=D.toLowerCase(),D===Q){u=ve.locales[Q];break}else D===ae&&(u=ve.locales[ae])}ce()}else console.log("no resource to load, early way out");n="complete";return}var oe=null,re=0;oe=function(){re++,re>=J&&(ce(),n="complete")};function B(de){var pe=de.href;this.load=function(ie,Ae){o(pe,ie,Ae,function(){console.warn(pe+" not found."),console.warn('"'+ie+'" resource not found'),P="",Ae()})}}for(var L=0;L<J;L++){var te=new B(le[L]);te.load(Q,oe)}}function U(){u={},g="",P=""}function $(Q){var ce={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function le(D,oe){return oe.indexOf(D)!==-1}function J(D,oe,re){return oe<=D&&D<=re}var ve={0:function(D){return"other"},1:function(D){return J(D%100,3,10)?"few":D===0?"zero":J(D%100,11,99)?"many":D==2?"two":D==1?"one":"other"},2:function(D){return D!==0&&D%10===0?"many":D==2?"two":D==1?"one":"other"},3:function(D){return D==1?"one":"other"},4:function(D){return J(D,0,1)?"one":"other"},5:function(D){return J(D,0,2)&&D!=2?"one":"other"},6:function(D){return D===0?"zero":D%10==1&&D%100!=11?"one":"other"},7:function(D){return D==2?"two":D==1?"one":"other"},8:function(D){return J(D,3,6)?"few":J(D,7,10)?"many":D==2?"two":D==1?"one":"other"},9:function(D){return D===0||D!=1&&J(D%100,1,19)?"few":D==1?"one":"other"},10:function(D){return J(D%10,2,9)&&!J(D%100,11,19)?"few":D%10==1&&!J(D%100,11,19)?"one":"other"},11:function(D){return J(D%10,2,4)&&!J(D%100,12,14)?"few":D%10===0||J(D%10,5,9)||J(D%100,11,14)?"many":D%10==1&&D%100!=11?"one":"other"},12:function(D){return J(D,2,4)?"few":D==1?"one":"other"},13:function(D){return J(D%10,2,4)&&!J(D%100,12,14)?"few":D!=1&&J(D%10,0,1)||J(D%10,5,9)||J(D%100,12,14)?"many":D==1?"one":"other"},14:function(D){return J(D%100,3,4)?"few":D%100==2?"two":D%100==1?"one":"other"},15:function(D){return D===0||J(D%100,2,10)?"few":J(D%100,11,19)?"many":D==1?"one":"other"},16:function(D){return D%10==1&&D!=11?"one":"other"},17:function(D){return D==3?"few":D===0?"zero":D==6?"many":D==2?"two":D==1?"one":"other"},18:function(D){return D===0?"zero":J(D,0,2)&&D!==0&&D!=2?"one":"other"},19:function(D){return J(D,2,10)?"few":J(D,0,1)?"one":"other"},20:function(D){return(J(D%10,3,4)||D%10==9)&&!(J(D%100,10,19)||J(D%100,70,79)||J(D%100,90,99))?"few":D%1e6===0&&D!==0?"many":D%10==2&&!le(D%100,[12,72,92])?"two":D%10==1&&!le(D%100,[11,71,91])?"one":"other"},21:function(D){return D===0?"zero":D==1?"one":"other"},22:function(D){return J(D,0,1)||J(D,11,99)?"one":"other"},23:function(D){return J(D%10,1,2)||D%20===0?"one":"other"},24:function(D){return J(D,3,10)||J(D,13,19)?"few":le(D,[2,12])?"two":le(D,[1,11])?"one":"other"}},ae=ce[Q.replace(/-.*$/,"")];return ae in ve?ve[ae]:(console.warn("plural form unknown for ["+Q+"]"),function(){return"other"})}b.plural=function(Q,ce,le,J){var ve=parseFloat(ce);if(isNaN(ve)||J!=M)return Q;b._pluralRules||(b._pluralRules=$(P));var ae="["+b._pluralRules(ve)+"]";return ve===0&&le+"[zero]"in u?Q=u[le+"[zero]"][J]:ve==1&&le+"[one]"in u?Q=u[le+"[one]"][J]:ve==2&&le+"[two]"in u?Q=u[le+"[two]"][J]:le+ae in u?Q=u[le+ae][J]:le+"[other]"in u&&(Q=u[le+"[other]"][J]),Q};function V(Q,ce,le){var J=u[Q];if(!J){if(console.warn("#"+Q+" is undefined."),!le)return null;J=le}var ve={};for(var ae in J){var D=J[ae];D=H(D,ce,Q,ae),D=Y(D,ce,Q),ve[ae]=D}return ve}function H(Q,ce,le,J){var ve=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,ae=ve.exec(Q);if(!ae||!ae.length)return Q;var D=ae[1],oe=ae[2],re;if(ce&&oe in ce?re=ce[oe]:oe in u&&(re=u[oe]),D in b){var B=b[D];Q=B(Q,re,le,J)}return Q}function Y(Q,ce,le){var J=/\{\{\s*(.+?)\s*\}\}/g;return Q.replace(J,function(ve,ae){return ce&&ae in ce?ce[ae]:ae in u?u[ae]:(console.log("argument {{"+ae+"}} for #"+le+" is undefined."),ve)})}function ue(Q){var ce=N(Q);if(ce.id){var le=V(ce.id,ce.args);if(!le){console.warn("#"+ce.id+" is undefined.");return}if(le[M]){if(se(Q)===0)Q[M]=le[M];else{for(var J=Q.childNodes,ve=!1,ae=0,D=J.length;ae<D;ae++)J[ae].nodeType===3&&/\S/.test(J[ae].nodeValue)&&(ve?J[ae].nodeValue="":(J[ae].nodeValue=le[M],ve=!0));if(!ve){var oe=S.createTextNode(le[M]);Q.prepend(oe)}}delete le[M]}for(var re in le)Q[re]=le[re]}}function se(Q){if(Q.children)return Q.children.length;if(typeof Q.childElementCount<"u")return Q.childElementCount;for(var ce=0,le=0;le<Q.childNodes.length;le++)ce+=Q.nodeType===1?1:0;return ce}function ne(Q){Q=Q||S.documentElement;for(var ce=j(Q),le=ce.length,J=0;J<le;J++)ue(ce[J]);ue(Q)}return{get:function(Q,ce,le){var J=Q.lastIndexOf("."),ve=M;J>0&&(ve=Q.substring(J+1),Q=Q.substring(0,J));var ae;le&&(ae={},ae[ve]=le);var D=V(Q,ce,ae);return D&&ve in D?D[ve]:"{{"+Q+"}}"},getData:function(){return u},getText:function(){return g},getLanguage:function(){return P},setLanguage:function(Q,ce){A(Q,function(){ce&&ce()})},getDirection:function(){var Q=["ar","he","fa","ps","ur"],ce=P.split("-",1)[0];return Q.indexOf(ce)>=0?"rtl":"ltr"},translate:ne,getReadyState:function(){return n},ready:function(Q){if(Q)n=="complete"||n=="interactive"?F.setTimeout(function(){Q()}):S.addEventListener&&S.addEventListener("localized",function ce(){S.removeEventListener("localized",ce),Q()});else return}}}(window,document)},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.PDFFindController=S.FindState=void 0;var u=C(2),g=C(4),M=C(11);function P(_e,he){n(_e,he),he.add(_e)}function b(_e,he,ke){n(_e,he),he.set(_e,ke)}function n(_e,he){if(he.has(_e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(_e,he){var ke=N(_e,he,"get");return x(_e,ke)}function x(_e,he){return he.get?he.get.call(_e):he.value}function y(_e,he,ke){if(!he.has(_e))throw new TypeError("attempted to get private field on non-instance");return ke}function j(_e,he,ke){var Ve=N(_e,he,"set");return w(_e,Ve,ke),ke}function N(_e,he,ke){if(!he.has(_e))throw new TypeError("attempted to "+ke+" private field on non-instance");return he.get(_e)}function w(_e,he,ke){if(he.set)he.set.call(_e,ke);else{if(!he.writable)throw new TypeError("attempted to set read only private field");he.value=ke}}const o={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};S.FindState=o;const A=250,U=-50,$=-400,V={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},H=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let Y;const ue=new RegExp("\\p{M}+","gu"),se=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),ne=new RegExp("([^\\p{M}])\\p{M}*$","u"),Q=new RegExp("^\\p{M}*([^\\p{M}])","u"),ce=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,le=new Map,J="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",ve=new Map;let ae=null,D=null;function oe(_e){const he=[];let ke;for(;(ke=ce.exec(_e))!==null;){let{index:Pt}=ke;for(const xt of ke[0]){let wt=le.get(xt);wt||(wt=xt.normalize("NFD").length,le.set(xt,wt)),he.push([wt,Pt++])}}let Ve;if(he.length===0&&ae)Ve=ae;else if(he.length>0&&D)Ve=D;else{const Pt=`([${Object.keys(V).join("")}])|([①-⑳Ⓐ-⓿㉄-㊿㋐-㋾＀-￯])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;he.length===0?Ve=ae=new RegExp(Pt+"|(\\u0000)","gum"):Ve=D=new RegExp(Pt+`|(${J})`,"gum")}const ze=[];for(;(ke=ue.exec(_e))!==null;)ze.push([ke[0].length,ke.index]);let Ke=_e.normalize("NFD");const et=[[0,0]];let st=0,ct=0,it=0,dt=0,pt=0,mt=!1;return Ke=Ke.replace(Ve,(Pt,xt,wt,Rt,yt,Lt,Ft,Dt,Nt,vt)=>{var Ut;if(vt-=dt,xt){const kt=V[xt],Tt=kt.length;for(let It=1;It<Tt;It++)et.push([vt-it+It,it-It]);return it-=Tt-1,kt}if(wt){let kt=ve.get(wt);kt||(kt=wt.normalize("NFKC"),ve.set(wt,kt));const Tt=kt.length;for(let It=1;It<Tt;It++)et.push([vt-it+It,it-It]);return it-=Tt-1,kt}if(Rt){var Ht;return mt=!0,vt+pt===((Ht=ze[st])===null||Ht===void 0?void 0:Ht[1])?++st:(et.push([vt-1-it+1,it-1]),it-=1,dt+=1),et.push([vt-it+1,it]),dt+=1,pt+=1,Rt.charAt(0)}if(yt){var Xt;const kt=yt.endsWith(`
`),Tt=kt?yt.length-2:yt.length;mt=!0;let It=Tt;vt+pt===((Xt=ze[st])===null||Xt===void 0?void 0:Xt[1])&&(It-=ze[st][0],++st);for(let ir=1;ir<=It;ir++)et.push([vt-1-it+ir,it-ir]);return it-=It,dt+=It,kt?(vt+=Tt-1,et.push([vt-it+1,1+it]),it+=1,dt+=1,pt+=1,yt.slice(0,Tt)):yt}if(Lt)return et.push([vt-it+1,1+it]),it+=1,dt+=1,pt+=1,Lt.charAt(0);if(Ft)return et.push([vt-it+1,it]),dt+=1,pt+=1,Ft.charAt(0);if(Dt)return et.push([vt-it+1,it-1]),it-=1,dt+=1,pt+=1," ";if(vt+pt===((Ut=he[ct])===null||Ut===void 0?void 0:Ut[1])){const kt=he[ct][0]-1;++ct;for(let Tt=1;Tt<=kt;Tt++)et.push([vt-(it-Tt),it-Tt]);it-=kt,dt+=kt}return Nt}),et.push([Ke.length,it]),[Ke,et,mt]}function re(_e,he,ke){if(!_e)return[he,ke];const Ve=he,ze=he+ke;let Ke=(0,u.binarySearchFirstItem)(_e,st=>st[0]>=Ve);_e[Ke][0]>Ve&&--Ke;let et=(0,u.binarySearchFirstItem)(_e,st=>st[0]>=ze,Ke);return _e[et][0]>ze&&--et,[Ve+_e[Ke][1],ke+_e[et][1]-_e[Ke][1]]}var B=new WeakMap,L=new WeakMap,te=new WeakSet,de=new WeakSet,pe=new WeakMap,ie=new WeakSet,Ae=new WeakSet,Ce=new WeakSet,Te=new WeakSet,Me=new WeakSet,Ne=new WeakSet,xe=new WeakSet,q=new WeakSet,X=new WeakSet,G=new WeakSet,K=new WeakSet,me=new WeakSet,Se=new WeakSet,fe=new WeakSet,ge=new WeakSet,Re=new WeakSet,Ee=new WeakSet;class Ie{constructor(he){let{linkService:ke,eventBus:Ve,updateMatchesCountOnProgress:ze=!0}=he;P(this,Ee),P(this,Re),P(this,ge),P(this,fe),P(this,Se),P(this,me),P(this,K),P(this,G),P(this,X),P(this,q),P(this,xe),P(this,Ne),P(this,Me),P(this,Te),P(this,Ce),P(this,Ae),P(this,ie),b(this,pe,{get:Ge,set:void 0}),P(this,de),P(this,te),b(this,B,{writable:!0,value:!0}),b(this,L,{writable:!0,value:0}),this._linkService=ke,this._eventBus=Ve,j(this,B,ze),y(this,de,Be).call(this),Ve._on("find",y(this,te,je).bind(this)),Ve._on("findbarclose",y(this,fe,We).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(he){this._pdfDocument&&y(this,de,Be).call(this),he&&(this._pdfDocument=he,this._firstPageCapability.resolve())}scrollMatchIntoView(he){let{element:ke=null,selectedLeft:Ve=0,pageIndex:ze=-1,matchIndex:Ke=-1}=he;if(!this._scrollMatches||!ke||Ke===-1||Ke!==this._selected.matchIdx||ze===-1||ze!==this._selected.pageIdx)return;this._scrollMatches=!1;const et={top:U,left:Ve+$};(0,u.scrollIntoView)(ke,et,!0)}}S.PDFFindController=Ie;function je(_e){if(!_e)return;const he=this._pdfDocument,{type:ke}=_e;(this._state===null||y(this,ie,at).call(this,_e))&&(this._dirtyMatch=!0),this._state=_e,ke!=="highlightallchange"&&y(this,Ee,lt).call(this,o.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||he&&this._pdfDocument!==he)return;y(this,Ne,Pe).call(this);const Ve=!this._highlightMatches,ze=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),ke?this._dirtyMatch?y(this,X,Ze).call(this):ke==="again"?(y(this,X,Ze).call(this),Ve&&this._state.highlightAll&&y(this,q,Qe).call(this)):ke==="highlightallchange"?(ze?y(this,X,Ze).call(this):this._highlightMatches=!0,y(this,q,Qe).call(this)):y(this,X,Ze).call(this):this._findTimeout=setTimeout(()=>{y(this,X,Ze).call(this),this._findTimeout=null},A)})}function Be(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],j(this,L,0),this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,g.createPromiseCapability)()}function Ge(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=oe(this._state.query)),this._normalizedQuery}function at(_e){if(_e.query!==this._state.query)return!0;switch(_e.type){case"again":const he=this._selected.pageIdx+1,ke=this._linkService;return he>=1&&he<=ke.pagesCount&&he!==ke.page&&!ke.isPageVisible(he);case"highlightallchange":return!1}return!0}function tt(_e,he,ke){let Ve=_e.slice(0,he).match(ne);if(Ve){const ze=_e.charCodeAt(he),Ke=Ve[1].charCodeAt(0);if((0,M.getCharacterType)(ze)===(0,M.getCharacterType)(Ke))return!1}if(Ve=_e.slice(he+ke).match(Q),Ve){const ze=_e.charCodeAt(he+ke-1),Ke=Ve[1].charCodeAt(0);if((0,M.getCharacterType)(ze)===(0,M.getCharacterType)(Ke))return!1}return!0}function be(_e,he,ke,Ve){const ze=this._pageMatches[ke]=[],Ke=this._pageMatchesLength[ke]=[];if(!_e)return;const et=this._pageDiffs[ke];let st;for(;(st=_e.exec(Ve))!==null;){if(he&&!y(this,Ae,tt).call(this,Ve,st.index,st[0].length))continue;const[ct,it]=re(et,st.index,st[0].length);it&&(ze.push(ct),Ke.push(it))}}function z(_e,he){const{matchDiacritics:ke}=this._state;let Ve=!1;_e=_e.replace(se,(Ke,et,st,ct,it,dt)=>et?`[ ]*\\${et}[ ]*`:st?`[ ]*${st}[ ]*`:ct?"[ ]+":ke?it||dt:it?H.has(it.charCodeAt(0))?it:"":he?(Ve=!0,`${dt}\\p{M}*`):dt);const ze="[ ]*";return _e.endsWith(ze)&&(_e=_e.slice(0,_e.length-ze.length)),ke&&he&&(Y||(Y=String.fromCharCode(...H)),Ve=!0,_e=`${_e}(?=[${Y}]|[^\\p{M}]|$)`),[Ve,_e]}function ee(_e){var he;let ke=h(this,pe);if(!ke)return;const{caseSensitive:Ve,entireWord:ze,phraseSearch:Ke}=this._state,et=this._pageContents[_e],st=this._hasDiacritics[_e];let ct=!1;if(Ke)[ct,ke]=y(this,Te,z).call(this,ke,st);else{const pt=ke.match(/\S+/g);pt&&(ke=pt.sort().reverse().map(mt=>{const[Pt,xt]=y(this,Te,z).call(this,mt,st);return ct||(ct=Pt),`(${xt})`}).join("|"))}const it=`g${ct?"u":""}${Ve?"":"i"}`;ke=ke?new RegExp(ke,it):null,y(this,Ce,be).call(this,ke,ze,_e,et),this._state.highlightAll&&y(this,xe,qe).call(this,_e),this._resumePageIdx===_e&&(this._resumePageIdx=null,y(this,K,Xe).call(this));const dt=this._pageMatches[_e].length;this._matchesCountTotal+=dt,h(this,B)?dt>0&&y(this,Re,$e).call(this):j(this,L,(he=h(this,L),++he))===this._linkService.pagesCount&&y(this,Re,$e).call(this)}function Pe(){if(this._extractTextPromises.length>0)return;let _e=Promise.resolve();for(let he=0,ke=this._linkService.pagesCount;he<ke;he++){const Ve=(0,g.createPromiseCapability)();this._extractTextPromises[he]=Ve.promise,_e=_e.then(()=>this._pdfDocument.getPage(he+1).then(ze=>ze.getTextContent()).then(ze=>{const Ke=[];for(const et of ze.items)Ke.push(et.str),et.hasEOL&&Ke.push(`
`);[this._pageContents[he],this._pageDiffs[he],this._hasDiacritics[he]]=oe(Ke.join("")),Ve.resolve()},ze=>{console.error(`Unable to get text content for page ${he+1}`,ze),this._pageContents[he]="",this._pageDiffs[he]=null,this._hasDiacritics[he]=!1,Ve.resolve()}))}}function qe(_e){this._scrollMatches&&this._selected.pageIdx===_e&&(this._linkService.page=_e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:_e})}function Qe(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function Ze(){const _e=this._state.findPrevious,he=this._linkService.page-1,ke=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=he,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,j(this,L,0),this._matchesCountTotal=0,y(this,q,Qe).call(this);for(let ze=0;ze<ke;ze++)this._pendingFindMatches.has(ze)||(this._pendingFindMatches.add(ze),this._extractTextPromises[ze].then(()=>{this._pendingFindMatches.delete(ze),y(this,Me,ee).call(this,ze)}))}if(!h(this,pe)){y(this,Ee,lt).call(this,o.FOUND);return}if(this._resumePageIdx)return;const Ve=this._offset;if(this._pagesToSearch=ke,Ve.matchIdx!==null){const ze=this._pageMatches[Ve.pageIdx].length;if(!_e&&Ve.matchIdx+1<ze||_e&&Ve.matchIdx>0){Ve.matchIdx=_e?Ve.matchIdx-1:Ve.matchIdx+1,y(this,Se,ye).call(this,!0);return}y(this,me,Oe).call(this,_e)}y(this,K,Xe).call(this)}function Le(_e){const he=this._offset,ke=_e.length,Ve=this._state.findPrevious;return ke?(he.matchIdx=Ve?ke-1:0,y(this,Se,ye).call(this,!0),!0):(y(this,me,Oe).call(this,Ve),he.wrapped&&(he.matchIdx=null,this._pagesToSearch<0)?(y(this,Se,ye).call(this,!1),!0):!1)}function Xe(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let _e=null;do{const he=this._offset.pageIdx;if(_e=this._pageMatches[he],!_e){this._resumePageIdx=he;break}}while(!y(this,G,Le).call(this,_e))}function Oe(_e){const he=this._offset,ke=this._linkService.pagesCount;he.pageIdx=_e?he.pageIdx-1:he.pageIdx+1,he.matchIdx=null,this._pagesToSearch--,(he.pageIdx>=ke||he.pageIdx<0)&&(he.pageIdx=_e?ke-1:0,he.wrapped=!0)}function ye(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,he=o.NOT_FOUND;const ke=this._offset.wrapped;if(this._offset.wrapped=!1,_e){const Ve=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,he=ke?o.WRAPPED:o.FOUND,Ve!==-1&&Ve!==this._selected.pageIdx&&y(this,xe,qe).call(this,Ve)}y(this,Ee,lt).call(this,he,this._state.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,y(this,xe,qe).call(this,this._selected.pageIdx))}function We(_e){const he=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||he&&this._pdfDocument!==he||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),y(this,Ee,lt).call(this,o.FOUND),this._highlightMatches=!1,y(this,q,Qe).call(this))})}function Je(){const{pageIdx:_e,matchIdx:he}=this._selected;let ke=0,Ve=this._matchesCountTotal;if(he!==-1){for(let Ke=0;Ke<_e;Ke++){var ze;ke+=((ze=this._pageMatches[Ke])===null||ze===void 0?void 0:ze.length)||0}ke+=he+1}return(ke<1||ke>Ve)&&(ke=Ve=0),{current:ke,total:Ve}}function $e(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:y(this,ge,Je).call(this)})}function lt(_e){var he;let ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;!h(this,B)&&(h(this,L)!==this._linkService.pagesCount||_e===o.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:_e,previous:ke,matchesCount:y(this,ge,Je).call(this),rawQuery:((he=this._state)===null||he===void 0?void 0:he.query)??null})}},(F,S)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.CharacterType=void 0,S.getCharacterType=N;const C={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};S.CharacterType=C;function u(w){return w<11904}function g(w){return(w&65408)===0}function M(w){return w>=97&&w<=122||w>=65&&w<=90}function P(w){return w>=48&&w<=57}function b(w){return w===32||w===9||w===13||w===10}function n(w){return w>=13312&&w<=40959||w>=63744&&w<=64255}function h(w){return w>=12448&&w<=12543}function x(w){return w>=12352&&w<=12447}function y(w){return w>=65376&&w<=65439}function j(w){return(w&65408)===3584}function N(w){return u(w)?g(w)?b(w)?C.SPACE:M(w)||P(w)||w===95?C.ALPHA_LETTER:C.PUNCT:j(w)?C.THAI_LETTER:w===160?C.SPACE:C.ALPHA_LETTER:n(w)?C.HAN_LETTER:h(w)?C.KATAKANA_LETTER:x(w)?C.HIRAGANA_LETTER:y(w)?C.HALFWIDTH_KATAKANA_LETTER:C.ALPHA_LETTER}},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.PDFHistory=void 0,S.isDestArraysEqual=y,S.isDestHashesEqual=x;var u=C(2),g=C(7);const M=1e3,P=50,b=1e3;function n(){return document.location.hash}class h{constructor(N){let{linkService:w,eventBus:o}=N;this.linkService=w,this.eventBus=o,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",A=>{this._isPagesLoaded=!!A.pagesCount},{once:!0})})}initialize(N){let{fingerprint:w,resetHistory:o=!1,updateUrl:A=!1}=N;if(!w||typeof w!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const U=this._fingerprint!==""&&this._fingerprint!==w;this._fingerprint=w,this._updateUrl=A===!0,this._initialized=!0,this._bindEvents();const $=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=n(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState($,!0)||o){const{hash:H,page:Y,rotation:ue}=this._parseCurrentHash(!0);if(!H||U||o){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:H,page:Y,rotation:ue},!0);return}const V=$.destination;this._updateInternalState(V,$.uid,!0),V.rotation!==void 0&&(this._initialRotation=V.rotation),V.dest?(this._initialBookmark=JSON.stringify(V.dest),this._destination.page=null):V.hash?this._initialBookmark=V.hash:V.page&&(this._initialBookmark=`page=${V.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push(N){let{namedDest:w=null,explicitDest:o,pageNumber:A}=N;if(!this._initialized)return;if(w&&typeof w!="string"){console.error(`PDFHistory.push: "${w}" is not a valid namedDest parameter.`);return}else if(Array.isArray(o)){if(!this._isValidPage(A)&&(A!==null||this._destination)){console.error(`PDFHistory.push: "${A}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${o}" is not a valid explicitDest parameter.`);return}const U=w||JSON.stringify(o);if(!U)return;let $=!1;if(this._destination&&(x(this._destination.hash,U)||y(this._destination.dest,o))){if(this._destination.page)return;$=!0}this._popStateInProgress&&!$||(this._pushOrReplaceState({dest:o,hash:U,page:A,rotation:this.linkService.rotation},$),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(N){var w;if(this._initialized){if(!this._isValidPage(N)){console.error(`PDFHistory.pushPage: "${N}" is not a valid page number.`);return}((w=this._destination)===null||w===void 0?void 0:w.page)!==N&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${N}`,page:N,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const N=window.history.state;this._isValidState(N)&&N.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const N=window.history.state;this._isValidState(N)&&N.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(N){const w=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)||!this._destination,o={fingerprint:this._fingerprint,uid:w?this._uid:this._uid+1,destination:N};this._updateInternalState(N,o.uid);let A;if(this._updateUrl&&N!==null&&N!==void 0&&N.hash){const U=document.location.href.split("#")[0];U.startsWith("file://")||(A=`${U}#${N.hash}`)}w?window.history.replaceState(o,"",A):window.history.pushState(o,"",A)}_tryPushCurrentPosition(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this._position)return;let w=this._position;if(N&&(w=Object.assign(Object.create(null),this._position),w.temporary=!0),!this._destination){this._pushOrReplaceState(w);return}if(this._destination.temporary){this._pushOrReplaceState(w,!0);return}if(this._destination.hash===w.hash||!this._destination.page&&this._numPositionUpdates<=P)return;let o=!1;if(this._destination.page>=w.first&&this._destination.page<=w.page){if(this._destination.dest!==void 0||!this._destination.first)return;o=!0}this._pushOrReplaceState(w,o)}_isValidPage(N){return Number.isInteger(N)&&N>0&&N<=this.linkService.pagesCount}_isValidState(N){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!N)return!1;if(N.fingerprint!==this._fingerprint)if(w){if(typeof N.fingerprint!="string"||N.fingerprint.length!==this._fingerprint.length)return!1;const[o]=performance.getEntriesByType("navigation");if((o==null?void 0:o.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(N.uid)||N.uid<0||N.destination===null||typeof N.destination!="object")}_updateInternalState(N,w){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),o&&N!==null&&N!==void 0&&N.temporary&&delete N.temporary,this._destination=N,this._uid=w,this._maxUid=Math.max(this._maxUid,w),this._numPositionUpdates=0}_parseCurrentHash(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const w=unescape(n()).substring(1),o=(0,u.parseQueryString)(w),A=o.get("nameddest")||"";let U=o.get("page")|0;return(!this._isValidPage(U)||N&&A.length>0)&&(U=null),{hash:w,page:U,rotation:this.linkService.rotation}}_updateViewarea(N){let{location:w}=N;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:w.pdfOpenParams.substring(1),page:this.linkService.page,first:w.pageNumber,rotation:w.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},b))}_popState(N){let{state:w}=N;const o=n(),A=this._currentHash!==o;if(this._currentHash=o,!w){this._uid++;const{hash:$,page:V,rotation:H}=this._parseCurrentHash();this._pushOrReplaceState({hash:$,page:V,rotation:H},!0);return}if(!this._isValidState(w))return;this._popStateInProgress=!0,A&&(this._blockHashChange++,(0,g.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:M}).then(()=>{this._blockHashChange--}));const U=w.destination;this._updateInternalState(U,w.uid,!0),(0,u.isValidRotation)(U.rotation)&&(this.linkService.rotation=U.rotation),U.dest?this.linkService.goToDestination(U.dest):U.hash?this.linkService.setHash(U.hash):U.page&&(this.linkService.page=U.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}S.PDFHistory=h;function x(j,N){return typeof j!="string"||typeof N!="string"?!1:j===N||(0,u.parseQueryString)(j).get("nameddest")===N}function y(j,N){function w(o,A){if(typeof o!=typeof A||Array.isArray(o)||Array.isArray(A))return!1;if(o!==null&&typeof o=="object"&&A!==null){if(Object.keys(o).length!==Object.keys(A).length)return!1;for(const U in o)if(!w(o[U],A[U]))return!1;return!0}return o===A||Number.isNaN(o)&&Number.isNaN(A)}if(!(Array.isArray(j)&&Array.isArray(N))||j.length!==N.length)return!1;for(let o=0,A=j.length;o<A;o++)if(!w(j[o],N[o]))return!1;return!0}},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.PDFPageView=void 0;var u=C(4),g=C(2),M=C(14),P=C(3),b=C(15),n=C(5),h=C(1),x=C(16),y=C(17),j=C(18),N=C(19),w=C(20);function o(X,G){U(X,G),G.add(X)}function A(X,G,K){U(X,G),G.set(X,K)}function U(X,G){if(G.has(X))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $(X,G){var K=ue(X,G,"get");return V(X,K)}function V(X,G){return G.get?G.get.call(X):G.value}function H(X,G,K){if(!G.has(X))throw new TypeError("attempted to get private field on non-instance");return K}function Y(X,G,K){var me=ue(X,G,"set");return se(X,me,K),K}function ue(X,G,K){if(!G.has(X))throw new TypeError("attempted to "+K+" private field on non-instance");return G.get(X)}function se(X,G,K){if(G.set)G.set.call(X,K);else{if(!G.writable)throw new TypeError("attempted to set read only private field");G.value=K}}const ne=b.compatibilityParams.maxCanvasPixels||16777216,Q=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new h.SimpleLinkService}});var ce=new WeakMap,le=new WeakMap,J=new WeakMap,ve=new WeakMap,ae=new WeakMap,D=new WeakMap,oe=new WeakSet,re=new WeakSet,B=new WeakSet,L=new WeakSet,te=new WeakSet,de=new WeakSet,pe=new WeakSet;class ie{constructor(G){var K;o(this,pe),o(this,de),o(this,te),o(this,L),o(this,B),o(this,re),o(this,oe),A(this,ce,{writable:!0,value:u.AnnotationMode.ENABLE_FORMS}),A(this,le,{writable:!0,value:null}),A(this,J,{writable:!0,value:null}),A(this,ve,{writable:!0,value:null}),A(this,ae,{writable:!0,value:g.RenderingStates.INITIAL}),A(this,D,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});const me=G.container,Se=G.defaultViewport;this.id=G.id,this.renderingId="page"+this.id,Y(this,le,G.layerProperties||Q),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=G.scale||g.DEFAULT_SCALE,this.viewport=Se,this.pdfPageRotate=Se.rotation,this._optionalContentConfigPromise=G.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=G.textLayerMode??g.TextLayerMode.ENABLE,Y(this,ce,G.annotationMode??u.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=G.imageResourcesPath||"",this.useOnlyCssZoom=G.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=G.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=G.maxCanvasPixels||ne,this.pageColors=G.pageColors||null,this.eventBus=G.eventBus,this.renderingQueue=G.renderingQueue,this.renderer=G.renderer||g.RendererType.CANVAS,this.l10n=G.l10n||n.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.resume=null,this._renderError=null,this._isStandalone=!((K=this.renderingQueue)!==null&&K!==void 0&&K.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const fe=document.createElement("div");if(fe.className="page",fe.setAttribute("data-page-number",this.id),fe.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(ge=>{fe.setAttribute("aria-label",ge)}),this.div=fe,H(this,oe,Ae).call(this),me==null||me.append(fe),this._isStandalone){me==null||me.style.setProperty("--scale-factor",this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:ge}=G;ge&&ge.then(Re=>{ge===this._optionalContentConfigPromise&&($(this,D).initialOptionalContent=Re.hasInitialVisibility)})}}get renderingState(){return $(this,ae)}set renderingState(G){if(G!==$(this,ae))switch(Y(this,ae,G),$(this,J)&&(clearTimeout($(this,J)),Y(this,J,null)),G){case g.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case g.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),Y(this,J,setTimeout(()=>{this.div.classList.add("loading"),Y(this,J,null)},0));break;case g.RenderingStates.INITIAL:case g.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(G){this.pdfPage=G,this.pdfPageRotate=G.rotate;const K=(this.rotation+this.pdfPageRotate)%360;this.viewport=G.getViewport({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:K}),H(this,oe,Ae).call(this),this.reset()}destroy(){var G;this.reset(),(G=this.pdfPage)===null||G===void 0||G.cleanup()}get _textHighlighter(){return(0,u.shadow)(this,"_textHighlighter",new j.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:$(this,le).call(this).findController}))}_resetZoomLayer(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.zoomLayer)return;const K=this.zoomLayer.firstChild;this.paintedViewportMap.delete(K),K.width=0,K.height=0,G&&this.zoomLayer.remove(),this.zoomLayer=null}reset(){var G,K,me,Se,fe;let{keepZoomLayer:ge=!1,keepAnnotationLayer:Re=!1,keepAnnotationEditorLayer:Ee=!1,keepXfaLayer:Ie=!1,keepTextLayer:je=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.cancelRendering({keepAnnotationLayer:Re,keepAnnotationEditorLayer:Ee,keepXfaLayer:Ie,keepTextLayer:je}),this.renderingState=g.RenderingStates.INITIAL;const Be=this.div,Ge=Be.childNodes,at=ge&&this.zoomLayer||null,tt=Re&&((G=this.annotationLayer)===null||G===void 0?void 0:G.div)||null,be=Ee&&((K=this.annotationEditorLayer)===null||K===void 0?void 0:K.div)||null,z=Ie&&((me=this.xfaLayer)===null||me===void 0?void 0:me.div)||null,ee=je&&((Se=this.textLayer)===null||Se===void 0?void 0:Se.div)||null;for(let Pe=Ge.length-1;Pe>=0;Pe--){const qe=Ge[Pe];switch(qe){case at:case tt:case be:case z:case ee:continue}qe.remove()}Be.removeAttribute("data-loaded"),tt&&this.annotationLayer.hide(),be&&this.annotationEditorLayer.hide(),z&&this.xfaLayer.hide(),ee&&this.textLayer.hide(),(fe=this.structTreeLayer)===null||fe===void 0||fe.hide(),at||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg)}update(G){let{scale:K=0,rotation:me=null,optionalContentConfigPromise:Se=null,drawingDelay:fe=-1}=G;this.scale=K||this.scale,typeof me=="number"&&(this.rotation=me),Se instanceof Promise&&(this._optionalContentConfigPromise=Se,Se.then(je=>{Se===this._optionalContentConfigPromise&&($(this,D).initialOptionalContent=je.hasInitialVisibility)}));const ge=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:ge}),H(this,oe,Ae).call(this),this._isStandalone){var Re;(Re=this.div.parentNode)===null||Re===void 0||Re.style.setProperty("--scale-factor",this.viewport.scale)}if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}let Ee=!1;if(this.canvas&&this.maxCanvasPixels>0){const je=this.outputScale;(Math.floor(this.viewport.width)*je.sx|0)*(Math.floor(this.viewport.height)*je.sy|0)>this.maxCanvasPixels&&(Ee=!0)}const Ie=fe>=0&&fe<1e3;if(this.canvas){if(Ie||this.useOnlyCssZoom||this.hasRestrictedScaling&&Ee){Ie&&this.renderingState!==g.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:fe}),this.renderingState=g.RenderingStates.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!Ie,hideTextLayer:Ie}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering(){let{keepAnnotationLayer:G=!1,keepAnnotationEditorLayer:K=!1,keepXfaLayer:me=!1,keepTextLayer:Se=!1,cancelExtraDelay:fe=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.paintTask&&(this.paintTask.cancel(fe),this.paintTask=null),this.resume=null,this.textLayer&&(!Se||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!G||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!K||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!me||!this.xfaLayer.div)){var ge;this.xfaLayer.cancel(),this.xfaLayer=null,(ge=this._textHighlighter)===null||ge===void 0||ge.disable()}}cssTransform(G){let{target:K,redrawAnnotationLayer:me=!1,redrawAnnotationEditorLayer:Se=!1,redrawXfaLayer:fe=!1,redrawTextLayer:ge=!1,hideTextLayer:Re=!1}=G;if(K instanceof HTMLCanvasElement){if(!K.hasAttribute("zooming")){K.setAttribute("zooming",!0);const{style:je}=K;je.width=je.height=""}}else{const je=this.div,{width:Be,height:Ge}=this.viewport;K.style.width=K.parentNode.style.width=je.style.width=Math.floor(Be)+"px",K.style.height=K.parentNode.style.height=je.style.height=Math.floor(Ge)+"px"}const Ee=this.paintedViewportMap.get(K);if(this.viewport!==Ee){const je=this.viewport.rotation-Ee.rotation,Be=Math.abs(je);let Ge=1,at=1;if(Be===90||Be===270){const{width:tt,height:be}=this.viewport;Ge=be/tt,at=tt/be}Be!==0&&(K.style.transform=`rotate(${je}deg) scale(${Ge}, ${at})`)}if(me&&this.annotationLayer&&H(this,re,Ce).call(this),Se&&this.annotationEditorLayer&&H(this,B,Te).call(this),fe&&this.xfaLayer&&H(this,L,Me).call(this),this.textLayer)if(Re){var Ie;this.textLayer.hide(),(Ie=this.structTreeLayer)===null||Ie===void 0||Ie.hide()}else ge&&H(this,te,Ne).call(this)}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(G,K){return this.viewport.convertToPdfPoint(G,K)}draw(){var G=this;this.renderingState!==g.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:K,pdfPage:me}=this;if(!me)return this.renderingState=g.RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=g.RenderingStates.RUNNING;const Se=document.createElement("div");if(Se.classList.add("canvasWrapper"),K.append(Se),!this.textLayer&&this.textLayerMode!==g.TextLayerMode.DISABLE&&!me.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new y.TextAccessibilityManager),this.textLayer=new N.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),K.append(this.textLayer.div)),!this.annotationLayer&&$(this,ce)!==u.AnnotationMode.DISABLE){const{annotationStorage:Ie,downloadManager:je,enableScripting:Be,fieldObjectsPromise:Ge,hasJSActionsPromise:at,linkService:tt}=$(this,le).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new P.AnnotationLayerBuilder({pageDiv:K,pdfPage:me,annotationStorage:Ie,imageResourcesPath:this.imageResourcesPath,renderForms:$(this,ce)===u.AnnotationMode.ENABLE_FORMS,linkService:tt,downloadManager:je,l10n:this.l10n,enableScripting:Be,hasJSActionsPromise:at,fieldObjectsPromise:Ge,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}let fe=null;this.renderingQueue&&(fe=Ie=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=g.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=g.RenderingStates.RUNNING,Ie()};return}Ie()});const ge=async function(){let Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(Re===G.paintTask&&(G.paintTask=null),Ie instanceof u.RenderingCancelledException){G._renderError=null;return}if(G._renderError=Ie,G.renderingState=g.RenderingStates.FINISHED,G._resetZoomLayer(!0),$(G,D).regularAnnotations=!Re.separateAnnots,G.eventBus.dispatch("pagerendered",{source:G,pageNumber:G.id,cssTransform:!1,timestamp:performance.now(),error:G._renderError}),Ie)throw Ie},Re=this.renderer===g.RendererType.SVG?this.paintOnSvg(Se):this.paintOnCanvas(Se);Re.onRenderContinue=fe,this.paintTask=Re;const Ee=Re.promise.then(()=>ge(null).then(async()=>{if(H(this,te,Ne).call(this),this.annotationLayer&&await H(this,re,Ce).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:Ie}=$(this,le).call(this);if(!Ie)return;this.annotationEditorLayer=new M.AnnotationEditorLayerBuilder({uiManager:Ie,pageDiv:K,pdfPage:me,l10n:this.l10n,accessibilityManager:this._accessibilityManager})}H(this,B,Te).call(this)}),function(Ie){return ge(Ie)});if(me.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&K.append(this.xfaLayer.div);else{const{annotationStorage:Ie,linkService:je}=$(this,le).call(this);this.xfaLayer=new w.XfaLayerBuilder({pageDiv:K,pdfPage:me,annotationStorage:Ie,linkService:je})}H(this,L,Me).call(this)}return K.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Ee}paintOnCanvas(G){const K=(0,u.createPromiseCapability)(),me={promise:K.promise,onRenderContinue(Pe){Pe()},cancel(){let Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;ee.cancel(Pe)},get separateAnnots(){return ee.separateAnnots}},Se=this.viewport,{width:fe,height:ge}=Se,Re=document.createElement("canvas");Re.setAttribute("role","presentation"),Re.hidden=!0;let Ee=!0;const Ie=function(){Ee&&(Re.hidden=!1,Ee=!1)};G.append(Re),this.canvas=Re;const je=Re.getContext("2d",{alpha:!1}),Be=this.outputScale=new g.OutputScale;if(this.useOnlyCssZoom){const Pe=Se.clone({scale:u.PixelsPerInch.PDF_TO_CSS_UNITS});Be.sx*=Pe.width/fe,Be.sy*=Pe.height/ge}if(this.maxCanvasPixels>0){const Pe=fe*ge,qe=Math.sqrt(this.maxCanvasPixels/Pe);Be.sx>qe||Be.sy>qe?(Be.sx=qe,Be.sy=qe,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const Ge=(0,g.approximateFraction)(Be.sx),at=(0,g.approximateFraction)(Be.sy);Re.width=(0,g.roundToDivide)(Se.width*Be.sx,Ge[0]),Re.height=(0,g.roundToDivide)(Se.height*Be.sy,at[0]);const{style:tt}=Re;tt.width=(0,g.roundToDivide)(Se.width,Ge[1])+"px",tt.height=(0,g.roundToDivide)(Se.height,at[1])+"px",this.paintedViewportMap.set(Re,Se);const be=Be.scaled?[Be.sx,0,0,Be.sy,0,0]:null,z={canvasContext:je,transform:be,viewport:Se,annotationMode:$(this,ce),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},ee=this.pdfPage.render(z);return ee.onContinue=function(Pe){Ie(),me.onRenderContinue?me.onRenderContinue(Pe):Pe()},ee.promise.then(function(){Ie(),K.resolve()},function(Pe){Pe instanceof u.RenderingCancelledException||Ie(),K.reject(Pe)}),me}paintOnSvg(G){let K=!1;const me=()=>{if(K)throw new u.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},Se=this.pdfPage,fe=this.viewport.clone({scale:u.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:Se.getOperatorList({annotationMode:$(this,ce)}).then(ge=>(me(),new u.SVGGraphics(Se.commonObjs,Se.objs).getSVG(ge,fe).then(Re=>{me(),this.svg=Re,this.paintedViewportMap.set(Re,fe),Re.style.width=G.style.width,Re.style.height=G.style.height,this.renderingState=g.RenderingStates.FINISHED,G.append(Re)}))),onRenderContinue(ge){ge()},cancel(){K=!0},get separateAnnots(){return!1}}}setPageLabel(G){this.pageLabel=typeof G=="string"?G:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:G,regularAnnotations:K}=$(this,D);return G&&K?this.canvas:null}}S.PDFPageView=ie;function Ae(){const{viewport:X}=this;if(this.pdfPage){if($(this,ve)===X.rotation)return;Y(this,ve,X.rotation)}(0,u.setLayerDimensions)(this.div,X,!0,!1)}async function Ce(){let X=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(G){console.error(`#renderAnnotationLayer: "${G}".`),X=G}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:X})}}async function Te(){let X=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(G){console.error(`#renderAnnotationEditorLayer: "${G}".`),X=G}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:X})}}async function Me(){let X=null;try{const G=await this.xfaLayer.render(this.viewport,"display");G!=null&&G.textDivs&&this._textHighlighter&&H(this,pe,q).call(this,G.textDivs)}catch(G){console.error(`#renderXfaLayer: "${G}".`),X=G}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:X})}}async function Ne(){const{pdfPage:X,textLayer:G,viewport:K}=this;if(!G)return;let me=null;try{if(!G.renderingDone){const Se=X.streamTextContent({includeMarkedContent:!0});G.setTextContentSource(Se)}await G.render(K)}catch(Se){if(Se instanceof u.AbortException)return;console.error(`#renderTextLayer: "${Se}".`),me=Se}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:G.numTextDivs,error:me}),H(this,de,xe).call(this)}async function xe(){var X,G;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new x.StructTreeLayerBuilder);const K=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),me=(X=this.structTreeLayer)===null||X===void 0?void 0:X.render(K);if(me){var Se;(Se=this.canvas)===null||Se===void 0||Se.append(me)}(G=this.structTreeLayer)===null||G===void 0||G.show()}async function q(X){const G=await this.pdfPage.getTextContent(),K=[];for(const me of G.items)K.push(me.str);this._textHighlighter.setTextMapping(X,K),this._textHighlighter.enable()}},(F,S,C)=>{var u;Object.defineProperty(S,"__esModule",{value:!0}),S.AnnotationEditorLayerBuilder=void 0;var g=C(4),M=C(5);class P{constructor(n){nt(this,u,void 0),this.pageDiv=n.pageDiv,this.pdfPage=n.pdfPage,this.accessibilityManager=n.accessibilityManager,this.l10n=n.l10n||M.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,rt(this,u,n.uiManager)}async render(n){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"display";if(h!=="display"||this._cancelled)return;const x=n.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:x}),this.show();return}const y=this.div=document.createElement("div");y.className="annotationEditorLayer",y.tabIndex=0,y.hidden=!0,this.pageDiv.append(y),this.annotationEditorLayer=new g.AnnotationEditorLayer({uiManager:Ue(this,u),div:y,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:x});const j={viewport:x,div:y,annotations:null,intent:h};this.annotationEditorLayer.render(j),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}u=new WeakMap,S.AnnotationEditorLayerBuilder=P},(F,S)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.compatibilityParams=S.OptionKind=S.AppOptions=void 0;const C=Object.create(null);S.compatibilityParams=C;{const b=navigator.userAgent||"",n=navigator.platform||"",h=navigator.maxTouchPoints||1,x=/Android/.test(b),y=/\b(iPad|iPhone|iPod)(?=;)/.test(b)||n==="MacIntel"&&h>1;(function(){(y||x)&&(C.maxCanvasPixels=5242880)})()}const u={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};S.OptionKind=u;const g={annotationEditorMode:{value:0,kind:u.VIEWER+u.PREFERENCE},annotationMode:{value:2,kind:u.VIEWER+u.PREFERENCE},cursorToolOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},defaultZoomDelay:{value:400,kind:u.VIEWER+u.PREFERENCE},defaultZoomValue:{value:"",kind:u.VIEWER+u.PREFERENCE},disableHistory:{value:!1,kind:u.VIEWER},disablePageLabels:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePermissions:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableScripting:{value:!0,kind:u.VIEWER+u.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:u.VIEWER},externalLinkTarget:{value:0,kind:u.VIEWER+u.PREFERENCE},historyUpdateUrl:{value:!1,kind:u.VIEWER+u.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:u.VIEWER+u.PREFERENCE},imageResourcesPath:{value:"./images/",kind:u.VIEWER},maxCanvasPixels:{value:16777216,kind:u.VIEWER},forcePageColors:{value:!1,kind:u.VIEWER+u.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:u.VIEWER+u.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:u.VIEWER+u.PREFERENCE},pdfBugEnabled:{value:!1,kind:u.VIEWER+u.PREFERENCE},printResolution:{value:150,kind:u.VIEWER},sidebarViewOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},scrollModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},spreadModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},textLayerMode:{value:1,kind:u.VIEWER+u.PREFERENCE},useOnlyCssZoom:{value:!1,kind:u.VIEWER+u.PREFERENCE},viewerCssTheme:{value:0,kind:u.VIEWER+u.PREFERENCE},viewOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},cMapPacked:{value:!0,kind:u.API},cMapUrl:{value:"../web/cmaps/",kind:u.API},disableAutoFetch:{value:!1,kind:u.API+u.PREFERENCE},disableFontFace:{value:!1,kind:u.API+u.PREFERENCE},disableRange:{value:!1,kind:u.API+u.PREFERENCE},disableStream:{value:!1,kind:u.API+u.PREFERENCE},docBaseUrl:{value:"",kind:u.API},enableXfa:{value:!0,kind:u.API+u.PREFERENCE},fontExtraProperties:{value:!1,kind:u.API},isEvalSupported:{value:!0,kind:u.API},isOffscreenCanvasSupported:{value:!0,kind:u.API},maxImageSize:{value:-1,kind:u.API},pdfBug:{value:!1,kind:u.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:u.API},verbosity:{value:1,kind:u.API},workerPort:{value:null,kind:u.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:u.WORKER}};g.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:u.VIEWER},g.disablePreferences={value:!1,kind:u.VIEWER},g.locale={value:navigator.language||"en-US",kind:u.VIEWER},g.renderer={value:"canvas",kind:u.VIEWER+u.PREFERENCE},g.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:u.VIEWER};const M=Object.create(null);class P{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(n){const h=M[n];if(h!==void 0)return h;const x=g[n];if(x!==void 0)return C[n]??x.value}static getAll(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const h=Object.create(null);for(const x in g){const y=g[x];if(n){if(!(n&y.kind))continue;if(n===u.PREFERENCE){const N=y.value,w=typeof N;if(w==="boolean"||w==="string"||w==="number"&&Number.isInteger(N)){h[x]=N;continue}throw new Error(`Invalid type for preference: ${x}`)}}const j=M[x];h[x]=j!==void 0?j:C[x]??y.value}return h}static set(n,h){M[n]=h}static setAll(n){for(const h in n)M[h]=n[h]}static remove(n){delete M[n]}}S.AppOptions=P,P._hasUserOptions=function(){return Object.keys(M).length>0}},(F,S)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.StructTreeLayerBuilder=void 0;function C(V,H){g(V,H),H.add(V)}function u(V,H,Y){g(V,H),H.set(V,Y)}function g(V,H){if(H.has(V))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(V,H,Y){var ue=h(V,H,"set");return P(V,ue,Y),Y}function P(V,H,Y){if(H.set)H.set.call(V,Y);else{if(!H.writable)throw new TypeError("attempted to set read only private field");H.value=Y}}function b(V,H,Y){if(!H.has(V))throw new TypeError("attempted to get private field on non-instance");return Y}function n(V,H){var Y=h(V,H,"get");return x(V,Y)}function h(V,H,Y){if(!H.has(V))throw new TypeError("attempted to "+Y+" private field on non-instance");return H.get(V)}function x(V,H){return H.get?H.get.call(V):H.value}const y={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},j=/^H(\d+)$/;var N=new WeakMap,w=new WeakSet,o=new WeakSet;class A{constructor(){C(this,o),C(this,w),u(this,N,{writable:!0,value:void 0})}get renderingDone(){return n(this,N)!==void 0}render(H){if(n(this,N)!==void 0)return n(this,N);const Y=b(this,o,$).call(this,H);return Y==null||Y.classList.add("structTree"),M(this,N,Y)}hide(){n(this,N)&&!n(this,N).hidden&&(n(this,N).hidden=!0)}show(){var H;(H=n(this,N))!==null&&H!==void 0&&H.hidden&&(n(this,N).hidden=!1)}}S.StructTreeLayerBuilder=A;function U(V,H){V.alt!==void 0&&H.setAttribute("aria-label",V.alt),V.id!==void 0&&H.setAttribute("aria-owns",V.id),V.lang!==void 0&&H.setAttribute("lang",V.lang)}function $(V){if(!V)return null;const H=document.createElement("span");if("role"in V){const{role:Y}=V,ue=Y.match(j);ue?(H.setAttribute("role","heading"),H.setAttribute("aria-level",ue[1])):y[Y]&&H.setAttribute("role",y[Y])}if(b(this,w,U).call(this,V,H),V.children)if(V.children.length===1&&"id"in V.children[0])b(this,w,U).call(this,V.children[0],H);else for(const Y of V.children)H.append(b(this,o,$).call(this,Y));return H}},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.TextAccessibilityManager=void 0;var u=C(2);function g(se,ne){P(se,ne),ne.add(se)}function M(se,ne,Q){P(se,ne),ne.set(se,Q)}function P(se,ne){if(ne.has(se))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(se,ne,Q){if(!ne.has(se))throw new TypeError("attempted to get private field on non-instance");return Q}function n(se,ne,Q){return h(se,ne),Q}function h(se,ne){if(se!==ne)throw new TypeError("Private static access of wrong provenance")}function x(se,ne){var Q=N(se,ne,"get");return y(se,Q)}function y(se,ne){return ne.get?ne.get.call(se):ne.value}function j(se,ne,Q){var ce=N(se,ne,"set");return w(se,ce,Q),Q}function N(se,ne,Q){if(!ne.has(se))throw new TypeError("attempted to "+Q+" private field on non-instance");return ne.get(se)}function w(se,ne,Q){if(ne.set)ne.set.call(se,Q);else{if(!ne.writable)throw new TypeError("attempted to set read only private field");ne.value=Q}}var o=new WeakMap,A=new WeakMap,U=new WeakMap,$=new WeakMap,V=new WeakSet;class H{constructor(){g(this,V),M(this,o,{writable:!0,value:!1}),M(this,A,{writable:!0,value:null}),M(this,U,{writable:!0,value:new Map}),M(this,$,{writable:!0,value:new Map})}setTextMapping(ne){j(this,A,ne)}enable(){if(x(this,o))throw new Error("TextAccessibilityManager is already enabled.");if(!x(this,A))throw new Error("Text divs and strings have not been set.");if(j(this,o,!0),j(this,A,x(this,A).slice()),x(this,A).sort(n(H,H,Y)),x(this,U).size>0){const ne=x(this,A);for(const[Q,ce]of x(this,U)){if(!document.getElementById(Q)){x(this,U).delete(Q);continue}b(this,V,ue).call(this,Q,ne[ce])}}for(const[ne,Q]of x(this,$))this.addPointerInTextLayer(ne,Q);x(this,$).clear()}disable(){x(this,o)&&(x(this,$).clear(),j(this,A,null),j(this,o,!1))}removePointerInTextLayer(ne){var Q;if(!x(this,o)){x(this,$).delete(ne);return}const ce=x(this,A);if(!ce||ce.length===0)return;const{id:le}=ne,J=x(this,U).get(le);if(J===void 0)return;const ve=ce[J];x(this,U).delete(le);let ae=ve.getAttribute("aria-owns");(Q=ae)!==null&&Q!==void 0&&Q.includes(le)&&(ae=ae.split(" ").filter(D=>D!==le).join(" "),ae?ve.setAttribute("aria-owns",ae):(ve.removeAttribute("aria-owns"),ve.setAttribute("role","presentation")))}addPointerInTextLayer(ne,Q){const{id:ce}=ne;if(!ce)return;if(!x(this,o)){x(this,$).set(ne,Q);return}Q&&this.removePointerInTextLayer(ne);const le=x(this,A);if(!le||le.length===0)return;const J=(0,u.binarySearchFirstItem)(le,ae=>n(H,H,Y).call(H,ne,ae)<0),ve=Math.max(0,J-1);b(this,V,ue).call(this,ce,le[ve]),x(this,U).set(ce,ve)}moveElementInDOM(ne,Q,ce,le){if(this.addPointerInTextLayer(ce,le),!ne.hasChildNodes()){ne.append(Q);return}const J=Array.from(ne.childNodes).filter(D=>D!==Q);if(J.length===0)return;const ve=ce||Q,ae=(0,u.binarySearchFirstItem)(J,D=>n(H,H,Y).call(H,ve,D)<0);ae===0?J[0].before(Q):J[ae-1].after(Q)}}S.TextAccessibilityManager=H;function Y(se,ne){const Q=se.getBoundingClientRect(),ce=ne.getBoundingClientRect();if(Q.width===0&&Q.height===0)return 1;if(ce.width===0&&ce.height===0)return-1;const le=Q.y,J=Q.y+Q.height,ve=Q.y+Q.height/2,ae=ce.y,D=ce.y+ce.height,oe=ce.y+ce.height/2;if(ve<=ae&&oe>=J)return-1;if(oe<=le&&ve>=D)return 1;const re=Q.x+Q.width/2,B=ce.x+ce.width/2;return re-B}function ue(se,ne){const Q=ne.getAttribute("aria-owns");Q!=null&&Q.includes(se)||ne.setAttribute("aria-owns",Q?`${Q} ${se}`:se),ne.removeAttribute("role")}},(F,S)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.TextHighlighter=void 0;class C{constructor(g){let{findController:M,eventBus:P,pageIndex:b}=g;this.findController=M,this.matches=[],this.eventBus=P,this.pageIdx=b,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(g,M){this.textDivs=g,this.textContentItemsStr=M}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=g=>{(g.pageIndex===this.pageIdx||g.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(g,M){if(!g)return[];const{textContentItemsStr:P}=this;let b=0,n=0;const h=P.length-1,x=[];for(let y=0,j=g.length;y<j;y++){let N=g[y];for(;b!==h&&N>=n+P[b].length;)n+=P[b].length,b++;b===P.length&&console.error("Could not find a matching mapping");const w={begin:{divIdx:b,offset:N-n}};for(N+=M[y];b!==h&&N>n+P[b].length;)n+=P[b].length,b++;w.end={divIdx:b,offset:N-n},x.push(w)}return x}_renderMatches(g){if(g.length===0)return;const{findController:M,pageIdx:P}=this,{textContentItemsStr:b,textDivs:n}=this,h=P===M.selected.pageIdx,x=M.selected.matchIdx,y=M.state.highlightAll;let j=null;const N={divIdx:-1,offset:void 0};function w($,V){const H=$.divIdx;return n[H].textContent="",o(H,0,$.offset,V)}function o($,V,H,Y){let ue=n[$];if(ue.nodeType===Node.TEXT_NODE){const Q=document.createElement("span");ue.before(Q),Q.append(ue),n[$]=Q,ue=Q}const se=b[$].substring(V,H),ne=document.createTextNode(se);if(Y){const Q=document.createElement("span");return Q.className=`${Y} appended`,Q.append(ne),ue.append(Q),Y.includes("selected")?Q.offsetLeft:0}return ue.append(ne),0}let A=x,U=A+1;if(y)A=0,U=g.length;else if(!h)return;for(let $=A;$<U;$++){const V=g[$],H=V.begin,Y=V.end,ue=h&&$===x,se=ue?" selected":"";let ne=0;if(!j||H.divIdx!==j.divIdx?(j!==null&&o(j.divIdx,j.offset,N.offset),w(H)):o(j.divIdx,j.offset,H.offset),H.divIdx===Y.divIdx)ne=o(H.divIdx,H.offset,Y.offset,"highlight"+se);else{ne=o(H.divIdx,H.offset,N.offset,"highlight begin"+se);for(let Q=H.divIdx+1,ce=Y.divIdx;Q<ce;Q++)n[Q].className="highlight middle"+se;w(Y,"highlight end"+se)}j=Y,ue&&M.scrollMatchIntoView({element:n[H.divIdx],selectedLeft:ne,pageIndex:P,matchIndex:x})}j&&o(j.divIdx,j.offset,N.offset)}_updateMatches(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.enabled&&!g)return;const{findController:M,matches:P,pageIdx:b}=this,{textContentItemsStr:n,textDivs:h}=this;let x=-1;for(const N of P){const w=Math.max(x,N.begin.divIdx);for(let o=w,A=N.end.divIdx;o<=A;o++){const U=h[o];U.textContent=n[o],U.className=""}x=N.end.divIdx+1}if(!(M!=null&&M.highlightMatches)||g)return;const y=M.pageMatches[b]||null,j=M.pageMatchesLength[b]||null;this.matches=this._convertMatches(y,j),this._renderMatches(this.matches)}}S.TextHighlighter=C},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.TextLayerBuilder=void 0;var u=C(4);function g(Y,ue){P(Y,ue),ue.add(Y)}function M(Y,ue,se){P(Y,ue),ue.set(Y,se)}function P(Y,ue){if(ue.has(Y))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(Y,ue,se){var ne=x(Y,ue,"set");return n(Y,ne,se),se}function n(Y,ue,se){if(ue.set)ue.set.call(Y,se);else{if(!ue.writable)throw new TypeError("attempted to set read only private field");ue.value=se}}function h(Y,ue){var se=x(Y,ue,"get");return y(Y,se)}function x(Y,ue,se){if(!ue.has(Y))throw new TypeError("attempted to "+se+" private field on non-instance");return ue.get(Y)}function y(Y,ue){return ue.get?ue.get.call(Y):ue.value}function j(Y,ue,se){if(!ue.has(Y))throw new TypeError("attempted to get private field on non-instance");return se}var N=new WeakMap,w=new WeakMap,o=new WeakMap,A=new WeakSet,U=new WeakSet;class ${constructor(ue){let{highlighter:se=null,accessibilityManager:ne=null,isOffscreenCanvasSupported:Q=!0}=ue;g(this,U),g(this,A),M(this,N,{writable:!0,value:0}),M(this,w,{writable:!0,value:0}),M(this,o,{writable:!0,value:null}),this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=se,this.accessibilityManager=ne,this.isOffscreenCanvasSupported=Q,this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(ue){var se,ne,Q;if(!h(this,o))throw new Error('No "textContentSource" parameter specified.');const ce=ue.scale*(globalThis.devicePixelRatio||1),{rotation:le}=ue;if(this.renderingDone){const J=le!==h(this,N),ve=ce!==h(this,w);(J||ve)&&(this.hide(),(0,u.updateTextLayer)({container:this.div,viewport:ue,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:ve,mustRotate:J}),b(this,w,ce),b(this,N,le)),this.show();return}this.cancel(),(se=this.highlighter)===null||se===void 0||se.setTextMapping(this.textDivs,this.textContentItemsStr),(ne=this.accessibilityManager)===null||ne===void 0||ne.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,u.renderTextLayer)({textContentSource:h(this,o),container:this.div,viewport:ue,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,j(this,A,V).call(this),b(this,w,ce),b(this,N,le),this.show(),(Q=this.accessibilityManager)===null||Q===void 0||Q.enable()}hide(){if(!this.div.hidden){var ue;(ue=this.highlighter)===null||ue===void 0||ue.disable(),this.div.hidden=!0}}show(){if(this.div.hidden&&this.renderingDone){var ue;this.div.hidden=!1,(ue=this.highlighter)===null||ue===void 0||ue.enable()}}cancel(){var ue,se;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(ue=this.highlighter)===null||ue===void 0||ue.disable(),(se=this.accessibilityManager)===null||se===void 0||se.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(ue){this.cancel(),b(this,o,ue)}}S.TextLayerBuilder=$;function V(){this.renderingDone=!0;const Y=document.createElement("div");Y.className="endOfContent",this.div.append(Y),j(this,U,H).call(this)}function H(){const{div:Y}=this;Y.addEventListener("mousedown",ue=>{const se=Y.querySelector(".endOfContent");if(!se)return;let ne=ue.target!==Y;if(ne&&(ne=getComputedStyle(se).getPropertyValue("-moz-user-select")!=="none"),ne){const Q=Y.getBoundingClientRect(),ce=Math.max(0,(ue.pageY-Q.top)/Q.height);se.style.top=(ce*100).toFixed(2)+"%"}se.classList.add("active")}),Y.addEventListener("mouseup",()=>{const ue=Y.querySelector(".endOfContent");ue&&(ue.style.top="",ue.classList.remove("active"))})}},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.XfaLayerBuilder=void 0;var u=C(4);class g{constructor(P){let{pageDiv:b,pdfPage:n,annotationStorage:h=null,linkService:x,xfaHtml:y=null}=P;this.pageDiv=b,this.pdfPage=n,this.annotationStorage=h,this.linkService=x,this.xfaHtml=y,this.div=null,this._cancelled=!1}async render(P){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"display";if(b==="print"){const x={viewport:P.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b},y=document.createElement("div");return this.pageDiv.append(y),x.div=y,u.XfaLayer.render(x)}const n=await this.pdfPage.getXfa();if(this._cancelled||!n)return{textDivs:[]};const h={viewport:P.clone({dontFlip:!0}),div:this.div,xfaHtml:n,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b};return this.div?u.XfaLayer.update(h):(this.div=document.createElement("div"),this.pageDiv.append(this.div),h.div=this.div,u.XfaLayer.render(h))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}S.XfaLayerBuilder=g},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.PDFScriptingManager=void 0;var u=C(2),g=C(4);class M{constructor(b){let{eventBus:n,sandboxBundleSrc:h=null,scriptingFactory:x=null,docPropertiesLookup:y=null}=b;this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._ready=!1,this._eventBus=n,this._sandboxBundleSrc=h,this._scriptingFactory=x,this._docPropertiesLookup=y,this._scriptingFactory||window.addEventListener("updatefromsandbox",j=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:j.detail})})}setViewer(b){this._pdfViewer=b}async setDocument(b){var n;if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=b,!b)return;const[h,x,y]=await Promise.all([b.getFieldObjects(),b.getCalculationOrderIds(),b.getJSActions()]);if(!h&&!y){await this._destroyScripting();return}if(b===this._pdfDocument){try{this._scripting=this._createScripting()}catch(j){console.error(`PDFScriptingManager.setDocument: "${j==null?void 0:j.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",j=>{(j==null?void 0:j.source)===window&&this._updateFromSandbox(j.detail)}),this._internalEvents.set("dispatcheventinsandbox",j=>{var N;(N=this._scripting)===null||N===void 0||N.dispatchEventInSandbox(j.detail)}),this._internalEvents.set("pagechanging",j=>{let{pageNumber:N,previous:w}=j;N!==w&&(this._dispatchPageClose(w),this._dispatchPageOpen(N))}),this._internalEvents.set("pagerendered",j=>{let{pageNumber:N}=j;this._pageOpenPending.has(N)&&N===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(N)}),this._internalEvents.set("pagesdestroy",async j=>{var N,w;await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await((N=this._scripting)===null||N===void 0?void 0:N.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(w=this._closeCapability)===null||w===void 0||w.resolve()});for(const[j,N]of this._internalEvents)this._eventBus._on(j,N);try{const j=await this._getDocProperties();if(b!==this._pdfDocument)return;await this._scripting.createSandbox({objects:h,calculationOrder:x,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...j,actions:y}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(j){console.error(`PDFScriptingManager.setDocument: "${j==null?void 0:j.message}".`),await this._destroyScripting();return}await((n=this._scripting)===null||n===void 0?void 0:n.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{b===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(b){var n;return(n=this._scripting)===null||n===void 0?void 0:n.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(b){var n;return(n=this._scripting)===null||n===void 0?void 0:n.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(b){var n;return(n=this._scripting)===null||n===void 0?void 0:n.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(b){var n;return(n=this._scripting)===null||n===void 0?void 0:n.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var b;return((b=this._destroyCapability)===null||b===void 0?void 0:b.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,g.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,g.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,g.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(b){const n=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:h,siblings:x,command:y,value:j}=b;if(!h){switch(y){case"clear":console.clear();break;case"error":console.error(j);break;case"layout":{if(n)return;const o=(0,u.apiPageLayoutToViewerModes)(j);this._pdfViewer.spreadMode=o.spreadMode;break}case"page-num":this._pdfViewer.currentPageNumber=j+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(j);break;case"zoom":if(n)return;this._pdfViewer.currentScaleValue=j;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(n)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(n)return;this._pdfViewer.decreaseScale();break}return}if(n&&b.focus)return;delete b.id,delete b.siblings;const N=x?[h,...x]:[h];for(const o of N){const A=document.querySelector(`[data-element-id="${o}"]`);if(A)A.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:b}));else{var w;(w=this._pdfDocument)===null||w===void 0||w.annotationStorage.setValue(o,b)}}}async _dispatchPageOpen(b){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const h=this._pdfDocument,x=this._visitedPages;if(n&&(this._closeCapability=(0,g.createPromiseCapability)()),!this._closeCapability)return;const y=this._pdfViewer.getPageView(b-1);if((y==null?void 0:y.renderingState)!==u.RenderingStates.FINISHED){this._pageOpenPending.add(b);return}this._pageOpenPending.delete(b);const j=(async()=>{var N,w;const o=await(x.has(b)?null:(N=y.pdfPage)===null||N===void 0?void 0:N.getJSActions());h===this._pdfDocument&&await((w=this._scripting)===null||w===void 0?void 0:w.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:b,actions:o}))})();x.set(b,j)}async _dispatchPageClose(b){var n;const h=this._pdfDocument,x=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(b))return;const y=x.get(b);y&&(x.set(b,null),await y,h===this._pdfDocument&&await((n=this._scripting)===null||n===void 0?void 0:n.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:b})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:b}=C(22);return b(this._pdfDocument)}_createScripting(){if(this._destroyCapability=(0,g.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:b}=C(22);return new b(this._sandboxBundleSrc)}async _destroyScripting(){var b;if(!this._scripting){var n;this._pdfDocument=null,(n=this._destroyCapability)===null||n===void 0||n.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(h=>{setTimeout(h,1e3)})]).catch(h=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[h,x]of this._internalEvents)this._eventBus._off(h,x);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,this._ready=!1,(b=this._destroyCapability)===null||b===void 0||b.resolve()}}S.PDFScriptingManager=M},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.GenericScripting=void 0,S.docPropertiesLookup=g;var u=C(4);async function g(P){const b="",n=b.split("#")[0];let{info:h,metadata:x,contentDispositionFilename:y,contentLength:j}=await P.getMetadata();if(!j){const{length:N}=await P.getDownloadInfo();j=N}return{...h,baseURL:n,filesize:j,filename:y||(0,u.getPdfFilenameFromUrl)(b),metadata:x==null?void 0:x.getRaw(),authors:x==null?void 0:x.get("dc:creator"),numPages:P.numPages,URL:b}}class M{constructor(b){this._ready=(0,u.loadScript)(b,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(b){(await this._ready).create(b)}async dispatchEventInSandbox(b){const n=await this._ready;setTimeout(()=>n.dispatchEvent(b),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}S.GenericScripting=M},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.PDFSinglePageViewer=void 0;var u=C(2),g=C(24);class M extends g.PDFViewer{_resetView(){super._resetView(),this._scrollMode=u.ScrollMode.PAGE,this._spreadMode=u.SpreadMode.NONE}set scrollMode(b){}_updateScrollMode(){}set spreadMode(b){}_updateSpreadMode(){}}S.PDFSinglePageViewer=M},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.PagesCountLimit=S.PDFViewer=S.PDFPageViewBuffer=void 0;var u=C(4),g=C(2),M=C(5),P=C(13),b=C(25),n=C(1);let h;function x(be,z){j(be,z),z.add(be)}function y(be,z,ee){j(be,z),z.set(be,ee)}function j(be,z){if(z.has(be))throw new TypeError("Cannot initialize the same private elements twice on an object")}function N(be,z,ee){if(!z.has(be))throw new TypeError("attempted to get private field on non-instance");return ee}function w(be,z){var ee=U(be,z,"get");return o(be,ee)}function o(be,z){return z.get?z.get.call(be):z.value}function A(be,z,ee){var Pe=U(be,z,"set");return $(be,Pe,ee),ee}function U(be,z,ee){if(!z.has(be))throw new TypeError("attempted to "+ee+" private field on non-instance");return z.get(be)}function $(be,z,ee){if(z.set)z.set.call(be,ee);else{if(!z.writable)throw new TypeError("attempted to set read only private field");z.value=ee}}const V=10,H="enablePermissions",Y={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};S.PagesCountLimit=Y;function ue(be){return Object.values(u.AnnotationEditorType).includes(be)&&be!==u.AnnotationEditorType.DISABLE}var se=new WeakMap,ne=new WeakMap,Q=new WeakSet;h=Symbol.iterator;class ce{constructor(z){x(this,Q),y(this,se,{writable:!0,value:new Set}),y(this,ne,{writable:!0,value:0}),A(this,ne,z)}push(z){const ee=w(this,se);ee.has(z)&&ee.delete(z),ee.add(z),ee.size>w(this,ne)&&N(this,Q,le).call(this)}resize(z){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;A(this,ne,z);const Pe=w(this,se);if(ee){const qe=Pe.size;let Qe=1;for(const Ze of Pe)if(ee.has(Ze.id)&&(Pe.delete(Ze),Pe.add(Ze)),++Qe>qe)break}for(;Pe.size>w(this,ne);)N(this,Q,le).call(this)}has(z){return w(this,se).has(z)}[h](){return w(this,se).keys()}}S.PDFPageViewBuffer=ce;function le(){const be=w(this,se).keys().next().value;be==null||be.destroy(),w(this,se).delete(be)}var J=new WeakMap,ve=new WeakMap,ae=new WeakMap,D=new WeakMap,oe=new WeakMap,re=new WeakMap,B=new WeakMap,L=new WeakMap,te=new WeakMap,de=new WeakMap,pe=new WeakMap,ie=new WeakSet,Ae=new WeakSet,Ce=new WeakSet,Te=new WeakSet,Me=new WeakSet,Ne=new WeakSet,xe=new WeakSet,q=new WeakSet,X=new WeakSet,G=new WeakSet,K=new WeakSet;class me{constructor(z){var ee,Pe;x(this,K),x(this,G),x(this,X),x(this,q),x(this,xe),x(this,Ne),x(this,Me),x(this,Te),x(this,Ce),x(this,Ae),x(this,ie),y(this,J,{writable:!0,value:null}),y(this,ve,{writable:!0,value:u.AnnotationEditorType.NONE}),y(this,ae,{writable:!0,value:null}),y(this,D,{writable:!0,value:u.AnnotationMode.ENABLE_FORMS}),y(this,oe,{writable:!0,value:null}),y(this,re,{writable:!0,value:!1}),y(this,B,{writable:!0,value:0}),y(this,L,{writable:!0,value:new ResizeObserver(N(this,K,tt).bind(this))}),y(this,te,{writable:!0,value:null}),y(this,de,{writable:!0,value:null}),y(this,pe,{writable:!0,value:null});const qe="3.4.120";if(u.version!==qe)throw new Error(`The API version "${u.version}" does not match the Viewer version "${qe}".`);if(this.container=z.container,this.viewer=z.viewer||z.container.firstElementChild,((ee=this.container)===null||ee===void 0?void 0:ee.tagName)!=="DIV"||((Pe=this.viewer)===null||Pe===void 0?void 0:Pe.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");w(this,L).observe(this.container),this.eventBus=z.eventBus,this.linkService=z.linkService||new n.SimpleLinkService,this.downloadManager=z.downloadManager||null,this.findController=z.findController||null,this._scriptingManager=z.scriptingManager||null,this.textLayerMode=z.textLayerMode??g.TextLayerMode.ENABLE,A(this,D,z.annotationMode??u.AnnotationMode.ENABLE_FORMS),A(this,ve,z.annotationEditorMode??u.AnnotationEditorType.NONE),this.imageResourcesPath=z.imageResourcesPath||"",this.enablePrintAutoRotate=z.enablePrintAutoRotate||!1,this.removePageBorders=z.removePageBorders||!1,this.renderer=z.renderer||g.RendererType.CANVAS,this.useOnlyCssZoom=z.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=z.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=z.maxCanvasPixels,this.l10n=z.l10n||M.NullL10n,A(this,re,z.enablePermissions||!1),this.pageColors=z.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!z.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new b.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=z.renderingQueue,this.scroll=(0,g.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=g.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),N(this,G,at).call(this)}get pagesCount(){return this._pages.length}getPageView(z){return this._pages[z]}get pageViewsReady(){return this._pagesCapability.settled?this._pages.every(function(z){return z==null?void 0:z.pdfPage}):!1}get renderForms(){return w(this,D)===u.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(z){if(!Number.isInteger(z))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(z,!0)||console.error(`currentPageNumber: "${z}" is not a valid page.`))}_setCurrentPageNumber(z){var ee;let Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this._currentPageNumber===z)return Pe&&N(this,xe,je).call(this),!0;if(!(0<z&&z<=this.pagesCount))return!1;const qe=this._currentPageNumber;return this._currentPageNumber=z,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:z,pageLabel:((ee=this._pageLabels)===null||ee===void 0?void 0:ee[z-1])??null,previous:qe}),Pe&&N(this,xe,je).call(this),!0}get currentPageLabel(){var z;return((z=this._pageLabels)===null||z===void 0?void 0:z[this._currentPageNumber-1])??null}set currentPageLabel(z){if(!this.pdfDocument)return;let ee=z|0;if(this._pageLabels){const Pe=this._pageLabels.indexOf(z);Pe>=0&&(ee=Pe+1)}this._setCurrentPageNumber(ee,!0)||console.error(`currentPageLabel: "${z}" is not a valid page.`)}get currentScale(){return this._currentScale!==g.UNKNOWN_SCALE?this._currentScale:g.DEFAULT_SCALE}set currentScale(z){if(isNaN(z))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(z,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(z){this.pdfDocument&&this._setScale(z,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(z){if(!(0,g.isValidRotation)(z))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(z%=360,z<0&&(z+=360),this._pagesRotation===z))return;this._pagesRotation=z;const ee=this._currentPageNumber;this.refresh(!0,{rotation:z}),this._currentScaleValue&&this._setScale(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:z,pageNumber:ee}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(z){if(this.pdfDocument){var ee,Pe;this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(ee=this.findController)===null||ee===void 0||ee.setDocument(null),(Pe=this._scriptingManager)===null||Pe===void 0||Pe.setDocument(null),w(this,ae)&&(w(this,ae).destroy(),A(this,ae,null))}if(this.pdfDocument=z,!z)return;const qe=z.numPages,Qe=z.getPage(1),Ze=z.getOptionalContentConfig(),Le=w(this,re)?z.getPermissions():Promise.resolve();if(qe>Y.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const Xe=this._scrollMode=g.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:Xe})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:qe})},()=>{}),this._onBeforeDraw=Xe=>{const Oe=this._pages[Xe.pageNumber-1];Oe&&w(this,J).push(Oe)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=Xe=>{Xe.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:Xe.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,w(this,de)&&(document.removeEventListener("visibilitychange",w(this,de)),A(this,de,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([Qe,Le]).then(Xe=>{let[Oe,ye]=Xe;if(z!==this.pdfDocument)return;this._firstPageCapability.resolve(Oe),this._optionalContentConfigPromise=Ze;const{annotationEditorMode:We,annotationMode:Je,textLayerMode:$e}=N(this,Ae,fe).call(this,ye);if(We!==u.AnnotationEditorType.DISABLE){const ze=We;z.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):ue(ze)?(A(this,ae,new u.AnnotationEditorUIManager(this.container,this.eventBus,z==null?void 0:z.annotationStorage)),ze!==u.AnnotationEditorType.NONE&&w(this,ae).updateMode(ze)):console.error(`Invalid AnnotationEditor mode: ${ze}`)}const lt=N(this,ie,Se).bind(this),_e=this._scrollMode===g.ScrollMode.PAGE?null:this.viewer,he=this.currentScale,ke=Oe.getViewport({scale:he*u.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",ke.scale);for(let ze=1;ze<=qe;++ze){const Ke=new P.PDFPageView({container:_e,eventBus:this.eventBus,id:ze,scale:he,defaultViewport:ke.clone(),optionalContentConfigPromise:Ze,renderingQueue:this.renderingQueue,textLayerMode:$e,annotationMode:Je,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:lt});this._pages.push(Ke)}const Ve=this._pages[0];Ve&&(Ve.setPdfPage(Oe),this.linkService.cachePageRef(1,Oe.ref)),this._scrollMode===g.ScrollMode.PAGE?N(this,Te,Re).call(this):this._spreadMode!==g.SpreadMode.NONE&&this._updateSpreadMode(),N(this,Ce,ge).call(this).then(async()=>{var ze,Ke;if((ze=this.findController)===null||ze===void 0||ze.setDocument(z),(Ke=this._scriptingManager)===null||Ke===void 0||Ke.setDocument(z),w(this,ae)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:w(this,ve)}),z.loadingParams.disableAutoFetch||qe>Y.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let et=qe-1;if(et<=0){this._pagesCapability.resolve();return}for(let st=2;st<=qe;++st){const ct=z.getPage(st).then(it=>{const dt=this._pages[st-1];dt.pdfPage||dt.setPdfPage(it),this.linkService.cachePageRef(st,it.ref),--et===0&&this._pagesCapability.resolve()},it=>{console.error(`Unable to get page ${st} to initialize viewer`,it),--et===0&&this._pagesCapability.resolve()});st%Y.PAUSE_EAGER_PAGE_INIT===0&&await ct}}),this.eventBus.dispatch("pagesinit",{source:this}),z.getMetadata().then(ze=>{let{info:Ke}=ze;z===this.pdfDocument&&Ke.Language&&(this.viewer.lang=Ke.Language)}),this.defaultRenderingQueue&&this.update()}).catch(Xe=>{console.error("Unable to initialize viewer",Xe),this._pagesCapability.reject(Xe)})}setPageLabels(z){if(this.pdfDocument){z?Array.isArray(z)&&this.pdfDocument.numPages===z.length?this._pageLabels=z:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let Pe=0,qe=this._pages.length;Pe<qe;Pe++){var ee;this._pages[Pe].setPageLabel(((ee=this._pageLabels)===null||ee===void 0?void 0:ee[Pe])??null)}}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=g.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,A(this,J,new ce(V)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,u.createPromiseCapability)(),this._onePageRenderedCapability=(0,u.createPromiseCapability)(),this._pagesCapability=(0,u.createPromiseCapability)(),this._scrollMode=g.ScrollMode.VERTICAL,this._previousScrollMode=g.ScrollMode.UNKNOWN,this._spreadMode=g.SpreadMode.NONE,A(this,te,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),w(this,de)&&(document.removeEventListener("visibilitychange",w(this,de)),A(this,de,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(H)}_scrollUpdate(){this.pagesCount!==0&&this.update()}_setScaleUpdatePages(z,ee,Pe){let{noScroll:qe=!1,preset:Qe=!1,drawingDelay:Ze=-1}=Pe;if(this._currentScaleValue=ee.toString(),N(this,Ne,Ie).call(this,z)){Qe&&this.eventBus.dispatch("scalechanging",{source:this,scale:z,presetValue:ee});return}this.viewer.style.setProperty("--scale-factor",z*u.PixelsPerInch.PDF_TO_CSS_UNITS);const Le=Ze>=0&&Ze<1e3;if(this.refresh(!0,{scale:z,drawingDelay:Le?Ze:-1}),Le&&A(this,pe,setTimeout(()=>{A(this,pe,null),this.refresh()},Ze)),this._currentScale=z,!qe){let Xe=this._currentPageNumber,Oe;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(Xe=this._location.pageNumber,Oe=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:Xe,destArray:Oe,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:z,presetValue:Qe?ee:void 0}),this.defaultRenderingQueue&&this.update()}get _pageWidthScaleFactor(){return this._spreadMode!==g.SpreadMode.NONE&&this._scrollMode!==g.ScrollMode.HORIZONTAL?2:1}_setScale(z,ee){let Pe=parseFloat(z);if(Pe>0)ee.preset=!1,this._setScaleUpdatePages(Pe,z,ee);else{const qe=this._pages[this._currentPageNumber-1];if(!qe)return;let Qe=g.SCROLLBAR_PADDING,Ze=g.VERTICAL_PADDING;this.isInPresentationMode?(Qe=Ze=4,this._spreadMode!==g.SpreadMode.NONE&&(Qe*=2)):this.removePageBorders?Qe=Ze=0:this._scrollMode===g.ScrollMode.HORIZONTAL&&([Qe,Ze]=[Ze,Qe]);const Le=(this.container.clientWidth-Qe)/qe.width*qe.scale/this._pageWidthScaleFactor,Xe=(this.container.clientHeight-Ze)/qe.height*qe.scale;switch(z){case"page-actual":Pe=1;break;case"page-width":Pe=Le;break;case"page-height":Pe=Xe;break;case"page-fit":Pe=Math.min(Le,Xe);break;case"auto":const Oe=(0,g.isPortraitOrientation)(qe)?Le:Math.min(Xe,Le);Pe=Math.min(g.MAX_AUTO_SCALE,Oe);break;default:console.error(`_setScale: "${z}" is an unknown zoom value.`);return}ee.preset=!0,this._setScaleUpdatePages(Pe,z,ee)}}pageLabelToPageNumber(z){if(!this._pageLabels)return null;const ee=this._pageLabels.indexOf(z);return ee<0?null:ee+1}scrollPageIntoView(z){let{pageNumber:ee,destArray:Pe=null,allowNegativeOffset:qe=!1,ignoreDestinationZoom:Qe=!1}=z;if(!this.pdfDocument)return;const Ze=Number.isInteger(ee)&&this._pages[ee-1];if(!Ze){console.error(`scrollPageIntoView: "${ee}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!Pe){this._setCurrentPageNumber(ee,!0);return}let Le=0,Xe=0,Oe=0,ye=0,We,Je;const $e=Ze.rotation%180!==0,lt=($e?Ze.height:Ze.width)/Ze.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS,_e=($e?Ze.width:Ze.height)/Ze.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS;let he=0;switch(Pe[1].name){case"XYZ":Le=Pe[2],Xe=Pe[3],he=Pe[4],Le=Le!==null?Le:0,Xe=Xe!==null?Xe:_e;break;case"Fit":case"FitB":he="page-fit";break;case"FitH":case"FitBH":Xe=Pe[2],he="page-width",Xe===null&&this._location?(Le=this._location.left,Xe=this._location.top):(typeof Xe!="number"||Xe<0)&&(Xe=_e);break;case"FitV":case"FitBV":Le=Pe[2],Oe=lt,ye=_e,he="page-height";break;case"FitR":Le=Pe[2],Xe=Pe[3],Oe=Pe[4]-Le,ye=Pe[5]-Xe;let Ke=g.SCROLLBAR_PADDING,et=g.VERTICAL_PADDING;this.removePageBorders&&(Ke=et=0),We=(this.container.clientWidth-Ke)/Oe/u.PixelsPerInch.PDF_TO_CSS_UNITS,Je=(this.container.clientHeight-et)/ye/u.PixelsPerInch.PDF_TO_CSS_UNITS,he=Math.min(Math.abs(We),Math.abs(Je));break;default:console.error(`scrollPageIntoView: "${Pe[1].name}" is not a valid destination type.`);return}if(Qe||(he&&he!==this._currentScale?this.currentScaleValue=he:this._currentScale===g.UNKNOWN_SCALE&&(this.currentScaleValue=g.DEFAULT_SCALE_VALUE)),he==="page-fit"&&!Pe[4]){N(this,Me,Ee).call(this,Ze);return}const ke=[Ze.viewport.convertToViewportPoint(Le,Xe),Ze.viewport.convertToViewportPoint(Le+Oe,Xe+ye)];let Ve=Math.min(ke[0][0],ke[1][0]),ze=Math.min(ke[0][1],ke[1][1]);qe||(Ve=Math.max(Ve,0),ze=Math.max(ze,0)),N(this,Me,Ee).call(this,Ze,{left:Ve,top:ze})}_updateLocation(z){const ee=this._currentScale,Pe=this._currentScaleValue,qe=parseFloat(Pe)===ee?Math.round(ee*1e4)/100:Pe,Qe=z.id,Ze=this._pages[Qe-1],Le=this.container,Xe=Ze.getPagePoint(Le.scrollLeft-z.x,Le.scrollTop-z.y),Oe=Math.round(Xe[0]),ye=Math.round(Xe[1]);let We=`#page=${Qe}`;this.isInPresentationMode||(We+=`&zoom=${qe},${Oe},${ye}`),this._location={pageNumber:Qe,scale:qe,top:ye,left:Oe,rotation:this._pagesRotation,pdfOpenParams:We}}update(){const z=this._getVisiblePages(),ee=z.views,Pe=ee.length;if(Pe===0)return;const qe=Math.max(V,2*Pe+1);w(this,J).resize(qe,z.ids),this.renderingQueue.renderHighestPriority(z);const Qe=this._spreadMode===g.SpreadMode.NONE&&(this._scrollMode===g.ScrollMode.PAGE||this._scrollMode===g.ScrollMode.VERTICAL),Ze=this._currentPageNumber;let Le=!1;for(const Xe of ee){if(Xe.percent<100)break;if(Xe.id===Ze&&Qe){Le=!0;break}}this._setCurrentPageNumber(Le?Ze:ee[0].id),this._updateLocation(z.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(z){return this.container.contains(z)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===g.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===g.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const z=this._scrollMode===g.ScrollMode.PAGE?w(this,te).pages:this._pages,ee=this._scrollMode===g.ScrollMode.HORIZONTAL,Pe=ee&&this._isContainerRtl;return(0,g.getVisibleElements)({scrollEl:this.container,views:z,sortByVisibility:!0,horizontal:ee,rtl:Pe})}isPageVisible(z){return this.pdfDocument?Number.isInteger(z)&&z>0&&z<=this.pagesCount?this._getVisiblePages().ids.has(z):(console.error(`isPageVisible: "${z}" is not a valid page.`),!1):!1}isPageCached(z){if(!this.pdfDocument)return!1;if(!(Number.isInteger(z)&&z>0&&z<=this.pagesCount))return console.error(`isPageCached: "${z}" is not a valid page.`),!1;const ee=this._pages[z-1];return w(this,J).has(ee)}cleanup(){for(const z of this._pages)z.renderingState!==g.RenderingStates.FINISHED&&z.reset()}_cancelRendering(){for(const z of this._pages)z.cancelRendering()}forceRendering(z){const ee=z||this._getVisiblePages(),Pe=N(this,X,Ge).call(this,ee),qe=this._spreadMode!==g.SpreadMode.NONE&&this._scrollMode!==g.ScrollMode.HORIZONTAL,Qe=this.renderingQueue.getHighestPriority(ee,this._pages,Pe,qe);return Qe?(N(this,q,Be).call(this,Qe).then(()=>{this.renderingQueue.renderView(Qe)}),!0):!1}get hasEqualPageSizes(){const z=this._pages[0];for(let ee=1,Pe=this._pages.length;ee<Pe;++ee){const qe=this._pages[ee];if(qe.width!==z.width||qe.height!==z.height)return!1}return!0}getPagesOverview(){return this._pages.map(z=>{const ee=z.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,g.isPortraitOrientation)(ee)?{width:ee.width,height:ee.height,rotation:ee.rotation}:{width:ee.height,height:ee.width,rotation:(ee.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(z){if(!(z instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${z}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=z,this.refresh(!1,{optionalContentConfigPromise:z}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:z}))}get scrollMode(){return this._scrollMode}set scrollMode(z){if(this._scrollMode!==z){if(!(0,g.isValidScrollMode)(z))throw new Error(`Invalid scroll mode: ${z}`);this.pagesCount>Y.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=z,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:z}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const ee=this._scrollMode,Pe=this.viewer;Pe.classList.toggle("scrollHorizontal",ee===g.ScrollMode.HORIZONTAL),Pe.classList.toggle("scrollWrapped",ee===g.ScrollMode.WRAPPED),!(!this.pdfDocument||!z)&&(ee===g.ScrollMode.PAGE?N(this,Te,Re).call(this):this._previousScrollMode===g.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(z,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(z){if(this._spreadMode!==z){if(!(0,g.isValidSpreadMode)(z))throw new Error(`Invalid spread mode: ${z}`);this._spreadMode=z,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:z}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!this.pdfDocument)return;const ee=this.viewer,Pe=this._pages;if(this._scrollMode===g.ScrollMode.PAGE)N(this,Te,Re).call(this);else if(ee.textContent="",this._spreadMode===g.SpreadMode.NONE)for(const qe of this._pages)ee.append(qe.div);else{const qe=this._spreadMode-1;let Qe=null;for(let Ze=0,Le=Pe.length;Ze<Le;++Ze)Qe===null?(Qe=document.createElement("div"),Qe.className="spread",ee.append(Qe)):Ze%2===qe&&(Qe=Qe.cloneNode(!1),ee.append(Qe)),Qe.append(Pe[Ze].div)}z&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(z,!0),this.update())}_getPageAdvance(z){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(this._scrollMode){case g.ScrollMode.WRAPPED:{const{views:Pe}=this._getVisiblePages(),qe=new Map;for(const{id:Qe,y:Ze,percent:Le,widthPercent:Xe}of Pe){if(Le===0||Xe<100)continue;let Oe=qe.get(Ze);Oe||qe.set(Ze,Oe||(Oe=[])),Oe.push(Qe)}for(const Qe of qe.values()){const Ze=Qe.indexOf(z);if(Ze===-1)continue;const Le=Qe.length;if(Le===1)break;if(ee)for(let Xe=Ze-1,Oe=0;Xe>=Oe;Xe--){const ye=Qe[Xe],We=Qe[Xe+1]-1;if(ye<We)return z-We}else for(let Xe=Ze+1,Oe=Le;Xe<Oe;Xe++){const ye=Qe[Xe],We=Qe[Xe-1]+1;if(ye>We)return We-z}if(ee){const Xe=Qe[0];if(Xe<z)return z-Xe+1}else{const Xe=Qe[Le-1];if(Xe>z)return Xe-z+1}break}break}case g.ScrollMode.HORIZONTAL:break;case g.ScrollMode.PAGE:case g.ScrollMode.VERTICAL:{if(this._spreadMode===g.SpreadMode.NONE)break;const Pe=this._spreadMode-1;if(ee&&z%2!==Pe||!ee&&z%2===Pe)break;const{views:qe}=this._getVisiblePages(),Qe=ee?z-1:z+1;for(const{id:Ze,percent:Le,widthPercent:Xe}of qe)if(Ze===Qe){if(Le>0&&Xe===100)return 2;break}break}}return 1}nextPage(){const z=this._currentPageNumber,ee=this.pagesCount;if(z>=ee)return!1;const Pe=this._getPageAdvance(z,!1)||1;return this.currentPageNumber=Math.min(z+Pe,ee),!0}previousPage(){const z=this._currentPageNumber;if(z<=1)return!1;const ee=this._getPageAdvance(z,!0)||1;return this.currentPageNumber=Math.max(z-ee,1),!0}increaseScale(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof z=="number"&&(console.error("The `increaseScale` method-signature was updated, please use an object instead."),z={steps:z}),!this.pdfDocument)return;z||(z=Object.create(null));let ee=this._currentScale;if(z.scaleFactor>1)ee=Math.min(g.MAX_SCALE,Math.round(ee*z.scaleFactor*100)/100);else{let Pe=z.steps??1;do ee=(ee*g.DEFAULT_SCALE_DELTA).toFixed(2),ee=Math.ceil(ee*10)/10,ee=Math.min(g.MAX_SCALE,ee);while(--Pe>0&&ee<g.MAX_SCALE)}z.noScroll=!1,this._setScale(ee,z)}decreaseScale(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof z=="number"&&(console.error("The `decreaseScale` method-signature was updated, please use an object instead."),z={steps:z}),!this.pdfDocument)return;z||(z=Object.create(null));let ee=this._currentScale;if(z.scaleFactor>0&&z.scaleFactor<1)ee=Math.max(g.MIN_SCALE,Math.round(ee*z.scaleFactor*100)/100);else{let Pe=z.steps??1;do ee=(ee/g.DEFAULT_SCALE_DELTA).toFixed(2),ee=Math.floor(ee*10)/10,ee=Math.max(g.MIN_SCALE,ee);while(--Pe>0&&ee>g.MIN_SCALE)}z.noScroll=!1,this._setScale(ee,z)}get containerTopLeft(){return w(this,oe)||A(this,oe,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return w(this,ae)?w(this,ve):u.AnnotationEditorType.DISABLE}set annotationEditorMode(z){if(!w(this,ae))throw new Error("The AnnotationEditor is not enabled.");if(w(this,ve)!==z){if(!ue(z))throw new Error(`Invalid AnnotationEditor mode: ${z}`);this.pdfDocument&&(A(this,ve,z),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:z}),w(this,ae).updateMode(z))}}set annotationEditorParams(z){let{type:ee,value:Pe}=z;if(!w(this,ae))throw new Error("The AnnotationEditor is not enabled.");w(this,ae).updateParams(ee,Pe)}refresh(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object.create(null);if(this.pdfDocument){for(const Pe of this._pages)Pe.update(ee);w(this,pe)!==null&&(clearTimeout(w(this,pe)),A(this,pe,null)),z||this.update()}}}S.PDFViewer=me;function Se(){const be=this;return{get annotationEditorUIManager(){return w(be,ae)},get annotationStorage(){var z;return(z=be.pdfDocument)===null||z===void 0?void 0:z.annotationStorage},get downloadManager(){return be.downloadManager},get enableScripting(){return!!be._scriptingManager},get fieldObjectsPromise(){var z;return(z=be.pdfDocument)===null||z===void 0?void 0:z.getFieldObjects()},get findController(){return be.findController},get hasJSActionsPromise(){var z;return(z=be.pdfDocument)===null||z===void 0?void 0:z.hasJSActions()},get linkService(){return be.linkService}}}function fe(be){const z={annotationEditorMode:w(this,ve),annotationMode:w(this,D),textLayerMode:this.textLayerMode};return be&&(be.includes(u.PermissionFlag.COPY)||this.viewer.classList.add(H),be.includes(u.PermissionFlag.MODIFY_CONTENTS)||(z.annotationEditorMode=u.AnnotationEditorType.DISABLE),!be.includes(u.PermissionFlag.MODIFY_ANNOTATIONS)&&!be.includes(u.PermissionFlag.FILL_INTERACTIVE_FORMS)&&w(this,D)===u.AnnotationMode.ENABLE_FORMS&&(z.annotationMode=u.AnnotationMode.ENABLE)),z}function ge(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const be=new Promise(z=>{A(this,de,()=>{document.visibilityState==="hidden"&&(z(),document.removeEventListener("visibilitychange",w(this,de)),A(this,de,null))}),document.addEventListener("visibilitychange",w(this,de))});return Promise.race([this._onePageRenderedCapability.promise,be])}function Re(){if(this._scrollMode!==g.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const be=this._currentPageNumber,z=w(this,te),ee=this.viewer;if(ee.textContent="",z.pages.length=0,this._spreadMode===g.SpreadMode.NONE&&!this.isInPresentationMode){const Pe=this._pages[be-1];ee.append(Pe.div),z.pages.push(Pe)}else{const Pe=new Set,qe=this._spreadMode-1;qe===-1?Pe.add(be-1):be%2!==qe?(Pe.add(be-1),Pe.add(be)):(Pe.add(be-2),Pe.add(be-1));const Qe=document.createElement("div");if(Qe.className="spread",this.isInPresentationMode){const Ze=document.createElement("div");Ze.className="dummyPage",Qe.append(Ze)}for(const Ze of Pe){const Le=this._pages[Ze];Le&&(Qe.append(Le.div),z.pages.push(Le))}ee.append(Qe)}z.scrollDown=be>=z.previousPageNumber,z.previousPageNumber=be}function Ee(be){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const{div:ee,id:Pe}=be;if(this._currentPageNumber!==Pe&&this._setCurrentPageNumber(Pe),this._scrollMode===g.ScrollMode.PAGE&&(N(this,Te,Re).call(this),this.update()),!z&&!this.isInPresentationMode){const qe=ee.offsetLeft+ee.clientLeft,Qe=qe+ee.clientWidth,{scrollLeft:Ze,clientWidth:Le}=this.container;(this._scrollMode===g.ScrollMode.HORIZONTAL||qe<Ze||Qe>Ze+Le)&&(z={left:0,top:0})}(0,g.scrollIntoView)(ee,z),!this._currentScaleValue&&this._location&&(this._location=null)}function Ie(be){return be===this._currentScale||Math.abs(be-this._currentScale)<1e-15}function je(){const be=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,{noScroll:!0}),N(this,Me,Ee).call(this,be)}async function Be(be){if(be.pdfPage)return be.pdfPage;try{var z,ee;const Pe=await this.pdfDocument.getPage(be.id);return be.pdfPage||be.setPdfPage(Pe),(z=(ee=this.linkService)._cachedPageNumber)!==null&&z!==void 0&&z.call(ee,Pe.ref)||this.linkService.cachePageRef(be.id,Pe.ref),Pe}catch(Pe){return console.error("Unable to get page for page view",Pe),null}}function Ge(be){var z,ee;if(((z=be.first)===null||z===void 0?void 0:z.id)===1)return!0;if(((ee=be.last)===null||ee===void 0?void 0:ee.id)===this.pagesCount)return!1;switch(this._scrollMode){case g.ScrollMode.PAGE:return w(this,te).scrollDown;case g.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function at(){let be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container.clientHeight;be!==w(this,B)&&(A(this,B,be),g.docStyle.setProperty("--viewer-container-height",`${be}px`))}function tt(be){for(const z of be)if(z.target===this.container){N(this,G,at).call(this,Math.floor(z.borderBoxSize[0].blockSize)),A(this,oe,null);break}}},(F,S,C)=>{Object.defineProperty(S,"__esModule",{value:!0}),S.PDFRenderingQueue=void 0;var u=C(4),g=C(2);const M=3e4;class P{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(n){this.pdfViewer=n}setThumbnailViewer(n){this.pdfThumbnailViewer=n}isHighestPriority(n){return this.highestPriorityPage===n.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(n){var h;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(n)&&(this.isThumbnailViewEnabled&&(h=this.pdfThumbnailViewer)!==null&&h!==void 0&&h.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),M)))}getHighestPriority(n,h,x){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const j=n.views,N=j.length;if(N===0)return null;for(let $=0;$<N;$++){const V=j[$].view;if(!this.isViewFinished(V))return V}const w=n.first.id,o=n.last.id;if(o-w+1>N){const $=n.ids;for(let V=1,H=o-w;V<H;V++){const Y=x?w+V:o-V;if($.has(Y))continue;const ue=h[Y-1];if(!this.isViewFinished(ue))return ue}}let A=x?o:w-2,U=h[A];return U&&!this.isViewFinished(U)||y&&(A+=x?1:-1,U=h[A],U&&!this.isViewFinished(U))?U:null}isViewFinished(n){return n.renderingState===g.RenderingStates.FINISHED}renderView(n){switch(n.renderingState){case g.RenderingStates.FINISHED:return!1;case g.RenderingStates.PAUSED:this.highestPriorityPage=n.renderingId,n.resume();break;case g.RenderingStates.RUNNING:this.highestPriorityPage=n.renderingId;break;case g.RenderingStates.INITIAL:this.highestPriorityPage=n.renderingId,n.draw().finally(()=>{this.renderHighestPriority()}).catch(h=>{h instanceof u.RenderingCancelledException||console.error(`renderView: "${h}"`)});break}return!0}}S.PDFRenderingQueue=P}],s={};function _(F){var S=s[F];if(S!==void 0)return S.exports;var C=s[F]={exports:{}};return t[F](C,C.exports,_),C.exports}var O={};return(()=>{var F=O;Object.defineProperty(F,"__esModule",{value:!0}),Object.defineProperty(F,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return u.AnnotationLayerBuilder}}),F.DefaultXfaLayerFactory=F.DefaultTextLayerFactory=F.DefaultStructTreeLayerFactory=F.DefaultAnnotationLayerFactory=void 0,Object.defineProperty(F,"DownloadManager",{enumerable:!0,get:function(){return g.DownloadManager}}),Object.defineProperty(F,"EventBus",{enumerable:!0,get:function(){return M.EventBus}}),Object.defineProperty(F,"GenericL10n",{enumerable:!0,get:function(){return P.GenericL10n}}),Object.defineProperty(F,"LinkTarget",{enumerable:!0,get:function(){return S.LinkTarget}}),Object.defineProperty(F,"NullL10n",{enumerable:!0,get:function(){return b.NullL10n}}),Object.defineProperty(F,"PDFFindController",{enumerable:!0,get:function(){return n.PDFFindController}}),Object.defineProperty(F,"PDFHistory",{enumerable:!0,get:function(){return h.PDFHistory}}),Object.defineProperty(F,"PDFLinkService",{enumerable:!0,get:function(){return S.PDFLinkService}}),Object.defineProperty(F,"PDFPageView",{enumerable:!0,get:function(){return x.PDFPageView}}),Object.defineProperty(F,"PDFScriptingManager",{enumerable:!0,get:function(){return y.PDFScriptingManager}}),Object.defineProperty(F,"PDFSinglePageViewer",{enumerable:!0,get:function(){return j.PDFSinglePageViewer}}),Object.defineProperty(F,"PDFViewer",{enumerable:!0,get:function(){return N.PDFViewer}}),Object.defineProperty(F,"ProgressBar",{enumerable:!0,get:function(){return C.ProgressBar}}),Object.defineProperty(F,"RenderingStates",{enumerable:!0,get:function(){return C.RenderingStates}}),Object.defineProperty(F,"ScrollMode",{enumerable:!0,get:function(){return C.ScrollMode}}),Object.defineProperty(F,"SimpleLinkService",{enumerable:!0,get:function(){return S.SimpleLinkService}}),Object.defineProperty(F,"SpreadMode",{enumerable:!0,get:function(){return C.SpreadMode}}),Object.defineProperty(F,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return w.StructTreeLayerBuilder}}),Object.defineProperty(F,"TextLayerBuilder",{enumerable:!0,get:function(){return o.TextLayerBuilder}}),Object.defineProperty(F,"XfaLayerBuilder",{enumerable:!0,get:function(){return A.XfaLayerBuilder}}),Object.defineProperty(F,"parseQueryString",{enumerable:!0,get:function(){return C.parseQueryString}});var S=_(1),C=_(2),u=_(3),g=_(6),M=_(7),P=_(8),b=_(5),n=_(10),h=_(12),x=_(13),y=_(21),j=_(23),N=_(24),w=_(16),o=_(19),A=_(20);class U{constructor(){throw new Error("The `DefaultAnnotationLayerFactory` has been removed, please use the `annotationMode` option when initializing the `PDFPageView`-instance to control AnnotationLayer rendering.")}}F.DefaultAnnotationLayerFactory=U;class ${constructor(){throw new Error("The `DefaultStructTreeLayerFactory` has been removed, this functionality is automatically enabled when the TextLayer is used.")}}F.DefaultStructTreeLayerFactory=$;class V{constructor(){throw new Error("The `DefaultTextLayerFactory` has been removed, please use the `textLayerMode` option when initializing the `PDFPageView`-instance to control TextLayer rendering.")}}F.DefaultTextLayerFactory=V;class H{constructor(){throw new Error("The `DefaultXfaLayerFactory` has been removed, please use the `enableXfa` option when calling the `getDocument`-function to control XfaLayer rendering.")}}F.DefaultXfaLayerFactory=H})(),O})())})(pdf_viewer);const PDFWorker={create(){return i("pdf.worker.js").defaults(()=>new Worker(new URL(""+new URL(""+new URL("pdf.worker-Z4SnJTmH.js",import.meta.url).href,import.meta.url).href,self.location),{type:"module"}))}},_withScopeId=T=>(pushScopeId("data-v-9bad3887"),T=T(),popScopeId(),T),_hoisted_1={class:"container"},_hoisted_2={class:"pdf_down"},_hoisted_3=_withScopeId(()=>createBaseVNode("div",{id:"viewer",class:"pdfViewer"},null,-1)),_hoisted_4=[_hoisted_3],_sfc_main=defineComponent({__name:"PdfView",props:{data:null},setup(T){const c=T,t=ref(null),s={viewer:null,search:"",pdf_scale:1};!pdfExports.GlobalWorkerOptions.workerPort&&typeof window<"u"&&"Worker"in window&&(pdfExports.GlobalWorkerOptions.workerPort=PDFWorker.create()),(()=>{async function F(){if(!t.value)return;const S=new pdf_viewerExports.EventBus,C=new pdf_viewerExports.PDFLinkService({eventBus:S}),u=new pdf_viewerExports.PDFFindController({eventBus:S,linkService:C,updateMatchesCountOnProgress:!0}),g=new pdf_viewerExports.PDFViewer({container:t.value,eventBus:S,linkService:C,findController:u,l10n:new pdf_viewerExports.GenericL10n("zh-CN")});C.setViewer(g),S.on("pagesinit",()=>{var P;const b=(P=g.getPageView(0))==null?void 0:P.viewport;(b==null?void 0:b.width)>window.innerWidth?g.currentScaleValue="0.5":g.currentScaleValue="1"});const M=await pdfExports.getDocument({data:c.data,cMapUrl:`https://npm.onmicrosoft.cn/pdfjs-dist@${pdfExports.version}/cmaps/`,useWorkerFetch:!0,cMapPacked:!0,enableXfa:!0}).promise;g.setDocument(M),C.setDocument(M,null),s.viewer=g}onMounted(F)})();function _(){if(!s.viewer)return;const F=s.viewer.currentScale;let S=0;window.screen.width>1440?S=1.4:S=1.2,!(F>=S)&&(s.viewer.currentScale=F+.1)}function O(){if(!s.viewer)return;const F=s.viewer.currentScale;F<=.5||(s.viewer.currentScale=F-.1)}return(F,S)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",{class:"pdf_set_left",onClick:S[0]||(S[0]=C=>_())},"➕"),createBaseVNode("div",{class:"pdf_set_middle",onClick:S[1]||(S[1]=C=>O())},"➖")]),createBaseVNode("div",{ref_key:"container",ref:t,class:"pdf-wrapper"},_hoisted_4,512)]))}}),PdfView=Fe(_sfc_main,[["__scopeId","data-v-9bad3887"]]);export{PdfView as default};
