import{_ as L,r as d,o as p,c as b,w as a,a as e,b as g,d as N,e as U,F as D,f as O}from"./index-65c3e508.js";const k={name:"consoleEdit",data(){return{typeDic:[{value:"BITINT",label:"BITINT"},{value:"BINARY",label:"BINARY"},{value:"BIT",label:"BIT"},{value:"BLOB",label:"BLOB"},{value:"CHAR",label:"CHAR"},{value:"DATE",label:"DATE"},{value:"DATETIME",label:"DATETIME"},{value:"DECIMAL",label:"DECIMAL"},{value:"DOUBLE",label:"DOUBLE"},{value:"ENUM",label:"ENUM"},{value:"FLOAT",label:"FLOAT"},{value:"GEOMETRY",label:"GEOMETRY"},{value:"GEOMETRYCOLLECTION",label:"GEOMETRYCOLLECTION"},{value:"INT",label:"INT"},{value:"INTEGER",label:"INTEGER"},{value:"JSON",label:"JSON"},{value:"LONGBLOB",label:"LONGBLOB"},{value:"LONGTEXT",label:"LONGTEXT"},{value:"POINT",label:"POINT"},{value:"POLYGON",label:"POLYGON"},{value:"TEXT",label:"TEXT"},{value:"TIME",label:"TIME"},{value:"TIMESTAMP",label:"TIMESTAMP"},{value:"VARCHAR",label:"VARCHAR"},{value:"YEAR",label:"YEAR"}],tableHeight:document.documentElement.scrollHeight-245+"px",addTemplate:{colId:"",colColumnComment:"",colColumnName:"",colColumnType:"VARCHAR",colColumnLength:255,colJavaField:"",colJavaType:"String",colQueryType:"EQ",colIsRequired:"0",colIsList:"1",colIsQuery:"1",colIsInsert:"1",colIsEdit:"1",colHtmlType:"input"},editData:null,activeName:"first",saveLoading:0,codeLoading:0,form:{},tabColumns:[]}},watch:{activeName:{deep:!0,immediate:!0,handler(u,m){m&&this.$TOOL.session.set("tabClicked",u)}}},mounted(){this.activeName=this.$TOOL.session.get("tabClicked"),this.form.tabId=this.$route.params.tabId,this.addTemplate.tabId=this.form.tabId,this.form.genId=this.$route.params.genId,(!this.form.tabId||this.form.tabId==="null")&&delete this.form.tabId,(!this.form.genId||this.form.genId==="null")&&delete this.form.genId,this.initial()},methods:{saveFirst(){this.saveLoading=!0,this.$API.gen.table.update.put(this.editData).then(u=>{if(u.code==="00000"){this.$message.success("保存成功");return}this.$message.error(u.msg)}).finally(()=>this.saveLoading=!1)},saveSecond(){this.saveLoading=!0,this.$API.gen.column.update.put({tabId:this.editData.tabId,columns:this.tabColumns}).then(u=>{if(u.code==="00000"){this.$message.success("保存成功");return}this.$message.error(u.msg)}).finally(()=>this.saveLoading=!1)},callback(){this.$router.push({path:"/console/"+this.form.genId})},initial(){this.$API.gen.column.info.get(this.form).then(u=>{if(u.code==="00000"){this.tabColumns=u.data;return}this.$message.error(u.msg)}).finally(()=>this.codeLoading=!1),this.$API.gen.table.info.get(this.form).then(u=>{if(u.code==="00000"){this.editData=u.data;return}this.$message.error(u.msg)}).finally(()=>this.codeLoading=!1)}}};function A(u,m,B,R,n,v){const I=d("el-empty"),r=d("el-input"),s=d("el-form-item"),c=d("el-col"),f=d("el-row"),V=d("el-button"),T=d("el-form"),w=d("el-tab-pane"),i=d("el-table-column"),o=d("el-option"),h=d("el-select"),_=d("el-checkbox"),E=d("sc-form-table"),C=d("el-tabs"),y=d("el-skeleton");return p(),b(y,{rows:5,animated:!0,loading:n.codeLoading},{default:a(()=>[e(C,{modelValue:n.activeName,"onUpdate:modelValue":m[5]||(m[5]=l=>n.activeName=l),class:"demo-tabs"},{default:a(()=>[e(w,{label:"基本信息",name:"first"},{default:a(()=>[n.editData==null?(p(),b(I,{key:0})):(p(),b(T,{key:1,model:n.editData,"label-width":"120px"},{default:a(()=>[e(f,{gutter:10},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(s,{label:"表名称"},{default:a(()=>[e(r,{readonly:"",disabled:"",modelValue:n.editData.tabName,"onUpdate:modelValue":m[0]||(m[0]=l=>n.editData.tabName=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(s,{label:"实体类名称"},{default:a(()=>[e(r,{modelValue:n.editData.tabClassName,"onUpdate:modelValue":m[1]||(m[1]=l=>n.editData.tabClassName=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:10},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(s,{label:"表描述"},{default:a(()=>[e(r,{modelValue:n.editData.tabDesc,"onUpdate:modelValue":m[2]||(m[2]=l=>n.editData.tabDesc=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12})]),_:1}),e(f,{gutter:10},{default:a(()=>[e(c,{span:24},{default:a(()=>[e(s,{label:"备注"},{default:a(()=>[e(r,{modelValue:n.editData.tabRemark,"onUpdate:modelValue":m[3]||(m[3]=l=>n.editData.tabRemark=l),type:"textarea",rows:5},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{gutter:10},{default:a(()=>[e(c,{span:24,style:{"text-align":"-webkit-center"}},{default:a(()=>[e(s,{style:{width:"max-content"}},{default:a(()=>[e(V,{type:"primary",onClick:v.saveFirst,loading:n.saveLoading},{default:a(()=>[g("保存")]),_:1},8,["onClick","loading"]),e(V,{onClick:v.callback},{default:a(()=>[g("返回")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1}),e(w,{label:"字段信息",name:"second"},{default:a(()=>[n.editData==null?(p(),b(I,{key:0})):(p(),b(T,{key:1,"label-width":"100px"},{default:a(()=>[e(s,{prop:"list"},{default:a(()=>[e(E,{ref:"table",modelValue:n.tabColumns,"onUpdate:modelValue":m[4]||(m[4]=l=>n.tabColumns=l),addTemplate:n.addTemplate,height:550,placeholder:"暂无数据"},{default:a(()=>[e(i,{fixed:"",prop:"colColumnName",label:"字段名称",width:"180"},{default:a(l=>[e(r,{modelValue:l.row.colColumnName,"onUpdate:modelValue":t=>l.row.colColumnName=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colColumnComment",label:"字段描述","min-width":"10%"},{default:a(l=>[e(r,{modelValue:l.row.colColumnComment,"onUpdate:modelValue":t=>l.row.colColumnComment=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colColumnType",label:"字段类型","min-width":"10%"},{default:a(l=>[e(h,{modelValue:l.row.colColumnType,"onUpdate:modelValue":t=>l.row.colColumnType=t,placeholder:"请选择",filterable:!0,"allow-create":!0},{default:a(()=>[(p(!0),N(D,null,U(n.typeDic,t=>(p(),b(o,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colColumnLength",label:"字段长度","min-width":"10%"},{default:a(l=>[e(r,{modelValue:l.row.colColumnLength,"onUpdate:modelValue":t=>l.row.colColumnLength=t,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colColumnDecimal",label:"小数点","min-width":"5%"},{default:a(l=>[e(r,{modelValue:l.row.colColumnDecimal,"onUpdate:modelValue":t=>l.row.colColumnDecimal=t,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colJavaType",label:"Java类型","min-width":"11%"},{default:a(l=>[e(h,{modelValue:l.row.colJavaType,"onUpdate:modelValue":t=>l.row.colJavaType=t,placeholder:"请选择"},{default:a(()=>[e(o,{label:"Long",value:"Long"}),e(o,{label:"String",value:"String"}),e(o,{label:"Integer",value:"Integer"}),e(o,{label:"Double",value:"Double"}),e(o,{label:"BigDecimal",value:"BigDecimal"}),e(o,{label:"Date",value:"Date"}),e(o,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colJavaField",label:"Java属性","min-width":"10%"},{default:a(l=>[e(r,{modelValue:l.row.colJavaField,"onUpdate:modelValue":t=>l.row.colJavaField=t},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colIsInsert",label:"插入","min-width":"5%",align:"center"},{default:a(l=>[e(_,{modelValue:l.row.colIsInsert,"onUpdate:modelValue":t=>l.row.colIsInsert=t,"true-label":"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colIsEdit",label:"编辑","min-width":"5%",align:"center"},{default:a(l=>[e(_,{modelValue:l.row.colIsEdit,"onUpdate:modelValue":t=>l.row.colIsEdit=t,"true-label":"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colIsList",label:"列表","min-width":"5%",align:"center"},{default:a(l=>[e(_,{modelValue:l.row.colIsList,"onUpdate:modelValue":t=>l.row.colIsList=t,"true-label":"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colIsQuery",label:"查询","min-width":"5%",align:"center"},{default:a(l=>[e(_,{modelValue:l.row.colIsQuery,"onUpdate:modelValue":t=>l.row.colIsQuery=t,"true-label":"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"colQueryType",label:"查询方式","min-width":"10%"},{default:a(l=>[e(h,{modelValue:l.row.colQueryType,"onUpdate:modelValue":t=>l.row.colQueryType=t,placeholder:"请选择"},{default:a(()=>[e(o,{label:"=",value:"EQ"}),e(o,{label:"!=",value:"NE"}),e(o,{label:">",value:"GT"}),e(o,{label:">=",value:"GE"}),e(o,{label:"<",value:"LT"}),e(o,{label:"<=",value:"LE"}),e(o,{label:"LIKE",value:"LIKE"}),e(o,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{label:"必填","min-width":"5%"},{default:a(l=>[e(_,{modelValue:l.row.colIsRequired,"onUpdate:modelValue":t=>l.row.colIsRequired=t,"false-label":"0","true-label":"1"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{label:"显示类型","min-width":"12%"},{default:a(l=>[e(h,{modelValue:l.row.colHtmlType,"onUpdate:modelValue":t=>l.row.colHtmlType=t},{default:a(()=>[e(o,{label:"文本框",value:"input"}),e(o,{label:"文本域",value:"textarea"}),e(o,{label:"下拉框",value:"select"}),e(o,{label:"单选框",value:"radio"}),e(o,{label:"复选框",value:"checkbox"}),e(o,{label:"日期控件",value:"datetime"}),e(o,{label:"图片上传",value:"imageUpload"}),e(o,{label:"文件上传",value:"fileUpload"}),e(o,{label:"富文本控件",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["modelValue","addTemplate"])]),_:1}),e(f,{gutter:10},{default:a(()=>[e(c,{span:24,style:{"text-align":"-webkit-center"}},{default:a(()=>[e(s,{style:{width:"max-content"}},{default:a(()=>[e(V,{type:"primary",onClick:v.saveSecond,loading:n.saveLoading},{default:a(()=>[g("保存")]),_:1},8,["onClick","loading"]),e(V,{onClick:v.callback},{default:a(()=>[g("返回")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),O(` <el-tab-pane label="生成信息" name="third">\r
                <el-empty v-if="editData == null"></el-empty>\r
\r
            </el-tab-pane> `)]),_:1},8,["modelValue"])]),_:1},8,["loading"])}const M=L(k,[["render",A],["__file","Z:/workspace/vue-support-parent-starter/vue-support-gen-starter/src/views/gen/console/edit.vue"]]);export{M as default};
