import T from"./save-02904d25.js";import{_ as D,r as n,l as S,o as p,d as I,a as e,w as l,c as f,f as h,F as z,g as m,m as N,b as c}from"./index-65c3e508.js";const j={name:"db",components:{saveDialog:T},data(){return{dialog:{save:!1,permission:!1},apiObj:this.$API.gen.database.list,selection:[],search:{keyword:null}}},methods:{console(a){this.$router.push({path:"/console/"+a.genId})},openLog(a){this.$router.push({path:"/console/log/"+a.tabId+"/"+a.genId})},add(){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open()})},refresh(){this.$refs.table.refresh()},table_show(a){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("show").setData(a)})},table_edit(a){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("edit").setData(a)})},async table_del(a){var s={id:a.genId},_=await this.$API.gen.database.delete.delete(s);_.code=="00000"?this.$refs.table.refresh():this.$notify.error({title:"提示",message:_.msg})},handleSaveSuccess(a,s){s=="add"?this.$refs.table.refresh():s=="edit"&&this.$refs.table.refresh()}}},B={class:"left-panel"},O=m("div",{class:"right-panel"},null,-1);function V(a,s,_,E,u,o){const r=n("el-button"),g=n("el-header"),i=n("el-table-column"),b=n("el-tag"),v=n("el-popconfirm"),w=n("el-button-group"),y=n("scTable"),k=n("el-main"),x=n("el-container"),C=n("save-dialog"),$=S("time");return p(),I(z,null,[e(x,null,{default:l(()=>[e(g,null,{default:l(()=>[m("div",B,[e(r,{type:"primary",icon:"el-icon-plus",onClick:o.add},null,8,["onClick"]),e(r,{type:"primary",icon:"el-icon-refresh",onClick:o.refresh},null,8,["onClick"])]),O]),_:1}),e(k,{class:"nopadding"},{default:l(()=>[e(y,{ref:"table",apiObj:u.apiObj,"row-key":"id",stripe:""},{default:l(()=>[e(i,{label:"#",type:"index",width:"50"}),e(i,{label:"数据源类型",prop:"genType",width:"200"}),e(i,{label:"数据库名称",prop:"genDatabase",width:"150"}),e(i,{label:"数据源名称",prop:"genName",width:"150"}),e(i,{label:"账号",prop:"genUser",width:"80"}),e(i,{label:"URL",prop:"genUrl","show-overflow-tooltip":""}),e(i,{label:"创建时间",prop:"createTime",width:"180"},{default:l(t=>[N(e(b,null,null,512),[[$,t.row.createTime]])]),_:1}),e(i,{label:"操作",fixed:"right",align:"right",width:"270"},{default:l(t=>[e(w,null,{default:l(()=>[e(r,{text:"",icon:"el-icon-view",type:"primary",size:"small",onClick:d=>o.table_show(t.row,t.$index)},{default:l(()=>[c("查看")]),_:2},1032,["onClick"]),t.row.genType!=="SYSTEM"?(p(),f(r,{key:0,icon:"el-icon-edit",text:"",type:"primary",size:"small",onClick:d=>o.table_edit(t.row)},{default:l(()=>[c("编辑")]),_:2},1032,["onClick"])):h("v-if",!0),e(r,{text:"",icon:"el-icon-warning",type:"primary",size:"small",onClick:d=>o.openLog(t.row)},{default:l(()=>[c("日志")]),_:2},1032,["onClick"]),t.row.genType!=="SYSTEM"?(p(),f(v,{key:1,title:"确定删除吗？",onConfirm:d=>o.table_del(t.row,t.$index)},{reference:l(()=>[e(r,{icon:"el-icon-delete",text:"",type:"primary",size:"small"},{default:l(()=>[c("删除")]),_:1})]),_:2},1032,["onConfirm"])):h("v-if",!0),e(r,{text:"",type:"primary",icon:"el-icon-box",size:"small",onClick:d=>o.console(t.row,t.$index)},{default:l(()=>[c("控制台")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["apiObj"])]),_:1})]),_:1}),u.dialog.save?(p(),f(C,{key:0,ref:"saveDialog",onSuccess:o.handleSaveSuccess,onClosed:s[0]||(s[0]=t=>u.dialog.save=!1)},null,8,["onSuccess"])):h("v-if",!0)],64)}const A=D(j,[["render",V],["__file","Z:/workspace/vue-support-parent-starter/vue-support-gen-starter/src/views/gen/db/index.vue"]]);export{A as default};
