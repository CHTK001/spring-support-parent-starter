import{d as F}from"./vuedraggable.umd-588c80da.js";import{_ as P}from"./about-a5aad237.js";import{_ as J}from"./echarts-e977bd9e.js";import{_ as U}from"./progress-c2244800.js";import{_ as H}from"./space-87c4f869.js";import{_ as W}from"./time-e6ef1553.js";import{_ as $}from"./ver-149fae55.js";import{_ as q}from"./welcome-a8364508.js";import{q as Z,_ as K,D as y,r as _,o as r,d as m,g as s,c as L,w as e,f as w,a as t,s as f,b as O,F as G,e as N,u as D,t as z,v as M,x as Q}from"./index-65c3e508.js";import{g as X}from"./Utils-6de69ef8.js";const R=Object.assign({"./about.vue":P,"./echarts.vue":J,"./progress.vue":U,"./space.vue":H,"./time.vue":W,"./ver.vue":$,"./welcome.vue":q}),S={};for(const i in R){let l=R[i];S[i.replace(/^\.\/(.*)\.\w+$/,"$1")]=l.default}const b=Z(S);const Y={components:{draggable:F},data(){return{customizing:!1,allComps:b,selectLayout:[],defaultGrid:this.$CONFIG.DEFAULT_GRID,grid:[]}},created(){this.grid=this.$TOOL.data.get(y.GRID)||JSON.parse(JSON.stringify(this.defaultGrid))},mounted(){this.filter(),this.$emit("on-mounted")},computed:{allCompsList(){var i=[];const l=this.$TOOL.data.get(y.DASHBOARD_GRID);for(var u in this.allComps)l.indexOf(u)!=-1&&i.push({key:u,title:b[u].title,icon:b[u].icon,description:b[u].description});var p=this.grid.copmsList.reduce(function(o,d){return o.concat(d)});for(let o of i)p.find(h=>h===o.key)&&(o.disabled=!0);return i},myCompsList(){var i=this.$TOOL.data.get(y.DASHBOARD_GRID)||[];return this.allCompsList.filter(l=>!l.disabled&&i.includes(l.key))},nowCompsList(){return this.grid.copmsList.reduce(function(i,l){return i.concat(l)})}},methods:{getImg(i){return X(i)},update(i){},async filter(){const i=this.$TOOL.data.get(y.DASHBOARD_GRID);this.filter2(i,this.grid.copmsList)},filter2(i,l){for(const u of l)for(const p in u)i.indexOf(u[p])==-1&&(u.splice(p,1),this.filter())},custom(){this.customizing=!0;const i=this.$refs.widgets.offsetWidth;this.$nextTick(()=>{const l=this.$refs.widgets.offsetWidth/i;this.$refs.widgets.style.setProperty("transform",`scale(${l})`)})},setLayout(i){this.grid.layout=i,i.join(",")=="24"&&(this.grid.copmsList[0]=[...this.grid.copmsList[0],...this.grid.copmsList[1],...this.grid.copmsList[2],...this.grid.copmsList[3]||[],...this.grid.copmsList[4]||[]],this.grid.copmsList[1]=[],this.grid.copmsList[2]=[],this.grid.copmsList[3]=[],this.grid.copmsList[4]=[])},push(i){this.grid.copmsList[0].push(i.key)},remove(i){var l=this.grid.copmsList;l.forEach((u,p)=>{var o=u.filter(d=>d!=i);l[p]=o})},save(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.$TOOL.data.set(y.GRID,this.grid),this.$API.auth.grid.post(this.grid).then(i=>{if(i.code==="00000")return this.$notify.success({title:"提示",message:i.msg}),!0;this.$notify.error({title:"提示",message:i.msg})})},backDefaul(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.grid=JSON.parse(JSON.stringify(this.defaultGrid)),this.$TOOL.data.remove(y.GRID)},close(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform")}}},a=i=>(M("data-v-e8751aa9"),i=i(),Q(),i),tt={class:"widgets-content"},st={class:"widgets-top"},et=a(()=>s("div",{class:"widgets-top-title"}," 控制台 ",-1)),it={class:"widgets-top-actions"},lt={class:"widgets",ref:"widgets"},ot={class:"widgets-wrapper"},nt={key:0,class:"no-widgets"},at={class:"widgets-item"},dt={key:0,class:"customize-overlay"},ct={key:0,class:"widgets-aside"},rt={class:"widgets-aside-title"},ut={class:"selectLayout"},_t=a(()=>s("span",null,null,-1)),mt=a(()=>s("span",null,null,-1)),pt=a(()=>s("span",null,null,-1)),gt=a(()=>s("span",null,null,-1)),ft=a(()=>s("span",null,null,-1)),ht=a(()=>s("span",null,null,-1)),vt=a(()=>s("span",null,null,-1)),yt=a(()=>s("span",null,null,-1)),Lt=a(()=>s("span",null,null,-1)),wt=a(()=>s("span",null,null,-1)),Ct=a(()=>s("span",null,null,-1)),kt=a(()=>s("span",null,null,-1)),Ot=a(()=>s("span",null,null,-1)),bt=a(()=>s("span",null,null,-1)),Dt=a(()=>s("span",null,null,-1)),zt=a(()=>s("span",null,null,-1)),It=a(()=>s("span",null,null,-1)),xt=a(()=>s("span",null,null,-1)),Gt=a(()=>s("span",null,null,-1)),Nt=a(()=>s("span",null,null,-1)),Rt=a(()=>s("span",null,null,-1)),St={class:"widgets-list"},At={key:0,class:"widgets-list-nodata"},Tt={class:"item-logo"},jt={class:"item-info"},Bt={class:"item-actions"};function Vt(i,l,u,p,o,d){const h=_("el-button"),I=_("el-empty"),C=_("el-icon"),A=_("draggable"),n=_("el-col"),g=_("el-row"),T=_("el-icon-circle-plus-filled"),j=_("el-icon-close"),x=_("el-header"),B=_("el-main"),V=_("el-footer"),E=_("el-container");return r(),m("div",{class:f(["widgets-home",o.customizing?"customizing":""]),ref:"main"},[s("div",tt,[s("div",st,[et,s("div",it,[o.customizing?(r(),L(h,{key:0,type:"primary",icon:"el-icon-check",round:"",onClick:d.save},{default:e(()=>[O("完成")]),_:1},8,["onClick"])):w("v-if",!0)])]),s("div",lt,[s("div",ot,[d.nowCompsList.length<=0?(r(),m("div",nt,[t(I,{image:d.getImg("no-widgets.svg"),description:"没有部件啦","image-size":280},null,8,["image"])])):w("v-if",!0),t(g,{gutter:15},{default:e(()=>[(r(!0),m(G,null,N(o.grid.layout,(c,k)=>(r(),L(n,{key:k,md:c,xs:24},{default:e(()=>[t(A,{onEnd:d.update,modelValue:o.grid.copmsList[k],"onUpdate:modelValue":v=>o.grid.copmsList[k]=v,animation:"200",handle:".customize-overlay",group:"people","item-key":"com",dragClass:"aaaaa","force-fallback":"",fallbackOnBody:"",class:"draggable-box"},{item:e(({element:v})=>[s("div",at,[(r(),L(D(o.allComps[v]))),o.customizing?(r(),m("div",dt,[t(h,{class:"close",type:"danger",plain:"",icon:"el-icon-close",size:"small",onClick:Et=>d.remove(v)},null,8,["onClick"]),s("label",null,[t(C,null,{default:e(()=>[(r(),L(D(o.allComps[v].icon)))]),_:2},1024),O(z(o.allComps[v].title),1)])])):w("v-if",!0)])]),_:2},1032,["onEnd","modelValue","onUpdate:modelValue"])]),_:2},1032,["md"]))),128))]),_:1})])],512)]),o.customizing?(r(),m("div",ct,[t(E,null,{default:e(()=>[t(x,null,{default:e(()=>[s("div",rt,[t(C,null,{default:e(()=>[t(T)]),_:1}),O("添加部件")]),s("div",{class:"widgets-aside-close",onClick:l[0]||(l[0]=c=>d.close())},[t(C,null,{default:e(()=>[t(j)]),_:1})])]),_:1}),t(x,{style:{height:"auto"}},{default:e(()=>[s("div",ut,[s("div",{class:f(["selectLayout-item item01",{active:o.grid.layout.join(",")=="12,6,6"}]),onClick:l[1]||(l[1]=c=>d.setLayout([12,6,6]))},[t(g,{gutter:2},{default:e(()=>[t(n,{span:12},{default:e(()=>[_t]),_:1}),t(n,{span:6},{default:e(()=>[mt]),_:1}),t(n,{span:6},{default:e(()=>[pt]),_:1})]),_:1})],2),s("div",{class:f(["selectLayout-item item02",{active:o.grid.layout.join(",")=="24,16,8"}]),onClick:l[2]||(l[2]=c=>d.setLayout([24,16,8]))},[t(g,{gutter:2},{default:e(()=>[t(n,{span:24},{default:e(()=>[gt]),_:1}),t(n,{span:16},{default:e(()=>[ft]),_:1}),t(n,{span:8},{default:e(()=>[ht]),_:1})]),_:1})],2),s("div",{class:f(["selectLayout-item item03",{active:o.grid.layout.join(",")=="24"}]),onClick:l[3]||(l[3]=c=>d.setLayout([24]))},[t(g,{gutter:2},{default:e(()=>[t(n,{span:24},{default:e(()=>[vt]),_:1}),t(n,{span:24},{default:e(()=>[yt]),_:1}),t(n,{span:24},{default:e(()=>[Lt]),_:1})]),_:1})],2),s("div",{class:f(["selectLayout-item item04",{active:o.grid.layout.join(",")=="6,6,12"}]),onClick:l[4]||(l[4]=c=>d.setLayout([6,6,12]))},[t(g,{gutter:2},{default:e(()=>[t(n,{span:6},{default:e(()=>[wt]),_:1}),t(n,{span:6},{default:e(()=>[Ct]),_:1}),t(n,{span:12},{default:e(()=>[kt]),_:1})]),_:1})],2),s("div",{class:f(["selectLayout-item item05",{active:o.grid.layout.join(",")=="6,6,6,6"}]),onClick:l[5]||(l[5]=c=>d.setLayout([6,6,6,6]))},[t(g,{gutter:2},{default:e(()=>[t(n,{span:6},{default:e(()=>[Ot]),_:1}),t(n,{span:6},{default:e(()=>[bt]),_:1}),t(n,{span:6},{default:e(()=>[Dt]),_:1}),t(n,{span:6},{default:e(()=>[zt]),_:1})]),_:1})],2),s("div",{class:f(["selectLayout-item item02",{active:o.grid.layout.join(",")=="24,6,6,6,6"}]),onClick:l[6]||(l[6]=c=>d.setLayout([24,6,6,6,6]))},[t(g,{gutter:2},{default:e(()=>[t(n,{span:24},{default:e(()=>[It]),_:1}),t(n,{span:6},{default:e(()=>[xt]),_:1}),t(n,{span:6},{default:e(()=>[Gt]),_:1}),t(n,{span:6},{default:e(()=>[Nt]),_:1}),t(n,{span:6},{default:e(()=>[Rt]),_:1})]),_:1})],2)])]),_:1}),t(B,{class:"nopadding"},{default:e(()=>[s("div",St,[d.myCompsList.length<=0?(r(),m("div",At,[t(I,{description:"没有部件啦","image-size":60})])):w("v-if",!0),(r(!0),m(G,null,N(d.myCompsList,c=>(r(),m("div",{key:c.title,class:"widgets-list-item"},[s("div",Tt,[t(C,null,{default:e(()=>[(r(),L(D(c.icon)))]),_:2},1024)]),s("div",jt,[s("h2",null,z(c.title),1),s("p",null,z(c.description),1)]),s("div",Bt,[t(h,{type:"primary",icon:"el-icon-plus",size:"small",onClick:k=>d.push(c)},null,8,["onClick"])])]))),128))])]),_:1}),t(V,{style:{height:"51px"}},{default:e(()=>[t(h,{size:"small",onClick:l[7]||(l[7]=c=>d.backDefaul())},{default:e(()=>[O("恢复默认")]),_:1})]),_:1})]),_:1})])):w("v-if",!0)],2)}const Mt=K(Y,[["render",Vt],["__scopeId","data-v-e8751aa9"],["__file","Z:/workspace/vue-support-parent-starter/vue-support-gen-starter/src/views/home/widgets/index.vue"]]);export{Mt as default};
