import{d as V}from"./vuedraggable.umd-3f5a558d.js";import{a as O}from"./index-12d1b444.js";import{_ as E,D as y,r as _,o as r,c as p,d as s,g as L,w as e,e as D,h as w,b as t,F as G,f as S,i as z,t as I,y as g,p as F,k as P}from"./index-85936978.js";import{g as J}from"./Utils-d73ed2bc.js";import"./about-ecccad1a.js";import"./echarts-4c9039c4.js";import"./index-21a4a76f.js";import"./progress-69718525.js";import"./space-2ee84d94.js";import"./time-c46f9ba6.js";import"./ver-3b6b7c45.js";import"./welcome-694c723f.js";const U={components:{draggable:V},data(){return{customizing:!1,allComps:O,selectLayout:[],defaultGrid:this.$CONFIG.DEFAULT_GRID,grid:[]}},created(){this.grid=this.$TOOL.data.get(y.GRID)||JSON.parse(JSON.stringify(this.defaultGrid))},mounted(){this.filter(),this.$emit("on-mounted")},computed:{allCompsList(){var i=[];const l=this.$TOOL.data.get(y.DASHBOARD_GRID);for(var u in this.allComps)l.indexOf(u)!=-1&&i.push({key:u,title:O[u].title,icon:O[u].icon,description:O[u].description});var m=this.grid.copmsList.reduce(function(o,d){return o.concat(d)});for(let o of i)m.find(h=>h===o.key)&&(o.disabled=!0);return i},myCompsList(){var i=this.$TOOL.data.get(y.DASHBOARD_GRID)||[];return this.allCompsList.filter(l=>!l.disabled&&i.includes(l.key))},nowCompsList(){return this.grid.copmsList.reduce(function(i,l){return i.concat(l)})}},methods:{getImg(i){return J(i)},update(i){},async filter(){const i=this.$TOOL.data.get(y.DASHBOARD_GRID);this.filter2(i,this.grid.copmsList)},filter2(i,l){for(const u of l)for(const m in u)i.indexOf(u[m])==-1&&(u.splice(m,1),this.filter())},custom(){this.customizing=!0;const i=this.$refs.widgets.offsetWidth;this.$nextTick(()=>{const l=this.$refs.widgets.offsetWidth/i;this.$refs.widgets.style.setProperty("transform",`scale(${l})`)})},setLayout(i){this.grid.layout=i,i.join(",")=="24"&&(this.grid.copmsList[0]=[...this.grid.copmsList[0],...this.grid.copmsList[1],...this.grid.copmsList[2],...this.grid.copmsList[3]||[],...this.grid.copmsList[4]||[]],this.grid.copmsList[1]=[],this.grid.copmsList[2]=[],this.grid.copmsList[3]=[],this.grid.copmsList[4]=[])},push(i){this.grid.copmsList[0].push(i.key)},remove(i){var l=this.grid.copmsList;l.forEach((u,m)=>{var o=u.filter(d=>d!=i);l[m]=o})},save(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.$TOOL.data.set(y.GRID,this.grid),this.$API.auth.grid.post(this.grid).then(i=>{if(i.code==="00000")return this.$notify.success({title:"提示",message:i.msg}),!0;this.$notify.error({title:"提示",message:i.msg})})},backDefaul(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.grid=JSON.parse(JSON.stringify(this.defaultGrid)),this.$TOOL.data.remove(y.GRID)},close(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform")}}},a=i=>(F("data-v-e8751aa9"),i=i(),P(),i),H={class:"widgets-content"},W={class:"widgets-top"},Z=a(()=>s("div",{class:"widgets-top-title"}," 控制台 ",-1)),$={class:"widgets-top-actions"},q={class:"widgets",ref:"widgets"},K={class:"widgets-wrapper"},M={key:0,class:"no-widgets"},Q={class:"widgets-item"},X={key:0,class:"customize-overlay"},Y={key:0,class:"widgets-aside"},tt={class:"widgets-aside-title"},st={class:"selectLayout"},et=a(()=>s("span",null,null,-1)),it=a(()=>s("span",null,null,-1)),lt=a(()=>s("span",null,null,-1)),ot=a(()=>s("span",null,null,-1)),nt=a(()=>s("span",null,null,-1)),at=a(()=>s("span",null,null,-1)),dt=a(()=>s("span",null,null,-1)),ct=a(()=>s("span",null,null,-1)),rt=a(()=>s("span",null,null,-1)),ut=a(()=>s("span",null,null,-1)),_t=a(()=>s("span",null,null,-1)),pt=a(()=>s("span",null,null,-1)),mt=a(()=>s("span",null,null,-1)),ft=a(()=>s("span",null,null,-1)),gt=a(()=>s("span",null,null,-1)),ht=a(()=>s("span",null,null,-1)),vt=a(()=>s("span",null,null,-1)),yt=a(()=>s("span",null,null,-1)),Lt=a(()=>s("span",null,null,-1)),wt=a(()=>s("span",null,null,-1)),Ct=a(()=>s("span",null,null,-1)),kt={class:"widgets-list"},Ot={key:0,class:"widgets-list-nodata"},Dt={class:"item-logo"},zt={class:"item-info"},It={class:"item-actions"};function bt(i,l,u,m,o,d){const h=_("el-button"),b=_("el-empty"),C=_("el-icon"),A=_("draggable"),n=_("el-col"),f=_("el-row"),N=_("el-icon-circle-plus-filled"),R=_("el-icon-close"),x=_("el-header"),T=_("el-main"),j=_("el-footer"),B=_("el-container");return r(),p("div",{class:g(["widgets-home",o.customizing?"customizing":""]),ref:"main"},[s("div",H,[s("div",W,[Z,s("div",$,[o.customizing?(r(),L(h,{key:0,type:"primary",icon:"el-icon-check",round:"",onClick:d.save},{default:e(()=>[D("完成")]),_:1},8,["onClick"])):w("v-if",!0)])]),s("div",q,[s("div",K,[d.nowCompsList.length<=0?(r(),p("div",M,[t(b,{image:d.getImg("no-widgets.svg"),description:"没有部件啦","image-size":280},null,8,["image"])])):w("v-if",!0),t(f,{gutter:15},{default:e(()=>[(r(!0),p(G,null,S(o.grid.layout,(c,k)=>(r(),L(n,{key:k,md:c,xs:24},{default:e(()=>[t(A,{onEnd:d.update,modelValue:o.grid.copmsList[k],"onUpdate:modelValue":v=>o.grid.copmsList[k]=v,animation:"200",handle:".customize-overlay",group:"people","item-key":"com",dragClass:"aaaaa","force-fallback":"",fallbackOnBody:"",class:"draggable-box"},{item:e(({element:v})=>[s("div",Q,[(r(),L(z(o.allComps[v]))),o.customizing?(r(),p("div",X,[t(h,{class:"close",type:"danger",plain:"",icon:"el-icon-close",size:"small",onClick:xt=>d.remove(v)},null,8,["onClick"]),s("label",null,[t(C,null,{default:e(()=>[(r(),L(z(o.allComps[v].icon)))]),_:2},1024),D(I(o.allComps[v].title),1)])])):w("v-if",!0)])]),_:2},1032,["onEnd","modelValue","onUpdate:modelValue"])]),_:2},1032,["md"]))),128))]),_:1})])],512)]),o.customizing?(r(),p("div",Y,[t(B,null,{default:e(()=>[t(x,null,{default:e(()=>[s("div",tt,[t(C,null,{default:e(()=>[t(N)]),_:1}),D("添加部件")]),s("div",{class:"widgets-aside-close",onClick:l[0]||(l[0]=c=>d.close())},[t(C,null,{default:e(()=>[t(R)]),_:1})])]),_:1}),t(x,{style:{height:"auto"}},{default:e(()=>[s("div",st,[s("div",{class:g(["selectLayout-item item01",{active:o.grid.layout.join(",")=="12,6,6"}]),onClick:l[1]||(l[1]=c=>d.setLayout([12,6,6]))},[t(f,{gutter:2},{default:e(()=>[t(n,{span:12},{default:e(()=>[et]),_:1}),t(n,{span:6},{default:e(()=>[it]),_:1}),t(n,{span:6},{default:e(()=>[lt]),_:1})]),_:1})],2),s("div",{class:g(["selectLayout-item item02",{active:o.grid.layout.join(",")=="24,16,8"}]),onClick:l[2]||(l[2]=c=>d.setLayout([24,16,8]))},[t(f,{gutter:2},{default:e(()=>[t(n,{span:24},{default:e(()=>[ot]),_:1}),t(n,{span:16},{default:e(()=>[nt]),_:1}),t(n,{span:8},{default:e(()=>[at]),_:1})]),_:1})],2),s("div",{class:g(["selectLayout-item item03",{active:o.grid.layout.join(",")=="24"}]),onClick:l[3]||(l[3]=c=>d.setLayout([24]))},[t(f,{gutter:2},{default:e(()=>[t(n,{span:24},{default:e(()=>[dt]),_:1}),t(n,{span:24},{default:e(()=>[ct]),_:1}),t(n,{span:24},{default:e(()=>[rt]),_:1})]),_:1})],2),s("div",{class:g(["selectLayout-item item04",{active:o.grid.layout.join(",")=="6,6,12"}]),onClick:l[4]||(l[4]=c=>d.setLayout([6,6,12]))},[t(f,{gutter:2},{default:e(()=>[t(n,{span:6},{default:e(()=>[ut]),_:1}),t(n,{span:6},{default:e(()=>[_t]),_:1}),t(n,{span:12},{default:e(()=>[pt]),_:1})]),_:1})],2),s("div",{class:g(["selectLayout-item item05",{active:o.grid.layout.join(",")=="6,6,6,6"}]),onClick:l[5]||(l[5]=c=>d.setLayout([6,6,6,6]))},[t(f,{gutter:2},{default:e(()=>[t(n,{span:6},{default:e(()=>[mt]),_:1}),t(n,{span:6},{default:e(()=>[ft]),_:1}),t(n,{span:6},{default:e(()=>[gt]),_:1}),t(n,{span:6},{default:e(()=>[ht]),_:1})]),_:1})],2),s("div",{class:g(["selectLayout-item item02",{active:o.grid.layout.join(",")=="24,6,6,6,6"}]),onClick:l[6]||(l[6]=c=>d.setLayout([24,6,6,6,6]))},[t(f,{gutter:2},{default:e(()=>[t(n,{span:24},{default:e(()=>[vt]),_:1}),t(n,{span:6},{default:e(()=>[yt]),_:1}),t(n,{span:6},{default:e(()=>[Lt]),_:1}),t(n,{span:6},{default:e(()=>[wt]),_:1}),t(n,{span:6},{default:e(()=>[Ct]),_:1})]),_:1})],2)])]),_:1}),t(T,{class:"nopadding"},{default:e(()=>[s("div",kt,[d.myCompsList.length<=0?(r(),p("div",Ot,[t(b,{description:"没有部件啦","image-size":60})])):w("v-if",!0),(r(!0),p(G,null,S(d.myCompsList,c=>(r(),p("div",{key:c.title,class:"widgets-list-item"},[s("div",Dt,[t(C,null,{default:e(()=>[(r(),L(z(c.icon)))]),_:2},1024)]),s("div",zt,[s("h2",null,I(c.title),1),s("p",null,I(c.description),1)]),s("div",It,[t(h,{type:"primary",icon:"el-icon-plus",size:"small",onClick:k=>d.push(c)},null,8,["onClick"])])]))),128))])]),_:1}),t(j,{style:{height:"51px"}},{default:e(()=>[t(h,{size:"small",onClick:l[7]||(l[7]=c=>d.backDefaul())},{default:e(()=>[D("恢复默认")]),_:1})]),_:1})]),_:1})])):w("v-if",!0)],2)}const Jt=E(U,[["render",bt],["__scopeId","data-v-e8751aa9"],["__file","Z:/works/vue-support-parent-starter/vue-support-config-starter/src/views/home/widgets/index.vue"]]);export{Jt as default};
