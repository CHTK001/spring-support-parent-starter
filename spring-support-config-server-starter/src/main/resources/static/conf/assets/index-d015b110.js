import{G as N9,H as MZ,I as NZ,J as BZ,K as kW,L as PZ,M as $Z,N as IZ,O as LZ,P as EW,u as FZ,_ as HZ,Q as VZ,r as zZ,o as UZ,c as WZ,b as ZZ}from"./index-85936978.js";var jZ=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],GZ=function(vt){return jZ.map(function(On){return On.toLowerCase()}).indexOf(vt.toLowerCase())!==-1},qZ=function(vt,On,wn){Object.keys(On).filter(GZ).forEach(function(Sn){var En=On[Sn];typeof En=="function"&&(Sn==="onInit"?En(vt,wn):wn.on(Sn.substring(2),function(eo){return En(eo,wn)}))})},KZ=function(vt,On,wn,Sn){var En=vt.modelEvents?vt.modelEvents:null,eo=Array.isArray(En)?En.join(" "):En;N9(Sn,function(ao,xt){wn&&typeof ao=="string"&&ao!==xt&&ao!==wn.getContent({format:vt.outputFormat})&&wn.setContent(ao)}),wn.on(eo||"change input undo redo",function(){On.emit("update:modelValue",wn.getContent({format:vt.outputFormat}))})},YZ=function(vt,On,wn,Sn,En,eo){Sn.setContent(eo()),wn.attrs["onUpdate:modelValue"]&&KZ(On,wn,Sn,En),qZ(vt,wn.attrs,Sn)},_W=0,RW=function(vt){var On=Date.now(),wn=Math.floor(Math.random()*1e9);return _W++,vt+"_"+wn+_W+String(On)},XZ=function(vt){return vt!==null&&vt.tagName.toLowerCase()==="textarea"},AW=function(vt){return typeof vt>"u"||vt===""?[]:Array.isArray(vt)?vt:vt.split(" ")},JZ=function(vt,On){return AW(vt).concat(AW(On))},QZ=function(vt){return vt==null},OW=function(){return{listeners:[],scriptId:RW("tiny-script"),scriptLoaded:!1}},ej=function(){var vt=OW(),On=function(En,eo,ao,xt){var Gt=eo.createElement("script");Gt.referrerPolicy="origin",Gt.type="application/javascript",Gt.id=En,Gt.src=ao;var uo=function(){Gt.removeEventListener("load",uo),xt()};Gt.addEventListener("load",uo),eo.head&&eo.head.appendChild(Gt)},wn=function(En,eo,ao){vt.scriptLoaded?ao():(vt.listeners.push(ao),En.getElementById(vt.scriptId)||On(vt.scriptId,En,eo,function(){vt.listeners.forEach(function(xt){return xt()}),vt.scriptLoaded=!0}))},Sn=function(){vt=OW()};return{load:wn,reinitialize:Sn}},tj=ej(),nj=function(){return typeof window<"u"?window:global},y2=function(){var vt=nj();return vt&&vt.tinymce?vt.tinymce:null},oj={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(vt){return vt==="html"||vt==="text"}}},C2=globalThis&&globalThis.__assign||function(){return C2=Object.assign||function(vt){for(var On,wn=1,Sn=arguments.length;wn<Sn;wn++){On=arguments[wn];for(var En in On)Object.prototype.hasOwnProperty.call(On,En)&&(vt[En]=On[En])}return vt},C2.apply(this,arguments)},sj=function(vt,On,wn,Sn){return vt(Sn||"div",{id:On,ref:wn})},rj=function(vt,On,wn){return vt("textarea",{id:On,visibility:"hidden",ref:wn})},aj=MZ({props:oj,setup:function(vt,On){var wn=vt.init?C2({},vt.init):{},Sn=NZ(vt),En=Sn.disabled,eo=Sn.modelValue,ao=Sn.tagName,xt=BZ(null),Gt=null,uo=vt.id||RW("tiny-vue"),Wn=vt.init&&vt.init.inline||vt.inline,Xo=!!On.attrs["onUpdate:modelValue"],Zo=!0,Bt=vt.initialValue?vt.initialValue:"",$n="",co=function(Ye){return Xo?function(){return eo!=null&&eo.value?eo.value:""}:function(){return Ye?Bt:$n}},Qe=function(){var Ye=co(Zo),oe=C2(C2({},wn),{readonly:vt.disabled,selector:"#"+uo,plugins:JZ(wn.plugins,vt.plugins),toolbar:vt.toolbar||wn.toolbar,inline:Wn,setup:function(Pt){Gt=Pt,Pt.on("init",function(Ps){return YZ(Ps,vt,On,Pt,eo,Ye)}),typeof wn.setup=="function"&&wn.setup(Pt)}});XZ(xt.value)&&(xt.value.style.visibility=""),y2().init(oe),Zo=!1};N9(En,function(Ye){var oe;Gt!==null&&(typeof((oe=Gt.mode)===null||oe===void 0?void 0:oe.set)=="function"?Gt.mode.set(Ye?"readonly":"design"):Gt.setMode(Ye?"readonly":"design"))}),N9(ao,function(Ye){var oe;Xo||($n=Gt.getContent()),(oe=y2())===null||oe===void 0||oe.remove(Gt),kW(function(){return Qe()})}),PZ(function(){if(y2()!==null)Qe();else if(xt.value&&xt.value.ownerDocument){var Ye=vt.cloudChannel?vt.cloudChannel:"6",oe=vt.apiKey?vt.apiKey:"no-api-key",Pt=QZ(vt.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+oe+"/tinymce/"+Ye+"/tinymce.min.js":vt.tinymceScriptSrc;tj.load(xt.value.ownerDocument,Pt,Qe)}}),$Z(function(){y2()!==null&&y2().remove(Gt)}),Wn||(IZ(function(){Zo||Qe()}),LZ(function(){var Ye;Xo||($n=Gt.getContent()),(Ye=y2())===null||Ye===void 0||Ye.remove(Gt)}));var _n=function(Ye){var oe;$n=Gt.getContent(),(oe=y2())===null||oe===void 0||oe.remove(Gt),wn=C2(C2({},wn),Ye),kW(function(){return Qe()})};return On.expose({rerender:_n}),function(){return Wn?sj(EW,uo,xt,vt.tagName):rj(EW,uo,xt)}}}),MW={exports:{}};(function(vt){(function(){var On=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},wn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Sn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},En=function(e,n){return eo(function(o,r){return e.eq(n(o),n(r))})},eo=function(e){return{eq:e}},ao=eo(function(e,n){return e===n}),xt=ao,Gt=function(e){return eo(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},uo=function(e,n){return En(Gt(e),function(o){return Sn(o,n)})},Wn=function(e){return eo(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!uo(xt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Xo=eo(function(e,n){if(e===n)return!0;var o=On(e),r=On(n);return o!==r?!1:wn(o)?e===n:o==="array"?Gt(Xo).eq(e,n):o==="object"?Wn(Xo).eq(e,n):!1});const Zo=Object.getPrototypeOf,Bt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},$n=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Bt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},co=e=>n=>$n(n)===e,Qe=e=>n=>typeof n===e,_n=e=>n=>e===n,Ye=(e,n)=>Pt(e)&&Bt(e,n,(o,r)=>Zo(o)===r),oe=co("string"),Pt=co("object"),Ps=e=>Ye(e,Object),Zn=co("array"),te=_n(null),cn=Qe("boolean"),jo=_n(void 0),At=e=>e==null,ge=e=>!At(e),X=Qe("function"),An=Qe("number"),Kt=(e,n)=>{if(Zn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},bt=()=>{},gn=(e,n)=>(...o)=>e(n.apply(null,o)),O=(e,n)=>o=>e(n(o)),je=e=>()=>e,Eo=e=>e,qt=(e,n)=>e===n;function Le(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const lr=e=>n=>!e(n),yo=e=>()=>{throw new Error(e)},oo=e=>e(),$s=e=>{e()},rn=je(!1),We=je(!0);class ${constructor(n,o){this.tag=n,this.value=o}static some(n){return new $(!0,n)}static none(){return $.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?$.some(n(this.value)):$.none()}bind(n){return this.tag?n(this.value):$.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:$.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return ge(n)?$.some(n):$.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$.singletonNone=new $(!1);const Mr=Array.prototype.slice,nt=Array.prototype.indexOf,ze=Array.prototype.push,at=(e,n)=>nt.call(e,n),Wt=(e,n)=>{const o=at(e,n);return o===-1?$.none():$.some(o)},on=(e,n)=>at(e,n)>-1,zt=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Xt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},Be=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Go=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Fe=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},be=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},kt=(e,n,o)=>(Go(e,(r,c)=>{o=n(o,r,c)}),o),Mt=(e,n,o)=>(Be(e,(r,c)=>{o=n(o,r,c)}),o),qo=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return $.some(u);if(o(u,r))break}return $.none()},jn=(e,n)=>qo(e,n,rn),Is=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return $.some(o)}return $.none()},cs=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Zn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ze.apply(n,e[o])}return n},br=(e,n)=>cs(Xt(e,n)),mo=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},er=e=>{const n=Mr.call(e,0);return n.reverse(),n},yn=(e,n)=>be(e,o=>!on(n,o)),Ko=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Un=(e,n)=>{const o=Mr.call(e,0);return o.sort(n),o},Lo=(e,n)=>n>=0&&n<e.length?$.some(e[n]):$.none(),Jn=e=>Lo(e,0),Do=e=>Lo(e,e.length-1),is=X(Array.from)?Array.from:e=>Mr.call(e),Jr=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return $.none()},ka=(e,n)=>{const o=[],r=X(n)?c=>zt(o,u=>n(u,c)):c=>on(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Dn=Object.keys,vc=Object.hasOwnProperty,lo=(e,n)=>{const o=Dn(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},Zt=(e,n)=>In(e,(o,r)=>({k:r,v:n(o,r)})),In=(e,n)=>{const o={};return lo(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Zs=e=>(n,o)=>{e[o]=n},Qr=(e,n,o,r)=>{lo(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},mi=(e,n)=>{const o={},r={};return Qr(e,n,Zs(o),Zs(r)),{t:o,f:r}},Jo=(e,n)=>{const o={};return Qr(e,n,Zs(o),bt),o},nl=(e,n)=>{const o=[];return lo(e,(r,c)=>{o.push(n(r,c))}),o},us=e=>nl(e,Eo),No=(e,n)=>hn(e,n)?$.from(e[n]):$.none(),hn=(e,n)=>vc.call(e,n),fr=(e,n)=>hn(e,n)&&e[n]!==void 0&&e[n]!==null,Fa=(e,n,o=Xo)=>Wn(o).eq(e,n),hs=e=>{const n={};return Be(e,o=>{n[o]={}}),Dn(n)},Ha=e=>e.length!==void 0,da=Array.isArray,Hl=e=>{if(da(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},js=(e,n,o)=>{if(!e)return!1;if(o=o||e,Ha(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(hn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},ec=(e,n)=>{const o=[];return js(e,(r,c)=>{o.push(n(r,c,e))}),o},ce=(e,n)=>{const o=[];return js(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Z=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},De=(e,n,o,r)=>{let c=jo(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},$e=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},jt=e=>e[e.length-1],Qt=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Ft=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,R=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,P=!x&&!y&&!R;return{isiPad:je(c),isiPhone:je(u),isTablet:je(y),isPhone:je(x),isTouch:je(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:je(R),isDesktop:je(P)}},Qo=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Ro=(e,n)=>{const o=Qo(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Je(r(1),r(2))},Ln=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?Js():Ro(e,o)},Js=()=>Je(0,0),Je=(e,n)=>({major:e,minor:n}),tr={nu:Je,detect:Ln,unknown:Js},ma=(e,n)=>Jr(n.brands,o=>{const r=o.brand.toLowerCase();return jn(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:tr.nu(parseInt(o.version,10),0)}))}),tc=(e,n)=>{const o=String(n).toLowerCase();return jn(e,r=>r.search(o))},Va=(e,n)=>tc(e,n).map(o=>{const r=tr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Cl=(e,n)=>tc(e,n).map(o=>{const r=tr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Nr=(e,n)=>e.substring(n),ds=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,vr=(e,n)=>nr(e,n)?Nr(e,n.length):e,ms=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?jo(r)?!0:c+n.length<=r:!1},nr=(e,n)=>ds(e,n,0),Wc=(e,n)=>ds(e,n,e.length-n.length),wl=e=>n=>n.replace(e,""),Bo=wl(/^\s+|\s+$/g),Bd=wl(/^\s+/g),fi=wl(/\s+$/g),za=e=>e.length>0,Os=e=>!za(e),fa=(e,n)=>n<=0?"":new Array(n+1).join(e),_r=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?$.none():$.some(o)},ol=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nc=e=>n=>ms(n,e),Sl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ms(e,"edge/")&&ms(e,"chrome")&&ms(e,"safari")&&ms(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ol],search:e=>ms(e,"chrome")&&!ms(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ms(e,"msie")||ms(e,"trident")},{name:"Opera",versionRegexes:[ol,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nc("firefox")},{name:"Safari",versionRegexes:[ol,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ms(e,"safari")||ms(e,"mobile/"))&&ms(e,"applewebkit")}],Vl=[{name:"Windows",search:nc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ms(e,"iphone")||ms(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:nc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nc("linux"),versionRegexes:[]},{name:"Solaris",search:nc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:nc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xl={browsers:je(Sl),oses:je(Vl)},$i="Edge",ns="Chromium",Tl="IE",ga="Opera",yc="Firefox",kl="Safari",sl=()=>ea({current:void 0,version:tr.unknown()}),ea=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r($i),isChromium:r(ns),isIE:r(Tl),isOpera:r(ga),isFirefox:r(yc),isSafari:r(kl)}},zl={unknown:sl,nu:ea,edge:je($i),chromium:je(ns),ie:je(Tl),opera:je(ga),firefox:je(yc),safari:je(kl)},rl="Windows",Ii="iOS",ws="Android",Ea="Linux",j="macOS",le="Solaris",he="FreeBSD",Ie="ChromeOS",ot=()=>un({current:void 0,version:tr.unknown()}),un=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(rl),isiOS:r(Ii),isAndroid:r(ws),isMacOS:r(j),isLinux:r(Ea),isSolaris:r(le),isFreeBSD:r(he),isChromeOS:r(Ie)}},fo={unknown:ot,nu:un,windows:je(rl),ios:je(Ii),android:je(ws),linux:je(Ea),macos:je(j),solaris:je(le),freebsd:je(he),chromeos:je(Ie)},os={detect:(e,n,o)=>{const r=xl.browsers(),c=xl.oses(),u=n.bind(y=>ma(r,y)).orThunk(()=>Va(r,e)).fold(zl.unknown,zl.nu),f=Cl(c,e).fold(fo.unknown,fo.nu),b=Ft(f,u,e,o);return{browser:u,os:f,deviceType:b}}},ir=e=>window.matchMedia(e).matches;let sr=Qt(()=>os.detect(navigator.userAgent,$.from(navigator.userAgentData),ir));const gr=()=>sr(),Ua=navigator.userAgent,Br=gr(),zr=Br.browser,al=Br.os,cl=Br.deviceType,Rn=Ua.indexOf("Windows Phone")!==-1,Ao={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:zr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!zr.isIE(),windowsPhone:Rn,browser:{current:zr.current,version:zr.version,isChromium:zr.isChromium,isEdge:zr.isEdge,isFirefox:zr.isFirefox,isIE:zr.isIE,isOpera:zr.isOpera,isSafari:zr.isSafari},os:{current:al.current,version:al.version,isAndroid:al.isAndroid,isChromeOS:al.isChromeOS,isFreeBSD:al.isFreeBSD,isiOS:al.isiOS,isLinux:al.isLinux,isMacOS:al.isMacOS,isSolaris:al.isSolaris,isWindows:al.isWindows},deviceType:{isDesktop:cl.isDesktop,isiPad:cl.isiPad,isiPhone:cl.isiPhone,isPhone:cl.isPhone,isTablet:cl.isTablet,isTouch:cl.isTouch,isWebView:cl.isWebView}},Ls=/^\s*|\s*$/g,B=e=>At(e)?"":(""+e).replace(Ls,""),G=(e,n)=>n?n==="array"&&da(e)?!0:typeof e===n:e!==void 0,ne=(e,n,o={})=>{const r=oe(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},we=hn,Et=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(hn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Fn=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),js(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Fn(c,n,o,r),!0)))},Ge={trim:B,isArray:da,is:G,toArray:Hl,makeMap:ne,each:js,map:ec,grep:ce,inArray:Z,hasOwn:we,extend:Et,walk:Fn,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Zn(e)?e:e===""?[]:ec(e.split(n||","),B),_addCacheSuffix:e=>{const n=Ao.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},ha=(e,n,o=qt)=>e.exists(r=>o(r,n)),Ss=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Pr=(e,n,o)=>e.isSome()&&n.isSome()?$.some(o(e.getOrDie(),n.getOrDie())):$.none(),Li=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?$.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):$.none(),Vn=(e,n)=>e?$.some(n):$.none();typeof window<"u"||Function("return this;")();const gi=8,_a=9,Fi=11,rr=1,Hi=3,Fs=e=>e.dom.nodeName.toLowerCase(),gu=e=>e.dom.nodeType,Ds=e=>n=>gu(n)===e,fp=e=>gu(e)===gi||Fs(e)==="#comment",ps=Ds(rr),Cr=Ds(Hi),El=Ds(_a),hu=Ds(Fi),Vi=e=>n=>ps(n)&&Fs(n)===e,ar=(e,n,o)=>{if(oe(o)||cn(o)||An(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},wr=(e,n,o)=>{ar(e.dom,n,o)},bs=(e,n)=>{const o=e.dom;lo(n,(r,c)=>{ar(o,c,r)})},hr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},oc=(e,n)=>$.from(hr(e,n)),hi=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Sr=(e,n)=>{e.dom.removeAttribute(n)},zi=e=>{const n=e.dom.attributes;return n==null||n.length===0},pu=e=>Mt(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Wa=(e,n)=>{const o=hr(e,n);return o===void 0||o===""?[]:o.split(" ")},bu=(e,n,o)=>{const c=Wa(e,n).concat([o]);return wr(e,n,c.join(" ")),!0},Vg=(e,n,o)=>{const r=be(Wa(e,n),c=>c!==o);return r.length>0?wr(e,n,r.join(" ")):Sr(e,n),!1},Cc=e=>e.dom.classList!==void 0,pi=e=>Wa(e,"class"),td=(e,n)=>bu(e,"class",n),pa=(e,n)=>Vg(e,"class",n),Ul=(e,n)=>on(pi(e),n)?pa(e,n):td(e,n),vu=(e,n)=>{Cc(e)?e.dom.classList.add(n):td(e,n)},Pd=e=>{(Cc(e)?e.dom.classList:pi(e)).length===0&&Sr(e,"class")},Ui=(e,n)=>{Cc(e)?e.dom.classList.remove(n):pa(e,n),Pd(e)},Em=(e,n)=>{const o=Cc(e)?e.dom.classList.toggle(n):Ul(e,n);return Pd(e),o},$d=(e,n)=>Cc(e)&&e.dom.classList.contains(n),ll=e=>e.style!==void 0&&X(e.style.getPropertyValue),zg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Id(r.childNodes[0])},_m=(e,n)=>{const r=(n||document).createElement(e);return Id(r)},yu=(e,n)=>{const r=(n||document).createTextNode(e);return Id(r)},Id=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},re={fromHtml:zg,fromTag:_m,fromText:yu,fromDom:Id,fromPoint:(e,n,o)=>$.from(e.dom.elementFromPoint(n,o)).map(Id)},Wi=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},ul=(e,n)=>{const o=e.dom;if(o.nodeType!==rr)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Am=e=>e.nodeType!==rr&&e.nodeType!==_a&&e.nodeType!==Fi||e.childElementCount===0,Om=(e,n)=>{const o=n===void 0?document:n.dom;return Am(o)?[]:Xt(o.querySelectorAll(e),re.fromDom)},Ug=(e,n)=>{const o=n===void 0?document:n.dom;return Am(o)?$.none():$.from(o.querySelector(e)).map(re.fromDom)},zo=(e,n)=>e.dom===n.dom,Aa=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Rf=e=>re.fromDom(e.dom.ownerDocument),_l=e=>El(e)?e:Rf(e),Dm=e=>re.fromDom(_l(e).dom.documentElement),Cu=e=>re.fromDom(_l(e).dom.defaultView),sc=e=>$.from(e.dom.parentNode).map(re.fromDom),Mf=e=>$.from(e.dom.parentElement).map(re.fromDom),nd=(e,n)=>{const o=X(n)?n:rn;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=re.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Wg=e=>{const n=o=>be(o,r=>!zo(e,r));return sc(e).map(Ur).map(n).getOr([])},wc=e=>$.from(e.dom.previousSibling).map(re.fromDom),Ld=e=>$.from(e.dom.nextSibling).map(re.fromDom),Rm=e=>er(Wi(e,wc)),od=e=>Wi(e,Ld),Ur=e=>Xt(e.dom.childNodes,re.fromDom),Fd=(e,n)=>{const o=e.dom.childNodes;return $.from(o[n]).map(re.fromDom)},Nf=e=>Fd(e,0),Mm=e=>Fd(e,e.dom.childNodes.length-1),wu=e=>e.dom.childNodes.length,Zg=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return re.fromDom(n)},Nm=e=>hu(e)&&ge(e.dom.host),rc=X(Element.prototype.attachShadow)&&X(Node.prototype.getRootNode),jg=je(rc),Wl=rc?e=>re.fromDom(e.dom.getRootNode()):_l,sd=e=>Nm(e)?e:Zg(_l(e)),Zi=e=>Nm(e)?e:re.fromDom(_l(e).dom.body),Al=e=>{const n=Wl(e);return Nm(n)?$.some(n):$.none()},Gg=e=>re.fromDom(e.dom.host),qg=e=>{if(jg()&&ge(e.target)){const n=re.fromDom(e.target);if(ps(n)&&Bf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Jn(o)}}return $.from(e.target)},Bf=e=>ge(e.dom.shadowRoot),Zl=e=>{const n=Cr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Al(re.fromDom(n)).fold(()=>o.body.contains(n),O(Zl,Gg))},E=(e,n,o)=>{if(!oe(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ll(e)&&e.style.setProperty(n,o)},N=(e,n)=>{ll(e)&&e.style.removeProperty(n)},U=(e,n,o)=>{const r=e.dom;E(r,n,o)},ie=(e,n)=>{const o=e.dom;lo(n,(r,c)=>{E(o,c,r)})},pe=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!Zl(e)?ft(o,n):c},ft=(e,n)=>ll(e)?e.style.getPropertyValue(n):"",pn=(e,n)=>{const o=e.dom,r=ft(o,n);return $.from(r).filter(c=>c.length>0)},go=e=>{const n={},o=e.dom;if(ll(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},to=(e,n)=>{const o=e.dom;N(o,n),ha(oc(e,"style").map(Bo),"")&&Sr(e,"style")},Yt=e=>e.dom.offsetWidth,ho=(e,n)=>{sc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},qs=(e,n)=>{Ld(e).fold(()=>{sc(e).each(c=>{Ar(c,n)})},r=>{ho(r,n)})},Oa=(e,n)=>{Nf(e).fold(()=>{Ar(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Ar=(e,n)=>{e.dom.appendChild(n.dom)},Bm=(e,n)=>{ho(e,n),Ar(n,e)},w0=(e,n)=>{Be(n,(o,r)=>{const c=r===0?e:n[r-1];qs(c,o)})},Pn=(e,n)=>{Be(n,o=>{Ar(e,o)})},ur=e=>{e.dom.textContent="",Be(Ur(e),n=>{Uo(n)})},Uo=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Za=e=>{const n=Ur(e);n.length>0&&w0(e,n),Uo(e)},ba=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Ur(re.fromDom(r))},Pf=e=>Xt(e,re.fromDom),$f=e=>e.dom.innerHTML,Kg=(e,n)=>{const r=Rf(e).dom,c=re.fromDom(r.createDocumentFragment()),u=ba(n,r);Pn(c,u),ur(e),Ar(e,c)},ji=e=>{const n=re.fromTag("div"),o=re.fromDom(e.dom.cloneNode(!0));return Ar(n,o),$f(n)},If=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),S0=e=>{const n=re.fromDom(qg(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=gn(r,o);return If(n,e.clientX,e.clientY,o,r,c,e)},w2=(e,n)=>o=>{e(o)&&n(S0(o))},xr=(e,n,o,r,c)=>{const u=w2(o,r);return e.dom.addEventListener(n,u,c),{unbind:Le(nb,e,n,u,c)}},Yg=(e,n,o,r)=>xr(e,n,o,r,!1),nb=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},gp=(e,n)=>({left:e,top:n,translate:(r,c)=>gp(e+r,n+c)}),Lf=gp,ob=e=>{const n=e.getBoundingClientRect();return Lf(n.left,n.top)},rd=(e,n)=>e!==void 0?e:n!==void 0?n:0,Rs=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Lf(o.offsetLeft,o.offsetTop);const u=rd(r==null?void 0:r.pageYOffset,c.scrollTop),f=rd(r==null?void 0:r.pageXOffset,c.scrollLeft),b=rd(c.clientTop,o.clientTop),y=rd(c.clientLeft,o.clientLeft);return Gn(e).translate(f-y,u-b)},Gn=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Lf(r.offsetLeft,r.offsetTop):Zl(e)?ob(n):Lf(0,0)},ja=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Lf(o,r)},Gi=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Su=(e,n)=>{gr().browser.isSafari()&&X(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Xg=e=>{const n=e===void 0?window:e;return gr().browser.isFirefox()?$.none():$.from(n.visualViewport)},Pm=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),sb=e=>{const n=e===void 0?window:e,o=n.document,r=ja(re.fromDom(o));return Xg(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Pm(r.left,r.top,u,f)},c=>Pm(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},rb=(e,n)=>be(Ur(e),n),$m=(e,n)=>{let o=[];return Be(Ur(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat($m(r,n))}),o};var Jg=(e,n,o,r,c)=>e(o,r)?$.some(o):X(c)&&c(o)?$.none():n(o,r,c);const Im=(e,n,o)=>{let r=e.dom;const c=X(o)?o:rn;for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r);if(n(u))return $.some(u);if(c(u))break}return $.none()},bi=(e,n,o)=>Jg((c,u)=>u(c),Im,e,n,o),vi=(e,n)=>{const o=e.dom;return o.parentNode?x0(re.fromDom(o.parentNode),r=>!zo(e,r)&&n(r)):$.none()},x0=(e,n)=>{const o=c=>n(re.fromDom(c));return jn(e.dom.childNodes,o).map(re.fromDom)},ad=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=re.fromDom(r.childNodes[c]);if(n(u))return $.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return $.none()};return o(e.dom)},xu=(e,n,o)=>Im(e,r=>ul(r,n),o),Ff=(e,n)=>Ug(n,e),cd=(e,n,o)=>Jg((c,u)=>ul(c,u),xu,e,n,o),Qg=(e,n,o)=>xu(e,n,o).isSome();class Wr{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Ol=e=>n=>!!n&&n.nodeType===e,Lm=e=>!!e&&!Object.getPrototypeOf(e),_t=Ol(1),Fm=e=>{const n=e.toLowerCase();return o=>ge(o)&&o.nodeName.toLowerCase()===n},jl=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return on(n,r)}return!1}},eh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(_t(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},th=e=>n=>_t(n)&&n.hasAttribute(e),S2=(e,n)=>o=>_t(o)&&o.getAttribute(e)===n,Tu=e=>_t(e)&&e.hasAttribute("data-mce-bogus"),qT=e=>_t(e)&&e.getAttribute("data-mce-bogus")==="all",Da=e=>_t(e)&&e.tagName==="TABLE",nn=e=>n=>!!(_t(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Mc=jl(["textarea","input"]),et=Ol(3),ab=Ol(4),cb=Ol(7),Gl=Ol(8),Nc=Ol(9),Hm=Ol(11),pr=Fm("br"),ta=Fm("img"),Bc=nn("true"),Ts=nn("false"),ku=jl(["td","th"]),lb=jl(["td","th","caption"]),qi=jl(["video","audio","object","embed"]),nh=Fm("li"),Vm="\uFEFF",$r=" ",oh=e=>e===Vm,zm=e=>e.replace(/\uFEFF/g,""),Fo=(e,n)=>Om(n,e),ac=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?$.from(u.dom.nodeValue):$.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Cr,"text"),Yi=e=>ac.get(e),Zc=e=>ac.getOption(e),ib=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Ra=["td","th"],cc=["thead","tbody","tfoot"],hp=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Ze=["h1","h2","h3","h4","h5","h6"],dl=["li","dd","dt"],T0=["ul","ol","dl"],Ir=["pre","script","textarea","style"],Hf=["pre"].concat(Ze),ld=e=>{let n;return o=>(n=n||Ko(e,We),hn(n,Fs(o)))},Zr=ld(ib),k0=e=>Fs(e)==="table",ql=e=>ps(e)&&!Zr(e),Xi=e=>ps(e)&&Fs(e)==="br",jc=ld(hp),Ho=ld(T0),Dl=ld(dl),Hd=ld(cc),Ma=ld(Ra),Vf=ld(Ir),zf=ld(Hf),Uf=e=>zf(e)||ql(e),Gc=e=>{const n=[];let o=e.dom;for(;o;)n.push(re.fromDom(o)),o=o.lastChild;return n},pp=e=>{const n=Fo(e,"br"),o=be(Gc(e).slice(-1),Xi);n.length===o.length&&Be(o,Uo)},Ce=()=>{const e=re.fromTag("br");return wr(e,"data-mce-bogus","1"),e},na=e=>{ur(e),Ar(e,Ce())},ub=e=>{Mm(e).each(n=>{wc(n).each(o=>{Zr(e)&&Xi(n)&&Zr(o)&&Uo(n)})})},Hs=Vm,Kl=oh,oa=zm,sa=_t,w=et,T=e=>(w(e)&&(e=e.parentNode),sa(e)&&e.hasAttribute("data-mce-caret")),L=e=>w(e)&&Kl(e.data),H=e=>T(e)||L(e),ue=e=>e.firstChild!==e.lastChild||!pr(e.firstChild),Re=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Hs),u=e.parentNode;if(n){const f=e.previousSibling;if(w(f)){if(H(f))return f;if(ks(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(w(f)){if(H(f))return f;if(no(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},tt=e=>{const n=e.container();return et(n)?n.data.charAt(e.offset())===Hs||e.isAtStart()&&L(n.previousSibling):!1},Tt=e=>{const n=e.container();return et(n)?n.data.charAt(e.offset()-1)===Hs||e.isAtEnd()&&L(n.nextSibling):!1},zn=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Ce().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},no=e=>w(e)&&e.data[0]===Hs,ks=e=>w(e)&&e.data[e.data.length-1]===Hs,ss=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Tu(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},vs=e=>e&&e.hasAttribute("data-mce-caret")?(ss(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Pc=e=>T(e.startContainer),Yl=Bc,Eu=Ts,id=pr,sh=et,ud=jl(["script","style","textarea"]),_u=jl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Um=jl(["table"]),Au=H,qc=e=>Au(e)?!1:sh(e)?!ud(e.parentNode):_u(e)||id(e)||Um(e)||bp(e),rh=e=>_t(e)&&e.getAttribute("unselectable")==="true",bp=e=>!rh(e)&&Eu(e),E0=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(bp(o))return!1;if(Yl(o))return!0}return!0},xn=e=>bp(e)?!Mt(is(e.getElementsByTagName("*")),(n,o)=>n||Yl(o),!1):!1,ys=e=>_u(e)||xn(e),va=(e,n)=>qc(e)&&E0(e,n),Sc=/^[ \t\r\n]*$/,yi=e=>Sc.test(e),xc=e=>" \f	\v".indexOf(e)!==-1,ml=e=>e===`
`||e==="\r",Ou=(e,n)=>n<e.length&&n>=0?ml(e[n]):!1,vp=(e,n=4,o=!0,r=!0)=>{const c=fa(" ",n),u=e.replace(/\t/g,c);return Mt(u,(b,y)=>xc(y)||y===$r?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Ou(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+$r}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:ml(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},Vd=(e,n)=>{const o=re.fromDom(n),r=re.fromDom(e);return Qg(r,"pre,code",Le(zo,o))},Wm=(e,n)=>et(e)&&yi(e.data)&&!Vd(e,n),KT=e=>_t(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Zm=(e,n)=>qc(e)&&!Wm(e,n)||KT(e)||YT(e),YT=th("data-mce-bookmark"),Wf=th("data-mce-bogus"),yp=S2("data-mce-bogus","all"),Cp=(e,n)=>{let o=0;if(Zm(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new Wr(r,e);do{if(n){if(yp(r)){r=c.next(!0);continue}if(Wf(r)){r=c.next();continue}}if(pr(r)){o++,r=c.next();continue}if(Zm(r,e))return!1;r=c.next()}while(r);return o<=1}},jr=(e,n=!0)=>Cp(e.dom,n),zd="data-mce-block",XT=e=>be(Dn(e),n=>!/[A-Z]/.test(n)),db=e=>XT(e).join(","),Or=(e,n)=>ge(n.querySelector(e))?(n.setAttribute(zd,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(zd),!1),x2=(e,n)=>{const o=db(e.getTransparentElements()),r=db(e.getBlockElements());return be(n.querySelectorAll(o),c=>Or(r,c))},Ud=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(jr(re.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},wp=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Ud(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Ud(u,!1),jr(re.fromDom(c))||r.insertBefore(c,e),jr(re.fromDom(n))||r.insertBefore(n,e),jr(re.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},_0=(e,n,o)=>{const r=e.getBlockElements(),c=re.fromDom(n),u=b=>Fs(b)in r,f=b=>zo(b,c);Be(Pf(o),b=>{Im(b,u,f).each(y=>{const x=rb(b,R=>u(R)&&!e.isValidChild(Fs(y),Fs(R)));if(x.length>0){const R=Mf(y);Be(x,P=>{Im(P,u,f).each(F=>{wp(F.dom,P.dom)})}),R.each(P=>x2(e,P.dom))}})})},Ji=(e,n)=>{const o=x2(e,n);_0(e,n,o)},Xl=(e,n)=>{if(Sp(e,n)){const o=db(e.getBlockElements());Or(o,n)}},jm=(e,n,o)=>{const r=u=>zo(u,re.fromDom(n)),c=nd(re.fromDom(o),r);Lo(c,c.length-2).filter(ps).fold(()=>Ji(e,n),u=>Ji(e,u.dom))},ah=e=>e.hasAttribute(zd),mb=(e,n)=>hn(e.getTransparentElements(),n),Sp=(e,n)=>_t(n)&&mb(e,n.nodeName),Zf=(e,n)=>Sp(e,n)&&ah(n),fb=(e,n)=>n.type===1&&mb(e,n.name)&&oe(n.attr(zd)),T2=(e,n)=>n.type===1&&mb(e,n.name)&&jo(n.attr(zd)),JT=gr().browser,gb=e=>jn(e,ps),xp=e=>JT.isFirefox()&&Fs(e)==="table"?gb(Ur(e)).filter(n=>Fs(n)==="caption").bind(n=>gb(od(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,dd=(e,n)=>e.children&&on(e.children,n),ch=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&pe(re.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!dd(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!dd(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=xp(re.fromDom(n))}return{x:r,y:c}},Wd=(e,n={})=>{let o=0;const r={},c=re.fromDom(e),u=_l(c),f=q=>{n.referrerPolicy=q},b=q=>{n.contentCssCors=q},y=q=>{Ar(sd(c),q)},x=q=>{const ee=sd(c);Ff(ee,"#"+q).each(Uo)},R=q=>No(r,q).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),P=q=>new Promise((ee,me)=>{let de;const ye=Ge._addCacheSuffix(q),xe=R(ye);r[ye]=xe,xe.count++;const Ue=(Se,St)=>{Be(Se,$s),xe.status=St,xe.passed=[],xe.failed=[],de&&(de.onload=null,de.onerror=null,de=null)},mt=()=>Ue(xe.passed,2),lt=()=>Ue(xe.failed,3);if(ee&&xe.passed.push(ee),me&&xe.failed.push(me),xe.status===1)return;if(xe.status===2){mt();return}if(xe.status===3){lt();return}xe.status=1;const Oe=re.fromTag("link",u.dom);bs(Oe,{rel:"stylesheet",type:"text/css",id:xe.id}),n.contentCssCors&&wr(Oe,"crossOrigin","anonymous"),n.referrerPolicy&&wr(Oe,"referrerpolicy",n.referrerPolicy),de=Oe.dom,de.onload=mt,de.onerror=lt,y(Oe),wr(Oe,"href",ye)}),F=q=>Promise.allSettled(Xt(q,me=>P(me).then(je(me)))).then(me=>{const de=Fe(me,ye=>ye.status==="fulfilled");return de.fail.length>0?Promise.reject(Xt(de.fail,ye=>ye.reason)):Xt(de.pass,ye=>ye.value)}),Y=q=>{const ee=Ge._addCacheSuffix(q);No(r,ee).each(me=>{--me.count===0&&(delete r[ee],x(me.id))})};return{load:P,loadAll:F,unload:Y,unloadAll:q=>{Be(q,ee=>{Y(ee)})},_setReferrerPolicy:f,_setContentCssCors:b}},Tp=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Wl(o).dom;return $.from(e.get(u)).getOrThunk(()=>{const f=Wd(u,r);return e.set(u,f),f})}}})(),A0=e=>e.nodeName.toLowerCase()==="span",pb=(e,n)=>ge(e)&&(Zm(e,n)||ql(re.fromDom(e))),k2=(e,n)=>{const o=new Wr(e,n).prev(!1),r=new Wr(e,n).next(!1),c=jo(o)||pb(o,n),u=jo(r)||pb(r,n);return c&&u},O0=e=>A0(e)&&e.getAttribute("data-mce-type")==="bookmark",bb=(e,n)=>et(e)&&e.data.length>0&&k2(e,n),es=e=>_t(e)?e.childNodes.length>0:!1,mn=e=>Hm(e)||Nc(e),Zd=(e,n,o)=>{var r;const c=o||n;if(_t(n)&&O0(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)Zd(e,u[f],c);if(_t(n)){const f=n.childNodes;f.length===1&&O0(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!mn(n)&&!Zm(n,c)&&!es(n)&&!bb(n,c)&&e.remove(n),n},D0=Ge.makeMap,jd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vb=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E2=/[<>&\"\']/g,Es=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,_2={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Gd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},A2={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Xe=e=>{const n=re.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},md=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!Gd[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},lh=md("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),kp=(e,n)=>e.replace(n?jd:vb,o=>Gd[o]||o),QT=e=>(""+e).replace(E2,n=>Gd[n]||n),jf=(e,n)=>e.replace(n?jd:vb,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Gd[o]||"&#"+o.charCodeAt(0)+";"),ih=(e,n,o)=>{const r=o||lh;return e.replace(n?jd:vb,c=>Gd[c]||r[c]||c)},Na={encodeRaw:kp,encodeAllRaw:QT,encodeNumeric:jf,encodeNamed:ih,getEncodeFunc:(e,n)=>{const o=md(n)||lh,r=(f,b)=>f.replace(b?jd:vb,y=>Gd[y]!==void 0?Gd[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>ih(f,b,o),u=D0(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:ih:u.numeric?jf:kp},decode:e=>e.replace(Es,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):_2[o]||String.fromCharCode(o)):A2[n]||lh[n]||Xe(n))},dr={},Ci={},ek={},Jl=Ge.makeMap,$c=Ge.each,qd=Ge.extend,Gm=Ge.explode,D2=Ge.inArray,lc=(e,n)=>(e=Ge.trim(e),e?e.split(n||" "):[]),R2=(e,n={})=>{const o=Jl(e," ",Jl(e.toUpperCase()," "));return qd(o,n)},M2=e=>R2("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),qm=e=>{const n={};let o,r,c,u;const f=(y,x="",R="")=>{const P=lc(R),F=lc(y);let Y=F.length;for(;Y--;){const J=lc([o,x].join(" "));n[F[Y]]={attributes:Ko(J,()=>({})),attributesOrder:J,children:Ko(P,je(ek))}}},b=(y,x)=>{const R=lc(y),P=lc(x);let F=R.length;for(;F--;){const Y=n[R[F]];for(let J=0,q=P.length;J<q;J++)Y.attributes[P[J]]={},Y.attributesOrder.push(P[J])}};if(dr[e])return dr[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),$c(lc(y),R=>{f(R,"",c)});const x="center dir isindex noframes";r=[r,x].join(" "),u=[r,c].join(" "),$c(lc(x),R=>{f(R,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&Be([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),$c(lc("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,dr[e]=n,n},R0=(e,n)=>{if(e){const o={};return oe(e)&&(e={"*":e}),$c(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?Jl(r,/[, ]/):Gm(r,/[, ]/)}),o}else return},Du=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(Mn,Wo,Xr)=>{const Bs=e[Mn];if(Bs)return Jl(Bs,/[, ]/,Jl(Bs.toUpperCase(),/[, ]/));{let kr=Ci[Mn];return kr||(kr=R2(Wo,Xr),Ci[Mn]=kr),kr}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=qm(y);e.verify_html===!1&&(e.valid_elements="*[*]");const R=R0(e.valid_styles),P=R0(e.invalid_styles,"map"),F=R0(e.valid_classes,"map"),Y=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),J=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ee=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),me="td th iframe video audio object script code",de=b("non_empty_elements",me+" pre",q),ye=b("move_caret_before_on_enter_elements",me+" table",q),xe=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ue=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",xe),mt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),lt=b("transparent_elements","a ins del canvas map");$c("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Mn=>{f[Mn]=new RegExp("</"+Mn+"[^>]*>","gi")});const Oe=Mn=>new RegExp("^"+Mn.replace(/([?+*])/g,".$1")+"$"),Se=Mn=>{const Wo=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Xr=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Bs=/[*?+]/;if(Mn){const kr=lc(Mn,",");let Vr,cr;o["@"]&&(Vr=o["@"].attributes,cr=o["@"].attributesOrder);for(let ia=0,uu=kr.length;ia<uu;ia++){let Uc=Wo.exec(kr[ia]);if(Uc){const wm=Uc[1],du=Uc[2],Y1=Uc[3],X1=Uc[5],Sm={},Md=[],Er={attributes:Sm,attributesOrder:Md};if(wm==="#"&&(Er.paddEmpty=!0),wm==="-"&&(Er.removeEmpty=!0),Uc[4]==="!"&&(Er.removeEmptyAttrs=!0),Vr&&(lo(Vr,(Yu,xm)=>{Sm[xm]=Yu}),cr&&Md.push(...cr)),X1){const Yu=lc(X1,"|");for(let xm=0,Xu=Yu.length;xm<Xu;xm++)if(Uc=Xr.exec(Yu[xm]),Uc){const Ju={},Tm=Uc[1],bc=Uc[2].replace(/[\\:]:/g,":"),km=Uc[3],Df=Uc[4];if(Tm==="!"&&(Er.attributesRequired=Er.attributesRequired||[],Er.attributesRequired.push(bc),Ju.required=!0),Tm==="-"){delete Sm[bc],Md.splice(D2(Md,bc),1);continue}if(km&&(km==="="&&(Er.attributesDefault=Er.attributesDefault||[],Er.attributesDefault.push({name:bc,value:Df}),Ju.defaultValue=Df),km==="~"&&(Er.attributesForced=Er.attributesForced||[],Er.attributesForced.push({name:bc,value:Df}),Ju.forcedValue=Df),km==="<"&&(Ju.validValues=Jl(Df,"?"))),Bs.test(bc)){const Qu=Ju;Er.attributePatterns=Er.attributePatterns||[],Qu.pattern=Oe(bc),Er.attributePatterns.push(Qu)}else Sm[bc]||Md.push(bc),Sm[bc]=Ju}}if(!Vr&&du==="@"&&(Vr=Sm,cr=Md),Y1&&(Er.outputName=du,o[Y1]=Er),Bs.test(du)){const Yu=Er;Yu.pattern=Oe(du),c.push(Yu)}else o[du]=Er}}}},St=Mn=>{c=[],Be(Dn(o),Wo=>{delete o[Wo]}),Se(Mn),$c(x,(Wo,Xr)=>{r[Xr]=Wo.children})},en=Mn=>{const Wo=/^(~)?(.+)$/;Mn&&(delete Ci.text_block_elements,delete Ci.block_elements,$c(lc(Mn,","),Xr=>{const Bs=Wo.exec(Xr);if(Bs){const kr=Bs[1]==="~",Vr=kr?"span":"div",cr=Bs[2];if(r[cr]=r[Vr],u[cr]=Vr,de[cr.toUpperCase()]={},de[cr]={},kr||(Ue[cr.toUpperCase()]={},Ue[cr]={}),!o[cr]){let ia=o[Vr];ia=qd({},ia),delete ia.removeEmptyAttrs,delete ia.removeEmpty,o[cr]=ia}$c(r,(ia,uu)=>{ia[Vr]&&(r[uu]=ia=qd({},r[uu]),ia[cr]=ia[Vr])})}}))},sn=Mn=>{const Wo=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete dr[y],Mn&&$c(lc(Mn,","),Xr=>{const Bs=Wo.exec(Xr);if(Bs){const kr=Bs[1];let Vr;kr?Vr=r[Bs[2]]:Vr=r[Bs[2]]={"#comment":{}},Vr=r[Bs[2]],$c(lc(Bs[3],"|"),cr=>{kr==="-"?delete Vr[cr]:Vr[cr]={}})}})},Yn=Mn=>{const Wo=o[Mn];if(Wo)return Wo;let Xr=c.length;for(;Xr--;){const Bs=c[Xr];if(Bs.pattern.test(Mn))return Bs}};e.valid_elements?St(e.valid_elements):($c(x,(Mn,Wo)=>{o[Wo]={attributes:Mn.attributes,attributesOrder:Mn.attributesOrder},r[Wo]=Mn.children}),$c(lc("strong/b em/i"),Mn=>{const Wo=lc(Mn,"/");o[Wo[1]].outputName=Wo[0]}),$c(mt,(Mn,Wo)=>{o[Wo]&&(e.padd_empty_block_inline_children&&(o[Wo].paddInEmptyBlock=!0),o[Wo].removeEmpty=!0)}),$c(lc("ol ul blockquote a table tbody"),Mn=>{o[Mn]&&(o[Mn].removeEmpty=!0)}),$c(lc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Mn=>{o[Mn].paddEmpty=!0}),$c(lc("span"),Mn=>{o[Mn].removeEmptyAttrs=!0})),en(e.custom_elements),sn(e.valid_children),Se(e.extended_valid_elements),sn("+ol[ul|ol],+ul[ul|ol]"),$c({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Mn,Wo)=>{o[Wo]&&(o[Wo].parentsRequired=lc(Mn))}),e.invalid_elements&&$c(Gm(e.invalid_elements),Mn=>{o[Mn]&&delete o[Mn]}),Yn("span")||Se("span[!data-mce-type|*]");const _o=je(R),ls=je(P),rs=je(F),la=je(ee),el=je(Ue),rt=je(xe),Xn=je(mt),ln=je(Object.seal(q)),Ys=je(J),wt=je(de),kn=je(ye),bn=je(Y),pt=je(lt),xo=je(Object.seal(f)),vo=(Mn,Wo)=>{const Xr=r[Mn.toLowerCase()];return!!(Xr&&Xr[Wo.toLowerCase()])},La=(Mn,Wo)=>{const Xr=Yn(Mn);if(Xr)if(Wo){if(Xr.attributes[Wo])return!0;const Bs=Xr.attributePatterns;if(Bs){let kr=Bs.length;for(;kr--;)if(Bs[kr].pattern.test(Wo))return!0}}else return!0;return!1},Us=je(u);return{type:y,children:r,elements:o,getValidStyles:_o,getValidClasses:rs,getBlockElements:el,getInvalidStyles:ls,getVoidElements:ln,getTextBlockElements:rt,getTextInlineElements:Xn,getBoolAttrs:la,getElementRule:Yn,getSelfClosingElements:Ys,getNonEmptyElements:wt,getMoveCaretBeforeOnEnterElements:kn,getWhitespaceElements:bn,getTransparentElements:pt,getSpecialElements:xo,isValidChild:vo,isValid:La,getCustomElements:Us,addValidElements:Se,setValidElements:St,addCustomElements:en,addValidChildren:sn}},yb=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=Vm;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let P=0;P<x.length;P++)u[x[P]]=y+P,u[y+P]=x[P];const R={parse:P=>{const F={};let Y=!1;const J=e.url_converter,q=e.url_converter_scope||R,ee=(Oe,Se,St)=>{const en=F[Oe+"-top"+Se];if(!en)return;const sn=F[Oe+"-right"+Se];if(!sn)return;const Yn=F[Oe+"-bottom"+Se];if(!Yn)return;const _o=F[Oe+"-left"+Se];if(!_o)return;const ls=[en,sn,Yn,_o];let rs=ls.length-1;for(;rs--&&ls[rs]===ls[rs+1];);rs>-1&&St||(F[Oe+Se]=rs===-1?ls[0]:ls.join(" "),delete F[Oe+"-top"+Se],delete F[Oe+"-right"+Se],delete F[Oe+"-bottom"+Se],delete F[Oe+"-left"+Se])},me=Oe=>{const Se=F[Oe];if(!Se)return;const St=Se.split(" ");let en=St.length;for(;en--;)if(St[en]!==St[0])return!1;return F[Oe]=St[0],!0},de=(Oe,Se,St,en)=>{me(Se)&&me(St)&&me(en)&&(F[Oe]=F[Se]+" "+F[St]+" "+F[en],delete F[Se],delete F[St],delete F[en])},ye=Oe=>(Y=!0,u[Oe]),xe=(Oe,Se)=>(Y&&(Oe=Oe.replace(/\uFEFF[0-9]/g,St=>u[St])),Se||(Oe=Oe.replace(/\\([\'\";:])/g,"$1")),Oe),Ue=Oe=>String.fromCharCode(parseInt(Oe.slice(1),16)),mt=Oe=>Oe.replace(/\\[0-9a-f]+/gi,Ue),lt=(Oe,Se,St,en,sn,Yn)=>{if(sn=sn||Yn,sn)return sn=xe(sn),"'"+sn.replace(/\'/g,"\\'")+"'";if(Se=xe(Se||St||en||""),!e.allow_script_urls){const _o=Se.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(_o)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(_o))return""}return J&&(Se=J.call(q,Se,"style")),"url('"+Se.replace(/\'/g,"\\'")+"')"};if(P){P=P.replace(/[\u0000-\u001F]/g,""),P=P.replace(/\\[\"\';:\uFEFF]/g,ye).replace(/\"[^\"]+\"|\'[^\']+\'/g,Se=>Se.replace(/[;:]/g,ye));let Oe;for(;Oe=r.exec(P);){r.lastIndex=Oe.index+Oe[0].length;let Se=Oe[1].replace(c,"").toLowerCase(),St=Oe[2].replace(c,"");if(Se&&St){if(Se=mt(Se),St=mt(St),Se.indexOf(y)!==-1||Se.indexOf('"')!==-1||!e.allow_script_urls&&(Se==="behavior"||/expression\s*\(|\/\*|\*\//.test(St)))continue;Se==="font-weight"&&St==="700"?St="bold":(Se==="color"||Se==="background-color")&&(St=St.toLowerCase()),St=St.replace(o,lt),F[Se]=Y?xe(St,!0):St}}ee("border","",!0),ee("border","-width"),ee("border","-color"),ee("border","-style"),ee("padding",""),ee("margin",""),de("border","border-width","border-style","border-color"),F.border==="medium none"&&delete F.border,F["border-image"]==="none"&&delete F["border-image"]}return F},serialize:(P,F)=>{let Y="";const J=(ee,me)=>{const de=me[ee];if(de)for(let ye=0,xe=de.length;ye<xe;ye++){const Ue=de[ye],mt=P[Ue];mt&&(Y+=(Y.length>0?" ":"")+Ue+": "+mt+";")}},q=(ee,me)=>{if(!b||!me)return!0;let de=b["*"];return de&&de[ee]?!1:(de=b[me],!(de&&de[ee]))};return F&&f?(J("*",f),J(F,f)):lo(P,(ee,me)=>{ee&&q(me,F)&&(Y+=(Y.length>0?" ":"")+me+": "+ee+";")}),Y}};return R},M0={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ht=e=>e instanceof Event||X(e.initEvent),tk=e=>e.isDefaultPrevented===We||e.isDefaultPrevented===rn,N2=e=>At(e.preventDefault)||Ht(e),Cb=(e,n)=>{const o=n??{};for(const r in e)hn(M0,r)||(o[r]=e[r]);return ge(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},dh=(e,n,o,r)=>{var c;const u=Cb(n,r);return u.type=e,At(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),N2(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=We,X(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=We,X(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=We,u.stopPropagation()},tk(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?We:rn,u.isPropagationStopped=u.cancelBubble===!0?We:rn,u.isImmediatePropagationStopped=rn)),u},wb="mce-data-",mh=/^(?:mouse|contextmenu)|click/,Gf=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},fd=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},N0=e=>ge(e)&&mh.test(e.type),Km=(e,n)=>{const o=dh(e.type,e,document,n);if(N0(e)&&jo(e.pageX)&&!jo(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},nk=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{fd(e,"DOMContentLoaded",f),fd(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():Gf(e,"DOMContentLoaded",f),o.domLoaded||Gf(e,"load",f)};class Kd{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=wb+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=F=>{u.executeHandlers(Km(F||b.event),x)};if(!n||et(n)||Gl(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const R=o.split(" ");let P=R.length;for(;P--;){let F=R[P],Y=y,J=!1,q=!1;if(F==="DOMContentLoaded"&&(F="ready"),u.domLoaded&&F==="ready"&&n.readyState==="complete"){r.call(c,Km({type:F}));continue}!u.hasFocusIn&&(F==="focusin"||F==="focusout")&&(J=!0,q=F==="focusin"?"focus":"blur",Y=ee=>{const me=Km(ee||b.event);me.type=me.type==="focus"?"focusin":"focusout",u.executeHandlers(me,x)}),f=u.events[x][F],f?F==="ready"&&u.domLoaded?r(Km({type:F})):f.push({func:r,scope:c}):(u.events[x][F]=f=[{func:r,scope:c}],f.fakeName=q,f.capture=J,f.nativeHandler=Y,F==="ready"?nk(n,Y,u):Gf(n,q||F,Y,J))}return n=f=null,r}unbind(n,o,r){if(!n||et(n)||Gl(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],x=u[y];if(x){if(r){let R=x.length;for(;R--;)if(x[R].func===r){const P=x.nativeHandler,F=x.fakeName,Y=x.capture,J=x.slice(0,R).concat(x.slice(R+1));J.nativeHandler=P,J.fakeName=F,J.capture=Y,u[y]=J}}(!r||x.length===0)&&(delete u[y],fd(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else lo(u,(f,b)=>{fd(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(hn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||et(n)||Gl(n))return this;const c=Km({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||et(n)||Gl(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Kd.Event=new Kd;const qf=Ge.each,Sb=Ge.grep,xb="data-mce-style",Ep=Ge.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),_p=(e,n,o)=>{At(o)||o===""?Sr(e,n):wr(e,n,o)},ok=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Ru=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&et(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},fh=(e,n)=>{const o=hr(n,"style"),r=e.serialize(e.parse(o),Fs(n));_p(n,xb,r)},Qi=(e,n)=>An(e)?hn(Ep,n)?e+"":e+"px":e,fl=(e,n,o)=>{const r=ok(n);At(o)||o===""?to(e,r):U(e,r,Qi(o,r))},Ap=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const x=re.fromDom(f);X(n.url_converter)&&ge(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const R="data-mce-"+y;_p(x,R,b),_p(x,y,b)},get:(f,b)=>{const y=re.fromDom(f);return hr(y,"data-mce-"+b)||hr(y,b)}},u={style:{set:(f,b)=>{const y=re.fromDom(f);r&&_p(y,xb,b),Sr(y,"style"),oe(b)&&ie(y,e.parse(b))},get:f=>{const b=re.fromDom(f),y=hr(b,xb)||hr(b,"style");return e.serialize(e.parse(y),Fs(b))}}};return r&&(u.href=u.src=c),u},Ms=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=Tp.forElement(re.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],R=n.schema?n.schema:Du({}),P=yb({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),F=n.ownEvents?new Kd:Kd.Event,Y=R.getBlockElements(),J=Te=>oe(Te)?hn(Y,Te):_t(Te)&&(hn(Y,Te.nodeName)||Zf(R,Te)),q=Te=>Te&&e&&oe(Te)?e.getElementById(Te):Te,ee=Te=>{const _e=q(Te);return ge(_e)?re.fromDom(_e):null},me=(Te,_e,st="")=>{let Ke;const Jt=ee(Te);if(ge(Jt)&&ps(Jt)){const $o=mp[_e];$o&&$o.get?Ke=$o.get(Jt.dom,_e):Ke=hr(Jt,_e)}return ge(Ke)?Ke:st},de=Te=>{const _e=q(Te);return At(_e)?[]:_e.attributes},ye=(Te,_e,st)=>{ln(Te,Ke=>{if(_t(Ke)){const Jt=re.fromDom(Ke),$o=st===""?null:st,Qs=hr(Jt,_e),Cs=mp[_e];Cs&&Cs.set?Cs.set(Jt.dom,$o,_e):_p(Jt,_e,$o),Qs!==$o&&n.onSetAttrib&&n.onSetAttrib({attrElm:Jt.dom,attrName:_e,attrValue:$o})}})},xe=(Te,_e)=>Te.cloneNode(_e),Ue=()=>n.root_element||e.body,mt=Te=>{const _e=sb(Te);return{x:_e.x,y:_e.y,w:_e.width,h:_e.height}},lt=(Te,_e)=>ch(e.body,q(Te),_e),Oe=(Te,_e,st)=>{ln(Te,Ke=>{const Jt=re.fromDom(Ke);fl(Jt,_e,st),n.update_styles&&fh(P,Jt)})},Se=(Te,_e)=>{ln(Te,st=>{const Ke=re.fromDom(st);lo(_e,(Jt,$o)=>{fl(Ke,$o,Jt)}),n.update_styles&&fh(P,Ke)})},St=(Te,_e,st)=>{const Ke=q(Te);if(!(At(Ke)||!_t(Ke)))return st?pe(re.fromDom(Ke),ok(_e)):(_e=_e.replace(/-(\D)/g,(Jt,$o)=>$o.toUpperCase()),_e==="float"&&(_e="cssFloat"),Ke.style?Ke.style[_e]:void 0)},en=Te=>{const _e=q(Te);if(!_e)return{w:0,h:0};let st=St(_e,"width"),Ke=St(_e,"height");return(!st||st.indexOf("px")===-1)&&(st="0"),(!Ke||Ke.indexOf("px")===-1)&&(Ke="0"),{w:parseInt(st,10)||_e.offsetWidth||_e.clientWidth,h:parseInt(Ke,10)||_e.offsetHeight||_e.clientHeight}},sn=Te=>{const _e=q(Te),st=lt(_e),Ke=en(_e);return{x:st.x,y:st.y,w:Ke.w,h:Ke.h}},Yn=(Te,_e)=>{if(!Te)return!1;const st=Zn(Te)?Te:[Te];return zt(st,Ke=>ul(re.fromDom(Ke),_e))},_o=(Te,_e,st,Ke)=>{const Jt=[];let $o=q(Te);Ke=Ke===void 0;const Qs=st||(Ue().nodeName!=="BODY"?Ue().parentNode:null);if(oe(_e))if(_e==="*")_e=_t;else{const Cs=_e;_e=mu=>Yn(mu,Cs)}for(;$o&&!($o===Qs||At($o.nodeType)||Nc($o)||Hm($o));){if(!_e||_e($o))if(Ke)Jt.push($o);else return[$o];$o=$o.parentNode}return Ke?Jt:null},ls=(Te,_e,st)=>{const Ke=_o(Te,_e,st,!1);return Ke&&Ke.length>0?Ke[0]:null},rs=(Te,_e,st)=>{let Ke=_e;if(Te){oe(_e)&&(Ke=Jt=>Yn(Jt,_e));for(let Jt=Te[st];Jt;Jt=Jt[st])if(X(Ke)&&Ke(Jt))return Jt}return null},la=(Te,_e)=>rs(Te,_e,"nextSibling"),el=(Te,_e)=>rs(Te,_e,"previousSibling"),rt=Te=>X(Te.querySelectorAll),Xn=(Te,_e)=>{var st,Ke;const Jt=(Ke=(st=q(_e))!==null&&st!==void 0?st:n.root_element)!==null&&Ke!==void 0?Ke:e;return rt(Jt)?is(Jt.querySelectorAll(Te)):[]},ln=function(Te,_e,st){const Ke=st??this;if(Zn(Te)){const Jt=[];return qf(Te,($o,Qs)=>{const Cs=q($o);Cs&&Jt.push(_e.call(Ke,Cs,Qs))}),Jt}else{const Jt=q(Te);return Jt?_e.call(Ke,Jt):!1}},Ys=(Te,_e)=>{ln(Te,st=>{lo(_e,(Ke,Jt)=>{ye(st,Jt,Ke)})})},wt=(Te,_e)=>{ln(Te,st=>{const Ke=re.fromDom(st);Kg(Ke,_e)})},kn=(Te,_e,st,Ke,Jt)=>ln(Te,$o=>{const Qs=oe(_e)?e.createElement(_e):_e;return ge(st)&&Ys(Qs,st),Ke&&(!oe(Ke)&&Ke.nodeType?Qs.appendChild(Ke):oe(Ke)&&wt(Qs,Ke)),Jt?Qs:$o.appendChild(Qs)}),bn=(Te,_e,st)=>kn(e.createElement(Te),Te,_e,st,!0),pt=Na.decode,xo=Na.encodeAllRaw,vo=(Te,_e,st="")=>{let Ke="<"+Te;for(const Jt in _e)fr(_e,Jt)&&(Ke+=" "+Jt+'="'+xo(_e[Jt])+'"');return Os(st)&&hn(R.getVoidElements(),Te)?Ke+" />":Ke+">"+st+"</"+Te+">"},La=Te=>{const _e=e.createElement("div"),st=e.createDocumentFragment();st.appendChild(_e),Te&&(_e.innerHTML=Te);let Ke;for(;Ke=_e.firstChild;)st.appendChild(Ke);return st.removeChild(_e),st},Us=(Te,_e)=>ln(Te,st=>{const Ke=re.fromDom(st);return _e&&Be(Ur(Ke),Jt=>{Cr(Jt)&&Jt.dom.length===0?Uo(Jt):ho(Ke,Jt)}),Uo(Ke),Ke.dom}),Mn=Te=>ln(Te,_e=>{const st=_e.attributes;for(let Ke=st.length-1;Ke>=0;Ke--)_e.removeAttributeNode(st.item(Ke))}),Wo=Te=>P.parse(Te),Xr=(Te,_e)=>P.serialize(Te,_e),Bs=Te=>{if(Lg!==Ms.DOM&&e===document){if(o[Te])return;o[Te]=!0}let _e=e.getElementById("mceDefaultStyles");if(!_e){_e=e.createElement("style"),_e.id="mceDefaultStyles",_e.type="text/css";const st=e.head;st.firstChild?st.insertBefore(_e,st.firstChild):st.appendChild(_e)}_e.styleSheet?_e.styleSheet.cssText+=Te:_e.appendChild(e.createTextNode(Te))},kr=Te=>{Te||(Te=""),Be(Te.split(","),_e=>{c[_e]=!0,y.load(_e).catch(bt)})},Vr=(Te,_e,st)=>{ln(Te,Ke=>{if(_t(Ke)){const Jt=re.fromDom(Ke),$o=_e.split(" ");Be($o,Qs=>{ge(st)?(st?vu:Ui)(Jt,Qs):Em(Jt,Qs)})}})},cr=(Te,_e)=>{Vr(Te,_e,!0)},ia=(Te,_e)=>{Vr(Te,_e,!1)},uu=(Te,_e)=>{const st=ee(Te),Ke=_e.split(" ");return ge(st)&&mo(Ke,Jt=>$d(st,Jt))},Uc=Te=>{ln(Te,_e=>to(re.fromDom(_e),"display"))},wm=Te=>{ln(Te,_e=>U(re.fromDom(_e),"display","none"))},du=Te=>{const _e=ee(Te);return ge(_e)&&ha(pn(_e,"display"),"none")},Y1=Te=>(Te||"mce_")+u++,X1=Te=>{const _e=ee(Te);return ge(_e)?_t(_e.dom)?_e.dom.outerHTML:ji(_e):""},Sm=(Te,_e)=>{ln(Te,st=>{_t(st)&&(st.outerHTML=_e)})},Md=(Te,_e)=>{const st=q(_e);return ln(Te,Ke=>{const Jt=st==null?void 0:st.parentNode,$o=st==null?void 0:st.nextSibling;return Jt&&($o?Jt.insertBefore(Ke,$o):Jt.appendChild(Ke)),Ke})},Er=(Te,_e,st)=>ln(_e,Ke=>{var Jt;const $o=Zn(_e)?Te.cloneNode(!0):Te;return st&&qf(Sb(Ke.childNodes),Qs=>{$o.appendChild(Qs)}),(Jt=Ke.parentNode)===null||Jt===void 0||Jt.replaceChild($o,Ke),Ke}),Yu=(Te,_e)=>{if(Te.nodeName!==_e.toUpperCase()){const st=bn(_e);return qf(de(Te),Ke=>{ye(st,Ke.nodeName,me(Te,Ke.nodeName))}),Er(st,Te,!0),st}else return Te},xm=(Te,_e)=>{let st=Te;for(;st;){let Ke=_e;for(;Ke&&st!==Ke;)Ke=Ke.parentNode;if(st===Ke)break;st=st.parentNode}return!st&&Te.ownerDocument?Te.ownerDocument.documentElement:st},Xu=Te=>{if(_t(Te)){const _e=Te.nodeName.toLowerCase()==="a"&&!me(Te,"href")&&me(Te,"id");if(me(Te,"name")||me(Te,"data-mce-bookmark")||_e)return!0}return!1},Ju=(Te,_e)=>{let st=0;if(Xu(Te))return!1;const Ke=Te.firstChild;if(Ke){const Jt=new Wr(Ke,Te),$o=R?R.getWhitespaceElements():{},Qs=_e||(R?R.getNonEmptyElements():null);let Cs=Ke;do{if(_t(Cs)){const mu=Cs.getAttribute("data-mce-bogus");if(mu){Cs=Jt.next(mu==="all");continue}const f2=Cs.nodeName.toLowerCase();if(Qs&&Qs[f2]){if(f2==="br"){st++,Cs=Jt.next();continue}return!1}if(Xu(Cs))return!1}if(Gl(Cs)||et(Cs)&&!yi(Cs.data)||et(Cs)&&Cs.parentNode&&$o[Cs.parentNode.nodeName]&&yi(Cs.data))return!1;Cs=Jt.next()}while(Cs)}return st<=1},Tm=()=>e.createRange(),bc=(Te,_e,st)=>{let Ke=Tm(),Jt,$o;if(Te&&_e&&Te.parentNode&&_e.parentNode){const Qs=Te.parentNode;return Ke.setStart(Qs,Ru(Te)),Ke.setEnd(_e.parentNode,Ru(_e)),Jt=Ke.extractContents(),Ke=Tm(),Ke.setStart(_e.parentNode,Ru(_e)+1),Ke.setEnd(Qs,Ru(Te)+1),$o=Ke.extractContents(),Qs.insertBefore(Zd(Lg,Jt),Te),st?Qs.insertBefore(st,Te):Qs.insertBefore(_e,Te),Qs.insertBefore(Zd(Lg,$o),Te),Us(Te),st||_e}else return},km=(Te,_e,st,Ke)=>{if(Zn(Te)){let Jt=Te.length;const $o=[];for(;Jt--;)$o[Jt]=km(Te[Jt],_e,st,Ke);return $o}else return n.collect&&(Te===e||Te===r)&&x.push([Te,_e,st,Ke]),F.bind(Te,_e,st,Ke||Lg)},Df=(Te,_e,st)=>{if(Zn(Te)){let Ke=Te.length;const Jt=[];for(;Ke--;)Jt[Ke]=Df(Te[Ke],_e,st);return Jt}else{if(x.length>0&&(Te===e||Te===r)){let Ke=x.length;for(;Ke--;){const[Jt,$o,Qs]=x[Ke];Te===Jt&&(!_e||_e===$o)&&(!st||st===Qs)&&F.unbind(Jt,$o,Qs)}}return F.unbind(Te,_e,st)}},Qu=(Te,_e,st)=>F.dispatch(Te,_e,st),Ig=(Te,_e,st)=>F.dispatch(Te,_e,st),LT=Te=>{if(Te&&_t(Te)){const _e=Te.getAttribute("data-mce-contenteditable");return _e&&_e!=="inherit"?_e:Te.contentEditable!=="inherit"?Te.contentEditable:null}else return null},Lg={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:x,styles:P,schema:R,events:F,isBlock:J,root:null,clone:xe,getRoot:Ue,getViewPort:mt,getRect:sn,getSize:en,getParent:ls,getParents:_o,get:q,getNext:la,getPrev:el,select:Xn,is:Yn,add:kn,create:bn,createHTML:vo,createFragment:La,remove:Us,setStyle:Oe,getStyle:St,setStyles:Se,removeAllAttribs:Mn,setAttrib:ye,setAttribs:Ys,getAttrib:me,getPos:lt,parseStyle:Wo,serializeStyle:Xr,addStyle:Bs,loadCSS:kr,addClass:cr,removeClass:ia,hasClass:uu,toggleClass:Vr,show:Uc,hide:wm,isHidden:du,uniqueId:Y1,setHTML:wt,getOuterHTML:X1,setOuterHTML:Sm,decode:pt,encode:xo,insertAfter:Md,replace:Er,rename:Yu,findCommonAncestor:xm,run:ln,getAttribs:de,isEmpty:Ju,createRng:Tm,nodeIndex:Ru,split:bc,bind:km,unbind:Df,fire:Ig,dispatch:Qu,getContentEditable:LT,getContentEditableParent:Te=>{const _e=Ue();let st=null;for(let Ke=Te;Ke&&Ke!==_e&&(st=LT(Ke),st===null);Ke=Ke.parentNode);return st},destroy:()=>{if(x.length>0){let Te=x.length;for(;Te--;){const[_e,st,Ke]=x[Te];F.unbind(_e,st,Ke)}}lo(c,(Te,_e)=>{y.unload(_e),delete c[_e]})},isChildOf:(Te,_e)=>Te===_e||_e.contains(Te),dumpRng:Te=>"startContainer: "+Te.startContainer.nodeName+", startOffset: "+Te.startOffset+", endContainer: "+Te.endContainer.nodeName+", endOffset: "+Te.endOffset},mp=Ap(P,n,je(Lg));return Lg};Ms.DOM=Ms(document),Ms.nodeIndex=Ru;const sk=Ms.DOM,B2=0,eu=1,Tb=2,P2=3;class gd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=sk;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=Ge._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Tb}markDone(n){this.states[n]=Tb}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=B2),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{No(o.scriptLoadedCallbacks,x).each(R=>{Be(R,P=>P[y](x))}),delete o.scriptLoadedCallbacks[x]},c=y=>{const x=be(y,R=>R.status==="rejected");return x.length>0?Promise.reject(br(x,({reason:R})=>Zn(R)?R:[R])):Promise.resolve()},u=y=>Promise.allSettled(Xt(y,x=>o.states[x]===Tb?(r("resolve",x),Promise.resolve()):o.states[x]===P2?(r("reject",x),Promise.reject(x)):(o.states[x]=eu,o.loadScript(x).then(()=>{o.states[x]=Tb,r("resolve",x);const R=o.queue;return R.length>0?(o.queue=[],u(R).then(c)):Promise.resolve()},()=>(o.states[x]=P2,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const R=o.queueLoadedCallbacks.shift();return $.from(R).each($s),c(x)})),b=hs(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>f(b).then(y,x))}):f(b)}}gd.ScriptLoader=new gd;const Ga=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},rk=e=>Pt(e)&&hn(e,"raw"),Op=e=>Zn(e)&&e.length>1,Kf={},gh=Ga("en"),kb=()=>No(Kf,gh.get()),kc={getData:()=>Zt(Kf,e=>({...e})),setCode:e=>{e&&gh.set(e)},getCode:()=>gh.get(),add:(e,n)=>{let o=Kf[e];o||(Kf[e]=o={}),lo(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=kb().getOr({}),o=f=>X(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return No(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(rk(e))return o(e.raw);if(Op(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>hn(f,x)?o(f[x]):y);return u(b)}return u(c(e))},isRtl:()=>kb().bind(e=>No(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>hn(Kf,e)},Kc=()=>{const e=[],n={},o={},r=[],c=(q,ee)=>{const me=be(r,de=>de.name===q&&de.state===ee);Be(me,de=>de.resolve())},u=q=>hn(n,q),f=q=>hn(o,q),b=q=>{if(o[q])return o[q].instance},y=(q,ee)=>{const me=kc.getCode(),de=","+(ee||"")+",";!me||ee&&de.indexOf(","+me+",")===-1||gd.ScriptLoader.add(n[q]+"/langs/"+me+".js")},x=(q,ee)=>{Kc.languageLoad!==!1&&(u(q)?y(q,ee):J(q,"loaded").then(()=>y(q,ee)))},R=(q,ee)=>(e.push(ee),o[q]={instance:ee},c(q,"added"),ee),P=q=>{delete n[q],delete o[q]},F=(q,ee)=>oe(ee)?oe(q)?{prefix:"",resource:ee,suffix:""}:{prefix:q.prefix,resource:ee,suffix:q.suffix}:ee,Y=(q,ee)=>{if(n[q])return Promise.resolve();let me=oe(ee)?ee:ee.prefix+ee.resource+ee.suffix;me.indexOf("/")!==0&&me.indexOf("://")===-1&&(me=Kc.baseURL+"/"+me),n[q]=me.substring(0,me.lastIndexOf("/"));const de=()=>(c(q,"loaded"),Promise.resolve());return o[q]?de():gd.ScriptLoader.add(me).then(de)},J=(q,ee="added")=>ee==="added"&&f(q)||ee==="loaded"&&u(q)?Promise.resolve():new Promise(me=>{r.push({name:q,state:ee,resolve:me})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:R,remove:P,createUrl:F,load:Y,waitFor:J}};Kc.languageLoad=!0,Kc.baseURL="",Kc.PluginManager=Kc(),Kc.ThemeManager=Kc(),Kc.ModelManager=Kc();const L2=e=>{const n=Ga($.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set($.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set($.some(b))}}},ak=e=>{const n=Ga($.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set($.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set($.some(setInterval(b,e)))}}},Ym=()=>{const e=L2(bt);return{...e,on:o=>e.get().each(o)}},hh=(e,n)=>{let o=null;return{cancel:()=>{te(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{te(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Eb=(e,n)=>{let o=null;const r=()=>{te(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Dp=je("mce-annotation"),Mu=je("data-mce-annotation"),Yf=je("data-mce-annotation-uid"),ph=je("data-mce-annotation-active"),bh=je("data-mce-annotation-classes"),Gr=je("data-mce-annotation-attrs"),Rp=e=>n=>zo(n,e),Lr=(e,n)=>{const o=e.selection.getRng(),r=re.fromDom(o.startContainer),c=re.fromDom(e.getBody()),u=n.fold(()=>"."+Dp(),y=>`[${Mu()}="${y}"]`),f=Fd(r,o.startOffset).getOr(r);return cd(f,u,Rp(c)).bind(y=>oc(y,`${Yf()}`).bind(x=>oc(y,`${Mu()}`).map(R=>{const P=ei(e,x);return{uid:x,name:R,elements:P}})))},Rl=e=>ps(e)&&$d(e,Dp()),Yd=(e,n)=>hi(e,"data-mce-bogus")||Qg(e,'[data-mce-bogus="all"]',Rp(n)),ei=(e,n)=>{const o=re.fromDom(e.getBody()),r=Fo(o,`[${Yf()}="${n}"]`);return be(r,c=>!Yd(c,o))},F2=(e,n)=>{const o=re.fromDom(e.getBody()),r=Fo(o,`[${Mu()}="${n}"]`),c={};return Be(r,u=>{if(!Yd(u,o)){const f=hr(u,Yf()),b=No(c,f).getOr([]);c[f]=b.concat([u])}}),c},ck=(e,n)=>{const o=Ga({}),r=()=>({listeners:[],previous:Ym()}),c=(P,F)=>{u(P,Y=>(F(Y),Y))},u=(P,F)=>{const Y=o.get(),J=No(Y,P).getOrThunk(r),q=F(J);Y[P]=q,o.set(Y)},f=(P,F,Y)=>{c(P,J=>{Be(J.listeners,q=>q(!0,P,{uid:F,nodes:Xt(Y,ee=>ee.dom)}))})},b=P=>{c(P,F=>{Be(F.listeners,Y=>Y(!1,P))})},y=(P,F)=>{Be(ei(e,P),Y=>{F?wr(Y,ph(),"true"):Sr(Y,ph())})},x=Eb(()=>{const P=Un(n.getNames());Be(P,F=>{u(F,Y=>{const J=Y.previous.get();return Lr(e,$.some(F)).fold(()=>{J.each(q=>{b(F),Y.previous.clear(),y(q,!1)})},({uid:q,name:ee,elements:me})=>{ha(J,q)||(J.each(de=>y(de,!1)),f(ee,q,me),Y.previous.set(q),y(q,!0))}),{previous:Y.previous,listeners:Y.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(P,F)=>{u(P,Y=>({previous:Y.previous,listeners:Y.listeners.concat([F])}))}}},lk=(e,n)=>{const o=Mu(),r=u=>$.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Yf(),null),u.attr(Mu(),null),u.attr(ph(),null);const y=$.from(u.attr(Gr())).map(F=>F.split(",")).getOr([]),x=$.from(u.attr(bh())).map(F=>F.split(",")).getOr([]);Be(y,F=>u.attr(F,null));const R=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],P=yn(R,[Dp()].concat(x));u.attr("class",P.length>0?P.join(" "):null),u.attr(bh(),null),u.attr(Gr(),null)};e.serializer.addTempAttr(ph()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},ti=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>No(e,c).map(u=>u.settings),getNames:()=>Dn(e)}};let Xm=0;const H2=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Xm++,e+"_"+r+Xm+String(o)},V2=(e,n)=>{Be(n,o=>{vu(e,o)})},B0=(e,n)=>{Be(n,o=>{Ui(e,o)})},P0=(e,n)=>re.fromDom(e.dom.cloneNode(n)),Xf=e=>P0(e,!1),$0=e=>P0(e,!0),z2=(e,n)=>{const o=re.fromTag(n),r=pu(e);return bs(o,r),o},U2=(e,n)=>{const o=z2(e,n);qs(e,o);const r=Ur(e);return Pn(o,r),Uo(e),o},W2=(e,n,o=rn)=>{const r=new Wr(e,n),c=u=>{let f;do f=r[u]();while(f&&!et(f)&&!o(f));return $.from(f).filter(et)};return{current:()=>$.from(r.current()).filter(et),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Jm=(e,n)=>{const o=n||(f=>e.isBlock(f)||pr(f)||Ts(f)),r=(f,b,y,x)=>{if(et(f)){const R=x(f,b,f.data);if(R!==-1)return $.some({container:f,offset:R})}return y().bind(R=>r(R.container,R.offset,y,x))};return{backwards:(f,b,y,x)=>{const R=W2(f,x??e.getRoot(),o);return r(f,b,()=>R.prev().map(P=>({container:P,offset:P.length})),y).getOrNull()},forwards:(f,b,y,x)=>{const R=W2(f,x??e.getRoot(),o);return r(f,b,()=>R.next().map(P=>({container:P,offset:0})),y).getOrNull()}}},vh=Math.round,Jf=e=>e?{left:vh(e.left),top:vh(e.top),bottom:vh(e.bottom),right:vh(e.right),width:vh(e.width),height:vh(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Z2=(e,n)=>(e=Jf(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),ik=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,I0=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Mp=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:I0(n.top-e.bottom,e,n)},Np=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:I0(n.bottom-e.top,e,n),j2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,uk=e=>Mt(e,(n,o)=>n.fold(()=>$.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return $.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),$.none()),G2=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},ya=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),_b=(e,n,o)=>Math.min(Math.max(e,n),o),Bp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Qm=(e,n)=>{if(_t(e)&&e.hasChildNodes()){const o=e.childNodes,r=_b(n,0,o.length-1);return o[r]}else return e},Ab=(e,n)=>{if(!(n<0&&_t(e)&&e.hasChildNodes()))return Qm(e,n)},Yc=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),ni=e=>oe(e)&&e.charCodeAt(0)>=768&&Yc.test(e),dk=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},ef=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},q2=_t,yh=qc,K2=eh("display","block table"),Y2=eh("float","left right"),Xd=ef(q2,yh,lr(Y2)),mk=lr(eh("white-space","pre pre-line pre-wrap")),Fr=et,wi=pr,Ch=Ms.nodeIndex,Ob=Ab,Db=e=>e?e.createRange():Ms.DOM.createRng(),Pp=e=>oe(e)&&/[\r\n\t ]/.test(e),Jd=e=>!!e.setStart&&!!e.setEnd,Rb=e=>{const n=e.startContainer,o=e.startOffset;if(Pp(e.toString())&&mk(n.parentNode)&&et(n)){const r=n.data;if(Pp(r[o-1])||Pp(r[o+1]))return!0}return!1},wh=e=>{const n=e.ownerDocument,o=Db(n),r=n.createTextNode($r),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Jf(o.getBoundingClientRect());return c.removeChild(r),u},L0=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&et(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Qd(u)}else return null},Qf=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Qd=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Jf(r[0]):o=Jf(e.getBoundingClientRect()),!Jd(e)&&wi(e)&&Qf(o)?wh(e):Qf(o)&&Jd(e)&&(n=L0(e))!==null&&n!==void 0?n:o},tf=(e,n)=>{const o=Z2(e,n);return o.width=1,o.right=o.left+1,o},X2=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&ik(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=Db(f.ownerDocument);if(b<f.data.length){if(ni(f.data[b]))return;if(ni(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!Rb(y))){o(tf(Qd(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),Rb(y)||o(tf(Qd(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),Rb(y)||o(tf(Qd(y),!0)))},c=e.container(),u=e.offset();if(Fr(c))return r(c,u),n;if(q2(c))if(e.isAtEnd()){const f=Ob(c,u);Fr(f)&&r(f,f.data.length),Xd(f)&&!wi(f)&&o(tf(Qd(f),!1))}else{const f=Ob(c,u);if(Fr(f)&&r(f,0),Xd(f)&&e.isAtEnd())return o(tf(Qd(f),!1)),n;const b=Ob(e.container(),e.offset()-1);Xd(b)&&!wi(b)&&(K2(b)||K2(f)||!Xd(f))&&o(tf(Qd(b),!1)),Xd(f)&&o(tf(Qd(f),!0))}return n},Pe=(e,n,o)=>{const r=()=>(Fr(e),n===0),c=()=>Fr(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const R=Db(e.ownerDocument);return R.setStart(e,n),R.setEnd(e,n),R},f=()=>(o||(o=X2(Pe(e,n))),o),b=()=>f().length>0,y=R=>R&&e===R.container()&&n===R.offset(),x=R=>Ob(e,R?n-1:n);return{container:je(e),offset:je(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:x}};Pe.fromRangeStart=e=>Pe(e.startContainer,e.startOffset),Pe.fromRangeEnd=e=>Pe(e.endContainer,e.endOffset),Pe.after=e=>Pe(e.parentNode,Ch(e)+1),Pe.before=e=>Pe(e.parentNode,Ch(e)),Pe.isAbove=(e,n)=>Pr(Jn(n.getClientRects()),Do(e.getClientRects()),Mp).getOr(!1),Pe.isBelow=(e,n)=>Pr(Do(n.getClientRects()),Jn(e.getClientRects()),Np).getOr(!1),Pe.isAtStart=e=>e?e.isAtStart():!1,Pe.isAtEnd=e=>e?e.isAtEnd():!1,Pe.isTextPosition=e=>e?et(e.container()):!1,Pe.isElementPosition=e=>!Pe.isTextPosition(e);const Sh=(e,n)=>{et(n)&&n.data.length===0&&e.remove(n)},fk=(e,n,o)=>{n.insertNode(o),Sh(e,o.previousSibling),Sh(e,o.nextSibling)},F0=(e,n,o)=>{const r=$.from(o.firstChild),c=$.from(o.lastChild);n.insertNode(o),r.each(u=>Sh(e,u.previousSibling)),c.each(u=>Sh(e,u.nextSibling))},Mb=(e,n,o)=>{Hm(o)?F0(e,n,o):fk(e,n,o)},qr=et,J2=Tu,Q2=Ms.nodeIndex,$p=e=>{const n=e.parentNode;return J2(n)?$p(n):n},em=e=>e?De(e.childNodes,(n,o)=>(J2(o)&&o.nodeName!=="BR"?n=n.concat(em(o)):n.push(o),n),[]):[],xh=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&qr(o);)n+=o.data.length;return n},Co=e=>n=>e===n,Ml=e=>{let n,o;n=em($p(e)),o=$e(n,Co(e),e),n=n.slice(0,o+1);const r=De(n,(c,u,f)=>(qr(u)&&qr(n[f-1])&&c++,c),0);return n=ce(n,jl([e.nodeName])),o=$e(n,Co(e),e),o-r},nf=e=>(qr(e)?"text()":e.nodeName.toLowerCase())+"["+Ml(e)+"]",H0=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},Ns=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(qr(r))u=xh(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(nf(r));let f=H0(e,r);return f=ce(f,lr(Tu)),o=o.concat(ec(f,b=>nf(b))),o.reverse().join("/")+","+u},V0=(e,n,o)=>{let r=em(e);return r=ce(r,(c,u)=>!qr(c)||!qr(r[u-1])),r=ce(r,jl([n])),r[o]},Ip=(e,n)=>{let o=e,r=0;for(;qr(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!qr(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return qr(e)&&n>e.data.length&&(n=e.data.length),Pe(e,n)},qa=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=De(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),V0(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!qr(u)&&u.parentNode){let f;return c==="after"?f=Q2(u)+1:f=Q2(u),Pe(u.parentNode,f)}return Ip(u,parseInt(c,10))},Nu=Ts,gl=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&et(c);c=c.previousSibling)r+=e(c.data).length;return r},Lp=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(et(u))b.push(o?gl(n,u,f):f);else{let x=0;const R=u.childNodes;f>=R.length&&R.length&&(x=1,f=Math.max(0,R.length-1)),b.push(e.nodeIndex(R[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},gk=(e,n,o,r)=>{const c=n.dom,u=Lp(c,e,o,r,!0),f=n.isForward(),b=Pc(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=Lp(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Th=(e,n,o)=>{let r=0;return Ge.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},Nb=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(_t(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Bb=e=>(Nb(e,!0),Nb(e,!1),e),Pb=(e,n)=>{if(_t(e)&&(e=Qm(e,n),Nu(e)))return e;if(H(e)){et(e)&&T(e)&&(e=e.parentNode);let o=e.previousSibling;if(Nu(o)||(o=e.nextSibling,Nu(o)))return o}},ew=e=>Pb(e.startContainer,e.startOffset)||Pb(e.endContainer,e.endOffset),z0=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Nu(r)){const f=r.nodeName;return{name:f,index:Th(o.dom,f,r)}}const u=ew(c);if(u){const f=u.tagName;return{name:f,index:Th(o.dom,f,u)}}return gk(e,o,n,c)},tw=e=>{const n=e.getRng();return{start:Ns(e.dom.getRoot(),Pe.fromRangeStart(n)),end:Ns(e.dom.getRoot(),Pe.fromRangeEnd(n)),forward:e.isForward()}},$b=e=>({rng:e.getRng(),forward:e.isForward()}),eg=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},oi=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Th(o,b,f)};const x=Bb(r.cloneRange());if(!u){x.collapse(!1);const P=eg(o,c+"_end",n);Mb(o,x,P)}r=Bb(r),r.collapse(!0);const R=eg(o,c+"_start",n);return Mb(o,r,R),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},hk=(e,n,o=!1)=>n===2?z0(oa,o,e):n===3?tw(e):n?$b(e):oi(e,!1),Ba=Le(z0,Eo,!0),nw=e=>{const n=u=>u(e),o=je(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:We,isError:rn,map:u=>Xc.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>$.some(e)};return c},tm=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:rn,isError:We,map:n,mapError:r=>Xc.error(r(e)),bind:n,exists:rn,forall:We,getOr:Eo,or:Eo,getOrThunk:oo,orThunk:oo,getOrDie:yo(String(e)),each:bt,toOptional:$.none};return o},Xc={value:nw,error:tm,fromOption:(e,n)=>e.fold(()=>tm(n),nw)},tu={generate:e=>{if(!Zn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Be(e,(r,c)=>{const u=Dn(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Zn(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...P)=>{if(P.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+P.length);return P[c].apply(null,y)},match:P=>{const F=Dn(P);if(n.length!==F.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+F.join(","));if(!mo(n,J=>on(F,J)))throw new Error("Not all branches were specified when using match. Specified: "+F.join(", ")+`
Required: `+n.join(", "));return P[f].apply(null,y)},log:P=>{console.log(P,{constructors:n,constructor:f,params:y})}}}}),o}};tu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const U0=e=>{const n=[],o=[];return Be(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},ow=e=>e.type==="inline-command"||e.type==="inline-format",bk=e=>e.type==="block-command"||e.type==="block-format",vk=e=>{const n=r=>Xc.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(Zn(e.format)){if(!mo(e.format,oe))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(oe(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return Xc.value(c(f))}else return e.cmd!==void 0?oe(e.cmd)?Xc.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Pt(e))return n("Raw pattern is not an object");if(!oe(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!oe(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?oe(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Xc.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},ic=e=>be(e,bk),uc=e=>be(e,ow),Ic=(e,n)=>({inlinePatterns:uc(e),blockPatterns:ic(e),dynamicPatternsLookup:n}),Ec=e=>{const n=U0(Xt(e,vk));return Be(n.errors,o=>console.error(o.message,o.pattern)),n.values},Nl=e=>n=>{const o=e(n);return Ec(o)},Ca=gr().deviceType,Lb=Ca.isTouch(),Fb=Ms.DOM,sw=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Mt(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Bo(u)]=Bo(f),o},{})},Hb=e=>Ye(e,RegExp),Rt=e=>n=>n.options.get(e),tg=e=>oe(e)||Pt(e),Vb=(e,n="")=>o=>{const r=oe(o);if(r)if(o.indexOf("=")!==-1){const c=sw(o);return{value:No(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},W0=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Vb(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Vb(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=oe(o)&&za(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=on(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>cn(o)?{valid:!0,value:o}:oe(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||oe(o)||Kt(o,oe);return r?oe(o)?{value:Xt(o.split(","),Bo),valid:r}:Zn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Y0(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=oe(o)||Kt(o,oe);return r?{value:Zn(o)?o:Xt(o.split(","),Bo),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=cn(o)||oe(o);return r?o===!1||Ca.isiPhone()||Ca.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Lb}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||oe(o)||X(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||oe(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:tg}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:tg}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:tg}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>oe(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Kt(o,Pt)||o===!1?{value:Ec(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>X(o)?{value:Nl(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Kt(o,Hb)?{value:o,valid:!0}:Hb(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:kc.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Fb.getAttrib(e.getElement(),"placeholder")})})},yk=Rt("iframe_attrs"),j4=Rt("doctype"),rw=Rt("document_base_url"),Ck=Rt("body_id"),wk=Rt("body_class"),zb=Rt("content_security_policy"),Sk=Rt("br_in_pre"),si=Rt("forced_root_block"),Fp=Rt("forced_root_block_attrs"),xk=Rt("newline_behavior"),aw=Rt("br_newline_selector"),ut=Rt("no_newline_selector"),Tk=Rt("keep_styles"),Ka=Rt("end_container_on_empty_block"),cw=Rt("automatic_uploads"),Z0=Rt("images_reuse_filename"),kk=Rt("images_replace_blob_uris"),Si=Rt("icons"),G4=Rt("icons_url"),Ek=Rt("images_upload_url"),nm=Rt("images_upload_base_path"),lw=Rt("images_upload_credentials"),j0=Rt("images_upload_handler"),Bl=Rt("content_css_cors"),xi=Rt("referrer_policy"),Ub=Rt("language"),Bu=Rt("language_url"),iw=Rt("indent_use_margin"),Hp=Rt("indentation"),wa=Rt("content_css"),uw=Rt("content_style"),of=Rt("font_css"),Wb=Rt("directionality"),dw=Rt("inline_boundaries_selector"),G0=Rt("object_resizing"),_k=Rt("resize_img_proportional"),Ak=Rt("placeholder"),q0=Rt("event_root"),Ok=Rt("service_message"),ng=Rt("theme"),Vp=Rt("theme_url"),Zb=Rt("model"),K0=Rt("model_url"),og=Rt("inline_boundaries"),sg=Rt("formats"),kh=Rt("preview_styles"),zp=Rt("format_empty_lines"),Dk=Rt("format_noneditable_selector"),mw=Rt("custom_ui_selector"),Y0=Rt("inline"),X0=Rt("hidden_input"),Rk=Rt("submit_patch"),rg=Rt("add_form_submit_trigger"),mr=Rt("add_unload_trigger"),J0=Rt("custom_undo_redo_levels"),Lc=Rt("disable_nodechange"),Q0=Rt("readonly"),ey=Rt("content_css_cors"),Up=Rt("plugins"),jb=Rt("external_plugins"),Wp=Rt("block_unsupported_drop"),fw=Rt("visual"),q4=Rt("visual_table_class"),sf=Rt("visual_anchor_class"),Mk=Rt("iframe_aria_text"),Nk=Rt("setup"),Bk=Rt("init_instance_callback"),Pk=Rt("urlconverter_callback"),gw=Rt("auto_focus"),ty=Rt("browser_spellcheck"),$k=Rt("protect"),Ik=Rt("paste_block_drop"),Gb=Rt("paste_data_images"),Lk=Rt("paste_preprocess"),hw=Rt("paste_postprocess"),Fk=Rt("paste_webkit_styles"),Zp=Rt("paste_remove_styles_if_webkit"),ny=Rt("paste_merge_formats"),pw=Rt("smart_paste"),bw=Rt("paste_as_text"),vw=Rt("paste_tab_spaces"),ag=Rt("allow_html_data_urls"),cg=Rt("text_patterns"),rf=Rt("text_patterns_lookup"),Eh=Rt("noneditable_class"),yw=Rt("editable_class"),om=Rt("noneditable_regexp"),oy=Rt("preserve_cdata"),Hk=e=>e.options.isSet("text_patterns_lookup"),af=e=>Ge.explode(e.options.get("font_size_style_values")),qb=e=>Ge.explode(e.options.get("font_size_classes")),Vk=e=>e.options.get("encoding")==="xml",sy=e=>Ge.explode(e.options.get("images_file_types")),zk=Rt("table_tab_navigation"),Uk=_t,ry=et,Cw=e=>{const n=e.parentNode;n&&n.removeChild(e)},ww=e=>{const n=oa(e);return{count:e.length-n.length,text:n}},ay=e=>{let n;for(;(n=e.data.lastIndexOf(Hs))!==-1;)e.deleteData(n,1)},Sw=(e,n)=>(hd(e),n),xw=(e,n)=>{const o=ww(e.data.substr(0,n.offset())),r=ww(e.data.substr(n.offset()));return(o.text+r.text).length>0?(ay(e),Pe(e,n.offset()-o.count)):n},Wk=(e,n)=>{const o=n.container(),r=Wt(is(o.childNodes),e).map(c=>c<n.offset()?Pe(o,n.offset()-1):n).getOr(n);return hd(e),r},Kb=(e,n)=>ry(e)&&n.container()===e?xw(e,n):Sw(e,n),Tw=(e,n)=>n.container()===e.parentNode?Wk(e,n):Sw(e,n),Yb=(e,n)=>Pe.isTextPosition(n)?Kb(e,n):Tw(e,n),hd=e=>{Uk(e)&&H(e)&&(ue(e)?e.removeAttribute("data-mce-caret"):Cw(e)),ry(e)&&(ay(e),e.data.length===0&&Cw(e))},cy=Ts,ly=qi,kw=ku,Ew="*[contentEditable=false],video,audio,embed,object",iy=(e,n,o)=>{const r=Z2(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},K4=e=>{var n,o;const r=Fo(re.fromDom(e),Ew);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(ks(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,no(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},Xb=(e,n,o,r)=>{const c=Ym();let u,f;const b=si(e),y=e.dom,x=(q,ee)=>{let me;if(R(),kw(ee))return null;if(o(ee)){const de=zn(b,ee,q),ye=iy(n,ee,q);y.setStyle(de,"top",ye.top),f=de;const xe=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(xe,{...ye}),y.add(n,xe),c.set({caret:xe,element:ee,before:q}),q&&y.addClass(xe,"mce-visual-caret-before"),P(),me=ee.ownerDocument.createRange(),me.setStart(de,0),me.setEnd(de,0)}else return f=Re(ee,q),me=ee.ownerDocument.createRange(),Gp(f.nextSibling)?(me.setStart(f,0),me.setEnd(f,0)):(me.setStart(f,1),me.setEnd(f,1)),me;return me},R=()=>{K4(n),f&&(hd(f),f=null),c.on(q=>{y.remove(q.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},P=()=>{u=setInterval(()=>{c.on(q=>{r()?y.toggleClass(q.caret,"mce-visual-caret-hidden"):y.addClass(q.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:R,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(q=>{const ee=iy(n,q.element,q.before);y.setStyles(q.caret,{...ee})})},destroy:()=>clearInterval(u)}},jp=()=>Ao.browser.isFirefox(),Gp=e=>cy(e)||ly(e),lg=e=>Gp(e)||Da(e)&&jp(),Zk=Bc,uy=Ts,jk=qi,Jb=eh("display","block table table-cell table-caption list-item"),qp=H,_w=T,Gk=_t,qk=et,Kk=qc,Pa=e=>e>0,_h=e=>e<0,sm=(e,n)=>{let o;for(;o=e(n);)if(!_w(o))return o;return null},rm=(e,n,o,r,c)=>{const u=new Wr(e,r),f=uy(e)||_w(e);let b;if(_h(n)){if(f&&(b=sm(u.prev.bind(u),!0),o(b)))return b;for(;b=sm(u.prev.bind(u),c);)if(o(b))return b}if(Pa(n)){if(f&&(b=sm(u.next.bind(u),!0),o(b)))return b;for(;b=sm(u.next.bind(u),c);)if(o(b))return b}return null},Yk=(e,n)=>{const o=c=>Zk(c.dom),r=c=>c.dom===n;return Im(re.fromDom(e),o,r).map(c=>c.dom).getOr(n)},cf=(e,n)=>{for(;e&&e!==n;){if(Jb(e))return e;e=e.parentNode}return null},Pu=(e,n,o)=>cf(e.container(),o)===cf(n.container(),o),Qb=(e,n)=>{if(!n)return $.none();const o=n.container(),r=n.offset();return Gk(o)?$.from(o.childNodes[r+e]):$.none()},ev=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},dy=(e,n,o)=>cf(n,e)===cf(o,e),Aw=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&qp(u)&&(u=u[r]),uy(u)||jk(u)){if(dy(n,u,c))return u;break}if(Kk(u))break;c=c.parentNode}return null},am=Le(ev,!0),pd=Le(ev,!1),tv=(e,n,o)=>{let r;const c=Le(Aw,!0,n),u=Le(Aw,!1,n),f=o.startContainer,b=o.startOffset;if(T(f)){const y=qk(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,lg(r)))return am(r);if(x==="after"&&(r=y.previousSibling,lg(r)))return pd(r)}if(!o.collapsed)return o;if(et(f)){if(qp(f)){if(e===1){if(r=u(f),r)return am(r);if(r=c(f),r)return pd(r)}if(e===-1){if(r=c(f),r)return pd(r);if(r=u(f),r)return am(r)}return o}if(ks(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?am(r):o;if(no(f)&&b<=1)return e===-1&&(r=c(f),r)?pd(r):o;if(b===f.data.length)return r=u(f),r?am(r):o;if(b===0)return r=c(f),r?pd(r):o}return o},Ow=(e,n)=>Qb(e?0:-1,n).filter(uy),Kp=(e,n,o)=>{const r=tv(e,n,o);return e===-1?Pe.fromRangeStart(r):Pe.fromRangeEnd(r)},Ah=e=>$.from(e.getNode()).map(re.fromDom),_c=e=>$.from(e.getNode(!0)).map(re.fromDom),Dw=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},lf=(e,n)=>{const o=Pu(e,n);return!o&&pr(e.getNode())?!0:o};var dc;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(dc||(dc={}));const my=Ts,$u=et,Yp=_t,nv=pr,ig=qc,Xk=ys,Oh=va,Rw=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},bd=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Dh=(e,n)=>{if(Pa(e)){if(ig(n.previousSibling)&&!$u(n.previousSibling))return Pe.before(n);if($u(n))return Pe(n,0)}if(_h(e)){if(ig(n.nextSibling)&&!$u(n.nextSibling))return Pe.after(n);if($u(n))return Pe(n,n.data.length)}return _h(e)?nv(n)?Pe.before(n):Pe.after(n):Pe.before(n)},Mw=(e,n)=>{const o=n.nextSibling;return o&&ig(o)?$u(o)?Pe(o,0):Pe.before(o):Xp(dc.Forwards,Pe.after(n),e)},Xp=(e,n,o)=>{let r,c,u,f;if(!Yp(o)||!n)return null;if(n.isEqual(Pe.after(o))&&o.lastChild){if(f=Pe.after(o.lastChild),_h(e)&&ig(o.lastChild)&&Yp(o.lastChild))return nv(o.lastChild)?Pe.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if($u(b)){if(_h(e)&&y>0)return Pe(b,--y);if(Pa(e)&&y<b.length)return Pe(b,++y);r=b}else{if(_h(e)&&y>0&&(c=bd(b,y-1),ig(c)))return!Xk(c)&&(u=rm(c,e,Oh,c),u)?$u(u)?Pe(u,u.data.length):Pe.after(u):$u(c)?Pe(c,c.data.length):Pe.before(c);if(Pa(e)&&y<b.childNodes.length&&(c=bd(b,y),ig(c)))return nv(c)?Mw(o,c):!Xk(c)&&(u=rm(c,e,Oh,c),u)?$u(u)?Pe(u,0):Pe.before(u):$u(c)?Pe(c,0):Pe.after(c);r=c||f.getNode()}if(r&&(Pa(e)&&f.isAtEnd()||_h(e)&&f.isAtStart())&&(r=rm(r,e,We,o,!0),Oh(r,o)))return Dh(e,r);c=r&&rm(r,e,Oh,o);const x=jt(be(Rw(b,o),my));return x&&(!c||!x.contains(c))?(Pa(e)?f=Pe.after(x):f=Pe.before(x),f):c?Dh(e,c):null},cm=e=>({next:n=>Xp(dc.Forwards,n,e),prev:n=>Xp(dc.Backwards,n,e)}),Y4=(e,n,o)=>{const r=e?Pe.before(o):Pe.after(o);return ri(e,n,r)},Jp=e=>pr(e)?Pe.before(e):Pe.after(e),Qp=e=>Pe.isTextPosition(e)?e.offset()===0:qc(e.getNode()),fy=e=>{if(Pe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return qc(e.getNode(!0))},gy=(e,n)=>!Pe.isTextPosition(e)&&!Pe.isTextPosition(n)&&e.getNode()===n.getNode(!0),hy=e=>!Pe.isTextPosition(e)&&pr(e.getNode()),Nw=(e,n,o)=>e?!gy(n,o)&&!hy(n)&&fy(n)&&Qp(o):!gy(o,n)&&Qp(n)&&fy(o),ri=(e,n,o)=>{const r=cm(n);return $.from(e?r.next(o):r.prev(o))},Rh=(e,n,o)=>ri(e,n,o).bind(r=>Pu(o,r,n)&&Nw(e,o,r)?ri(e,n,r):$.some(r)),ov=(e,n,o,r)=>Rh(e,n,o).bind(c=>r(c)?ov(e,n,c,r):$.some(c)),vd=(e,n)=>{const o=e?n.firstChild:n.lastChild;return et(o)?$.some(Pe(o,e?0:o.data.length)):o?qc(o)?$.some(e?Pe.before(o):Jp(o)):Y4(e,n,o):$.none()},Jc=Le(ri,!0),ai=Le(ri,!1),hl=Le(vd,!0),yd=Le(vd,!1),py="_mce_caret",ci=e=>_t(e)&&e.id===py,ug=(e,n)=>{let o=n;for(;o&&o!==e;){if(ci(o))return o;o=o.parentNode}return null},Jk=e=>oe(e.start),X4=e=>hn(e,"rng"),J4=e=>hn(e,"id"),dg=e=>hn(e,"name"),by=e=>Ge.isArray(e.start),e1=e=>!dg(e)&&cn(e.forward)?e.forward:!0,Qk=(e,n)=>(_t(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Bw=(e,n)=>{const o=$.from(qa(e.getRoot(),n.start)),r=$.from(qa(e.getRoot(),n.end));return Pr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:e1(n)}})},vy=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Hs);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},Q4=e=>!e.hasChildNodes(),eE=(e,n)=>yd(e).fold(rn,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Fc=(e,n,o)=>Q4(n)&&ug(e,n)?(vy(n,o),!0):!1,sv=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const x=f.childNodes;if(Fc(u,f,r))return!0;if(c[y]>x.length-1)return Fc(u,f,r)?!0:eE(f,r);f=x[c[y]]}et(f)&&(b=Math.min(c[0],f.data.length)),_t(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},mg=e=>et(e)&&e.data.length>0,lm=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):mg(r.nextSibling)?(f=r.nextSibling,b=0):mg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):mg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;Ge.each(Ge.grep(r.childNodes),P=>{et(P)&&(P.data=P.data.replace(/\uFEFF/g,""))});let R;for(;R=e.get(o.id+"_"+n);)e.remove(R,!0);if(et(x)&&et(y)&&!Ao.browser.isOpera()){const P=y.data.length;y.appendData(x.data),e.remove(x),f=y,b=P}}return $.some(Pe(f,b))}else return $.none()},t1=(e,n)=>{const o=e.createRng();return sv(e,!0,n,o)&&sv(e,!1,n,o)?$.some({range:o,forward:e1(n)}):$.none()},rv=(e,n)=>{const o=lm(e,"start",n),r=lm(e,"end",n);return Pr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(Qk(e,c.container()),c.offset()),f.setEnd(Qk(e,u.container()),u.offset()),{range:f,forward:e1(n)}})},Pw=(e,n)=>$.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),tE=(e,n)=>{const o=e.dom;if(n){if(by(n))return t1(o,n);if(Jk(n))return Bw(o,n);if(J4(n))return rv(o,n);if(dg(n))return Pw(o,n);if(X4(n))return $.some({range:n.rng,forward:e1(n)})}return $.none()},nE=(e,n,o)=>hk(e,n,o),av=(e,n)=>{tE(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},mc=e=>_t(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Mh=(e=>n=>e===n)($r),fc=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,cv=e=>!fc(e)&&!Mh(e)&&!oh(e),nu=e=>({value:e}),yy=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Cy=e=>{const n=yy(e.red)+yy(e.green)+yy(e.blue);return nu(n)},oE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,sE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,wy=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Iw=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return wy(c,u,f,b)},rE=e=>{if(e==="transparent")return $.some(wy(0,0,0,0));const n=oE.exec(e);if(n!==null)return $.some(Iw(n[1],n[2],n[3],"1"));const o=sE.exec(e);return o!==null?$.some(Iw(o[1],o[2],o[3],o[4])):$.none()},n1=e=>rE(e).map(Cy).map(n=>"#"+n.value).getOr(e),Nh=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},aE=e=>br(e,n=>{const o=Bp(n);return o?[re.fromDom(o)]:[]}),Lw=e=>Nh(e).length>1,Sy=e=>be(aE(e),Ma),cE=e=>Fo(e,"td[data-mce-selected],th[data-mce-selected]"),xy=(e,n)=>{const o=cE(n);return o.length>0?o:Sy(e)},uf=e=>xy(Nh(e.selection.getSel()),re.fromDom(e.getBody())),fg=(e,n)=>xu(e,"table",n),Fw=e=>{const n=e.startContainer,o=e.startOffset;return et(n)?o===0?$.some(re.fromDom(n)):$.none():$.from(n.childNodes[o]).map(re.fromDom)},e3=e=>{const n=e.endContainer,o=e.endOffset;return et(n)?o===n.data.length?$.some(re.fromDom(n)):$.none():$.from(n.childNodes[o-1]).map(re.fromDom)},Hw=e=>Nf(e).fold(je([e]),n=>[e].concat(Hw(n))),Ty=e=>Mm(e).fold(je([e]),n=>Fs(n)==="br"?wc(n).map(o=>[e].concat(Ty(o))).getOr([]):[e].concat(Ty(n))),ky=(e,n)=>Pr(Fw(n),e3(n),(o,r)=>{const c=jn(Hw(e),Le(zo,o)),u=jn(Ty(e),Le(zo,r));return c.isSome()&&u.isSome()}).getOr(!1),lv=(e,n,o,r)=>{const c=o,u=new Wr(o,c),f=Jo(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!on(["td","th","table"],x.toLowerCase()));let b=o;do{if(et(b)&&Ge.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},wo=e=>{const n=e.selection.getSel();return ge(n)&&n.rangeCount>0},Cd=(e,n)=>{const o=uf(e);o.length>0?Be(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},df=(e,n,o)=>{const r=oi(e,n);o(r),e.moveToBookmark(r)},mf=e=>An(e==null?void 0:e.nodeType),Ey=e=>_t(e)&&!mc(e)&&!ci(e)&&!Tu(e),Bh=(e,n)=>{if(Ey(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},ff=e=>e.isContentEditable===!0,iv=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=Ts(u);df(r,!0,()=>{n()}),f&&Ts(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&uv(c,r)},uv=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!Bh(e,b)&&_t(u)){const y=u.childNodes,x=e.getRoot();let R;if(f<y.length){const P=y[f];R=new Wr(P,(o=e.getParent(P,e.isBlock))!==null&&o!==void 0?o:x)}else{const P=y[y.length-1];R=new Wr(P,(r=e.getParent(P,e.isBlock))!==null&&r!==void 0?r:x),R.next(!0)}for(let P=R.current();P;P=R.next()){if(e.getContentEditable(P)==="false")return;if(et(P)&&!o1(P)){c.setStart(P,0),n.setRng(c);return}}}},dv=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(_t(e)||!o1(e))return e}},gg=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Zf(e,n),hg=(e,n,o)=>e.schema.isValidChild(n,o),o1=(e,n=!1)=>{if(ge(e)&&et(e)){const o=n?e.data.replace(/ /g," "):e.data;return yi(o)}else return!1},mv=e=>ge(e)&&et(e)&&e.length===0,t3=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Dk(e),c=Os(r)?o:`${o},${r}`;return ul(re.fromDom(n),c)},Vw=(e,n)=>{const o=e.dom;return Ey(n)&&o.getContentEditable(n)==="false"&&t3(e,n)&&o.select('[contenteditable="true"]',n).length===0},im=(e,n)=>X(e)?e(n):(ge(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),_y=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),pg=(e,n)=>{if(At(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=n1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Ay=(e,n,o)=>{const r=e.getStyle(n,o);return pg(r,o)},zw=(e,n)=>{let o;return e.getParent(n,r=>_t(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},s1=(e,n,o)=>e.getParents(n,o,e.getRoot()),Oy=(e,n,o)=>{const r=e.formatter.get(n);return ge(r)&&zt(r,o)},lE=(e,n)=>Oy(e,n,r=>{const c=u=>X(u)||u.length>1&&u.charAt(0)==="%";return zt(["styles","attributes"],u=>No(r,u).exists(f=>{const b=Zn(f)?f:us(f);return zt(b,c)}))}),iE=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Jo(u,(f,b)=>zt(r,y=>y===b));return Oy(e,n,u=>{const f=c(u);return Oy(e,o,b=>{const y=c(b);return Fa(f,y)})})},wd=e=>fr(e,"block"),Ph=e=>wd(e)&&e.wrapper===!0,uE=e=>wd(e)&&e.wrapper!==!0,Ti=e=>fr(e,"selector"),$a=e=>fr(e,"inline"),dE=e=>Ti(e)&&$a(e)&&ha(No(e,"mixed"),!0),$h=e=>Ti(e)&&e.expand!==!1&&!$a(e),Ih=mc,Uw=s1,Ww=o1,mE=gg,yt=e=>pr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,ra=(e,n)=>{let o=n;for(;o;){if(_t(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},bg=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Ya=(e,n,o)=>bg(e,n,o,r=>Mh(r)||fc(r)),ki=(e,n,o)=>bg(e,n,o,cv),fv=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(R,P,F)=>{const Y=Jm(e),J=c?Y.backwards:Y.forwards;return $.from(J(R,P,(q,ee)=>Ih(q.parentNode)?-1:(f=q,F(c,q,ee)),b))};return y(o,r,Ya).bind(R=>u?y(R.container,R.offset+(c?-1:0),ki):$.some(R)).orThunk(()=>f?$.some({container:f,offset:c?0:f.length}):$.none())},Lh=(e,n,o,r,c)=>{const u=r[c];et(r)&&Os(r.data)&&u&&(r=u);const f=Uw(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const x=n[y];if(!(ge(x.collapsed)&&x.collapsed!==o.collapsed)&&Ti(x)&&e.is(f[b],x.selector))return f[b]}return r},r1=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(wd(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(et(o)?o.parentNode:o,x=>x!==f&&mE(e.schema,x),y)}if(u&&wd(b)&&b.wrapper&&(u=Uw(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!_y(u,"br")););return u||o},Zw=(e,n,o,r)=>{const c=o.parentNode;return ge(o[r])?!1:c===n||At(c)||e.isBlock(c)?!0:Zw(e,n,c,r)},a1=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(et(o)&&!Ww(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const x=et(y)&&!Zw(e,b,y,f);if(!Ih(y)&&!yt(y)&&!Ww(y,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Dy=e=>Ih(e.parentNode)||Ih(e),gf=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return _t(c)&&c.hasChildNodes()&&(c=Qm(c,u),et(c)&&(u=0)),_t(f)&&f.hasChildNodes()&&(f=Qm(f,n.collapsed?b:b-1),et(f)&&(b=f.data.length)),c=ra(e,c),f=ra(e,f),Dy(c)&&(c=Ih(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,et(c)&&(u=n.collapsed?c.length:0)),Dy(f)&&(f=Ih(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,et(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(fv(e,e.getRoot(),c,u,!0,r).each(({container:P,offset:F})=>{c=P,u=F}),fv(e,e.getRoot(),f,b,!1,r).each(({container:P,offset:F})=>{f=P,b=F})),($a(y)||y.block_expand)&&((!$a(y)||!et(c)||u===0)&&(c=a1(e,o,c,u,!0)),(!$a(y)||!et(f)||b===f.data.length)&&(f=a1(e,o,f,b,!1))),$h(y)&&(c=Lh(e,o,n,c,"previousSibling"),f=Lh(e,o,n,f,"nextSibling")),(wd(y)||Ti(y))&&(c=r1(e,o,c,"previousSibling"),f=r1(e,o,f,"nextSibling"),wd(y)&&(e.isBlock(c)||(c=a1(e,o,c,u,!0)),e.isBlock(f)||(f=a1(e,o,f,b,!1)))),_t(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),_t(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},c1=(e,n,o)=>{var r;const c=n.startOffset,u=Qm(n.startContainer,c),f=n.endOffset,b=Qm(n.endContainer,f-1),y=ee=>{const me=ee[0];et(me)&&me===u&&c>=me.data.length&&ee.splice(0,1);const de=ee[ee.length-1];return f===0&&ee.length>0&&de===b&&et(de)&&ee.splice(ee.length-1,1),ee},x=(ee,me,de)=>{const ye=[];for(;ee&&ee!==de;ee=ee[me])ye.push(ee);return ye},R=(ee,me)=>e.getParent(ee,de=>de.parentNode===me,me),P=(ee,me,de)=>{const ye=de?"nextSibling":"previousSibling";for(let xe=ee,Ue=xe.parentNode;xe&&xe!==me;xe=Ue){Ue=xe.parentNode;const mt=x(xe===ee?xe:xe[ye],ye);mt.length&&(de||mt.reverse(),o(y(mt)))}};if(u===b)return o(y([u]));const F=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return P(u,F,!0);if(e.isChildOf(b,u))return P(b,F);const Y=R(u,F)||u,J=R(b,F)||b;P(u,Y,!0);const q=x(Y===u?Y:Y.nextSibling,"nextSibling",J===b?J.nextSibling:J);q.length&&o(y(q)),P(b,J)},fE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],jw=e=>Cr(e)&&Yi(e)===Hs,Ry=(e,n,o,r)=>sc(n).fold(()=>"skipping",c=>r==="br"||jw(n)?"valid":Rl(n)?"existing":ci(n.dom)?"caret":zt(fE,u=>ul(n,u))?"valid-block":!hg(e,o,r)||!hg(e,Fs(c),o)?"invalid-child":"valid"),vg=(e,n)=>{const o=gf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},l1=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;vu(e,Dp()),wr(e,`${Yf()}`,f),wr(e,`${Mu()}`,r);const{attributes:y={},classes:x=[]}=c(f,b);if(bs(e,y),V2(e,x),u){x.length>0&&wr(e,`${bh()}`,x.join(","));const R=Dn(y);R.length>0&&wr(e,`${Gr()}`,R.join(","))}},gv=e=>{Ui(e,Dp()),Sr(e,`${Yf()}`),Sr(e,`${Mu()}`),Sr(e,`${ph()}`);const n=oc(e,`${Gr()}`).map(r=>r.split(",")).getOr([]),o=oc(e,`${bh()}`).map(r=>r.split(",")).getOr([]);Be(n,r=>Sr(e,r)),B0(e,o),Sr(e,`${bh()}`),Sr(e,`${Gr()}`)},hv=(e,n,o,r,c)=>{const u=re.fromTag("span",e);return l1(u,n,o,r,c,!1),u},Fh=(e,n,o,r,c,u)=>{const f=[],b=hv(e.getDoc(),o,u,r,c),y=Ym(),x=()=>{y.clear()},R=()=>y.get().getOrThunk(()=>{const J=Xf(b);return f.push(J),y.set(J),J}),P=J=>{Be(J,F)},F=J=>{switch(Ry(e,J,"span",Fs(J))){case"invalid-child":{x();const ee=Ur(J);P(ee),x();break}case"valid-block":{x(),l1(J,o,u,r,c,!0);break}case"valid":{const ee=R();Bm(J,ee);break}}},Y=J=>{const q=Xt(J,re.fromDom);P(q)};return c1(e.dom,n,J=>{x(),Y(J)}),f},My=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=uf(e).length>0,b=H2("mce-annotation");if(u.collapsed&&!f&&vg(e,u),c.getRng().collapsed&&!f){const y=hv(e.getDoc(),b,r,n,o.decorate);Kg(y,$r),c.getRng().insertNode(y.dom),c.select(y.dom)}else df(c,!1,()=>{Cd(e,y=>{Fh(e,y,b,n,o.decorate,r)})})})},Gw=e=>{const n=ti();lk(e,n);const o=ck(e,n),r=Vi("span"),c=u=>{Be(u,f=>{r(f)?Za(f):gv(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{My(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{const f=e.selection.getBookmark();Lr(e,$.some(u)).each(({elements:b})=>{c(b)}),e.selection.moveToBookmark(f)},removeAll:u=>{const f=e.selection.getBookmark();lo(F2(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=F2(e,u);return Zt(f,b=>Xt(b,y=>y.dom))}}},Iu=e=>({getBookmark:Le(nE,e),moveToBookmark:Le(av,e)});Iu.isBookmarkNode=mc;const i1=(e,n,o)=>o.collapsed?!1:zt(o.getClientRects(),r=>j2(r,e,n)),gE=(e,n)=>e.dispatch("PreProcess",n),hE=(e,n)=>e.dispatch("PostProcess",n),um=e=>{e.dispatch("remove")},pE=e=>{e.dispatch("detach")},qw=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},pv=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},bE=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},bv=e=>{e.dispatch("PreInit")},Ac=e=>{e.dispatch("PostRender")},Lu=e=>{e.dispatch("Init")},ou=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},u1=(e,n,o)=>{e.dispatch(n,o)},vv=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Kw=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Ny=(e,n)=>e.dispatch("BeforeSetContent",n),Yw=(e,n)=>e.dispatch("SetContent",n),By=(e,n)=>e.dispatch("BeforeGetContent",n),Xw=(e,n)=>e.dispatch("GetContent",n),Py=(e,n)=>{e.dispatch("AutocompleterStart",n)},Jw=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Qw=e=>{e.dispatch("AutocompleterEnd")},yv=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),$y=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),xs=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Nt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Nt.metaKeyPressed(e),metaKeyPressed:e=>Ao.os.isMacOS()||Ao.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},hf="data-mce-selected",eS="table,img,figure.image,hr,video,span.mce-preview-object",pf=Math.abs,Sd=Math.round,Hh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Iy=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Ei=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,x,R,P,F,Y,J,q,ee,me,de,ye,xe,Ue,mt;const lt=pt=>ge(pt)&&(ta(pt)||o.is(pt,"figure.image")),Oe=pt=>qi(pt)||o.hasClass(pt,"mce-preview-object"),Se=(pt,xo)=>{if(Iy(pt)){const vo=pt.touches[0];return lt(pt.target)&&!i1(vo.clientX,vo.clientY,xo)}else return lt(pt.target)&&!i1(pt.clientX,pt.clientY,xo)},St=pt=>{const xo=pt.target;Se(pt,n.selection.getRng())&&!pt.isDefaultPrevented()&&n.selection.select(xo)},en=pt=>o.hasClass(pt,"mce-preview-object")&&ge(pt.firstElementChild)?[pt,pt.firstElementChild]:o.is(pt,"figure.image")?[pt.querySelector("img")]:[pt],sn=pt=>{const xo=G0(n);return!xo||pt.getAttribute("data-mce-resize")==="false"||pt===n.getBody()?!1:o.hasClass(pt,"mce-preview-object")&&ge(pt.firstElementChild)?ul(re.fromDom(pt.firstElementChild),xo):ul(re.fromDom(pt),xo)},Yn=pt=>Oe(pt)?o.create("img",{src:Ao.transparentSrc}):pt.cloneNode(!0),_o=(pt,xo,vo)=>{if(ge(vo)){const La=en(pt);Be(La,Us=>{Us.style[xo]||!n.schema.isValid(Us.nodeName.toLowerCase(),xo)?o.setStyle(Us,xo,vo):o.setAttrib(Us,xo,""+vo)})}},ls=(pt,xo,vo)=>{_o(pt,"width",xo),_o(pt,"height",vo)},rs=pt=>{let xo,vo,La,Us,Mn;xo=pt.screenX-P,vo=pt.screenY-F,ye=xo*x[2]+q,xe=vo*x[3]+ee,ye=ye<5?5:ye,xe=xe<5?5:xe,(lt(f)||Oe(f))&&_k(n)!==!1?La=!Nt.modifierPressed(pt):La=Nt.modifierPressed(pt),La&&(pf(xo)>pf(vo)?(xe=Sd(ye*me),ye=Sd(xe/me)):(ye=Sd(xe/me),xe=Sd(ye*me))),ls(b,ye,xe),Us=x.startPos.x+xo,Mn=x.startPos.y+vo,Us=Us>0?Us:0,Mn=Mn>0?Mn:0,o.setStyles(y,{left:Us,top:Mn,display:"block"}),y.innerHTML=ye+" &times; "+xe,x[2]<0&&b.clientWidth<=ye&&o.setStyle(b,"left",Y+(q-ye)),x[3]<0&&b.clientHeight<=xe&&o.setStyle(b,"top",J+(ee-xe)),xo=u.scrollWidth-Ue,vo=u.scrollHeight-mt,xo+vo!==0&&o.setStyles(y,{left:Us-xo,top:Mn-vo}),de||(pv(n,f,q,ee,"corner-"+x.name),de=!0)},la=()=>{const pt=de;de=!1,pt&&(_o(f,"width",ye),_o(f,"height",xe)),o.unbind(r,"mousemove",rs),o.unbind(r,"mouseup",la),c!==r&&(o.unbind(c,"mousemove",rs),o.unbind(c,"mouseup",la)),o.remove(b),o.remove(y),o.remove(R),el(f),pt&&(bE(n,f,ye,xe,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},el=pt=>{wt();const xo=o.getPos(pt,u),vo=xo.x,La=xo.y,Us=pt.getBoundingClientRect(),Mn=Us.width||Us.right-Us.left,Wo=Us.height||Us.bottom-Us.top;f!==pt&&(Xn(),f=pt,ye=xe=0);const Xr=n.dispatch("ObjectSelected",{target:pt});sn(pt)&&!Xr.isDefaultPrevented()?lo(Hh,(Bs,kr)=>{const Vr=ia=>{const uu=en(f)[0];P=ia.screenX,F=ia.screenY,q=uu.clientWidth,ee=uu.clientHeight,me=ee/q,x=Bs,x.name=kr,x.startPos={x:Mn*Bs[0]+vo,y:Wo*Bs[1]+La},Ue=u.scrollWidth,mt=u.scrollHeight,R=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(R,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Yn(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:vo,top:La,margin:0}),ls(b,Mn,Wo),b.removeAttribute(hf),u.appendChild(b),o.bind(r,"mousemove",rs),o.bind(r,"mouseup",la),c!==r&&(o.bind(c,"mousemove",rs),o.bind(c,"mouseup",la)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},q+" &times; "+ee)};let cr=o.get("mceResizeHandle"+kr);cr&&o.remove(cr),cr=o.add(u,"div",{id:"mceResizeHandle"+kr,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+kr+"-resize; margin:0; padding:0"}),o.bind(cr,"mousedown",ia=>{ia.stopImmediatePropagation(),ia.preventDefault(),Vr(ia)}),Bs.elm=cr,o.setStyles(cr,{left:Mn*Bs[0]+vo-cr.offsetWidth/2,top:Wo*Bs[1]+La-cr.offsetHeight/2})}):Xn(!1)},rt=hh(el,0),Xn=(pt=!0)=>{rt.cancel(),wt(),f&&pt&&f.removeAttribute(hf),lo(Hh,(xo,vo)=>{const La=o.get("mceResizeHandle"+vo);La&&(o.unbind(La),o.remove(La))})},ln=(pt,xo)=>o.isChildOf(pt,xo),Ys=pt=>{if(de||n.removed||n.composing)return;const xo=pt.type==="mousedown"?pt.target:e.getNode(),vo=cd(re.fromDom(xo),eS).map(Us=>Us.dom).getOrUndefined(),La=ge(vo)?o.getAttrib(vo,hf,"1"):"1";if(Be(o.select(`img[${hf}],hr[${hf}]`),Us=>{Us.removeAttribute(hf)}),ge(vo)&&ln(vo,u)){kn();const Us=e.getStart(!0);if(ln(Us,vo)&&ln(e.getEnd(!0),vo)){o.setAttrib(vo,hf,La),rt.throttle(vo);return}}Xn()},wt=()=>{lo(Hh,pt=>{pt.elm&&(o.unbind(pt.elm),delete pt.elm)})},kn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{kn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ys),n.on("keyup compositionend",pt=>{f&&f.nodeName==="TABLE"&&Ys(pt)}),n.on("hide blur",Xn),n.on("contextmenu longpress",St,!0)}),n.on("remove",wt),{isResizable:sn,showResizeRect:el,hideResizeRect:Xn,updateResizeRect:Ys,destroy:()=>{rt.cancel(),f=b=R=null}}},yg=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},tS=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Vh=(e,n,o)=>{const r=e.document.createRange();return yg(r,n),tS(r,o),r},d1=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},m1=tu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ly=(e,n,o)=>n(re.fromDom(o.startContainer),o.startOffset,re.fromDom(o.endContainer),o.endOffset),vE=(e,n)=>n.match({domRange:o=>({ltr:je(o),rtl:$.none}),relative:(o,r)=>({ltr:Qt(()=>Vh(e,o,r)),rtl:Qt(()=>$.some(Vh(e,r,o)))}),exact:(o,r,c,u)=>({ltr:Qt(()=>d1(e,o,r,c,u)),rtl:Qt(()=>$.some(d1(e,c,u,o,r)))})}),yE=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>m1.rtl(re.fromDom(c.endContainer),c.endOffset,re.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>Ly(e,m1.ltr,o)):Ly(e,m1.ltr,o)},CE=(e,n)=>{const o=vE(e,n);return yE(e,o)};m1.ltr,m1.rtl;const Oc={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},bf=(e,n,o)=>{var r,c;return $.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return $.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),$.some(f)})},n3=(e,n,o)=>{var r,c;return $.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},wE=(()=>document.caretPositionFromPoint?bf:document.caretRangeFromPoint?n3:$.none)(),SE=(e,n,o)=>{const r=re.fromDom(e.document);return wE(r,n,o).map(c=>Oc.create(re.fromDom(c.startContainer),c.startOffset,re.fromDom(c.endContainer),c.endOffset))},po=tu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),xE=(e,n,o,r)=>e.fold(n,o,r),nS=e=>e.fold(Eo,Eo,Eo),Fy=po.before,oS=po.on,o3=po.after,xd={before:Fy,on:oS,after:o3,cata:xE,getStart:nS},Cv=tu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),s3=e=>Cv.exact(e.start,e.soffset,e.finish,e.foffset),r3=e=>e.match({domRange:n=>re.fromDom(n.startContainer),relative:(n,o)=>xd.getStart(n),exact:(n,o,r,c)=>n}),sS=Cv.domRange,rS=Cv.relative,aS=Cv.exact,a3=e=>{const n=r3(e);return Cu(n)},c3=Oc.create,vf={domRange:sS,relative:rS,exact:aS,exactFromRange:s3,getWin:a3,range:c3},Hy=(e,n)=>{const o=Fs(e);return o==="input"?xd.after(e):on(["br","img"],o)?n===0?xd.before(e):xd.after(e):xd.on(e,n)},TE=(e,n)=>{const o=e.fold(xd.before,Hy,xd.after),r=n.fold(xd.before,Hy,xd.after);return vf.relative(o,r)},cS=(e,n,o,r)=>{const c=Hy(e,n),u=Hy(o,r);return vf.relative(c,u)},vn=e=>e.match({domRange:n=>{const o=re.fromDom(n.startContainer),r=re.fromDom(n.endContainer);return cS(o,n.startOffset,r,n.endOffset)},relative:TE,exact:cS}),zh=(e,n)=>{const r=(n||document).createDocumentFragment();return Be(e,c=>{r.appendChild(c.dom)}),re.fromDom(r)},lS=e=>{const n=vf.getWin(e).dom,o=(c,u,f,b)=>d1(n,c,u,f,b),r=vn(e);return CE(n,r).match({ltr:o,rtl:o})},iS=(e,n,o)=>SE(e,n,o),Cg=(e,n,o)=>{const r=Cu(re.fromDom(o));return iS(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Vy=(e,n)=>ge(e)&&ge(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,kE=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},wv=(e,n,o)=>kE(e,n,o)!==null,uS=(e,n,o)=>wv(e,n,r=>r.nodeName===o),zy=(e,n)=>H(e)&&!wv(e,n,ci),dS=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Wr(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(pr(u))return!0}return!1},EE=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Sv=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ts(o))return!0;o=o.parentNode}return!1},f1=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,x;if(!b)return $.none();const R=e.getParent(b,e.isBlock)||u;if(r&&pr(c)&&n&&e.isEmpty(R))return $.some(Pe(b,e.nodeIndex(c)));const P=new Wr(c,R);for(;x=P[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||zy(x,u))return $.none();if(et(x)&&x.data.length>0)return uS(x,u,"A")?$.none():$.some(Pe(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return $.none();y=x}return Gl(y)?$.none():o&&y?$.some(Pe(y,0)):$.none()},Uy=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=_t(b)&&y===b.childNodes.length,R=e.schema.getNonEmptyElements();let P=o;if(H(b))return $.none();if(_t(b)&&y>b.childNodes.length-1&&(P=!1),Nc(b)&&(b=c,y=0),b===c){if(P&&(u=b.childNodes[y>0?y-1:0],u&&(H(u)||R[u.nodeName]||Da(u))))return $.none();if(b.hasChildNodes()){if(y=Math.min(!P&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=et(b)&&x?b.data.length:0,!n&&b===c.lastChild&&Da(b)||Sv(c,b)||H(b))return $.none();if(b.hasChildNodes()&&!Da(b)){u=b;const F=new Wr(b,c);do{if(Ts(u)||H(u)){f=!1;break}if(et(u)&&u.data.length>0){y=P?0:u.data.length,b=u,f=!0;break}if(R[u.nodeName.toLowerCase()]&&!lb(u)){y=e.nodeIndex(u),b=u.parentNode,P||y++,f=!0;break}}while(u=P?F.next():F.prev())}}}return n&&(et(b)&&y===0&&f1(e,x,n,!0,b).each(F=>{b=F.container(),y=F.offset(),f=!0}),_t(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&pr(u)&&!EE(u,"A")&&!dS(e,u,!1)&&!dS(e,u,!0)&&f1(e,x,n,!0,u).each(F=>{b=F.container(),y=F.offset(),f=!0}))),P&&!n&&et(b)&&y===b.data.length&&f1(e,x,n,!1,b).each(F=>{b=F.container(),y=F.offset(),f=!0}),f&&b?$.some(Pe(b,y)):$.none()},xv=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=Pe.fromRangeStart(n);return Uy(e,o,!0,r).each(u=>{(!o||!Pe.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Uy(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Vy(n,r)?$.none():$.some(r)},Tv=(e,n)=>e.splitText(n),g1=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&et(n)){if(o>0&&o<n.data.length)if(r=Tv(n,o),n=r.previousSibling,c>o){c=c-o;const u=Tv(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(et(n)&&o>0&&o<n.data.length&&(n=Tv(n,o),o=0),et(r)&&c>0&&c<r.data.length){const u=Tv(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},wg=e=>({walk:(u,f)=>c1(e,u,f),split:g1,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=gf(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>xv(e,u).fold(rn,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});wg.compareRanges=Vy,wg.getCaretRangeFromPoint=Cg,wg.getSelectedNode=Bp,wg.getNode=Qm;const Yo=((e,n)=>{const o=(b,y)=>{if(!An(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=b.dom;ll(x)&&(x.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const x=pe(b,e);return parseFloat(x)||0}return y},c=r,u=(b,y)=>Mt(y,(x,R)=>{const P=pe(b,R),F=P===void 0?0:parseInt(P,10);return isNaN(F)?x:x+F},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,x)=>{const R=u(b,x);return y>R?y-R:0}}})("height",e=>{const n=e.dom;return Zl(e)?n.getBoundingClientRect().height:n.offsetHeight}),_E=e=>Yo.get(e),yf=()=>re.fromDom(document),Td=(e,n)=>e.view(n).fold(je([]),r=>{const c=e.owner(r),u=Td(e,c);return[r].concat(u)}),Wy=(e,n)=>{const o=n.owner(e);return Td(n,o)};var h1=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?$.none():$.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(re.fromDom)},owner:e=>_l(e)});const kv=e=>{const n=yf(),o=ja(n),r=Wy(e,h1),c=Gn(e),u=kt(r,(f,b)=>{const y=Gn(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return Lf(u.left+c.left+o.left,u.top+c.top+o.top)},dm=e=>Fs(e)==="textarea",jy=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),AE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},OE=(e,n)=>{const o=Ur(e);if(o.length===0||dm(e))return{element:e,offset:n};if(n<o.length&&!dm(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return dm(r)?{element:e,offset:n}:Fs(r)==="img"?{element:r,offset:1}:Cr(r)?{element:r,offset:Yi(r).length}:{element:r,offset:Ur(r).length}}},mS=(e,n)=>{const o=Rs(e),r=_E(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Mo=(e,n)=>{const o=OE(e,n),r=re.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Hs+"</span>");return ho(o.element,r),mS(r,()=>Uo(r))},Fu=e=>mS(re.fromDom(e),bt),Sg=(e,n,o,r)=>{v(e,(c,u)=>m(e,n,o,r),o)},i=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(jy(e,u))return;const f=ja(n).top;o(n,f,r,c),AE(e,u)},m=(e,n,o,r)=>{const c=re.fromDom(e.getBody()),u=re.fromDom(e.getDoc());Yt(c);const f=Mo(re.fromDom(o.startContainer),o.startOffset);i(e,u,n,f,r),f.cleanup()},h=(e,n,o,r)=>{const c=re.fromDom(e.getDoc());i(e,c,o,Fu(n),r)},v=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(re.fromDom(r),re.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},S=(e,n,o,r)=>{const c=e.pos;if(o)Gi(c.left,c.top,r);else{const u=c.top-n+e.height;Gi(c.left,u,r)}},A=(e,n,o,r,c)=>{const u=o+n,f=r.pos.top,b=r.bottom,y=b-f>=o;f<n?S(r,o,c!==!1,e):f>u?S(r,o,y?c!==!1:c===!0,e):b>u&&!y&&S(r,o,c===!0,e)},I=(e,n,o,r)=>{const c=Cu(e).dom.innerHeight;A(e,n,c,o,r)},W=(e,n,o,r)=>{const c=Cu(e).dom.innerHeight;A(e,n,c,o,r);const u=kv(o.element),f=sb(window);u.top<f.y?Su(o.element,r!==!1):u.top>f.bottom&&Su(o.element,r===!0)},K=(e,n,o)=>Sg(e,I,n,o),ae=(e,n,o)=>h(e,n,I,o),ve=(e,n,o)=>Sg(e,W,n,o),qe=(e,n,o)=>h(e,n,W,o),dt=(e,n,o)=>{(e.inline?ae:qe)(e,n,o)},ct=(e,n,o)=>{(e.inline?K:ve)(e,n,o)},He=e=>e.dom.focus(),gt=e=>{const n=Wl(e).dom;return e.dom===n.activeElement},Ve=(e=yf())=>$.from(e.dom.activeElement).map(re.fromDom),Vt=e=>Ve(Wl(e)).filter(n=>e.dom.contains(n.dom)),Cn=(e,n)=>{const o=Cr(n)?Yi(n).length:Ur(n).length+1;return e>o?o:e<0?0:e},Kn=e=>vf.range(e.start,Cn(e.soffset,e.start),e.finish,Cn(e.foffset,e.finish)),Ks=(e,n)=>!Lm(n.dom)&&(Aa(e,n)||zo(e,n)),Xa=e=>n=>Ks(e,n.start)&&Ks(e,n.finish),Hr=e=>e.inline||Ao.browser.isFirefox(),pl=e=>vf.range(re.fromDom(e.startContainer),e.startOffset,re.fromDom(e.endContainer),e.endOffset),Cf=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?$.none():$.from(n.getRangeAt(0))).map(pl)},p1=e=>{const n=Cu(e);return Cf(n.dom).filter(Xa(e))},Ev=(e,n)=>$.from(n).filter(Xa(e)).map(Kn),_v=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),$.some(n)}catch{return $.none()}},fs=e=>{const n=Hr(e)?p1(re.fromDom(e.getBody())):$.none();e.bookmark=n.isSome()?n:e.bookmark},gc=e=>(e.bookmark?e.bookmark:$.none()).bind(o=>Ev(re.fromDom(e.getBody()),o)).bind(_v),hc=e=>{gc(e).each(n=>e.selection.setRng(n))},$l={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},Uh=(e,n)=>(An(n)||(n=0),setTimeout(e,n)),Hc=(e,n)=>(An(n)||(n=0),setInterval(e,n)),bl={setEditorTimeout:(e,n,o)=>Uh(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=Hc(()=>{e.removed?clearInterval(r):n()},o);return r}},Wh=e=>e.type==="nodechange"&&e.selectionChange,Vu=(e,n)=>{const o=()=>{n.throttle()};Ms.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Ms.DOM.unbind(document,"mouseup",o)})},pc=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},DE=(e,n)=>{pc(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Wh(o)||fs(e)})},RE=e=>{const n=hh(()=>{fs(e)},0);e.on("init",()=>{e.inline&&Vu(e,n),DE(e,n)}),e.on("remove",()=>{n.cancel()})};let Zh;const Gy=Ms.DOM,ME=e=>_t(e)&&$l.isEditorUIElement(e),qy=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Av=(e,n)=>{const o=mw(e);return Gy.getParent(n,c=>ME(c)||(o?e.dom.is(c,o):!1))!==null},b1=e=>{try{const n=Wl(re.fromDom(e.getElement()));return Ve(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},fS=(e,n)=>{const o=n.editor;RE(o),o.on("focusin",()=>{const r=e.focusedEditor;r!==o&&(r&&r.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:r}),o.focus(!0))}),o.on("focusout",()=>{bl.setEditorTimeout(o,()=>{const r=e.focusedEditor;!Av(o,b1(o))&&r===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Zh||(Zh=r=>{const c=e.activeEditor;c&&qg(r).each(u=>{const f=u;f.ownerDocument===document&&f!==document.body&&!Av(c,f)&&e.focusedEditor===c&&(c.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Gy.bind(document,"focusin",Zh))},i3=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Zh&&(Gy.unbind(document,"focusin",Zh),Zh=null)},o5=e=>{e.on("AddEditor",Le(fS,e)),e.on("RemoveEditor",Le(i3,e))},u3=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),d3=e=>e.collapsed?$.from(Qm(e.startContainer,e.startOffset)).map(re.fromDom):$.none(),s5=(e,n)=>d3(n).bind(o=>Hd(o)?$.some(o):Aa(e,o)?$.none():$.some(e)),m3=(e,n)=>{s5(re.fromDom(e.getBody()),n).bind(o=>hl(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},NE=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},r5=e=>gt(e)||Vt(e).isSome(),a5=e=>ge(e.iframeElement)&&gt(re.fromDom(e.iframeElement)),gS=e=>{const n=e.getBody();return n&&r5(re.fromDom(n))},c5=e=>{const n=Wl(re.fromDom(e.getElement()));return Ve(n).filter(o=>!qy(o.dom)&&Av(e,o.dom)).isSome()},v1=e=>e.inline?gS(e):a5(e),BE=e=>v1(e)||c5(e),l5=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),ge(e.bookmark)&&!v1(e)&&gc(e).each(u=>{e.selection.setRng(u),r=u});const c=u3(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){NE(c),m3(e,r),hS(e);return}e.inline||(Ao.browser.isOpera()||NE(o),e.getWin().focus()),(Ao.browser.isFirefox()||e.inline)&&(NE(o),m3(e,r)),hS(e)},hS=e=>e.editorManager.setActive(e),f3=(e,n)=>{e.removed||(n?hS(e):l5(e))},PE=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return $.from(u).map(re.fromDom).map(b=>!r||!n.collapsed?Fd(b,c(b,f)).getOr(b):b).bind(b=>ps(b)?$.some(b):sc(b).filter(ps)).map(b=>b.dom).getOr(e)},g3=(e,n,o=!1)=>PE(e,n,!0,o,(r,c)=>Math.min(wu(r),c)),h3=(e,n,o=!1)=>PE(e,n,!1,o,(r,c)=>c>0?c-1:c),p3=(e,n)=>{const o=e;for(;e&&et(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},i5=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),et(o)&&et(r)&&(o.length===c?o=p3(o.nextSibling,!0):o=o.parentNode,u===0?r=p3(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=et(f)?f.parentNode:f;return _t(b)?b:e},pS=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||g3(u,n,n.collapsed),e.isBlock),b=e.getParent(r||h3(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y=f;const x=new Wr(f,u);for(;(y=x.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},b3=(e,n,o)=>$.from(n).bind(r=>$.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(lv(e,f,r,!0),lv(e,f,r,!1)),f})),bS=(e,n)=>Xt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),v3=e=>Fs(e)==="img"?1:Zc(e).fold(()=>Ur(e).length,n=>n.length),y3=e=>Zc(e).filter(n=>n.trim().length!==0||n.indexOf($r)>-1).isSome(),u5=["img","br"],C3=e=>y3(e)||on(u5,Fs(e)),d5=e=>ad(e,C3),m5=e=>f5(e,C3),f5=(e,n)=>{const o=r=>{const c=Ur(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return $.some(f);const b=o(f);if(b.isSome())return b}return $.none()};return o(e)},w3="[data-mce-autocompleter]",g5=(e,n)=>{if(S3(re.fromDom(e.getBody())).isNone()){const o=re.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Ar(o,re.fromDom(n.extractContents())),n.insertNode(o.dom),sc(o).each(r=>r.dom.normalize()),m5(o).map(r=>{e.selection.setCursorLocation(r.dom,v3(r))})}},h5=e=>cd(e,w3),S3=e=>Ff(e,w3),p5=(e,n)=>S3(n).each(o=>{const r=e.selection.getBookmark();Za(o),e.selection.moveToBookmark(r)}),b5={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},vS=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},yS=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!yi(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},$E=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Il{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new Il(n,b5[n]||1);return o&&lo(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!oe(n))return ge(n)&&lo(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Il(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=vS(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=vS(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if($E(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||$E(f))return!1}if(f.type===8||f.type===3&&!yS(f)||f.type===3&&f.parent&&o[f.parent.name]&&yi((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=vS(f,u));return!0}walk(n){return vS(this,null,n)}}const v5=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),x3=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&v5(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},y5=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){nr(y[2],"--")?b=x3(n,!1,y.index+3):b=x3(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const x=c.exec(n);if(te(x)||x.index!==r.lastIndex)continue;y[1]==="/"?f-=1:hn(u,y[2])||(f+=1),b=r.lastIndex+x[0].length;break}}return b},C5=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},T3=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=C5(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let x;u[f[1]]?x=b:x=y5(r,c,b),c=c.substring(0,b-y)+c.substring(x),o.lastIndex=b-y}return oa(c)},w5=T3,IE=e=>{const n=Fo(e,"[data-mce-bogus]");Be(n,o=>{hr(o,"data-mce-bogus")==="all"?Uo(o):Xi(o)?(ho(o,re.fromText(Vm)),Uo(o)):Za(o)})},k3=e=>{const n=Fo(e,"input");Be(n,o=>{Sr(o,"name")})},E3=(e,n)=>{const o=si(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},_3=(e,n)=>{const o=e.getDoc(),r=Wl(re.fromDom(e.getBody())),c=re.fromTag("div",o);wr(c,"data-mce-bogus","all"),ie(c,{position:"fixed",left:"-9999999px",top:"0"}),Kg(c,n.innerHTML),IE(c),k3(c);const u=Zi(r);Ar(u,c);const f=oa(c.dom.innerText);return Uo(c),f},S5=(e,n,o)=>{let r;return n.format==="raw"?r=Ge.trim(w5(e.serializer,o.innerHTML)):n.format==="text"?r=_3(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=E3(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Vf(re.fromDom(o))&&oe(r)?Ge.trim(r):r},x5=(e,n)=>$.from(e.getBody()).fold(je(n.format==="tree"?new Il("body",11):""),o=>S5(e,n,o)),A3=Ge.makeMap,O3=e=>{const n=[];e=e||{};const o=e.indent,r=A3(e.indent_before||""),c=A3(e.indent_after||""),u=Na.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,x)=>{if(o&&r[b]&&n.length>0){const R=n[n.length-1];R.length>0&&R!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let R=0,P=y.length;R<P;R++){const F=y[R];n.push(" ",F.name,'="',u(F.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const R=n[n.length-1];R.length>0&&R!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},jh=(e={},n=Du())=>{const o=O3(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=y=>{var x;const R=f[y.type];if(R)R(y);else{const P=y.name,F=P in n.getVoidElements();let Y=y.attributes;if(u&&Y&&Y.length>1){const J=[];J.map={};const q=n.getElementRule(y.name);if(q){for(let ee=0,me=q.attributesOrder.length;ee<me;ee++){const de=q.attributesOrder[ee];if(de in Y.map){const ye=Y.map[de];J.map[de]=ye,J.push({name:de,value:ye})}}for(let ee=0,me=Y.length;ee<me;ee++){const de=Y[ee].name;if(!(de in J.map)){const ye=Y.map[de];J.map[de]=ye,J.push({name:de,value:ye})}}Y=J}}if(o.start(P,Y,F),!F){let J=y.firstChild;if(J){(P==="pre"||P==="textarea")&&J.type===3&&((x=J.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(J);while(J=J.next)}o.end(P)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},D3=new Set;Be(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{D3.add(n)});const R3=["font","text-decoration","text-emphasis"],LE=(e,n)=>Dn(e.parseStyle(e.getAttrib(n,"style"))),T5=e=>D3.has(e),k5=(e,n)=>mo(LE(e,n),o=>!T5(o)),E5=e=>be(e,n=>zt(R3,o=>nr(n,o))),_5=(e,n,o)=>{const r=LE(e,n),c=LE(e,o),u=f=>{var b,y;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",R=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return za(x)&&za(R)&&x!==R};return zt(r,f=>{const b=y=>zt(y,x=>x===f);if(!b(c)&&b(R3)){const y=E5(c);return zt(y,u)}else return u(f)})},M3=(e,n,o)=>$.from(o.container()).filter(et).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),FE=Le(M3,!0,fc),HE=Le(M3,!1,fc),A5=e=>{const n=e.container();return et(n)&&(n.data.length===0||Kl(n.data)&&Iu.isBookmarkNode(n.parentNode))},Gh=(e,n)=>o=>Qb(e?0:-1,o).filter(n).isSome(),N3=e=>ta(e)&&pe(re.fromDom(e),"display")==="block",B3=e=>Ts(e)&&!qT(e),an=Gh(!0,N3),P3=Gh(!1,N3),Ov=Gh(!0,qi),Ky=Gh(!1,qi),CS=Gh(!0,Da),$3=Gh(!1,Da),qh=Gh(!0,B3),Kh=Gh(!1,B3),O5=e=>e.slice(0,-1),D5=(e,n,o)=>Aa(n,e)?O5(nd(e,r=>o(r)||zo(r,n))):[],Yy=(e,n)=>D5(e,n,rn),wf=(e,n)=>[e].concat(Yy(e,n)),I3=(e,n,o)=>ov(e,n,o,A5),L3=(e,n)=>jn(wf(re.fromDom(n.container()),e),Zr),qn=(e,n,o)=>I3(e,n.dom,o).forall(r=>L3(n,o).fold(()=>!Pu(r,o,n.dom),c=>!Pu(r,o,n.dom)&&Aa(c,re.fromDom(r.container())))),F3=(e,n,o)=>L3(n,o).fold(()=>I3(e,n.dom,o).forall(r=>!Pu(r,o,n.dom)),r=>I3(e,r.dom,o).isNone()),So=Le(F3,!1),VE=Le(F3,!0),B9=Le(qn,!1),P9=Le(qn,!0),R5=e=>Ah(e).exists(Xi),zE=(e,n,o)=>{const r=be(wf(re.fromDom(o.container()),n),Zr),c=Jn(r).getOr(n);return ri(e,c.dom,o).filter(R5)},H3=(e,n)=>Ah(n).exists(Xi)||zE(!0,e,n).isSome(),UE=(e,n)=>_c(n).exists(Xi)||zE(!1,e,n).isSome(),M5=Le(zE,!1),Tn=Le(zE,!0),V3=e=>Pe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),z3=(e,n)=>{const o=be(wf(re.fromDom(n.container()),e),Zr);return Jn(o).getOr(e)},U3=(e,n)=>V3(n)?HE(n):HE(n)||ai(z3(e,n).dom,n).exists(HE),Dv=(e,n)=>V3(n)?FE(n):FE(n)||Jc(z3(e,n).dom,n).exists(FE),W3=e=>on(["pre","pre-wrap"],e),WE=e=>Ah(e).bind(n=>bi(n,ps)).exists(n=>W3(pe(n,"white-space"))),N5=(e,n)=>ai(e.dom,n).isNone(),B5=(e,n)=>Jc(e.dom,n).isNone(),Z3=(e,n)=>N5(e,n)||B5(e,n)||So(e,n)||VE(e,n)||UE(e,n)||H3(e,n),P5=e=>ge(e)&&Ts(e)&&Jb(e),$5=(e,n)=>o=>P5(new Wr(o,e)[n]()),$9=(e,n)=>{const o=Jc(e.dom,n).getOr(n),r=$5(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},I5=(e,n)=>{const o=ai(e.dom,n).getOr(n),r=$5(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},L5=(e,n)=>WE(n)?!1:Z3(e,n)||U3(e,n)||Dv(e,n),Xy=(e,n)=>WE(n)?!1:So(e,n)||B9(e,n)||UE(e,n)||U3(e,n)||I5(e,n),F5=e=>{const n=e.container(),o=e.offset();return et(n)&&o<n.data.length?Pe(n,o+1):e},Rv=(e,n)=>WE(n)?!1:VE(e,n)||P9(e,n)||H3(e,n)||Dv(e,n)||$9(e,n),ZE=(e,n)=>Xy(e,n)||Rv(e,F5(n)),Po=(e,n)=>Mh(e.charAt(n)),jE=(e,n)=>fc(e.charAt(n)),wS=e=>{const n=e.container();return et(n)&&ms(n.data,$r)},j3=e=>{const n=e.split("");return Xt(n,(o,r)=>Mh(o)&&r>0&&r<n.length-1&&cv(n[r-1])&&cv(n[r+1])?" ":o).join("")},GE=(e,n,o)=>{const r=n.data,c=Pe(n,0);return!o&&Po(r,0)&&!ZE(e,c)?(n.data=" "+r.slice(1),!0):o&&jE(r,0)&&Xy(e,c)?(n.data=$r+r.slice(1),!0):!1},G3=e=>{const n=e.data,o=j3(n);return o!==n?(e.data=o,!0):!1},qE=(e,n,o)=>{const r=n.data,c=Pe(n,r.length-1);return!o&&Po(r,r.length-1)&&!ZE(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&jE(r,r.length-1)&&Rv(e,c)?(n.data=r.slice(0,-1)+$r,!0):!1},q3=(e,n)=>{const o=n.container();if(!et(o))return $.none();if(wS(n)){const r=GE(e,o,!1)||G3(o)||qE(e,o,!1);return Vn(r,n)}else if(ZE(e,n)){const r=GE(e,o,!0)||qE(e,o,!0);return Vn(r,n)}else return $.none()},H5=e=>{const n=re.fromDom(e.getBody());e.selection.isCollapsed()&&q3(n,Pe.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},KE=(e,n,o)=>{if(o===0)return;const r=re.fromDom(e),c=Im(r,Zr).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Rv(c,Pe(e,e.data.length)),b=n===0&&Xy(c,Pe(e,0));e.replaceData(n,o,vp(u,4,b,f))},SS=(e,n)=>{const o=e.data.slice(n),r=o.length-Bd(o).length;KE(e,n,r)},YE=(e,n)=>{const o=e.data.slice(0,n),r=o.length-fi(o).length;KE(e,n-r,r)},XE=(e,n,o,r=!0)=>{const c=fi(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Uo(re.fromDom(f)),o&&SS(u,c),u},V5=(e,n)=>{const o=e.container(),r=e.offset();return!Pe.isTextPosition(e)&&o===n.parentNode&&r>Pe.before(n).offset()},z5=(e,n)=>V5(n,e)?Pe(n.container(),n.offset()-1):n,U5=e=>et(e)?Pe(e,0):Pe.before(e),W5=e=>et(e)?Pe(e,e.data.length):Pe.after(e),K3=e=>qc(e.previousSibling)?$.some(W5(e.previousSibling)):e.previousSibling?yd(e.previousSibling):$.none(),xS=e=>qc(e.nextSibling)?$.some(U5(e.nextSibling)):e.nextSibling?hl(e.nextSibling):$.none(),JE=(e,n)=>$.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>ai(e,Pe.before(o))).orThunk(()=>Jc(e,Pe.after(n))),Z5=(e,n)=>Jc(e,Pe.after(n)).orThunk(()=>ai(e,Pe.before(n))),j5=(e,n)=>K3(n).orThunk(()=>xS(n)).orThunk(()=>JE(e,n)),G5=(e,n)=>xS(n).orThunk(()=>K3(n)).orThunk(()=>Z5(e,n)),q5=(e,n,o)=>e?G5(n,o):j5(n,o),K5=(e,n,o)=>q5(e,n,o).map(Le(z5,o)),Y3=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},Y5=e=>n=>n.dom===e,X5=(e,n)=>n&&hn(e.schema.getBlockElements(),Fs(n)),X3=e=>{if(jr(e)){const n=re.fromHtml('<br data-mce-bogus="1">');return ur(e),Ar(e,n),$.some(Pe.before(n.dom))}else return $.none()},J5=(e,n,o)=>{const r=wc(e).filter(Cr),c=Ld(e).filter(Cr);return Uo(e),Li(r,c,n,(u,f,b)=>{const y=u.dom,x=f.dom,R=y.data.length;return XE(y,x,o),b.container()===x?Pe(y,R):b}).orThunk(()=>(o&&(r.each(u=>YE(u.dom,u.dom.length)),c.each(u=>SS(u.dom,0))),n))},Q5=(e,n)=>hn(e.schema.getTextInlineElements(),Fs(n)),zu=(e,n,o,r=!0)=>{const c=K5(n,e.getBody(),o.dom),u=Im(o,Le(X5,e),Y5(e.getBody())),f=J5(o,c,Q5(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(X3).fold(()=>{r&&Y3(e,n,f)},b=>{r&&Y3(e,n,$.some(b))})},eI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,J3=e=>eI.test(e),y1=(e,n)=>ul(re.fromDom(n),dw(e))&&!Zf(e.schema,n),tI=e=>{var n;return Ms.DOM.getStyle(e,"direction",!0)==="rtl"||J3((n=e.textContent)!==null&&n!==void 0?n:"")},Q3=(e,n,o)=>be(Ms.DOM.getParents(o.container(),"*",n),e),xg=(e,n,o)=>{const r=Q3(e,n,o);return $.from(r[r.length-1])},eD=(e,n,o)=>{const r=cf(n,e),c=cf(o,e);return ge(r)&&r===c},tD=e=>tt(e)||Tt(e),Dr=(e,n)=>{const o=n.container(),r=n.offset();return e?L(o)?et(o.nextSibling)?Pe(o.nextSibling,0):Pe.after(o):tt(n)?Pe(o,r+1):n:L(o)?et(o.previousSibling)?Pe(o.previousSibling,o.previousSibling.data.length):Pe.before(o):Tt(n)?Pe(o,r-1):n},nD=Le(Dr,!0),oD=Le(Dr,!1),sD=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},nI=e=>{e.execCommand("delete")},rD=e=>sD(e,"Delete"),C1=e=>sD(e,"ForwardDelete"),oI=e=>n=>ha(sc(n),e,zo),sI=e=>jc(e)||Dl(e),Tr=(e,n)=>Aa(e,n)?bi(n,sI,oI(e)):$.none(),Mv=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},I9=(e,n,o)=>Pr(hl(o),yd(o),(r,c)=>{const u=Dr(!0,r),f=Dr(!1,c),b=Dr(!1,n);return e?Jc(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):ai(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),Ll=e=>(fp(e)?wc(e):Mm(e)).bind(Ll).orThunk(()=>$.some(e)),Vs=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=Ll(o).getOr(o),f=re.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Mv(e,r):jr(f)&&(na(f),r&&e.selection.setCursorLocation(f.dom,0)),!zo(o,f)){const b=ha(sc(f),o)?[]:Wg(f);Be(b.concat(Ur(o)),y=>{!zo(y,f)&&!Aa(y,f)&&jr(y)&&Uo(y)})}},kd=e=>n=>zo(e,n),QE=e=>Fo(e,"td,th"),aD=(e,n)=>{const o=x=>fg(re.fromDom(x),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=Pr(r,c,zo).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},Jy=(e,n)=>({start:e,end:n}),e_=(e,n,o)=>({rng:e,table:n,cells:o}),Nv=tu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Qy=(e,n)=>cd(re.fromDom(e),"td,th",n),cD=e=>!zo(e.start,e.end),lD=(e,n)=>fg(e.start,n).bind(o=>fg(e.end,n).bind(r=>Vn(zo(o,r),o))),t_=(e,n)=>!cD(e)&&lD(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),iD=(e,n)=>{const o=Qy(e.startContainer,n),r=Qy(e.endContainer,n);return Pr(o,r,Jy)},mm=e=>n=>fg(n,e).bind(o=>Do(QE(o)).map(r=>Jy(n,r))),rI=e=>n=>fg(n,e).bind(o=>Jn(QE(o)).map(r=>Jy(r,n))),n_=e=>n=>lD(n,e).map(o=>e_(n,o,QE(o))),aI=(e,n,o,r)=>{if(o.collapsed||!e.forall(cD))return $.none();if(n.isSameTable){const c=e.bind(n_(r));return $.some({start:c,end:c})}else{const c=Qy(o.startContainer,r),u=Qy(o.endContainer,r),f=c.bind(mm(r)).bind(n_(r)),b=u.bind(rI(r)).bind(n_(r));return $.some({start:f,end:b})}},TS=(e,n)=>Is(e,o=>zo(o,n)),o_=e=>Pr(TS(e.cells,e.rng.start),TS(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),eC=(e,n,o)=>e.exists(r=>t_(r,o)&&ky(r.start,n)),uD=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},Bv=(e,n,o,r)=>aI(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=o_(c).getOr([]);if(u&&c.cells.length===f.length)return $.some(Nv.fullTable(c.table));if(f.length>0){if(u)return $.some(Nv.partialTable(f,$.none()));{const b=uD(o,n);return $.some(Nv.partialTable(f,$.some({...n,rng:b})))}}else return $.none()}),Uu=(e,n,o,r)=>aI(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(o_).getOr([]),b=u.bind(o_).getOr([]);if(f.length>0&&b.length>0){const y=uD(o,n);return $.some(Nv.multiTable(f,b,y))}else return $.none()}),tC=(e,n)=>{const o=kd(e),r=iD(n,o),c=aD(n,o);return eC(r,n,o)?r.map(u=>Nv.singleCellTable(n,u.start)):c.isMultiTable?Uu(r,c,n,o):Bv(r,c,n,o)},zs=e=>Be(e,n=>{Sr(n,"contenteditable"),na(n)}),nC=(e,n)=>$.from(e.dom.getParent(n,e.dom.isBlock)).map(re.fromDom),dD=(e,n,o)=>{o.each(r=>{n?Uo(r):(na(r),e.selection.setCursorLocation(r.dom,0))})},kS=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),oC(e,c,n,!1).each(u=>u())},ES=e=>{const n=uf(e),o=re.fromDom(e.selection.getNode());ku(o.dom)&&jr(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&zt(n,r=>zo(r,o))&&wr(o,"data-mce-selected","1")},_S=(e,n,o)=>$.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=nC(e,f?u.endContainer:u.startContainer);u.deleteContents(),dD(e,f,b.filter(jr));const y=f?n[0]:n[n.length-1];return kS(e,y,r,f),jr(y)?$.none():$.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);zs(c),ES(e)}),s_=(e,n,o,r)=>$.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];kS(e,u,c,!0),kS(e,f,c,!1);const b=jr(u)?n:n.slice(1),y=jr(f)?o:o.slice(0,-1);zs(b.concat(y)),r.deleteContents(),ES(e)}),oC=(e,n,o,r=!0)=>$.some(()=>{Vs(e,n,o,r)}),AS=(e,n)=>$.some(()=>zu(e,!1,n)),r_=(e,n,o)=>tC(n,o).bind(r=>r.fold(Le(oC,e),Le(AS,e),Le(_S,e),Le(s_,e))),mD=(e,n)=>sC(e,n),fD=(e,n,o,r)=>OS(n,r).fold(()=>r_(e,n,o),c=>mD(e,c)),gD=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?_S(e,o,$.none()):fD(e,r,c,n)},a_=(e,n)=>jn(wf(n,e),Ma),OS=(e,n)=>jn(wf(n,e),Vi("caption")),Pv=(e,n,o,r,c)=>Rh(o,e.getBody(),c).bind(u=>a_(n,re.fromDom(u.getNode())).bind(f=>zo(f,r)?$.none():$.some(bt))),sC=(e,n)=>$.some(()=>{na(n),e.selection.setCursorLocation(n.dom,0)}),c_=(e,n,o,r)=>hl(e.dom).bind(c=>yd(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),cI=(e,n)=>sC(e,n),lI=(e,n,o)=>OS(e,re.fromDom(o.getNode())).fold(()=>$.some(bt),r=>Vn(!zo(r,n),bt)),hD=(e,n,o,r,c)=>Rh(o,e.getBody(),c).fold(()=>$.some(bt),u=>c_(r,o,c,u)?cI(e,r):lI(n,r,u)),pD=(e,n,o,r)=>{const c=Pe.fromRangeStart(e.selection.getRng());return a_(o,r).bind(u=>jr(u)?sC(e,u):Pv(e,o,n,u,c))},bD=(e,n,o,r)=>{const c=Pe.fromRangeStart(e.selection.getRng());return jr(r)?sC(e,r):hD(e,o,n,r,c)},rC=(e,n)=>e?CS(n):$3(n),vD=(e,n)=>{const o=Pe.fromRangeStart(e.selection.getRng());return rC(n,o)||ri(n,e.getBody(),o).exists(r=>rC(n,r))},yD=(e,n,o)=>{const r=re.fromDom(e.getBody());return OS(r,o).fold(()=>pD(e,n,r,o).orThunk(()=>Vn(vD(e,n),bt)),c=>bD(e,n,r,c))},DS=(e,n)=>{const o=re.fromDom(e.selection.getStart(!0)),r=uf(e);return e.selection.isCollapsed()&&r.length===0?yD(e,n,o):gD(e,o,r)},Yh=(e,n)=>{let o=n;for(;o&&o!==e;){if(Bc(o)||Ts(o))return o;o=o.parentNode}return null},CD=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],wD=Ge.each,RS=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const R={};return wD(n.getAttribs(x),P=>{const F=P.nodeName.toLowerCase();F!=="style"&&!c(F)&&(R[F]=n.getAttrib(x,F))}),R},y=(x,R)=>{for(const P in x)if(hn(x,P)){const F=R[P];if(jo(F)||x[P]!==F)return!1;delete R[P]}for(const P in R)if(hn(R,P))return!1;return!0};return _t(u)&&_t(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!mc(u)&&!mc(f)},c=u=>zt(CD,f=>nr(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},SD=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},l_=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},xD=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&SD(o,c=>{l_(e,n,c,r)}),r},i_=(e,n)=>{const o=(r,c)=>{lo(r,u=>{const f=is(u.nodes);Be(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||At(x.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},u_=(e,n,o,r={})=>{const c=xD(e,n,o);i_(c,r)},MS=(e,n,o)=>{if(e.insert&&n(o)){const r=new Il("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Il("#text",3)).value=$r},TD=e=>{var n;return NS(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===$r},NS=(e,n)=>{const o=e==null?void 0:e.firstChild;return ge(o)&&o===e.lastChild&&o.name===n},BS=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},$v=(e,n,o,r)=>r.isEmpty(n,o,c=>BS(e,c)),kD=(e,n)=>ge(e)&&(n(e)||e.name==="br"),Iv=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Iv(c,n,o);e.unwrap()}},aC=(e,n,o=bt)=>{const r=n.getTextBlockElements(),c=n.getNonEmptyElements(),u=n.getWhitespaceElements(),f=Ge.makeMap("tr,td,th,tbody,thead,tfoot,table"),b=new Set;for(let y=0;y<e.length;y++){const x=e[y];let R,P,F;if(!x.parent||b.has(x))continue;if(r[x.name]&&x.parent.name==="li"){let J=x.next;for(;J&&r[J.name];){J.name="li",b.add(J),x.parent.insert(J,x.parent);J=J.next}x.unwrap();continue}const Y=[x];for(R=x.parent;R&&!n.isValidChild(R.name,x.name)&&!f[R.name];R=R.parent)Y.push(R);if(R&&Y.length>1)if(n.isValidChild(R.name,x.name)){Y.reverse(),P=Y[0].clone(),o(P);let J=P;for(let q=0;q<Y.length-1;q++){n.isValidChild(J.name,Y[q].name)?(F=Y[q].clone(),o(F),J.append(F)):F=J;for(let ee=Y[q].firstChild;ee&&ee!==Y[q+1];){const me=ee.next;F.append(ee),ee=me}J=F}$v(n,c,u,P)?R.insert(x,Y[0],!0):(R.insert(P,Y[0],!0),R.insert(x,P)),R=Y[0],($v(n,c,u,R)||NS(R,"br"))&&R.empty().remove()}else Iv(x,n);else if(x.parent){if(x.name==="li"){let J=x.prev;if(J&&(J.name==="ul"||J.name==="ol")){J.append(x);continue}if(J=x.next,J&&(J.name==="ul"||J.name==="ol")&&J.firstChild){J.insert(x,J.firstChild,!0);continue}const q=new Il("ul",1);o(q),x.wrap(q);continue}if(n.isValidChild(x.parent.name,"div")&&n.isValidChild("div",x.name)){const J=new Il("div",1);o(J),x.wrap(J)}else Iv(x,n)}}},cC=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},PS=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&cC(o,"a")),ED=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},lC=e=>{const n=Pe.fromRangeStart(e),o=Pe.fromRangeEnd(e),r=e.commonAncestorContainer;return ri(!1,r,o).map(c=>!Pu(n,o,r)&&Pu(n,c,r)?ED(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},iC=e=>e.collapsed?e:lC(e),d_=e=>ge(e.firstChild)&&e.firstChild===e.lastChild,uC=e=>e.name==="br"||e.value===$r,_D=(e,n)=>e.getBlockElements()[n.name]&&d_(n)&&uC(n.firstChild),iI=(e,n)=>{const o=e.getNonEmptyElements();return ge(n)&&(n.isEmpty(o)||_D(e,n))},AD=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),iI(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},OD=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},uI=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return OD(c)},L9=e=>{var n;return be((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},dI=e=>e.data===$r||pr(e),m_=e=>ge(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&dI(e.firstChild),fm=e=>!e.firstChild||m_(e),f_=e=>e.length>0&&fm(e[e.length-1])?e.slice(0,-1):e,Lv=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},g_=(e,n)=>!!Lv(e,n),mI=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},DD=(e,n)=>{const o=Pe.before(e),c=cm(n).next(o);return c?c.toRange():null},RD=(e,n)=>{const o=Pe.after(e),c=cm(n).prev(o);return c?c.toRange():null},MD=(e,n,o,r)=>{const c=mI(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Ge.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),RD(n[n.length-1],o)},h_=(e,n,o)=>{const r=e.parentNode;return r&&Ge.each(n,c=>{r.insertBefore(c,e)}),DD(e,o)},fI=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),RD(n[0],o)),ND=(e,n,o,r)=>{const c=uI(n,e,r),u=Lv(n,o.startContainer),f=f_(L9(c.firstChild)),b=1,y=2,x=n.getRoot(),R=P=>{const F=Pe.fromRangeStart(o),Y=cm(n.getRoot()),J=P===b?Y.prev(F):Y.next(F),q=J==null?void 0:J.getNode();return q?Lv(n,q)!==u:!0};return u?R(b)?h_(u,f,x):R(y)?fI(u,f,x,n):MD(u,f,x,o):null},gI=["pre"],dC=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,x=on(gI,u.name);if(y&&x){const R=u.attr("contenteditable")!=="false",P=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,F=$.from(Yh(r,o)).forall(Bc);return R&&P&&F}else return!1},$S=ku,hI=(e,n,o)=>{if(ge(o)){const r=e.getParent(n.endContainer,$S);return o===r&&ky(re.fromDom(o),n)}else return!1},BD=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},pI=(e,n)=>{$.from(e.getParent(n,"td,th")).map(re.fromDom).each(ub)},bI=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=RS(e);Ge.each(r.select("*[data-mce-fragment]"),f=>{if(ge(o[f.nodeName.toLowerCase()])&&k5(r,f)){for(let y=f.parentElement;ge(y)&&y!==c&&!_5(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},vI=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},yI=e=>{Ge.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},CI=e=>!!e.getAttribute("data-mce-fragment"),PD=(e,n)=>ge(n)&&!e.schema.getVoidElements()[n.nodeName],wI=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=Yh(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let x=f.createRng();const R=n.previousSibling;if(et(R)){x.setStart(R,(r=(o=R.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Y=n.nextSibling;et(Y)&&(R.appendData(Y.data),(c=Y.parentNode)===null||c===void 0||c.removeChild(Y))}else x.setStartBefore(n),x.setEndBefore(n);const P=Y=>{let J=Pe.fromRangeStart(Y);return J=cm(e.getBody()).next(J),J==null?void 0:J.toRange()},F=f.getParent(n,f.isBlock);f.remove(n),F&&f.isEmpty(F)&&(ur(re.fromDom(F)),x.setStart(F,0),x.setEnd(F,0),!$S(F)&&!CI(F)&&(u=P(x))?(x=u,f.remove(F)):f.add(F,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(x)},p_=e=>{const n=e.dom,o=iC(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,$S);hI(n,o,r)?oC(e,o,re.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&et(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},w1=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,x=jh({validate:!0},e.schema),R='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,R);let P=u.getRng();const F=P.startContainer,Y=e.getBody();F===Y&&u.isCollapsed()&&f.isBlock(Y.firstChild)&&PD(e,Y.firstChild)&&f.isEmpty(Y.firstChild)&&(P=f.createRng(),P.setStart(Y.firstChild,0),P.setEnd(Y.firstChild,0),u.setRng(P)),u.isCollapsed()||p_(e);const J=u.getNode(),q={context:J.nodeName.toLowerCase(),data:o.data,insert:!0},ee=b.parse(n,q);if(o.paste===!0&&AD(e.schema,ee)&&g_(f,J))return P=ND(x,f,u.getRng(),ee),P&&u.setRng(P),n;o.paste===!0&&dC(f,ee,J,e.getBody())&&((r=ee.firstChild)===null||r===void 0||r.unwrap()),vI(ee);let me=ee.lastChild;if(me&&me.attr("id")==="mce_marker"){const de=me;for(me=me.prev;me;me=me.walk(!0))if(me.type===3||!f.isBlock(me.name)){me.parent&&e.schema.isValidChild(me.parent.name,"span")&&me.parent.insert(de,me,me.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(J),!q.invalid)n=x.serialize(ee),BD(e,n,J);else{e.selection.setContent(R);let de=u.getNode(),ye;const xe=e.getBody();for(Nc(de)?de=ye=xe:ye=de;ye&&ye!==xe;)de=ye,ye=ye.parentNode;n=de===xe?xe.innerHTML:f.getOuterHTML(de);const Ue=b.parse(n);for(let Se=Ue;Se;Se=Se.walk())if(Se.attr("id")==="mce_marker"){Se.replace(ee);break}const mt=ee.children(),lt=(c=ee.parent)!==null&&c!==void 0?c:Ue;ee.unwrap();const Oe=be(mt,Se=>PS(e.schema,Se,lt));aC(Oe,e.schema),u_(b.getNodeFilters(),b.getAttributeFilters(),Ue),n=x.serialize(Ue),de===xe?f.setHTML(xe,n):f.setOuterHTML(de,n)}return bI(e,y),wI(e,f.get("mce_marker")),yI(e.getBody()),pI(f,u.getStart()),jm(e.schema,e.getBody(),u.getStart()),n},IS=e=>e instanceof Il,SI=e=>{v1(e)&&hl(e.getBody()).each(n=>{const o=n.getNode(),r=Da(o)?hl(o).getOr(n):n;e.selection.setRng(r.toRange())})},Fv=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&SI(e)},$D=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=si(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Fp(e),o)):o||(o=c),Fv(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=jh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Vf(re.fromDom(n))?o:Ge.trim(o);return Fv(e,c,r.no_selection),{content:c,html:c}}},ID=(e,n,o,r)=>{u_(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=jh({validate:!1},e.schema).serialize(o),u=Vf(re.fromDom(n))?c:Ge.trim(c);return Fv(e,u,r.no_selection),{content:o,html:u}},xI=(e,n,o)=>$.from(e.getBody()).map(r=>IS(n)?ID(e,r,n,o):$D(e,r,n,o)).getOr({content:n,html:IS(o.content)?"":o.content}),LD=(e,n)=>vi(e,n).isSome(),FD=e=>X(e)?e:rn,Hv=(e,n,o)=>{let r=e.dom;const c=FD(o);for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return $.none()},LS=(e,n,o)=>{const r=n(e),c=FD(o);return r.orThunk(()=>c(e)?$.none():Hv(e,n,c))},FS=_y,b_=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Ti(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Vv=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>b_(e,b,o)?!0:b.parentNode===u||!!gm(e,b,o,r,!0));return!!gm(e,f,o,r,c)},mC=(e,n,o)=>$a(o)&&FS(n,o.inline)||wd(o)&&FS(n,o.block)?!0:Ti(o)?_t(n)&&e.is(n,o.selector):!1,HD=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(X(o.onmatch))return o.onmatch(n,o,r);if(f){if(Ha(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):Ay(e,n,f[y]))return!0}else for(const y in f)if(hn(f,y)){const x=b?e.getAttrib(n,y):Ay(e,n,y),R=im(f[y],u),P=At(x)||Os(x);if(P&&At(R))continue;if(c&&P&&!o.exact||(!c||o.exact)&&!FS(x,pg(R,y)))return!1}}return!0},gm=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&_t(n))for(let b=0;b<u.length;b++){const y=u[b];if(mC(e.dom,n,y)&&HD(f,n,y,"attributes",c,r)&&HD(f,n,y,"styles",c,r)){const x=y.classes;if(x){for(let R=0;R<x.length;R++)if(!e.dom.hasClass(n,im(x[R],r)))return}return y}}},v_=(e,n,o,r,c)=>{if(r)return Vv(e,r,n,o,c);if(r=e.selection.getNode(),Vv(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Vv(e,u,n,o,c))},TI=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&gm(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},HS=(e,n)=>{const o=c=>zo(c,re.fromDom(e.getBody())),r=(c,u)=>gm(e,c.dom,u)?$.some(u):$.none();return $.from(e.selection.getStart(!0)).bind(c=>LS(re.fromDom(c),u=>Jr(n,f=>r(u,f)),o)).getOrNull()},VD=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=s1(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Ti(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},y_=(e,n,o)=>Mt(o,(r,c)=>{const u=lE(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),zv=Hs,kI=(e,n)=>e.importNode(n,!0),zD=e=>{const n=[];let o=e;for(;o;){if(et(o)&&o.data!==zv||o.childNodes.length>1)return[];_t(o)&&n.push(o),o=o.firstChild}return n},VS=e=>zD(e).length>0,C_=e=>{if(e){const n=new Wr(e,e);for(let o=n.current();o;o=n.next())if(et(o))return o}return null},w_=e=>{const n=re.fromTag("span");return bs(n,{id:py,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ar(n,re.fromText(zv)),n},EI=e=>{const n=C_(e);return n&&n.data.charAt(0)===zv&&n.deleteData(0,1),n},S_=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(VS(n))zu(e,!1,re.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,x=u.endContainer,R=u.endOffset,P=EI(n);r.remove(n,!0),b===P&&y>0&&u.setStart(P,y-1),x===P&&R>0&&u.setEnd(P,R-1),f&&r.isEmpty(f)&&na(re.fromDom(f)),c.setRng(u)}},Uv=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)S_(e,n,o);else if(n=ug(e.getBody(),c.getStart()),!n)for(;n=r.get(py);)S_(e,n,!1)},Tg=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Le(gg,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(pp(re.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},UD=(e,n)=>(e.appendChild(n),n),zS=(e,n)=>{var o;const r=kt(e,(u,f)=>UD(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return UD(r,c.createTextNode(zv))},aa=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=be(Dn(f.get()),P=>P!==r&&!ms(P,"removeformat")),x=y_(e,o,y);if(be(x,P=>!iE(e,P,r)).length>0){const P=o.cloneNode(!1);return b.add(n,P),f.remove(r,c,P,u),b.remove(P),$.some(P)}else return $.none()},x_=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=ug(e.getBody(),c.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&R.test(x.charAt(b))&&R.test(x.charAt(b-1))){const P=c.getBookmark();f.collapse(!0);let F=gf(e.dom,f,u);F=g1(F),e.formatter.apply(n,o,F),c.moveToBookmark(P)}else{let P=r?C_(r):null;(!r||(P==null?void 0:P.data)!==zv)&&(r=kI(e.getDoc(),w_(!0).dom),P=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(P,b)}},T_=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),x=y.startContainer,R=y.startOffset;let P=x;et(x)&&(R!==x.data.length&&(f=!0),P=P.parentNode);const F=[];let Y;for(;P;){if(gm(e,P,n,o,r)){Y=P;break}P.nextSibling&&(f=!0),F.push(P),P=P.parentNode}if(Y)if(f){const J=u.getBookmark();y.collapse(!0);let q=gf(c,y,b,!0);q=g1(q),e.formatter.remove(n,o,q,r),u.moveToBookmark(J)}else{const J=ug(e.getBody(),Y),q=w_(!1).dom;Tg(e,q,J??Y);const ee=aa(e,q,Y,n,o,r),me=zS(F.concat(ee.toArray()),q);J&&S_(e,J,!1),u.setCursorLocation(me,1),c.isEmpty(Y)&&c.remove(Y)}},kg=(e,n)=>{const o=e.selection,r=e.getBody();Uv(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===zv&&Uv(e,ug(r,o.getStart())),(n===37||n===39)&&Uv(e,ug(r,o.getStart()))},_I=e=>{e.on("mouseup keydown",n=>{kg(e,n.keyCode)})},WD=(e,n)=>{const o=w_(!1),r=zS(n,o.dom);return ho(re.fromDom(e),o),Uo(re.fromDom(e)),Pe(r,0)},fC=(e,n)=>{const o=e.schema.getTextInlineElements();return hn(o,Fs(n))&&!ci(n.dom)&&!Tu(n.dom)},AI=e=>ci(e.dom)&&VS(e.dom),gC={},S1=jl(["pre"]),OI=(e,n)=>{gC[e]||(gC[e]=[]),gC[e].push(n)},x1=(e,n)=>{hn(gC,e)&&Be(gC[e],o=>{o(n)})};OI("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return S1(f)&&on(c,f)},r=(c,u)=>{const f=re.fromDom(u),b=_l(f).dom;Uo(f),Pn(re.fromDom(c),[re.fromTag("br",b),re.fromTag("br",b),...Ur(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=be(be(c,S1),o(c));Be(u,f=>{r(f.previousSibling,f)})}});const ZD=["fontWeight","fontStyle","color","fontSize","fontFamily"],Wv=e=>Pt(e.styles)&&zt(Dn(e.styles),n=>on(ZD,n)),hm=e=>jn(e,n=>$a(n)&&n.inline==="span"&&Wv(n)),hC=(e,n)=>{const o=e.get(n);return Zn(o)?hm(o):$.none()},US=(e,n)=>ai(n,Pe.fromRangeStart(e)).isNone(),jD=(e,n)=>Jc(n,Pe.fromRangeEnd(e)).exists(o=>!pr(o.getNode())||Jc(n,o).isSome())===!1,GD=e=>n=>nh(n)&&e.getContentEditableParent(n)!=="false",WS=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return US(o,n[0])&&jD(o,n[0])?n:[];{const r=Jn(n).filter(f=>US(o,f)).toArray(),c=Do(n).filter(f=>jD(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},DI=e=>be(WS(e),GD(e.dom)),Wu=e=>be(e.getSelectedBlocks(),GD(e.dom)),Zv=Ge.each,ZS=e=>_t(e)&&!mc(e)&&!ci(e)&&!Tu(e),jS=(e,n)=>{for(let o=e;o;o=o[n]){if(et(o)&&za(o.data))return e;if(_t(o)&&!mc(o))return o}return e},GS=(e,n,o)=>{const r=RS(e),c=_t(n)&&ff(n),u=_t(o)&&ff(o);if(c&&u){const f=jS(n,"previousSibling"),b=jS(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(b),Ge.each(Ge.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},Xh=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=GS(e,dv(r),r))!==null&&c!==void 0?c:r;GS(e,u,dv(u,!0))}},k_=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Zv(e.select(r,o),c=>{ZS(c)&&ff(c)&&Zv(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},E_=(e,n,o)=>{Zv(e.childNodes,r=>{ZS(r)&&(n(r)&&o(r),r.hasChildNodes()&&E_(r,n,o))})},qD=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},KD=(e,n)=>o=>!!(o&&Ay(e,o,n)),YD=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),qD(e,r)},T1=tu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),RI=/^(src|href|style)$/,k1=Ge.each,qS=_y,XD=e=>/^(TR|TH|TD)$/.test(e.nodeName),KS=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),JD=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(_t(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return et(r)&&o&&c>=r.data.length&&(r=new Wr(r,e.getBody()).next()||r),et(r)&&!o&&c===0&&(r=new Wr(r,e.getBody()).prev()||r),r},__=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return XD(e)&&r?e.nodeName==="TR"&&r[o]||r:e},YS=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},QD=(e,n,o,r,c)=>{const u=re.fromDom(n),f=re.fromDom(e.create(r,c)),b=o?od(u):Rm(u);return Pn(f,b),o?(ho(u,f),Oa(f,u)):(qs(u,f),Ar(f,u)),f.dom},MI=(e,n)=>n.links&&e.nodeName==="A",eR=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=si(e);wd(o)&&r===u.getRoot()&&(!o.list_block||!qS(n,o.list_block))&&Be(is(n.childNodes),b=>{hg(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=YS(u,b,f),u.setAttribs(c,Fp(e))):c=null}),!(dE(o)&&!qS(o.inline,n))&&u.remove(n,!0)},tR=(e,n,o)=>An(e)?{name:n,value:null}:{name:e,value:im(n,o)},nR=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},oR=(e,n,o,r,c)=>{let u=!1;k1(o.styles,(f,b)=>{const{name:y,value:x}=tR(b,f,r),R=pg(x,y);(o.remove_similar||te(x)||!_t(c)||qS(Ay(e,c,y),R))&&e.setStyle(n,y,""),u=!0}),u&&nR(e,n)},NI=(e,n,o)=>{n==="removeformat"?Be(Wu(e.selection),r=>{Be(ZD,c=>e.dom.setStyle(r,c,"")),nR(e.dom,r)}):hC(e.formatter,n).each(r=>{Be(Wu(e.selection),c=>oR(e.dom,c,r,o,null))})},sR=(e,n,o,r,c)=>{const u=e.dom,f=RS(e),b=e.schema;if($a(n)&&mb(b,n.inline)&&Zf(b,r)&&r.parentElement===e.getBody())return eR(e,r,n),T1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!mC(u,r,n)&&!MI(r,n))return T1.keep();const y=r,x=n.preserve_attributes;if($a(n)&&n.remove==="all"&&Zn(x)){const R=be(u.getAttribs(y),P=>on(x,P.name.toLowerCase()));if(u.removeAllAttribs(y),Be(R,P=>u.setAttrib(y,P.name,P.value)),R.length>0)return T1.rename("span")}if(n.remove!=="all"){oR(u,y,n,o,c),k1(n.attributes,(P,F)=>{const{name:Y,value:J}=tR(F,P,o);if(n.remove_similar||te(J)||!_t(c)||qS(u.getAttrib(c,Y),J)){if(Y==="class"){const q=u.getAttrib(y,Y);if(q){let ee="";if(Be(q.split(/\s+/),me=>{/mce\-\w+/.test(me)&&(ee+=(ee?" ":"")+me)}),ee){u.setAttrib(y,Y,ee);return}}}if(RI.test(Y)&&y.removeAttribute("data-mce-"+Y),Y==="style"&&jl(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(Y),u.setStyle(y,"list-style-type","none");return}Y==="class"&&y.removeAttribute("className"),y.removeAttribute(Y)}}),k1(n.classes,P=>{P=im(P,o),(!_t(c)||u.hasClass(c,P))&&u.removeClass(y,P)});const R=u.getAttribs(y);for(let P=0;P<R.length;P++){const F=R[P].nodeName;if(!f.isAttributeInternal(F))return T1.keep()}}return n.remove!=="none"?(eR(e,y,n),T1.removed()):T1.keep()},pC=(e,n,o,r,c)=>sR(e,n,o,r,c).fold(rn,u=>(e.dom.rename(r,u),!0),We),BI=(e,n,o,r,c)=>{let u;return n.parentNode&&Be(s1(e.dom,n.parentNode).reverse(),f=>{if(!u&&_t(f)&&f.id!=="_start"&&f.id!=="_end"){const b=gm(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},PI=(e,n,o,r)=>sR(e,n,o,r,r).fold(je(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),je(null)),$I=(e,n,o,r,c,u,f,b)=>{var y,x;let R,P;const F=e.dom;if(o){const Y=o.parentNode;for(let J=r.parentNode;J&&J!==Y;J=J.parentNode){let q=F.clone(J,!1);for(let ee=0;ee<n.length&&(q=PI(e,n[ee],b,q),q!==null);ee++);q&&(R&&q.appendChild(R),P||(P=q),R=q)}u&&(!f.mixed||!F.isBlock(o))&&(r=(y=F.split(o,r))!==null&&y!==void 0?y:r),R&&P&&((x=c.parentNode)===null||x===void 0||x.insertBefore(R,c),P.appendChild(c),$a(f)&&Xh(e,f,b,R))}return r},rR=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,x=q=>{const ee=BI(e,q,n,o,c);return $I(e,u,ee,q,q,!0,f,o)},R=q=>mc(q)&&_t(q)&&(q.id==="_start"||q.id==="_end"),P=q=>zt(u,ee=>pC(e,ee,o,q,q)),F=q=>{const ee=is(q.childNodes),de=P(q)||zt(u,Ue=>mC(b,q,Ue)),ye=q.parentNode;if(!de&&ge(ye)&&$h(f)&&P(ye),f.deep&&ee.length)for(let Ue=0;Ue<ee.length;Ue++)F(ee[Ue]);Be(["underline","line-through","overline"],Ue=>{_t(q)&&e.dom.getStyle(q,"text-decoration")===Ue&&q.parentNode&&zw(b,q.parentNode)===Ue&&pC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ue}},void 0,q)})},Y=q=>{const ee=b.get(q?"_start":"_end");if(ee){let me=ee[q?"firstChild":"lastChild"];return R(me)&&(me=me[q?"firstChild":"lastChild"]),et(me)&&me.data.length===0&&(me=q?ee.previousSibling||ee.nextSibling:ee.nextSibling||ee.previousSibling),b.remove(ee,!0),me}else return null},J=q=>{let ee,me,de=gf(b,q,u,q.collapsed);if(f.split){if(de=g1(de),ee=JD(e,de,!0),me=JD(e,de),ee!==me){if(ee=__(ee,!0),me=__(me,!1),KS(b,ee,me)){const xe=$.from(ee.firstChild).getOr(ee);x(QD(b,xe,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Y(!0);return}if(KS(b,me,ee)){const xe=$.from(me.lastChild).getOr(me);x(QD(b,xe,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Y(!1);return}ee=YS(b,ee,"span",{id:"_start","data-mce-type":"bookmark"}),me=YS(b,me,"span",{id:"_end","data-mce-type":"bookmark"});const ye=b.createRng();ye.setStartAfter(ee),ye.setEndBefore(me),c1(b,ye,xe=>{Be(xe,Ue=>{!mc(Ue)&&!mc(Ue.parentNode)&&x(Ue)})}),x(ee),x(me),ee=Y(!0),me=Y()}else ee=me=x(ee);de.startContainer=ee.parentNode?ee.parentNode:ee,de.startOffset=b.nodeIndex(ee),de.endContainer=me.parentNode?me.parentNode:me,de.endOffset=b.nodeIndex(me)+1}c1(b,de,ye=>{Be(ye,F)})};if(r){if(mf(r)){const q=b.createRng();q.setStartBefore(r),q.setEndAfter(r),J(q)}else J(r);Kw(e,n,r,o);return}!y.isCollapsed()||!$a(f)||uf(e).length?(iv(e,()=>Cd(e,J),q=>$a(f)&&v_(e,n,o,q)),e.nodeChanged()):T_(e,n,o,c),NI(e,n,o),Kw(e,n,r,o)},A_=Ge.each,II=(e,n,o,r)=>{const c=u=>{if(_t(u)&&_t(u.parentNode)&&ff(u)){const f=zw(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ge.walk(r,c,"childNodes"),c(r))},jv=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=KD(e,"fontSize");E_(r,u=>c(u)&&ff(u),YD(e,"backgroundColor",im(n.styles.backgroundColor,o)))}},LI=(e,n,o,r)=>{if($a(n)&&(n.inline==="sub"||n.inline==="sup")){const c=KD(e,"fontSize");E_(r,f=>c(f)&&ff(f),YD(e,"fontSize",""));const u=be(e.select(n.inline==="sup"?"sub":"sup",r),ff);e.remove(u,!0)}},FI=(e,n,o,r)=>{A_(n,c=>{$a(c)&&A_(e.dom.select(c.inline,r),u=>{ZS(u)&&pC(e,c,o,u,c.exact?u:null)}),k_(e.dom,c,r)})},HI=(e,n,o,r,c)=>{const u=c.parentNode;gm(e,u,o,r)&&pC(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>gm(e,f,o,r)?(pC(e,n,r,c),!0):!1)},XS=Ge.each,aR=(e,n,o,r)=>{if(zp(e)&&$a(n)&&o.parentNode){const c=M2(e.schema),u=LD(re.fromDom(o),f=>ci(f.dom));return fr(c,r)&&jr(re.fromDom(o.parentNode),!1)&&!u}else return!1},cR=(e,n,o,r)=>{if(XS(o.styles,(c,u)=>{e.setStyle(n,u,im(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},lR=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,x=(J,q=u)=>{X(q.onformat)&&q.onformat(J,q,o,r),cR(b,J,q,o),XS(q.attributes,(ee,me)=>{b.setAttrib(J,me,im(ee,o))}),XS(q.classes,ee=>{const me=im(ee,o);b.hasClass(J,me)||b.addClass(J,me)})},R=(J,q)=>{let ee=!1;return XS(J,me=>Ti(me)?b.getContentEditable(q)==="false"&&!me.ceFalseOverride||ge(me.collapsed)&&me.collapsed!==f?!0:b.is(q,me.selector)&&!ci(q)?(x(q,me),ee=!0,!1):!0:!1),ee},P=J=>{if(oe(J)){const q=b.create(J);return x(q),q}else return null},F=(J,q,ee)=>{const me=[];let de=!0;const ye=u.inline||u.block,xe=P(ye),Ue=Oe=>Ph(u)&&gm(e,Oe,n,o),mt=(Oe,Se,St)=>{const en=uE(u)&&gg(e.schema,Oe)&&hg(e,Se,ye);return St&&en},lt=(Oe,Se,St,en)=>{const sn=Oe.nodeName.toLowerCase(),Yn=hg(e,ye,sn)&&hg(e,Se,ye),_o=!ee&&et(Oe)&&Kl(Oe.data),ls=ci(Oe),rs=!$a(u)||!J.isBlock(Oe);return(St||en)&&Yn&&!_o&&!ls&&rs};c1(J,q,Oe=>{let Se;const St=en=>{let sn=!1,Yn=de,_o=!1;const ls=en.parentNode,rs=ls.nodeName.toLowerCase(),la=J.getContentEditable(en);ge(la)&&(Yn=de,de=la==="true",sn=!0,_o=Vw(e,en));const el=de&&!sn;if(pr(en)&&!aR(e,u,en,rs)){Se=null,wd(u)&&J.remove(en);return}if(Ue(en)){Se=null;return}if(mt(en,rs,el)){const rt=J.rename(en,ye);x(rt),me.push(rt),Se=null;return}if(Ti(u)){let rt=R(c,en);if(!rt&&ge(ls)&&$h(u)&&(rt=R(c,ls)),!$a(u)||rt){Se=null;return}}ge(xe)&&lt(en,rs,el,_o)?(Se||(Se=J.clone(xe,!1),ls.insertBefore(Se,en),me.push(Se)),_o&&sn&&(de=Yn),Se.appendChild(en)):(Se=null,Be(is(en.childNodes),St),sn&&(de=Yn),Se=null)};Be(Oe,St)}),u.links===!0&&Be(me,Oe=>{const Se=St=>{St.nodeName==="A"&&x(St,u),Be(is(St.childNodes),Se)};Se(Oe)}),Be(me,Oe=>{const Se=sn=>{let Yn=0;return Be(sn.childNodes,_o=>{!mv(_o)&&!mc(_o)&&Yn++}),Yn},St=sn=>jn(sn.childNodes,Ey).filter(_o=>J.getContentEditable(_o)!=="false"&&mC(J,_o,u)).map(_o=>{const ls=J.clone(_o,!1);return x(ls),J.replace(ls,sn,!0),J.remove(_o,!0),ls}).getOr(sn),en=Se(Oe);if((me.length>1||!J.isBlock(Oe))&&en===0){J.remove(Oe,!0);return}($a(u)||wd(u)&&u.wrapper)&&(!u.exact&&en===1&&(Oe=St(Oe)),FI(e,c,o,Oe),HI(e,u,n,o,Oe),jv(J,u,o,Oe),II(J,u,o,Oe),LI(J,u,o,Oe),Xh(e,u,o,Oe))})},Y=mf(r)?r:y.getNode();if(b.getContentEditable(Y)==="false"&&!Vw(e,Y)){r=Y,R(c,r),vv(e,n,r,o);return}if(u){if(r)if(mf(r)){if(!R(c,r)){const J=b.createRng();J.setStartBefore(r),J.setEndAfter(r),F(b,gf(b,J,c),!0)}}else F(b,r,!0);else!f||!$a(u)||uf(e).length?(y.setRng(iC(y.getRng())),iv(e,()=>{Cd(e,(J,q)=>{const ee=q?J:gf(b,J,c);F(b,ee,!1)})},We),e.nodeChanged()):x_(e,n,o),hC(e.formatter,n).each(J=>{Be(DI(e.selection),q=>cR(b,q,J,o))});x1(n,e)}vv(e,n,r,o)},iR=e=>hn(e,"vars"),VI=(e,n)=>{e.set({}),n.on("NodeChange",o=>{fR(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=$.from(o.node).map(c=>mf(c)?c:c.startContainer).bind(c=>_t(c)?$.some(c):$.from(c.parentElement)).getOrThunk(()=>uR(n));fR(n,r,e.get())})},uR=e=>e.selection.getStart(),dR=(e,n,o,r,c)=>qo(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!jo(y)},b=>b_(e,b,o)?!0:r?!1:ge(e.formatter.matchNode(b,o,c,!0))),mR=(e,n)=>{const o=n??uR(e);return be(s1(e.dom,o),r=>_t(r)&&!Tu(r))},fR=(e,n,o)=>{const r=mR(e,n);lo(o,(c,u)=>{const f=b=>{const y=dR(e,r,u,b.similar,iR(b)?b.vars:void 0),x=y.isSome();if(b.state.get()!==x){b.state.set(x);const R=y.getOr(n);iR(b)?b.callback(x,{node:R,format:u,parents:r}):Be(b.callbacks,P=>P(x,{node:R,format:u,parents:r}))}};Be([c.withSimilar,c.withoutSimilar],f),Be(c.withVars,f)})},zI=(e,n,o,r,c,u)=>{const f=n.get();Be(o.split(","),b=>{const y=No(f,b).getOrThunk(()=>{const R={withSimilar:{state:Ga(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ga(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=R,R}),x=()=>{const R=mR(e);return dR(e,R,b,c,u).isSome()};if(jo(u)){const R=c?y.withSimilar:y.withoutSimilar;R.callbacks.push(r),R.callbacks.length===1&&R.state.set(x())}else y.withVars.push({state:Ga(x()),similar:c,vars:u,callback:r})}),n.set(f)},UI=(e,n,o)=>{const r=e.get();Be(n.split(","),c=>No(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:be(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:be(u.withoutSimilar.callbacks,f=>f!==o)},withVars:be(u.withVars,f=>f.callback!==o)}})),e.set(r)},O_=(e,n,o,r,c,u)=>(zI(e,n,o,r,c,u),{unbind:()=>UI(n,o,r)}),gR=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(v_(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?rR(e,n,o,r):lR(e,n,o,r))};function Gv(e){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gv(e)}function E1(e,n){return E1=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},E1(e,n)}function hR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jh(e,n,o){return hR()?Jh=Reflect.construct:Jh=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),x=new y;return f&&E1(x,f.prototype),x},Jh.apply(null,arguments)}function Ai(e){return pR(e)||F9(e)||WI(e)||ZI()}function pR(e){if(Array.isArray(e))return bR(e)}function F9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WI(e,n){if(e){if(typeof e=="string")return bR(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return bR(e,n)}}function bR(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function ZI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jI=Object.hasOwnProperty,GI=Object.setPrototypeOf,qI=Object.isFrozen,vR=Object.getPrototypeOf,KI=Object.getOwnPropertyDescriptor,li=Object.freeze,Sf=Object.seal,JS=Object.create,D_=typeof Reflect<"u"&&Reflect,Kr=D_.apply,yR=D_.construct;Kr||(Kr=function(n,o,r){return n.apply(o,r)}),li||(li=function(n){return n}),Sf||(Sf=function(n){return n}),yR||(yR=function(n,o){return Jh(n,Ai(o))});var H9=ii(Array.prototype.forEach),V9=ii(Array.prototype.pop),QS=ii(Array.prototype.push),Oi=ii(String.prototype.toLowerCase),ex=ii(String.prototype.match),Ed=ii(String.prototype.replace),bC=ii(String.prototype.indexOf),YI=ii(String.prototype.trim),Di=ii(RegExp.prototype.test),_1=qv(TypeError);function ii(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return Kr(e,n,r)}}function qv(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return yR(e,o)}}function _s(e,n){GI&&GI(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=Oi(r);c!==r&&(qI(n)||(n[o]=c),r=c)}e[r]=!0}return e}function Eg(e){var n=JS(null),o;for(o in e)Kr(jI,e,[o])&&(n[o]=e[o]);return n}function vC(e,n){for(;e!==null;){var o=KI(e,n);if(o){if(o.get)return ii(o.get);if(typeof o.value=="function")return ii(o.value)}e=vR(e)}function r(c){return console.warn("fallback value for",c),null}return r}var R_=li(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M_=li(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N_=li(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),CR=li(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),B_=li(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),XI=li(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),wR=li(["#text"]),SR=li(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),P_=li(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$_=li(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),tx=li(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yC=Sf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xR=Sf(/<%[\w\W]*|[\w\W]*%>/gm),JI=Sf(/^data-[\-\w.\u00B7-\uFFFF]/),TR=Sf(/^aria-[\-\w]+$/),QI=Sf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kR=Sf(/^(?:\w+script|data):/i),eL=Sf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tL=Sf(/^html$/i),ER=function(){return typeof window>"u"?null:window},_R=function(n,o){if(Gv(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function I_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ER(),n=function(Me){return I_(Me)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,x=e.NamedNodeMap,R=x===void 0?e.NamedNodeMap||e.MozNamedAttrMap:x,P=e.HTMLFormElement,F=e.DOMParser,Y=e.trustedTypes,J=b.prototype,q=vC(J,"cloneNode"),ee=vC(J,"nextSibling"),me=vC(J,"childNodes"),de=vC(J,"parentNode");if(typeof u=="function"){var ye=r.createElement("template");ye.content&&ye.content.ownerDocument&&(r=ye.content.ownerDocument)}var xe=_R(Y,o),Ue=xe?xe.createHTML(""):"",mt=r,lt=mt.implementation,Oe=mt.createNodeIterator,Se=mt.createDocumentFragment,St=mt.getElementsByTagName,en=o.importNode,sn={};try{sn=Eg(r).documentMode?r.documentMode:{}}catch{}var Yn={};n.isSupported=typeof de=="function"&&lt&&typeof lt.createHTMLDocument<"u"&&sn!==9;var _o=yC,ls=xR,rs=JI,la=TR,el=kR,rt=eL,Xn=QI,ln=null,Ys=_s({},[].concat(Ai(R_),Ai(M_),Ai(N_),Ai(B_),Ai(wR))),wt=null,kn=_s({},[].concat(Ai(SR),Ai(P_),Ai($_),Ai(tx))),bn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pt=null,xo=null,vo=!0,La=!0,Us=!1,Mn=!1,Wo=!1,Xr=!1,Bs=!1,kr=!1,Vr=!1,cr=!1,ia=!0,uu=!0,Uc=!1,wm={},du=null,Y1=_s({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),X1=null,Sm=_s({},["audio","video","img","source","image","track"]),Md=null,Er=_s({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Yu="http://www.w3.org/1998/Math/MathML",xm="http://www.w3.org/2000/svg",Xu="http://www.w3.org/1999/xhtml",Ju=Xu,Tm=!1,bc,km=["application/xhtml+xml","text/html"],Df="text/html",Qu,Ig=null,LT=r.createElement("form"),d2=function(Me){return Me instanceof RegExp||Me instanceof Function},m2=function(Me){Ig&&Ig===Me||((!Me||Gv(Me)!=="object")&&(Me={}),Me=Eg(Me),ln="ALLOWED_TAGS"in Me?_s({},Me.ALLOWED_TAGS):Ys,wt="ALLOWED_ATTR"in Me?_s({},Me.ALLOWED_ATTR):kn,Md="ADD_URI_SAFE_ATTR"in Me?_s(Eg(Er),Me.ADD_URI_SAFE_ATTR):Er,X1="ADD_DATA_URI_TAGS"in Me?_s(Eg(Sm),Me.ADD_DATA_URI_TAGS):Sm,du="FORBID_CONTENTS"in Me?_s({},Me.FORBID_CONTENTS):Y1,pt="FORBID_TAGS"in Me?_s({},Me.FORBID_TAGS):{},xo="FORBID_ATTR"in Me?_s({},Me.FORBID_ATTR):{},wm="USE_PROFILES"in Me?Me.USE_PROFILES:!1,vo=Me.ALLOW_ARIA_ATTR!==!1,La=Me.ALLOW_DATA_ATTR!==!1,Us=Me.ALLOW_UNKNOWN_PROTOCOLS||!1,Mn=Me.SAFE_FOR_TEMPLATES||!1,Wo=Me.WHOLE_DOCUMENT||!1,kr=Me.RETURN_DOM||!1,Vr=Me.RETURN_DOM_FRAGMENT||!1,cr=Me.RETURN_TRUSTED_TYPE||!1,Bs=Me.FORCE_BODY||!1,ia=Me.SANITIZE_DOM!==!1,uu=Me.KEEP_CONTENT!==!1,Uc=Me.IN_PLACE||!1,Xn=Me.ALLOWED_URI_REGEXP||Xn,Ju=Me.NAMESPACE||Xu,Me.CUSTOM_ELEMENT_HANDLING&&d2(Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bn.tagNameCheck=Me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&d2(Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bn.attributeNameCheck=Me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Me.CUSTOM_ELEMENT_HANDLING&&typeof Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(bn.allowCustomizedBuiltInElements=Me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bc=km.indexOf(Me.PARSER_MEDIA_TYPE)===-1?bc=Df:bc=Me.PARSER_MEDIA_TYPE,Qu=bc==="application/xhtml+xml"?function(It){return It}:Oi,Mn&&(La=!1),Vr&&(kr=!0),wm&&(ln=_s({},Ai(wR)),wt=[],wm.html===!0&&(_s(ln,R_),_s(wt,SR)),wm.svg===!0&&(_s(ln,M_),_s(wt,P_),_s(wt,tx)),wm.svgFilters===!0&&(_s(ln,N_),_s(wt,P_),_s(wt,tx)),wm.mathMl===!0&&(_s(ln,B_),_s(wt,$_),_s(wt,tx))),Me.ADD_TAGS&&(ln===Ys&&(ln=Eg(ln)),_s(ln,Me.ADD_TAGS)),Me.ADD_ATTR&&(wt===kn&&(wt=Eg(wt)),_s(wt,Me.ADD_ATTR)),Me.ADD_URI_SAFE_ATTR&&_s(Md,Me.ADD_URI_SAFE_ATTR),Me.FORBID_CONTENTS&&(du===Y1&&(du=Eg(du)),_s(du,Me.FORBID_CONTENTS)),uu&&(ln["#text"]=!0),Wo&&_s(ln,["html","head","body"]),ln.table&&(_s(ln,["tbody"]),delete pt.tbody),li&&li(Me),Ig=Me)},FT=_s({},["mi","mo","mn","ms","mtext"]),HT=_s({},["foreignobject","desc","title","annotation-xml"]),Lg=_s({},["title","style","font","a","script"]),mp=_s({},M_);_s(mp,N_),_s(mp,CR);var Te=_s({},B_);_s(Te,XI);var _e=function(Me){var It=de(Me);(!It||!It.tagName)&&(It={namespaceURI:Xu,tagName:"template"});var Nn=Oi(Me.tagName),gs=Oi(It.tagName);return Me.namespaceURI===xm?It.namespaceURI===Xu?Nn==="svg":It.namespaceURI===Yu?Nn==="svg"&&(gs==="annotation-xml"||FT[gs]):!!mp[Nn]:Me.namespaceURI===Yu?It.namespaceURI===Xu?Nn==="math":It.namespaceURI===xm?Nn==="math"&&HT[gs]:!!Te[Nn]:Me.namespaceURI===Xu?It.namespaceURI===xm&&!HT[gs]||It.namespaceURI===Yu&&!FT[gs]?!1:!Te[Nn]&&(Lg[Nn]||!mp[Nn]):!1},st=function(Me){QS(n.removed,{element:Me});try{Me.parentNode.removeChild(Me)}catch{try{Me.outerHTML=Ue}catch{Me.remove()}}},Ke=function(Me,It){try{QS(n.removed,{attribute:It.getAttributeNode(Me),from:It})}catch{QS(n.removed,{attribute:null,from:It})}if(It.removeAttribute(Me),Me==="is"&&!wt[Me])if(kr||Vr)try{st(It)}catch{}else try{It.setAttribute(Me,"")}catch{}},Jt=function(Me){var It,Nn;if(Bs)Me="<remove></remove>"+Me;else{var gs=ex(Me,/^[\r\n\t ]+/);Nn=gs&&gs[0]}bc==="application/xhtml+xml"&&(Me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Me+"</body></html>");var Qa=xe?xe.createHTML(Me):Me;if(Ju===Xu)try{It=new F().parseFromString(Qa,bc)}catch{}if(!It||!It.documentElement){It=lt.createDocument(Ju,"template",null);try{It.documentElement.innerHTML=Tm?"":Qa}catch{}}var di=It.body||It.documentElement;return Me&&Nn&&di.insertBefore(r.createTextNode(Nn),di.childNodes[0]||null),Ju===Xu?St.call(It,Wo?"html":"body")[0]:Wo?It.documentElement:di},$o=function(Me){return Oe.call(Me.ownerDocument||Me,Me,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},Qs=function(Me){return Me instanceof P&&(typeof Me.nodeName!="string"||typeof Me.textContent!="string"||typeof Me.removeChild!="function"||!(Me.attributes instanceof R)||typeof Me.removeAttribute!="function"||typeof Me.setAttribute!="function"||typeof Me.namespaceURI!="string"||typeof Me.insertBefore!="function")},Cs=function(Me){return Gv(f)==="object"?Me instanceof f:Me&&Gv(Me)==="object"&&typeof Me.nodeType=="number"&&typeof Me.nodeName=="string"},mu=function(Me,It,Nn){Yn[Me]&&H9(Yn[Me],function(gs){gs.call(n,It,Nn,Ig)})},f2=function(Me){var It;if(mu("beforeSanitizeElements",Me,null),Qs(Me)||Di(/[\u0080-\uFFFF]/,Me.nodeName))return st(Me),!0;var Nn=Qu(Me.nodeName);if(mu("uponSanitizeElement",Me,{tagName:Nn,allowedTags:ln}),Me.hasChildNodes()&&!Cs(Me.firstElementChild)&&(!Cs(Me.content)||!Cs(Me.content.firstElementChild))&&Di(/<[/\w]/g,Me.innerHTML)&&Di(/<[/\w]/g,Me.textContent)||Nn==="select"&&Di(/<template/i,Me.innerHTML))return st(Me),!0;if(!ln[Nn]||pt[Nn]){if(!pt[Nn]&&VT(Nn)&&(bn.tagNameCheck instanceof RegExp&&Di(bn.tagNameCheck,Nn)||bn.tagNameCheck instanceof Function&&bn.tagNameCheck(Nn)))return!1;if(uu&&!du[Nn]){var gs=de(Me)||Me.parentNode,Qa=me(Me)||Me.childNodes;if(Qa&&gs)for(var di=Qa.length,yl=di-1;yl>=0;--yl)gs.insertBefore(q(Qa[yl],!0),ee(Me))}return st(Me),!0}return Me instanceof b&&!_e(Me)||(Nn==="noscript"||Nn==="noembed")&&Di(/<\/no(script|embed)/i,Me.innerHTML)?(st(Me),!0):(Mn&&Me.nodeType===3&&(It=Me.textContent,It=Ed(It,_o," "),It=Ed(It,ls," "),Me.textContent!==It&&(QS(n.removed,{element:Me.cloneNode()}),Me.textContent=It)),mu("afterSanitizeElements",Me,null),!1)},W$=function(Me,It,Nn){if(ia&&(It==="id"||It==="name")&&(Nn in r||Nn in LT))return!1;if(!(La&&!xo[It]&&Di(rs,It))){if(!(vo&&Di(la,It))){if(!wt[It]||xo[It]){if(!(VT(Me)&&(bn.tagNameCheck instanceof RegExp&&Di(bn.tagNameCheck,Me)||bn.tagNameCheck instanceof Function&&bn.tagNameCheck(Me))&&(bn.attributeNameCheck instanceof RegExp&&Di(bn.attributeNameCheck,It)||bn.attributeNameCheck instanceof Function&&bn.attributeNameCheck(It))||It==="is"&&bn.allowCustomizedBuiltInElements&&(bn.tagNameCheck instanceof RegExp&&Di(bn.tagNameCheck,Nn)||bn.tagNameCheck instanceof Function&&bn.tagNameCheck(Nn))))return!1}else if(!Md[It]){if(!Di(Xn,Ed(Nn,rt,""))){if(!((It==="src"||It==="xlink:href"||It==="href")&&Me!=="script"&&bC(Nn,"data:")===0&&X1[Me])){if(!(Us&&!Di(el,Ed(Nn,rt,"")))){if(Nn)return!1}}}}}}return!0},VT=function(Me){return Me.indexOf("-")>0},Z$=function(Me){var It,Nn,gs,Qa;mu("beforeSanitizeAttributes",Me,null);var di=Me.attributes;if(di){var yl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:wt};for(Qa=di.length;Qa--;){It=di[Qa];var J1=It,tl=J1.name,j$=J1.namespaceURI;Nn=tl==="value"?It.value:YI(It.value),gs=Qu(tl);var h9=Nn;if(yl.attrName=gs,yl.attrValue=Nn,yl.keepAttr=!0,yl.forceKeepAttr=void 0,mu("uponSanitizeAttribute",Me,yl),Nn=yl.attrValue,!yl.forceKeepAttr){if(!yl.keepAttr){Ke(tl,Me);continue}if(Di(/\/>/i,Nn)){Ke(tl,Me);continue}Mn&&(Nn=Ed(Nn,_o," "),Nn=Ed(Nn,ls," "));var g2=Qu(Me.nodeName);if(!W$(g2,gs,Nn)){Ke(tl,Me);continue}if(Nn!==h9)try{j$?Me.setAttributeNS(j$,tl,Nn):Me.setAttribute(tl,Nn)}catch{Ke(tl,Me)}}}mu("afterSanitizeAttributes",Me,null)}},g9=function so(Me){var It,Nn=$o(Me);for(mu("beforeSanitizeShadowDOM",Me,null);It=Nn.nextNode();)mu("uponSanitizeShadowNode",It,null),!f2(It)&&(It.content instanceof c&&so(It.content),Z$(It));mu("afterSanitizeShadowDOM",Me,null)};return n.sanitize=function(so,Me){var It,Nn,gs,Qa,di;if(Tm=!so,Tm&&(so="<!-->"),typeof so!="string"&&!Cs(so)){if(typeof so.toString!="function")throw _1("toString is not a function");if(so=so.toString(),typeof so!="string")throw _1("dirty is not a string, aborting")}if(!n.isSupported){if(Gv(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof so=="string")return e.toStaticHTML(so);if(Cs(so))return e.toStaticHTML(so.outerHTML)}return so}if(Xr||m2(Me),n.removed=[],typeof so=="string"&&(Uc=!1),Uc){if(so.nodeName){var yl=Qu(so.nodeName);if(!ln[yl]||pt[yl])throw _1("root node is forbidden and cannot be sanitized in-place")}}else if(so instanceof f)It=Jt("<!---->"),Nn=It.ownerDocument.importNode(so,!0),Nn.nodeType===1&&Nn.nodeName==="BODY"||Nn.nodeName==="HTML"?It=Nn:It.appendChild(Nn);else{if(!kr&&!Mn&&!Wo&&so.indexOf("<")===-1)return xe&&cr?xe.createHTML(so):so;if(It=Jt(so),!It)return kr?null:cr?Ue:""}It&&Bs&&st(It.firstChild);for(var J1=$o(Uc?so:It);gs=J1.nextNode();)gs.nodeType===3&&gs===Qa||f2(gs)||(gs.content instanceof c&&g9(gs.content),Z$(gs),Qa=gs);if(Qa=null,Uc)return so;if(kr){if(Vr)for(di=Se.call(It.ownerDocument);It.firstChild;)di.appendChild(It.firstChild);else di=It;return wt.shadowroot&&(di=en.call(o,di,!0)),di}var tl=Wo?It.outerHTML:It.innerHTML;return Wo&&ln["!doctype"]&&It.ownerDocument&&It.ownerDocument.doctype&&It.ownerDocument.doctype.name&&Di(tL,It.ownerDocument.doctype.name)&&(tl="<!DOCTYPE "+It.ownerDocument.doctype.name+`>
`+tl),Mn&&(tl=Ed(tl,_o," "),tl=Ed(tl,ls," ")),xe&&cr?xe.createHTML(tl):tl},n.setConfig=function(so){m2(so),Xr=!0},n.clearConfig=function(){Ig=null,Xr=!1},n.isValidAttribute=function(so,Me,It){Ig||m2({});var Nn=Qu(so),gs=Qu(Me);return W$(Nn,gs,It)},n.addHook=function(so,Me){typeof Me=="function"&&(Yn[so]=Yn[so]||[],QS(Yn[so],Me))},n.removeHook=function(so){if(Yn[so])return V9(Yn[so])},n.removeHooks=function(so){Yn[so]&&(Yn[so]=[])},n.removeAllHooks=function(){Yn={}},n}var AR=I_();const L_=Ge.explode,OR=()=>{const e={};return{addFilter:(c,u)=>{Be(L_(c),f=>{hn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>us(e),removeFilter:(c,u)=>{Be(L_(c),f=>{if(hn(e,f))if(ge(u)){const b=e[f],y=be(b.callbacks,x=>x!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},nL=(e,n)=>{Be(n,o=>{e.attr(o,null)})},oL=(e,n,o)=>{e.addNodeFilter("font",r=>{Be(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&_r(y).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),nL(c,["color","face","size"])})})},sL=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";Be(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},F_=(e,n,o)=>{var r;const c=yb();n.convert_fonts_to_spans&&oL(e,c,Ge.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),sL(e,o,c)},CC=(e,n,o)=>{n.inline_styles&&F_(e,n,o)},DR=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),RR=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Kv=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?RR(r):decodeURIComponent(r);return $.some({type:c[1],data:f,base64Encoded:u})}else return $.none()},MR=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return $.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return $.some(new Blob([c],{type:e}))},rL=e=>new Promise((n,o)=>{Kv(e).bind(({type:r,data:c,base64Encoded:u})=>MR(r,c,u)).fold(()=>o("Invalid data URI"),n)}),Qh=e=>nr(e,"blob:")?DR(e):nr(e,"data:")?rL(e):Promise.reject("Unknown URI format"),nx=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let NR=0;const wC=e=>(e||"blobid")+NR++,H_=(e,n,o)=>Kv(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return $.none();{const f=u?r:btoa(r);return o(f,c)}}),V_=(e,n,o)=>{const r=e.create(wC(),n,o);return e.add(r),r},z_=(e,n,o=!1)=>H_(n,o,(r,c)=>$.from(e.getByData(r,c)).orThunk(()=>MR(c,r).map(u=>V_(e,u,r)))),BR=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(nr(n,"blob:")){const r=e.getByUri(n);return ge(r)?Promise.resolve(r):Qh(n).then(c=>nx(c).then(u=>H_(u,!1,f=>$.some(V_(e,c,f))).getOrThunk(o)))}else return nr(n,"data:")?z_(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},aL=e=>ge(e.attr("data-mce-bogus")),cL=e=>e.attr("src")===Ao.transparentSrc||ge(e.attr("data-mce-placeholder")),lL=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");cL(c)||aL(c)||At(u)||z_(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>Be(c,r))}},U_=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=Ge.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();b.body=1;const R=P=>P.name in b&&T2(o,P);for(let P=0,F=c.length;P<F;P++){let Y=c[P],J=Y.parent;if(J&&b[J.name]&&Y===J.lastChild){let q=Y.prev;for(;q;){const ee=q.name;if(ee!=="span"||q.attr("data-mce-type")!=="bookmark"){ee==="br"&&(Y=null);break}q=q.prev}if(Y&&(Y.remove(),$v(o,y,x,J))){const ee=o.getElementRule(J.name);ee&&(ee.removeEmpty?J.remove():ee.paddEmpty&&MS(f,R,J))}}else{let q=Y;for(;J&&J.firstChild===q&&J.lastChild===q&&(q=J,!b[J.name]);)J=J.parent;if(q===J){const ee=new Il("#text",3);ee.value=$r,Y.replace(ee)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(R=>R.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const x=y?Ge.trim(y):"";return/\b(noopener)\b/g.test(x)?x:f(x)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,x;for(;u--;)if(x=c[u],x.name==="a"&&x.firstChild&&!x.attr("href"))for(y=x.parent,f=x.lastChild;f&&y;)b=f.prev,y.insert(f,x),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new Il("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",x=Ge.explode(y," ");let R="";for(let P=0;P<x.length;P++){const F=x[P];let Y=!1,J=r["*"];J&&J[F]&&(Y=!0),J=r[b.name],!Y&&J&&J[F]&&(Y=!0),Y&&(R&&(R+=" "),R+=F)}R.length||(R=null),b.attr("class",R)}}),lL(e,n)},PR=Ge.each,iL=Ge.trim,uL=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],dL={ftp:21,http:80,https:443,mailto:25},mL=["img","video"],A1=(e,n)=>ge(e)?!e:ge(n)?!on(mL,n):!0,$R=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},IR=(e,n,o)=>{const r=$R(n);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?A1(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class _d{constructor(n,o={}){this.path="",this.directory="",n=iL(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new _d(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&PR(uL,(b,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Na.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!IR(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new _d(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new _d(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?dL[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];PR(u,P=>{P&&b.push(P)});const y=[];for(let P=f.length-1;P>=0;P--)if(!(f[P].length===0||f[P]===".")){if(f[P]===".."){r++;continue}if(r>0){r--;continue}y.push(f[P])}const x=b.length-r;let R;return x<=0?R=er(y).join("/"):R=b.slice(0,x).join("/")+"/"+er(y).join("/"),R.indexOf("/")!==0&&(R="/"+R),c&&R.lastIndexOf("/")!==R.length-1&&(R+=c),R}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const LR=Ge.makeMap,W_=Ge.extend,SC={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},Z_=Ge.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),j_="data-mce-type",FR=(e,n)=>{const o={...SC};return o.PARSER_MEDIA_TYPE=n,e.allow_script_urls?o.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(o.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),o},fL=(e,n)=>{const o=AR(),r=n.getSpecialElements(),c=e.validate;let u=0;return o.addHook("uponSanitizeElement",(f,b)=>{var y,x,R;f.nodeType===gi&&!e.allow_conditional_comments&&/^\[if/i.test((y=f.nodeValue)!==null&&y!==void 0?y:"")&&(f.nodeValue=" "+f.nodeValue);const P=b.tagName;if(f.nodeType!==rr||P==="body")return;const F=re.fromDom(f),Y=P.toLowerCase(),J=hi(F,j_),q=hr(F,"data-mce-bogus");if(!J&&oe(q)){q==="all"?Uo(F):Za(F);return}const ee=n.getElementRule(Y);if(c&&!ee){hn(r,Y)?Uo(F):Za(F);return}else b.allowedTags[P]=!0;if(c&&ee&&!J){if(Be((x=ee.attributesForced)!==null&&x!==void 0?x:[],me=>{wr(F,me.name,me.value==="{$uid}"?`mce_${u++}`:me.value)}),Be((R=ee.attributesDefault)!==null&&R!==void 0?R:[],me=>{hi(F,me.name)||wr(F,me.name,me.value==="{$uid}"?`mce_${u++}`:me.value)}),ee.attributesRequired&&!zt(ee.attributesRequired,me=>hi(F,me))){Za(F);return}if(ee.removeEmptyAttrs&&zi(F)){Za(F);return}ee.outputName&&ee.outputName!==Y&&U2(F,ee.outputName)}}),o.addHook("uponSanitizeAttribute",(f,b)=>{const y=f.tagName.toLowerCase(),{attrName:x,attrValue:R}=b;b.keepAttr=!c||n.isValid(y,x)||nr(x,"data-")||nr(x,"aria-"),x in Z_&&IR(e,R,y)&&(b.keepAttr=!1),b.keepAttr?(b.allowedAttributes[x]=!0,x in n.getBoolAttrs()&&(b.attrValue=x),e.allow_svg_data_urls&&nr(R,"data:image/svg+xml")&&(b.forceKeepAttr=!0)):f.hasAttribute(j_)&&(x==="id"||x==="class"||x==="style")&&(b.forceKeepAttr=!0)}),o},ox=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],x=new Il(y.nodeName.toLowerCase(),y.nodeType);if(_t(y)){const R=y.attributes;for(let P=0,F=R.length;P<F;P++){const Y=R[P];x.attr(Y.name,Y.value)}}else et(y)?(x.value=y.data,c&&(x.raw=!0)):(Gl(y)||ab(y)||cb(y))&&(x.value=y.data);ox(x,y,o),e.append(x)}},G_=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;Be(n,b=>b(f)),At(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];Be(o,f=>f(u))}},q_=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=W_(LR("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=M2(n),x=/[ \t\r\n]+/g,R=/^[ \t\r\n]+/,P=/[ \t\r\n]+$/,F=de=>{let ye=de.parent;for(;ge(ye);){if(ye.name in f)return!0;ye=ye.parent}return!1},Y=de=>{let ye=de;for(;ge(ye);){if(ye.name in y)return $v(n,u,f,ye);ye=ye.parent}return!1},J=de=>de.name in b&&!T2(n,de),q=(de,ye)=>{const xe=ye?de.prev:de.next;return ge(xe)||At(de.parent)?!1:J(de.parent)&&(de.parent!==e||r.isRootContent===!0)};return[de=>{var ye;if(de.type===3&&!F(de)){let xe=(ye=de.value)!==null&&ye!==void 0?ye:"";xe=xe.replace(x," "),(kD(de.prev,J)||q(de,!0))&&(xe=xe.replace(R,"")),xe.length===0?de.remove():de.value=xe}},de=>{var ye;if(de.type===1){const xe=n.getElementRule(de.name);if(c&&xe){const Ue=$v(n,u,f,de);xe.paddInEmptyBlock&&Ue&&Y(de)?MS(r,J,de):xe.removeEmpty&&Ue?J(de)?de.remove():de.unwrap():xe.paddEmpty&&(Ue||TD(de))&&MS(r,J,de)}}else if(de.type===3&&!F(de)){let xe=(ye=de.value)!==null&&ye!==void 0?ye:"";(de.next&&J(de.next)||q(de,!1))&&(xe=xe.replace(P,"")),xe.length===0?de.remove():de.value=xe}}]},gL=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},su=(e={},n=Du())=>{const o=OR(),r=OR(),c={validate:!0,root_name:"body",...e},u=new DOMParser,f=fL(c,n),b=(ye,xe,Ue="html")=>{const mt=Ue==="xhtml"?"application/xhtml+xml":"text/html",lt=hn(n.getSpecialElements(),xe.toLowerCase()),Oe=lt?`<${xe}>${ye}</${xe}>`:ye,Se=Ue==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Oe}</body></html>`:`<body>${Oe}</body>`,St=u.parseFromString(Se,mt).body;return f.sanitize(St,FR(c,mt)),f.removed=[],lt?St.firstChild:St},y=o.addFilter,x=o.getFilters,R=o.removeFilter,P=r.addFilter,F=r.getFilters,Y=r.removeFilter,J=(ye,xe)=>{PS(n,ye)&&xe.push(ye)},q=(ye,xe)=>{const Ue=oe(xe.attr(j_)),mt=xe.type===1&&!hn(ye,xe.name)&&!fb(n,xe);return xe.type===3||mt&&!Ue},ee=(ye,xe)=>{const Ue=W_(LR("script,style,head,html,body,title,meta,param"),n.getBlockElements()),mt=/^[ \t\r\n]+/,lt=/[ \t\r\n]+$/;let Oe=ye.firstChild,Se=null;const St=en=>{var sn,Yn;en&&(Oe=en.firstChild,Oe&&Oe.type===3&&(Oe.value=(sn=Oe.value)===null||sn===void 0?void 0:sn.replace(mt,"")),Oe=en.lastChild,Oe&&Oe.type===3&&(Oe.value=(Yn=Oe.value)===null||Yn===void 0?void 0:Yn.replace(lt,"")))};if(n.isValidChild(ye.name,xe.toLowerCase())){for(;Oe;){const en=Oe.next;q(Ue,Oe)?(Se||(Se=new Il(xe,1),Se.attr(c.forced_root_block_attrs),ye.insert(Se,Oe)),Se.append(Oe)):(St(Se),Se=null),Oe=en}St(Se)}},de={schema:n,addAttributeFilter:P,getAttributeFilters:F,removeAttributeFilter:Y,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:R,parse:(ye,xe={})=>{var Ue;const mt=c.validate,lt=(Ue=xe.context)!==null&&Ue!==void 0?Ue:c.root_name,Oe=b(ye,lt,xe.format);Ji(n,Oe);const Se=new Il(lt,11);ox(Se,Oe,n.getSpecialElements()),Oe.innerHTML="";const[St,en]=q_(Se,n,c,xe),sn=[],Yn=mt?la=>J(la,sn):bt,_o={nodes:{},attributes:{}},ls=la=>l_(x(),F(),la,_o);if(G_(Se,[St,ls],[en,Yn]),sn.reverse(),mt&&sn.length>0)if(xe.context){const{pass:la,fail:el}=Fe(sn,rt=>rt.parent===Se);aC(el,n,ls),xe.invalid=la.length>0}else aC(sn,n,ls);const rs=gL(c,xe);return rs&&(Se.name==="body"||xe.isRootContent)&&ee(Se,rs),xe.invalid||i_(_o,xe),Se}};return U_(de,c),CC(de,c,n),de},K_=e=>IS(e)?jh({validate:!1}).serialize(e):e,HR=(e,n)=>{const o=K_(e),r=n(o);if(r.isDefaultPrevented())return r;if(IS(e))if(r.content!==o){const c=su({validate:!1,forced_root_block:!1}).parse(r.content,{context:e.name});return{...r,content:c}}else return{...r,content:e};else return r},Y_=(e,n)=>{if(n.no_events)return Xc.value(n);{const o=By(e,n);return o.isDefaultPrevented()?Xc.error(Xw(e,{content:"",...o}).content):Xc.value(o)}},X_=(e,n,o)=>o.no_events?n:HR(n,c=>Xw(e,{...o,content:c})).content,O1=(e,n)=>{if(n.no_events)return Xc.value(n);{const o=HR(n.content,r=>Ny(e,{...n,content:r}));return o.isDefaultPrevented()?(Yw(e,o),Xc.error(void 0)):Xc.value(o)}},J_=(e,n,o)=>{o.no_events||Yw(e,{...o,content:n})},Q_=(e,n,o)=>({element:e,width:n,rows:o}),eA=(e,n)=>({element:e,cells:n}),hL=(e,n)=>({x:e,y:n}),VR=(e,n)=>oc(e,n).bind(_r).getOr(1),pL=(e,n,o,r,c)=>{const u=VR(c,"rowspan"),f=VR(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=eA($0(r),[]));for(let x=n;x<n+f;x++){const R=b[y].cells;R[x]=y===o&&x===n?c:Xf(c)}}},zR=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},tA=(e,n,o)=>{for(;zR(e,n,o);)n++;return n},nA=e=>Mt(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),oA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(zo(c[u],n))return $.some(hL(u,r))}return $.none()},sA=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(eA(f[b].element,x))}return u},UR=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?sA(e,r,c,u,f):sA(e,r,f,u,c);return Q_(e.element,nA(b),b)},WR=(e,n)=>{const o=Xf(e.element),r=re.fromTag("tbody");return Pn(r,n),Ar(o,r),o},ZR=e=>Xt(e.rows,n=>{const o=Xt(n.cells,c=>{const u=$0(c);return Sr(u,"colspan"),Sr(u,"rowspan"),u}),r=Xf(n.element);return Pn(r,o),r}),bL=e=>{const n=Q_(Xf(e),0,[]);return Be(Fo(e,"tr"),(o,r)=>{Be(Fo(o,"td,th"),(c,u)=>{pL(n,tA(n,u,r),r,o,c)})}),Q_(n.element,nA(n.rows),n.rows)},rA=e=>WR(e,ZR(e)),vL=(e,n,o)=>oA(e,n).bind(r=>oA(e,o).map(c=>UR(e,r,c))),sx=e=>jn(e,n=>Fs(n)==="ul"||Fs(n)==="ol"),yL=(e,n)=>jn(e,o=>Fs(o)==="li"&&ky(o,n)).fold(je([]),o=>sx(e).map(r=>{const c=re.fromTag(Fs(r)),u=Jo(go(r),(f,b)=>nr(b,"list-style"));return ie(c,u),[re.fromTag("li"),c]}).getOr([])),CL=(e,n)=>{const o=Mt(n,(r,c)=>(Ar(c,r),c),e);return n.length>0?zh([o]):o},wL=e=>Dl(e)?sc(e).filter(Ho).fold(je([]),n=>[e,n]):Ho(e)?[e]:[],jR=(e,n)=>{const o=re.fromDom(n.commonAncestorContainer),r=wf(o,e),c=be(r,Uf),u=yL(r,n),f=c.concat(u.length?u:wL(o));return Xt(f,Xf)},aA=()=>zh([]),SL=(e,n)=>CL(re.fromDom(n.cloneContents()),jR(e,n)),xL=(e,n)=>xu(n,"table",Le(zo,e)),TL=(e,n)=>xL(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=bL(o);return vL(u,r,c).map(f=>zh([rA(f)]))}).getOrThunk(aA),kL=(e,n)=>n.length>0&&n[0].collapsed?aA():SL(e,n[0]),GR=(e,n)=>{const o=xy(n,e);return o.length>0?TL(e,o):kL(e,n)},cA=(e,n)=>n>=0&&n<e.length&&fc(e.charAt(n)),qR=e=>oa(e.innerText),EL=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),_L=e=>$.from(e.selection.getRng()).map(n=>{var o;const r=$.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=EL(r),f=re.fromDom(n.cloneContents());IE(f),k3(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=qR(b),x=oa((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),cA(x,0)||cA(x,x.length-1)){const R=r.getOr(c),P=qR(R),F=P.indexOf(y);if(F===-1)return y;{const Y=cA(P,F-1),J=cA(P,F+y.length);return(Y?" ":"")+y+(J?" ":"")}}else return y}).getOr(""),AL=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=bS(e,Nh(c)),f=n.contextual?GR(re.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},OL=(e,n)=>{if(n.format==="text")return _L(e);{const o=AL(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},DL=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),RL=(e,n,o={})=>{const r=DL(o,n);return Y_(e,r).fold(Eo,c=>{const u=OL(e,c);return X_(e,u,c)})},rx=0,KR=1,YR=2,ML=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(R,P,F)=>({start:R,end:P,diag:F}),f=(R,P,F,Y,J)=>{const q=y(R,P,F,Y);if(q===null||q.start===P&&q.diag===P-Y||q.end===R&&q.diag===R-F){let ee=R,me=F;for(;ee<P||me<Y;)ee<P&&me<Y&&e[ee]===n[me]?(J.push([rx,e[ee]]),++ee,++me):P-R>Y-F?(J.push([YR,e[ee]]),++ee):(J.push([KR,n[me]]),++me)}else{f(R,q.start,F,q.start-q.diag,J);for(let ee=q.start;ee<q.end;++ee)J.push([rx,e[ee]]);f(q.end,P,q.end-q.diag,Y,J)}},b=(R,P,F,Y)=>{let J=R;for(;J-P<Y&&J<F&&e[J]===n[J-P];)++J;return u(R,J,P)},y=(R,P,F,Y)=>{const J=P-R,q=Y-F;if(J===0||q===0)return null;const ee=J-q,me=q+J,de=(me%2===0?me:me+1)/2;r[1+de]=R,c[1+de]=P+1;let ye,xe,Ue,mt,lt;for(ye=0;ye<=de;++ye){for(xe=-ye;xe<=ye;xe+=2){for(Ue=xe+de,xe===-ye||xe!==ye&&r[Ue-1]<r[Ue+1]?r[Ue]=r[Ue+1]:r[Ue]=r[Ue-1]+1,mt=r[Ue],lt=mt-R+F-xe;mt<P&&lt<Y&&e[mt]===n[lt];)r[Ue]=++mt,++lt;if(ee%2!==0&&ee-ye<=xe&&xe<=ee+ye&&c[Ue-ee]<=r[Ue])return b(c[Ue-ee],xe+R-F,P,Y)}for(xe=ee-ye;xe<=ee+ye;xe+=2){for(Ue=xe+de-ee,xe===ee-ye||xe!==ee+ye&&c[Ue+1]<=c[Ue-1]?c[Ue]=c[Ue+1]-1:c[Ue]=c[Ue-1],mt=c[Ue]-1,lt=mt-R+F-xe;mt>=R&&lt>=F&&e[mt]===n[lt];)c[Ue]=mt--,lt--;if(ee%2===0&&-ye<=xe&&xe<=ye&&c[Ue]<=r[Ue+ee])return b(c[Ue],xe+R-F,P,Y)}}return null},x=[];return f(0,e.length,0,n.length,x),x},XR=e=>_t(e)?e.outerHTML:et(e)?Na.encodeRaw(e.data,!1):Gl(e)?"<!--"+e.data+"-->":"",NL=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},z9=(e,n,o)=>{const r=NL(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},U9=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},BL=(e,n)=>{let o=0;Be(e,r=>{r[0]===rx?o++:r[0]===KR?(z9(n,r[1],o),o++):r[0]===YR&&U9(n,o)})},PL=e=>be(Xt(is(e.childNodes),XR),n=>n.length>0),W9=(e,n)=>{const o=Xt(is(n.childNodes),XR);return BL(ML(o,e),n),n},$L=Qt(()=>document.implementation.createHTMLDocument("undo")),Rr=e=>e.indexOf("</iframe>")!==-1,lA=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Z9=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),ax=e=>{const n=PL(e.getBody()),o=br(n,c=>{const u=T3(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return Rr(r)?lA(o):Z9(r)},iA=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?W9(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:ge(r)&&by(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},ep=e=>e.type==="fragmented"?e.fragments.join(""):e.content,IL=e=>{const n=re.fromTag("body",$L());return Kg(n,ep(e)),Be(Fo(n,"*[data-mce-bogus]"),Za),$f(n)},j9=(e,n)=>ep(e)===ep(n),Vc=(e,n)=>IL(e)===IL(n),cx=(e,n)=>!e||!n?!1:j9(e,n)?!0:Vc(e,n),lx=e=>e.get()===0,xC=(e,n,o)=>{lx(o)&&(e.typing=n)},JR=(e,n)=>{e.typing&&(xC(e,!1,n),e.add())},LL=e=>{e.typing&&(e.typing=!1,e.add())},ix=(e,n,o)=>{lx(n)&&o.set(Ba(e.selection))},FL=(e,n,o,r,c,u,f)=>{const b=ax(e),y=Ge.extend(u||{},b);if(!lx(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&cx(x,y))return null;n.data[o.get()]&&c.get().each(F=>{n.data[o.get()].beforeBookmark=F});const R=J0(e);if(R&&n.data.length>R){for(let F=0;F<n.data.length-1;F++)n.data[F]=n.data[F+1];n.data.length--,o.set(n.data.length)}y.bookmark=Ba(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const P={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",P),e.dispatch("change",P)):e.dispatch("AddUndo",P),y},uA=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},HL=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];iA(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},QR=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],iA(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},eM=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,xC(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],iA(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},dA=e=>{e.clear(),e.add()},tM=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!cx(ax(e),n.data[0]),mA=(e,n)=>n.get()<e.data.length-1&&!e.typing,VL=(e,n,o)=>(JR(e,n),e.beforeChange(),e.ignore(o),e.add()),zL=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},UL=(e,n)=>{const o=e.dom,r=ge(n)?n:e.getBody();Be(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=q4(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=sf(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},ru=e=>({init:{bindEvents:bt},undoManager:{beforeChange:(n,o)=>ix(e,n,o),add:(n,o,r,c,u,f)=>FL(e,n,o,r,c,u,f),undo:(n,o,r)=>eM(e,n,o,r),redo:(n,o)=>QR(e,n,o),clear:(n,o)=>uA(e,n,o),reset:n=>dA(n),hasUndo:(n,o)=>tM(e,n,o),hasRedo:(n,o)=>mA(n,o),transact:(n,o,r)=>VL(n,o,r),ignore:(n,o)=>zL(n,o),extra:(n,o,r,c)=>HL(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>v_(e,n,o,r,c),matchAll:(n,o)=>TI(e,n,o),matchNode:(n,o,r,c)=>gm(e,n,o,r,c),canApply:n=>VD(e,n),closest:n=>HS(e,n),apply:(n,o,r)=>lR(e,n,o,r),remove:(n,o,r,c)=>rR(e,n,o,r,c),toggle:(n,o,r)=>gR(e,n,o,r),formatChanged:(n,o,r,c,u)=>O_(e,n,o,r,c,u)},editor:{getContent:n=>x5(e,n),setContent:(n,o)=>xI(e,n,o),insertContent:(n,o)=>w1(e,n,o),addVisual:n=>UL(e,n)},selection:{getContent:(n,o)=>RL(e,n,o)},autocompleter:{addDecoration:n=>g5(e,n),removeDecoration:()=>p5(e,re.fromDom(e.getBody()))},raw:{getModel:()=>$.none()}}),WL=e=>{const n=x=>Pt(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,R,P)=>r.transact(P),ignore:(x,R)=>r.ignore(R),extra:(x,R,P,F)=>r.extra(P,F)},formatter:{match:(x,R,P,F)=>c.match(x,n(R),F),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,R,P)=>c.apply(x,n(R)),remove:(x,R,P,F)=>c.remove(x,n(R)),toggle:(x,R,P)=>c.toggle(x,n(R)),formatChanged:(x,R,P,F,Y)=>c.formatChanged(R,P,F,Y)},editor:{getContent:x=>u.getContent(x),setContent:(x,R)=>({content:u.setContent(x,R),html:""}),insertContent:(x,R)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,R)=>f.getContent(R)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>$.some(y.getRawModel())}}},ZL=()=>{const e=je(null),n=je("");return{init:{bindEvents:bt},undoManager:{beforeChange:bt,add:e,undo:e,redo:e,clear:bt,reset:bt,hasUndo:rn,hasRedo:rn,transact:e,ignore:bt,extra:bt},formatter:{match:rn,matchAll:je([]),matchNode:je(void 0),canApply:rn,closest:n,apply:bt,remove:bt,toggle:bt,formatChanged:je({unbind:bt})},editor:{getContent:n,setContent:je({content:"",html:""}),insertContent:je(""),addVisual:bt},selection:{getContent:n},autocompleter:{addDecoration:bt,removeDecoration:bt},raw:{getModel:je($.none())}}},xf=e=>hn(e.plugins,"rtc"),jL=e=>No(e.plugins,"rtc").bind(n=>$.from(n.setup)),GL=e=>{const n=e;return jL(e).fold(()=>(n.rtcInstance=ru(e),$.none()),o=>(n.rtcInstance=ZL(),$.some(()=>o().then(r=>(n.rtcInstance=WL(r),r.rtc.isRemote)))))},ux=e=>e.rtcInstance?e.rtcInstance:ru(e),Sa=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},qL=(e,n,o)=>{Sa(e).undoManager.beforeChange(n,o)},KL=(e,n,o,r,c,u,f)=>Sa(e).undoManager.add(n,o,r,c,u,f),dx=(e,n,o,r)=>Sa(e).undoManager.undo(n,o,r),YL=(e,n,o)=>Sa(e).undoManager.redo(n,o),XL=(e,n,o)=>{Sa(e).undoManager.clear(n,o)},nM=(e,n)=>{Sa(e).undoManager.reset(n)},fA=(e,n,o)=>Sa(e).undoManager.hasUndo(n,o),JL=(e,n,o)=>Sa(e).undoManager.hasRedo(n,o),QL=(e,n,o,r)=>Sa(e).undoManager.transact(n,o,r),G9=(e,n,o)=>{Sa(e).undoManager.ignore(n,o)},eF=(e,n,o,r,c)=>{Sa(e).undoManager.extra(n,o,r,c)},TC=(e,n,o,r,c)=>Sa(e).formatter.match(n,o,r,c),oM=(e,n,o)=>Sa(e).formatter.matchAll(n,o),sM=(e,n,o,r,c)=>Sa(e).formatter.matchNode(n,o,r,c),tF=(e,n)=>Sa(e).formatter.canApply(n),rM=(e,n)=>Sa(e).formatter.closest(n),nF=(e,n,o,r)=>{Sa(e).formatter.apply(n,o,r)},oF=(e,n,o,r,c)=>{Sa(e).formatter.remove(n,o,r,c)},sF=(e,n,o,r)=>{Sa(e).formatter.toggle(n,o,r)},rF=(e,n,o,r,c,u)=>Sa(e).formatter.formatChanged(n,o,r,c,u),aM=(e,n)=>ux(e).editor.getContent(n),aF=(e,n,o)=>ux(e).editor.setContent(n,o),cF=(e,n,o)=>ux(e).editor.insertContent(n,o),kC=(e,n,o)=>Sa(e).selection.getContent(n,o),cM=(e,n)=>Sa(e).editor.addVisual(n),gA=e=>Sa(e).init.bindEvents(),lF=(e,n)=>Sa(e).autocompleter.addDecoration(n),iF=e=>Sa(e).autocompleter.removeDecoration(),uF=(e,n={})=>{const o=n.format?n.format:"html";return kC(e,o,n)},hA=e=>e.dom.length===0?(Uo(e),$.none()):$.some(e),dF=(e,n)=>e.filter(o=>Iu.isBookmarkNode(o.dom)).bind(n?Ld:wc),mF=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(XE(c,u,!1,!r),o.setStart(u,f)):(XE(u,c,!1,!r),o.setEnd(u,f))},fF=(e,n)=>{sc(e).each(o=>{const r=e.dom;n&&Xy(o,Pe(r,0))?SS(r,0):!n&&Rv(o,Pe(r,r.length))&&YE(r,r.length)})},lM=(e,n,o,r)=>{e.bind(c=>((r?YE:SS)(c.dom,r?c.dom.length:0),n.filter(Cr).map(f=>mF(c,f,o,r)))).orThunk(()=>dF(n,r).or(n).filter(Cr).map(u=>fF(u,r)))},q9=(e,n)=>{const o=$.from(n.firstChild).map(re.fromDom),r=$.from(n.lastChild).map(re.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(wc).filter(Cr).bind(hA),u=r.bind(Ld).filter(Cr).bind(hA);lM(c,o,e,!0),lM(u,r,e,!1),e.collapse(!1)},pm=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),iM=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return jh({validate:!1},e.schema).serialize(u)}else return n.content},gF=(e,n,o={})=>{const r=pm(o,n);O1(e,r).each(c=>{const u=iM(e,c),f=e.selection.getRng();q9(f,f.createContextualFragment(u)),e.selection.setRng(f),ct(e,f),J_(e,u,c)})},uM=(e,n,o)=>{if(hn(e,n)){const r=be(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var hF=(e,n)=>{let o,r;const c=(b,y)=>jn(y,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,x=u(y),R={};lo(o,(P,F)=>{c(F,x).each(Y=>{r[F]||(Be(P,J=>{J(!0,{node:Y,selector:F,parents:x})}),r[F]=P),R[F]=P})}),lo(r,(P,F)=>{R[F]||(delete r[F],Be(P,Y=>{Y(!1,{node:y,selector:F,parents:x})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{uM(o,b,y),uM(r,b,y)}})}};const dM=e=>!!(e&&e.ownerDocument)&&Aa(re.fromDom(e.ownerDocument),re.fromDom(e)),ts=e=>e?dM(e.startContainer)&&dM(e.endContainer):!1,pF=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=hF(e,r),b=(rt,Xn)=>{const ln=e.createRng();ge(rt)&&ge(Xn)?(ln.setStart(rt,Xn),ln.setEnd(rt,Xn),ye(ln),ee(!1)):(lv(e,ln,r.getBody(),!0),ye(ln))},y=rt=>uF(r,rt),x=(rt,Xn)=>gF(r,rt,Xn),R=rt=>g3(r.getBody(),de(),rt),P=rt=>h3(r.getBody(),de(),rt),F=(rt,Xn)=>la.getBookmark(rt,Xn),Y=rt=>la.moveToBookmark(rt),J=(rt,Xn)=>(b3(e,rt,Xn).each(ye),rt),q=()=>{const rt=de(),Xn=me();return!rt||rt.item?!1:rt.compareEndPoints?rt.compareEndPoints("StartToEnd",rt)===0:!Xn||rt.collapsed},ee=rt=>{const Xn=de();Xn.collapse(!!rt),ye(Xn)},me=()=>n.getSelection?n.getSelection():n.document.selection,de=()=>{let rt;const Xn=(Ys,wt,kn)=>{try{return wt.compareBoundaryPoints(Ys,kn)}catch{return-1}},ln=n.document;if(ge(r.bookmark)&&!v1(r)){const Ys=gc(r);if(Ys.isSome())return Ys.map(wt=>bS(r,[wt])[0]).getOr(ln.createRange())}try{const Ys=me();Ys&&!Lm(Ys.anchorNode)&&(Ys.rangeCount>0?rt=Ys.getRangeAt(0):rt=ln.createRange(),rt=bS(r,[rt])[0])}catch{}if(rt||(rt=ln.createRange()),Nc(rt.startContainer)&&rt.collapsed){const Ys=e.getRoot();rt.setStart(Ys,0),rt.setEnd(Ys,0)}return c&&u&&(Xn(rt.START_TO_START,rt,c)===0&&Xn(rt.END_TO_END,rt,c)===0?rt=u:(c=null,u=null)),rt},ye=(rt,Xn)=>{if(!ts(rt))return;const ln=me();if(rt=r.dispatch("SetSelectionRange",{range:rt,forward:Xn}).range,ln){u=rt;try{ln.removeAllRanges(),ln.addRange(rt)}catch{}Xn===!1&&ln.extend&&(ln.collapse(rt.endContainer,rt.endOffset),ln.extend(rt.startContainer,rt.startOffset)),c=ln.rangeCount>0?ln.getRangeAt(0):null}if(!rt.collapsed&&rt.startContainer===rt.endContainer&&(ln!=null&&ln.setBaseAndExtent)&&rt.endOffset-rt.startOffset<2&&rt.startContainer.hasChildNodes()){const wt=rt.startContainer.childNodes[rt.startOffset];wt&&wt.nodeName==="IMG"&&(ln.setBaseAndExtent(rt.startContainer,rt.startOffset,rt.endContainer,rt.endOffset),(ln.anchorNode!==rt.startContainer||ln.focusNode!==rt.endContainer)&&ln.setBaseAndExtent(wt,0,wt,1))}r.dispatch("AfterSetSelectionRange",{range:rt,forward:Xn})},xe=rt=>(x(e.getOuterHTML(rt)),rt),Ue=()=>i5(r.getBody(),de()),mt=(rt,Xn)=>pS(e,de(),rt,Xn),lt=()=>{const rt=me(),Xn=rt==null?void 0:rt.anchorNode,ln=rt==null?void 0:rt.focusNode;if(!rt||!Xn||!ln||Lm(Xn)||Lm(ln))return!0;const Ys=e.createRng(),wt=e.createRng();try{Ys.setStart(Xn,rt.anchorOffset),Ys.collapse(!0),wt.setStart(ln,rt.focusOffset),wt.collapse(!0)}catch{return!0}return Ys.compareBoundaryPoints(Ys.START_TO_START,wt)<=0},rs={dom:e,win:n,serializer:o,editor:r,expand:(rt={type:"word"})=>ye(wg(e).expand(de(),rt)),collapse:ee,setCursorLocation:b,getContent:y,setContent:x,getBookmark:F,moveToBookmark:Y,select:J,isCollapsed:q,isForward:lt,setNode:xe,getNode:Ue,getSel:me,setRng:ye,getRng:de,getStart:R,getEnd:P,getSelectedBlocks:mt,normalize:()=>{const rt=de(),Xn=me();if(!Lw(Xn)&&wo(r)){const ln=xv(e,rt);return ln.each(Ys=>{ye(Ys,lt())}),ln.getOr(rt)}return rt},selectorChanged:(rt,Xn)=>(f(rt,Xn),rs),selectorChangedWithUnbind:f,getScrollContainer:()=>{let rt,Xn=e.getRoot();for(;Xn&&Xn.nodeName!=="BODY";){if(Xn.scrollHeight>Xn.clientHeight){rt=Xn;break}Xn=Xn.parentNode}return rt},scrollIntoView:(rt,Xn)=>{ge(rt)?dt(r,rt,Xn):ct(r,de(),Xn)},placeCaretAt:(rt,Xn)=>ye(Cg(rt,Xn,r.getDoc())),getBoundingClientRect:()=>{const rt=de();return rt.collapsed?Pe.fromRangeStart(rt).getClientRects()[0]:rt.getBoundingClientRect()},destroy:()=>{n=c=u=null,el.destroy()}},la=Iu(rs),el=Ei(rs,r);return rs.bookmarkManager=la,rs.controlSelection=el,rs},bF=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let R=x.attr(u);R!==void 0?(x.attr(c,R.length>0?R:null),x.attr(u,null)):(R=x.attr(c),c==="style"?R=o.serializeStyle(o.parseStyle(R),x.name):f&&(R=f.call(b,R,c,x.name)),x.attr(c,R.length>0?R:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&($.from(b.firstChild).exists(x=>{var R;return!Kl((R=x.value)!==null&&R!==void 0?R:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Na.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],x=y.firstChild,R=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const P=y.attr("type");P&&y.attr("type",P==="mce-no/type"?null:P.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&R.length>0&&(x.value=`// <![CDATA[
`+f(R)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&R.length>0&&(x.value=`<!--
`+f(R)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Be(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},vF=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Yr=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Ge.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return gE(e,{...o,node:u}),r&&(c.doc=r),u},yF=(e,n)=>ge(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,EC=(e,n,o)=>yF(e,o)?Yr(e,n,o):n,CF=(e,n,o)=>{Ge.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},wF=(e,n,o)=>!n.no_events&&e?hE(e,{...n,content:o}).content:o,SF=(e,n,o)=>{const r=oa(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Vf(re.fromDom(n))?r:Ge.trim(r)},mM=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return vF(c),c},tp=(e,n,o)=>jh(e,n).serialize(o),Ri=(e,n,o,r,c)=>{const u=tp(n,o,r);return wF(e,c,u)},_C=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:Ms.DOM,c=n&&n.schema?n.schema:Du(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=su(e,c);bF(u,e,r);const f=(b,y={})=>{const x={format:"html",...y},R=EC(n,b,x),P=SF(r,R,x),F=mM(u,P,x);return x.format==="tree"?F:Ri(n,e,c,F,x)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:Le(CF,u,o),getTempAttrs:je(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},np=(e,n)=>{const o=_C(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},_g="html",AC=(e,n)=>({...e,format:n,get:!0,getInner:!0}),pA=(e,n={})=>{const o=n.format?n.format:_g,r=AC(n,o);return Y_(e,r).fold(Eo,c=>{const u=aM(e,c);return X_(e,u,c)})},bA="html",fM=(e,n)=>({format:bA,...e,set:!0,content:n}),mx=(e,n,o={})=>{const r=fM(o,n);return O1(e,r).map(c=>{const u=aF(e,c.content,c);return J_(e,u.html,c),u.content}).getOr(n)},xF="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),TF="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),gM=e=>{const n=be(xF,r=>hn(e,r)),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Un(n)},hM=e=>{const n=Ge.makeMap(e.plugins," "),r=be(TF,c=>hn(n,c));return Un(r)},pM=(e,n)=>{const o=gM(e),r=hM(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",x=c?`

Plugins:${b}${r.join(b)}`:"",R=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+x+R)}},bM=(e,n)=>{pM(e,n)},Yv=Ms.DOM,K9=e=>{Yv.setStyle(e.id,"display",e.orgDisplay)},fx=e=>$.from(e).each(n=>n.destroy()),Y9=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},kF=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Yv.unbind(n,"submit reset",e.formEventDelegate))},EF=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ge(c==null?void 0:c.nextSibling)&&Yv.remove(c.nextSibling),um(e),e.editorManager.remove(e),!e.inline&&r&&K9(e),pE(e),Yv.remove(e.getContainer()),fx(n),fx(o),e.destroy()}},Tf=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),fx(o),fx(r)),kF(e),Y9(e),e.destroyed=!0}},vA=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>hn(e,c)}})(),Xv=Kc.ModelManager,Jv=(e,n)=>n.dom[e],vM=(e,n)=>parseInt(pe(n,e),10),yM=Le(Jv,"clientWidth"),CM=Le(Jv,"clientHeight"),wM=Le(vM,"margin-top"),_F=Le(vM,"margin-left"),AF=e=>e.dom.getBoundingClientRect(),op=(e,n,o)=>{const r=yM(e),c=CM(e);return n>=0&&o>=0&&n<=r&&o<=c},OF=(e,n,o,r)=>{const c=AF(n),u=e?c.left+n.dom.clientLeft+_F(n):0,f=e?c.top+n.dom.clientTop+wM(n):0,b=o-u,y=r-f;return{x:b,y}},DF=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.inline?r:Dm(r),u=OF(e.inline,c,n,o);return op(c,u.x,u.y)},RF=e=>$.from(e).map(re.fromDom),MF=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return RF(n).map(Zl).getOr(!1)};var NF=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const SM=e=>{const n=[],o=()=>{const F=e.theme;return F&&F.getNotificationManagerImpl?F.getNotificationManagerImpl():NF()},r=()=>$.from(n[0]),c=(F,Y)=>F.type===Y.type&&F.text===Y.text&&!F.progressBar&&!F.timeout&&!Y.progressBar&&!Y.timeout,u=()=>{Be(n,F=>{F.reposition()})},f=F=>{n.push(F)},b=F=>{Is(n,Y=>Y===F).each(Y=>{n.splice(Y,1)})},y=(F,Y=!0)=>e.removed||!MF(e)?{}:(Y&&e.dispatch("BeforeOpenNotification",{notification:F}),jn(n,J=>c(o().getArgs(J),F)).getOrThunk(()=>{e.editorManager.setActive(e);const J=o().open(F,()=>{b(J),u(),r().fold(()=>e.focus(),q=>He(re.fromDom(q.getEl())))});return f(J),u(),e.dispatch("OpenNotification",{notification:{...J}}),J})),x=()=>{r().each(F=>{o().close(F),b(F),u()})},R=je(n);return(F=>{F.on("SkinLoaded",()=>{const Y=Ok(F);Y&&y({text:Y,type:"warning",timeout:0},!1),u()}),F.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),F.on("remove",()=>{Be(n.slice(),Y=>{o().close(Y)})})})(e),{open:y,close:x,getNotifications:R}},Qv=Kc.PluginManager,D1=Kc.ThemeManager;var BF=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const xM=e=>{let n=[];const o=()=>{const q=e.theme;return q&&q.getWindowManagerImpl?q.getWindowManagerImpl():BF()},r=(q,ee)=>(...me)=>ee?ee.apply(q,me):void 0,c=q=>{e.dispatch("OpenWindow",{dialog:q})},u=q=>{e.dispatch("CloseWindow",{dialog:q})},f=q=>{n.push(q),c(q)},b=q=>{u(q),n=be(n,ee=>ee!==q),n.length===0&&e.focus()},y=()=>$.from(n[n.length-1]),x=q=>{e.editorManager.setActive(e),fs(e),e.ui.show();const ee=q();return f(ee),ee},R=(q,ee)=>x(()=>o().open(q,ee,b)),P=q=>x(()=>o().openUrl(q,b)),F=(q,ee,me)=>{const de=o();de.alert(q,r(me||de,ee))},Y=(q,ee,me)=>{const de=o();de.confirm(q,r(me||de,ee))},J=()=>{y().each(q=>{o().close(q),b(q)})};return e.on("remove",()=>{Be(n,q=>{o().close(q)})}),{open:R,openUrl:P,alert:F,confirm:Y,close:J}},TM=(e,n)=>{e.notificationManager.open({type:"error",text:n})},yA=(e,n)=>{e._skinLoaded?TM(e,n):e.on("SkinLoaded",()=>{TM(e,n)})},OC=(e,n)=>{yA(e,kc.translate(["Failed to upload image: {0}",n]))},DC=(e,n,o)=>{u1(e,n,{message:o}),console.error(o)},R1=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,PF=(e,n,o)=>{DC(e,"PluginLoadError",R1("plugin",n,o))},$F=(e,n,o)=>{DC(e,"IconsLoadError",R1("icons",n,o))},IF=(e,n,o)=>{DC(e,"LanguageLoadError",R1("language",n,o))},LF=(e,n,o)=>{DC(e,"ThemeLoadError",R1("theme",n,o))},M1=(e,n,o)=>{DC(e,"ModelLoadError",R1("model",n,o))},N1=(e,n,o)=>{const r=kc.translate(["Failed to initialize plugin: {0}",n]);u1(e,"PluginLoadError",{message:r}),B1(r,o),yA(e,r)},B1=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},gx=e=>/^[a-z0-9\-]+$/i.test(e),P1=e=>RC(e,wa(e)),$1=e=>RC(e,of(e)),RC=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Xt(n,u=>gx(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},hx=e=>{e.contentCSS=e.contentCSS.concat(P1(e),$1(e))},kM=We,CA=(e,n,o)=>Yg(e,n,kM,o),wA=e=>e?is(e.getElementsByTagName("img")):[],EM=(e,n)=>{const o={};return{findAll:(c,u=We)=>{const f=be(wA(c),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===Ao.transparentSrc?!1:nr(x,"blob:")?!e.isUploaded(x)&&u(y):nr(x,"data:")?u(y):!1}),b=Xt(f,y=>{const x=y.src;if(hn(o,x))return o[x].then(R=>oe(R)?R:{image:y,blobInfo:R.blobInfo});{const R=BR(n,x).then(P=>(delete o[x],{image:y,blobInfo:P})).catch(P=>(delete o[x],P));return o[x]=R,R}});return Promise.all(b)}}},SA=()=>{let o={};const r=(F,Y)=>({status:F,resultUri:Y}),c=F=>F in o;return{hasBlobUri:c,getResultUri:F=>{const Y=o[F];return Y?Y.resultUri:null},isPending:F=>c(F)?o[F].status===1:!1,isUploaded:F=>c(F)?o[F].status===2:!1,markPending:F=>{o[F]=r(1,null)},markUploaded:(F,Y)=>{o[F]=r(2,Y)},removeFailed:F=>{delete o[F]},destroy:()=>{o={}}}};let e0=0;const _M=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},AM=e=>e+e0+++_M(),OM=()=>{let e=[];const n=P=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[P.toLowerCase()]||"dat",o=(P,F,Y,J,q)=>{if(oe(P))return r({id:P,name:J,filename:q,blob:F,base64:Y});if(Pt(P))return r(P);throw new Error("Unknown input type")},r=P=>{if(!P.blob||!P.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const F=P.id||AM("blobid"),Y=P.name||F,J=P.blob;return{id:je(F),name:je(Y),filename:je(P.filename||Y+"."+n(J.type)),blob:je(J),base64:je(P.base64),blobUri:je(P.blobUri||URL.createObjectURL(J)),uri:je(P.uri)}},c=P=>{f(P.id())||e.push(P)},u=P=>jn(e,P).getOrUndefined(),f=P=>u(F=>F.id()===P);return{create:o,add:c,get:f,getByUri:P=>u(F=>F.blobUri()===P),getByData:(P,F)=>u(Y=>Y.base64()===P&&Y.blob().type===F),findFirst:u,removeByUri:P=>{e=be(e,F=>F.blobUri()===P?(URL.revokeObjectURL(F.blobUri()),!1):!0)},destroy:()=>{Be(e,P=>{URL.revokeObjectURL(P.blobUri())}),e=[]}}},px=(e,n)=>{const o={},r=(q,ee)=>q?q.replace(/\/$/,"")+"/"+ee.replace(/^\//,""):ee,c=(q,ee)=>new Promise((me,de)=>{const ye=new XMLHttpRequest;ye.open("POST",n.url),ye.withCredentials=n.credentials,ye.upload.onprogress=Ue=>{ee(Ue.loaded/Ue.total*100)},ye.onerror=()=>{de("Image upload failed due to a XHR Transport error. Code: "+ye.status)},ye.onload=()=>{if(ye.status<200||ye.status>=300){de("HTTP Error: "+ye.status);return}const Ue=JSON.parse(ye.responseText);if(!Ue||!oe(Ue.location)){de("Invalid JSON: "+ye.responseText);return}me(r(n.basePath,Ue.location))};const xe=new FormData;xe.append("file",q.blob(),q.filename()),ye.send(xe)}),u=X(n.handler)?n.handler:c,f=()=>new Promise(q=>{q([])}),b=(q,ee)=>({url:ee,blobInfo:q,status:!0}),y=(q,ee)=>({url:"",blobInfo:q,status:!1,error:ee}),x=(q,ee)=>{Ge.each(o[q],me=>{me(ee)}),delete o[q]},R=(q,ee,me)=>(e.markPending(q.blobUri()),new Promise(de=>{let ye,xe;try{const Ue=()=>{ye&&(ye.close(),xe=bt)},mt=Oe=>{Ue(),e.markUploaded(q.blobUri(),Oe),x(q.blobUri(),b(q,Oe)),de(b(q,Oe))},lt=Oe=>{Ue(),e.removeFailed(q.blobUri()),x(q.blobUri(),y(q,Oe)),de(y(q,Oe))};xe=Oe=>{Oe<0||Oe>100||$.from(ye).orThunk(()=>$.from(me).map(oo)).each(Se=>{ye=Se,Se.progressBar.value(Oe)})},ee(q,xe).then(mt,Oe=>{lt(oe(Oe)?{message:Oe}:Oe)})}catch(Ue){de(y(q,Ue))}})),P=q=>q===c,F=q=>{const ee=q.blobUri();return new Promise(me=>{o[ee]=o[ee]||[],o[ee].push(me)})},Y=(q,ee)=>(q=Ge.grep(q,me=>!e.isUploaded(me.blobUri())),Promise.all(Ge.map(q,me=>e.isPending(me.blobUri())?F(me):R(me,u,ee))));return{upload:(q,ee)=>!n.url&&P(u)?f():Y(q,ee)}},xA=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),TA=(e,n)=>px(n,{url:Ek(e),basePath:nm(e),credentials:lw(e),handler:j0(e)}),DM=e=>{const n=SA(),o=TA(e,n);return{upload:(r,c=!0)=>o.upload(r,c?xA(e):void 0)}},RM=e=>{const n=OM();let o,r;const c=SA(),u=[],f=ye=>xe=>e.selection?ye(xe):[],b=ye=>ye+(ye.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(ye,xe,Ue)=>{let mt=0;do mt=ye.indexOf(xe,mt),mt!==-1&&(ye=ye.substring(0,mt)+Ue+ye.substr(mt+xe.length),mt+=Ue.length-xe.length+1);while(mt!==-1);return ye},x=(ye,xe,Ue)=>{const mt=`src="${Ue}"${Ue===Ao.transparentSrc?' data-mce-placeholder="1"':""}`;return ye=y(ye,`src="${xe}"`,mt),ye=y(ye,'data-mce-src="'+xe+'"','data-mce-src="'+Ue+'"'),ye},R=(ye,xe)=>{Be(e.undoManager.data,Ue=>{Ue.type==="fragmented"?Ue.fragments=Xt(Ue.fragments,mt=>x(mt,ye,xe)):Ue.content=x(Ue.content,ye,xe)})},P=(ye,xe)=>{const Ue=e.convertURL(xe,"src");R(ye.src,xe),bs(re.fromDom(ye),{src:Z0(e)?b(xe):xe,"data-mce-src":Ue})},F=()=>(o||(o=TA(e,c)),ee().then(f(ye=>{const xe=Xt(ye,Ue=>Ue.blobInfo);return o.upload(xe,xA(e)).then(f(Ue=>{const mt=[];let lt=!1;const Oe=Xt(Ue,(Se,St)=>{const{blobInfo:en,image:sn}=ye[St];let Yn=!1;return Se.status&&kk(e)?(Se.url&&!ms(sn.src,Se.url)&&(lt=!0),n.removeByUri(sn.src),xf(e)||P(sn,Se.url)):Se.error&&(Se.error.remove&&(R(sn.src,Ao.transparentSrc),mt.push(sn),Yn=!0),OC(e,Se.error.message)),{element:sn,status:Se.status,uploadUri:Se.url,blobInfo:en,removed:Yn}});return mt.length>0&&!xf(e)?e.undoManager.transact(()=>{Be(mt,Se=>{e.dom.remove(Se),n.removeByUri(Se.src)})}):lt&&e.undoManager.dispatchChange(),Oe}))}))),Y=()=>cw(e)?F():Promise.resolve([]),J=ye=>mo(u,xe=>xe(ye)),q=ye=>{u.push(ye)},ee=()=>(r||(r=EM(c,n)),r.findAll(e.getBody(),J).then(f(ye=>{const xe=be(ye,Ue=>oe(Ue)?(yA(e,Ue),!1):!0);return xf(e)||Be(xe,Ue=>{R(Ue.image.src,Ue.blobInfo.blobUri()),Ue.image.src=Ue.blobInfo.blobUri(),Ue.image.removeAttribute("data-mce-src")}),xe}))),me=()=>{n.destroy(),c.destroy(),r=o=null},de=ye=>ye.replace(/src="(blob:[^"]+)"/g,(xe,Ue)=>{const mt=c.getResultUri(Ue);if(mt)return'src="'+mt+'"';let lt=n.getByUri(Ue);return lt||(lt=Mt(e.editorManager.get(),(Oe,Se)=>Oe||Se.editorUpload&&Se.editorUpload.blobCache.getByUri(Ue),void 0)),lt?'src="data:'+lt.blob().type+";base64,"+lt.base64()+'"':xe});return e.on("SetContent",()=>{cw(e)?Y():ee()}),e.on("RawSaveContent",ye=>{ye.content=de(ye.content)}),e.on("GetContent",ye=>{ye.source_view||ye.format==="raw"||ye.format==="tree"||(ye.content=de(ye.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ye=>{Be(ye,xe=>{const Ue=xe.attr("src");if(!Ue||n.getByUri(Ue))return;const mt=c.getResultUri(Ue);mt&&xe.attr("src",mt)})})}),{blobCache:n,addFilter:q,uploadImages:F,uploadImagesAuto:Y,scanForImages:ee,destroy:me}},Ag=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>_t(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Ge.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ge.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},Og={remove_similar:!0,inherit:!1},Fl={selector:"td,th",...Og},FF={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Fl},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Fl},tablecellbordercolor:{styles:{borderColor:"%value"},...Fl},tablecellclass:{classes:["%value"],...Fl},tableclass:{selector:"table",classes:["%value"],...Og},tablecellborderstyle:{styles:{borderStyle:"%value"},...Fl},tablecellborderwidth:{styles:{borderWidth:"%value"},...Fl}},HF=je(FF),VF=e=>{const n={},o=f=>ge(f)?n[f]:n,r=f=>hn(n,f),c=(f,b)=>{f&&(oe(f)?(Zn(b)||(b=[b]),Be(b,y=>{jo(y.deep)&&(y.deep=!Ti(y)),jo(y.split)&&(y.split=!Ti(y)||$a(y)),jo(y.remove)&&Ti(y)&&!$a(y)&&(y.remove="none"),Ti(y)&&$a(y)&&(y.mixed=!0,y.block_expand=!0),oe(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):lo(f,(y,x)=>{c(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(Ag(e)),c(HF()),c(sg(e)),{get:o,has:r,register:c,unregister:u}},bx=Ge.each,Zu=Ms.DOM,kA=e=>ge(e)&&Pt(e),MM=(e,n)=>{const o=n&&n.schema||Du({}),r=(y,x)=>{x.classes.length>0&&Zu.addClass(y,x.classes.join(" ")),Zu.setAttribs(y,x.attrs)},c=y=>{const x=oe(y)?{name:y,classes:[],attrs:{}}:y,R=Zu.create(x.name);return r(R,x),R},u=(y,x)=>{const R=o.getElementRule(y.nodeName.toLowerCase()),P=R==null?void 0:R.parentsRequired;return P&&P.length?x&&on(P,x)?x:P[0]:!1},f=(y,x,R)=>{let P;const F=x[0],Y=kA(F)?F.name:void 0,J=u(y,Y);if(J)Y===J?(P=F,x=x.slice(1)):P=J;else if(F)P=F,x=x.slice(1);else if(!R)return y;const q=P?c(P):Zu.create("div");q.appendChild(y),R&&Ge.each(R,me=>{const de=c(me);q.insertBefore(de,y)});const ee=kA(P)?P.siblings:void 0;return f(q,x,ee)},b=Zu.create("div");if(e.length>0){const y=e[0],x=c(y),R=kA(y)?y.siblings:void 0;b.appendChild(f(x,e.slice(1),R))}return b},zF=e=>{e=Ge.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Ge.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},UF=e=>oe(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ge.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Ge.map(n.split(/(?:~\+|~|\+)/),zF),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],WF=(e,n)=>{let o="",r=kh(e);if(r==="")return"";const c=F=>oe(F)?F.replace(/%(\w+)/g,""):"",u=(F,Y)=>Zu.getStyle(Y??e.getBody(),F,!0);if(oe(n)){const F=e.formatter.get(n);if(!F)return"";n=F[0]}if("preview"in n){const F=n.preview;if(F===!1)return"";r=F||r}let f=n.block||n.inline||"span",b;const y=UF(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=MM(y,e)):b=MM([f],e);const x=Zu.select(f,b)[0]||b.firstChild;bx(n.styles,(F,Y)=>{const J=c(F);J&&Zu.setStyle(x,Y,J)}),bx(n.attributes,(F,Y)=>{const J=c(F);J&&Zu.setAttrib(x,Y,J)}),bx(n.classes,F=>{const Y=c(F);Zu.hasClass(x,Y)||Zu.addClass(x,Y)}),e.dispatch("PreviewFormats"),Zu.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const R=u("fontSize"),P=/px$/.test(R)?parseInt(R,10):0;return bx(r.split(" "),F=>{let Y=u(F,x);if(!(F==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Y)&&(Y=u(F),n1(Y).toLowerCase()==="#ffffff"))&&!(F==="color"&&n1(Y).toLowerCase()==="#000000")){if(F==="font-size"&&/em|%$/.test(Y)){if(P===0)return;Y=parseFloat(Y)/(/%$/.test(Y)?100:1)*P+"px"}F==="border"&&Y&&(o+="padding:0 2px;"),o+=F+":"+Y+";"}}),e.dispatch("AfterPreviewFormats"),Zu.remove(b),o},ZF=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},NM=e=>{const n=VF(e),o=Ga({});return ZF(e),_I(e),xf(e)||VI(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{nF(e,r,c,u)},remove:(r,c,u,f)=>{oF(e,r,c,u,f)},toggle:(r,c,u)=>{sF(e,r,c,u)},match:(r,c,u,f)=>TC(e,r,c,u,f),closest:r=>rM(e,r),matchAll:(r,c)=>oM(e,r,c),matchNode:(r,c,u,f)=>sM(e,r,c,u,f),canApply:r=>tF(e,r),formatChanged:(r,c,u,f)=>rF(e,o,r,c,u,f),getCssText:Le(WF,e)}},vx=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},EA=(e,n,o)=>{const r=Ga(!1),c=y=>{xC(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;vx(x)||(JR(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;vx(x)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const x=y.keyCode;y.isDefaultPrevented()||((x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!cx(ax(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(y);return}const R=y.ctrlKey&&!y.altKey||y.metaKey;(x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!R&&(n.beforeChange(),xC(n,!0,o),n.add({},y),r.set(!0))}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},BM=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},PM=e=>{const n=Ym(),o=Ga(0),r=Ga(0),c={data:[],typing:!1,beforeChange:()=>{qL(e,o,n)},add:(u,f)=>KL(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=ax(e);u.bookmark=Ba(e.selection),e.dispatch("change",{level:u,lastLevel:Lo(c.data,r.get()).getOrUndefined()})},undo:()=>dx(e,c,o,r),redo:()=>YL(e,r,c.data),clear:()=>{XL(e,c,r)},reset:()=>{nM(e,c)},hasUndo:()=>fA(e,c,r),hasRedo:()=>JL(e,c,r),transact:u=>QL(e,c,o,u),ignore:u=>{G9(e,o,u)},extra:(u,f)=>{eF(e,c,r,u,f)}};return xf(e)||EA(e,c,o),BM(e),c},jF=[9,27,Nt.HOME,Nt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Nt.DOWN,Nt.UP,Nt.LEFT,Nt.RIGHT].concat(Ao.browser.isFirefox()?[224]:[]),_A="data-mce-placeholder",AA=e=>e.type==="keydown"||e.type==="keyup",yx=e=>{const n=e.keyCode;return n===Nt.BACKSPACE||n===Nt.DELETE},$M=e=>{if(AA(e)){const n=e.keyCode;return!yx(e)&&(Nt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||on(jF,n))}else return!1},IM=e=>AA(e)&&!(yx(e)||e.type==="keyup"&&e.keyCode===229),OA=(e,n,o)=>{if(jr(re.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},GF=e=>{var n;const o=e.dom,r=si(e),c=(n=Ak(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if($M(f))return;const y=e.getBody(),x=IM(f)?!1:OA(o,y,r);(o.getAttrib(y,_A)!==""!==x||b)&&(o.setAttrib(y,_A,x?c:null),o.setAttrib(y,"aria-placeholder",x?c:null),ou(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};za(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>bl.setEditorTimeout(e,()=>u(b)))})},qF=(e,n)=>({block:e,position:n}),kf=(e,n)=>({from:e,to:n}),au=(e,n)=>{const o=re.fromDom(e),r=re.fromDom(n.container());return Tr(o,r).map(c=>qF(c,n))},Cx=e=>!zo(e.from.block,e.to.block),DA=(e,n)=>bi(n,c=>Ma(c)||Bc(c.dom),c=>zo(c,e)).filter(ps).getOr(e),wx=(e,n)=>{const o=re.fromDom(e);return zo(DA(o,n.from.block),DA(o,n.to.block))},LM=e=>Ts(e.from.block.dom)===!1&&Ts(e.to.block.dom)===!1,FM=e=>{const n=o=>jc(o)||ah(o.dom);return n(e.from.block)&&n(e.to.block)},HM=(e,n,o)=>pr(o.position.getNode())&&!jr(o.block)?vd(!1,o.block.dom).bind(r=>r.isEqual(o.position)?ri(n,e,r).bind(c=>au(e,c)):$.some(o)).getOr(o):o,VM=(e,n,o)=>{const r=au(e,Pe.fromRangeStart(o)),c=r.bind(u=>ri(n,e,u.position).bind(f=>au(e,f).map(b=>HM(e,n,b))));return Pr(r,c,kf).filter(u=>Cx(u)&&wx(e,u)&&LM(u)&&FM(u))},zM=(e,n,o)=>o.collapsed?VM(e,n,o):$.none(),UM=e=>{const n=Ur(e);return Is(n,Zr).fold(je(n),o=>n.slice(0,o))},MC=e=>{const n=UM(e);return Be(n,Uo),n},Sx=(e,n)=>{const o=wf(n,e);return jn(o.reverse(),r=>jr(r)).each(Uo)},KF=e=>be(Rm(e),n=>!jr(n)).length===0,YF=(e,n,o,r)=>{if(jr(o))return na(o),hl(o.dom);KF(r)&&jr(n)&&ho(r,re.fromTag("br"));const c=ai(o.dom,Pe.before(r.dom));return Be(MC(n),u=>{ho(r,u)}),Sx(e,n),c},XF=(e,n,o)=>{if(jr(o))return Uo(o),jr(n)&&na(n),hl(n.dom);const r=yd(o.dom);return Be(MC(n),c=>{Ar(o,c)}),Sx(e,n),r},JF=(e,n)=>{const o=wf(n,e);return $.from(o[o.length-1])},WM=(e,n)=>Aa(n,e)?JF(n,e):$.none(),ZM=(e,n)=>{vd(e,n.dom).bind(o=>$.from(o.getNode())).map(re.fromDom).filter(Xi).each(Uo)},jM=(e,n,o)=>(ZM(!0,n),ZM(!1,o),WM(n,o).fold(Le(XF,e,n,o),Le(YF,e,n,o))),xx=(e,n,o,r)=>n?jM(e,r,o):jM(e,o,r),RA=(e,n)=>{const o=re.fromDom(e.getBody());return zM(o.dom,n,e.selection.getRng()).map(c=>()=>{xx(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},QF=(e,n)=>{const o=n.getRng();return Pr(Tr(e,re.fromDom(o.startContainer)),Tr(e,re.fromDom(o.endContainer)),(r,c)=>zo(r,c)?$.none():$.some(()=>{o.deleteContents(),xx(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr($.none())},GM=(e,n)=>{const o=re.fromDom(n),r=Le(zo,e);return Im(o,Ma,r).isSome()},e6=(e,n)=>GM(e,n.startContainer)||GM(e,n.endContainer),t6=(e,n)=>{const o=ai(e.dom,Pe.fromRangeStart(n)).isNone(),r=Jc(e.dom,Pe.fromRangeEnd(n)).isNone();return!e6(e,n)&&o&&r},n6=e=>$.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),o6=e=>{const n=re.fromDom(e.getBody()),o=e.selection.getRng();return t6(n,o)?n6(e):QF(n,e.selection)},t0=(e,n)=>e.selection.isCollapsed()?$.none():o6(e),bm=(e,n,o,r,c)=>$.from(n._selectionOverrides.showCaret(e,o,r,c)),s6=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},NC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?$.none():$.some(s6(n)),r6=(e,n,o)=>{const r=tv(1,e.getBody(),n),c=Pe.fromRangeStart(r),u=c.getNode();if(Gp(u))return bm(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Gp(f))return bm(1,e,f,!1,!1);const b=Yh(e.dom.getRoot(),c.getNode());return Gp(b)?bm(1,e,b,!1,o):$.none()},MA=(e,n,o)=>n.collapsed?r6(e,n,o).getOr(n):n,qM=e=>qh(e)||Ov(e),a6=e=>Kh(e)||Ky(e),c6=(e,n)=>{et(n)&&n.data.length===0&&e.remove(n)},Tx=(e,n,o,r,c,u)=>{bm(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),c6(e.dom,o)},l6=(e,n)=>{const o=e.selection.getRng();if(!et(o.commonAncestorContainer))return $.none();const r=n?dc.Forwards:dc.Backwards,c=cm(e.getBody()),u=Le(Dw,n?c.next:c.prev),f=n?qM:a6,b=Kp(r,e.getBody(),o),y=u(b),x=y&&Dr(n,y);if(!x||!lf(b,x))return $.none();if(f(x))return $.some(()=>Tx(e,o,b.getNode(),r,n,x));const R=u(x);return R&&f(R)&&lf(x,R)?$.some(()=>Tx(e,o,b.getNode(),r,n,R)):$.none()},NA=(e,n)=>l6(e,n),BA=(e,n)=>{const o=e.getBody();return n?hl(o).filter(qh):yd(o).filter(Kh)},PA=e=>{const n=e.selection.getRng();return!n.collapsed&&(BA(e,!0).exists(o=>o.isEqual(Pe.fromRangeStart(n)))||BA(e,!1).exists(o=>o.isEqual(Pe.fromRangeEnd(n))))},i6=e=>ge(e)&&(Ma(re.fromDom(e))||Dl(re.fromDom(e))),cu=tu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),u6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return _t(o)&&o.getAttribute("data-mce-caret")===r},kx=(e,n,o,r)=>{const c=u=>ql(re.fromDom(u))&&!Pu(o,r,e);return Ow(!n,o).fold(()=>Ow(n,r).fold(rn,c),c)},BC=(e,n,o,r)=>{const c=r.getNode(!n);return Tr(re.fromDom(e),re.fromDom(o.getNode())).map(u=>jr(u)?cu.remove(u.dom):cu.moveToElement(c)).orThunk(()=>$.some(cu.moveToElement(c)))},KM=(e,n,o)=>ri(n,e,o).bind(r=>i6(r.getNode())||kx(e,n,o,r)?$.none():n&&Ts(r.getNode())||!n&&Ts(r.getNode(!0))?BC(e,n,o,r):n&&Kh(o)||!n&&qh(o)?$.some(cu.moveToPosition(r)):$.none()),d6=(e,n)=>At(n)?$.none():e&&Ts(n.nextSibling)?$.some(cu.moveToElement(n.nextSibling)):!e&&Ts(n.previousSibling)?$.some(cu.moveToElement(n.previousSibling)):$.none(),Ex=(e,n,o)=>o.fold(r=>$.some(cu.remove(r)),r=>$.some(cu.moveToElement(r)),r=>Pu(n,r,e)?$.none():$.some(cu.moveToPosition(r))),m6=(e,n,o)=>u6(n,o)?d6(n,o.getNode(!n)).orThunk(()=>KM(e,n,o)):KM(e,n,o).bind(r=>Ex(e,o,r)),f6=(e,n,o)=>{const r=tv(n?1:-1,e,o),c=Pe.fromRangeStart(r),u=re.fromDom(e);return!n&&Kh(c)?$.some(cu.remove(c.getNode(!0))):n&&qh(c)?$.some(cu.remove(c.getNode())):!n&&qh(c)&&UE(u,c)?M5(u,c).map(f=>cu.remove(f.getNode())):n&&Kh(c)&&H3(u,c)?Tn(u,c).map(f=>cu.remove(f.getNode())):m6(e,n,c)},g6=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),zu(e,n,re.fromDom(o)),!0),h6=(e,n)=>o=>{const r=n?Pe.before(o):Pe.after(o);return e.selection.setRng(r.toRange()),!0},p6=e=>n=>(e.selection.setRng(n.toRange()),!0),YM=(e,n)=>$.from(Yh(e.getBody(),n)),b6=(e,n)=>{const o=e.selection.getNode();return YM(e,o).filter(Ts).fold(()=>f6(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(g6(e,n),h6(e,n),p6(e))),()=>$.some(bt))},v6=e=>{Be(Fo(e,".mce-offscreen-selection"),Uo)},y6=(e,n)=>{const o=e.selection.getNode();return Ts(o)&&!ku(o)?YM(e,o.parentNode).filter(Ts).fold(()=>$.some(()=>{v6(re.fromDom(e.getBody())),zu(e,n,re.fromDom(e.selection.getNode())),Mv(e)}),()=>$.some(bt)):PA(e)?$.some(()=>{Vs(e,e.selection.getRng(),re.fromDom(e.getBody()))}):$.none()},XM=e=>{const n=e.dom,o=e.selection,r=Yh(e.getBody(),o.getNode());if(Bc(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(Pe.before(c).toRange())}return!0},$A=(e,n)=>e.selection.isCollapsed()?b6(e,n):y6(e,n),X9=(e,n)=>{const o=Pe.fromRangeStart(e.selection.getRng());return ri(n,e.getBody(),o).filter(r=>n?an(r):P3(r)).bind(r=>Qb(n?0:-1,r)).map(r=>()=>e.selection.select(r))},lu=(e,n)=>e.selection.isCollapsed()?X9(e,n):$.none(),sp=et,IA=e=>sp(e)&&e.data[0]===Hs,LA=e=>sp(e)&&e.data[e.data.length-1]===Hs,JM=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Hs)},QM=e=>{var n;if(sp(e.previousSibling))return LA(e.previousSibling)||e.previousSibling.appendData(Hs),e.previousSibling;if(sp(e))return IA(e)||e.insertData(0,Hs),e;{const o=JM(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},C6=e=>{var n,o;if(sp(e.nextSibling))return IA(e.nextSibling)||e.nextSibling.insertData(0,Hs),e.nextSibling;if(sp(e))return LA(e)||e.appendData(Hs),e;{const r=JM(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},PC=(e,n)=>e?QM(n):C6(n),w6=Le(PC,!0),S6=Le(PC,!1),eN=(e,n)=>et(e.container())?PC(n,e.container()):PC(n,e.getNode()),I1=(e,n)=>{const o=n.get();return o&&e.container()===o&&L(o)},_x=(e,n)=>n.fold(o=>{hd(e.get());const r=w6(o);return e.set(r),$.some(Pe(r,r.length-1))},o=>hl(o).map(r=>{if(I1(r,e)){const c=e.get();return Pe(c,1)}else{hd(e.get());const c=eN(r,!0);return e.set(c),Pe(c,1)}}),o=>yd(o).map(r=>{if(I1(r,e)){const c=e.get();return Pe(c,c.length-1)}else{hd(e.get());const c=eN(r,!1);return e.set(c),Pe(c,c.length-1)}}),o=>{hd(e.get());const r=S6(o);return e.set(r),$.some(Pe(r,1))}),FA=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return $.none()},vl=tu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Ax=(e,n)=>{const o=cf(n,e);return o||e},x6=(e,n,o)=>{const r=nD(o),c=Ax(n,r.container());return xg(e,c,r).fold(()=>Jc(c,r).bind(Le(xg,e,c)).map(u=>vl.before(u)),$.none)},T6=(e,n)=>ug(e,n)===null,tN=(e,n,o)=>xg(e,n,o).filter(Le(T6,n)),J9=(e,n,o)=>{const r=oD(o);return tN(e,n,r).bind(c=>ai(c,r).isNone()?$.some(vl.start(c)):$.none())},Q9=(e,n,o)=>{const r=nD(o);return tN(e,n,r).bind(c=>Jc(c,r).isNone()?$.some(vl.end(c)):$.none())},eU=(e,n,o)=>{const r=oD(o),c=Ax(n,r.container());return xg(e,c,r).fold(()=>ai(c,r).bind(Le(xg,e,c)).map(u=>vl.after(u)),$.none)},ju=e=>!tI(HA(e)),Ef=(e,n,o)=>FA([x6,J9,Q9,eU],[e,n,o]).filter(ju),HA=e=>e.fold(Eo,Eo,Eo,Eo),VA=e=>e.fold(je("before"),je("start"),je("end"),je("after")),n0=e=>e.fold(vl.before,vl.before,vl.after,vl.after),nN=e=>e.fold(vl.start,vl.start,vl.end,vl.end),tU=(e,n)=>VA(e)===VA(n)&&HA(e)===HA(n),nU=(e,n,o,r,c,u)=>Pr(xg(n,o,r),xg(n,o,c),(f,b)=>f!==b&&eD(o,f,b)?vl.after(e?f:b):u).getOr(u),Gu=(e,n)=>e.fold(We,o=>!tU(o,n)),k6=(e,n,o,r,c)=>{const u=Dr(e,c);return ri(e,o,u).map(Le(Dr,e)).fold(()=>r.map(n0),y=>Ef(n,o,y).map(Le(nU,e,n,o,u,y)).filter(Le(Gu,r))).filter(ju)},E6=(e,n)=>e?n.fold(gn($.some,vl.start),$.none,gn($.some,vl.after),$.none):n.fold($.none,gn($.some,vl.before),$.none,gn($.some,vl.end)),_6=(e,n,o,r)=>{const c=Dr(e,r),u=Ef(n,o,c);return Ef(n,o,c).bind(Le(E6,e)).orThunk(()=>k6(e,n,o,u,r))},A6=e=>X(e.selection.getSel().modify),oN=(e,n,o)=>{const r=e?1:-1;return n.setRng(Pe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},O6=(e,n)=>{const o=n.selection.getRng(),r=e?Pe.fromRangeEnd(o):Pe.fromRangeStart(o);return A6(n)?e&&tt(r)?oN(!0,n.selection,r):!e&&Tt(r)?oN(!1,n.selection,r):!1:!1};var ui;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(ui||(ui={}));const Ox=(e,n)=>e===dc.Backwards?er(n):n,D6=(e,n,o)=>e===dc.Forwards?n.next(o):n.prev(o),R6=(e,n,o,r)=>pr(r.getNode(n===dc.Forwards))?ui.Br:Pu(o,r)===!1?ui.Block:ui.Wrap,Dx=(e,n,o,r)=>{const c=cm(o);let u=r;const f=[];for(;u;){const b=D6(n,c,u);if(!b)break;if(pr(b.getNode(!1)))return n===dc.Forwards?{positions:Ox(n,f).concat([b]),breakType:ui.Br,breakAt:$.some(b)}:{positions:Ox(n,f),breakType:ui.Br,breakAt:$.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=R6(o,n,u,b);return{positions:Ox(n,f),breakType:y,breakAt:$.some(b)}}f.push(b),u=b}return{positions:Ox(n,f),breakType:ui.Eol,breakAt:$.none()}},Rx=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===dc.Backwards?u.concat(c):[c].concat(u)}).getOr([]),Mx=(e,n)=>Mt(e,(o,r)=>o.fold(()=>$.some(r),c=>Pr(Jn(c.getClientRects()),Jn(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),$.none()),$C=(e,n)=>Jn(n.getClientRects()).bind(o=>Mx(e,o.left)),o0=Le(Dx,Pe.isAbove,-1),IC=Le(Dx,Pe.isBelow,1),s0=Le(Rx,-1,o0),sN=Le(Rx,1,IC),M6=(e,n)=>o0(e,n).breakAt.isNone(),N6=(e,n)=>IC(e,n).breakAt.isNone(),B6=e=>hl(e).map(n=>[n].concat(IC(e,n).positions)).getOr([]),P6=e=>yd(e).map(n=>o0(e,n).positions.concat(n)).getOr([]),$6=(e,n)=>$C(s0(e,n),n),I6=(e,n)=>$C(sN(e,n),n),rN=Ts,aN=(e,n)=>Math.abs(e.left-n),zA=(e,n)=>Math.abs(e.right-n),cN=e=>fr(e,"node"),LC=(e,n)=>De(e,(o,r)=>{const c=Math.min(aN(o,n),zA(o,n)),u=Math.min(aN(r,n),zA(r,n));return u===c&&cN(r)&&rN(r.node)||u<c?r:o}),lN=e=>{const n=o=>Xt(o,r=>{const c=Jf(r);return c.node=e,c});if(_t(e))return n(e.getClientRects());if(et(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Nx=e=>br(e,lN);var _f;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(_f||(_f={}));const iN=(e,n,o,r)=>{let c=r;for(;c=rm(c,e,va,n);)if(o(c))return},Bx=(e,n,o,r,c,u)=>{let f=0;const b=[],y=P=>{let F=Nx([P]);e===-1&&(F=F.reverse());for(let Y=0;Y<F.length;Y++){const J=F[Y];if(!o(J,x)){if(b.length>0&&n(J,jt(b))&&f++,J.line=f,c(J))return!0;b.push(J)}}return!1},x=jt(u.getClientRects());if(!x)return b;const R=u.getNode();return R&&(y(R),iN(e,r,y,R)),b},L6=(e,n)=>n.line>e,uN=(e,n)=>n.line===e,F6=Le(Bx,_f.Up,Mp,Np),H6=Le(Bx,_f.Down,Np,Mp),dN=e=>jt(e.getClientRects()),V6=(e,n,o,r)=>{const c=cm(n);let u,f,b,y;const x=[];let R=0;e===1?(u=c.next,f=Np,b=Mp,y=Pe.after(r)):(u=c.prev,f=Mp,b=Np,y=Pe.before(r));const P=dN(y);do{if(!y.isVisible())continue;const F=dN(y);if(b(F,P))continue;x.length>0&&f(F,jt(x))&&R++;const Y=Jf(F);if(Y.position=y,Y.line=R,o(Y))return x;x.push(Y)}while(y=u(y));return x},mN=e=>n=>L6(e,n),Px=e=>n=>uN(e,n),Dg=(e,n)=>{e.selection.setRng(n),ct(e,e.selection.getRng())},UA=(e,n,o)=>$.some(MA(e,n,o)),L1=(e,n,o,r,c,u)=>{const f=n===dc.Forwards,b=cm(e.getBody()),y=Le(Dw,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const J=Bp(o);if(u(J))return bm(n,e,J,n===dc.Backwards,!1);if(PA(e)){const q=o.cloneRange();return q.collapse(n===dc.Backwards),$.from(q)}}const R=Kp(n,e.getBody(),o);if(x(R))return NC(e,R.getNode(!f));let P=y(R);const F=Pc(o);if(P)P=Dr(f,P);else return F?$.some(o):$.none();if(x(P))return bm(n,e,P.getNode(!f),f,!1);const Y=y(P);return Y&&x(Y)&&lf(P,Y)?bm(n,e,Y.getNode(!f),f,!1):F?UA(e,P.toRange(),!1):$.none()},$x=(e,n,o,r,c,u)=>{const f=Kp(n,e.getBody(),o),b=jt(f.getClientRects()),y=n===_f.Down,x=e.getBody();if(!b)return $.none();if(PA(e)){const ee=y?Pe.fromRangeEnd(o):Pe.fromRangeStart(o);return(y?I6:$6)(x,ee).orThunk(()=>$.from(ee)).map(de=>de.toRange())}const P=(y?H6:F6)(x,mN(1),f),F=be(P,Px(1)),Y=b.left,J=LC(F,Y);if(J&&u(J.node)){const ee=Math.abs(Y-J.left),me=Math.abs(Y-J.right);return bm(n,e,J.node,ee<me,!1)}let q;if(r(f)?q=f.getNode():c(f)?q=f.getNode(!0):q=Bp(o),q){const ee=V6(n,x,mN(1),q);let me=LC(be(ee,Px(1)),Y);if(me||(me=jt(be(ee,Px(0))),me))return UA(e,me.position.toRange(),!1)}return F.length===0?Ix(e,y).filter(y?c:r).map(ee=>MA(e,ee.toRange(),!1)):$.none()},Ix=(e,n)=>{const o=e.selection.getRng(),r=n?Pe.fromRangeEnd(o):Pe.fromRangeStart(o),c=Yk(r.container(),e.getBody());if(n){const u=IC(c,r);return Do(u.positions)}else{const u=o0(c,r);return Jn(u.positions)}},WA=(e,n,o)=>Ix(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),r0=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},fN=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},gN=(e,n,o)=>_x(n,o).map(r=>(r0(e,r),o)),z6=(e,n,o)=>{const r=Pe.fromRangeStart(e);if(e.collapsed)return r;{const c=Pe.fromRangeEnd(e);return o?ai(n,c).getOr(c):Jc(n,r).getOr(r)}},U6=(e,n,o)=>{const r=e.getBody(),c=z6(e.selection.getRng(),r,o),u=Le(y1,e);return _6(o,u,r,c).bind(b=>gN(e,n,b))},W6=(e,n,o)=>{const r=Xt(Fo(re.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=be(r,e),u=be(o,e);Be(yn(c,u),Le(fN,!1)),Be(yn(u,c),Le(fN,!0))},Z6=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Pe.fromRangeStart(e.selection.getRng());Pe.isTextPosition(r)&&!tD(r)&&(r0(e,Yb(o,r)),n.set(null))}},j6=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=be(r,e);Be(c,u=>{const f=Pe.fromRangeStart(n.selection.getRng());Ef(e,n.getBody(),f).bind(b=>gN(n,o,b))})}},ZA=(e,n,o)=>og(e)?U6(e,n,o).isSome():!1,hN=(e,n,o)=>og(n)?O6(e,n):!1,G6=e=>{const n=Ga(null),o=Le(y1,e);return e.on("NodeChange",r=>{og(e)&&(W6(o,e.dom,r.parents),Z6(e,n),j6(o,e,n,r.parents))}),n},iu=Le(hN,!0),q6=Le(hN,!1),a0=(e,n,o)=>{if(og(e)){const r=Ix(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?Pe.fromRangeEnd(c):Pe.fromRangeStart(c)});return Ef(Le(y1,e),e.getBody(),r).exists(c=>{const u=n0(c);return _x(o,u).exists(f=>(r0(e,f),!0))})}else return!1},pN=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},jA=e=>Pr(hl(e),yd(e),(n,o)=>{const r=Dr(!0,n),c=Dr(!1,o);return Jc(e,r).forall(u=>u.isEqual(c))}).getOr(!0),bN=(e,n)=>o=>_x(n,o).map(r=>()=>r0(e,r)),vN=(e,n,o,r)=>{const c=e.getBody(),u=Le(y1,e);e.undoManager.ignore(()=>{e.selection.setRng(pN(o,r)),rD(e),Ef(u,c,Pe.fromRangeStart(e.selection.getRng())).map(nN).bind(bN(e,n)).each($s)}),e.nodeChanged()},K6=(e,n)=>{const o=cf(n,e);return o||e},Y6=(e,n,o,r)=>{const c=K6(e.getBody(),r.container()),u=Le(y1,e),f=Ef(u,c,r);return f.bind(y=>o?y.fold(je($.some(nN(y))),$.none,je($.some(n0(y))),$.none):y.fold($.none,je($.some(n0(y))),$.none,je($.some(nN(y))))).map(bN(e,n)).getOrThunk(()=>{const y=Rh(o,c,r),x=y.bind(R=>Ef(u,c,R));return Pr(f,x,()=>xg(u,c,r).bind(R=>jA(R)?$.some(()=>{zu(e,o,re.fromDom(R))}):$.none())).getOrThunk(()=>x.bind(()=>y.map(R=>()=>{o?vN(e,n,r,R):vN(e,n,R,r)})))})},GA=(e,n,o)=>{if(e.selection.isCollapsed()&&og(e)){const r=Pe.fromRangeStart(e.selection.getRng());return Y6(e,n,o,r)}return $.none()},yN=(e,n)=>{const o=wf(n,e);return Is(o,Zr).fold(je(o),r=>o.slice(0,r))},X6=e=>wu(e)===1,J6=(e,n,o,r)=>{const c=Le(fC,n),u=Xt(be(r,c),f=>f.dom);if(u.length===0)zu(n,e,o);else{const f=WD(o.dom,u);n.selection.setRng(f.toRange())}},oU=(e,n)=>{const o=re.fromDom(e.getBody()),r=re.fromDom(e.selection.getStart()),c=be(yN(o,r),X6);return Do(c).bind(u=>{const f=Pe.fromRangeStart(e.selection.getRng());return I9(n,f,u.dom)&&!AI(u)?$.some(()=>J6(n,e,u,c)):$.none()})},qA=(e,n)=>e.selection.isCollapsed()?oU(e,n):$.none(),KA=(e,n,o)=>ge(o)?$.some(()=>{e._selectionOverrides.hideFakeCaret(),zu(e,n,re.fromDom(o))}):$.none(),CN=(e,n)=>{const o=n?Ov:Ky,r=n?dc.Forwards:dc.Backwards,c=Kp(r,e.getBody(),e.selection.getRng());return o(c)?KA(e,n,c.getNode(!n)):$.from(Dr(n,c)).filter(u=>o(u)&&lf(c,u)).bind(u=>KA(e,n,u.getNode(!n)))},wN=(e,n)=>{const o=e.selection.getNode();return qi(o)?KA(e,n,o):$.none()},SN=(e,n)=>e.selection.isCollapsed()?CN(e,n):wN(e,n),Q6=e=>bi(e,n=>Bc(n.dom)||Ts(n.dom)).exists(n=>Bc(n.dom)),YA=e=>_r(e??"").getOr(0),xN=(e,n)=>{const o=e||k0(n)?"margin":"padding",r=pe(n,"direction")==="rtl"?"-right":"-left";return o+r},XA=(e,n,o,r,c,u)=>{const f=xN(o,re.fromDom(u)),b=YA(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},Lx=(e,n)=>mo(n,o=>{const r=xN(iw(e),o),c=pn(o,r).map(YA).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),JA=e=>{const n=TN(e);return!e.mode.isReadOnly()&&(n.length>1||Lx(e,n))},QA=e=>Ho(e)||Dl(e),e8=e=>sc(e).exists(QA),TN=e=>be(Pf(e.selection.getSelectedBlocks()),n=>!QA(n)&&!e8(n)&&Q6(n)),Fx=(e,n)=>{var o,r;const{dom:c}=e,u=Hp(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=YA(u),y=iw(e);Be(TN(e),x=>{XA(c,n,y,b,f,x.dom)})},t8=e=>Fx(e,"indent"),kN=e=>Fx(e,"outdent"),EN=e=>{if(e.selection.isCollapsed()&&JA(e)){const n=e.dom,o=e.selection.getRng(),r=Pe.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&So(re.fromDom(c),r))return $.some(()=>kN(e))}return $.none()},_N=(e,n,o)=>Jr([EN,$A,NA,(r,c)=>GA(r,n,c),RA,DS,lu,SN,t0,qA],r=>r(e,o)),Ad=(e,n)=>{_N(e,n,!1).fold(()=>{rD(e),Mv(e)},$s)},AN=(e,n)=>{_N(e,n,!0).fold(()=>C1(e),$s)},ON=(e,n)=>{e.addCommand("delete",()=>{Ad(e,n)}),e.addCommand("forwardDelete",()=>{AN(e,n)})},n8=5,sU=400,o8=e=>e.touches===void 0||e.touches.length!==1?$.none():$.some(e.touches[0]),rU=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>n8||r>n8},s8=e=>{const n=Ym(),o=Ga(!1),r=Eb(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},sU);e.on("touchstart",c=>{o8(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),o8(c).each(u=>{n.on(f=>{rU(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},eO=(e,n)=>hn(e,n.nodeName),tO=(e,n)=>et(n)?!0:_t(n)?!eO(e.getBlockElements(),n)&&!mc(n)&&!Zf(e,n):!1,r8=(e,n,o)=>zt(Yy(re.fromDom(o),re.fromDom(n)),r=>eO(e,r.dom)),DN=(e,n)=>{if(et(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||eO(e,n.nextSibling)))return!0}return!1},RN=e=>e.dom.create(si(e),Fp(e)),a8=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,x=!1;const R=si(e);if(!u||!_t(u))return;const P=f.nodeName.toLowerCase();if(!r.isValidChild(P,R.toLowerCase())||r8(c,f,u))return;const F=o.getRng(),{startContainer:Y,startOffset:J,endContainer:q,endOffset:ee}=F,me=v1(e);let de=f.firstChild;for(;de;)if(_t(de)&&Xl(r,de),tO(r,de)){if(DN(c,de)){y=de,de=de.nextSibling,n.remove(y);continue}b||(b=RN(e),f.insertBefore(b,de),x=!0),y=de,de=de.nextSibling,b.appendChild(y)}else b=null,de=de.nextSibling;x&&me&&(F.setStart(Y,J),F.setEnd(q,ee),o.setRng(F),e.nodeChanged())},nO=(e,n,o)=>{const r=re.fromDom(RN(e)),c=Ce();Ar(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},oO=e=>{e.on("NodeChange",Le(a8,e))},sO=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,c8=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},l8=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],c8(e,c,Eh(e)));o.content=c}},Hx=e=>{const n="contenteditable",o=" "+Ge.trim(yw(e))+" ",r=" "+Ge.trim(Eh(e))+" ",c=sO(o),u=sO(r),f=om(e);f.length>0&&e.on("BeforeSetContent",b=>{l8(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const x=b[y];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const x=b[y];!c(x)&&!u(x)||(f.length>0&&x.attr("data-mce-content")?(x.name="#text",x.type=3,x.raw=!0,x.value=x.attr("data-mce-content")):x.attr(n,null))}})},i8=e=>Ff(re.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),MN=(e,n)=>{n.hasAttribute("data-mce-caret")&&(vs(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},u8=(e,n)=>{const o=i8(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),MN(e,o);return}ue(o)&&(MN(e,o),e.undoManager.add())}},rO=e=>{e.on("keyup compositionstart",Le(u8,e))},NN=Ts,d8=(e,n,o)=>L1(n,e,o,qh,Kh,NN),BN=(e,n,o)=>$x(n,e,o,u=>qh(u)||CS(u),u=>Kh(u)||$3(u),NN),m8=e=>{const n=e.dom.create(si(e));return n.innerHTML='<br data-mce-bogus="1">',n},PN=(e,n,o)=>{const r=cm(e.getBody()),c=Le(Dw,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Pe.fromRangeStart(o))){const b=re.fromDom(m8(e));n===1?qs(re.fromDom(u),b):ho(re.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},f8=(e,n)=>{const o=n?dc.Forwards:dc.Backwards,r=e.selection.getRng();return d8(o,e,r).orThunk(()=>(PN(e,o,r),$.none()))},g8=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return BN(o,e,r).orThunk(()=>(PN(e,o,r),$.none()))},$N=(e,n)=>f8(e,n).exists(o=>(Dg(e,o),!0)),IN=(e,n)=>g8(e,n).exists(o=>(Dg(e,o),!0)),Vx=(e,n)=>WA(e,n,n?Kh:qh),zx=(e,n)=>BA(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Dg(e,o),!0)),LN=e=>on(["figcaption"],Fs(e)),h8=(e,n)=>{const o=Le(zo,n);return bi(re.fromDom(e.container()),Zr,o).filter(LN)},p8=(e,n,o)=>n?N6(e.dom,o):M6(e.dom,o),b8=(e,n)=>{const o=re.fromDom(e.getBody()),r=Pe.fromRangeStart(e.selection.getRng());return h8(r,o).exists(()=>{if(p8(o,n,r)){const u=nO(e,o,n?Ar:Oa);return e.selection.setRng(u),!0}else return!1})},FN=(e,n)=>e.selection.isCollapsed()?b8(e,n):!1,HN={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},v8=e=>Xt(e,n=>({...HN,...n})),Ja=e=>Xt(e,n=>({...HN,...n})),VN=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,y8=(e,n)=>br(v8(e),o=>VN(o,n)?[o]:[]),C8=(e,n)=>br(Ja(e),o=>VN(o,n)?[o]:[]),bo=(e,...n)=>()=>e.apply(null,n),F1=(e,n)=>jn(y8(e,n),o=>o.action()),aO=(e,n)=>Jr(C8(e,n),o=>o.action()),Rg=(e,n)=>{const o=n?dc.Forwards:dc.Backwards,r=e.selection.getRng();return L1(e,o,r,Ov,Ky,qi).exists(c=>(Dg(e,c),!0))},Ux=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return $x(e,o,r,Ov,Ky,qi).exists(c=>(Dg(e,c),!0))},cO=(e,n)=>WA(e,n,n?Ky:Ov),Wx=tu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),H1={...Wx,none:e=>Wx.none(e)},UN=(e,n)=>FC(e,n,We),FC=(e,n,o)=>br(Ur(e),r=>ul(r,n)?o(r)?[r]:[]:FC(r,n,o)),Zx=(e,n,o=rn)=>{if(o(n))return $.none();if(on(e,Fs(n)))return $.some(n);const r=c=>ul(c,"table")||o(c);return xu(n,e.join(","),r)},HC=(e,n)=>Zx(["td","th"],e,n),VC=e=>UN(e,"th,td"),vm=(e,n)=>cd(e,"table",n),V1=(e,n,o,r,c=We)=>{const u=r===1;if(!u&&o<=0)return H1.first(e[0]);if(u&&o>=e.length-1)return H1.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?H1.middle(n,b):V1(e,n,f,r,c)}},lO=(e,n)=>vm(e,n).bind(o=>{const r=VC(o);return Is(r,u=>zo(e,u)).map(u=>({index:u,all:r}))}),WN=(e,n,o)=>lO(e,o).fold(()=>H1.none(e),c=>V1(c.all,e,c.index,1,n)),w8=(e,n,o)=>lO(e,o).fold(()=>H1.none(),c=>V1(c.all,e,c.index,-1,n)),ZN=e=>cd(e,"[contenteditable]"),jN=(e,n=!1)=>Zl(e)?e.dom.isContentEditable:ZN(e).fold(je(n),o=>S8(o)==="true"),S8=e=>e.dom.contentEditable,GN=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),x8=(e,n)=>br(n,o=>{const r=GN(Jf(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),T8=(e,n,o)=>Mt(e,(r,c)=>r.fold(()=>$.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return $.some(b<f?c:u)}),$.none()),qN=(e,n,o,r,c)=>{const u=Fo(re.fromDom(o),"td,th,caption").map(b=>b.dom),f=be(x8(e,u),b=>n(b,c));return T8(f,r,c).map(b=>b.cell)},k8=e=>e.bottom,E8=e=>e.top,_8=(e,n)=>e.y<n,A8=(e,n)=>e.y>n,O8=Le(qN,k8,_8),D8=Le(qN,E8,A8),R8=(e,n)=>Jn(n.getClientRects()).bind(o=>O8(e,o.left,o.top)).bind(o=>$C(P6(o),n)),M8=(e,n)=>Do(n.getClientRects()).bind(o=>D8(e,o.left,o.top)).bind(o=>$C(B6(o),n)),N8=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),B8=e=>e.breakType===ui.Wrap&&e.positions.length===0,KN=e=>e.breakType===ui.Br&&e.positions.length===1,iO=(e,n,o)=>{const r=e(n,o);return B8(r)||!pr(o.getNode())&&KN(r)?!N8(e,n,r):r.breakAt.isNone()},YN=Le(iO,o0),P8=Le(iO,IC),$8=(e,n,o)=>{const r=Pe.fromRangeStart(n);return vd(!e,o).exists(c=>c.isEqual(r))},I8=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return jp()&&$8(n,c,o)?(bm(u,e,o,!n,!1).each(f=>{Dg(e,f)}),!0):!1},L8=(e,n,o)=>R8(n,o).orThunk(()=>Jn(o.getClientRects()).bind(r=>Mx(s0(e,Pe.before(n)),r.left))).getOr(Pe.before(n)),XN=(e,n,o)=>M8(n,o).orThunk(()=>Jn(o.getClientRects()).bind(r=>Mx(sN(e,Pe.after(n)),r.left))).getOr(Pe.after(n)),JN=(e,n)=>{const o=n.getNode(e);return Da(o)?$.some(o):$.none()},QN=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?qs:ho,c=nO(n,re.fromDom(o),r);Dg(n,c)})},eB=(e,n,o)=>{const r=JN(!!n,o),c=n===!1;r.fold(()=>Dg(e,o.toRange()),u=>vd(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Dg(e,o.toRange()),f=>QN(n,e,u)))},tB=(e,n,o,r)=>{const c=e.selection.getRng(),u=Pe.fromRangeStart(c),f=e.getBody();if(!n&&YN(r,u)){const b=L8(f,o,u);return eB(e,n,b),!0}else if(n&&P8(r,u)){const b=XN(f,o,u);return eB(e,n,b),!0}else return!1},uO=(e,n,o)=>$.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>$.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),nB=(e,n)=>uO(e,n,I8),oB=(e,n)=>uO(e,n,tB),F8=e=>{const n=vf.exact(e,0,e,0);return lS(n)},dO=(e,n,o)=>o.fold($.none,$.none,(r,c)=>d5(c).map(u=>F8(u)),r=>(e.execCommand("mceTableInsertRowAfter"),sB(e,n,r))),sB=(e,n,o)=>dO(e,n,WN(o,jN)),H8=(e,n,o)=>dO(e,n,w8(o,jN)),mO=(e,n)=>{const o=["table","li","dl"],r=re.fromDom(e.getBody()),c=b=>{const y=Fs(b);return zo(b,r)||on(o,y)},u=e.selection.getRng(),f=re.fromDom(n?u.endContainer:u.startContainer);return HC(f,c).map(b=>(vm(b,c).each(R=>{e.model.table.clearSelectedCells(R.dom)}),e.selection.collapse(!n),(n?sB:H8)(e,c,b).each(R=>{e.selection.setRng(R)}),!0)).getOr(!1)},V8=(e,n,o)=>{const r=Ao.os.isMacOS()||Ao.os.isiOS();F1([{keyCode:Nt.RIGHT,action:bo($N,e,!0)},{keyCode:Nt.LEFT,action:bo($N,e,!1)},{keyCode:Nt.UP,action:bo(IN,e,!1)},{keyCode:Nt.DOWN,action:bo(IN,e,!0)},...r?[{keyCode:Nt.UP,action:bo(zx,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Nt.DOWN,action:bo(zx,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Nt.RIGHT,action:bo(nB,e,!0)},{keyCode:Nt.LEFT,action:bo(nB,e,!1)},{keyCode:Nt.UP,action:bo(oB,e,!1)},{keyCode:Nt.DOWN,action:bo(oB,e,!0)},{keyCode:Nt.RIGHT,action:bo(Rg,e,!0)},{keyCode:Nt.LEFT,action:bo(Rg,e,!1)},{keyCode:Nt.UP,action:bo(Ux,e,!1)},{keyCode:Nt.DOWN,action:bo(Ux,e,!0)},{keyCode:Nt.RIGHT,action:bo(ZA,e,n,!0)},{keyCode:Nt.LEFT,action:bo(ZA,e,n,!1)},{keyCode:Nt.RIGHT,ctrlKey:!r,altKey:r,action:bo(iu,e,n)},{keyCode:Nt.LEFT,ctrlKey:!r,altKey:r,action:bo(q6,e,n)},{keyCode:Nt.UP,action:bo(FN,e,!1)},{keyCode:Nt.DOWN,action:bo(FN,e,!0)}],o).each(c=>{o.preventDefault()})},z8=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||V8(e,n,o)})},Od=(e,n)=>({container:e,offset:n}),jx=Ms.DOM,Gx=e=>n=>e===n?-1:0,U8=e=>n=>e.isBlock(n)||on(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",qx=(e,n,o)=>{if(et(e)&&n>=0)return $.some(Od(e,n));{const r=Jm(jx);return $.from(r.backwards(e,n,Gx(e),o)).map(c=>Od(c.container,c.container.data.length))}},rB=(e,n,o)=>{if(et(e)&&n>=e.length)return $.some(Od(e,n));{const r=Jm(jx);return $.from(r.forwards(e,n,Gx(e),o)).map(c=>Od(c.container,0))}},fO=(e,n,o)=>{if(!et(e))return $.none();const r=e.data;if(n>=0&&n<=r.length)return $.some(Od(e,n));{const c=Jm(jx);return $.from(c.backwards(e,n,Gx(e),o)).bind(u=>{const f=u.container.data;return fO(u.container,n+f.length,o)})}},aB=(e,n,o)=>{if(!et(e))return $.none();const r=e.data;if(n<=r.length)return $.some(Od(e,n));{const c=Jm(jx);return $.from(c.forwards(e,n,Gx(e),o)).bind(u=>aB(u.container,n-r.length,o))}},gO=(e,n,o,r,c)=>{const u=Jm(e,U8(e));return $.from(u.backwards(n,o,r,c))},W8=e=>e.collapsed&&et(e.startContainer),cB=e=>oa(e.toString().replace(/\u00A0/g," ")),lB=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,hO=(e,n)=>e.substring(n.length),Z8=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(lB(u))return $.none();if(c===u&&ms(e,o,r,n))break}return $.some(r)},aU=(e,n,o,r=0)=>{if(!W8(n))return $.none();const c={text:"",offset:0},u=(b,y,x)=>(c.text=x+c.text,c.offset+=y,Z8(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return gO(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return $.none();const x=cB(y);return x.lastIndexOf(o)!==0||hO(x,o).length<r?$.none():$.some({text:hO(x,o),range:y,trigger:o})})},iB=(e,n,o,r=0)=>h5(re.fromDom(n.startContainer)).fold(()=>aU(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=cB(u);return $.some({range:u,text:hO(f,o),trigger:o})}),Kx=e=>e.nodeType===Hi,uB=e=>e.nodeType===rr,pO=e=>{if(Kx(e))return Od(e,e.data.length);{const n=e.childNodes;return n.length>0?pO(n[n.length-1]):Od(e,n.length)}},dB=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?dB(o[n],0):o.length>0&&uB(e)&&o.length===n?pO(o[o.length-1]):Od(e,n)},mB=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return gO(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!lB(u)}).isSome()},fB=e=>n=>{const o=dB(n.startContainer,n.startOffset);return!mB(e,o)},j8=(e,n,o)=>Jr(o.triggers,r=>iB(e,n,r)),G8=(e,n)=>{const o=n(),r=e.selection.getRng();return j8(e.dom,r,o).bind(c=>gB(e,n,c))},gB=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=be(u.lookupByTrigger(o.trigger),R=>o.text.length>=R.minChars&&R.matches.getOrThunk(()=>fB(e.dom))(o.range,b,o.text));if(y.length===0)return $.none();const x=Promise.all(Xt(y,R=>R.fetch(o.text,R.maxResults,r).then(F=>({matchText:o.text,items:F,columns:R.columns,onAction:R.onAction,highlightOn:R.highlightOn}))));return $.some({lookupData:x,context:o})};var Dd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Dd||(Dd={}));const bO=(e,n,o)=>e.stype===Dd.Error?n(e.serror):o(e.svalue),vO=e=>{const n=[],o=[];return Be(e,r=>{bO(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},q8=(e,n)=>e.stype===Dd.Error?{stype:Dd.Error,serror:n(e.serror)}:e,K8=(e,n)=>e.stype===Dd.Value?{stype:Dd.Value,svalue:n(e.svalue)}:e,Y8=(e,n)=>e.stype===Dd.Value?n(e.svalue):e,hB=(e,n)=>e.stype===Dd.Error?n(e.serror):e,pB=e=>({stype:Dd.Value,svalue:e}),bB=e=>({stype:Dd.Error,serror:e}),zc={fromResult:e=>e.fold(bB,pB),toResult:e=>bO(e,Xc.error,Xc.value),svalue:pB,partition:vO,serror:bB,bind:Y8,bindError:hB,map:K8,mapError:q8,fold:bO},Ia=e=>Pt(e)&&Dn(e).length>100?" removed due to size":JSON.stringify(e,null,2),Af=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:je("... (only showing first ten failures)")}]):e;return Xt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Yx=(e,n)=>zc.serror([{path:e,getErrorInfo:n}]),iU=(e,n,o)=>Yx(e,()=>'Could not find valid *required* value for "'+n+'" in '+Ia(o)),X8=(e,n)=>Yx(e,()=>'Choice schema did not contain choice key: "'+n+'"'),J8=(e,n,o)=>Yx(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Ia(n)),Q8=(e,n)=>Yx(e,je(n)),e7=(e,n,o,r)=>No(o,r).fold(()=>J8(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),vB=(e,n)=>({extract:(c,u)=>No(u,e).fold(()=>X8(c,e),b=>e7(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Dn(n)}),c0=(e,n)=>n,uU=(e,n)=>Ps(e)&&Ps(n)?Xx(e,n):n,yB=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)hn(c,u)&&(o[u]=e(o[u],c[u]))}return o},Xx=yB(uU),ym=yB(c0),CB=()=>({tag:"required",process:{}}),t7=e=>({tag:"defaultedThunk",process:e}),yO=e=>t7(je(e)),n7=()=>({tag:"option",process:{}}),wB=(e,n)=>e.length>0?zc.svalue(Xx(n,ym.apply(void 0,e))):zc.svalue(n),CO=e=>gn(zc.serror,cs)(e),o7={consolidateObj:(e,n)=>{const o=zc.partition(e);return o.errors.length>0?CO(o.errors):wB(o.values,n)},consolidateArr:e=>{const n=zc.partition(e);return n.errors.length>0?CO(n.errors):zc.svalue(n.values)}},s7=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),r7=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),xB=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},Jx=e=>{const n=(r,c)=>zc.bindError(e(c),u=>Q8(r,u)),o=je("val");return{extract:n,toString:o}},TB=Jx(zc.svalue),a7=(e,n,o,r)=>No(n,o).fold(()=>iU(e,o,n),r),wO=(e,n,o,r)=>{const c=No(e,n).getOrThunk(()=>o(e));return r(c)},c7=(e,n,o)=>o(No(e,n)),l7=(e,n,o,r)=>{const c=No(e,n).map(u=>u===!0?o(e):u);return r(c)},i7=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>zc.svalue($.none()),y=>{const x=c.extract(n.concat([r]),y);return zc.map(x,$.some)});switch(e.tag){case"required":return a7(n,o,r,u);case"defaultedThunk":return wO(o,r,e.process,u);case"option":return c7(o,r,f);case"defaultedOptionThunk":return l7(o,r,e.process,f);case"mergeWithThunk":return wO(o,r,je({}),b=>{const y=Xx(e.process(o),b);return u(y)})}},u7=(e,n,o)=>{const r={},c=[];for(const u of o)xB(u,(f,b,y,x)=>{const R=i7(y,e,n,f,x);zc.fold(R,P=>{c.push(...P)},P=>{r[b]=P})},(f,b)=>{r[f]=b(n)});return c.length>0?zc.serror(c):zc.svalue(r)},Qx=e=>({extract:(r,c)=>u7(r,c,e),toString:()=>`obj{
`+Xt(e,c=>xB(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),eT=e=>({extract:(r,c)=>{const u=Xt(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return o7.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),kB=e=>Jx(n=>e(n).fold(zc.serror,zc.svalue)),d7=(e,n,o)=>{const r=n.extract([e],o);return zc.mapError(r,c=>({input:o,errors:c}))},m7=(e,n,o)=>zc.toResult(d7(e,n,o)),SO=e=>`Errors: 
`+Af(e.errors).join(`
`)+`

Input object: `+Ia(e.input),xO=(e,n)=>vB(e,Zt(n,Qx)),mU=je(TB),TO=(e,n)=>Jx(o=>{const r=typeof o;return e(o)?zc.svalue(o):zc.serror(`Expected type: ${n} but got: ${r}`)}),fU=TO(An,"number"),tT=TO(oe,"string"),gU=TO(cn,"boolean"),kO=TO(X,"function"),zC=s7,f7=r7,g7=e=>kB(n=>on(e,n)?Xc.value(n):Xc.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),Qc=(e,n)=>zC(e,e,CB(),n),nT=e=>Qc(e,tT),Cm=e=>Qc(e,kO),EB=(e,n)=>zC(e,e,CB(),eT(n)),oT=(e,n)=>zC(e,e,n7(),n),sT=e=>oT(e,tT),EO=e=>oT(e,kO),_O=(e,n)=>zC(e,e,yO(n),mU()),z1=(e,n,o)=>zC(e,e,yO(n),o),AO=(e,n)=>z1(e,n,fU),h7=(e,n)=>z1(e,n,tT),_B=(e,n,o)=>z1(e,n,g7(o)),OO=(e,n)=>z1(e,n,gU),DO=(e,n)=>z1(e,n,kO),p7=(e,n,o)=>z1(e,n,eT(o)),AB=nT("type"),b7=Cm("fetch"),RO=Cm("onAction"),v7=DO("onSetup",()=>bt),y7=sT("text"),C7=sT("icon"),w7=sT("tooltip"),OB=sT("label"),S7=OO("active",!1),x7=OO("enabled",!0),T7=OO("primary",!1),MO=e=>_O("columns",e),UC=e=>h7("type",e),k7=Qx([AB,nT("trigger"),AO("minChars",1),MO(1),AO("maxResults",10),EO("matches"),b7,RO,p7("highlightOn",[],tT)]),E7=e=>m7("Autocompleter",k7,{trigger:e.ch,...e}),U1=[x7,w7,C7,y7,v7],Of=[S7].concat(U1),W1=[DO("predicate",rn),_B("scope","node",["node","editor"]),_B("position","selection",["node","selection","line"])],rT=U1.concat([UC("contextformbutton"),T7,RO,f7("original",Eo)]),NO=Of.concat([UC("contextformbutton"),T7,RO,f7("original",Eo)]),BO=U1.concat([UC("contextformbutton")]),DB=Of.concat([UC("contextformtogglebutton")]),_7=xO("type",{contextformbutton:rT,contextformtogglebutton:NO});Qx([UC("contextform"),DO("initValue",je("")),OB,EB("commands",_7),oT("launch",xO("type",{contextformbutton:BO,contextformtogglebutton:DB}))].concat(W1));const RB=e=>{const n=e.ui.registry.getAll().popups,o=Zt(n,f=>E7(f).fold(b=>{throw new Error(SO(b))},Eo)),r=hs(nl(o,f=>f.trigger)),c=us(o);return{dataset:o,triggers:r,lookupByTrigger:f=>be(c,b=>b.trigger===f)}},MB=(e,n)=>{const o=Eb(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},A7=e=>{const n=Ym(),o=Ga(!1),r=n.isSet,c=()=>{r()&&(iF(e),Qw(e),o.set(!1),n.clear())},u=x=>{r()||(lF(e,x.range),n.set({trigger:x.trigger,matchLength:x.text.length}))},f=Qt(()=>RB(e)),b=x=>n.get().map(R=>iB(e.dom,e.selection.getRng(),R.trigger).bind(P=>gB(e,f,P,x))).getOrThunk(()=>G8(e,f)),y=x=>{b(x).fold(c,R=>{u(R.context),R.lookupData.then(P=>{n.get().map(F=>{const Y=R.context;F.trigger===Y.trigger&&(Y.text.length-F.matchLength>=10?c():(n.set({...F,matchLength:Y.text.length}),o.get()?Jw(e,{lookupData:P}):(o.set(!0),Py(e,{lookupData:P}))))})})})};e.addCommand("mceAutocompleterReload",(x,R)=>{const P=Pt(R)?R.fetchOptions:{};y(P)}),e.addCommand("mceAutocompleterClose",c),MB(e,{cancelIfNecessary:c,load:y})},NB=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:bt,inputType:o},f=Cb(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},PO=NB("input"),$O=NB("beforeinput"),O7=(e,n,o)=>{const r=o.keyCode===Nt.BACKSPACE?"deleteContentBackward":"deleteContentForward";aO([{keyCode:Nt.BACKSPACE,action:bo(EN,e)},{keyCode:Nt.BACKSPACE,action:bo($A,e,!1)},{keyCode:Nt.DELETE,action:bo($A,e,!0)},{keyCode:Nt.BACKSPACE,action:bo(NA,e,!1)},{keyCode:Nt.DELETE,action:bo(NA,e,!0)},{keyCode:Nt.BACKSPACE,action:bo(GA,e,n,!1)},{keyCode:Nt.DELETE,action:bo(GA,e,n,!0)},{keyCode:Nt.BACKSPACE,action:bo(DS,e,!1)},{keyCode:Nt.DELETE,action:bo(DS,e,!0)},{keyCode:Nt.BACKSPACE,action:bo(lu,e,!1)},{keyCode:Nt.DELETE,action:bo(lu,e,!0)},{keyCode:Nt.BACKSPACE,action:bo(SN,e,!1)},{keyCode:Nt.DELETE,action:bo(SN,e,!0)},{keyCode:Nt.BACKSPACE,action:bo(t0,e,!1)},{keyCode:Nt.DELETE,action:bo(t0,e,!0)},{keyCode:Nt.BACKSPACE,action:bo(RA,e,!1)},{keyCode:Nt.DELETE,action:bo(RA,e,!0)},{keyCode:Nt.BACKSPACE,action:bo(qA,e,!1)},{keyCode:Nt.DELETE,action:bo(qA,e,!0)}],o).each(c=>{o.preventDefault(),$O(e,r).isDefaultPrevented()||(c(),PO(e,r))})},D7=(e,n)=>{F1([{keyCode:Nt.BACKSPACE,action:bo(XM,e)},{keyCode:Nt.DELETE,action:bo(XM,e)}],n)},BB=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||O7(e,n,o)}),e.on("keyup",o=>{o.isDefaultPrevented()||D7(e,o)})},PB=e=>{for(;e;){if(_t(e)||et(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},aT=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=PB(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode($r),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Wr(n,n);let f=n,b;for(;b=u.current();){if(et(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else pr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),ct(e,c)},IO=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},$B=e=>$.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),R7=e=>$B(e).fold(je(""),n=>n.nodeName.toUpperCase()),hU=e=>$B(e).filter(n=>Dl(re.fromDom(n))).isSome(),pU=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,M7=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},IB=(e,n)=>{const o=e==null?void 0:e.parentNode;return ge(o)&&o.nodeName===n},N7=e=>ge(e)&&/^(OL|UL|LI)$/.test(e.nodeName),B7=e=>ge(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Rd=e=>N7(e)&&N7(e.parentNode),WC=e=>{const n=e.parentNode;return B7(n)?n:e},cT=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!_t(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},LB=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Rd(o)&&(c="LI");let y=n(c);if(cT(o,r,!0)&&cT(o,r,!1))if(IB(o,"LI")){const x=WC(o);u.insertAfter(y,x),M7(o)?u.remove(x):u.remove(o)}else u.replace(y,o);else if(cT(o,r,!0))IB(o,"LI")?(u.insertAfter(y,WC(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(cT(o,r,!1))u.insertAfter(y,WC(o)),u.remove(r);else{o=WC(o);const x=f.cloneRange();x.setStartAfter(r),x.setEndAfter(o);const R=x.extractContents();c==="LI"&&pU(R,"LI")?(y=R.firstChild,u.insertAfter(R,o)):(u.insertAfter(R,o),u.insertAfter(y,o)),u.remove(r)}aT(e,y)},P7=e=>{Be($m(re.fromDom(e),Cr),n=>{const o=n.dom;o.nodeValue=oa(o.data)})},$7=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},bU=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),Dc=e=>{e.innerHTML='<br data-mce-bogus="1">'},LO=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,FB=(e,n)=>ge(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true",I7=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;_t(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||bU(e,u))&&e.remove(u)},FO=(e,n,o)=>et(n)?e?o===1&&n.data.charAt(o-1)===Hs?0:o:o===n.data.length-1&&n.data.charAt(o)===Hs?n.data.length:o:o,L7=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,FO(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,FO(!1,e.endContainer,e.endOffset)),n},F7=e=>{let n=e;do et(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},H7=(e,n,o)=>{const r=e.dom;$.from(o.style).map(r.parseStyle).each(y=>{const R={...go(re.fromDom(n)),...y};r.setStyles(n,R)});const c=$.from(o.class).map(y=>y.split(/\s+/)),u=$.from(n.className).map(y=>be(y.split(/\s+/),x=>x!==""));Pr(c,u,(y,x)=>{const R=be(x,F=>!on(y,F)),P=[...y,...R];r.setAttrib(n,"class",P.join(" "))});const f=["style","class"],b=Jo(o,(y,x)=>!on(f,x));r.setAttribs(n,b)},ZC=(e,n)=>{if(si(e).toLowerCase()===n.tagName.toLowerCase()){const r=Fp(e);H7(e,n,r)}},V7=(e,n,o,r,c)=>{var u;const f=e.dom,b=(u=IO(f,r))!==null&&u!==void 0?u:f.getRoot();let y=f.getParent(r,f.isBlock);if(!y||!FB(f,y)){y=y||b;let x;if(y===e.getBody()||lb(y)?x=y.nodeName.toLowerCase():y.parentNode?x=y.parentNode.nodeName.toLowerCase():x="",!y.hasChildNodes()){const F=f.create(n);return ZC(e,F),y.appendChild(F),o.setStart(F,0),o.setEnd(F,0),F}let R=r;for(;R&&R.parentNode!==y;)R=R.parentNode;let P;for(;R&&!f.isBlock(R);)P=R,R=R.previousSibling;if(P&&e.schema.isValidChild(x,n.toLowerCase())){const F=P.parentNode,Y=f.create(n);for(ZC(e,Y),F.insertBefore(Y,P),R=P;R&&!f.isBlock(R);){const J=R.nextSibling;Y.appendChild(R),R=J}o.setStart(r,c),o.setEnd(r,c)}}return r},HO=(e,n)=>{n.normalize();const o=n.lastChild;(!o||_t(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},VO=(e,n)=>{const o=Ka(e);return At(n)?!1:oe(o)?on(Ge.explode(o),n.nodeName.toLowerCase()):o},z7={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,x=y.getNonEmptyElements(),R=e.selection.getRng(),P=si(e),F=mt=>{let lt=o;const Oe=y.getTextInlineElements();let Se;mt||c==="TABLE"||c==="HR"?Se=b.create(mt||P):Se=de.cloneNode(!1);let St=Se;if(Tk(e)===!1)b.setAttrib(Se,"style",null),b.setAttrib(Se,"class",null);else do if(Oe[lt.nodeName]){if(ci(lt)||mc(lt))continue;const en=lt.cloneNode(!1);b.setAttrib(en,"id",""),Se.hasChildNodes()?(en.appendChild(Se.firstChild),Se.appendChild(en)):(St=en,Se.appendChild(en))}while((lt=lt.parentNode)&&lt!==me);return ZC(e,Se),Dc(St),Se},Y=mt=>{const lt=FO(mt,o,r);if(et(o)&&(mt?lt>0:lt<o.data.length))return!1;if(o.parentNode===de&&f&&!mt||mt&&_t(o)&&o===de.firstChild)return!0;if(LO(o,"TABLE")||LO(o,"HR"))return f&&!mt||!f&&mt;const Oe=new Wr(o,de);et(o)&&(mt&&lt===0?Oe.prev():!mt&&lt===o.data.length&&Oe.next());let Se;for(;Se=Oe.current();){if(_t(Se)){if(!Se.getAttribute("data-mce-bogus")){const St=Se.nodeName.toLowerCase();if(x[St]&&St!=="br")return!1}}else if(et(Se)&&!yi(Se.data))return!1;mt?Oe.prev():Oe.next()}return!0},J=()=>{let mt;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&ye!=="HGROUP"?mt=F(P):mt=F(),VO(e,u)&&FB(b,u)&&b.isEmpty(de)?mt=b.split(u,de):b.insertAfter(mt,de),aT(e,mt),mt};xv(b,R).each(mt=>{R.setStart(mt.startContainer,mt.startOffset),R.setEnd(mt.endContainer,mt.endOffset)}),o=R.startContainer,r=R.startOffset;const q=!!(n&&n.shiftKey),ee=!!(n&&n.ctrlKey);_t(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&et(o)?r=o.data.length:r=0);const me=IO(b,o);if(!me||$7(e,o))return;q||(o=V7(e,P,R,o,r));let de=b.getParent(o,b.isBlock)||b.getRoot();u=ge(de==null?void 0:de.parentNode)?b.getParent(de.parentNode,b.isBlock):null,c=de?de.nodeName.toUpperCase():"";const ye=u?u.nodeName.toUpperCase():"";if(ye==="LI"&&!ee){const mt=u;de=mt,u=mt.parentNode,c=ye}if(/^(LI|DT|DD)$/.test(c)&&_t(u)&&b.isEmpty(de)){LB(e,F,u,de,P);return}if(de===e.getBody())return;const xe=de.parentNode;let Ue;if(T(de))Ue=vs(de),b.isEmpty(de)&&Dc(de),ZC(e,Ue),aT(e,Ue);else if(Y(!1))Ue=J();else if(Y(!0)&&xe)Ue=xe.insertBefore(F(),de),aT(e,LO(de,"HR")?Ue:de);else{const mt=L7(R).cloneRange();mt.setEndAfter(de);const lt=mt.extractContents();P7(lt),F7(lt),Ue=lt.firstChild,b.insertAfter(lt,de),I7(b,x,Ue),HO(b,de),b.isEmpty(de)&&Dc(de),Ue.normalize(),b.isEmpty(Ue)?(b.remove(Ue),J()):(ZC(e,Ue),aT(e,Ue))}b.setAttrib(Ue,"id",""),e.dispatch("NewBlock",{newBlock:Ue})},fakeEventName:"insertParagraph"},U7=(e,n,o)=>{const r=new Wr(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||et(c)&&c.length>0)return!0;return!1},HB=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),ct(e,r)},yU=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;xv(r,c).each(Y=>{c.setStart(Y.startContainer,Y.startOffset),c.setEnd(Y.endContainer,Y.endOffset)});let b=c.startOffset,y=c.startContainer;if(_t(y)&&y.hasChildNodes()){const Y=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,Y&&et(y)?b=y.data.length:b=0}let x=r.getParent(y,r.isBlock);const R=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,P=R?R.nodeName.toUpperCase():"",F=!!(n&&n.ctrlKey);P==="LI"&&!F&&(x=R),et(y)&&b>=y.data.length&&(U7(e.schema,y,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),Mb(r,c,u),HB(e,u,f),e.undoManager.add()},W7=(e,n)=>{const o=re.fromTag("br");ho(re.fromDom(n),o),e.undoManager.add()},Mg=(e,n)=>{j7(e.getBody(),n)||qs(re.fromDom(n),re.fromTag("br"));const o=re.fromTag("br");qs(re.fromDom(n),o),HB(e,o.dom,!1),e.undoManager.add()},Z7=e=>pr(e.getNode()),j7=(e,n)=>Z7(Pe.after(n))?!0:Jc(e,Pe.after(n)).map(o=>pr(o.getNode())).getOr(!1),Ng=e=>e&&e.nodeName==="A"&&"href"in e,G7=e=>e.fold(rn,Ng,Ng,rn),VB=e=>{const n=Le(y1,e),o=Pe.fromRangeStart(e.selection.getRng());return Ef(n,e.getBody(),o).filter(G7)},q7=(e,n)=>{n.fold(bt,Le(W7,e),Le(Mg,e),bt)},zB={insert:(e,n)=>{const o=VB(e);o.isSome()?o.each(Le(q7,e)):yU(e,n)},fakeEventName:"insertLineBreak"},UB=(e,n)=>$B(e).filter(o=>n.length>0&&ul(re.fromDom(o),n)).isSome(),K7=e=>UB(e,aw(e)),Y7=e=>UB(e,ut(e)),Mi=tu.generate([{br:[]},{block:[]},{none:[]}]),WB=(e,n)=>Y7(e),jC=e=>(n,o)=>hU(n)===e,ZB=(e,n)=>(o,r)=>R7(o)===e.toUpperCase()===n,X7=e=>{const n=IO(e.dom,e.selection.getStart());return At(n)},GC=e=>ZB("pre",e),J7=()=>ZB("summary",!0),lT=e=>(n,o)=>Sk(n)===e,jB=(e,n)=>K7(e),iT=(e,n)=>n,GB=e=>{const n=si(e),o=IO(e.dom,e.selection.getStart());return ge(o)&&e.schema.isValidChild(o.nodeName,n)},qu=(e,n)=>(o,r)=>Mt(e,(u,f)=>u&&f(o,r),!0)?$.some(n):$.none(),Q7=(e,n)=>FA([qu([WB],Mi.none()),qu([GC(!0),X7],Mi.none()),qu([J7()],Mi.br()),qu([GC(!0),lT(!1),iT],Mi.br()),qu([GC(!0),lT(!1)],Mi.block()),qu([GC(!0),lT(!0),iT],Mi.block()),qu([GC(!0),lT(!0)],Mi.br()),qu([jC(!0),iT],Mi.br()),qu([jC(!0)],Mi.block()),qu([jB],Mi.br()),qu([iT],Mi.br()),qu([GB],Mi.block())],[e,!!(n&&n.shiftKey)]).getOr(Mi.none()),uT=(e,n,o)=>{n.selection.isCollapsed()||nI(n),!(ge(o)&&$O(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),ge(o)&&PO(n,e.fakeEventName))},dT=(e,n)=>{const o=()=>uT(zB,e,n),r=()=>uT(z7,e,n),c=Q7(e,n);switch(xk(e)){case"linebreak":c.fold(o,o,bt);break;case"block":c.fold(r,r,bt);break;case"invert":c.fold(r,o,bt);break;default:c.fold(o,r,bt);break}},eH=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),LL(e.undoManager),e.undoManager.transact(()=>{dT(e,n)}))},tH=e=>{e.on("keydown",n=>{n.keyCode===Nt.ENTER&&eH(e,n)})},qB=(e,n,o)=>{const r=Ao.os.isMacOS()||Ao.os.isiOS();F1([{keyCode:Nt.END,action:bo(Vx,e,!0)},{keyCode:Nt.HOME,action:bo(Vx,e,!1)},...r?[]:[{keyCode:Nt.HOME,action:bo(zx,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Nt.END,action:bo(zx,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Nt.END,action:bo(cO,e,!0)},{keyCode:Nt.HOME,action:bo(cO,e,!1)},{keyCode:Nt.END,action:bo(a0,e,!0,n)},{keyCode:Nt.HOME,action:bo(a0,e,!1,n)}],o).each(c=>{o.preventDefault()})},zO=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||qB(e,n,o)})},KB=e=>{e.on("input",n=>{n.isComposing||H5(e)})},nH=gr(),SU=(e,n,o)=>{F1([{keyCode:Nt.PAGE_UP,action:bo(a0,e,!1,n)},{keyCode:Nt.PAGE_DOWN,action:bo(a0,e,!0,n)}],o)},rp=e=>e.stopImmediatePropagation(),YB=e=>e.keyCode===Nt.PAGE_UP||e.keyCode===Nt.PAGE_DOWN,XB=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",rp,!0):!o&&e.get()&&n.off("NodeChange",rp),e.set(o)},oH=(e,n)=>{if(nH.os.isMacOS())return;const o=Ga(!1);e.on("keydown",r=>{YB(r)&&XB(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||SU(e,n,r),YB(r)&&o.get()&&(XB(o,e,!1),e.nodeChanged())})},qC=(e,n)=>{const o=n.container(),r=n.offset();return et(o)?(o.insertData(r,e),$.some(Pe(o,r+e.length))):Ah(n).map(c=>{const u=re.fromText(e);return n.isAtEnd()?qs(c,u):ho(c,u),Pe(u.dom,e.length)})},JB=Le(qC,$r),QB=Le(qC," "),sH=e=>n=>n.fold(o=>ai(e.dom,Pe.before(o)),o=>hl(o),o=>yd(o),o=>Jc(e.dom,Pe.after(o))),eP=(e,n)=>o=>L5(e,o)?JB(n):QB(n),rH=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),aH=e=>{const n=Pe.fromRangeStart(e.selection.getRng()),o=re.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Le(y1,e),c=Pe.fromRangeStart(e.selection.getRng());return Ef(r,e.getBody(),c).bind(sH(o)).map(u=>()=>eP(o,n)(u).each(rH(e)))}else return $.none()},cH=(e,n)=>{aO([{keyCode:Nt.SPACEBAR,action:bo(aH,e)}],n).each(o=>{n.preventDefault(),$O(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),PO(e,"insertText",{data:" "}))})},tP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||cH(e,n)})},UO=e=>zk(e)?[{keyCode:Nt.TAB,action:bo(mO,e,!0)},{keyCode:Nt.TAB,shiftKey:!0,action:bo(mO,e,!1)}]:[],lH=(e,n)=>{F1([...UO(e)],n).each(o=>{n.preventDefault()})},WO=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||lH(e,n)})},nP=e=>{if(e.addShortcut("Meta+P","","mcePrint"),A7(e),xf(e))return Ga(null);{const n=G6(e);return rO(e),z8(e,n),BB(e,n),tH(e),tP(e),KB(e),WO(e),zO(e,n),oH(e,n),n}};class mT{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Vy(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&wo(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&wo(n)&&(n.selection.getNode().nodeName==="IMG"?bl.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Lc(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=er(r.dom.getParents(n,We,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const ZO="x-tinymce/html",KC=je(ZO),jO="<!-- "+ZO+" -->",iH=e=>jO+e,fT=e=>e.replace(jO,""),oP=e=>e.indexOf(jO)!==-1,uH=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),dH=(e,n)=>{let o="<"+e;const r=nl(n,(c,u)=>u+'="'+Na.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},mH=(e,n,o)=>{const r=e.split(/\n\n/),c=dH(n,o),u="</"+n+">",f=Xt(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:Xt(f,b).join("")},sP="%MCEPASTEBIN%",fH=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},sP);Ao.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},gH=(e,n)=>{const o=e.dom;if(GO(e)){let r;const c=n.get();for(;r=GO(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},GO=e=>e.dom.get("mcepastebin"),l0=e=>ge(e)&&e.id==="mcepastebin",hH=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=be(e.getBody().childNodes,l0);Be(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},rP=e=>e===sP,aP=e=>{const n=Ga(null);return{create:()=>fH(e,n),remove:()=>gH(e,n),getEl:()=>GO(e),getHtml:()=>hH(e),getLastRng:n.get}},cP=(e,n)=>(Ge.each(n,o=>{Ye(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),pH=e=>{const n=Du(),o=su({},n);let r="";const c=n.getVoidElements(),u=Ge.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const x=y.name,R=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let P=y.firstChild;if(P)do b(P);while(P=P.next)}f[x]&&R.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=cP(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},lP=e=>(e=cP(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":$r],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),iP=e=>{let n=0;return()=>e+n++},bH=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ge.hasOwn(o,n)?"image/"+o[n]:"image/"+n},vH=(e,n)=>{const o=su({},e.schema);o.addNodeFilter("meta",c=>{Ge.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return jh({validate:!0},e.schema).serialize(r)},yH=(e,n)=>({content:e,cancelled:n}),gT=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=$y(e,r,o);return yH(c.node.innerHTML,c.isDefaultPrevented())},CH=(e,n,o)=>{const r=yv(e,n,o),c=vH(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?gT(e,c,o):yH(c,r.isDefaultPrevented())},wH=(e,n,o)=>CH(e,n,o),qO=(e,n)=>(e.insertContent(n,{merge:ny(e),paste:!0}),!0),KO=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),SH=(e,n)=>KO(n)&&zt(sy(e),o=>Wc(n.toLowerCase(),`.${o.toLowerCase()}`)),xH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),TH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),kH=(e,n,o)=>!e.selection.isCollapsed()&&KO(n)?TH(e,n,o):!1,EH=(e,n,o)=>SH(e,n)?xH(e,n,o):!1,_H=(e,n)=>{Ge.each([kH,EH,qO],o=>!o(e,n,qO))},AH=(e,n,o)=>{o||!pw(e)?qO(e,n):_H(e,n)},OH=iP("mceclip"),uP=(e,n,o,r)=>{const c=wH(e,n,o);c.cancelled||AH(e,c.content,r)},As=(e,n,o)=>{const r=o||oP(n);uP(e,fT(n),r,!1)},YO=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=vp(o,vw(e)),c=mH(r,si(e),Fp(e));uP(e,c,!1,!0)},XO=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},i0=(e,n)=>n in e&&e[n].length>0,hT=e=>i0(e,"text/html")||i0(e,"text/plain"),dP=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ge(o)?e.dom.encode(o[1]):void 0},mP=(e,n,o,r)=>{const c=OH(),u=Z0(e)&&ge(o.name),f=u?dP(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},DH=(e,n)=>{Kv(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),x=y??mP(e,b,f,u);As(e,`<img src="${x.blobUri()}">`,!1)})},fP=e=>e.type==="paste",RH=e=>Promise.all(Xt(e,n=>nx(n).then(o=>({file:n,uri:o})))),MH=e=>{const n=sy(e);return o=>nr(o.type,"image/")&&zt(n,r=>bH(r)===o.type)},gP=(e,n)=>{const o=n.items?br(is(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?is(n.files):[];return be(o.length>0?o:r,MH(e))},hP=(e,n,o)=>{const r=fP(n)?n.clipboardData:n.dataTransfer;if(Gb(e)&&r){const c=gP(e,r);if(c.length>0)return n.preventDefault(),RH(c).then(u=>{o&&e.selection.setRng(o),Be(u,f=>{DH(e,f)})}),!0}return!1},NH=e=>{var n,o;return Ao.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},pT=e=>Nt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,YC=(e,n,o,r)=>{let c=lP(o);const u=i0(n,KC())||oP(o),f=!u&&uH(c),b=KO(c);(rP(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(i0(n,"text/plain")&&f?c=n["text/plain"]:c=pH(c)),!rP(c)&&(r?YO(e,c):As(e,c,u))},pP=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{pT(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||NH(u))return;const f=o.get()==="text"||r;r=!1;const b=XO(u.clipboardData);!hT(b)&&hP(e,u,c())||(i0(b,"text/html")?(u.preventDefault(),YC(e,b,b["text/html"],f)):(n.create(),bl.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),YC(e,b,y,f)},0)))})},Ku=e=>{const n=c=>nr(c,"webkit-fake-url"),o=c=>nr(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!Gb(e)&&r(f))for(const b of c){const y=b.attr("src");oe(y)&&!b.attr("data-mce-object")&&y!==Ao.transparentSrc&&(n(y)||!ag(e)&&o(y))&&b.remove()}})},BH=(e,n,o)=>{pP(e,n,o),Ku(e)},u0=(e,n)=>{n.get()==="text"?(n.set("html"),xs(e,!1)):(n.set("text"),xs(e,!0)),e.focus()},XC=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{u0(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&As(e,r.html,r.internal),r.text&&YO(e,r.text)})},PH=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(KC(),n),!0}catch{return!1}else return!1},bP=(e,n,o,r)=>{PH(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},Z1=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),bl.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},vP=e=>({html:iH(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),JO=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),bT=e=>!e.selection.isCollapsed()||JO(e),yP=e=>n=>{!n.isDefaultPrevented()&&bT(e)&&bP(n,vP(e),Z1(e),()=>{if(Ao.browser.isChromium()||Ao.browser.isFirefox()){const o=e.selection.getRng();bl.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},$H=e=>n=>{!n.isDefaultPrevented()&&bT(e)&&bP(n,vP(e),Z1(e),bt)},IH=e=>{e.on("cut",yP(e)),e.on("copy",$H(e))},QO=(e,n)=>{var o,r;return wg.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},CP=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},wP=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},LH=e=>zt(e.files,n=>/^image\//.test(n.type)),FH=(e,n)=>{Ik(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Gb(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&LH(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented()||n.get())return;const r=QO(e,o);if(At(r))return;const c=XO(o.dataTransfer),u=i0(c,KC());if((!hT(c)||CP(c))&&hP(e,o,r))return;const f=c[KC()],b=f||c["text/html"]||c["text/plain"];b&&(o.preventDefault(),bl.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),wP(e,r);const y=lP(b);c["text/html"]?As(e,y,u):YO(e,y)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Gb(e)&&!n.get()&&(o.preventDefault(),wP(e,QO(e,o))),o.type==="dragend"&&n.set(!1)})},SP=e=>{const n=c=>u=>{c(e,u)},o=Lk(e);X(o)&&e.on("PastePreProcess",n(o));const r=hw(e);X(r)&&e.on("PastePostProcess",n(r))},HH=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},xP=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,TP=e=>Ge.trim(e).replace(xP,n1).toLowerCase(),VH=(e,n,o)=>{const r=Fk(e);if(o||r==="all"||!Zp(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,x,R)=>{const P=u.parseStyle(u.decode(x)),F={};for(let J=0;J<c.length;J++){const q=P[c[J]];let ee=q,me=u.getStyle(f,c[J],!0);/color/.test(c[J])&&(ee=TP(ee),me=TP(me)),me!==ee&&(F[c[J]]=q)}const Y=u.serializeStyle(F,"span");return Y?y+' style="'+Y+'"'+R:y+R})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},zH=e=>{(Ao.browser.isChromium()||Ao.browser.isSafari())&&HH(e,VH)},UH=e=>{const n=Ga(!1),o=Ga(bw(e)?"text":"html"),r=aP(e);zH(e),XC(e,o),SP(e),e.on("PreInit",()=>{IH(e),FH(e,n),BH(e,r,o)})},WH=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},ZH=e=>{e.parser.addNodeFilter("details",n=>{Be(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{Be(n,o=>{const r=o.attr("data-mce-open");o.attr("open",oe(r)?r:null),o.attr("data-mce-open",null)})})},jH=e=>{WH(e),ZH(e)},kP=pr,EP=et,GH=e=>Ts(e.dom),_P=e=>Bc(e.dom),AP=e=>n=>zo(re.fromDom(e),n),qH=(e,n)=>bi(re.fromDom(e),o=>_P(o)||Zr(o),AP(n)).getOr(re.fromDom(n)).dom,KH=(e,n)=>bi(re.fromDom(e),GH,AP(n)),OP=(e,n,o)=>{const r=new Wr(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!kP(f);f=c())qc(f)&&(u=f);return u},xU=(e,n)=>{const r=Pe.fromRangeStart(e).getNode(),c=qH(r,n),u=OP(r,c,!1),f=OP(r,c,!0),b=document.createRange();return KH(u,c).fold(()=>{EP(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),KH(f,c).fold(()=>{EP(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},YH=e=>{const n=xU(e.selection.getRng(),e.getBody());e.selection.setRng(iC(n))},XH=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),YH(e))})};var JC;(function(e){e.Before="before",e.After="after"})(JC||(JC={}));const JH=(e,n)=>Math.abs(e.left-n),Ni=(e,n)=>Math.abs(e.right-n),QH=(e,n)=>e>=n.top&&e<=n.bottom,eV=(e,n)=>e.top<n.bottom&&e.bottom>n.top,tV=(e,n)=>{const o=ya(e,n)/Math.min(e.height,n.height);return eV(e,n)&&o>.5},nV=(e,n)=>{const o=be(e,r=>QH(n,r));return uk(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=Fe(e,f=>tV(f,r));return[c,u]})},oV=(e,n)=>({node:e.node,position:JH(e,n)<Ni(e,n)?JC.Before:JC.After}),vT=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),e4=(e,n,o)=>{const r=R=>qc(R.node)?$.some(R):_t(R.node)?e4(is(R.node.childNodes),n,o):$.none(),c=(R,P)=>{if(R.length>=2){const F=r(R[0]).getOr(R[0]),Y=r(R[1]).getOr(R[1]);if(Math.abs(P(F,n,o)-P(Y,n,o))<2){if(et(F.node))return $.some(F);if(et(Y.node))return $.some(Y)}}return $.none()},u=(R,P)=>{const F=Un(R,(Y,J)=>P(Y,n,o)-P(J,n,o));return c(F,P).orThunk(()=>Jr(F,r))},[f,b]=nV(Nx(e),o),{pass:y,fail:x}=Fe(b,R=>R.top<o);return u(f,vT).orThunk(()=>u(x,G2)).orThunk(()=>u(y,G2))},sV=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>_t(x)&&x.classList.contains("mce-drag-container"),y=be(u.dom.childNodes,lr(b));return f.fold(()=>e4(y,o,r),x=>{const R=be(y,P=>P!==x.dom);return e4(R,o,r)}).orThunk(()=>(zo(u,e)?$.none():Mf(u)).bind(R=>c(R,$.some(u))))};return c(n,$.none())},DP=(e,n,o)=>{const r=re.fromDom(e),c=_l(r),f=re.fromPoint(c,n,o).filter(b=>Aa(r,b)).getOr(r);return sV(r,f,n,o)},t4=(e,n,o)=>DP(e,n,o).filter(r=>lg(r.node)).map(r=>oV(r,n)),yT=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},rV=e=>e.inline?yT(e.getBody()):{left:0,top:0},RP=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},aV=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},MP=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=yT(e.getContentAreaContainer()),r=aV(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},cV=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),NP=(e,n)=>cV(rV(e),RP(e),MP(e,n)),CT=32,lV=100,wT=8,ap=16,n4=Ts,iV=dk(n4,Bc),BP=(e,n)=>n4(n)&&n!==e,uV=(e,n,o)=>At(n)||n===o||e.dom.isChildOf(n,o)?!1:!n4(n),dV=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},mV=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},fV=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},ST=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},QC=ST("left",-CT),o4=ST("left",CT),s4=ST("top",-CT),PP=ST("top",CT),gV=(e,n,o,r,c,u,f,b,y,x,R,P)=>{let F=0,Y=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(F=n.pageX+o-c),n.pageY+r>u&&(Y=n.pageY+r-u),e.style.width=o-F+"px",e.style.height=r-Y+"px";const J=y.clientHeight,q=y.clientWidth,ee=f+y.getBoundingClientRect().top,me=b+y.getBoundingClientRect().left;R.on(de=>{de.intervalId.clear(),de.dragging&&P&&(f+wT>=J?de.intervalId.set(PP(x)):f-wT<=0?de.intervalId.set(s4(x)):b+wT>=q?de.intervalId.set(o4(x)):b-wT<=0?de.intervalId.set(QC(x)):ee+ap>=window.innerHeight?de.intervalId.set(PP(window)):ee-ap<=0?de.intervalId.set(s4(window)):me+ap>=window.innerWidth?de.intervalId.set(o4(window)):me-ap<=0&&de.intervalId.set(QC(window)))})},$P=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},TU=e=>e.button===0,hV=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),r4=(e,n)=>o=>{if(TU(o)){const r=jn(n.dom.getParents(o.target),iV).getOr(null);if(ge(r)&&BP(n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:mV(n,r,r.offsetWidth,r.offsetHeight),intervalId:ak(lV)})}}},a4=(e,n)=>{const o=hh((c,u)=>{n._selectionOverrides.hideFakeCaret(),t4(n.getBody(),c,u).fold(()=>n.selection.placeCaretAt(c,u),f=>{const b=n._selectionOverrides.showCaret(1,f.node,f.position===JC.Before,!1);b?n.selection.setRng(b):n.selection.placeCaretAt(c,u)})},0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",{target:u.element}).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=hV(u,NP(n,c));fV(u.ghost,n.getBody()),gV(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},xT=e=>{const n=e.getSel();if(ge(n)){const r=n.getRangeAt(0).startContainer;return et(r)?r.parentNode:r}else return null},pV=(e,n)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(uV(n,xT(n.selection),r.element)){const c=dV(r.element);n.dispatch("drop",{clientX:o.clientX,clientY:o.clientY}).isDefaultPrevented()||n.undoManager.transact(()=>{$P(r.element),n.insertContent(n.dom.getOuterHTML(c)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend")}}),c4(e)},bV=(e,n)=>()=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.dispatch("dragend")}),c4(e)},c4=e=>{e.on(n=>{n.intervalId.clear(),$P(n.ghost)}),e.clear()},vV=e=>{const n=Ym(),o=Ms.DOM,r=document,c=r4(n,e),u=a4(n,e),f=pV(n,e),b=bV(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===Nt.ESC&&b()})},l4=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(on(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&yA(e,"Dropped file type is not supported"))}},o=c=>{Av(e,c.target)&&n(c)},r=()=>{const c=Ms.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];Be(y,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{Be(y,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{bl.setEditorTimeout(e,r,0)})},IP=e=>{vV(e),Wp(e)&&l4(e)},yV=e=>{const n=hh(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=MA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},LP=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(qi(o)){const r=Yh(e.getBody(),o),c=Ts(r)?r:o;e.selection.getNode()!==c&&NC(e,c).each(u=>e.selection.setRng(u))}})})},d0=Ts,i4=(e,n)=>Yh(e.getBody(),n),kU=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=Xb(e,r,o.isBlock,()=>v1(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=lt=>ge(lt)&&o.hasClass(lt,"mce-offscreen-selection"),x=lt=>lt!==r&&(d0(lt)||qi(lt))&&o.isChildOf(lt,r),R=lt=>{lt&&n.setRng(lt)},P=(lt,Oe,Se,St=!0)=>e.dispatch("ShowCaret",{target:Oe,direction:lt,before:Se}).isDefaultPrevented()?null:(St&&n.scrollIntoView(Oe,lt===-1),c.show(Se,Oe)),F=lt=>{lt.hasAttribute("data-mce-caret")&&(vs(lt),n.scrollIntoView(lt))},Y=()=>{e.on("click",Oe=>{const Se=i4(e,Oe.target);Se&&d0(Se)&&(Oe.preventDefault(),e.focus())}),e.on("blur NewBlock",xe),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Oe=>{const Se=Oe.target,St=i4(e,Se);d0(St)?(Oe.preventDefault(),NC(e,St).each(ye)):x(Se)&&NC(e,Se).each(ye)},!0),e.on("mousedown",Oe=>{const Se=Oe.target;if(Se!==r&&Se.nodeName!=="HTML"&&!o.isChildOf(Se,r)||!DF(e,Oe.clientX,Oe.clientY))return;xe(),mt();const St=i4(e,Se);d0(St)?(Oe.preventDefault(),NC(e,St).each(ye)):t4(r,Oe.clientX,Oe.clientY).each(en=>{Oe.preventDefault();const sn=P(1,en.node,en.position===JC.Before,!1);R(sn),_t(St)?St.focus():e.getBody().focus()})}),e.on("keypress",Oe=>{Nt.modifierPressed(Oe)||d0(n.getNode())&&Oe.preventDefault()}),e.on("GetSelectionRange",Oe=>{let Se=Oe.range;if(b){if(!b.parentNode){b=null;return}Se=Se.cloneRange(),Se.selectNode(b),Oe.range=Se}}),e.on("SetSelectionRange",Oe=>{Oe.range=ee(Oe.range);const Se=ye(Oe.range,Oe.forward);Se&&(Oe.range=Se)});const lt=Oe=>_t(Oe)&&Oe.id==="mcepastebin";e.on("AfterSetSelectionRange",Oe=>{const Se=Oe.range,St=Se.startContainer.parentElement;!q(Se)&&!lt(St)&&mt(),y(St)||xe()}),IP(e),yV(e),LP(e)},J=lt=>H(lt)||no(lt)||ks(lt),q=lt=>J(lt.startContainer)||J(lt.endContainer),ee=lt=>{const Oe=e.schema.getVoidElements(),Se=o.createRng(),St=lt.startContainer,en=lt.startOffset,sn=lt.endContainer,Yn=lt.endOffset;return hn(Oe,St.nodeName.toLowerCase())?en===0?Se.setStartBefore(St):Se.setStartAfter(St):Se.setStart(St,en),hn(Oe,sn.nodeName.toLowerCase())?Yn===0?Se.setEndBefore(sn):Se.setEndAfter(sn):Se.setEnd(sn,Yn),Se},me=(lt,Oe)=>{const Se=re.fromDom(e.getBody()),St=e.getDoc(),en=Ff(Se,"#"+u).getOrThunk(()=>{const _o=re.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',St);return wr(_o,"id",u),Ar(Se,_o),_o}),sn=o.createRng();ur(en),Pn(en,[re.fromText($r,St),re.fromDom(Oe),re.fromText($r,St)]),sn.setStart(en.dom.firstChild,1),sn.setEnd(en.dom.lastChild,0),ie(en,{top:o.getPos(lt,e.getBody()).y+"px"}),He(en);const Yn=n.getSel();return Yn&&(Yn.removeAllRanges(),Yn.addRange(sn)),sn},de=lt=>{const Oe=lt.cloneNode(!0),Se=e.dispatch("ObjectSelected",{target:lt,targetClone:Oe});if(Se.isDefaultPrevented())return null;const St=me(lt,Se.targetClone),en=re.fromDom(lt);return Be(Fo(re.fromDom(e.getBody()),`*[${f}]`),sn=>{zo(en,sn)||Sr(sn,f)}),o.getAttrib(lt,f)||lt.setAttribute(f,"1"),b=lt,mt(),St},ye=(lt,Oe)=>{if(!lt)return null;if(lt.collapsed){if(!q(lt)){const sn=Oe?1:-1,Yn=Kp(sn,r,lt),_o=Yn.getNode(!Oe);if(ge(_o)){if(lg(_o))return P(sn,_o,Oe?!Yn.isAtEnd():!1,!1);if(L(_o)&&Ts(_o.nextSibling)){const rs=o.createRng();return rs.setStart(_o,0),rs.setEnd(_o,0),rs}}const ls=Yn.getNode(Oe);if(ge(ls)){if(lg(ls))return P(sn,ls,Oe?!1:!Yn.isAtEnd(),!1);if(L(ls)&&Ts(ls.previousSibling)){const rs=o.createRng();return rs.setStart(ls,1),rs.setEnd(ls,1),rs}}}return null}let Se=lt.startContainer,St=lt.startOffset;const en=lt.endOffset;if(et(Se)&&St===0&&d0(Se.parentNode)&&(Se=Se.parentNode,St=o.nodeIndex(Se),Se=Se.parentNode),!_t(Se))return null;if(en===St+1&&Se===lt.endContainer){const sn=Se.childNodes[St];if(x(sn))return de(sn)}return null},xe=()=>{b&&b.removeAttribute(f),Ff(re.fromDom(e.getBody()),"#"+u).each(Uo),b=null},Ue=()=>{c.destroy(),b=null},mt=()=>{c.hide()};return xf(e)||Y(),{showCaret:P,showBlockCaretContainer:F,hideFakeCaret:mt,destroy:Ue}},CV=(e,n)=>{let o=n;for(let r=e.previousSibling;et(r);r=r.previousSibling)o+=r.data.length;return o},FP=(e,n,o,r,c)=>{if(et(o)&&(r<0||r>o.data.length))return[];const u=c&&et(o)?[CV(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},u4=(e,n,o,r,c,u,f=!1)=>{const b=FP(e,n,o,r,f),y=FP(e,n,c,u,f);return{start:b,end:y}},d4=(e,n)=>{const o=n.slice(),r=o.pop();return An(r)?Mt(o,(u,f)=>u.bind(b=>$.from(b.childNodes[f])),$.some(e)).bind(u=>et(u)&&(r<0||r>u.data.length)?$.none():$.some({node:u,offset:r})):$.none()},HP=(e,n)=>d4(e,n.start).bind(({node:o,offset:r})=>d4(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),VP=(e,n,o,r=!1)=>u4(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),m0=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),m0(e,r,o)}},TT=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(et(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),et(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),m0(e,c,o),c!==u&&m0(e,u,o))},m4=(e,n)=>$.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),zP=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:ic(r).concat(e.blockPatterns),inlinePatterns:uc(r).concat(e.inlinePatterns)}},UP=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},f4=(e,n,o)=>{rB(n,0,n).each(c=>{const u=c.container;aB(u,o.start.length,n).each(f=>{const b=e.createRng();b.setStart(u,0),b.setEnd(f.container,f.offset),TT(e,b,y=>y===n)})})},EU=(e,n)=>{const o=e.dom,r=n.pattern,c=HP(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return Zn(y)&&Jn(y).exists(x=>hn(x,"block"))};return m4(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{f4(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{f4(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},wV=e=>Un(e,(n,o)=>o.start.length-n.start.length),WP=(e,n)=>{const o=wV(e),r=n.replace($r," ");return jn(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},SV=(e,n,o,r)=>{var c;const u=e.dom,f=si(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return WP(o.blockPatterns,b).map(y=>Ge.trim(b).length===y.start.length?[]:[{pattern:y,range:u4(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},g4=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Be(n,r=>EU(e,r)),e.selection.moveToBookmark(o)},ZP=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),kT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},jP=(e,n,o)=>{const r=HP(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(ZP(e,n+"-end"),f),start:y.insertBefore(ZP(e,n+"-start"),b)}},h4=(e,n,o)=>{m0(e,e.get(n.prefix+"-end"),o),m0(e,e.get(n.prefix+"-start"),o)},f0=e=>e.start.length===0,GP=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},p4=(e,n,o,r)=>{const c=n.start;return gO(e,r.container,r.offset,GP(c),o).bind(f=>{var b,y;const x=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(x!==-1&&f.offset>=x+c.length){const P=e.createRng();return P.setStart(f.container,f.offset-c.length),P.setEnd(f.container,f.offset),$.some(P)}else{const P=f.offset-c.length;return fO(f.container,P,o).map(F=>{const Y=e.createRng();return Y.setStart(F.container,F.offset),Y.setEnd(f.container,f.offset),Y}).filter(F=>F.toString()===c).orThunk(()=>p4(e,n,o,Od(f.container,0)))}})},xV=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),$.some(f)}return qx(o,r,c).bind(f=>p4(e,n,c,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return $.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return $.none()}return $.some(y)}))},TV=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return fO(b,y-o.pattern.end.length,n).bind(x=>{const R=u4(c,u,x.container,x.offset,b,y,r);if(f0(f))return $.some({matches:[{pattern:f,startRng:R,endRng:R}],position:x});{const P=e2(e,o.remainingPatterns,x.container,x.offset,n,r),F=P.getOr({matches:[],position:x}),Y=F.position;return xV(c,f,Y.container,Y.offset,n,P.isNone()).map(q=>{const ee=VP(c,u,q,r);return{matches:F.matches.concat([{pattern:f,startRng:ee,endRng:R}]),position:Od(q.startContainer,q.startOffset)}})}})},e2=(e,n,o,r,c,u)=>{const f=e.dom;return qx(o,r,f.getRoot()).bind(b=>{const y=UP(f,c,o,r);for(let x=0;x<n.length;x++){const R=n[x];if(!Wc(y,R.end))continue;const P=n.slice();P.splice(x,1);const F=TV(e,c,{pattern:R,remainingPatterns:P,position:b},u);if(F.isNone()&&r>0)return e2(e,n,o,r-1,c,u);if(F.isSome())return F}return $.none()})},qP=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Be(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},kV=(e,n,o,r)=>{const c=kT(e.dom,o);TT(e.dom,c,r),qP(e,n,c)},EV=(e,n,o,r,c)=>{const u=e.dom,f=kT(u,r),b=kT(u,o);TT(u,b,c),TT(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},x=kT(u,y);qP(e,n,x)},b4=(e,n)=>{const o=H2("mce_textpattern"),r=kt(n,(c,u)=>{const f=jP(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return kt(r,(c,u)=>{const f=r.length-c.length-1,b=f0(u.pattern)?u.endMarker:jP(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},_V=e=>Un(e,(n,o)=>o.end.length-n.end.length),AV=(e,n)=>{const o=mo(e,r=>zt(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},KP=(e,n,o,r,c,u)=>{const f=e2(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=e2(e,_V(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return AV(f,b)},YP=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=b4(o,n);Be(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;f0(u.pattern)?kV(e,u.pattern,u.endMarker,b):EV(e,u.pattern,u.startMarker,u.endMarker,b),h4(o,u.endMarker,b),h4(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},OV=(e,n)=>{const o=e.selection.getRng();return m4(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=zP(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=KP(e,r,o.startContainer,u,f,!0),y=SV(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Vm),YP(e,b),g4(e,y);const x=e.selection.getRng(),R=qx(x.startContainer,x.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),R.each(P=>{const F=P.container;F.data.charAt(P.offset-1)===Vm&&(F.deleteData(P.offset-1,1),m0(e.dom,F.parentNode,Y=>Y===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},DV=(e,n)=>{const o=e.selection.getRng();m4(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=UP(e.dom,r,o.startContainer,c),f=zP(n,r,u),b=KP(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{YP(e,b)})})},v4=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},XP=(e,n)=>v4(e,n,(o,r)=>o===r.keyCode&&!Nt.modifierPressed(r)),y4=(e,n)=>v4(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),C4=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Ic(cg(e),rf(e)),c=()=>Hk(e);e.on("keydown",f=>{if(f.keyCode===13&&!Nt.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&OV(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&DV(e,f)}};e.on("keyup",f=>{XP(o,f)&&u()}),e.on("keypress",f=>{y4(n,f)&&bl.setEditorTimeout(e,u)})},RV=e=>{C4(e)},w4=e=>{const n=Ge.each,o=Nt.BACKSPACE,r=Nt.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Ao.browser,y=b.isFirefox(),x=b.isChromium()||b.isSafari(),R=Ao.deviceType.isiPhone()||Ao.deviceType.isiPad(),P=Ao.os.isMacOS()||Ao.os.isiOS(),F=(wt,kn)=>{try{e.getDoc().execCommand(wt,!1,String(kn))}catch{}},Y=wt=>wt.isDefaultPrevented(),J=()=>{const wt=bn=>{const pt=c.create("body"),xo=bn.cloneContents();return pt.appendChild(xo),u.serializer.serialize(pt,{format:"html"})},kn=bn=>{const pt=wt(bn),xo=c.createRng();xo.selectNode(e.getBody());const vo=wt(xo);return pt===vo};e.on("keydown",bn=>{const pt=bn.keyCode;if(!Y(bn)&&(pt===r||pt===o)){const xo=e.selection.isCollapsed(),vo=e.getBody();if(xo&&!c.isEmpty(vo)||!xo&&!kn(e.selection.getRng()))return;bn.preventDefault(),e.setContent(""),vo.firstChild&&c.isBlock(vo.firstChild)?e.selection.setCursorLocation(vo.firstChild,0):e.selection.setCursorLocation(vo,0),e.nodeChanged()}})},q=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ee=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",wt=>{let kn;if(wt.target===e.getDoc().documentElement)if(kn=u.getRng(),e.getBody().focus(),wt.type==="mousedown"){if(H(kn.startContainer))return;u.placeCaretAt(wt.clientX,wt.clientY)}else u.setRng(kn)})},me=()=>{e.on("keydown",wt=>{if(!Y(wt)&&wt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const kn=u.getNode(),bn=kn.previousSibling;if(kn.nodeName==="HR"){c.remove(kn),wt.preventDefault();return}bn&&bn.nodeName&&bn.nodeName.toLowerCase()==="hr"&&(c.remove(bn),wt.preventDefault())}}})},de=()=>{Range.prototype.getClientRects||e.on("mousedown",wt=>{if(!Y(wt)&&wt.target.nodeName==="HTML"){const kn=e.getBody();kn.blur(),bl.setEditorTimeout(e,()=>{kn.focus()})}})},ye=()=>{const wt=sf(e);e.on("click",kn=>{const bn=kn.target;/^(IMG|HR)$/.test(bn.nodeName)&&c.getContentEditableParent(bn)!=="false"&&(kn.preventDefault(),e.selection.select(bn),e.nodeChanged()),bn.nodeName==="A"&&c.hasClass(bn,wt)&&bn.childNodes.length===0&&(kn.preventDefault(),u.select(bn))})},xe=()=>{const wt=()=>{const bn=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const pt=u.getStart();pt!==e.getBody()&&(c.setAttrib(pt,"style",null),n(bn,xo=>{pt.setAttributeNode(xo.cloneNode(!0))}))}},kn=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",bn=>{let pt;return!Y(bn)&&(bn.keyCode===8||bn.keyCode===46)&&kn()?(pt=wt(),e.getDoc().execCommand("delete",!1),pt(),bn.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",bn=>{if(!Y(bn)&&kn()){const pt=wt();bl.setEditorTimeout(e,()=>{pt()})}})},Ue=()=>{e.on("keydown",wt=>{if(!Y(wt)&&wt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const kn=u.getNode().previousSibling;if(kn&&kn.nodeName&&kn.nodeName.toLowerCase()==="table")return wt.preventDefault(),!1}return!0})},mt=()=>{e.on("keydown",wt=>{if(Y(wt)||wt.keyCode!==Nt.BACKSPACE)return;let kn=u.getRng();const bn=kn.startContainer,pt=kn.startOffset,xo=c.getRoot();let vo=bn;if(!(!kn.collapsed||pt!==0)){for(;vo.parentNode&&vo.parentNode.firstChild===vo&&vo.parentNode!==xo;)vo=vo.parentNode;vo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,vo),kn=c.createRng(),kn.setStart(bn,0),kn.setEnd(bn,0),u.setRng(kn))}})},lt=()=>{const wt=()=>{F("StyleWithCSS",!1),F("enableInlineTableEditing",!1),G0(e)||F("enableObjectResizing",!1)};Q0(e)||e.on("BeforeExecCommand mousedown",wt)},Oe=()=>{const wt=()=>{n(c.select("a:not([data-mce-block])"),kn=>{var bn;let pt=kn.parentNode;const xo=c.getRoot();if((pt==null?void 0:pt.lastChild)===kn){for(;pt&&!c.isBlock(pt);){if(((bn=pt.parentNode)===null||bn===void 0?void 0:bn.lastChild)!==pt||pt===xo)return;pt=pt.parentNode}c.add(pt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",kn=>{(kn.type==="setcontent"||kn.command==="mceInsertLink")&&wt()})},Se=()=>{e.on("init",()=>{F("DefaultParagraphSeparator",si(e))})},St=wt=>{const kn=wt.getBody(),bn=wt.selection.getRng();return bn.startContainer===bn.endContainer&&bn.startContainer===kn&&bn.startOffset===0&&bn.endOffset===kn.childNodes.length},en=()=>{e.on("keyup focusin mouseup",wt=>{!Nt.modifierPressed(wt)&&!St(e)&&u.normalize()},!0)},sn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Yn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},_o=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",wt=>{let kn;wt.target.nodeName==="HTML"&&(kn=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(kn),e.selection.normalize(),e.nodeChanged())}))},ls=()=>{P&&e.on("keydown",wt=>{Nt.metaKeyPressed(wt)&&!wt.shiftKey&&(wt.keyCode===37||wt.keyCode===39)&&(wt.preventDefault(),e.selection.getSel().modify("move",wt.keyCode===37?"backward":"forward","lineboundary"))})},rs=()=>{e.on("click",wt=>{let kn=wt.target;do if(kn.tagName==="A"){wt.preventDefault();return}while(kn=kn.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},la=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",wt=>{wt.preventDefault()})})},el=()=>{f.addNodeFilter("br",wt=>{let kn=wt.length;for(;kn--;)wt[kn].attr("class")==="Apple-interchange-newline"&&wt[kn].remove()})},rt=bt,Xn=()=>{if(!y||e.removed)return!1;const wt=e.selection.getSel();return!wt||!wt.rangeCount||wt.rangeCount===0},ln=()=>{x&&(ee(),ye(),la(),q(),R&&(Yn(),_o(),rs())),y&&(de(),lt(),sn(),ls())},Ys=()=>{mt(),J(),Ao.windowsPhone||en(),x&&(ee(),ye(),Se(),la(),Ue(),el(),R?(Yn(),_o(),rs()):q()),y&&(me(),de(),xe(),lt(),Oe(),sn(),ls(),Ue())};return xf(e)?ln():Ys(),{refreshContentEditable:rt,isHidden:Xn}},S4=Ms.DOM,MV=(e,n)=>{const o=re.fromDom(e.getBody()),r=sd(Wl(o)),c=re.fromTag("style");wr(c,"type","text/css"),Ar(c,re.fromText(n)),Ar(r,c),e.on("remove",()=>{Uo(c)})},NV=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,x4=e=>Jo(e,n=>jo(n)===!1),JP=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return x4({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:NV(e),validate:!0,blob_cache:o,document:e.getDoc()})},QP=e=>{const n=e.options.get;return x4({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},BV=e=>{const n=e.options.get;return{...JP(e),...QP(e),...x4({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},e$=e=>{const n=su(JP(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),oy(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Il("br",1))}}),n},PV=e=>{const n=gw(e);n&&bl.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},$V=e=>{const n=e.dom.getRoot();!e.inline&&(!wo(e)||e.selection.getStart(!0)===n)&&hl(n).each(o=>{const r=o.getNode(),c=Da(r)?hl(r).getOr(o):o;e.selection.setRng(c.toRange())})},IV=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Lu(e),e.focus(!0),$V(e),e.nodeChanged({initial:!0});const n=Bk(e);X(n)&&n.call(e,e),PV(e)},t$=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,LV=(e,n,o)=>{const r=[t$(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},n$=e=>{const n=t$(e),o=of(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";Ge.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(LV(e,r,o)).then(u).catch(u),b=uw(e);return b&&MV(e,b),f},FV=e=>{const n=e.getDoc(),o=e.getBody();bv(e),ty(e)||(n.body.spellcheck=!1,S4.setAttrib(o,"spellcheck","false")),e.quirks=w4(e),Ac(e);const r=Wb(e);r!==void 0&&(o.dir=r);const c=$k(e);c&&e.on("BeforeSetContent",u=>{Ge.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},o$=e=>{xf(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},T4=e=>{e.removed!==!0&&(o$(e),IV(e))},ET=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(S4.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Q0(e),e.readonly||(e.inline&&S4.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=RM(e),e.schema=Du(QP(e)),e.dom=Ms(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Bl(e),referrerPolicy:xi(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=e$(e),e.serializer=np(BV(e),e),e.selection=pF(e.dom,e.getWin(),e.serializer,e),e.annotator=Gw(e),e.formatter=NM(e),e.undoManager=PM(e),e._nodeChangeDispatcher=new mT(e),e._selectionOverrides=kU(e),s8(e),jH(e),Hx(e),xf(e)||(XH(e),RV(e));const c=nP(e);ON(e,c),oO(e),GF(e),UH(e);const u=GL(e);FV(e),u.fold(()=>{n$(e).then(()=>T4(e))},f=>{e.setProgressState(!0),n$(e).then(()=>{f().then(b=>{e.setProgressState(!1),T4(e),gA(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),T4(e),gA(e)})})})},s$=(e,n)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline){const o=e.iframeElement,r=CA(re.fromDom(o),"load",()=>{r.unbind(),e.contentDocument=o.contentDocument,ET(e)});if(Ao.browser.isFirefox()){const c=e.getDoc();c.open(),c.write(e.iframeHTML),c.close()}else o.srcdoc=e.iframeHTML}else ET(e)},k4=Ms.DOM,HV=(e,n,o,r)=>{const c=re.fromTag("iframe");return r.each(u=>wr(c,"tabindex",u)),bs(c,o),bs(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),vu(c,"tox-edit-area__iframe"),c},VV=e=>{let n=j4(e)+"<html><head>";rw(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Ck(e),r=wk(e),c=e.translate(Mk(e));return zb(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+zb(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},zV=(e,n)=>{const o=e.translate("Rich Text Area"),r=oc(re.fromDom(e.getElement()),"tabindex").bind(_r),c=HV(e.id,o,yk(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=VV(e),k4.add(n.iframeContainer,c)},UV=(e,n)=>{zV(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=k4.isHidden(n.editorContainer)),e.getElement().style.display="none",k4.setAttrib(e.id,"aria-hidden","true"),s$(e)},t2=Ms.DOM,WV=(e,n,o)=>{const r=Qv.get(o),c=Qv.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Ge.trim(o),r&&Ge.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,X(u.init)&&(u.init(e,c),n.push(o))}catch(u){N1(e,o,u)}}},ZV=e=>e.replace(/^\-/,""),jV=e=>{const n=[];Be(Up(e),o=>{WV(e,n,ZV(o))})},GV=e=>{const n=Ge.trim(Si(e)),o=e.ui.registry.getAll().icons,r={...vA.get("default").icons,...vA.get(n).icons};lo(r,(c,u)=>{hn(o,u)||e.ui.registry.addIcon(u,c)})},qV=e=>{const n=ng(e);if(oe(n)){const o=D1.get(n);e.theme=o(e,D1.urls[n])||{},X(e.theme.init)&&e.theme.init(e,D1.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},KV=e=>{const n=Zb(e),o=Xv.get(n);e.model=o(e,Xv.urls[n])},YV=e=>{const n=e.theme.renderUI;return n?n():c$(e)},XV=e=>{const n=e.getElement(),r=ng(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},r$=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),a$=e=>{const n=t2.create("div");return t2.insertAfter(n,e),r$(n,n)},c$=e=>{const n=e.getElement();return e.inline?r$(null):a$(n)},l$=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,oe(ng(e))?YV(e):X(ng(e))?XV(e):c$(e)},JV=(e,n)=>{const o={show:$.from(n.show).getOr(bt),hide:$.from(n.hide).getOr(bt),isEnabled:$.from(n.isEnabled).getOr(We),setEnabled:r=>{e.mode.isReadOnly()||$.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},QV=e=>{e.dispatch("ScriptsLoaded"),GV(e),qV(e),KV(e),jV(e);const n=l$(e);JV(e,$.from(n.api).getOr({})),e.editorContainer=n.editorContainer,hx(e),e.inline?s$(e):UV(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},cp=Ms.DOM,g0=e=>e.charAt(0)==="-",ez=(e,n)=>{const o=Ub(n),r=Bu(n);if(!kc.hasCode(o)&&o!=="en"){const c=za(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{IF(n,c,o)})}},i$=(e,n)=>{const o=ng(e);if(oe(o)&&!g0(o)&&!hn(D1.urls,o)){const r=Vp(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;D1.load(o,c).catch(()=>{LF(e,c,o)})}},tz=(e,n)=>{const o=Zb(e);if(o!=="plugin"&&!hn(Xv.urls,o)){const r=K0(e),c=oe(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Xv.load(o,c).catch(()=>{M1(e,c,o)})}},nz=e=>$.from(G4(e)).filter(za).map(n=>({url:n,name:$.none()})),u$=(e,n,o)=>$.from(n).filter(r=>za(r)&&!vA.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:$.some(r)})),oz=(e,n,o)=>{const r=u$(n,"default",o),c=nz(n).orThunk(()=>u$(n,Si(n),""));Be(Ss([r,c]),u=>{e.add(u.url).catch(()=>{$F(n,u.url,u.name.getOrUndefined())})})},d$=(e,n)=>{const o=(r,c)=>{Qv.load(r,c).catch(()=>{PF(e,c,r)})};lo(jb(e),(r,c)=>{o(c,r),e.options.set("plugins",Up(e).concat(c))}),Be(Up(e),r=>{r=Ge.trim(r),r&&!Qv.urls[r]&&!g0(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},sz=e=>{const n=ng(e);return!oe(n)||ge(D1.get(n))},m$=e=>{const n=Zb(e);return ge(Xv.get(n))},rz=(e,n)=>{const o=gd.ScriptLoader,r=()=>{!e.removed&&sz(e)&&m$(e)&&QV(e)};i$(e,n),tz(e,n),ez(o,e),oz(o,e,n),d$(e,n),o.loadQueue().then(r,r)},az=(e,n)=>Tp.forElement(e,{contentCssCors:ey(n),referrerPolicy:xi(n)}),cz=e=>{const n=e.id;kc.setCode(Ub(e));const o=()=>{cp.unbind(window,"ready",o),e.render()};if(!Kd.Event.domLoaded){cp.bind(window,"ready",o);return}if(!e.getElement())return;const r=re.fromDom(e.getElement()),c=pu(r);e.on("remove",()=>{Go(r.dom.attributes,f=>Sr(r,f.name)),bs(r,c)}),e.ui.styleSheetLoader=az(r,e),Y0(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||cp.getParent(n,"form");u&&(e.formElement=u,X0(e)&&!Mc(e.getElement())&&(cp.insertAfter(cp.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},cp.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Rk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=xM(e),e.notificationManager=SM(e),Vk(e)&&e.on("GetContent",f=>{f.save&&(f.content=cp.encode(f.content))}),rg(e)&&e.on("submit",()=>{e.initialized&&e.save()}),mr(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),rz(e,e.suffix)},lz=(e,n)=>({sections:je(e),options:je(n)}),f$=gr().deviceType,g$=f$.isPhone(),iz=f$.isTablet(),n2=e=>{if(At(e))return[];{const n=Zn(e)?e:e.split(/[ ,]/),o=Xt(n,Bo);return be(o,za)}},uz=(e,n)=>{const o=mi(n,(r,c)=>on(e,c));return lz(o.t,o.f)},h$=(e,n,o={})=>{const r=e.sections(),c=No(r,n).getOr({});return Ge.extend({},o,c)},o2=(e,n)=>hn(e.sections(),n),p$=(e,n)=>o2(e,n)?e.sections()[n]:{},b$=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:No(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),dz=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Ge.extend({},e.external_plugins,r):r},mz=(e,n)=>[...n2(e),...n2(n)],fz=(e,n,o,r)=>e&&o2(n,"mobile")?r:o,v$=(e,n,o,r)=>{const c=n2(o.forced_plugins),u=n2(r.plugins),f=p$(n,"mobile"),b=f.plugins?n2(f.plugins):u,y=fz(e,n,u,b),x=mz(c,y);return Ge.extend(r,{forced_plugins:c,plugins:x})},y$=(e,n)=>e&&o2(n,"mobile"),gz=(e,n,o,r,c)=>{var u;const f=e?{mobile:b$((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=uz(["mobile"],Xx(f,c)),y=Ge.extend(o,r,b.options(),y$(e,b)?h$(b,"mobile"):{},{external_plugins:dz(r,b.options())});return v$(e,b,r,y)},hz=(e,n)=>gz(g$||iz,g$,n,e,n),E4=(e,n)=>cM(e,n),_T=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{Be("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},AT=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return zt(c,u=>ge(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Bg=e=>{_T(e),AT(e)},OT=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ao.os.isMacOS()||Ao.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},h0=(e,n,o)=>{const r=re.fromDom(e.getRoot());return Xy(r,Pe.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Rv(r,Pe.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},C$=e=>{if(typeof e!="string"){const n=Ge.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},pz=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?h0(r,o.getRng(),n):n},DT=(e,n)=>{const{content:o,details:r}=C$(n);O1(e,{...r,content:pz(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=cF(e,c.content,r);J_(e,u,c),e.addVisual()})},w$=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{DT(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{DT(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{DT(e,r)},mceInsertContent:(n,o,r)=>{DT(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},bz={"font-size":"size","font-family":"face"},_4=Vi("font"),RT=(e,n,o)=>{const r=u=>pn(u,e).orThunk(()=>_4(u)?No(bz,e).bind(f=>oc(u,f)):$.none()),c=u=>zo(re.fromDom(n),u);return LS(re.fromDom(o),u=>r(u),c)},lp=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),j1=(e,n)=>$.from(Ms.DOM.getStyle(n,e,!0)),A4=e=>(n,o)=>$.from(o).map(re.fromDom).filter(ps).bind(r=>RT(e,n,r.dom).or(j1(e,r.dom))).getOr(""),vz=A4("font-size"),yz=gn(lp,A4("font-family")),Cz=e=>hl(e.getBody()).bind(n=>{const o=n.container();return $.from(et(o)?o.parentNode:o)}),wz=e=>$.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?$.none():$.from(e.selection.getStart(!0))}),Sz=(e,n)=>wz(e).orThunk(Le(Cz,e)).map(re.fromDom).filter(ps).bind(n),O4=(e,n)=>Sz(e,O($.some,n)),D4=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=af(e),c=qb(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},xz=e=>{const n=e.split(/\s*,\s*/);return Xt(n,o=>o.indexOf(" ")!==-1&&!(nr(o,'"')||nr(o,"'"))?`'${o}'`:o).join(",")},Tz=(e,n)=>{const o=D4(e,n);e.formatter.toggle("fontname",{value:xz(o)}),e.nodeChanged()},kz=e=>O4(e,n=>yz(e.getBody(),n.dom)).getOr(""),_U=(e,n)=>{e.formatter.toggle("fontsize",{value:D4(e,n)}),e.nodeChanged()},Ez=e=>O4(e,n=>vz(e.getBody(),n.dom)).getOr(""),R4=e=>O4(e,n=>{const o=re.fromDom(e.getBody()),r=LS(n,u=>pn(u,"line-height"),Le(zo,o)),c=()=>{const u=parseFloat(pe(n,"line-height")),f=parseFloat(pe(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),_z=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Az=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Tz(e,c)},FontSize:(o,r,c)=>{_U(e,c)},LineHeight:(o,r,c)=>{_z(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(oe(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},S$=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>kz(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Ez(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>R4(e))},Oz=e=>{Az(e),S$(e)},x$=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Dz=e=>{e.editorCommands.addCommands({Indent:()=>{t8(e)},Outdent:()=>{kN(e)}}),e.editorCommands.addCommands({Outdent:()=>JA(e)},"state")},M4=e=>{const n=(o,r,c)=>{const u=oe(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Pt(u)&&oe(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},Rz=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},Mz=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},Nz=e=>{Rz(e),Mz(e)},Bz=e=>{e.editorCommands.addCommands({insertParagraph:()=>{uT(z7,e)},mceInsertNewLine:(n,o,r)=>{dT(e,r)},InsertLineBreak:(n,o,r)=>{uT(zB,e)}})},T$=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>_t(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Bc);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},N4=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{f3(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},k$=e=>{Bg(e),OT(e),x$(e),T$(e),w$(e),M4(e),Dz(e),Bz(e),Nz(e),Oz(e),N4(e)},B4=["toggleview"],E$=e=>on(B4,e.toLowerCase());class Pz{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():hc(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return X(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!E$(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return X(r)?r(o):!1}queryCommandValue(n){if(!E$(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return X(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;lo(n,(c,u)=>{Be(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const p0="data-mce-contenteditable",$z=(e,n,o)=>{$d(e,n)&&!o?Ui(e,n):o&&vu(e,n)},MT=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},NT=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Iz=e=>{Be(Fo(e,'*[contenteditable="true"]'),n=>{wr(n,p0,"true"),NT(n,!1)})},Lz=e=>{Be(Fo(e,`*[${p0}="true"]`),n=>{Sr(n,p0),NT(n,!0)})},AU=e=>{$.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},OU=e=>{e.selection.setRng(e.selection.getRng())},_$=(e,n)=>{const o=re.fromDom(e.getBody());$z(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),AU(e),e.readonly=!0,NT(o,!1),Iz(o)):(e.readonly=!1,NT(o,!0),Lz(o),MT(e,"StyleWithCSS",!1),MT(e,"enableInlineTableEditing",!1),MT(e,"enableObjectResizing",!1),BE(e)&&e.focus(),OU(e),e.nodeChanged())},ip=e=>e.readonly,A$=e=>{e.parser.addAttributeFilter("contenteditable",n=>{ip(e)&&Be(n,o=>{o.attr(p0,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(p0,n=>{ip(e)&&Be(n,o=>{o.attr("contenteditable",o.attr(p0))})}),e.serializer.addTempAttr(p0)},Fz=e=>{e.serializer?A$(e):e.on("PreInit",()=>{A$(e)})},Hz=e=>e.type==="click",DU=["copy"],RU=e=>on(DU,e.type),MU=(e,n)=>cd(n,"a",r=>zo(r,re.fromDom(e.getBody()))).bind(r=>oc(r,"href")),Vz=(e,n)=>{if(Hz(n)&&!Nt.metaKeyPressed(n)){const o=re.fromDom(n.target);MU(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${vr(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else RU(n)&&e.dispatch(n.type,n)},NU=e=>{e.on("ShowCaret",n=>{ip(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{ip(e)&&n.preventDefault()})},zz=Ge.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Pg{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||rn}static isNative(n){return!!zz[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=dh(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=rn),o){const u={func:o,removed:!1};c&&Ge.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return lo(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=Fe(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,Be(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else lo(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const G1=e=>(e._eventDispatcher||(e._eventDispatcher=new Pg({scope:e,toggleEvent:(n,o)=>{Pg.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),b0={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return dh(e.toLowerCase(),n??{},r);const c=G1(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return G1(this).on(e,n,o)},off(e,n){return G1(this).off(e,n)},once(e,n){return G1(this).once(e,n)},hasEventListeners(e){return G1(this).has(e)}},s2=Ms.DOM;let up;const r2=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;const o=q0(e);return o?(e.eventRoot||(e.eventRoot=s2.select(o)[0]),e.eventRoot):e.getBody()},Uz=e=>!e.hidden&&!ip(e),O$=(e,n,o)=>{Uz(e)?e.dispatch(n,o):ip(e)&&Vz(e,o)},D$=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=r2(e,n);if(q0(e)){if(up||(up={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||up&&(lo(up,(c,u)=>{e.dom.unbind(r2(e,u))}),up=null)})),up[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||s2.isChildOf(u,y))&&O$(f[b],n,c)}};up[n]=r,s2.bind(o,n,r)}else{const r=c=>{O$(e,n,c)};s2.bind(o,n,r),e.delegates[n]=r}},R$={...b0,bindPendingEventDelegates(){const e=this;Ge.each(e._pendingNativeEvents,n=>{D$(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?D$(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(r2(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(lo(e.delegates,(r,c)=>{e.dom.unbind(r2(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},q1=e=>oe(e)?{value:e.split(/[ ,]/),valid:!0}:Kt(e,oe)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Wz=e=>{const n=(()=>{switch(e){case"array":return Zn;case"boolean":return cn;case"function":return X;case"number":return An;case"object":return Pt;case"string":return oe;case"string[]":return q1;case"object[]":return o=>Kt(o,Pt);case"regexp":return o=>Ye(o,RegExp);default:return We}})();return o=>P4(o,n,`The value must be a ${e}.`)},M$=e=>oe(e.processor),N$=(e,n)=>{const o=Os(n.message)?"":`. ${n.message}`;return e+o},a2=e=>e.valid,P4=(e,n,o="")=>{const r=n(e);return cn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Zz=(e,n,o)=>{if(!jo(n)){const r=P4(n,o);if(a2(r))return r.value;console.error(N$(`Invalid default value passed for the "${e}" option`,r))}},jz=(e,n)=>{const o={},r={},c=(P,F,Y)=>{const J=P4(F,Y);return a2(J)?(r[P]=J.value,!0):(console.warn(N$(`Invalid value passed for the ${P} option`,J)),!1)},u=(P,F)=>{const Y=M$(F)?Wz(F.processor):F.processor,J=Zz(P,F.default,Y);o[P]={...F,default:J,processor:Y},No(r,P).orThunk(()=>No(n,P)).each(ee=>c(P,ee,Y))},f=P=>hn(o,P);return{register:u,isRegistered:f,get:P=>No(r,P).orThunk(()=>No(o,P).map(F=>F.default)).getOrUndefined(),set:(P,F)=>{if(f(P)){const Y=o[P];return Y.immutable?(console.error(`"${P}" is an immutable option and cannot be updated`),!1):c(P,F,Y.processor)}else return console.warn(`"${P}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:P=>{const F=f(P);return F&&delete r[P],F},isSet:P=>hn(r,P)}},B$=["design","readonly"],P$=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&_$(e,u.editorReadOnly),n.set(r),qw(e,r)},Gz=(e,n,o,r)=>{if(r!==o.get()){if(!hn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?P$(e,o,n,r):e.on("init",()=>P$(e,o,n,r))}},qz=(e,n,o)=>{if(on(B$,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Kz=e=>{const n=Ga("design"),o=Ga({design:{activate:bt,deactivate:bt,editorReadOnly:!1},readonly:{activate:bt,deactivate:bt,editorReadOnly:!0}});return Fz(e),NU(e),{isReadOnly:()=>ip(e),set:r=>Gz(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(qz(o.get(),r,c))}}},c2=Ge.each,$4=Ge.explode,Yz={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},xa=Ge.makeMap("alt,ctrl,shift,meta,access"),Xz=e=>e in xa,Jz=e=>{const n={},o=Ao.os.isMacOS()||Ao.os.isiOS();c2($4(e.toLowerCase(),"+"),u=>{Xz(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=Yz[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in xa)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class I4{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(c2(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return c2($4(Ge.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Ge.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Ge.map($4(n,">"),Jz);return u[u.length-1]=Ge.extend(u[u.length-1],{func:r,scope:c||this.editor}),Ge.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const $$=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(R,P)=>(F,Y)=>{R[F.toLowerCase()]={...Y,type:P}},x=(R,P)=>r[R.toLowerCase()]=P;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:x,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},L4=()=>{const e=$$();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},K1=Ms.DOM,I$=Ge.extend,Qz=Ge.each;class BT{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,I$(this,R$);const c=this;this.id=n,this.hidden=!1;const u=hz(r.defaultOptions,o);this.options=jz(c,u),W0(c);const f=this.options.get;f("deprecation_warnings")&&bM(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=xi(c);x&&(gd.ScriptLoader._setReferrerPolicy(x),Ms.DOM.styleSheetLoader._setReferrerPolicy(x));const R=ey(c);ge(R)&&Ms.DOM.styleSheetLoader._setContentCssCors(R),Kc.languageLoad=f("language_load"),Kc.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new _d(rw(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Y0(c),this.hasVisual=fw(c),this.shortcuts=new I4(this),this.editorCommands=new Pz(this),k$(this);const P=f("cache_suffix");P&&(Ao.cacheSuffix=P.replace(/^[\?\&]+/,"")),this.ui={registry:L4(),styleSheetLoader:void 0,show:bt,hide:bt,setEnabled:bt,isEnabled:We},this.mode=Kz(c),r.dispatch("SetupEditor",{editor:this});const F=Nk(c);X(F)&&F.call(c,c)}render(){cz(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return v1(this)}translate(n){return kc.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(ge(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:We,default:o})),!c.isSet(n)&&!jo(o)?o:c.get(n)}hasPlugin(n,o){return on(Up(this),n)?o?Qv.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(K1.show(n.getContainer()),K1.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(K1.hide(n.getContainer()),K1.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Mc(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Mc(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=K1.getParent(o.id,"form");b&&Qz(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return mx(this,n,o)}getContent(n){return pA(this,n)}insertContent(n,o){o&&(n=I$({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?mx(this,this.startContent,{format:"raw"}):mx(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||K1.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=K1.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=Pk(c);return X(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||Pt(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){E4(this,n)}remove(){EF(this)}destroy(n){Tf(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const v0=Ms.DOM,PT=Ge.each;let L$=!1,$g,ca=[];const $T=e=>{const n=e.type;PT(dp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},F$=e=>{if(e!==L$){const n=Ms.DOM;e?(n.bind(window,"resize",$T),n.bind(window,"scroll",$T)):(n.unbind(window,"resize",$T),n.unbind(window,"scroll",$T)),L$=e}},H$=e=>{const n=ca;return ca=be(ca,o=>e!==o),dp.activeEditor===e&&(dp.activeEditor=ca.length>0?ca[0]:null),dp.focusedEditor===e&&(dp.focusedEditor=null),n.length!==ca.length},e9=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(H$(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},t9=document.compatMode!=="CSS1Compat",dp={...b0,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.2",releaseDate:"2023-02-22",i18n:kc,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=_d.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new _d(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new _d(e.baseURL),e.suffix=o,o5(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&lo(r,(c,u)=>{Kc.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Ge.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(R,P)=>R.inline&&P.tagName.toLowerCase()in r,u=R=>{let P=R.id;return P||(P=No(R,"name").filter(F=>!v0.get(F)).getOrThunk(v0.uniqueId),R.setAttribute("id",P)),P},f=R=>{const P=e[R];if(P)return P.apply(n,[])},b=R=>Ao.browser.isIE()||Ao.browser.isEdge()?(B1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):t9?(B1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):oe(R.selector)?v0.select(R.selector):ge(R.target)?[R.target]:[];let y=R=>{o=R};const x=()=>{let R=0;const P=[];let F;const Y=(J,q,ee)=>{const me=new BT(J,q,n);P.push(me),me.on("init",()=>{++R===F.length&&y(P)}),me.targetElm=me.targetElm||ee,me.render()};v0.unbind(window,"ready",x),f("onpageload"),F=ka(b(e)),Ge.each(F,J=>{e9(n.get(J.id))}),F=Ge.grep(F,J=>!n.get(J.id)),F.length===0?y([]):PT(F,J=>{c(e,J)?B1("Could not initialize inline editor on invalid inline target element",J):Y(u(J),e,J)})};return v0.bind(window,"ready",x),new Promise(R=>{o?R(o):y=P=>{R(P)}})},get(e){return arguments.length===0?ca.slice(0):oe(e)?jn(ca,n=>n.id===e).getOr(null):An(e)&&ca[e]?ca[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&ca.push(e),F$(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),$g||($g=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",$g))),e},createEditor(e,n){return this.add(new BT(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=ca.length-1;r>=0;r--)n.remove(ca[r]);return}if(oe(e)){PT(v0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,te(n.get(o.id))?null:(H$(o)&&n.dispatch("RemoveEditor",{editor:o}),ca.length===0&&window.removeEventListener("beforeunload",$g),o.remove(),F$(ca.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Pt(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new BT(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{PT(ca,e=>{e.save()})},addI18n:(e,n)=>{kc.add(e,n)},translate:e=>kc.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new _d(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new _d(this.baseURL)}};dp.setup();const n9=(()=>{const e=Ym(),n=u=>({items:u,types:Dn(u),getType:f=>No(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),V$=Math.min,l2=Math.max,IT=Math.round,z$=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=y),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=IT(y/2)),x[1]==="c"&&(r+=IT(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=IT(f/2)),x[4]==="c"&&(r-=IT(u/2)),i2(r,c,u,f)},o9=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=z$(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},s9=(e,n,o)=>i2(e.x-n,e.y-o,e.w+n*2,e.h+o*2),r9=(e,n)=>{const o=l2(e.x,n.x),r=l2(e.y,n.y),c=V$(e.x+e.w,n.x+n.w),u=V$(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:i2(o,r,c-o,u-r)},a9=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,x=l2(0,n.x-r),R=l2(0,n.y-c),P=l2(0,u-b),F=l2(0,f-y);return r+=x,c+=R,o&&(u+=x,f+=R,r-=P,c-=F),u-=P,f-=F,i2(r,c,u-r,f-c)},i2=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),c9={inflate:s9,relativePosition:z$,findBestRelativePosition:o9,intersect:r9,clamp:a9,create:i2,fromClientRect:e=>i2(e.left,e.top,e.width,e.height)},l9=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...R)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),x.apply(null,R))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},i9=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const x=new Promise((R,P)=>{const F=l9(R,P);n[u]=F.resolve,gd.ScriptLoader.loadScript(f).then(()=>F.start(y),()=>F.reject(b))});return e[u]=x,x}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),u9=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let u2;try{const e="__storage_test__";u2=window.localStorage,u2.setItem(e,e),u2.removeItem(e)}catch{u2=u9()}var d9=u2;const m9={geom:{Rect:c9},util:{Delay:bl,Tools:Ge,VK:Nt,URI:_d,EventDispatcher:Pg,Observable:b0,I18n:kc,LocalStorage:d9,ImageUploader:DM},dom:{EventUtils:Kd,TreeWalker:Wr,TextSeeker:Jm,DOMUtils:Ms,ScriptLoader:gd,RangeUtils:wg,Serializer:np,StyleSheetLoader:Wd,ControlSelection:Ei,BookmarkManager:Iu,Selection:pF,Event:Kd.Event},html:{Styles:yb,Entities:Na,Node:Il,Schema:Du,DomParser:su,Writer:O3,Serializer:jh},Env:Ao,AddOnManager:Kc,Annotator:Gw,Formatter:NM,UndoManager:PM,EditorCommands:Pz,WindowManager:xM,NotificationManager:SM,EditorObservable:R$,Shortcuts:I4,Editor:BT,FocusManager:$l,EditorManager:dp,DOM:Ms.DOM,ScriptLoader:gd.ScriptLoader,PluginManager:Qv,ThemeManager:D1,ModelManager:Xv,IconManager:vA,Resource:i9,FakeClipboard:n9,trim:Ge.trim,isArray:Ge.isArray,is:Ge.is,toArray:Ge.toArray,makeMap:Ge.makeMap,each:Ge.each,map:Ge.map,grep:Ge.grep,inArray:Ge.inArray,extend:Ge.extend,walk:Ge.walk,resolve:Ge.resolve,explode:Ge.explode,_addCacheSuffix:Ge._addCacheSuffix},U$=Ge.extend(dp,m9),f9=e=>{try{vt.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(U$),f9(U$)})()})(MW);var cj=MW.exports;const DW=FZ(cj);(function(){const vt=Object.getPrototypeOf,On=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},wn=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&On(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},Sn=t=>s=>wn(s)===t,En=t=>s=>typeof s===t,eo=t=>s=>t===s,ao=(t,s)=>Gt(t)&&On(t,s,(a,l)=>vt(a)===l),xt=Sn("string"),Gt=Sn("object"),uo=t=>ao(t,Object),Wn=Sn("array"),Xo=eo(null),Zo=En("boolean"),Bt=eo(void 0),$n=t=>t==null,co=t=>!$n(t),Qe=En("function"),_n=En("number"),Ye=(t,s)=>{if(Wn(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},oe=()=>{},Pt=t=>()=>t(),Ps=(t,s)=>(...a)=>t(s.apply(null,a)),Zn=(t,s)=>a=>t(s(a)),te=t=>()=>t,cn=t=>t,jo=(t,s)=>t===s;function At(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const ge=t=>s=>!t(s),X=t=>()=>{throw new Error(t)},An=t=>t(),Kt=te(!1),bt=te(!0);var gn=tinymce.util.Tools.resolve("tinymce.ThemeManager");class O{constructor(s,a){this.tag=s,this.value=a}static some(s){return new O(!0,s)}static none(){return O.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?O.some(s(this.value)):O.none()}bind(s){return this.tag?s(this.value):O.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:O.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return co(s)?O.some(s):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const je=Array.prototype.slice,Eo=Array.prototype.indexOf,qt=Array.prototype.push,Le=(t,s)=>Eo.call(t,s),lr=(t,s)=>{const a=Le(t,s);return a===-1?O.none():O.some(a)},yo=(t,s)=>Le(t,s)>-1,oo=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return!0}return!1},$s=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},rn=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const d=je.call(t,l,l+s);a.push(d)}return a},We=(t,s)=>{const a=t.length,l=new Array(a);for(let d=0;d<a;d++){const g=t[d];l[d]=s(g,d)}return l},$=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];s(d,a)}},Mr=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},nt=(t,s)=>{const a=[],l=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:l).push(p)}return{pass:a,fail:l}},ze=(t,s)=>{const a=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&a.push(g)}return a},at=(t,s,a)=>(Mr(t,(l,d)=>{a=s(a,l,d)}),a),Wt=(t,s,a)=>($(t,(l,d)=>{a=s(a,l,d)}),a),on=(t,s,a)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return O.some(g);if(a(g,l))break}return O.none()},zt=(t,s)=>on(t,s,Kt),Xt=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return O.some(a)}return O.none()},Be=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!Wn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);qt.apply(s,t[a])}return s},Go=(t,s)=>Be(We(t,s)),Fe=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},be=t=>{const s=je.call(t,0);return s.reverse(),s},kt=(t,s)=>ze(t,a=>!yo(s,a)),Mt=(t,s)=>{const a={};for(let l=0,d=t.length;l<d;l++){const g=t[l];a[String(g)]=s(g,l)}return a},qo=t=>[t],jn=(t,s)=>{const a=je.call(t,0);return a.sort(s),a},Is=(t,s)=>s>=0&&s<t.length?O.some(t[s]):O.none(),cs=t=>Is(t,0),br=t=>Is(t,t.length-1),mo=Qe(Array.from)?Array.from:t=>je.call(t),er=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return O.none()},yn=Object.keys,Ko=Object.hasOwnProperty,Un=(t,s)=>{const a=yn(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];s(p,g)}},Lo=(t,s)=>Jn(t,(a,l)=>({k:l,v:s(a,l)})),Jn=(t,s)=>{const a={};return Un(t,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},Do=t=>(s,a)=>{t[a]=s},is=(t,s,a,l)=>{Un(t,(d,g)=>{(s(d,g)?a:l)(d,g)})},Jr=(t,s)=>{const a={},l={};return is(t,s,Do(a),Do(l)),{t:a,f:l}},ka=(t,s)=>{const a={};return is(t,s,Do(a),oe),a},Dn=(t,s)=>{const a=[];return Un(t,(l,d)=>{a.push(s(l,d))}),a},vc=(t,s)=>{const a=yn(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];if(s(p,g,t))return O.some(p)}return O.none()},lo=t=>Dn(t,cn),Zt=(t,s)=>In(t,s)?O.from(t[s]):O.none(),In=(t,s)=>Ko.call(t,s),Zs=(t,s)=>In(t,s)&&t[s]!==void 0&&t[s]!==null,Qr=(t,s,a=jo)=>t.exists(l=>a(l,s)),mi=(t,s,a=jo)=>us(t,s,a).getOr(t.isNone()&&s.isNone()),Jo=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},nl=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return O.none()}return O.some(s)},us=(t,s,a)=>t.isSome()&&s.isSome()?O.some(a(t.getOrDie(),s.getOrDie())):O.none(),No=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?O.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):O.none(),hn=(t,s)=>t!=null?O.some(s(t)):O.none(),fr=(t,s)=>t?O.some(s):O.none(),Fa=(t,s)=>t+s,hs=(t,s)=>t.substring(s),Ha=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,da=(t,s)=>ec(t,s)?hs(t,s.length):t,Hl=(t,s)=>ce(t,s)?t:Fa(t,s),js=(t,s,a=0,l)=>{const d=t.indexOf(s,a);return d!==-1?Bt(l)?!0:d+s.length<=l:!1},ec=(t,s)=>Ha(t,s,0),ce=(t,s)=>Ha(t,s,t.length-s.length),De=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),$e=t=>t.length>0,jt=t=>!$e(t),Qt=t=>t.style!==void 0&&Qe(t.style.getPropertyValue),Ft=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Ln(l.childNodes[0])},Qo=(t,s)=>{const l=(s||document).createElement(t);return Ln(l)},Ro=(t,s)=>{const l=(s||document).createTextNode(t);return Ln(l)},Ln=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Je={fromHtml:Ft,fromTag:Qo,fromText:Ro,fromDom:Ln,fromPoint:(t,s,a)=>O.from(t.dom.elementFromPoint(s,a)).map(Ln)},tr=typeof window<"u"?window:Function("return this;")(),ma=(t,s)=>{let a=s??tr;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},tc=(t,s)=>{const a=t.split(".");return ma(a,s)},Va=(t,s)=>tc(t,s),Cl=(t,s)=>{const a=Va(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Nr=Object.getPrototypeOf,ds=t=>Cl("HTMLElement",t),vr=t=>{const s=tc("ownerDocument.defaultView",t);return Gt(t)&&(ds(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Nr(t).constructor.name))},ms=9,nr=11,Wc=1,wl=3,Bo=t=>t.dom.nodeName.toLowerCase(),Bd=t=>t.dom.nodeType,fi=t=>s=>Bd(s)===t,za=t=>Os(t)&&vr(t.dom),Os=fi(Wc),fa=fi(wl),_r=fi(ms),ol=fi(nr),nc=t=>s=>Os(s)&&Bo(s)===t,Sl=(t,s)=>{const a=t.dom;if(a.nodeType!==Wc)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Vl=t=>t.nodeType!==Wc&&t.nodeType!==ms&&t.nodeType!==nr||t.childElementCount===0,xl=(t,s)=>{const a=s===void 0?document:s.dom;return Vl(a)?[]:We(a.querySelectorAll(t),Je.fromDom)},$i=(t,s)=>{const a=s===void 0?document:s.dom;return Vl(a)?O.none():O.from(a.querySelector(t)).map(Je.fromDom)},ns=(t,s)=>t.dom===s.dom,Tl=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},ga=t=>Je.fromDom(t.dom.ownerDocument),yc=t=>_r(t)?t:ga(t),kl=t=>Je.fromDom(yc(t).dom.documentElement),sl=t=>Je.fromDom(yc(t).dom.defaultView),ea=t=>O.from(t.dom.parentNode).map(Je.fromDom),zl=t=>O.from(t.dom.parentElement).map(Je.fromDom),rl=t=>O.from(t.dom.offsetParent).map(Je.fromDom),Ii=t=>O.from(t.dom.nextSibling).map(Je.fromDom),ws=t=>We(t.dom.childNodes,Je.fromDom),Ea=(t,s)=>{const a=t.dom.childNodes;return O.from(a[s]).map(Je.fromDom)},j=t=>Ea(t,0),le=(t,s)=>({element:t,offset:s}),he=(t,s)=>{const a=ws(t);return a.length>0&&s<a.length?le(a[s],0):le(t,s)},Ie=t=>ol(t)&&co(t.dom.host),ot=Qe(Element.prototype.attachShadow)&&Qe(Node.prototype.getRootNode),un=te(ot),fo=ot?t=>Je.fromDom(t.dom.getRootNode()):yc,or=t=>Ie(t)?t:Je.fromDom(yc(t).dom.body),os=t=>ir(t).isSome(),ir=t=>{const s=fo(t);return Ie(s)?O.some(s):O.none()},sr=t=>Je.fromDom(t.dom.host),gr=t=>{if(un()&&co(t.target)){const s=Je.fromDom(t.target);if(Os(s)&&Ua(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return cs(a)}}return O.from(t.target)},Ua=t=>co(t.dom.shadowRoot),Br=t=>{const s=fa(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return ir(Je.fromDom(s)).fold(()=>a.body.contains(s),Zn(Br,sr))},zr=()=>al(Je.fromDom(document)),al=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Je.fromDom(s)},cl=(t,s,a)=>{if(xt(a)||Zo(a)||_n(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Rn=(t,s,a)=>{cl(t.dom,s,a)},Ao=(t,s)=>{const a=t.dom;Un(s,(l,d)=>{cl(a,d,l)})},Ls=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},B=(t,s)=>O.from(Ls(t,s)),G=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ne=(t,s)=>{t.dom.removeAttribute(s)},we=t=>Wt(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Et=(t,s,a)=>{if(!xt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Qt(t)&&t.style.setProperty(s,a)},Fn=(t,s)=>{Qt(t)&&t.style.removeProperty(s)},$t=(t,s,a)=>{const l=t.dom;Et(l,s,a)},yr=(t,s)=>{const a=t.dom;Un(s,(l,d)=>{Et(a,d,l)})},Gs=(t,s)=>{const a=t.dom;Un(s,(l,d)=>{l.fold(()=>{Fn(a,d)},g=>{Et(a,d,g)})})},Ge=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Br(t)?ha(a,s):d},ha=(t,s)=>Qt(t)?t.style.getPropertyValue(s):"",Ss=(t,s)=>{const a=t.dom,l=ha(a,s);return O.from(l).filter(d=>d.length>0)},Pr=t=>{const s={},a=t.dom;if(Qt(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},Li=(t,s,a)=>{const l=Je.fromTag(t);return $t(l,s,a),Ss(l,s).isSome()},Vn=(t,s)=>{const a=t.dom;Fn(a,s),Qr(B(t,"style").map(De),"")&&ne(t,"style")},gi=t=>t.dom.offsetWidth,_a=(t,s)=>{const a=(C,k)=>{if(!_n(k)&&!k.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+k);const _=C.dom;Qt(_)&&(_.style[t]=k+"px")},l=C=>{const k=s(C);if(k<=0||k===null){const _=Ge(C,t);return parseFloat(_)||0}return k},d=l,g=(C,k)=>Wt(k,(_,D)=>{const M=Ge(C,D),V=M===void 0?0:parseInt(M,10);return isNaN(V)?_:_+V},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(C,k,_)=>{const D=g(C,_);return k>D?k-D:0}}},Fi=_a("height",t=>{const s=t.dom;return Br(t)?s.getBoundingClientRect().height:s.offsetHeight}),rr=t=>Fi.get(t),Hi=t=>Fi.getOuter(t),Fs=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Fi.max(t,s,a);$t(t,"max-height",l+"px")},gu=(t,s)=>({left:t,top:s,translate:(l,d)=>gu(t+l,s+d)}),Ds=gu,fp=t=>{const s=t.getBoundingClientRect();return Ds(s.left,s.top)},ps=(t,s)=>t!==void 0?t:s!==void 0?s:0,Cr=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===t.dom)return Ds(a.offsetLeft,a.offsetTop);const g=ps(l==null?void 0:l.pageYOffset,d.scrollTop),p=ps(l==null?void 0:l.pageXOffset,d.scrollLeft),C=ps(d.clientTop,a.clientTop),k=ps(d.clientLeft,a.clientLeft);return El(t).translate(p-k,g-C)},El=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?Ds(l.offsetLeft,l.offsetTop):Br(t)?fp(s):Ds(0,0)},hu=_a("width",t=>t.dom.offsetWidth),Vi=(t,s)=>hu.set(t,s),ar=t=>hu.get(t),wr=t=>hu.getOuter(t),bs=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=hu.max(t,s,a);$t(t,"max-width",l+"px")},hr=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},oc=(t,s,a,l)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),C=p||l("(pointer:coarse)"),k=d||!g&&p&&l("(min-device-width:768px)"),_=g||p&&!k,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,M=!_&&!k&&!D;return{isiPad:te(d),isiPhone:te(g),isTablet:te(k),isPhone:te(_),isTouch:te(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:te(D),isDesktop:te(M)}},hi=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},Sr=(t,s)=>{const a=hi(t,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return Wa(l(1),l(2))},zi=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?pu():Sr(t,a)},pu=()=>Wa(0,0),Wa=(t,s)=>({major:t,minor:s}),bu={nu:Wa,detect:zi,unknown:pu},Vg=(t,s)=>er(s.brands,a=>{const l=a.brand.toLowerCase();return zt(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:bu.nu(parseInt(a.version,10),0)}))}),Cc=(t,s)=>{const a=String(s).toLowerCase();return zt(t,l=>l.search(a))},pi=(t,s)=>Cc(t,s).map(a=>{const l=bu.detect(a.versionRegexes,s);return{current:a.name,version:l}}),td=(t,s)=>Cc(t,s).map(a=>{const l=bu.detect(a.versionRegexes,s);return{current:a.name,version:l}}),pa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ul=t=>s=>js(s,t),vu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>js(t,"edge/")&&js(t,"chrome")&&js(t,"safari")&&js(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pa],search:t=>js(t,"chrome")&&!js(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>js(t,"msie")||js(t,"trident")},{name:"Opera",versionRegexes:[pa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ul("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ul("firefox")},{name:"Safari",versionRegexes:[pa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(js(t,"safari")||js(t,"mobile/"))&&js(t,"applewebkit")}],Pd=[{name:"Windows",search:Ul("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>js(t,"iphone")||js(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ul("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ul("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ul("linux"),versionRegexes:[]},{name:"Solaris",search:Ul("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ul("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ul("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ui={browsers:te(vu),oses:te(Pd)},Em="Edge",$d="Chromium",ll="IE",zg="Opera",_m="Firefox",yu="Safari",Id=()=>il({current:void 0,version:bu.unknown()}),il=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(Em),isChromium:l($d),isIE:l(ll),isOpera:l(zg),isFirefox:l(_m),isSafari:l(yu)}},re={unknown:Id,nu:il,edge:te(Em),chromium:te($d),ie:te(ll),opera:te(zg),firefox:te(_m),safari:te(yu)},Wi="Windows",ul="iOS",Am="Android",Om="Linux",Ug="macOS",zo="Solaris",Aa="FreeBSD",Rf="ChromeOS",_l=()=>Dm({current:void 0,version:bu.unknown()}),Dm=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(Wi),isiOS:l(ul),isAndroid:l(Am),isMacOS:l(Ug),isLinux:l(Om),isSolaris:l(zo),isFreeBSD:l(Aa),isChromeOS:l(Rf)}},Cu={unknown:_l,nu:Dm,windows:te(Wi),ios:te(ul),android:te(Am),linux:te(Om),macos:te(Ug),solaris:te(zo),freebsd:te(Aa),chromeos:te(Rf)},Mf={detect:(t,s,a)=>{const l=Ui.browsers(),d=Ui.oses(),g=s.bind(k=>Vg(l,k)).orThunk(()=>pi(l,t)).fold(re.unknown,re.nu),p=td(d,t).fold(Cu.unknown,Cu.nu),C=oc(p,g,t,a);return{browser:g,os:p,deviceType:C}}},nd=t=>window.matchMedia(t).matches;let Wg=hr(()=>Mf.detect(navigator.userAgent,O.from(navigator.userAgentData),nd));const wc=()=>Wg(),Ld=(t,s,a,l,d,g,p)=>({target:t,x:s,y:a,stop:l,prevent:d,kill:g,raw:p}),Rm=t=>{const s=Je.fromDom(gr(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Ps(l,a);return Ld(s,t.clientX,t.clientY,a,l,d,t)},od=(t,s)=>a=>{t(a)&&s(Rm(a))},Ur=(t,s,a,l,d)=>{const g=od(a,l);return t.dom.addEventListener(s,g,d),{unbind:At(Mm,t,s,g,d)}},Fd=(t,s,a,l)=>Ur(t,s,a,l,!1),Nf=(t,s,a,l)=>Ur(t,s,a,l,!0),Mm=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},wu=(t,s)=>{ea(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},Zg=(t,s)=>{Ii(t).fold(()=>{ea(t).each(d=>{rc(d,s)})},l=>{wu(l,s)})},Nm=(t,s)=>{j(t).fold(()=>{rc(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},rc=(t,s)=>{t.dom.appendChild(s.dom)},jg=(t,s,a)=>{Ea(t,a).fold(()=>{rc(t,s)},l=>{wu(l,s)})},Wl=(t,s)=>{$(s,a=>{rc(t,a)})},sd=t=>{t.dom.textContent="",$(ws(t),s=>{Zi(s)})},Zi=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Al=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return Ds(a,l)},Gg=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},qg=t=>{const s=t===void 0?window:t;return wc().browser.isFirefox()?O.none():O.from(s.visualViewport)},Bf=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),Zl=t=>{const s=t===void 0?window:t,a=s.document,l=Al(Je.fromDom(a));return qg(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Bf(l.left,l.top,g,p)},d=>Bf(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},E=()=>Je.fromDom(document),N=(t,s)=>t.view(s).fold(te([]),l=>{const d=t.owner(l),g=N(t,d);return[l].concat(g)}),U=(t,s)=>{const a=s.owner(t),l=N(s,a);return O.some(l)};var ft=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?O.none():O.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Je.fromDom)},owner:t=>ga(t)});const pn=t=>{const s=E(),a=Al(s);return U(t,ft).fold(At(Cr,t),d=>{const g=El(t),p=at(d,(C,k)=>{const _=El(k);return{left:C.left+_.left,top:C.top+_.top}},{left:0,top:0});return Ds(p.left+g.left+a.left,p.top+g.top+a.top)})},go=(t,s,a)=>({point:t,width:s,height:a}),to=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),Yt=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),ho=t=>{const s=Cr(t),a=wr(t),l=Hi(t);return Yt(s.left,s.top,a,l)},qs=t=>{const s=pn(t),a=wr(t),l=Hi(t);return Yt(s.left,s.top,a,l)},Oa=()=>Zl(window),Ar=t=>{const s=g=>g(t),a=te(t),l=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:bt,isError:Kt,map:g=>Pn.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>O.some(t)};return d},Bm=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:Kt,isError:bt,map:s,mapError:l=>Pn.error(l(t)),bind:s,exists:Kt,forall:bt,getOr:cn,or:cn,getOrThunk:An,orThunk:An,getOrDie:X(String(t)),each:oe,toOptional:O.none};return a},Pn={value:Ar,error:Bm,fromOption:(t,s)=>t.fold(()=>Bm(s),Ar)};var ur;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(ur||(ur={}));const Uo=(t,s,a)=>t.stype===ur.Error?s(t.serror):a(t.svalue),Za=t=>{const s=[],a=[];return $(t,l=>{Uo(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},ba=(t,s)=>t.stype===ur.Error?{stype:ur.Error,serror:s(t.serror)}:t,Pf=(t,s)=>t.stype===ur.Value?{stype:ur.Value,svalue:s(t.svalue)}:t,$f=(t,s)=>t.stype===ur.Value?s(t.svalue):t,Kg=(t,s)=>t.stype===ur.Error?s(t.serror):t,ji=t=>({stype:ur.Value,svalue:t}),If=t=>({stype:ur.Error,serror:t}),xr={fromResult:t=>t.fold(If,ji),toResult:t=>Uo(t,Pn.error,Pn.value),svalue:ji,partition:Za,serror:If,bind:$f,bindError:Kg,map:Pf,mapError:ba,fold:Uo},Yg=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),nb=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),gp=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Lf=(t,s)=>s,ob=(t,s)=>uo(t)&&uo(s)?Rs(t,s):s,rd=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)In(d,g)&&(a[g]=t(a[g],d[g]))}return a},Rs=rd(ob),Gn=rd(Lf),ja=()=>({tag:"required",process:{}}),Gi=t=>({tag:"defaultedThunk",process:t}),Su=t=>Gi(te(t)),Xg=()=>({tag:"option",process:{}}),Pm=t=>({tag:"mergeWithThunk",process:t}),sb=t=>Pm(te(t)),rb=(t,s)=>t.length>0?xr.svalue(Rs(s,Gn.apply(void 0,t))):xr.svalue(s),$m=t=>Ps(xr.serror,Be)(t),bi={consolidateObj:(t,s)=>{const a=xr.partition(t);return a.errors.length>0?$m(a.errors):rb(a.values,s)},consolidateArr:t=>{const s=xr.partition(t);return s.errors.length>0?$m(s.errors):xr.svalue(s.values)}},vi=t=>Gt(t)&&yn(t).length>100?" removed due to size":JSON.stringify(t,null,2),x0=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:te("... (only showing first ten failures)")}]):t;return We(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},ad=(t,s)=>xr.serror([{path:t,getErrorInfo:s}]),xu=(t,s,a)=>ad(t,()=>'Could not find valid *required* value for "'+s+'" in '+vi(a)),Ff=(t,s)=>ad(t,()=>'Choice schema did not contain choice key: "'+s+'"'),cd=(t,s,a)=>ad(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+vi(s)),Qg=(t,s)=>ad(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Wr=(t,s)=>ad(t,te(s)),Ol=t=>{const s=(l,d)=>xr.bindError(t(d),g=>Wr(l,g)),a=te("val");return{extract:s,toString:a}},Lm=Ol(xr.svalue),_t=(t,s,a,l)=>Zt(s,a).fold(()=>xu(t,a,s),l),Fm=(t,s,a,l)=>{const d=Zt(t,s).getOrThunk(()=>a(t));return l(d)},jl=(t,s,a)=>a(Zt(t,s)),eh=(t,s,a,l)=>{const d=Zt(t,s).map(g=>g===!0?a(t):g);return l(d)},th=(t,s,a,l,d)=>{const g=C=>d.extract(s.concat([l]),C),p=C=>C.fold(()=>xr.svalue(O.none()),k=>{const _=d.extract(s.concat([l]),k);return xr.map(_,O.some)});switch(t.tag){case"required":return _t(s,a,l,g);case"defaultedThunk":return Fm(a,l,t.process,g);case"option":return jl(a,l,p);case"defaultedOptionThunk":return eh(a,l,t.process,p);case"mergeWithThunk":return Fm(a,l,te({}),C=>{const k=Rs(t.process(a),C);return g(k)})}},S2=(t,s,a)=>{const l={},d=[];for(const g of a)gp(g,(p,C,k,_)=>{const D=th(k,t,s,p,_);xr.fold(D,M=>{d.push(...M)},M=>{l[C]=M})},(p,C)=>{l[p]=C(s)});return d.length>0?xr.serror(d):xr.svalue(l)},Tu=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),qT=t=>yn(ka(t,co)),Da=t=>{const s=nn(t),a=at(t,(d,g)=>gp(g,p=>Rs(d,{[p]:!0}),te(d)),{});return{extract:(d,g)=>{const p=Zo(g)?[]:qT(g),C=ze(p,k=>!Zs(a,k));return C.length===0?s.extract(d,g):Qg(d,C)},toString:s.toString}},nn=t=>({extract:(l,d)=>S2(l,d,t),toString:()=>`obj{
`+We(t,d=>gp(d,(g,p,C,k)=>g+" -> "+k.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Mc=t=>({extract:(l,d)=>{const g=We(d,(p,C)=>t.extract(l.concat(["["+C+"]"]),p));return bi.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),et=(t,s)=>{const a=s!==void 0?s:cn;return{extract:(g,p)=>{const C=[];for(const k of t){const _=k.extract(g,p);if(_.stype===ur.Value)return{stype:ur.Value,svalue:a(_.svalue)};C.push(_)}return bi.consolidateArr(C)},toString:()=>"oneOf("+We(t,g=>g.toString()).join(", ")+")"}},ab=(t,s)=>{const a=(g,p)=>Mc(Ol(t)).extract(g,p);return{extract:(g,p)=>{const C=yn(p),k=a(g,C);return xr.bind(k,_=>{const D=We(_,M=>Yg(M,M,ja(),s));return nn(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},cb=(t,s)=>{const a=hr(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},Gl=Ps(Mc,nn),Nc=te(Lm),Hm=(t,s)=>Ol(a=>{const l=typeof a;return t(a)?xr.svalue(a):xr.serror(`Expected type: ${s} but got: ${l}`)}),pr=Hm(_n,"number"),ta=Hm(xt,"string"),Bc=Hm(Zo,"boolean"),Ts=Hm(Qe,"function"),ku=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>ku(t[s]));default:return!1}},lb=Ol(t=>ku(t)?xr.svalue(t):xr.serror("Expected value to be acceptable for sending via postMessage")),qi=(t,s,a,l)=>Zt(a,l).fold(()=>cd(t,a,l),g=>g.extract(t.concat(["branch: "+l]),s)),nh=(t,s)=>({extract:(d,g)=>Zt(g,t).fold(()=>Ff(d,t),C=>qi(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+yn(s)}),Vm=()=>Mc(Lm),$r=t=>Ol(s=>t(s).fold(xr.serror,xr.svalue)),oh=(t,s)=>ab(a=>xr.fromResult(t(a)),s),zm=(t,s,a)=>{const l=s.extract([t],a);return xr.mapError(l,d=>({input:a,errors:d}))},Fo=(t,s,a)=>xr.toResult(zm(t,s,a)),Ki=t=>t.fold(s=>{throw new Error(Yi(s))},cn),ac=(t,s,a)=>Ki(Fo(t,s,a)),Yi=t=>`Errors: 
`+x0(t.errors).join(`
`)+`

Input object: `+vi(t.input),Zc=(t,s)=>nh(t,Lo(s,nn)),ib=(t,s)=>cb(t,s),Ra=Yg,cc=nb,hp=t=>$r(s=>yo(t,s)?Pn.value(s):Pn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ze=t=>Ra(t,t,ja(),Nc()),dl=(t,s)=>Ra(t,t,ja(),s),T0=t=>dl(t,pr),Ir=t=>dl(t,ta),Hf=(t,s)=>Ra(t,t,ja(),hp(s)),ld=t=>dl(t,Bc),Zr=t=>dl(t,Ts),k0=(t,s)=>Ra(t,t,Xg(),Ol(a=>xr.serror("The field: "+t+" is forbidden. "+s))),ql=(t,s)=>Ra(t,t,ja(),nn(s)),Xi=(t,s)=>Ra(t,t,ja(),Gl(s)),jc=(t,s)=>Ra(t,t,ja(),Mc(s)),Ho=t=>Ra(t,t,Xg(),Nc()),Dl=(t,s)=>Ra(t,t,Xg(),s),Hd=t=>Dl(t,pr),Ma=t=>Dl(t,ta),Vf=(t,s)=>Dl(t,hp(s)),zf=t=>Dl(t,Ts),Uf=(t,s)=>Dl(t,Mc(s)),Gc=(t,s)=>Dl(t,nn(s)),pp=(t,s)=>Dl(t,Da(s)),Ce=(t,s)=>Ra(t,t,Su(s),Nc()),na=(t,s,a)=>Ra(t,t,Su(s),a),ub=(t,s)=>na(t,s,pr),Hs=(t,s)=>na(t,s,ta),Kl=(t,s,a)=>na(t,s,hp(a)),oa=(t,s)=>na(t,s,Bc),sa=(t,s)=>na(t,s,Ts),w=(t,s)=>na(t,s,lb),T=(t,s,a)=>na(t,s,Mc(a)),L=(t,s,a)=>na(t,s,nn(a)),H=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Re={generate:t=>{if(!Wn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return $(t,(l,d)=>{const g=yn(l);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],C=l[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Wn(C))throw new Error("case arguments must be an array");s.push(p),a[p]=(...k)=>{const _=k.length;if(_!==C.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+C.length+" ("+C+"), got "+_);return{fold:(...M)=>{if(M.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+M.length);return M[d].apply(null,k)},match:M=>{const V=yn(M);if(s.length!==V.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+V.join(","));if(!Fe(s,Q=>yo(V,Q)))throw new Error("Not all branches were specified when using match. Specified: "+V.join(", ")+`
Required: `+s.join(", "));return M[p].apply(null,k)},log:M=>{console.log(M,{constructors:s,constructor:p,params:k})}}}}),a}};Re.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const tt=t=>{const s=[],a=[];return $(t,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Tt=(t,s)=>{const a={};return Un(t,(l,d)=>{yo(s,d)||(a[d]=l)}),a},zn=(t,s)=>({[t]:s}),no=t=>{const s={};return $(t,a=>{s[a.key]=a.value}),s},ks=(t,s)=>Tt(t,s),ss=(t,s)=>zn(t,s),vs=t=>no(t),Pc=(t,s)=>t.length===0?Pn.value(s):Pn.value(Rs(s,Gn.apply(void 0,t))),Yl=t=>Pn.error(Be(t)),Eu=(t,s)=>{const a=tt(t);return a.errors.length>0?Yl(a.errors):Pc(a.values,s)},id=t=>Qe(t)?t:Kt,sh=(t,s,a)=>{let l=t.dom;const d=id(a);for(;l.parentNode;){l=l.parentNode;const g=Je.fromDom(l),p=s(g);if(p.isSome())return p;if(d(g))break}return O.none()},ud=(t,s,a)=>{const l=s(t),d=id(a);return l.orThunk(()=>d(t)?O.none():sh(t,s,d))},_u=(t,s)=>ns(t.element,s.event.target),Um={can:bt,abort:Kt,run:oe},Au=t=>{if(!Zs(t,"can")&&!Zs(t,"abort")&&!Zs(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Um,...t}},qc=(t,s)=>(...a)=>Wt(t,(l,d)=>l&&s(d).apply(void 0,a),!0),rh=(t,s)=>(...a)=>Wt(t,(l,d)=>l||s(d).apply(void 0,a),!1),bp=t=>Qe(t)?{can:bt,abort:Kt,run:t}:t,E0=t=>{const s=qc(t,d=>d.can),a=rh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{$(t,g=>{g.run.apply(void 0,d)})}}},xn=te,ys=xn("touchstart"),va=xn("touchmove"),Sc=xn("touchend"),yi=xn("touchcancel"),xc=xn("mousedown"),ml=xn("mousemove"),Ou=xn("mouseout"),vp=xn("mouseup"),Vd=xn("mouseover"),Wm=xn("focusin"),KT=xn("focusout"),Zm=xn("keydown"),YT=xn("keyup"),Wf=xn("input"),yp=xn("change"),Cp=xn("click"),jr=xn("transitioncancel"),zd=xn("transitionend"),XT=xn("transitionstart"),db=xn("selectstart"),Or=t=>te("alloy."+t),x2={tap:Or("tap")},Ud=Or("focus"),wp=Or("blur.post"),_0=Or("paste.post"),Ji=Or("receive"),Xl=Or("execute"),jm=Or("focus.item"),ah=x2.tap,mb=Or("longpress"),Sp=Or("sandbox.close"),Zf=Or("typeahead.cancel"),fb=Or("system.init"),T2=Or("system.touchmove"),JT=Or("system.touchend"),gb=Or("system.scroll"),xp=Or("system.resize"),dd=Or("system.attached"),ch=Or("system.detached"),Wd=Or("system.dismissRequested"),hb=Or("system.repositionRequested"),Tp=Or("focusmanager.shifted"),A0=Or("slotcontainer.visibility"),pb=Or("change.tab"),k2=Or("dismiss.tab"),O0=Or("highlight"),bb=Or("dehighlight"),es=(t,s)=>{jd(t,t.element,s,{})},mn=(t,s,a)=>{jd(t,t.element,s,a)},Zd=t=>{es(t,Xl())},D0=(t,s,a)=>{jd(t,s,a,{})},jd=(t,s,a,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(a,s,d)},vb=(t,s,a,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(a,s,d)},E2=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},Es=t=>vs(t),_2=(t,s)=>({key:t,value:Au({abort:s})}),Gd=(t,s)=>({key:t,value:Au({can:s})}),A2=t=>({key:t,value:Au({run:(s,a)=>{a.event.prevent()}})}),Xe=(t,s)=>({key:t,value:Au({run:s})}),md=(t,s,a)=>({key:t,value:Au({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),lh=t=>s=>Xe(t,s),kp=t=>s=>({key:t,value:Au({run:(a,l)=>{_u(a,l)&&s(a,l)}})}),QT=(t,s)=>Xe(t,(a,l)=>{a.getSystem().getByUid(s).each(d=>{E2(d,d.element,t,l)})}),jf=(t,s,a)=>{const l=s.partUids[a];return QT(t,l)},ih=(t,s)=>Xe(t,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>ud(d.target,C=>a.getSystem().getByDom(C).toOptional(),Kt).getOr(a));s(a,g,l)}),uh=t=>Xe(t,(s,a)=>{a.cut()}),O2=t=>Xe(t,(s,a)=>{a.stop()}),Na=(t,s)=>kp(t)(s),dr=kp(dd()),Ci=kp(ch()),ek=kp(fb()),Jl=lh(Xl()),$c=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,ws(Je.fromDom(l))},qd=t=>t.dom.innerHTML,Gm=(t,s)=>{const l=ga(t).dom,d=Je.fromDom(l.createDocumentFragment()),g=$c(s,l);Wl(d,g),sd(t),rc(t,d)},D2=t=>{const s=Je.fromTag("div"),a=Je.fromDom(t.dom.cloneNode(!0));return rc(s,a),qd(s)},lc=(t,s)=>Je.fromDom(t.dom.cloneNode(s)),R2=t=>lc(t,!1),M2=t=>{if(Ie(t))return"#shadow-root";{const s=R2(t);return D2(s)}},qm=t=>M2(t),R0=(t,s,a)=>ns(s,t.element)&&!ns(s,a),Du=Es([Gd(Ud(),(t,s)=>{const a=s.event,l=a.originator,d=a.target;return R0(t,l,d)?(console.warn(Ud()+` did not get interpreted by the desired target. 
Originator: `+qm(l)+`
Target: `+qm(d)+`
Check the `+Ud()+" event handlers"),!1):!0})]);var yb=Object.freeze({__proto__:null,events:Du});let M0=0;const Ht=t=>{const a=new Date().getTime(),l=Math.floor(Math.random()*1e9);return M0++,t+"_"+l+M0+String(a)},tk=te("alloy-id-"),N2=te("data-alloy-id"),Cb=tk(),dh=N2(),wb=(t,s)=>{const a=Ht(Cb+t);return mh(s,a),a},mh=(t,s)=>{Object.defineProperty(t.dom,dh,{value:s,writable:!0})},Gf=t=>{const s=Os(t)?t.dom[dh]:null;return O.from(s)},fd=t=>Ht(t),N0=cn,Km=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+qm(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:te("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Kt}},nk=Km(),Kd=(t,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),p=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:qf(p.slice(0,1).concat(p.slice(3)))}),t},qf=t=>We(t,s=>ce(s,"/*")?s.substring(0,s.length-2):s),Sb=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:qf(g)}),t},xb=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:qf(g.slice(1))}),t},Ep=Ht("alloy-premade"),_p=t=>(Object.defineProperty(t.element.dom,Ep,{value:t.uid,writable:!0}),ss(Ep,t)),ok=t=>In(t.dom,Ep),Ru=t=>Zt(t,Ep),fh=t=>xb((s,...a)=>t(s.getApis(),s,...a),t),Qi={init:()=>fl({readState:te("No State required")})},fl=t=>t,Ap=(t,s)=>{const a=We(s,d=>Gc(d.name(),[Ze("config"),Ce("state",Qi)])),l=Fo("component.behaviours",nn(a),t.behaviours).fold(d=>{throw new Error(Yi(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},cn);return{list:s,data:Lo(l,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return te(g)})}},Ms=t=>t.list,sk=t=>t.data,B2=(t,s)=>{const a={};return Un(t,(l,d)=>{Un(l,(g,p)=>{const C=Zt(a,p).getOr([]);a[p]=C.concat([s(d,g)])})}),a},eu=t=>({classes:Bt(t.classes)?[]:t.classes,attributes:Bt(t.attributes)?{}:t.attributes,styles:Bt(t.styles)?{}:t.styles}),Tb=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),P2=(t,s,a,l)=>{const d={...s};$(a,D=>{d[D.name()]=D.exhibit(t,l)});const g=B2(d,(D,M)=>({name:D,modification:M})),p=D=>at(D,(M,V)=>({...V.modification,...M}),{}),C=at(g.classes,(D,M)=>M.modification.concat(D),[]),k=p(g.attributes),_=p(g.styles);return eu({classes:C,attributes:k,styles:_})},gd=(t,s,a,l)=>{try{const d=jn(a,(g,p)=>{const C=g[s],k=p[s],_=l.indexOf(C),D=l.indexOf(k);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+k+`.
Order specified: `+JSON.stringify(l,null,2));return _<D?-1:D<_?1:0});return Pn.value(d)}catch(d){return Pn.error([d])}},Ga=(t,s)=>({handler:t,purpose:s}),rk=(t,s)=>({cHandler:t,purpose:s}),Op=(t,s)=>rk(At.apply(void 0,[t.handler].concat(s)),t.purpose),Kf=t=>t.cHandler,gh=(t,s)=>({name:t,handler:s}),kb=(t,s)=>{const a={};return $(t,l=>{a[l.name()]=l.handlers(s)}),a},$2=(t,s,a)=>{const l={...a,...kb(s,t)};return B2(l,gh)},Tc=(t,s,a,l)=>{const d=$2(t,a,l);return Z4(d,s)},U4=t=>{const s=bp(t);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},I2=(t,s)=>Pn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(We(s,a=>a.name),null,2)]),W4=(t,s,a)=>{const l=s[a];return l?gd("Event: "+a,"name",t,l).map(d=>{const g=We(d,p=>p.handler);return E0(g)}):I2(a,t)},Z4=(t,s)=>{const a=Dn(t,(l,d)=>(l.length===1?Pn.value(l[0].handler):W4(l,s,d)).map(p=>{const C=U4(p),k=l.length>1?ze(s[d],_=>oo(l,D=>D.name===_)).join(" > "):l[0].name;return ss(d,Ga(C,k))}));return Eu(a,{})},Ql="alloy.base.behaviour",kc=nn([Ra("dom","dom",ja(),nn([Ze("tag"),Ce("styles",{}),Ce("classes",[]),Ce("attributes",{}),Ho("value"),Ho("innerHtml")])),Ze("components"),Ze("uid"),Ce("events",{}),Ce("apis",{}),Ra("eventOrder","eventOrder",sb({[Xl()]:["disabling",Ql,"toggling","typeaheadevents"],[Ud()]:[Ql,"focusing","keying"],[fb()]:[Ql,"disabling","toggling","representing"],[Wf()]:[Ql,"representing","streaming","invalidating"],[ch()]:[Ql,"representing","item-events","tooltipping"],[xc()]:["focusing",Ql,"item-type-events"],[ys()]:["focusing",Ql,"item-type-events"],[Vd()]:["item-type-events","tooltipping"],[Ji()]:["receiving","reflecting","tooltipping"]}),Nc()),Ho("domModification")]),Kc=t=>Fo("custom.definition",kc,t),L2=t=>({...t.dom,uid:t.uid,domChildren:We(t.components,s=>s.element)}),ak=t=>t.domModification.fold(()=>eu({}),eu),Ym=t=>t.events,hh=(t,s)=>{const a=Ls(t,s);return a===void 0||a===""?[]:a.split(" ")},Eb=(t,s,a)=>{const d=hh(t,s).concat([a]);return Rn(t,s,d.join(" ")),!0},Dp=(t,s,a)=>{const l=ze(hh(t,s),d=>d!==a);return l.length>0?Rn(t,s,l.join(" ")):ne(t,s),!1},Mu=t=>t.dom.classList!==void 0,Yf=t=>hh(t,"class"),ph=(t,s)=>Eb(t,"class",s),bh=(t,s)=>Dp(t,"class",s),Gr=(t,s)=>{Mu(t)?t.dom.classList.add(s):ph(t,s)},Rp=t=>{(Mu(t)?t.dom.classList:Yf(t)).length===0&&ne(t,"class")},Lr=(t,s)=>{Mu(t)?t.dom.classList.remove(s):bh(t,s),Rp(t)},Rl=(t,s)=>Mu(t)&&t.dom.classList.contains(s),Yd=(t,s)=>{$(s,a=>{Gr(t,a)})},ei=(t,s)=>{$(s,a=>{Lr(t,a)})},F2=(t,s)=>Fe(s,a=>Rl(t,a)),ck=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},lk=t=>Mu(t)?ck(t):Yf(t),ti=t=>t.dom.value,Xm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},H2=(t,s,a)=>Ea(t,s).map(d=>{if(a.exists(p=>!ns(p,d))){const p=a.map(Bo).getOr("span"),C=Je.fromTag(p);return wu(d,C),C}else return d}),V2=(t,s,a)=>{a.fold(()=>rc(t,s),l=>{ns(l,s)||(wu(l,s),Zi(l))})},B0=(t,s,a)=>{const l=We(s,a),d=ws(t);return $(d.slice(l.length),Zi),l},P0=(t,s,a,l)=>{const d=Ea(t,s),g=l(a,d),p=H2(t,s,d);return V2(t,g.element,p),g},Xf=(t,s,a)=>B0(t,s,(l,d)=>P0(t,d,l,a)),$0=(t,s)=>B0(t,s,(a,l)=>{const d=Ea(t,l);return V2(t,a,d),a}),z2=(t,s)=>{const a=yn(t),l=yn(s),d=kt(l,a),g=Jr(t,(p,C)=>!In(s,C)||p!==s[C]).t;return{toRemove:d,toSet:g}},U2=(t,s)=>{const{class:a,style:l,...d}=we(s),{toSet:g,toRemove:p}=z2(t.attributes,d),C=()=>{$(p,ht=>ne(s,ht)),Ao(s,g)},k=Pr(s),{toSet:_,toRemove:D}=z2(t.styles,k),M=()=>{$(D,ht=>Vn(s,ht)),yr(s,_)},V=lk(s),z=kt(V,t.classes),Q=kt(t.classes,V),se=()=>{Yd(s,Q),ei(s,z)},ke=ht=>{Gm(s,ht)},fe=()=>{const ht=t.domChildren;$0(s,ht)},Ee=()=>{const ht=s,Ae=t.value.getOrUndefined();Ae!==ti(ht)&&Xm(ht,Ae??"")};return C(),se(),M(),t.innerHtml.fold(fe,ke),Ee(),s},W2=t=>{const s=Je.fromTag(t.tag);Ao(s,t.attributes),Yd(s,t.classes),yr(s,t.styles),t.innerHtml.each(l=>Gm(s,l));const a=t.domChildren;return Wl(s,a),t.value.each(l=>{Xm(s,l)}),s},Jm=(t,s)=>{try{const a=U2(t,s);return O.some(a)}catch{return O.none()}},vh=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Jf=(t,s)=>{const a=d=>Bo(d)===t.tag&&!vh(t)&&!ok(d),l=s.filter(a).bind(d=>Jm(t,d)).getOrThunk(()=>W2(t));return mh(l,t.uid),l},Z2=t=>{const s=Zt(t,"behaviours").getOr({});return Go(yn(s),a=>{const l=s[a];return co(l)?[l.me]:[]})},ik=(t,s)=>Ap(t,s),I0=t=>{const s=Z2(t);return ik(t,s)},Mp=(t,s,a)=>{const l=L2(t),d=ak(t),g={"alloy.base.modification":d},p=s.length>0?P2(a,g,s,l):d;return Tb(l,p)},Np=(t,s,a)=>{const l={"alloy.base.behaviour":Ym(t)};return Tc(a,t.eventOrder,s,l).getOrDie()},j2=(t,s)=>{const a=()=>ht,l=H(nk),d=Ki(Kc(t)),g=I0(t),p=Ms(g),C=sk(g),k=Mp(d,p,C),_=Jf(k,s),D=Np(d,p,C),M=H(d.components),V=Ae=>{l.set(Ae)},z=()=>{l.set(Km(a))},Q=()=>{const Ae=ws(_),Ct=Go(Ae,Lt=>l.get().getByDom(Lt).fold(()=>[],qo));M.set(Ct)},se=Ae=>{const Ct=C;return(Qe(Ct[Ae.name()])?Ct[Ae.name()]:()=>{throw new Error("Could not find "+Ae.name()+" in "+JSON.stringify(t,null,2))})()},ke=Ae=>Qe(C[Ae.name()]),fe=()=>d.apis,Ee=Ae=>C[Ae]().map(Ct=>Ct.state.readState()).getOr("not enabled"),ht={uid:t.uid,getSystem:l.get,config:se,hasConfigured:ke,spec:t,readState:Ee,getApis:fe,connect:V,disconnect:z,element:_,syncComponents:Q,components:M.get,events:D};return ht},uk=(t,s)=>{const a=Zt(t,"components").getOr([]);return s.fold(()=>We(a,Yc),l=>We(a,(d,g)=>Ab(d,Ea(l,g))))},G2=(t,s)=>{const{events:a,...l}=N0(t),d=uk(l,s),g={...l,events:{...yb,...a},components:d};return Pn.value(j2(g,s))},ya=t=>{const s=Je.fromText(t);return _b({element:s})},_b=t=>{const s=ac("external.component",Da([Ze("element"),Ho("uid")]),t),a=H(Km()),l=C=>{a.set(C)},d=()=>{a.set(Km(()=>p))},g=s.uid.getOrThunk(()=>fd("external"));mh(s.element,g);const p={uid:g,getSystem:a.get,config:O.none,hasConfigured:Kt,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:te("No state"),syncComponents:oe,components:te([]),events:{}};return _p(p)},Bp=fd,Qm=t=>In(t,"uid"),Ab=(t,s)=>Ru(t).getOrThunk(()=>{const a=Qm(t)?t:{uid:Bp(""),...t};return G2(a,s).getOrDie()}),Yc=t=>Ab(t,O.none()),ni=_p;var dk=(t,s,a,l,d)=>t(a,l)?O.some(a):Qe(d)&&d(a)?O.none():s(a,l,d);const ef=(t,s,a)=>{let l=t.dom;const d=Qe(a)?a:Kt;for(;l.parentNode;){l=l.parentNode;const g=Je.fromDom(l);if(s(g))return O.some(g);if(d(g))break}return O.none()},q2=(t,s,a)=>dk((d,g)=>g(d),ef,t,s,a),yh=(t,s)=>{const a=d=>s(Je.fromDom(d));return zt(t.dom.childNodes,a).map(Je.fromDom)},K2=(t,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=Je.fromDom(l.childNodes[d]);if(s(g))return O.some(g);const p=a(l.childNodes[d]);if(p.isSome())return p}return O.none()};return a(t.dom)},Y2=(t,s,a)=>q2(t,s,a).isSome(),Xd=(t,s,a)=>ef(t,l=>Sl(l,s),a),mk=(t,s)=>yh(t,a=>Sl(a,s)),Fr=(t,s)=>$i(s,t),wi=(t,s,a)=>dk((d,g)=>Sl(d,g),Xd,t,s,a),Ch="aria-controls",Ob=t=>q2(t,a=>{if(!Os(a))return!1;const l=Ls(a,"id");return l!==void 0&&l.indexOf(Ch)>-1}).bind(a=>{const l=Ls(a,"id"),d=fo(a);return Fr(d,`[${Ch}="${l}"]`)}),Db=()=>{const t=Ht(Ch);return{id:t,link:l=>{Rn(l,Ch,t)},unlink:l=>{ne(l,Ch)}}},Pp=(t,s)=>Ob(s).exists(a=>Jd(t,a)),Jd=(t,s)=>Y2(s,a=>ns(a,t.element),Kt)||Pp(t,s),Rb="unknown";var wh;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(wh||(wh={}));const L0=H({}),Qf=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();yo(["mousemove","mouseover","mouseout",fb()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:We(a,g=>yo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+qm(g.target)+")":g.outcome)})}}},Qd=(t,s,a)=>{switch(Zt(L0.get(),t).orThunk(()=>{const d=yn(L0.get());return er(d,g=>t.indexOf(g)>-1?O.some(L0.get()[g]):O.none())}).getOr(wh.NORMAL)){case wh.NORMAL:return a(fk());case wh.LOGGING:{const d=Qf(t,s),g=a(d);return d.write(),g}case wh.STOP:return!0}},tf=["alloy/data/Fields","alloy/debugging/Debugging"],X2=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return zt(s,a=>a.indexOf("alloy")>0&&!oo(tf,l=>a.indexOf(l)>-1)).getOr(Rb)}else return Rb},Pe={logEventCut:oe,logEventStopped:oe,logNoParent:oe,logEventNoHandlers:oe,logEventResponse:oe,write:oe},Sh=(t,s,a)=>Qd(t,s,a),fk=te(Pe),F0=te([Ze("menu"),Ze("selectedMenu")]),Mb=te([Ze("item"),Ze("selectedItem")]);te(nn(Mb().concat(F0())));const qr=te(nn(Mb())),J2=ql("initSize",[Ze("numColumns"),Ze("numRows")]),Q2=()=>dl("markers",qr()),$p=()=>ql("markers",[Ze("backgroundMenu")].concat(F0()).concat(Mb())),em=t=>ql("markers",We(t,Ze)),xh=(t,s,a)=>(X2(),Ra(s,s,a,$r(l=>Pn.value((...d)=>l.apply(void 0,d))))),Co=t=>xh("onHandler",t,Su(oe)),Ml=t=>xh("onKeyboardHandler",t,Su(O.none)),nf=t=>xh("onHandler",t,ja()),H0=t=>xh("onKeyboardHandler",t,ja()),Ns=(t,s)=>cc(t,te(s)),V0=t=>cc(t,cn),Ip=te(J2),qa=(t,s,a,l,d,g,p,C=!1)=>({x:t,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:C}),Nu=Re.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),gl=(t,s,a,l,d,g,p,C,k)=>t.fold(s,a,l,d,g,p,C,k),Lp=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),gk=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),Th=Nu.southeast,Nb=Nu.southwest,Bb=Nu.northeast,Pb=Nu.northwest,ew=Nu.south,z0=Nu.north,tw=Nu.east,$b=Nu.west,eg=(t,s,a,l)=>{const d=t+s;return d>l?a:d<a?l:d},oi=(t,s,a)=>Math.min(Math.max(t,s),a),hk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ba=(t,s)=>Mt(["left","right","top","bottom"],a=>Zt(s,a).map(l=>hk(t,l))),nw=(t,s,a)=>{const l=(k,_)=>s[k].map(D=>{const M=k==="top"||k==="bottom",V=M?a.top:a.left,Q=(k==="left"||k==="top"?Math.max:Math.min)(D,_)+V;return M?oi(Q,t.y,t.bottom):oi(Q,t.x,t.right)}).getOr(_),d=l("left",t.x),g=l("top",t.y),p=l("right",t.right),C=l("bottom",t.bottom);return Yt(d,g,p-d,C-g)},tm="layout",pk=t=>t.x,Xc=(t,s)=>t.x+t.width/2-s.width/2,Ib=(t,s)=>t.x+t.width-s.width,tu=(t,s)=>t.y-s.height,U0=t=>t.y+t.height,ow=(t,s)=>t.y+t.height/2-s.height/2,bk=t=>t.x+t.width,vk=(t,s)=>t.x-s.width,ic=(t,s,a)=>qa(pk(t),U0(t),a.southeast(),Th(),"southeast",Ba(t,{left:1,top:3}),tm),uc=(t,s,a)=>qa(Ib(t,s),U0(t),a.southwest(),Nb(),"southwest",Ba(t,{right:0,top:3}),tm),Ic=(t,s,a)=>qa(pk(t),tu(t,s),a.northeast(),Bb(),"northeast",Ba(t,{left:1,bottom:2}),tm),Ec=(t,s,a)=>qa(Ib(t,s),tu(t,s),a.northwest(),Pb(),"northwest",Ba(t,{right:0,bottom:2}),tm),Nl=(t,s,a)=>qa(Xc(t,s),tu(t,s),a.north(),z0(),"north",Ba(t,{bottom:2}),tm),Ca=(t,s,a)=>qa(Xc(t,s),U0(t),a.south(),ew(),"south",Ba(t,{top:3}),tm),Lb=(t,s,a)=>qa(bk(t),ow(t,s),a.east(),tw(),"east",Ba(t,{left:0}),tm),Fb=(t,s,a)=>qa(vk(t,s),ow(t,s),a.west(),$b(),"west",Ba(t,{right:1}),tm),sw=()=>[ic,uc,Ic,Ec,Ca,Nl,Lb,Fb],Hb=()=>[uc,ic,Ec,Ic,Ca,Nl,Lb,Fb],Rt=()=>[Ic,Ec,ic,uc,Nl,Ca],tg=()=>[Ec,Ic,uc,ic,Nl,Ca],Vb=()=>[ic,uc,Ic,Ec,Ca,Nl],W0=()=>[uc,ic,Ec,Ic,Ca,Nl],yk=(t,s)=>s.universal?t:ze(t,a=>yo(s.channels,a));var rw=Object.freeze({__proto__:null,events:t=>Es([Xe(Ji(),(s,a)=>{const l=t.channels,d=yn(l),g=a,p=yk(d,g);$(p,C=>{const k=l[C],_=k.schema,D=ac("channel["+C+`] data
Receiver: `+qm(s.element),_,g.data);k.onReceive(s,D)})})])}),Ck=[dl("channels",oh(Pn.value,Da([nf("onReceive"),Ce("schema",Nc())])))];const wk=(t,s,a)=>Jl(l=>{a(l,t,s)}),zb=(t,s,a)=>ek((l,d)=>{a(l,t,s)}),Sk=(t,s,a,l,d,g)=>{const p=Da(t),C=Gc(s,[pp("config",t)]);return aw(p,C,s,a,l,d,g)},si=(t,s,a,l,d,g)=>{const p=t,C=Gc(s,[Dl("config",t)]);return aw(p,C,s,a,l,d,g)},Fp=(t,s,a)=>Kd((d,...g)=>{const p=[d].concat(g);return d.config({name:te(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const k=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,C.config,C.state].concat(k))})},a,s),xk=t=>({key:t,value:void 0}),aw=(t,s,a,l,d,g,p)=>{const C=M=>Zs(M,a)?M[a]():O.none(),k=Lo(d,(M,V)=>Fp(a,M,V)),D={...Lo(g,(M,V)=>Sb(M,V)),...k,revoke:At(xk,a),config:M=>{const V=ac(a+"-config",t,M);return{key:a,value:{config:V,me:D,configAsRaw:hr(()=>ac(a+"-config",t,M)),initialConfig:M,state:p}}},schema:te(s),exhibit:(M,V)=>us(C(M),Zt(l,"exhibit"),(z,Q)=>Q(V,z.config,z.state)).getOrThunk(()=>eu({})),name:te(a),handlers:M=>C(M).map(V=>Zt(l,"events").getOr(()=>({}))(V.config,V.state)).getOr({})};return D},ut=t=>vs(t),Tk=Da([Ze("fields"),Ze("name"),Ce("active",{}),Ce("apis",{}),Ce("state",Qi),Ce("extra",{})]),Ka=t=>{const s=ac("Creating behaviour: "+t.name,Tk,t);return Sk(s.fields,s.name,s.active,s.apis,s.extra,s.state)},cw=Da([Ze("branchKey"),Ze("branches"),Ze("name"),Ce("active",{}),Ce("apis",{}),Ce("state",Qi),Ce("extra",{})]),Z0=t=>{const s=ac("Creating behaviour: "+t.name,cw,t);return si(Zc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},kk=te(void 0),Si=Ka({fields:Ck,name:"receiving",active:rw});var Ek=Object.freeze({__proto__:null,exhibit:(t,s)=>eu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const nm=t=>t.dom.focus(),lw=t=>t.dom.blur(),j0=t=>{const s=fo(t).dom;return t.dom===s.activeElement},Bl=(t=E())=>O.from(t.dom.activeElement).map(Je.fromDom),xi=t=>Bl(fo(t)).filter(s=>t.dom.contains(s.dom)),Ub=(t,s)=>{const a=fo(s),l=Bl(a).bind(g=>{const p=C=>ns(g,C);return p(s)?O.some(s):K2(s,p)}),d=t(s);return l.each(g=>{Bl(a).filter(p=>ns(p,g)).fold(()=>{nm(g)},oe)}),d},Bu=(t,s,a,l,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},iw=t=>({...t,position:O.some(t.position)}),Hp=(t,s)=>{Gs(t,iw(s))},wa=Re.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),uw=(t,s,a,l,d,g)=>{const p=s.rect,C=p.x-a,k=p.y-l,_=p.width,D=p.height,M=d-(C+_),V=g-(k+D),z=O.some(C),Q=O.some(k),se=O.some(M),ke=O.some(V),fe=O.none();return gl(s.direction,()=>Bu(t,z,Q,fe,fe),()=>Bu(t,fe,Q,se,fe),()=>Bu(t,z,fe,fe,ke),()=>Bu(t,fe,fe,se,ke),()=>Bu(t,z,Q,fe,fe),()=>Bu(t,z,fe,fe,ke),()=>Bu(t,z,Q,fe,fe),()=>Bu(t,fe,Q,se,fe))},of=(t,s)=>t.fold(()=>{const a=s.rect;return Bu("absolute",O.some(a.x),O.some(a.y),O.none(),O.none())},(a,l,d,g)=>uw("absolute",s,a,l,d,g),(a,l,d,g)=>uw("fixed",s,a,l,d,g)),Wb=(t,s)=>{const a=At(pn,s),l=t.fold(a,a,()=>{const p=Al();return pn(s).translate(-p.left,-p.top)}),d=wr(s),g=Hi(s);return Yt(l.left,l.top,d,g)},dw=(t,s)=>s.fold(()=>t.fold(Oa,Oa,Yt),a=>t.fold(a,a,()=>{const l=a(),d=G0(t,l.x,l.y);return Yt(d.left,d.top,l.width,l.height)})),G0=(t,s,a)=>{const l=Ds(s,a),d=()=>{const g=Al();return l.translate(-g.left,-g.top)};return t.fold(te(l),te(l),d)},_k=(t,s,a,l)=>t.fold(s,a,l);wa.none;const Ak=wa.relative,q0=wa.fixed,Ok=(t,s)=>({anchorBox:t,origin:s}),ng=(t,s)=>Ok(t,s),Vp="data-alloy-placement",Zb=(t,s)=>{Rn(t,Vp,s)},K0=t=>B(t,Vp),og=t=>ne(t,Vp),sg=Re.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),kh=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y:C,right:k,bottom:_,width:D,height:M}=t,V=p>=a&&p<=d,z=C>=l&&C<=g,Q=V&&z,se=k<=d&&k>=a,ke=_<=g&&_>=l,fe=se&&ke,Ee=Math.min(D,p>=a?d-p:k-a),ht=Math.min(M,C>=l?g-C:_-l);return{originInBounds:Q,sizeInBounds:fe,visibleW:Ee,visibleH:ht}},zp=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y:C,width:k,height:_}=t,D=Math.max(a,d-k),M=Math.max(l,g-_),V=oi(p,a,D),z=oi(C,l,M),Q=Math.min(V+k,d)-V,se=Math.min(z+_,g)-z;return Yt(V,z,Q,se)},Dk=(t,s,a)=>{const l=te(s.bottom-a.y),d=te(a.bottom-s.y),g=Lp(t,d,d,l),p=te(s.right-a.x),C=te(a.right-s.x);return{maxWidth:gk(t,C,C,p),maxHeight:g}},mw=(t,s,a,l)=>{const d=t.bubble,g=d.offset,p=nw(l,t.restriction,g),C=t.x+g.left,k=t.y+g.top,_=Yt(C,k,s,a),{originInBounds:D,sizeInBounds:M,visibleW:V,visibleH:z}=kh(_,p),Q=D&&M,se=Q?_:zp(_,p),ke=se.width>0&&se.height>0,{maxWidth:fe,maxHeight:Ee}=Dk(t.direction,se,l),ht={rect:se,maxHeight:Ee,maxWidth:fe,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:k};return Q||t.alwaysFit?sg.fit(ht):sg.nofit(ht,V,z,ke)},Y0=(t,s,a,l,d,g)=>{const p=l.width,C=l.height,k=(D,M,V,z,Q)=>{const se=D(a,l,d,t,g),ke=mw(se,p,C,g);return ke.fold(te(ke),(fe,Ee,ht,Ae)=>(Q===Ae?ht>z||Ee>V:!Q&&Ae)?ke:sg.nofit(M,V,z,Q))};return Wt(s,(D,M)=>{const V=At(k,M);return D.fold(te(D),V)},sg.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:Th(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(cn,cn)},X0=t=>{const s=H(O.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(O.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(O.some(C))}}},Rk=()=>X0(t=>t.destroy()),rg=()=>X0(t=>t.unbind()),mr=()=>{const t=X0(oe);return{...t,on:a=>t.get().each(a)}},J0=bt,Lc=(t,s,a)=>Fd(t,s,J0,a),Q0=(t,s,a)=>Nf(t,s,J0,a),ey=Rm,Up=["top","bottom","right","left"],jb="data-alloy-transition-timer",Wp=(t,s)=>F2(t,s.classes),fw=(t,s,a)=>a.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),q4=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return vc(s,(l,d)=>{const g=t[d].map(a),p=l.map(a);return!mi(g,p)}).isSome()},sf=t=>{const s=g=>{const C=Ge(t,g).split(/\s*,\s*/);return ze(C,$e)},a=g=>{if(xt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return ce(g,"ms")?p:p*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return Wt(d,(g,p,C)=>{const k=a(l[C])+a(p);return Math.max(g,k)},0)},Mk=(t,s)=>{const a=rg(),l=rg();let d;const g=_=>{var D;const M=(D=_.raw.pseudoElement)!==null&&D!==void 0?D:"";return ns(_.target,t)&&jt(M)&&yo(Up,_.raw.propertyName)},p=_=>{if($n(_)||g(_)){a.clear(),l.clear();const D=_==null?void 0:_.raw.type;($n(D)||D===zd())&&(clearTimeout(d),ne(t,jb),ei(t,s.classes))}},C=Lc(t,XT(),_=>{g(_)&&(C.unbind(),a.set(Lc(t,zd(),p)),l.set(Lc(t,jr(),p)))}),k=sf(t);requestAnimationFrame(()=>{d=setTimeout(p,k+17),Rn(t,jb,d)})},Nk=(t,s)=>{Yd(t,s.classes),B(t,jb).each(a=>{clearTimeout(parseInt(a,10)),ne(t,jb)}),Mk(t,s)},Bk=(t,s,a,l,d,g)=>{const p=fw(l,d,g);if(p||Wp(t,l)){$t(t,"position",a.position);const C=Wb(s,t),k=of(s,{...d,rect:C}),_=Mt(Up,D=>k[D]);q4(a,_)&&(Gs(t,_),p&&Nk(t,l),gi(t))}else ei(t,l.classes)},Pk=t=>({width:wr(t),height:Hi(t)}),gw=(t,s,a,l)=>{Vn(s,"max-height"),Vn(s,"max-width");const d=Pk(s);return Y0(s,l.preference,t,d,a,l.bounds)},ty=(t,s)=>{const a=s.classes;ei(t,a.off),Yd(t,a.on)},$k=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},Ik=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},Gb=(t,s,a)=>{const l=of(a.origin,s);a.transition.each(d=>{Bk(t,a.origin,l,d,s,a.lastPlacement)}),Hp(t,l)},Lk=(t,s)=>{Zb(t,s.placement)},hw=(t,s)=>{Fs(t,Math.floor(s))},Fk=te((t,s)=>{hw(t,s),yr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Zp=te((t,s)=>{hw(t,s)}),ny=(t,s,a)=>t[s]===void 0?a:t[s],pw=(t,s,a,l,d,g,p,C)=>{const k=ny(p,"maxHeightFunction",Fk()),_=ny(p,"maxWidthFunction",oe),D=t.anchorBox,M=t.origin,V={bounds:dw(M,g),origin:M,preference:l,maxHeightFunction:k,maxWidthFunction:_,lastPlacement:d,transition:C};return bw(D,s,a,V)},bw=(t,s,a,l)=>{const d=gw(t,s,a,l);return Gb(s,d,l),Lk(s,d),ty(s,d),$k(s,d,l),Ik(s,d,l),{layout:d.layout,placement:d.placement}},vw=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ag=(t,s,a,l=1)=>{const d=t*l,g=s*l,p=k=>Zt(a,k).getOr([]),C=(k,_,D)=>{const M=kt(vw,D);return{offset:Ds(k,_),classesOn:Go(D,p),classesOff:Go(M,p)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},cg=()=>ag(0,0,{}),rf=cn,Eh=(t,s)=>a=>yw(a)==="rtl"?s:t,yw=t=>Ge(t,"direction")==="rtl"?"rtl":"ltr";var om;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(om||(om={}));const oy="data-alloy-vertical-dir",Hk=t=>Y2(t,s=>Os(s)&&Ls(s,"data-alloy-vertical-dir")===om.BottomToTop),af=()=>Gc("layouts",[Ze("onLtr"),Ze("onRtl"),Ho("onBottomLtr"),Ho("onBottomRtl")]),qb=(t,s,a,l,d,g,p)=>{const C=p.map(Hk).getOr(!1),k=s.layouts.map(z=>z.onLtr(t)),_=s.layouts.map(z=>z.onRtl(t)),D=C?s.layouts.bind(z=>z.onBottomLtr.map(Q=>Q(t))).or(k).getOr(d):k.getOr(a),M=C?s.layouts.bind(z=>z.onBottomRtl.map(Q=>Q(t))).or(_).getOr(g):_.getOr(l);return Eh(D,M)(t)},Vk=(t,s,a)=>{const l=s.hotspot,d=Wb(a,l.element),g=qb(t.element,s,Vb(),W0(),Rt(),tg(),O.some(s.hotspot.element));return O.some(rf({anchorBox:d,bubble:s.bubble.getOr(cg()),overrides:s.overrides,layouts:g,placer:O.none()}))};var sy=[Ze("hotspot"),Ho("bubble"),Ce("overrides",{}),af(),Ns("placement",Vk)];const zk=(t,s,a)=>{const l=G0(a,s.x,s.y),d=Yt(l.left,l.top,s.width,s.height),g=qb(t.element,s,sw(),Hb(),sw(),Hb(),O.none());return O.some(rf({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g,placer:O.none()}))};var Uk=[Ze("x"),Ze("y"),Ce("height",0),Ce("width",0),Ce("bubble",cg()),Ce("overrides",{}),af(),Ns("placement",zk)];const ry=Re.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Cw=t=>t.fold(cn,(s,a,l)=>s.translate(-a,-l)),ww=t=>t.fold(cn,cn),ay=t=>Wt(t,(s,a)=>s.translate(a.left,a.top),Ds(0,0)),Sw=t=>{const s=We(t,Cw);return ay(s)},xw=t=>{const s=We(t,ww);return ay(s)},Wk=ry.screen,Kb=ry.absolute,Tw=(t,s,a)=>{const l=sl(a.root).dom,d=g=>{const p=ga(g),C=ga(t.element);return ns(p,C)};return O.from(l.frameElement).map(Je.fromDom).filter(d).map(Cr)},Yb=(t,s,a)=>{const l=ga(t.element),d=Al(l),g=Tw(t,s,a).getOr(d);return Kb(g,d.left,d.top)},hd=(t,s,a,l)=>{const d=Wk(Ds(t,s));return O.some(go(d,a,l))},cy=(t,s,a,l,d)=>t.map(g=>{const p=[s,g.point],C=_k(l,()=>xw(p),()=>xw(p),()=>Sw(p)),k=to(C.left,C.top,g.width,g.height),_=a.showAbove?Rt():Vb(),D=a.showAbove?tg():W0(),M=qb(d,a,_,D,_,D,O.none());return rf({anchorBox:k,bubble:a.bubble.getOr(cg()),overrides:a.overrides,layouts:M,placer:O.none()})}),ly=(t,s,a)=>{const l=Yb(t,a,s);return s.node.filter(Br).bind(d=>{const g=d.dom.getBoundingClientRect(),p=hd(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return cy(p,l,s,a,C)})};var kw=[Ze("node"),Ze("root"),Ho("bubble"),af(),Ce("overrides",{}),Ce("showAbove",!1),Ns("placement",ly)];const Ew="\uFEFF",iy=" ",Xb={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},jp=Re.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Gp=(t,s,a,l)=>t.fold(s,a,l),lg=t=>t.fold(cn,cn,cn),Zk=jp.before,uy=jp.on,jk=jp.after,Jb={before:Zk,on:uy,after:jk,cata:Gp,getStart:lg},qp=Re.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_w=t=>qp.exact(t.start,t.soffset,t.finish,t.foffset),Gk=t=>t.match({domRange:s=>Je.fromDom(s.startContainer),relative:(s,a)=>Jb.getStart(s),exact:(s,a,l,d)=>s}),qk=qp.domRange,Kk=qp.relative,Pa=qp.exact,_h=t=>{const s=Gk(t);return sl(s)},sm=Xb.create,rm={domRange:qk,relative:Kk,exact:Pa,exactFromRange:_w,getWin:_h,range:sm},Yk=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},cf=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},Pu=(t,s,a)=>{const l=t.document.createRange();return Yk(l,s),cf(l,a),l},Qb=(t,s,a,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},ev=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),dy=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?O.some(a).map(ev):O.none()},Aw=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?O.some(s).map(ev):O.none()},am=Re.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pd=(t,s,a)=>s(Je.fromDom(a.startContainer),a.startOffset,Je.fromDom(a.endContainer),a.endOffset),tv=(t,s)=>s.match({domRange:a=>({ltr:te(a),rtl:O.none}),relative:(a,l)=>({ltr:hr(()=>Pu(t,a,l)),rtl:hr(()=>O.some(Pu(t,l,a)))}),exact:(a,l,d,g)=>({ltr:hr(()=>Qb(t,a,l,d,g)),rtl:hr(()=>O.some(Qb(t,d,g,a,l)))})}),Ow=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>am.rtl(Je.fromDom(d.endContainer),d.endOffset,Je.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>pd(t,am.ltr,a)):pd(t,am.ltr,a)},Kp=(t,s)=>{const a=tv(t,s);return Ow(t,a)},Ah=(t,s)=>Kp(t,s).match({ltr:(l,d,g,p)=>{const C=t.document.createRange();return C.setStart(l.dom,d),C.setEnd(g.dom,p),C},rtl:(l,d,g,p)=>{const C=t.document.createRange();return C.setStart(g.dom,p),C.setEnd(l.dom,d),C}});am.ltr,am.rtl;const _c=(t,s)=>xl(s,t),Dw=(t,s,a,l)=>{const g=ga(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,l),g},lf=(t,s,a,l)=>{const d=Dw(t,s,a,l),g=ns(t,a)&&s===l;return d.collapsed&&!g},dc=t=>O.from(t.getSelection()),my=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return O.some(Xb.create(Je.fromDom(s.startContainer),s.startOffset,Je.fromDom(a.endContainer),a.endOffset))}else return O.none()},$u=t=>{if(t.anchorNode===null||t.focusNode===null)return my(t);{const s=Je.fromDom(t.anchorNode),a=Je.fromDom(t.focusNode);return lf(s,t.anchorOffset,a,t.focusOffset)?O.some(Xb.create(s,t.anchorOffset,a,t.focusOffset)):my(t)}},Yp=t=>dc(t).filter(s=>s.rangeCount>0).bind($u),nv=(t,s)=>{const a=Ah(t,s);return dy(a)},ig=(t,s)=>{const a=Ah(t,s);return Aw(a)},Oh=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?O.from(g.dom.nodeValue):O.none();return{get:a,getOption:l,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(fa,"text"),Rw=t=>Oh.get(t),bd=(t,s)=>({element:t,offset:s}),Dh=(t,s)=>{const a=ws(t);if(a.length===0)return bd(t,s);if(s<a.length)return bd(a[s],0);{const l=a[a.length-1],d=fa(l)?Rw(l).length:ws(l).length;return bd(l,d)}},Mw=(t,s)=>fa(t)?bd(t,s):Dh(t,s),Xp=(t,s)=>s.getSelection.getOrThunk(()=>()=>Yp(t))().map(l=>{const d=Mw(l.start,l.soffset),g=Mw(l.finish,l.foffset);return rm.range(d.element,d.offset,g.element,g.offset)}),cm=(t,s,a)=>{const l=sl(s.root).dom,d=Yb(t,a,s),g=Xp(l,s).bind(k=>ig(l,rm.exactFromRange(k)).orThunk(()=>{const D=Je.fromText(Ew);wu(k.start,D);const M=nv(l,rm.exact(D,0,D,1));return Zi(D),M}).bind(D=>hd(D.left,D.top,D.width,D.height))),C=Xp(l,s).bind(k=>Os(k.start)?O.some(k.start):zl(k.start)).getOr(t.element);return cy(g,d,s,a,C)};var Y4=[Ho("getSelection"),Ze("root"),Ho("bubble"),af(),Ce("overrides",{}),Ce("showAbove",!1),Ns("placement",cm)];const Jp="link-layout",Qp=t=>t.x+t.width,fy=(t,s)=>t.x-s.width,gy=(t,s)=>t.y-s.height+t.height,hy=t=>t.y,Nw=(t,s,a)=>qa(Qp(t),hy(t),a.southeast(),Th(),"southeast",Ba(t,{left:0,top:2}),Jp),ri=(t,s,a)=>qa(fy(t,s),hy(t),a.southwest(),Nb(),"southwest",Ba(t,{right:1,top:2}),Jp),Rh=(t,s,a)=>qa(Qp(t),gy(t,s),a.northeast(),Bb(),"northeast",Ba(t,{left:0,bottom:3}),Jp),ov=(t,s,a)=>qa(fy(t,s),gy(t,s),a.northwest(),Pb(),"northwest",Ba(t,{right:1,bottom:3}),Jp),vd=()=>[Nw,ri,Rh,ov],Jc=()=>[ri,Nw,ov,Rh],ai=(t,s,a)=>{const l=Wb(a,s.item.element),d=qb(t.element,s,vd(),Jc(),vd(),Jc(),O.none());return O.some(rf({anchorBox:l,bubble:cg(),overrides:s.overrides,layouts:d,placer:O.none()}))};var hl=[Ze("item"),af(),Ce("overrides",{}),Ns("placement",ai)],yd=Zc("type",{selection:Y4,node:kw,hotspot:sy,submenu:hl,makeshift:Uk});const py=[jc("classes",ta),Kl("mode","all",["all","layout","placement"])],ci=[Ce("useFixed",Kt),Ho("getBounds")],ug=[dl("anchor",yd),Gc("transition",py)],Jk=()=>{const t=document.documentElement;return q0(0,0,t.clientWidth,t.clientHeight)},X4=t=>{const s=Cr(t.element),a=t.element.dom.getBoundingClientRect();return Ak(s.left,s.top,a.width,a.height)},J4=(t,s,a,l,d,g,p)=>{const C=ng(a.anchorBox,s);return pw(C,d.element,a.bubble,a.layouts,g,l,a.overrides,p)},dg=(t,s,a,l,d)=>{by(t,s,a,l,d,O.none())},by=(t,s,a,l,d,g)=>{const p=g.map(ho);return e1(t,s,a,l,d,p)},e1=(t,s,a,l,d,g)=>{const p=ac("placement.info",nn(ug),d),C=p.anchor,k=l.element,_=a.get(l.uid);Ub(()=>{$t(k,"position","fixed");const D=Ss(k,"visibility");$t(k,"visibility","hidden");const M=s.useFixed()?Jk():X4(t),V=C.placement,z=g.map(te).or(s.getBounds);V(t,C,M).each(Q=>{const ke=Q.placer.getOr(J4)(t,M,Q,z,l,_,p.transition);a.set(l.uid,ke)}),D.fold(()=>{Vn(k,"visibility")},Q=>{$t(k,"visibility",Q)}),Ss(k,"left").isNone()&&Ss(k,"top").isNone()&&Ss(k,"right").isNone()&&Ss(k,"bottom").isNone()&&Qr(Ss(k,"position"),"fixed")&&Vn(k,"position")},k)};var vy=Object.freeze({__proto__:null,position:dg,positionWithin:by,positionWithinBounds:e1,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const d=l.element;$(["position","left","right","top","bottom"],g=>Vn(d,g)),og(d),a.clear(l.uid)}}),eE=Object.freeze({__proto__:null,init:()=>{let t={};return fl({readState:()=>t,clear:d=>{co(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Zt(t,d)})}});const Fc=Ka({fields:ci,name:"positioning",active:Ek,apis:vy,state:eE}),sv=t=>t.getSystem().isConnected(),mg=t=>{es(t,ch());const s=t.components();$(s,mg)},lm=t=>{const s=t.components();$(s,lm),es(t,dd())},t1=(t,s)=>{t.getSystem().addToWorld(s),Br(t.element)&&lm(s)},rv=t=>{mg(t),t.getSystem().removeFromWorld(t)},Pw=(t,s)=>{rc(t.element,s.element)},tE=t=>{$(t.components(),s=>Zi(s.element)),sd(t.element),t.syncComponents()},nE=(t,s,a)=>{const l=t.components();tE(t);const d=a(s),g=kt(l,d);$(g,p=>{mg(p),t.getSystem().removeFromWorld(p)}),$(d,p=>{sv(p)?Pw(t,p):(t.getSystem().addToWorld(p),Pw(t,p),Br(t.element)&&lm(p))}),t.syncComponents()},av=(t,s,a)=>{const l=t.components(),d=Go(s,C=>Ru(C).toArray());$(l,C=>{yo(d,C)||rv(C)});const g=a(s),p=kt(l,g);$(p,C=>{sv(C)&&rv(C)}),$(g,C=>{sv(C)||t1(t,C)}),t.syncComponents()},mc=(t,s)=>{$w(t,s,rc)},$w=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Br(t.element)&&lm(s),t.syncComponents()},Mh=t=>{mg(t),Zi(t.element),t.getSystem().removeFromWorld(t)},fc=t=>{const s=ea(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Mh(t),s.each(a=>{a.syncComponents()})},cv=t=>{const s=t.components();$(s,Mh),sd(t.element),t.syncComponents()},nu=(t,s)=>{Cy(t,s,rc)},yy=(t,s)=>{Cy(t,s,Zg)},Cy=(t,s,a)=>{a(t,s.element);const l=ws(s.element);$(l,d=>{s.getByDom(d).each(lm)})},oE=t=>{const s=ws(t.element);$(s,a=>{t.getByDom(a).each(mg)}),Zi(t.element)},sE=(t,s,a,l)=>{a.get().each(p=>{cv(t)});const d=s.getAttachPoint(t);mc(d,t);const g=t.getSystem().build(l);return mc(t,g),a.set(g),g},wy=(t,s,a,l)=>{const d=sE(t,s,a,l);return s.onOpen(t,d),d},Iw=(t,s,a,l)=>a.get().map(()=>sE(t,s,a,l)),rE=(t,s,a,l,d)=>{xy(t,s),wy(t,s,a,l),d(),fg(t,s)},n1=(t,s,a)=>{a.get().each(l=>{cv(t),fc(t),s.onClose(t,l),a.clear()})},Nh=(t,s,a)=>a.isOpen(),aE=(t,s,a,l)=>Nh(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,l)),Lw=(t,s,a)=>a.get(),Sy=(t,s,a,l)=>{Ss(t.element,s).fold(()=>{ne(t.element,a)},d=>{Rn(t.element,a,d)}),$t(t.element,s,l)},cE=(t,s,a)=>{B(t.element,a).fold(()=>Vn(t.element,s),l=>$t(t.element,s,l))},xy=(t,s,a)=>{const l=s.getAttachPoint(t);$t(t.element,"position",Fc.getMode(l)),Sy(t,"visibility",s.cloakVisibilityAttr,"hidden")},uf=t=>oo(["top","left","right","bottom"],s=>Ss(t,s).isSome()),fg=(t,s,a)=>{uf(t.element)||Vn(t.element,"position"),cE(t,"visibility",s.cloakVisibilityAttr)};var Fw=Object.freeze({__proto__:null,cloak:xy,decloak:fg,open:wy,openWhileCloaked:rE,close:n1,isOpen:Nh,isPartOf:aE,getState:Lw,setContent:Iw}),Hw=Object.freeze({__proto__:null,events:(t,s)=>Es([Xe(Sp(),(a,l)=>{n1(a,t,s)})])}),Ty=[Co("onOpen"),Co("onClose"),Ze("isPartOf"),Ze("getAttachPoint"),Ce("cloakVisibilityAttr","data-precloak-visibility")],lv=Object.freeze({__proto__:null,init:()=>{const t=mr(),s=te("not-implemented");return fl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const wo=Ka({fields:Ty,name:"sandboxing",active:Hw,apis:Fw,state:lv}),Cd=te("dismiss.popups"),df=te("reposition.popups"),mf=te("mouse.released"),Ey=Da([Ce("isExtraPart",Kt),Gc("fireEventInstead",[Ce("event",Wd())])]),Bh=t=>{const s=ac("Dismissal",Ey,t);return{[Cd()]:{schema:Da([Ze("target")]),onReceive:(a,l)=>{wo.isOpen(a)&&(wo.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>wo.close(a),g=>es(a,g.event)))}}}},ff=Da([Gc("fireEventInstead",[Ce("event",hb())]),Zr("doReposition")]),iv=t=>{const s=ac("Reposition",ff,t);return{[df()]:{onReceive:a=>{wo.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>es(a,l.event))}}}},uv=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},dv=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var mv=Object.freeze({__proto__:null,onLoad:uv,onUnload:dv,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Vw=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[dr((l,d)=>{uv(l,t,s)}),Ci((l,d)=>{dv(l,t,s)})]:[zb(t,s,uv)];return Es(a)}});const im=()=>{const t=H(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return fl({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},_y=()=>fl({readState:oe}),pg=()=>{const t=H({}),s=H({});return fl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>Zt(t.get(),p).orThunk(()=>Zt(s.get(),p)),update:p=>{const C=t.get(),k=s.get(),_={},D={};$(p,M=>{_[M.value]=M,Zt(M,"meta").each(V=>{Zt(V,"text").each(z=>{D[z]=M})})}),t.set({...C,..._}),s.set({...k,...D})},clear:()=>{t.set({}),s.set({})}})};var zw=Object.freeze({__proto__:null,memory:im,dataset:pg,manual:_y,init:t=>t.store.manager.state(t)});const s1=(t,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(t,l),s.onSetValue(t,l)},Oy=(t,s,a)=>{const l=s.store,d=l.getDataKey(t);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},lE=(t,s,a)=>{s.store.initialValue.each(d=>{s1(t,s,a,d)})},iE=(t,s,a)=>{a.clear()};var wd=[Ho("initialValue"),Ze("getFallbackEntry"),Ze("getDataKey"),Ze("setValue"),Ns("manager",{setValue:s1,getValue:Oy,onLoad:lE,onUnload:iE,state:pg})];const Ph=(t,s,a)=>s.store.getValue(t),uE=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},Ti=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var $a=[Ze("getValue"),Ce("setValue",oe),Ho("initialValue"),Ns("manager",{setValue:uE,getValue:Ph,onLoad:Ti,onUnload:oe,state:Qi.init})];const dE=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},$h=(t,s,a)=>a.get(),Ih=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},Uw=(t,s,a)=>{a.clear()};var Ww=[Ho("initialValue"),Ns("manager",{setValue:dE,getValue:$h,onLoad:Ih,onUnload:Uw,state:im})],mE=[na("store",{mode:"memory"},Zc("mode",{memory:Ww,manual:$a,dataset:wd})),Co("onSetValue"),Ce("resetOnDom",!1)];const yt=Ka({fields:mE,name:"representing",active:Vw,apis:mv,extra:{setValueFrom:(t,s)=>{const a=yt.getValue(s);yt.setValue(t,a)}},state:zw}),ra=(t,s)=>L(t,{},We(s,a=>k0(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([cc("dump",cn)])),bg=t=>t.dump,Ya=(t,s)=>({...ut(s),...t.dump}),ki={field:ra,augment:Ya,get:bg},fv="placeholder",Lh=Re.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),r1=t=>In(t,"uiType"),Zw=(t,s,a,l)=>t.exists(d=>d!==a.owner)?Lh.single(!0,te(a)):Zt(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+yn(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),a1=(t,s,a,l)=>r1(a)&&a.uiType===fv?Zw(t,s,a,l):Lh.single(!1,te(a)),Dy=(t,s,a,l)=>a1(t,s,a,l).fold((g,p)=>{const C=r1(a)?p(s,a.config,a.validated):p(s),k=Zt(C,"components").getOr([]),_=Go(k,D=>Dy(t,s,D,l));return[{...C,components:_}]},(g,p)=>{if(r1(a)){const C=p(s,a.config,a.validated);return a.validated.preprocess.getOr(cn)(C)}else return p(s)}),gf=(t,s,a,l)=>Go(a,d=>Dy(t,s,d,l)),c1=(t,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,C)=>p,(p,C)=>p);return{name:te(t),required:g,used:l,replace:d}},fE=(t,s,a,l)=>{const d=Lo(l,(p,C)=>c1(C,p)),g=gf(t,s,a,d);return Un(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},jw=Lh.single,Ry=Lh.multiple,vg=te(fv),l1=Re.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),gv=Ce("factory",{sketch:cn}),hv=Ce("schema",[]),Fh=Ze("name"),My=Ra("pname","pname",Gi(t=>"<alloy."+Ht(t.name)+">"),Nc()),Gw=cc("schema",()=>[Ho("preprocess")]),Iu=Ce("defaults",te({})),i1=Ce("overrides",te({})),gE=nn([gv,hv,Fh,My,Iu,i1]),hE=nn([gv,hv,Fh,Iu,i1]),um=nn([gv,hv,Fh,My,Iu,i1]),pE=nn([gv,Gw,Fh,Ze("unit"),My,Iu,i1]),qw=t=>t.fold(O.some,O.none,O.some,O.some),pv=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},bE=t=>t.fold(cn,cn,cn,cn),bv=(t,s)=>a=>{const l=ac("Converting part type",s,a);return t(l)},Ac=bv(l1.required,gE),Lu=bv(l1.external,hE),ou=bv(l1.optional,um),u1=bv(l1.group,pE),vv=te("entirety");var Kw=Object.freeze({__proto__:null,required:Ac,external:Lu,optional:ou,group:u1,asNamedPart:qw,name:pv,asCommon:bE,original:vv});const Ny=(t,s,a,l)=>Rs(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),Yw=(t,s,a)=>{const l={},d={};return $(a,g=>{g.fold(p=>{l[p.pname]=jw(!0,(C,k,_)=>p.factory.sketch(Ny(C,p,k,_)))},p=>{const C=s.parts[p.name];d[p.name]=te(p.factory.sketch(Ny(s,p,C[vv()]),C))},p=>{l[p.pname]=jw(!1,(C,k,_)=>p.factory.sketch(Ny(C,p,k,_)))},p=>{l[p.pname]=Ry(!0,(C,k,_)=>{const D=C[p.name];return We(D,M=>p.factory.sketch(Rs(p.defaults(C,M,_),M,p.overrides(C,M))))})})}),{internals:te(l),externals:te(d)}},By=(t,s)=>{const a={};return $(s,l=>{qw(l).each(d=>{const g=Xw(t,d.pname);a[d.name]=p=>{const C=ac("Part: "+d.name+" in "+t,nn(d.schema),p);return{...g,config:p,validated:C}}})}),a},Xw=(t,s)=>({uiType:vg(),owner:t,name:s}),Py=(t,s,a)=>({uiType:vg(),owner:t,name:s,config:a,validated:{}}),Jw=t=>Go(t,s=>s.fold(O.none,O.some,O.none,O.none).map(a=>ql(a.name,a.schema.concat([V0(vv())]))).toArray()),Qw=t=>We(t,pv),yv=(t,s,a)=>Yw(t,s,a),$y=(t,s,a)=>fE(O.some(t),s,s.components,a),xs=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},Nt=(t,s,a)=>xs(t,s,a).getOrDie("Could not find part: "+a),hf=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return $(a,p=>{l[p]=te(g.getByUid(d[p]))}),l},eS=(t,s)=>{const a=t.getSystem();return Lo(s.partUids,(l,d)=>te(a.getByUid(l)))},pf=t=>yn(t.partUids),Sd=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return $(a,p=>{l[p]=te(g.getByUid(d[p]).getOrDie())}),l},Hh=(t,s)=>{const a=Qw(s);return vs(We(a,l=>({key:l,value:t+"-"+l})))},Iy=t=>Ra("partUids","partUids",Pm(s=>Hh(s.uid,t)),Nc());var Ei=Object.freeze({__proto__:null,generate:By,generateOne:Py,schemas:Jw,names:Qw,substitutes:yv,components:$y,defaultUids:Hh,defaultUidsSchema:Iy,getAllParts:eS,getAllPartNames:pf,getPart:xs,getPartOrDie:Nt,getParts:hf,getPartsOrDie:Sd});const yg=(t,s)=>(t.length>0?[ql("parts",t)]:[]).concat([Ze("uid"),Ce("dom",{}),Ce("components",[]),V0("originalSpec"),Ce("debug.sketcher",{})]).concat(s),tS=(t,s,a,l,d)=>{const g=yg(l,d);return ac(t+" [SpecSchema]",Da(g.concat(s)),a)},Vh=(t,s,a,l)=>{const d=Ly(l),g=tS(t,s,d,[],[]);return a(g,d)},d1=(t,s,a,l,d)=>{const g=Ly(d),p=Jw(a),C=Iy(a),k=tS(t,s,g,p,[C]),_=yv(t,k,a),D=$y(t,k,_.internals());return l(k,D,g,_.externals())},m1=t=>In(t,"uid"),Ly=t=>m1(t)?t:{...t,uid:fd("uid")},vE=t=>t.uid!==void 0,yE=Da([Ze("name"),Ze("factory"),Ze("configFields"),Ce("apis",{}),Ce("extraApis",{})]),CE=Da([Ze("name"),Ze("factory"),Ze("configFields"),Ze("partFields"),Ce("apis",{}),Ce("extraApis",{})]),_i=t=>{const s=ac("Sketcher for "+t.name,yE,t),a=g=>Vh(s.name,s.configFields,s.factory,g),l=Lo(s.apis,fh),d=Lo(s.extraApis,(g,p)=>Sb(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...l,...d}},Oc=t=>{const s=ac("Sketcher for "+t.name,CE,t),a=p=>d1(s.name,s.configFields,s.partFields,s.factory,p),l=By(s.name,s.partFields),d=Lo(s.apis,fh),g=Lo(s.extraApis,(p,C)=>Sb(p,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...d,...g}},bf=t=>nc("input")(t)&&Ls(t,"type")!=="radio"||nc("textarea")(t);var wE=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const SE=[Ze("find")],po=Ka({fields:SE,name:"composing",apis:wE}),xE=["input","button","textarea","select"],nS=(t,s,a)=>{(s.disabled()?sS:rS)(t,s)},Fy=(t,s)=>s.useNative===!0&&yo(xE,Bo(t.element)),oS=t=>G(t.element,"disabled"),o3=t=>{Rn(t.element,"disabled","disabled")},xd=t=>{ne(t.element,"disabled")},Cv=t=>Ls(t.element,"aria-disabled")==="true",s3=t=>{Rn(t.element,"aria-disabled","true")},r3=t=>{Rn(t.element,"aria-disabled","false")},sS=(t,s,a)=>{s.disableClass.each(d=>{Gr(t.element,d)}),(Fy(t,s)?o3:s3)(t),s.onDisabled(t)},rS=(t,s,a)=>{s.disableClass.each(d=>{Lr(t.element,d)}),(Fy(t,s)?xd:r3)(t),s.onEnabled(t)},aS=(t,s)=>Fy(t,s)?oS(t):Cv(t);var c3=Object.freeze({__proto__:null,enable:rS,disable:sS,isDisabled:aS,onLoad:nS,set:(t,s,a,l)=>{(l?sS:rS)(t,s)}}),TE=Object.freeze({__proto__:null,exhibit:(t,s)=>eu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Es([_2(Xl(),(a,l)=>aS(a,t)),zb(t,s,nS)])}),cS=[sa("disabled",Kt),Ce("useNative",!0),Ho("disableClass"),Co("onDisabled"),Co("onEnabled")];const vn=Ka({fields:cS,name:"disabling",active:TE,apis:c3}),zh=(t,s,a,l)=>{const d=_c(t.element,"."+s.highlightClass);$(d,g=>{oo(l,C=>ns(C.element,g))||(Lr(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),es(C,bb())}))})},lS=(t,s,a)=>zh(t,s,a,[]),iS=(t,s,a,l)=>{zy(t,s,a,l)&&(Lr(l.element,s.highlightClass),s.onDehighlight(t,l),es(l,bb()))},Cg=(t,s,a,l)=>{zh(t,s,a,[l]),zy(t,s,a,l)||(Gr(l.element,s.highlightClass),s.onHighlight(t,l),es(l,O0()))},Vy=(t,s,a)=>{Sv(t,s).each(l=>{Cg(t,s,a,l)})},kE=(t,s,a)=>{f1(t,s).each(l=>{Cg(t,s,a,l)})},wv=(t,s,a,l)=>{EE(t,s,a,l).fold(d=>{throw d},d=>{Cg(t,s,a,d)})},uS=(t,s,a,l)=>{const d=g1(t,s);zt(d,l).each(p=>{Cg(t,s,a,p)})},zy=(t,s,a,l)=>Rl(l.element,s.highlightClass),dS=(t,s,a)=>Fr(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),EE=(t,s,a,l)=>{const d=_c(t.element,"."+s.itemClass);return O.from(d[l]).fold(()=>Pn.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},Sv=(t,s,a)=>Fr(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),f1=(t,s,a)=>{const l=_c(t.element,"."+s.itemClass);return(l.length>0?O.some(l[l.length-1]):O.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Uy=(t,s,a,l)=>{const d=_c(t.element,"."+s.itemClass);return Xt(d,p=>Rl(p,s.highlightClass)).bind(p=>{const C=eg(p,l,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},xv=(t,s,a)=>Uy(t,s,a,-1),Tv=(t,s,a)=>Uy(t,s,a,1),g1=(t,s,a)=>{const l=_c(t.element,"."+s.itemClass);return Jo(We(l,d=>t.getSystem().getByDom(d).toOptional()))};var wg=Object.freeze({__proto__:null,dehighlightAll:lS,dehighlight:iS,highlight:Cg,highlightFirst:Vy,highlightLast:kE,highlightAt:wv,highlightBy:uS,isHighlighted:zy,getHighlighted:dS,getFirst:Sv,getLast:f1,getPrevious:xv,getNext:Tv,getCandidates:g1}),l3=[Ze("highlightClass"),Ze("itemClass"),Co("onHighlight"),Co("onDehighlight")];const Yo=Ka({fields:l3,name:"highlighting",apis:wg}),_E=[8],yf=[9],Td=[13],Wy=[27],Pl=[32],Zy=[37],h1=[38],kv=[39],dm=[40],jy=(t,s,a)=>{const l=be(t.slice(0,s)),d=be(t.slice(s+1));return zt(l.concat(d),a)},AE=(t,s,a)=>{const l=be(t.slice(0,s));return zt(l,a)},OE=(t,s,a)=>{const l=t.slice(0,s),d=t.slice(s+1);return zt(d.concat(l),a)},mS=(t,s,a)=>{const l=t.slice(s+1);return zt(l,a)},Mo=t=>s=>{const a=s.raw;return yo(t,a.which)},Fu=t=>s=>Fe(t,a=>a(s)),Sg=t=>t.raw.shiftKey===!0,i=t=>t.raw.ctrlKey===!0,m=ge(Sg),h=(t,s)=>({matches:t,classification:s}),v=(t,s)=>zt(t,l=>l.matches(s)).map(l=>l.classification),S=(t,s,a)=>{s.exists(d=>a.exists(g=>ns(g,d)))||mn(t,Tp(),{prevFocus:s,newFocus:a})},A=()=>{const t=a=>xi(a.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().triggerFocus(l,a.element);const g=t(a);S(a,d,g)}}},I=()=>{const t=a=>Yo.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().getByDom(l).fold(oe,p=>{Yo.highlight(a,p)});const g=t(a);S(a,d,g)}}};var W;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(W||(W={}));const K=(t,s,a,l,d)=>{const g=()=>t.concat([Ce("focusManager",A()),na("focusInside","onFocus",$r(_=>yo(["onFocus","onEnterOrSpace","onApi"],_)?Pn.value(_):Pn.error("Invalid value for focusInside"))),Ns("handler",k),Ns("state",s),Ns("sendFocusIn",d)]),p=(_,D,M,V,z)=>{const Q=M(_,D,V,z);return v(Q,D.event).bind(se=>se(_,D,V,z))},k={schema:g,processKey:p,toEvents:(_,D)=>{const M=_.focusInside!==W.OnFocusMode?O.none():d(_).map(Q=>Xe(Ud(),(se,ke)=>{Q(se,_,D),ke.stop()})),V=(Q,se)=>{const ke=Mo(Pl.concat(Td))(se.event);_.focusInside===W.OnEnterOrSpaceMode&&ke&&_u(Q,se)&&d(_).each(fe=>{fe(Q,_,D),se.stop()})},z=[Xe(Zm(),(Q,se)=>{p(Q,se,a,_,D).fold(()=>{V(Q,se)},ke=>{se.stop()})}),Xe(YT(),(Q,se)=>{p(Q,se,l,_,D).each(ke=>{se.stop()})})];return Es(M.toArray().concat(z))}};return k},ae=t=>{const s=[Ho("onEscape"),Ho("onEnter"),Ce("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ce("firstTabstop",0),Ce("useTabstopAt",bt),Ho("visibilitySelector")].concat([t]),a=(se,ke)=>{const fe=se.visibilitySelector.bind(Ee=>wi(ke,Ee)).getOr(ke);return rr(fe)>0},l=(se,ke)=>{const fe=_c(se.element,ke.selector),Ee=ze(fe,ht=>a(ke,ht));return O.from(Ee[ke.firstTabstop])},d=(se,ke)=>ke.focusManager.get(se).bind(fe=>wi(fe,ke.selector)),g=(se,ke)=>a(se,ke)&&se.useTabstopAt(ke),p=(se,ke,fe)=>{l(se,ke).each(Ee=>{ke.focusManager.set(se,Ee)})},C=(se,ke,fe,Ee,ht)=>ht(ke,fe,Ae=>g(Ee,Ae)).fold(()=>Ee.cyclic?O.some(!0):O.none(),Ae=>(Ee.focusManager.set(se,Ae),O.some(!0))),k=(se,ke,fe,Ee)=>{const ht=_c(se.element,fe.selector);return d(se,fe).bind(Ae=>Xt(ht,At(ns,Ae)).bind(Lt=>C(se,ht,Lt,fe,Ee)))},_=(se,ke,fe)=>{const Ee=fe.cyclic?jy:AE;return k(se,ke,fe,Ee)},D=(se,ke,fe)=>{const Ee=fe.cyclic?OE:mS;return k(se,ke,fe,Ee)},M=(se,ke,fe)=>fe.onEnter.bind(Ee=>Ee(se,ke)),V=(se,ke,fe)=>fe.onEscape.bind(Ee=>Ee(se,ke)),z=te([h(Fu([Sg,Mo(yf)]),_),h(Mo(yf),D),h(Fu([m,Mo(Td)]),M)]),Q=te([h(Mo(Wy),V)]);return K(s,Qi.init,z,Q,()=>O.some(p))};var ve=ae(cc("cyclic",Kt)),qe=ae(cc("cyclic",bt));const dt=(t,s,a)=>(D0(t,a,Xl()),O.some(!0)),ct=(t,s,a)=>bf(a)&&Mo(Pl)(s.event)?O.none():dt(t,s,a),He=(t,s)=>O.some(!0),gt=[Ce("execute",ct),Ce("useSpace",!1),Ce("useEnter",!0),Ce("useControlEnter",!1),Ce("useDown",!1)],Ve=(t,s,a)=>a.execute(t,s,t.element),Vt=(t,s,a,l)=>{const d=a.useSpace&&!bf(t.element)?Pl:[],g=a.useEnter?Td:[],p=a.useDown?dm:[],C=d.concat(g).concat(p);return[h(Mo(C),Ve)].concat(a.useControlEnter?[h(Fu([i,Mo(Td)]),Ve)]:[])},Cn=(t,s,a,l)=>a.useSpace&&!bf(t.element)?[h(Mo(Pl),He)]:[];var Kn=K(gt,Qi.init,Vt,Cn,()=>O.none());const Ks=()=>{const t=mr();return fl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Hr=Object.freeze({__proto__:null,flatgrid:Ks,init:t=>t.state(t)});const pl=t=>(s,a,l,d)=>{const g=t(s.element);return _v(g,s,a,l,d)},Cf=(t,s)=>{const a=Eh(t,s);return pl(a)},p1=(t,s)=>{const a=Eh(s,t);return pl(a)},Ev=t=>(s,a,l,d)=>_v(t,s,a,l,d),_v=(t,s,a,l,d)=>l.focusManager.get(s).bind(p=>t(s.element,p,l,d)).map(p=>(l.focusManager.set(s,p),!0)),fs=Ev,gc=Ev,hc=Ev,Hu=t=>t.offsetWidth<=0&&t.offsetHeight<=0,$l=t=>!Hu(t.dom),Uh=(t,s)=>Xt(t,s).map(a=>({index:a,candidates:t})),Hc=(t,s,a)=>{const l=p=>ns(p,s),d=_c(t,a),g=ze(d,$l);return Uh(g,l)},bl=(t,s)=>Xt(t,a=>ns(s,a)),Wh=(t,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(p=>{const C=p.row*a+p.column;return C>=0&&C<t.length?O.some(t[C]):O.none()})},Vu=(t,s,a,l,d)=>Wh(t,s,l,(g,p)=>{const k=g===a-1?t.length-g*l:l,_=eg(p,d,0,k-1);return O.some({row:g,column:_})}),pc=(t,s,a,l,d)=>Wh(t,s,l,(g,p)=>{const C=eg(g,d,0,a-1),_=C===a-1?t.length-C*l:l,D=oi(p,0,_-1);return O.some({row:C,column:D})}),DE=(t,s,a,l)=>Vu(t,s,a,l,1),RE=(t,s,a,l)=>Vu(t,s,a,l,-1),Zh=(t,s,a,l)=>pc(t,s,a,l,-1),Gy=(t,s,a,l)=>pc(t,s,a,l,1),ME=[Ze("selector"),Ce("execute",ct),Ml("onEscape"),Ce("captureTab",!1),Ip()],qy=(t,s,a)=>{Fr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Av=(t,s)=>s.focusManager.get(t).bind(a=>wi(a,s.selector)),b1=(t,s,a,l)=>Av(t,a).bind(d=>a.execute(t,s,d)),fS=t=>(s,a,l,d)=>Hc(s,a,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),i3=(t,s,a)=>a.captureTab?O.some(!0):O.none(),o5=(t,s,a)=>a.onEscape(t,s),u3=fS(RE),d3=fS(DE),s5=fS(Zh),m3=fS(Gy),NE=te([h(Mo(Zy),Cf(u3,d3)),h(Mo(kv),p1(u3,d3)),h(Mo(h1),fs(s5)),h(Mo(dm),gc(m3)),h(Fu([Sg,Mo(yf)]),i3),h(Fu([m,Mo(yf)]),i3),h(Mo(Pl.concat(Td)),b1)]),r5=te([h(Mo(Wy),o5),h(Mo(Pl),He)]);var a5=K(ME,Ks,NE,r5,()=>O.some(qy));const gS=(t,s,a,l)=>{const d=p=>Bo(p)==="button"&&Ls(p,"disabled")==="disabled",g=(p,C,k)=>{const _=eg(C,l,0,k.length-1);return _===p?O.none():d(k[_])?g(p,_,k):O.from(k[_])};return Hc(t,a,s).bind(p=>{const C=p.index,k=p.candidates;return g(C,C,k)})},c5=[Ze("selector"),Ce("getInitial",O.none),Ce("execute",ct),Ml("onEscape"),Ce("executeOnMove",!1),Ce("allowVertical",!0)],v1=(t,s)=>s.focusManager.get(t).bind(a=>wi(a,s.selector)),BE=(t,s,a)=>v1(t,a).bind(l=>a.execute(t,s,l)),l5=(t,s,a)=>{s.getInitial(t).orThunk(()=>Fr(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},hS=(t,s,a)=>gS(t,a.selector,s,-1),f3=(t,s,a)=>gS(t,a.selector,s,1),PE=t=>(s,a,l,d)=>t(s,a,l,d).bind(()=>l.executeOnMove?BE(s,a,l):O.some(!0)),g3=(t,s,a)=>a.onEscape(t,s),h3=(t,s,a,l)=>{const d=Zy.concat(a.allowVertical?h1:[]),g=kv.concat(a.allowVertical?dm:[]);return[h(Mo(d),PE(Cf(hS,f3))),h(Mo(g),PE(p1(hS,f3))),h(Mo(Td),BE),h(Mo(Pl),BE)]},p3=te([h(Mo(Pl),He),h(Mo(Wy),g3)]);var i5=K(c5,Qi.init,h3,p3,()=>O.some(l5));const pS=(t,s,a)=>O.from(t[s]).bind(l=>O.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),b3=(t,s,a,l)=>{const g=t[s].length,p=eg(a,l,0,g-1);return pS(t,s,p)},bS=(t,s,a,l)=>{const d=eg(a,l,0,t.length-1),g=t[d].length,p=oi(s,0,g-1);return pS(t,d,p)},v3=(t,s,a,l)=>{const g=t[s].length,p=oi(a+l,0,g-1);return pS(t,s,p)},y3=(t,s,a,l)=>{const d=oi(a+l,0,t.length-1),g=t[d].length,p=oi(s,0,g-1);return pS(t,d,p)},u5=(t,s,a)=>b3(t,s,a,1),C3=(t,s,a)=>b3(t,s,a,-1),d5=(t,s,a)=>bS(t,a,s,-1),m5=(t,s,a)=>bS(t,a,s,1),f5=(t,s,a)=>v3(t,s,a,-1),w3=(t,s,a)=>v3(t,s,a,1),g5=(t,s,a)=>y3(t,a,s,-1),h5=(t,s,a)=>y3(t,a,s,1),S3=[ql("selectors",[Ze("row"),Ze("cell")]),Ce("cycles",!0),Ce("previousSelector",O.none),Ce("execute",ct)],p5=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Fr(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},b5=(t,s,a)=>xi(t.element).bind(l=>a.execute(t,s,l)),vS=(t,s)=>We(t,a=>_c(a,s.selectors.cell)),yS=(t,s)=>(a,l,d)=>{const g=d.cycles?t:s;return wi(l,d.selectors.row).bind(p=>{const C=_c(p,d.selectors.cell);return bl(C,l).bind(k=>{const _=_c(a,d.selectors.row);return bl(_,p).bind(D=>{const M=vS(_,d);return g(M,D,k).map(V=>V.cell)})})})},$E=yS(C3,f5),Il=yS(u5,w3),v5=yS(d5,g5),x3=yS(m5,h5),y5=te([h(Mo(Zy),Cf($E,Il)),h(Mo(kv),p1($E,Il)),h(Mo(h1),fs(v5)),h(Mo(dm),gc(x3)),h(Mo(Pl.concat(Td)),b5)]),C5=te([h(Mo(Pl),He)]);var T3=K(S3,Qi.init,y5,C5,()=>O.some(p5));const w5=[Ze("selector"),Ce("execute",ct),Ce("moveOnTab",!1)],IE=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),k3=(t,s,a)=>{Fr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},E3=(t,s,a)=>gS(t,a.selector,s,-1),_3=(t,s,a)=>gS(t,a.selector,s,1),S5=(t,s,a,l)=>a.moveOnTab?hc(E3)(t,s,a,l):O.none(),x5=(t,s,a,l)=>a.moveOnTab?hc(_3)(t,s,a,l):O.none(),A3=te([h(Mo(h1),hc(E3)),h(Mo(dm),hc(_3)),h(Fu([Sg,Mo(yf)]),S5),h(Fu([m,Mo(yf)]),x5),h(Mo(Td),IE),h(Mo(Pl),IE)]),O3=te([h(Mo(Pl),He)]);var jh=K(w5,Qi.init,A3,O3,()=>O.some(k3));const D3=[Ml("onSpace"),Ml("onEnter"),Ml("onShiftEnter"),Ml("onLeft"),Ml("onRight"),Ml("onTab"),Ml("onShiftTab"),Ml("onUp"),Ml("onDown"),Ml("onEscape"),Ce("stopSpaceKeyup",!1),Ho("focusIn")],R3=(t,s,a)=>[h(Mo(Pl),a.onSpace),h(Fu([m,Mo(Td)]),a.onEnter),h(Fu([Sg,Mo(Td)]),a.onShiftEnter),h(Fu([Sg,Mo(yf)]),a.onShiftTab),h(Fu([m,Mo(yf)]),a.onTab),h(Mo(h1),a.onUp),h(Mo(dm),a.onDown),h(Mo(Zy),a.onLeft),h(Mo(kv),a.onRight),h(Mo(Pl),a.onSpace)],LE=(t,s,a)=>[...a.stopSpaceKeyup?[h(Mo(Pl),He)]:[],h(Mo(Wy),a.onEscape)];var T5=K(D3,Qi.init,R3,LE,t=>t.focusIn);const k5=ve.schema(),E5=qe.schema(),_5=i5.schema(),M3=a5.schema(),FE=T3.schema(),HE=Kn.schema(),A5=jh.schema(),Gh=T5.schema();var N3=Object.freeze({__proto__:null,acyclic:k5,cyclic:E5,flow:_5,flatgrid:M3,matrix:FE,execution:HE,menu:A5,special:Gh});const B3=t=>Zs(t,"setGridSize"),an=Z0({branchKey:"mode",branches:N3,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,d)=>{B3(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:Hr}),P3=(t,s)=>{Ub(()=>{nE(t,s,()=>We(s,t.getSystem().build))},t.element)},Ov=(t,s)=>{Ub(()=>{av(t,s,()=>Xf(t.element,s,t.getSystem().buildOrPatch))},t.element)},Ky=(t,s,a,l)=>{rv(s);const d=P0(t.element,a,l,t.getSystem().buildOrPatch);t1(t,d),t.syncComponents()},CS=(t,s,a)=>{const l=t.getSystem().build(a);$w(t,l,s)},$3=(t,s,a,l)=>{fc(s),CS(t,(d,g)=>jg(d,g,a),l)},qh=(t,s,a,l)=>(s.reuseDom?Ov:P3)(t,l),Kh=(t,s,a,l)=>{CS(t,rc,l)},O5=(t,s,a,l)=>{CS(t,Nm,l)},D5=(t,s,a,l)=>{const d=Yy(t);zt(d,p=>ns(l.element,p.element)).each(fc)},Yy=(t,s)=>t.components(),wf=(t,s,a,l,d)=>{const g=Yy(t);return O.from(g[l]).map(p=>(d.fold(()=>fc(p),C=>{(s.reuseDom?Ky:$3)(t,p,l,C)}),p))};var L3=Object.freeze({__proto__:null,append:Kh,prepend:O5,remove:D5,replaceAt:wf,replaceBy:(t,s,a,l,d)=>{const g=Yy(t);return Xt(g,l).bind(p=>wf(t,s,a,p,d))},set:qh,contents:Yy});const qn=Ka({fields:[oa("reuseDom",!0)],name:"replacing",apis:L3}),F3=(t,s)=>{const a=Es(s);return Ka({fields:[Ze("enabled")],name:t,active:{events:te(a)}})},So=(t,s)=>{const a=F3(t,s);return{key:t,value:{config:{},me:a,configAsRaw:te({}),initialConfig:{},state:Qi}}},VE=(t,s)=>{s.ignore||(nm(t.element),s.onFocus(t))};var R5=Object.freeze({__proto__:null,focus:VE,blur:(t,s)=>{s.ignore||lw(t.element)},isFocused:t=>j0(t.element)}),UE=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return eu(a)},events:t=>Es([Xe(Ud(),(s,a)=>{VE(s,t),a.stop()})].concat(t.stopMousedown?[Xe(xc(),(s,a)=>{a.event.prevent()})]:[]))}),M5=[Co("onFocus"),Ce("stopMousedown",!1),Ce("ignore",!1)];const Tn=Ka({fields:M5,name:"focusing",active:UE,apis:R5}),V3=t=>({init:()=>{const a=H(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),z3=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},U3=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?Gr(t.element,l):Lr(t.element,l)})},Dv=(t,s,a,l)=>{const d=a.get();a.set(l),U3(t,s,a),z3(t,s,a),d!==l&&s.onToggled(t,l)},W3=(t,s,a)=>{Dv(t,s,a,!a.get())},WE=(t,s,a)=>{Dv(t,s,a,!0)},N5=(t,s,a)=>{Dv(t,s,a,!1)},B5=(t,s,a)=>a.get(),Z3=(t,s,a)=>{Dv(t,s,a,s.selected)};var P5=Object.freeze({__proto__:null,onLoad:Z3,toggle:W3,isOn:B5,on:WE,off:N5,set:Dv}),I5=Object.freeze({__proto__:null,exhibit:()=>eu({}),events:(t,s)=>{const a=wk(t,s,W3),l=zb(t,s,Z3);return Es(Be([t.toggleOnExecute?[a]:[],[l]]))}});const L5=(t,s,a)=>{Rn(t.element,"aria-pressed",a),s.syncWithExpanded&&Rv(t,s,a)},Xy=(t,s,a)=>{Rn(t.element,"aria-selected",a)},F5=(t,s,a)=>{Rn(t.element,"aria-checked",a)},Rv=(t,s,a)=>{Rn(t.element,"aria-expanded",a)};var ZE=[Ce("selected",!1),Ho("toggleClass"),Ce("toggleOnExecute",!0),Co("onToggled"),na("aria",{mode:"none"},Zc("mode",{pressed:[Ce("syncWithExpanded",!1),Ns("update",L5)],checked:[Ns("update",F5)],expanded:[Ns("update",Rv)],selected:[Ns("update",Xy)],none:[Ns("update",oe)]}))];const Po=Ka({fields:ZE,name:"toggling",active:I5,apis:P5,state:V3(!1)}),jE=()=>{const t=(s,a)=>{a.stop(),Zd(s)};return[Xe(Cp(),t),Xe(ah(),t),uh(ys()),uh(xc())]},wS=t=>{const s=a=>Jl((l,d)=>{a(l),d.stop()});return Es(Be([t.map(s).toArray(),jE()]))},j3="alloy.item-hover",GE="alloy.item-focus",G3="alloy.item-toggled",qE=t=>{(xi(t.element).isNone()||Tn.isFocused(t))&&(Tn.isFocused(t)||Tn.focus(t),mn(t,j3,{item:t}))},q3=t=>{mn(t,GE,{item:t})},H5=(t,s)=>{mn(t,G3,{item:t,state:s})},KE=te(j3),SS=te(GE),YE=te(G3),XE=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),V5=t=>({aria:{mode:"checked"},...ka(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{Qe(t.onToggled)&&t.onToggled(s,a),H5(s,a)}}),z5=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:XE(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:ki.augment(t.itemBehaviours,[t.toggling.fold(Po.revoke,s=>Po.config(V5(s))),Tn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{q3(s)}}),an.config({mode:"execution"}),yt.config({store:{mode:"memory",initialValue:t.data}}),So("item-type-events",[...jE(),Xe(Vd(),qE),Xe(jm(),Tn.focus)])]),components:t.components,eventOrder:t.eventOrder}),U5=[Ze("data"),Ze("components"),Ze("dom"),Ce("hasSubmenu",!1),Ho("toggling"),ki.field("itemBehaviours",[Po,Tn,an,yt]),Ce("ignoreFocus",!1),Ce("domModification",{}),Ns("builder",z5),Ce("eventOrder",{})],W5=t=>({dom:t.dom,components:t.components,events:Es([O2(jm())])}),K3=[Ze("dom"),Ze("components"),Ns("builder",W5)],xS=te("item-widget"),JE=te([Ac({name:"widget",overrides:t=>({behaviours:ut([yt.config({store:{mode:"manual",getValue:s=>t.data,setValue:oe}})])})})]),Z5=t=>{const s=yv(xS(),t,JE()),a=$y(xS(),t,s.internals()),l=g=>xs(g,t,"widget").map(p=>(an.focusIn(p),p)),d=(g,p)=>bf(p.event.target)?O.none():(()=>(t.autofocus&&p.setSource(g.element),O.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Es([Jl((g,p)=>{l(g).each(C=>{p.stop()})}),Xe(Vd(),qE),Xe(jm(),(g,p)=>{t.autofocus?l(g):Tn.focus(g)})]),behaviours:ki.augment(t.widgetBehaviours,[yt.config({store:{mode:"memory",initialValue:t.data}}),Tn.config({ignore:t.ignoreFocus,onFocus:g=>{q3(g)}}),an.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:kk(),onLeft:d,onRight:d,onEscape:(g,p)=>!Tn.isFocused(g)&&!t.autofocus?(Tn.focus(g),O.some(!0)):(t.autofocus&&p.setSource(g.element),O.none())})])}},j5=[Ze("uid"),Ze("data"),Ze("components"),Ze("dom"),Ce("autofocus",!1),Ce("ignoreFocus",!1),ki.field("widgetBehaviours",[yt,Tn,an]),Ce("domModification",{}),Iy(JE()),Ns("builder",Z5)],G5=Zc("type",{widget:j5,item:U5,separator:K3}),q5=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),K5=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),Y3=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),Y5=te([u1({factory:{sketch:t=>{const s=ac("menu.spec item",G5,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>In(s,"uid")?s:{...s,uid:fd("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),X5=te([Ze("value"),Ze("items"),Ze("dom"),Ze("components"),Ce("eventOrder",{}),ra("menuBehaviours",[Yo,yt,po,an]),na("movement",{mode:"menu",moveOnTab:!0},Zc("mode",{grid:[Ip(),Ns("config",q5)],matrix:[Ns("config",K5),Ze("rowSelector"),Ce("previousSelector",O.none)],menu:[Ce("moveOnTab",!0),Ns("config",Y3)]})),Q2(),Ce("fakeFocus",!1),Ce("focusManager",A()),Co("onHighlight"),Co("onDehighlight")]),X3=te("alloy.menu-focus"),J5=(t,s)=>{const a=_c(t.element,'[role="menuitemradio"][aria-checked="true"]');$(a,l=>{ns(l,s.element)||t.getSystem().getByDom(l).each(d=>{Po.off(d)})})},Q5=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ya(t.menuBehaviours,[Yo.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),yt.config({store:{mode:"memory",initialValue:t.value}}),po.config({find:O.some}),an.config(t.movement.config(t,t.movement))]),events:Es([Xe(SS(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(C=>{Yo.highlight(d,C),g.stop(),mn(d,X3(),{menu:d,item:C})})}),Xe(KE(),(d,g)=>{const p=g.event.item;Yo.highlight(d,p)}),Xe(YE(),(d,g)=>{const{item:p,state:C}=g.event;C&&Ls(p.element,"role")==="menuitemradio"&&J5(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),zu=Oc({name:"Menu",configFields:X5(),partFields:Y5(),factory:Q5}),eI=t=>Jn(t,(s,a)=>({k:s,v:a})),J3=(t,s,a,l)=>Zt(a,l).bind(d=>Zt(t,d).bind(g=>{const p=J3(t,s,a,g);return O.some([g].concat(p))})).getOr([]),y1=(t,s)=>{const a={};Un(t,(p,C)=>{$(p,k=>{a[k]=C})});const l=s,d=eI(s),g=Lo(d,(p,C)=>[C].concat(J3(a,l,d,C)));return Lo(a,p=>Zt(g,p).getOr([p]))},tI=()=>{const t=H({}),s=H({}),a=H({}),l=mr(),d=H({}),g=()=>{t.set({}),s.set({}),a.set({}),l.clear()},p=()=>l.get().isNone(),C=(Ct,Lt)=>{s.set({...s.get(),[Ct]:{type:"prepared",menu:Lt}})},k=(Ct,Lt,Dt,dn)=>{l.set(Ct),t.set(Dt),s.set(Lt),d.set(dn);const fn=y1(dn,Dt);a.set(fn)},_=Ct=>vc(t.get(),(Lt,Dt)=>Lt===Ct),D=(Ct,Lt,Dt)=>se(Ct).bind(dn=>_(Ct).bind(fn=>Lt(fn).map(Qn=>({triggeredMenu:dn,triggeringItem:Qn,triggeringPath:Dt})))),M=(Ct,Lt)=>{const Dt=ze(fe(Ct).toArray(),dn=>se(dn).isSome());return Zt(a.get(),Ct).bind(dn=>{const fn=be(Dt.concat(dn)),Qn=Go(fn,(Oo,tn)=>D(Oo,Lt,fn.slice(0,tn+1)).fold(()=>Qr(l.get(),Oo)?[]:[O.none()],ro=>[O.some(ro)]));return nl(Qn)})},V=Ct=>Zt(t.get(),Ct).map(Lt=>{const Dt=Zt(a.get(),Ct).getOr([]);return[Lt].concat(Dt)}),z=Ct=>Zt(a.get(),Ct).bind(Lt=>Lt.length>1?O.some(Lt.slice(1)):O.none()),Q=Ct=>Zt(a.get(),Ct),se=Ct=>ke(Ct).bind(Q3),ke=Ct=>Zt(s.get(),Ct),fe=Ct=>Zt(t.get(),Ct);return{setMenuBuilt:C,setContents:k,expand:V,refresh:Q,collapse:z,lookupMenu:ke,lookupItem:fe,otherMenus:Ct=>{const Lt=d.get();return kt(yn(Lt),Ct)},getPrimary:()=>l.get().bind(se),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:M}},Q3=t=>t.type==="prepared"?O.some(t.menu):O.none(),xg={init:tI,extractPreparedMenu:Q3},eD=Ht("tiered-menu-item-highlight"),tD=Ht("tiered-menu-item-dehighlight");var Dr;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Dr||(Dr={}));const nD=(t,s)=>{const a=mr(),l=(it,Ot,Bn)=>Lo(Bn,(io,as)=>{const Io=()=>zu.sketch({...io,value:as,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Rc,Xs)=>{mn(Rc,eD,{menuComp:Rc,itemComp:Xs})},onDehighlight:(Rc,Xs)=>{mn(Rc,tD,{menuComp:Rc,itemComp:Xs})},focusManager:t.fakeFocus?I():A()});return as===Ot?{type:"prepared",menu:it.getSystem().build(Io())}:{type:"notbuilt",nbMenu:Io}}),d=xg.init(),g=it=>{const Ot=l(it,t.data.primary,t.data.menus),Bn=k();return d.setContents(t.data.primary,Ot,t.data.expansions,Bn),d.getPrimary()},p=it=>yt.getValue(it).value,C=(it,Ot,Bn)=>er(Ot,io=>{if(!io.getSystem().isConnected())return O.none();const as=Yo.getCandidates(io);return zt(as,Io=>p(Io)===Bn)}),k=it=>Lo(t.data.menus,(Ot,Bn)=>Go(Ot.items,io=>io.type==="separator"?[]:[io.data.value])),_=Yo.highlight,D=(it,Ot)=>{_(it,Ot),Yo.getHighlighted(Ot).orThunk(()=>Yo.getFirst(Ot)).each(Bn=>{t.fakeFocus?Yo.highlight(Ot,Bn):D0(it,Bn.element,jm())})},M=(it,Ot)=>Jo(We(Ot,Bn=>it.lookupMenu(Bn).bind(io=>io.type==="prepared"?O.some(io.menu):O.none()))),V=(it,Ot,Bn)=>{const io=M(Ot,Ot.otherMenus(Bn));$(io,as=>{ei(as.element,[t.markers.backgroundMenu]),t.stayInDom||qn.remove(it,as)})},z=it=>a.get().getOrThunk(()=>{const Ot={},Bn=_c(it.element,`.${t.markers.item}`),io=ze(Bn,as=>Ls(as,"aria-haspopup")==="true");return $(io,as=>{it.getSystem().getByDom(as).each(Io=>{const Rc=p(Io);Ot[Rc]=Io})}),a.set(Ot),Ot}),Q=(it,Ot)=>{const Bn=z(it);Un(Bn,(io,as)=>{const Io=yo(Ot,as);Rn(io.element,"aria-expanded",Io)})},se=(it,Ot,Bn)=>O.from(Bn[0]).bind(io=>Ot.lookupMenu(io).bind(as=>{if(as.type==="notbuilt")return O.none();{const Io=as.menu,Rc=M(Ot,Bn.slice(1));return $(Rc,Xs=>{Gr(Xs.element,t.markers.backgroundMenu)}),Br(Io.element)||qn.append(it,ni(Io)),ei(Io.element,[t.markers.backgroundMenu]),D(it,Io),V(it,Ot,Bn),O.some(Io)}}));let ke;(function(it){it[it.HighlightSubmenu=0]="HighlightSubmenu",it[it.HighlightParent=1]="HighlightParent"})(ke||(ke={}));const fe=(it,Ot,Bn)=>{if(Bn.type==="notbuilt"){const io=it.getSystem().build(Bn.nbMenu());return d.setMenuBuilt(Ot,io),io}else return Bn.menu},Ee=(it,Ot,Bn=ke.HighlightSubmenu)=>{if(Ot.hasConfigured(vn)&&vn.isDisabled(Ot))return O.some(Ot);{const io=p(Ot);return d.expand(io).bind(as=>(Q(it,as),O.from(as[0]).bind(Io=>d.lookupMenu(Io).bind(Rc=>{const Xs=fe(it,Io,Rc);return Br(Xs.element)||qn.append(it,ni(Xs)),t.onOpenSubmenu(it,Ot,Xs,be(as)),Bn===ke.HighlightSubmenu?(Yo.highlightFirst(Xs),se(it,d,as)):(Yo.dehighlightAll(Xs),O.some(Ot))}))))}},ht=(it,Ot)=>{const Bn=p(Ot);return d.collapse(Bn).bind(io=>(Q(it,io),se(it,d,io).map(as=>(t.onCollapseMenu(it,Ot,as),as))))},Ae=(it,Ot)=>{const Bn=p(Ot);return d.refresh(Bn).bind(io=>(Q(it,io),se(it,d,io)))},Ct=(it,Ot)=>bf(Ot.element)?O.none():Ee(it,Ot,ke.HighlightSubmenu),Lt=(it,Ot)=>bf(Ot.element)?O.none():ht(it,Ot),Dt=(it,Ot)=>ht(it,Ot).orThunk(()=>t.onEscape(it,Ot).map(()=>it)),dn=it=>(Ot,Bn)=>wi(Bn.getSource(),`.${t.markers.item}`).bind(io=>Ot.getSystem().getByDom(io).toOptional().bind(as=>it(Ot,as).map(bt))),fn=Es([Xe(X3(),(it,Ot)=>{const Bn=Ot.event.item;d.lookupItem(p(Bn)).each(()=>{const io=Ot.event.menu;Yo.highlight(it,io);const as=p(Ot.event.item);d.refresh(as).each(Io=>V(it,d,Io))})}),Jl((it,Ot)=>{const Bn=Ot.event.target;it.getSystem().getByDom(Bn).each(io=>{p(io).indexOf("collapse-item")===0&&ht(it,io),Ee(it,io,ke.HighlightSubmenu).fold(()=>{t.onExecute(it,io)},oe)})}),dr((it,Ot)=>{g(it).each(Bn=>{qn.append(it,ni(Bn)),t.onOpenMenu(it,Bn),t.highlightOnOpen===Dr.HighlightMenuAndItem?D(it,Bn):t.highlightOnOpen===Dr.HighlightJustMenu&&_(it,Bn)})}),Xe(eD,(it,Ot)=>{t.onHighlightItem(it,Ot.event.menuComp,Ot.event.itemComp)}),Xe(tD,(it,Ot)=>{t.onDehighlightItem(it,Ot.event.menuComp,Ot.event.itemComp)}),...t.navigateOnHover?[Xe(KE(),(it,Ot)=>{const Bn=Ot.event.item;Ae(it,Bn),Ee(it,Bn,ke.HighlightParent),t.onHover(it,Bn)})]:[]]),Qn=it=>Yo.getHighlighted(it).bind(Yo.getHighlighted),Oo=it=>{Qn(it).each(Ot=>{ht(it,Ot)})},tn=it=>{d.getPrimary().each(Ot=>{D(it,Ot)})},ro=it=>O.from(it.components()[0]).filter(Ot=>Ls(Ot.element,"role")==="menu"),To={collapseMenu:Oo,highlightPrimary:tn,repositionMenus:it=>{d.getPrimary().bind(Bn=>Qn(it).bind(io=>{const as=p(io),Io=lo(d.getMenus()),Rc=Jo(We(Io,xg.extractPreparedMenu));return d.getTriggeringPath(as,Xs=>C(it,Rc,Xs))}).map(io=>({primary:Bn,triggeringPath:io}))).fold(()=>{ro(it).each(Bn=>{t.onRepositionMenu(it,Bn,[])})},({primary:Bn,triggeringPath:io})=>{t.onRepositionMenu(it,Bn,io)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ya(t.tmenuBehaviours,[an.config({mode:"special",onRight:dn(Ct),onLeft:dn(Lt),onEscape:dn(Dt),focusIn:(it,Ot)=>{d.getPrimary().each(Bn=>{D0(it,Bn.element,jm())})}}),Yo.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),po.config({find:it=>Yo.getHighlighted(it)}),qn.config({})]),eventOrder:t.eventOrder,apis:To,events:fn}},oD=te("collapse-item"),sD=(t,s,a)=>({primary:t,menus:s,expansions:a}),nI=(t,s)=>({primary:t,menus:ss(t,s),expansions:{}}),rD=t=>({value:Ht(oD()),meta:{text:t}}),C1=_i({name:"TieredMenu",configFields:[H0("onExecute"),H0("onEscape"),nf("onOpenMenu"),nf("onOpenSubmenu"),Co("onRepositionMenu"),Co("onCollapseMenu"),Ce("highlightOnOpen",Dr.HighlightMenuAndItem),ql("data",[Ze("primary"),Ze("menus"),Ze("expansions")]),Ce("fakeFocus",!1),Co("onHighlightItem"),Co("onDehighlightItem"),Co("onHover"),$p(),Ze("dom"),Ce("navigateOnHover",!0),Ce("stayInDom",!1),ra("tmenuBehaviours",[an,Yo,po,qn]),Ce("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:nD,extraApis:{tieredData:sD,singleData:nI,collapseItem:rD}}),oI=(t,s,a,l,d)=>{const g=()=>t.lazySink(s),p=l.type==="horizontal"?{layouts:{onLtr:()=>Vb(),onRtl:()=>W0()}}:{},C=_=>_.length===2,k=_=>C(_)?p:{};return C1.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(wo.close(s),t.onEscape.map(_=>_(s)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(_,D)=>{Fc.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(_,D,M,V)=>{const z=g().getOrDie();Fc.position(z,M,{anchor:{type:"submenu",item:D,...k(V)}})},onRepositionMenu:(_,D,M)=>{const V=g().getOrDie();Fc.positionWithinBounds(V,D,a,d()),$(M,z=>{const Q=k(z.triggeringPath);Fc.position(V,z.triggeredMenu,{anchor:{type:"submenu",item:z.triggeringItem,...Q}})})}})},sI=(t,s)=>{const a=(z,Q)=>t.getRelated(z).exists(ke=>Jd(ke,Q)),l=(z,Q)=>{wo.setContent(z,Q)},d=(z,Q,se)=>{g(z,Q,se,O.none())},g=(z,Q,se,ke)=>{p(z,Q,se,()=>ke.map(fe=>ho(fe)))},p=(z,Q,se,ke)=>{const fe=t.lazySink(z).getOrDie();wo.openWhileCloaked(z,Q,()=>Fc.positionWithinBounds(fe,z,se,ke())),yt.setValue(z,O.some({mode:"position",config:se,getBounds:ke}))},C=(z,Q,se)=>{k(z,Q,se,O.none)},k=(z,Q,se,ke)=>{const fe=oI(t,z,Q,se,ke);wo.open(z,fe),yt.setValue(z,O.some({mode:"menu",menu:fe}))},_=z=>{wo.isOpen(z)&&(yt.setValue(z,O.none()),wo.close(z))},D=z=>wo.getState(z),M=z=>{wo.isOpen(z)&&yt.getValue(z).each(Q=>{switch(Q.mode){case"menu":wo.getState(z).each(C1.repositionMenus);break;case"position":const se=t.lazySink(z).getOrDie();Fc.positionWithinBounds(se,z,Q.config,Q.getBounds());break}})},V={setContent:l,showAt:d,showWithin:g,showWithinBounds:p,showMenuAt:C,showMenuWithinBounds:k,hide:_,getContent:D,reposition:M,isOpen:wo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Ya(t.inlineBehaviours,[wo.config({isPartOf:(z,Q,se)=>Jd(Q,se)||a(z,se),getAttachPoint:z=>t.lazySink(z).getOrDie(),onOpen:z=>{t.onShow(z)},onClose:z=>{t.onHide(z)}}),yt.config({store:{mode:"memory",initialValue:O.none()}}),Si.config({channels:{...Bh({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(z=>({fireEventInstead:{event:z.event}})).getOr({})}),...iv({...t.fireRepositionEventInstead.map(z=>({fireEventInstead:{event:z.event}})).getOr({}),doReposition:M})}})]),eventOrder:t.eventOrder,apis:V}},Tr=_i({name:"InlineView",configFields:[Ze("lazySink"),Co("onShow"),Co("onHide"),zf("onEscape"),ra("inlineBehaviours",[wo,yt,Si]),Gc("fireDismissalEventInstead",[Ce("event",Wd())]),Gc("fireRepositionEventInstead",[Ce("event",hb())]),Ce("getRelated",O.none),Ce("isExtraPart",Kt),Ce("eventOrder",O.none)],factory:sI,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithin:(t,s,a,l,d)=>{t.showWithin(s,a,l,d)},showWithinBounds:(t,s,a,l,d)=>{t.showWithinBounds(s,a,l,d)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,d)=>{t.showMenuWithinBounds(s,a,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Mv=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ll=_i({name:"Button",factory:t=>{const s=wS(t.action),a=t.dom.tag,l=g=>Zt(t.dom,"attributes").bind(p=>Zt(p,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),p=l("role").map(C=>({role:C})).getOr({});return{type:g,...p}}else return{role:l("role").getOr("button")}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:ki.augment(t.buttonBehaviours,[Tn.config({}),an.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Ce("uid",void 0),Ze("dom"),Ce("components",[]),ki.field("buttonBehaviours",[Tn,an]),Ho("action"),Ho("role"),Ce("eventOrder",{})]}),Vs=t=>{const s=vE(t)&&Zs(t,"uid")?t.uid:fd("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var kd=tinymce.util.Tools.resolve("tinymce.util.I18n");const QE={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},aD="temporary-placeholder",Jy=t=>()=>Zt(t,aD).getOr("!not found!"),e_=(t,s)=>{const a=t.toLowerCase();if(kd.isRtl()){const l=Hl(a,"-rtl");return In(s,l)?l:a}else return a},Nv=(t,s)=>Zt(s,e_(t,s)),Qy=(t,s)=>{const a=s();return Nv(t,a).getOrThunk(Jy(a))},cD=(t,s,a)=>{const l=s();return Nv(t,l).or(a).getOrThunk(Jy(l))},lD=t=>kd.isRtl()?In(QE,t):!1,t_=()=>So("add-focusable",[dr(t=>{mk(t.element,"svg").each(s=>Rn(s,"focusable","false"))})]),iD=(t,s,a,l)=>{var d,g;const p=lD(s)?["tox-icon--flip"]:[],C=Zt(a,e_(s,a)).or(l).getOrThunk(Jy(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:C},behaviours:ut([...(g=t.behaviours)!==null&&g!==void 0?g:[],t_()])}},mm=(t,s,a,l=O.none())=>iD(s,t,a(),l),rI=(t,s,a)=>{const l=a(),d=zt(t,g=>In(l,e_(g,l)));return iD(s,d.getOr(aD),l,O.none())},n_={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},TS=_i({name:"Notification",factory:t=>{const s=Vs({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:ut([qn.config({})])}),a=z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${z}%`}}}),l=z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${z}%`}}),d=Vs({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:ut([qn.config({})])}),C={updateProgress:(z,Q)=>{z.getSystem().isConnected()&&d.getOpt(z).each(se=>{qn.set(se,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(Q)]},l(Q)])})},updateText:(z,Q)=>{if(z.getSystem().isConnected()){const se=s.get(z);qn.set(se,[ya(Q)])}}},k=Be([t.icon.toArray(),t.level.toArray(),t.level.bind(z=>O.from(n_[z])).toArray()]),_=Vs(Ll.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[mm("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:z=>{t.onAction(z)}})),D=rI(k,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),M={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:ut([qn.config({})])},V=[D,M];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(z=>["tox-notification","tox-notification--in",`tox-notification--${z}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:ut([Tn.config({}),So("notification-events",[Xe(Wm(),z=>{_.getOpt(z).each(Tn.focus)})])]),components:V.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[_.asSpec()]:[]),apis:C}},configFields:[Ho("level"),Ze("progress"),Ho("icon"),Ze("onAction"),Ze("text"),Ze("iconProvider"),Ze("translationProvider"),oa("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var o_=(t,s,a)=>{const l=s.backstage.shared,d=()=>{const k=ho(Je.fromDom(t.getContentAreaContainer())),_=Oa(),D=oi(_.x,k.x,k.right),M=oi(_.y,k.y,k.bottom),V=Math.max(k.right,_.right),z=Math.max(k.bottom,_.bottom);return O.some(Yt(D,M,V-D,z-M))};return{open:(k,_)=>{const D=()=>{_(),Tr.hide(V)},M=Yc(TS.sketch({text:k.text,level:yo(["success","error","warning","warn","info"],k.type)?k.type:void 0,progress:k.progressBar===!0,icon:k.icon,closeButton:k.closeButton,onAction:D,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),V=Yc(Tr.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{},...l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(V),_n(k.timeout)&&k.timeout>0&&Mv.setEditorTimeout(t,()=>{D()},k.timeout);const Q={close:D,reposition:()=>{const se=ni(M),ke={maxHeightFunction:Zp()},fe=t.notificationManager.getNotifications();if(fe[0]===Q){const Ee={...l.anchors.banner(),overrides:ke};Tr.showWithinBounds(V,se,{anchor:Ee},d)}else lr(fe,Q).each(Ee=>{const ht=fe[Ee-1].getEl(),Ae={type:"node",root:zr(),node:O.some(Je.fromDom(ht)),overrides:ke,layouts:{onRtl:()=>[Ca],onLtr:()=>[Ca]}};Tr.showWithinBounds(V,se,{anchor:Ae},d)})},text:se=>{TS.updateText(M,se)},settings:k,getEl:()=>M.element.dom,progressBar:{value:se=>{TS.updateProgress(M,se)}}};return Q},close:k=>{k.close()},getArgs:k=>k.settings}},eC=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),uD=tinymce.util.Tools.resolve("tinymce.EditorManager"),Bv=tinymce.util.Tools.resolve("tinymce.Env"),Uu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Uu||(Uu={}));var tC;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(tC||(tC={}));const zs=t=>s=>s.options.get(t),nC=t=>s=>O.from(t(s)),dD=t=>{const s=Bv.deviceType.isPhone(),a=Bv.deviceType.isTablet()||s,l=t.options.register,d=p=>xt(p)||p===!1,g=p=>xt(p)||_n(p);l("skin",{processor:p=>xt(p)||p===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:eC.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:p=>xt(p)||Zo(p),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:p=>Zo(p)||xt(p)||Wn(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),$s(9,p=>{l("toolbar"+(p+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:tC.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:p=>p==="both"||Zo(p),default:!Bv.deviceType.isTouch()}),l("sidebar_show",{processor:"string"})},kS=zs("readonly"),ES=zs("height"),_S=zs("width"),s_=nC(zs("min_width")),oC=nC(zs("min_height")),AS=nC(zs("max_width")),r_=nC(zs("max_height")),mD=nC(zs("style_formats")),fD=zs("style_formats_merge"),gD=zs("style_formats_autohide"),a_=zs("content_langs"),OS=zs("removed_menuitems"),Pv=zs("toolbar_mode"),sC=zs("toolbar_groups"),c_=zs("toolbar_location"),cI=zs("fixed_toolbar_container"),lI=zs("fixed_toolbar_container_target"),hD=zs("toolbar_persist"),pD=zs("toolbar_sticky_offset"),bD=zs("menubar"),rC=zs("toolbar"),vD=zs("file_picker_callback"),yD=zs("file_picker_validator_handler"),DS=zs("file_picker_types"),Yh=zs("typeahead_urls"),CD=zs("anchor_top"),wD=zs("anchor_bottom"),RS=zs("draggable_modal"),SD=zs("statusbar"),l_=zs("elementpath"),xD=zs("branding"),i_=zs("resize"),u_=zs("paste_as_text"),MS=zs("sidebar_show"),TD=zs("promotion"),NS=t=>t.options.get("skin")===!1,BS=t=>t.options.get("menubar")!==!1,$v=t=>{const s=t.options.get("skin_url");if(NS(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return uD.baseURL+"/skins/ui/"+a}},kD=t=>t.options.get("line_height_formats").split(" "),Iv=t=>{const s=rC(t),a=xt(s),l=Wn(s)&&s.length>0;return!cC(t)&&(l||a||s===!0)},aC=t=>{const s=$s(9,l=>t.options.get("toolbar"+(l+1))),a=ze(s,xt);return fr(a.length>0,a)},cC=t=>aC(t).fold(()=>{const s=rC(t);return Ye(s,xt)&&s.length>0},bt),PS=t=>c_(t)===tC.bottom,ED=t=>{var s;if(!t.inline)return O.none();const a=(s=cI(t))!==null&&s!==void 0?s:"";if(a.length>0)return Fr(zr(),a);const l=lI(t);return co(l)?O.some(Je.fromDom(l)):O.none()},lC=t=>t.inline&&ED(t).isSome(),iC=t=>ED(t).getOrThunk(()=>or(fo(Je.fromDom(t.getElement())))),d_=t=>t.inline&&!BS(t)&&!Iv(t)&&!cC(t),uC=t=>(t.options.get("toolbar_sticky")||t.inline)&&!lC(t)&&!d_(t),_D=t=>{const s=t.options.get("menu");return Lo(s,a=>({...a,items:a.items}))};var iI=Object.freeze({__proto__:null,get ToolbarMode(){return Uu},get ToolbarLocation(){return tC},register:dD,getSkinUrl:$v,isReadOnly:kS,isSkinDisabled:NS,getHeightOption:ES,getWidthOption:_S,getMinWidthOption:s_,getMinHeightOption:oC,getMaxWidthOption:AS,getMaxHeightOption:r_,getUserStyleFormats:mD,shouldMergeStyleFormats:fD,shouldAutoHideStyleFormats:gD,getLineHeightFormats:kD,getContentLanguages:a_,getRemovedMenuItems:OS,isMenubarEnabled:BS,isMultipleToolbars:cC,isToolbarEnabled:Iv,isToolbarPersist:hD,getMultipleToolbarsOption:aC,getUiContainer:iC,useFixedContainer:lC,getToolbarMode:Pv,isDraggableModal:RS,isDistractionFree:d_,isStickyToolbar:uC,getStickyToolbarOffset:pD,getToolbarLocation:c_,isToolbarLocationBottom:PS,getToolbarGroups:sC,getMenus:_D,getMenubar:bD,getToolbar:rC,getFilePickerCallback:vD,getFilePickerTypes:DS,useTypeaheadUrls:Yh,getAnchorTop:CD,getAnchorBottom:wD,getFilePickerValidatorHandler:yD,useStatusBar:SD,useElementPath:l_,promotionEnabled:TD,useBranding:xD,getResize:i_,getPasteAsText:u_,getSidebarShow:MS});const AD="[data-mce-autocompleter]",OD=t=>wi(t,AD),uI=t=>Fr(t,AD),dI={setup:(t,s)=>{const a=(d,g)=>{mn(d,Zm(),{raw:g})},l=()=>t.getMenu().bind(Yo.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(Zd),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(Yo.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&OD(Je.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var m_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(m_||(m_={}));var fm=m_;const f_="tox-menu-nav__js",Lv="tox-collection__item",g_="tox-swatch",mI={normal:f_,color:g_},DD="tox-collection__item--enabled",RD="tox-collection__group-heading",MD="tox-collection__item-icon",h_="tox-collection__item-label",fI="tox-collection__item-accessory",ND="tox-collection__item-caret",gI="tox-collection__item-checkmark",dC="tox-collection__item--active",$S="tox-collection__item-container",hI="tox-collection__item-container--column",BD="tox-collection__item-container--row",pI="tox-collection__item-container--align-right",bI="tox-collection__item-container--align-left",vI="tox-collection__item-container--valign-top",yI="tox-collection__item-container--valign-middle",CI="tox-collection__item-container--valign-bottom",PD=t=>Zt(mI,t).getOr(f_),wI=t=>t==="color"?"tox-swatches":"tox-menu",p_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:wI(t),tieredMenu:"tox-tiered-menu"}),w1=t=>{const s=p_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:PD(t)}},IS=(t,s,a)=>{const l=p_(a);return{tag:"div",classes:Be([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},SI=[zu.parts.items({})],Fv=(t,s,a)=>{const l=p_(a);return{dom:{tag:"div",classes:Be([[l.tieredMenu]])},markers:w1(a)}},$D=te([Ho("data"),Ce("inputAttributes",{}),Ce("inputStyles",{}),Ce("tag","input"),Ce("inputClasses",[]),Co("onSetValue"),Ce("styles",{}),Ce("eventOrder",{}),ra("inputBehaviours",[yt,Tn]),Ce("selectOnFocus",!0)]),ID=t=>ut([Tn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=ti(a);a.dom.setSelectionRange(0,l.length)}:oe})]),xI=t=>({...ID(t),...Ya(t.inputBehaviours,[yt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>ti(s.element),setValue:(s,a)=>{ti(s.element)!==a&&Xm(s.element,a)}},onSetValue:t.onSetValue})])}),LD=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),FD=(t,s)=>({uid:t.uid,dom:LD(t),components:[],behaviours:xI(t),eventOrder:t.eventOrder}),Hv=_i({name:"Input",configFields:$D(),factory:FD}),LS=Ht("refetch-trigger-event"),FS=Ht("redirect-menu-item-interaction"),b_="tox-menu__searcher",Vv=t=>Fr(t.element,`.${b_}`).bind(s=>t.getSystem().getByDom(s).toOptional()),mC=Vv,HD=(t,s)=>{yt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},gm=t=>{const s=yt.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},v_=(t,s)=>{B(s.element,"id").each(a=>Rn(t.element,"aria-activedescendant",a))},TI=t=>{const s=(d,g)=>(g.cut(),O.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return mn(d,FS,p),O.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Lv]},components:[Hv.sketch({inputClasses:[b_,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:ut([So(l,[Xe(Wf(),d=>{es(d,LS)}),Xe(Zm(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),an.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,an.name()]}})]}},HS="tox-collection--results__js",VD=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ht("aria-item-search-result-id"),"aria-selected":"false"}}}:t},y_=(t,s)=>a=>{const l=rn(a,s);return We(l,d=>({dom:t,components:d}))},zv=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[zu.parts.items({preprocess:t!=="auto"?y_({tag:"div",classes:["tox-swatches__row"]},t):cn})]}]}),kI=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[zu.parts.items({preprocess:y_({tag:"div",classes:["tox-collection__group"]},t)})]}),zD=(t,s)=>{const a=[];let l=[];return $(t,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(In(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),We(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},VS=(t,s,a)=>zu.parts.items({preprocess:l=>{const d=We(l,a);return t!=="auto"&&t>1?y_({tag:"div",classes:["tox-collection__group"]},t)(d):zD(d,(g,p)=>s[p].type==="separator")}}),C_=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[VS(t,s,cn)]}),w_=(t,s,a=!0)=>{const l=Ht("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",HS].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[VS(t,s,VD)]}},EI=(t,s,a)=>{const l=Ht("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[TI({i18n:kd.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],HS],attributes:{id:l}},components:[VS(t,s,VD)]}]}},S_=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[zu.parts.items({preprocess:a=>zD(a,(l,d)=>t[d].type==="separator")})]}),Uv=t=>oo(t,s=>"icon"in s&&s.icon!==void 0),Tg=t=>(console.error(Yi(t)),console.log(t),O.none()),UD=(t,s,a,l,d)=>{const g=S_(a);return{value:t,dom:g.dom,components:g.components,items:a}},zS=(t,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?C_(l,a):d.searchMode.searchMode==="search-with-field"?EI(l,a,d.searchMode):w_(l,a);if(d.menuType==="color"){const p=zv(l);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const p=C_(l,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const p=kI(l);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:IS(s,l,d.menuType),components:SI,items:a}},aa=Ir("type"),x_=Ir("name"),T_=Ir("label"),kg=Ir("text"),_I=Ir("title"),WD=Ir("icon"),fC=Ir("value"),AI=Zr("fetch"),gC=Zr("getSubmenuItems"),S1=Zr("onAction"),OI=Zr("onItemAction"),x1=sa("onSetup",()=>oe),ZD=Ma("name"),Wv=Ma("text"),hm=Ma("icon"),hC=Ma("tooltip"),US=Ma("label"),jD=Ma("shortcut"),GD=zf("select"),WS=oa("active",!1),DI=oa("borderless",!1),Wu=oa("enabled",!0),Zv=oa("primary",!1),ZS=t=>Ce("columns",t),jS=Ce("meta",{}),GS=sa("onAction",oe),Xh=t=>Hs("type",t),k_=t=>Ra("name","name",Gi(()=>Ht(`${t}-name`)),ta),E_=t=>Ra("value","value",Gi(()=>Ht(`${t}-value`)),Nc()),qD=nn([aa,Wv]),KD=t=>Fo("separatormenuitem",qD,t),YD=nn([Xh("autocompleteitem"),WS,Wu,jS,fC,Wv,hm]),T1=t=>Fo("Autocompleter.Separator",qD,t),RI=t=>Fo("Autocompleter.Item",YD,t),k1=[Wu,hC,hm,Wv,x1],qS=nn([aa,S1].concat(k1)),XD=t=>Fo("toolbarbutton",qS,t),KS=[WS].concat(k1),JD=nn(KS.concat([aa,S1])),__=t=>Fo("ToggleButton",JD,t),YS=[sa("predicate",Kt),Kl("scope","node",["node","editor"]),Kl("position","selection",["node","selection","line"])],QD=k1.concat([Xh("contextformbutton"),Zv,S1,cc("original",cn)]),MI=KS.concat([Xh("contextformbutton"),Zv,S1,cc("original",cn)]),eR=k1.concat([Xh("contextformbutton")]),tR=KS.concat([Xh("contextformtogglebutton")]),nR=Zc("type",{contextformbutton:QD,contextformtogglebutton:MI}),oR=nn([Xh("contextform"),sa("initValue",te("")),US,jc("commands",nR),Dl("launch",Zc("type",{contextformbutton:eR,contextformtogglebutton:tR}))].concat(YS)),NI=t=>Fo("ContextForm",oR,t),sR=nn([Xh("contexttoolbar"),Ir("items")].concat(YS)),pC=t=>Fo("ContextToolbar",sR,t),BI=[aa,Ir("src"),Ma("alt"),T("classes",[],ta)],PI=nn(BI),$I=[aa,kg,ZD,T("classes",["tox-collection__item-label"],ta)],rR=nn($I),A_=Tu(()=>nh("type",{cardimage:PI,cardtext:rR,cardcontainer:II})),II=nn([aa,Hs("direction","horizontal"),Hs("align","left"),Hs("valign","middle"),jc("items",A_)]),jv=[Wu,Wv,jD,E_("menuitem"),jS],LI=nn([aa,US,jc("items",A_),x1,GS].concat(jv)),FI=t=>Fo("cardmenuitem",LI,t),HI=nn([aa,WS,hm].concat(jv)),XS=t=>Fo("choicemenuitem",HI,t),aR=[aa,Ir("fancytype"),GS],cR=[Ce("initData",{})].concat(aR),lR=[L("initData",{},[oa("allowCustomColors",!0),Hs("storageKey","default"),Uf("colors",Nc())])].concat(aR),iR=Zc("fancytype",{inserttable:cR,colorswatch:lR}),VI=t=>Fo("fancymenuitem",iR,t),uR=nn([aa,x1,GS,hm].concat(jv)),dR=t=>Fo("menuitem",uR,t),mR=nn([aa,gC,x1,hm].concat(jv)),fR=t=>Fo("nestedmenuitem",mR,t),zI=nn([aa,hm,WS,x1,S1].concat(jv)),UI=t=>Fo("togglemenuitem",zI,t),O_=(t,s,a)=>{const l=_c(t.element,"."+a);if(l.length>0){const d=Xt(l,g=>{const p=g.dom.getBoundingClientRect().top,C=l[0].dom.getBoundingClientRect().top;return Math.abs(p-C)>s}).getOr(l.length);return O.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return O.none()},gR=(t,s)=>ut([So(t,s)]),E1={namedEvents:gR,unnamedEvents:t=>gR(Ht("unnamed-events"),t)},hR=Ht("tooltip.exclusive"),Jh=Ht("tooltip.show"),Ai=Ht("tooltip.hide"),pR=(t,s,a)=>{t.getSystem().broadcastOn([hR],{})};var WI=Object.freeze({__proto__:null,hideAllExclusive:pR,setComponents:(t,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&qn.set(d,l)})}}),ZI=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{fc(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},l=d=>{if(!s.isShowing()){pR(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Es(t.mode==="normal"?[Xe(Vd(),C=>{es(d,Jh)}),Xe(Ou(),C=>{es(d,Ai)})]:[]),behaviours:ut([qn.config({})])});s.setTooltip(p),mc(g,p),t.onShow(d,p),Fc.position(g,p,{anchor:t.anchor(d)})}};return Es(Be([[Xe(Jh,d=>{s.resetTimer(()=>{l(d)},t.delay)}),Xe(Ai,d=>{s.resetTimer(()=>{a(d)},t.delay)}),Xe(Ji(),(d,g)=>{const p=g;p.universal||yo(p.channels,hR)&&a(d)}),Ci(d=>{a(d)})],t.mode==="normal"?[Xe(Wm(),d=>{es(d,Jh)}),Xe(wp(),d=>{es(d,Ai)}),Xe(Vd(),d=>{es(d,Jh)}),Xe(Ou(),d=>{es(d,Ai)})]:[Xe(O0(),(d,g)=>{es(d,Jh)}),Xe(bb(),d=>{es(d,Ai)})]]))}}),jI=[Ze("lazySink"),Ze("tooltipDom"),Ce("exclusive",!0),Ce("tooltipComponents",[]),Ce("delay",300),Kl("mode","normal",["normal","follow-highlight"]),Ce("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:te([Ca,Nl,ic,Ic,uc,Ec]),onRtl:te([Ca,Nl,ic,Ic,uc,Ec])}})),Co("onHide"),Co("onShow")],qI=Object.freeze({__proto__:null,init:()=>{const t=mr(),s=mr(),a=()=>{t.on(clearTimeout)},l=(g,p)=>{a(),t.set(setTimeout(g,p))},d=te("not-implemented");return fl({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:l,readState:d})}});const vR=Ka({fields:jI,name:"tooltipping",active:ZI,state:qI,apis:WI}),KI=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),li="silver.readonly",Sf=nn([ld("readonly")]),JS=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&$(d,g=>{g.broadcastOn([Cd()],{target:l})}),$(d,g=>{g.broadcastOn([li],{readonly:s})})},D_=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&JS(s,!0)}),t.on("SwitchMode",()=>JS(s,t.mode.isReadOnly())),kS(t)&&t.mode.set("readonly")},Kr=()=>Si.config({channels:{[li]:{schema:Sf,onReceive:(t,s)=>{vn.set(t,s.readonly)}}}}),Oi={item:t=>vn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>vn.config({disabled:t}),splitButton:t=>vn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>vn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},ex=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},Ed=(t,s)=>dr(a=>{ex(t,a)(d=>{const g=t.onSetup(d);Qe(g)&&s.set(g)})}),bC=(t,s)=>Ci(a=>ex(t,a)(s.get())),YI=(t,s)=>Jl((a,l)=>{ex(t,a)(t.onAction),!t.triggersSubmenu&&s===fm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&es(a,Sp()),l.stop())}),Di={[Xl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},_1=Jo,ii=(t,s,a,l)=>{const d=H(oe);return{type:"item",dom:s.dom,components:_1(s.optComponents),data:t.data,eventOrder:Di,hasSubmenu:t.triggersSubmenu,itemBehaviours:ut([So("item-events",[YI(t,a),Ed(t,d),bC(t,d)]),Oi.item(()=>!t.enabled||l.isDisabled()),Kr(),qn.config({})].concat(t.itemBehaviours))}},qv=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),_s=t=>{const s=Bv.os.isMacOS()||Bv.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=We(g,C=>{const k=C.toLowerCase().trim();return In(d,k)?d[k]:C});return s?p.join(""):p.join("+")},Eg=(t,s,a=[MD])=>mm(t,{tag:"div",classes:a},s),vC=t=>({dom:{tag:"div",classes:[h_]},components:[ya(kd.translate(t))]}),R_=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),M_=(t,s)=>({dom:{tag:"div",classes:[h_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[ya(kd.translate(s))]}]}),N_=t=>({dom:{tag:"div",classes:[fI]},components:[ya(_s(t))]}),CR=t=>Eg("checkmark",t,[gI]),B_=t=>Eg("chevron-right",t,[ND]),XI=t=>Eg("chevron-down",t,[ND]),wR=(t,s)=>{const a=t.direction==="vertical"?hI:BD,l=t.align==="left"?bI:pI;return{dom:{tag:"div",classes:[$S,a,l,(()=>{switch(t.valign){case"top":return vI;case"middle":return yI;case"bottom":return CI}})()]},components:s}},SR=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),P_=(t,s,a)=>{const l="custom",d="remove",g=t.ariaLabel,p=t.value,C=t.iconContent.map(_=>cD(_,s.icons,a));return{dom:(()=>{const _=g_,D=C.getOr(""),V={tag:"div",attributes:g.map(z=>({title:s.translate(z)})).getOr({}),classes:[_]};return p===l?{...V,tag:"button",classes:[...V.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...V,classes:[...V.classes,"tox-swatch--remove"],innerHtml:D}:co(p)?{...V,attributes:{...V.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:V})(),optComponents:[]}},$_=t=>{const s=t.map(a=>({attributes:{title:kd.translate(a)}})).getOr({});return{tag:"div",classes:[f_,Lv],...s}},tx=(t,s,a,l)=>{const d={tag:"div",classes:[MD]},g=V=>mm(V,d,s.icons,l),p=()=>O.some({dom:d}),C=a?t.iconContent.map(g).orThunk(p):O.none(),k=t.checkMark,_=O.from(t.meta).fold(()=>vC,V=>In(V,"style")?At(M_,V.style):vC),D=t.htmlContent.fold(()=>t.textContent.map(_),V=>O.some(R_(V,[h_])));return{dom:$_(t.ariaLabel),optComponents:[C,D,t.shortcutContent.map(N_),k,t.caret]}},yC=(t,s,a,l=O.none())=>t.presets==="color"?P_(t,s,l):tx(t,s,a,l),xR=(t,s)=>Zt(t,"tooltipWorker").map(a=>[vR.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:Zp}}),mode:"follow-highlight",onShow:(l,d)=>{a(g=>{vR.setComponents(l,[_b({element:Je.fromDom(g)})])})}})]).getOr([]),JI=t=>eC.DOM.encode(t),TR=(t,s)=>{const a=kd.translate(t),l=JI(a);if(s.length>0){const d=new RegExp(KI(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},QI=(t,s,a,l,d,g,p,C=!0)=>{const k=yC({presets:l,textContent:O.none(),htmlContent:a?t.text.map(_=>TR(_,s)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},p.providers,C,t.icon);return ii({data:qv(t),enabled:t.enabled,getApi:te({}),onAction:_=>d(t.value,t.meta),onSetup:te(oe),triggersSubmenu:!1,itemBehaviours:xR(t.meta,p)},k,g,p.providers)},kR=(t,s)=>We(t,a=>{switch(a.type){case"cardcontainer":return wR(a,kR(a.items,s));case"cardimage":return SR(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>yo(s.cardText.highlightOn,g))?O.from(s.cardText.matchText).getOr(""):"";return R_(TR(a.text,d),a.classes)}}),eL=(t,s,a,l)=>{const d=p=>({isEnabled:()=>!vn.isDisabled(p),setEnabled:C=>{vn.set(p,!C),$(_c(p.element,"*"),k=>{p.getSystem().getByDom(k).each(_=>{_.hasConfigured(vn)&&vn.set(_,!C)})})}}),g={dom:$_(t.label),optComponents:[O.some({dom:{tag:"div",classes:[$S,BD]},components:kR(t.items,l)})]};return ii({data:qv({text:O.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(l.itemBehaviours).getOr([])},g,s,a.providers)},tL=(t,s,a,l,d,g,p,C=!0)=>{const k=D=>({setActive:M=>{Po.set(D,M)},isActive:()=>Po.isOn(D),isEnabled:()=>!vn.isDisabled(D),setEnabled:M=>vn.set(D,!M)}),_=yC({presets:a,textContent:s?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:O.none(),checkMark:s?O.some(CR(p.icons)):O.none(),caret:O.none(),value:t.value},p,C);return Rs(ii({data:qv(t),enabled:t.enabled,getApi:k,onAction:D=>l(t.value),onSetup:D=>(D.setActive(d),oe),triggersSubmenu:!1,itemBehaviours:[]},_,g,p),{toggling:{toggleClass:DD,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},ER=By(xS(),JE()),_R=t=>({value:t}),I_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,AR=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,L_=t=>I_.test(t)||AR.test(t),OR=t=>da(t,"#").toUpperCase(),nL=t=>L_(t)?O.some({value:OR(t)}):O.none(),oL=t=>({value:t.value.replace(I_,(a,l,d,g)=>l+l+d+d+g+g)}),sL=t=>{const s=oL(t),a=AR.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},F_=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},CC=t=>{const s=F_(t.red)+F_(t.green)+F_(t.blue);return _R(s)},DR=Math.min,RR=Math.max,Kv=Math.round,MR=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,rL=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Qh=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),nx=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},NR=t=>{let s,a,l;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=RR(0,DR(g,1)),p=RR(0,DR(p,1)),g===0)return s=a=l=Kv(255*p),Qh(s,a,l,1);const C=d/60,k=p*g,_=k*(1-Math.abs(C%2-1)),D=p-k;switch(Math.floor(C)){case 0:s=k,a=_,l=0;break;case 1:s=_,a=k,l=0;break;case 2:s=0,a=k,l=_;break;case 3:s=0,a=_,l=k;break;case 4:s=_,a=0,l=k;break;case 5:s=k,a=0,l=_;break;default:s=a=l=0}return s=Kv(255*(s+D)),a=Kv(255*(a+D)),l=Kv(255*(l+D)),Qh(s,a,l,1)},wC=t=>{const s=sL(t),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return Qh(a,l,d,1)},H_=(t,s,a,l)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),C=parseFloat(l);return Qh(d,g,p,C)},V_=t=>{if(t==="transparent")return O.some(Qh(0,0,0,0));const s=MR.exec(t);if(s!==null)return O.some(H_(s[1],s[2],s[3],"1"));const a=rL.exec(t);return a!==null?O.some(H_(a[1],a[2],a[3],a[4])):O.none()},z_=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,BR=Qh(255,0,0,1),aL=t=>{t.dispatch("SkinLoaded")},cL=(t,s)=>{t.dispatch("SkinLoadError",s)},lL=t=>{t.dispatch("ResizeEditor")},U_=(t,s)=>{t.dispatch("ResizeContent",s)},PR=(t,s)=>{t.dispatch("ScrollContent",s)},iL=(t,s)=>{t.dispatch("TextColorChange",s)},uL=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},dL=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),mL=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var A1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const $R={},IR=(t,s=10)=>{const a=A1.getItem(t),l=xt(a)?JSON.parse(a):[],g=(_=>s-_.length<0?_.slice(0,s):_)(l),p=_=>{lr(g,_).each(C),g.unshift(_),g.length>s&&g.pop(),A1.setItem(t,JSON.stringify(g))},C=_=>{g.splice(_,1)};return{add:p,state:()=>g.slice(0)}},_d=t=>Zt($R,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=A1.getItem(s);if($n(a)){const d=A1.getItem("tinymce-custom-colors");A1.setItem(s,co(d)?d:"[]")}const l=IR(s,10);return $R[t]=l,l}),LR=t=>We(_d(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),W_=(t,s)=>{_d(t).add(s)},SC=(t,s,a)=>({hue:t,saturation:s,value:a}),Z_=t=>{let s=0,a=0,l=0;const d=t.red/255,g=t.green/255,p=t.blue/255,C=Math.min(d,Math.min(g,p)),k=Math.max(d,Math.max(g,p));if(C===k)return l=C,SC(0,0,l*100);const _=d===C?g-p:p===C?d-g:p-d;return s=d===C?3:p===C?1:5,s=60*(s-_/(k-C)),a=(k-C)/k,l=k,SC(Math.round(s),Math.round(a*100),Math.round(l*100))},j_=t=>Z_(wC(t)),FR=t=>CC(NR(t)),fL=t=>nL(t).orThunk(()=>V_(t).map(CC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],p=l[2],C=l[3];return CC(Qh(d,g,p,C))}),ox="forecolor",G_="hilitecolor",q_=t=>Math.max(5,Math.ceil(Math.sqrt(t))),gL=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+fL(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},su=t=>s=>s.options.get(t),K_="#000000",HR=t=>{const s=t.options.register,a=l=>Ye(l,xt)?{value:gL(l),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:q_(O1(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:q_(O1(t,ox).length)}),s("color_cols_background",{processor:"number",default:q_(O1(t,G_).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:K_}),s("color_default_background",{processor:"string",default:K_})},Y_=(t,s)=>s===ox?su("color_cols_foreground")(t):s===G_?su("color_cols_background")(t):su("color_cols")(t),X_=su("custom_colors"),O1=(t,s)=>s===ox&&t.options.isSet("color_map_foreground")?su("color_map_foreground")(t):s===G_&&t.options.isSet("color_map_background")?su("color_map_background")(t):su("color_map")(t),J_=su("color_default_foreground"),Q_=su("color_default_background"),eA=(t,s)=>{const a=Ge(Je.fromDom(t.selection.getStart()),s==="hilitecolor"?"background-color":"color");return V_(a).map(l=>"#"+CC(l).value)},hL=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},VR=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},pL=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{hL(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{VR(t,s)})},zR=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},tA=(t,s,a,l)=>{a==="custom"?ZR(t)(g=>{g.each(p=>{W_(s,p),t.execCommand("mceApplyTextcolor",s,p),l(p)})},eA(t,s).getOr(K_)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},nA=(t,s,a)=>t.concat(LR(s).concat(zR(a))),oA=(t,s,a)=>l=>{l(nA(t,s,a))},sA=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},UR=(t,s,a,l,d)=>{t.ui.registry.addSplitButton(s,{tooltip:l,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:g=>{const p=eA(t,a);return Qr(p,g.toUpperCase())},columns:Y_(t,a),fetch:oA(O1(t,a),a,X_(t)),onAction:g=>{tA(t,a,d.get(),oe)},onItemAction:(g,p)=>{tA(t,a,p,C=>{d.set(C),iL(t,{name:s,color:C})})},onSetup:g=>{sA(g,s,d.get());const p=C=>{C.name===s&&sA(g,C.name,C.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},WR=(t,s,a,l)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",initData:{storageKey:a},onAction:d=>{tA(t,a,d.value,oe)}}]})},ZR=t=>(s,a)=>{let l=!1;const d=C=>{const _=C.getData().colorpicker;l?(s(O.from(_)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(C,k)=>{k.name==="hex-valid"&&(l=k.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:oe,onCancel:()=>{s(O.none())}})},bL=t=>{pL(t);const s=J_(t),a=Q_(t),l=H(s),d=H(a);UR(t,"forecolor","forecolor","Text color",l),UR(t,"backcolor","hilitecolor","Background color",d),WR(t,"forecolor","forecolor","Text color"),WR(t,"backcolor","hilitecolor","Background color")},rA=(t,s,a,l,d,g,p,C)=>{const k=Uv(s),D=vL(s,a,l,d!=="color"?"normal":"color",g,p,C);return zS(t,k,D,l,{menuType:d})},vL=(t,s,a,l,d,g,p)=>Jo(We(t,C=>C.type==="choiceitem"?XS(C).fold(Tg,k=>O.some(tL(k,a===1,l,s,g(k.value),d,p,Uv(t)))):O.none())),sx=(t,s)=>{const a=w1(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Fr(d.element,"[aria-checked=true]"):O.none()}},yL=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${g_}`:`.${Lv}`}},CL=(t,s)=>{const a=wL(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...rA(Ht("menu-value"),a,C=>{t.onAction({value:C})},l,d,fm.CLOSE_ON_EXECUTE,Kt,s.shared.providers),markers:w1(d),movement:sx(l,d)};return{type:"widget",data:{value:Ht("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[ER.widget(zu.sketch(p))]}},wL=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>nA(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(zR(a)))},jR=Ht("cell-over"),aA=Ht("cell-execute"),SL=(t,s,a)=>{const l=p=>mn(p,jR,{row:t,col:s}),d=p=>mn(p,aA,{row:t,col:s}),g=(p,C)=>{C.stop(),d(p)};return Yc({dom:{tag:"div",attributes:{role:"button","aria-labelledby":a}},behaviours:ut([So("insert-table-picker-cell",[Xe(Vd(),Tn.focus),Xe(Xl(),d),Xe(Cp(),g),Xe(ah(),g)]),Po.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Tn.config({onFocus:l})])})},xL=(t,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(SL(d,p,t));l.push(g)}return l},TL=(t,s,a,l,d)=>{for(let g=0;g<l;g++)for(let p=0;p<d;p++)Po.set(t[g][p],g<=s&&p<=a)},kL=t=>Go(t,s=>We(s,ni)),GR=(t,s)=>ya(`${s}x${t}`),qR={inserttable:t=>{const l=Ht("size-label"),d=xL(l,10,10),g=GR(0,0),p=Vs({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:l}},components:[g],behaviours:ut([qn.config({})])});return{type:"widget",data:{value:Ht("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[ER.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:kL(d).concat(p.asSpec()),behaviours:ut([So("insert-table-picker",[dr(C=>{qn.set(p.get(C),[g])}),ih(jR,(C,k,_)=>{const{row:D,col:M}=_.event;TL(d,D,M,10,10),qn.set(p.get(C),[GR(D+1,M+1)])}),ih(aA,(C,k,_)=>{const{row:D,col:M}=_.event;t.onAction({numRows:D+1,numColumns:M+1}),es(C,Sp())})]),an.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:CL},EL=(t,s)=>Zt(qR,t.fancytype).map(a=>a(t,s)),_L=(t,s,a,l=!0,d=!1)=>{const g=d?XI(a.icons):B_(a.icons),p=k=>({isEnabled:()=>!vn.isDisabled(k),setEnabled:_=>vn.set(k,!_)}),C=yC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(g),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return ii({data:qv(t),getApi:p,enabled:t.enabled,onAction:oe,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},AL=(t,s,a,l=!0)=>{const d=p=>({isEnabled:()=>!vn.isDisabled(p),setEnabled:C=>vn.set(p,!C)}),g=yC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return ii({data:qv(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},OL=t=>({type:"separator",dom:{tag:"div",classes:[Lv,RD]},components:t.text.map(ya).toArray()}),DL=(t,s,a,l=!0)=>{const d=p=>({setActive:C=>{Po.set(p,C)},isActive:()=>Po.isOn(p),isEnabled:()=>!vn.isDisabled(p),setEnabled:C=>vn.set(p,!C)}),g=yC({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(CR(a.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return Rs(ii({data:qv(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:DD,toggleOnExecute:!1,selected:t.active}})},RL=QI,rx=OL,KR=AL,YR=_L,ML=DL,XR=EL,NL=eL;var BL=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),PL=[dl("others",oh(Pn.value,Nc()))],$L=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(yn(g.others).length===0)throw new Error("Cannot find any known coupled components");return Zt(t,p)},a=(g,p,C)=>s(p,C).getOrThunk(()=>{const _=Zt(p.others,C).getOrDie("No information found for coupled component: "+C)(g),D=g.getSystem().build(_);return t[C]=D,D}),l=(g,p,C)=>s(p,C).orThunk(()=>(Zt(p.others,C).getOrDie("No information found for coupled component: "+C),O.none())),d=te({});return fl({readState:d,getExisting:l,getOrCreate:a})}});const Rr=Ka({fields:PL,name:"coupling",apis:BL,state:$L}),lA=t=>{let s=O.none(),a=[];const l=_=>lA(D=>{d(M=>{D(_(M))})}),d=_=>{p()?k(_):a.push(_)},g=_=>{p()||(s=O.some(_),C(a),a=[])},p=()=>s.isSome(),C=_=>{$(_,k)},k=_=>{s.each(D=>{setTimeout(()=>{_(D)},0)})};return t(g),{get:d,map:l,isReady:p}},ax={nu:lA,pure:t=>lA(s=>{s(t)})},iA=t=>{setTimeout(()=>{throw t},0)},ep=t=>{const s=k=>{t().then(k,iA)};return{map:k=>ep(()=>t().then(k)),bind:k=>ep(()=>t().then(_=>k(_).toPromise())),anonBind:k=>ep(()=>t().then(()=>k.toPromise())),toLazy:()=>ax.nu(s),toCached:()=>{let k=null;return ep(()=>(k===null&&(k=t()),k))},toPromise:t,get:s}},Vc={nu:t=>ep(()=>new Promise(t)),pure:t=>ep(()=>Promise.resolve(t))},cx=te("sink"),lx=te(ou({name:cx(),overrides:te({dom:{tag:"div"},behaviours:ut([Fc.config({useFixed:bt})]),events:Es([uh(Zm()),uh(xc()),uh(Cp())])})})),xC=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},JR=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},LL=(t,s,a,l,d,g,p)=>{const C=JR(t,s,l),k=QR(l,t);return C.map(_=>_.bind(D=>O.from(C1.sketch({...g.menu(),uid:fd(""),data:D,highlightOnOpen:p,onOpenMenu:(M,V)=>{const z=k().getOrDie();Fc.position(z,V,{anchor:a}),wo.decloak(d)},onOpenSubmenu:(M,V,z)=>{const Q=k().getOrDie();Fc.position(Q,z,{anchor:{type:"submenu",item:V}}),wo.decloak(d)},onRepositionMenu:(M,V,z)=>{const Q=k().getOrDie();Fc.position(Q,V,{anchor:a}),$(z,se=>{Fc.position(Q,se.triggeredMenu,{anchor:{type:"submenu",item:se.triggeringItem}})})},onEscape:()=>(Tn.focus(l),wo.close(d),O.some(!0))}))))},ix=(t,s,a,l,d,g,p)=>{const C=xC(t,a);return LL(t,s,C,a,l,d,p).map(_=>(_.fold(()=>{wo.isOpen(l)&&wo.close(l)},D=>{wo.cloak(l),wo.open(l,D),g(l)}),l))},FL=(t,s,a,l,d,g,p)=>(wo.close(l),Vc.pure(l)),uA=(t,s,a,l,d,g)=>{const p=Rr.getCoupled(a,"sandbox");return(wo.isOpen(p)?FL:ix)(t,s,a,p,l,d,g)},HL=(t,s,a)=>{const l=po.getCurrent(s).getOr(s),d=ar(t.element);a?$t(l.element,"min-width",d+"px"):Vi(l.element,d)},QR=(t,s)=>t.getSystem().getByUid(s.uid+"-"+cx()).map(a=>()=>Pn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Pn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),eM=t=>{wo.getState(t).each(s=>{C1.repositionMenus(s)})},dA=(t,s,a)=>{const l=Db(),d=(C,k)=>{const _=xC(t,s);l.link(s.element),t.matchWidth&&HL(_.hotspot,k,t.useMinWidth),t.onOpen(_,C,k),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,k)},g=(C,k)=>{l.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(C,k)},p=QR(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:ki.augment(t.sandboxBehaviours,[yt.config({store:{mode:"memory",initialValue:s}}),wo.config({onOpen:d,onClose:g,isPartOf:(C,k,_)=>Jd(k,_)||Jd(s,_),getAttachPoint:()=>p().getOrDie()}),po.config({find:C=>wo.getState(C).bind(k=>po.getCurrent(k))}),Si.config({channels:{...Bh({isExtraPart:Kt}),...iv({doReposition:eM})}})])}},tM=t=>{const s=Rr.getCoupled(t,"sandbox");eM(s)},mA=()=>[Ce("sandboxClasses",[]),ki.field("sandboxBehaviours",[po,Si,wo,yt])],VL=te([Ze("dom"),Ze("fetch"),Co("onOpen"),Ml("onExecute"),Ce("getHotspot",O.some),Ce("getAnchorOverrides",te({})),af(),ra("dropdownBehaviours",[Po,Rr,an,Tn]),Ze("toggleClass"),Ce("eventOrder",{}),Ho("lazySink"),Ce("matchWidth",!1),Ce("useMinWidth",!1),Ho("role")].concat(mA())),zL=te([Lu({schema:[$p(),Ce("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),lx()]),UL=(t,s,a,l)=>{const d=D=>Zt(t.dom,"attributes").bind(M=>Zt(M,D)),g=D=>{wo.getState(D).each(M=>{C1.highlightPrimary(M)})},p=(D,M,V)=>uA(t,cn,D,l,M,V),C=D=>{p(D,g,Dr.HighlightMenuAndItem).get(oe)},k={expand:D=>{Po.isOn(D)||p(D,oe,Dr.HighlightNone).get(oe)},open:D=>{Po.isOn(D)||p(D,oe,Dr.HighlightMenuAndItem).get(oe)},refetch:D=>Rr.getExistingCoupled(D,"sandbox").fold(()=>p(D,oe,Dr.HighlightMenuAndItem).map(oe),V=>ix(t,cn,D,V,l,oe,Dr.HighlightMenuAndItem).map(oe)),isOpen:Po.isOn,close:D=>{Po.isOn(D)&&p(D,oe,Dr.HighlightMenuAndItem).get(oe)},repositionMenus:D=>{Po.isOn(D)&&tM(D)}},_=(D,M)=>(Zd(D),O.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ya(t.dropdownBehaviours,[Po.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Rr.config({others:{sandbox:D=>dA(t,D,{onOpen:()=>Po.on(D),onClose:()=>Po.off(D)})}}),an.config({mode:"special",onSpace:_,onEnter:_,onDown:(D,M)=>{if(ru.isOpen(D)){const V=Rr.getCoupled(D,"sandbox");g(V)}else ru.open(D);return O.some(!0)},onEscape:(D,M)=>ru.isOpen(D)?(ru.close(D),O.some(!0)):O.none()}),Tn.config({})]),events:wS(O.some(C)),eventOrder:{...t.eventOrder,[Xl()]:["disabling","toggling","alloy.base.behaviour"]},apis:k,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},ru=Oc({name:"Dropdown",configFields:VL(),partFields:zL(),factory:UL,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),WL=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},ZL=t=>{const s=yt.getValue(t),a=Vv(t).map(gm);ru.refetch(s).get(()=>{const l=Rr.getCoupled(s,"sandbox");a.each(d=>Vv(l).each(g=>HD(g,d)))})},xf=(t,s)=>{jL(t).each(a=>{vb(t,a.element,s.event.eventType,s.event.interactionEvent)})},jL=t=>wo.getState(t).bind(Yo.getHighlighted).bind(Yo.getHighlighted),GL=t=>Rl(t.element,HS)?O.some(t.element):Fr(t.element,"."+HS),ux=(t,s,a)=>{mC(t).each(l=>{v_(l,a),GL(s).each(g=>{B(g,"id").each(p=>Rn(l.element,"aria-controls",p))})}),Rn(a.element,"aria-selected","true")},Sa=(t,s,a)=>{Rn(a.element,"aria-selected","false")},qL=t=>{mC(t).each(s=>Tn.focus(s))},KL=t=>Rr.getExistingCoupled(t,"sandbox").bind(Vv).map(gm).map(a=>a.fetchPattern).getOr("");var dx;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(dx||(dx={}));const YL=(t,s,a,l,d)=>{const g=a.shared.providers,p=C=>d?{...C,shortcut:O.none(),icon:C.text.isSome()?O.none():C.icon}:C;switch(t.type){case"menuitem":return dR(t).fold(Tg,C=>O.some(KR(p(C),s,g,l)));case"nestedmenuitem":return fR(t).fold(Tg,C=>O.some(YR(p(C),s,g,l,d)));case"togglemenuitem":return UI(t).fold(Tg,C=>O.some(ML(p(C),s,g,l)));case"separator":return KD(t).fold(Tg,C=>O.some(rx(C)));case"fancymenuitem":return VI(t).fold(Tg,C=>XR(C,a));default:return console.error("Unknown item in general menu",t),O.none()}},XL=(t,s,a,l,d,g,p)=>{const C=l===1,k=!C||Uv(t);return Jo(We(t,_=>{switch(_.type){case"separator":return T1(_).fold(Tg,D=>O.some(rx(D)));case"cardmenuitem":return FI(_).fold(Tg,D=>O.some(NL({...D,onAction:M=>{D.onAction(M),a(D.value,D.meta)}},d,g,{itemBehaviours:xR(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return RI(_).fold(Tg,D=>O.some(RL(D,s,C,"normal",a,d,g,k)))}}))},nM=(t,s,a,l,d,g)=>{const p=Uv(s),C=Jo(We(s,D=>{const M=z=>d?!In(z,"text"):p,V=z=>YL(z,a,l,M(z),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?V({...D,enabled:!1}):V(D)})),k=WL(g);return(d?UD:zS)(t,p,C,1,k)},fA=t=>C1.singleData(t.value,t),JL=(t,s,a,l)=>{const d=sx(s,l),g=w1(l);return{data:fA({...t,movement:d,menuBehaviours:E1.unnamedEvents(s!=="auto"?[]:[dr((p,C)=>{O_(p,4,g.item).each(({numColumns:k,numRows:_})=>{an.setGridSize(p,_,k)})})])}),menu:{markers:w1(l),fakeFocus:a===dx.ContentFocus}}},QL=(t,s)=>OD(Je.fromDom(s.startContainer)).map(a=>{const l=t.createRng();return l.selectNode(a.dom),l}),eF={register:(t,s)=>{const a=H(!1),l=H(!1),d=Yc(Tr.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:ut([So("dismissAutocompleter",[Xe(Wd(),()=>_())])]),lazySink:s.getSink})),g=()=>Tr.isOpen(d),p=l.get,C=()=>{g()&&Tr.hide(d)},k=()=>Tr.getContent(d).bind(Q=>Is(Q.components(),0)),_=()=>t.execCommand("mceAutocompleterClose"),D=Q=>{const se=er(Q,ke=>O.from(ke.columns)).getOr(1);return Go(Q,ke=>{const fe=ke.items;return XL(fe,ke.matchText,(Ee,ht)=>{const Ae=t.selection.getRng();QL(t.dom,Ae).each(Ct=>{const Lt={hide:()=>_(),reload:Dt=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Dt})}};a.set(!0),ke.onAction(Lt,Ct,Ee,ht),a.set(!1)})},se,fm.BUBBLE_TO_SANDBOX,s,ke.highlightOn)})},M=(Q,se)=>{uI(Je.fromDom(t.getBody())).each(ke=>{const fe=er(Q,Ee=>O.from(Ee.columns)).getOr(1);Tr.showMenuAt(d,{anchor:{type:"node",root:Je.fromDom(t.getBody()),node:O.from(ke)}},JL(zS("autocompleter-value",!0,se,fe,{menuType:"normal"}),fe,dx.ContentFocus,"normal"))}),k().each(Yo.highlightFirst)},V=Q=>{const se=D(Q);se.length>0?M(Q,se):C()};t.on("AutocompleterStart",({lookupData:Q})=>{l.set(!0),a.set(!1),V(Q)}),t.on("AutocompleterUpdate",({lookupData:Q})=>V(Q)),t.on("AutocompleterEnd",()=>{C(),l.set(!1),a.set(!1)});const z={cancelIfNecessary:_,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:k};dI.setup(z,t)}},TC=(t,s,a)=>wi(t,s,a).isSome(),oM=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},sM=5,tF=400,rM=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?O.none():O.some(s.touches[0])},nF=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>sM||l>sM},oF=t=>{const s=mr(),a=H(!1),l=oM(_=>{t.triggerEvent(mb(),_),a.set(!0)},tF),d=_=>(rM(_).each(D=>{l.cancel();const M={x:D.clientX,y:D.clientY,target:_.target};l.schedule(_),a.set(!1),s.set(M)}),O.none()),g=_=>(l.cancel(),rM(_).each(D=>{s.on(M=>{nF(D,M)&&s.clear()})}),O.none()),p=_=>{l.cancel();const D=M=>ns(M.target,_.target);return s.get().filter(D).map(M=>a.get()?(_.prevent(),!1):t.triggerEvent(ah(),_))},C=vs([{key:ys(),value:d},{key:va(),value:g},{key:Sc(),value:p}]);return{fireIfReady:(_,D)=>Zt(C,D).bind(M=>M(_))}},sF=t=>t.raw.which===_E[0]&&!yo(["input","textarea"],Bo(t.target))&&!TC(t.target,'[contenteditable="true"]'),rF=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=oF(a),g=We(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),z=>Lc(t,z,Q=>{d.fireIfReady(Q,z).each(ke=>{ke&&Q.kill()}),a.triggerEvent(z,Q)&&Q.kill()})),p=mr(),C=Lc(t,"paste",z=>{d.fireIfReady(z,"paste").each(se=>{se&&z.kill()}),a.triggerEvent("paste",z)&&z.kill(),p.set(setTimeout(()=>{a.triggerEvent(_0(),z)},0))}),k=Lc(t,"keydown",z=>{a.triggerEvent("keydown",z)?z.kill():a.stopBackspace&&sF(z)&&z.prevent()}),_=Lc(t,"focusin",z=>{a.triggerEvent("focusin",z)&&z.kill()}),D=mr(),M=Lc(t,"focusout",z=>{a.triggerEvent("focusout",z)&&z.kill(),D.set(setTimeout(()=>{a.triggerEvent(wp(),z)},0))});return{unbind:()=>{$(g,z=>{z.unbind()}),k.unbind(),_.unbind(),M.unbind(),C.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},aM=(t,s)=>{const a=Zt(t,"target").getOr(s);return H(a)},aF=(t,s)=>{const a=H(!1),l=H(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},cF=t=>{const s=H(!1);return{stop:()=>{s.set(!0)},cut:oe,isStopped:s.get,isCut:Kt,event:t,setSource:X("Cannot set source of a broadcasted event"),getSource:X("Cannot get source of a broadcasted event")}},kC=Re.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),cM=(t,s,a,l,d,g)=>{const p=t(s,l),C=aF(a,d);return p.fold(()=>(g.logEventNoHandlers(s,l),kC.complete()),k=>{const _=k.descHandler;return Kf(_)(C),C.isStopped()?(g.logEventStopped(s,k.element,_.purpose),kC.stopped()):C.isCut()?(g.logEventCut(s,k.element,_.purpose),kC.complete()):ea(k.element).fold(()=>(g.logNoParent(s,k.element,_.purpose),kC.complete()),M=>(g.logEventResponse(s,k.element,_.purpose),kC.resume(M)))})},gA=(t,s,a,l,d,g)=>cM(t,s,a,l,d,g).fold(bt,p=>gA(t,s,a,p,d,g),Kt),lF=(t,s,a,l,d)=>{const g=aM(a,l);return cM(t,s,a,l,g,d)},iF=(t,s,a)=>{const l=cF(s);return $(t,d=>{const g=d.descHandler;Kf(g)(l)}),l.isStopped()},uF=(t,s,a,l)=>hA(t,s,a,a.target,l),hA=(t,s,a,l,d)=>{const g=aM(a,l);return gA(t,s,a,l,g,d)},dF=(t,s)=>({element:t,descHandler:s}),mF=(t,s)=>({id:t,descHandler:s}),fF=()=>{const t={},s=(p,C,k)=>{Un(k,(_,D)=>{const M=t[D]!==void 0?t[D]:{};M[C]=Op(_,p),t[D]=M})},a=(p,C)=>Gf(C).bind(k=>Zt(p,k)).map(k=>dF(C,k));return{registerId:s,unregisterId:p=>{Un(t,(C,k)=>{In(C,p)&&delete C[p]})},filterByType:p=>Zt(t,p).map(C=>Dn(C,(k,_)=>mF(_,k))).getOr([]),find:(p,C,k)=>Zt(t,C).bind(_=>ud(k,D=>a(_,D),p))}},lM=()=>{const t=fF(),s={},a=_=>{const D=_.element;return Gf(D).getOrThunk(()=>wb("uid-",_.element))},l=(_,D)=>{const M=s[D];if(M===_)g(_);else throw new Error('The tagId "'+D+'" is already used by: '+qm(M.element)+`
Cannot use it for: `+qm(_.element)+`
The conflicting element is`+(Br(M.element)?" ":" not ")+"already in the DOM")},d=_=>{const D=a(_);Zs(s,D)&&l(_,D);const M=[_];t.registerId(M,D,_.events),s[D]=_},g=_=>{Gf(_.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(_,D,M)=>t.find(_,D,M),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>Zt(s,_)}},pm=_i({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:bg(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Ce("components",[]),ra("containerBehaviours",[]),Ce("events",{}),Ce("domModification",{}),Ce("eventOrder",{})]}),iM=t=>{const s=fe=>ea(t.element).fold(bt,Ee=>ns(fe,Ee)),a=lM(),l=(fe,Ee)=>a.find(s,fe,Ee),d=rF(t.element,{triggerEvent:(fe,Ee)=>Sh(fe,Ee.target,ht=>uF(l,fe,Ee,ht))}),g={debugInfo:te("real"),triggerEvent:(fe,Ee,ht)=>{Sh(fe,Ee,Ae=>hA(l,fe,ht,Ee,Ae))},triggerFocus:(fe,Ee)=>{Gf(fe).fold(()=>{nm(fe)},ht=>{Sh(Ud(),fe,Ae=>(lF(l,Ud(),{originator:Ee,kill:oe,prevent:oe,target:fe},fe,Ae),!1))})},triggerEscape:(fe,Ee)=>{g.triggerEvent("keydown",fe.element,Ee.event)},getByUid:fe=>se(fe),getByDom:fe=>ke(fe),build:Yc,buildOrPatch:Ab,addToGui:fe=>{k(fe)},removeFromGui:fe=>{_(fe)},addToWorld:fe=>{p(fe)},removeFromWorld:fe=>{C(fe)},broadcast:fe=>{V(fe)},broadcastOn:(fe,Ee)=>{z(fe,Ee)},broadcastEvent:(fe,Ee)=>{Q(fe,Ee)},isConnected:bt},p=fe=>{fe.connect(g),fa(fe.element)||(a.register(fe),$(fe.components(),p),g.triggerEvent(fb(),fe.element,{target:fe.element}))},C=fe=>{fa(fe.element)||($(fe.components(),C),a.unregister(fe)),fe.disconnect()},k=fe=>{mc(t,fe)},_=fe=>{fc(fe)},D=()=>{d.unbind(),Zi(t.element)},M=fe=>{const Ee=a.filter(Ji());$(Ee,ht=>{const Ae=ht.descHandler;Kf(Ae)(fe)})},V=fe=>{M({universal:!0,data:fe})},z=(fe,Ee)=>{M({universal:!1,channels:fe,data:Ee})},Q=(fe,Ee)=>{const ht=a.filter(fe);return iF(ht,Ee)},se=fe=>a.getById(fe).fold(()=>Pn.error(new Error('Could not find component with uid: "'+fe+'" in system.')),Pn.value),ke=fe=>{const Ee=Gf(fe).getOr("not found");return se(Ee)};return p(t),{root:t,element:t.element,destroy:D,add:k,remove:_,getByUid:se,getByDom:ke,addToWorld:p,removeFromWorld:C,broadcast:V,broadcastOn:z,broadcastEvent:Q}},gF=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:We(t.items,s.interpreter)}),uM=te([Ce("prefix","form-field"),ra("fieldBehaviours",[po,yt])]),hF=te([ou({schema:[Ze("dom")],name:"label"}),ou({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),Ac({factory:{sketch:t=>{const s=ks(t,["factory"]);return t.factory.sketch(s)}},schema:[Ze("factory")],name:"field"})]),dM=(t,s,a,l)=>{const d=Ya(t.fieldBehaviours,[po.config({find:C=>xs(C,t,"field")}),yt.config({store:{mode:"manual",getValue:C=>po.getCurrent(C).bind(yt.getValue),setValue:(C,k)=>{po.getCurrent(C).each(_=>{yt.setValue(_,k)})}}})]),g=Es([dr((C,k)=>{const _=hf(C,t,["label","field","aria-descriptor"]);_.field().each(D=>{const M=Ht(t.prefix);_.label().each(V=>{Rn(V.element,"for",M),Rn(D.element,"id",M)}),_["aria-descriptor"]().each(V=>{const z=Ht(t.prefix);Rn(V.element,"id",z),Rn(D.element,"aria-describedby",z)})})})]),p={getField:C=>xs(C,t,"field"),getLabel:C=>xs(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},ts=Oc({name:"FormField",configFields:uM(),partFields:hF(),factory:dM,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var bF=Object.freeze({__proto__:null,exhibit:(t,s)=>eu({attributes:vs([{key:s.tabAttr,value:"true"}])})}),vF=[Ce("tabAttr","data-alloy-tabstop")];const Yr=Ka({fields:vF,name:"tabstopping",active:bF});var yF=tinymce.util.Tools.resolve("tinymce.html.Entities");const EC=(t,s,a,l)=>{const d=wF(t,s,a,l);return ts.sketch(d)},CF=(t,s)=>EC(t,s,[],[]),wF=(t,s,a,l)=>({dom:mM(a),components:t.toArray().concat([s]),fieldBehaviours:ut(l)}),SF=()=>mM([]),mM=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),tp=(t,s)=>ts.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ya(s.translate(t))]}),Ri=Ht("form-component-change"),_C=Ht("form-close"),np=Ht("form-cancel"),_g=Ht("form-action"),AC=Ht("form-submit"),pA=Ht("form-block"),bA=Ht("form-unblock"),fM=Ht("form-tabchange"),mx=Ht("form-resize"),xF=(t,s,a)=>{const l=t.label.map(M=>tp(M,s)),d=M=>(V,z)=>{wi(z.event.target,"[data-collection-item-value]").each(Q=>{M(V,z,Q,Ls(Q,"data-collection-item-value"))})},g=(M,V)=>{const z=We(V,ke=>{const fe=kd.translate(ke.text),Ee=t.columns===1?`<div class="tox-collection__item-label">${fe}</div>`:"",ht=`<div class="tox-collection__item-icon">${ke.icon}</div>`,Ae={_:" "," - ":" ","-":" "},Ct=fe.replace(/\_| \- |\-/g,Dt=>Ae[Dt]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${yF.encodeAllRaw(ke.value)}" title="${Ct}" aria-label="${Ct}">${ht}${Ee}</div>`}),Q=t.columns!=="auto"&&t.columns>1?rn(z,t.columns):[z],se=We(Q,ke=>`<div class="tox-collection__group">${ke.join("")}</div>`);Gm(M.element,se.join(""))},p=d((M,V,z,Q)=>{V.stop(),s.isDisabled()||mn(M,_g,{name:t.name,value:Q})}),C=[Xe(Vd(),d((M,V,z)=>{nm(z)})),Xe(Cp(),p),Xe(ah(),p),Xe(Wm(),d((M,V,z)=>{Fr(M.element,"."+dC).each(Q=>{Lr(Q,dC)}),Gr(z,dC)})),Xe(KT(),d(M=>{Fr(M.element,"."+dC).each(V=>{Lr(V,dC)})})),Jl(d((M,V,z,Q)=>{mn(M,_g,{name:t.name,value:Q})}))],k=(M,V)=>We(_c(M.element,".tox-collection__item"),V),_=ts.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:cn},behaviours:ut([vn.config({disabled:s.isDisabled,onDisabled:M=>{k(M,V=>{Gr(V,"tox-collection__item--state-disabled"),Rn(V,"aria-disabled",!0)})},onEnabled:M=>{k(M,V=>{Lr(V,"tox-collection__item--state-disabled"),ne(V,"aria-disabled")})}}),Kr(),qn.config({}),yt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(M,V)=>{g(M,V),t.columns==="auto"&&O_(M,5,"tox-collection__item").each(({numRows:z,numColumns:Q})=>{an.setGridSize(M,z,Q)}),es(M,mx)}}),Yr.config({}),an.config(yL(t.columns,"normal")),So("collection-events",C)]),eventOrder:{[Xl()]:["disabling","alloy.base.behaviour","collection-events"]}});return EC(l,_,["tox-form__group--collection"],[])},TF=["input","textarea"],gM=t=>{const s=Bo(t);return yo(TF,s)},hM=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Lr(a,s.invalidClass),s.notify.each(l=>{gM(t.element)&&Rn(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{Gm(d,l.validHtml)}),l.onValid(t)})},pM=(t,s,a,l)=>{const d=s.getRoot(t).getOr(t.element);Gr(d,s.invalidClass),s.notify.each(g=>{gM(t.element)&&Rn(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{Gm(p,l)}),g.onInvalid(t,l)})},bM=(t,s,a)=>s.validator.fold(()=>Vc.pure(Pn.value(!0)),l=>l.validate(t)),Yv=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),bM(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(pM(t,s,a,d),Pn.error(d)),d=>(hM(t,s),Pn.value(d))):Pn.error("No longer in system")));var fx=Object.freeze({__proto__:null,markValid:hM,markInvalid:pM,query:bM,run:Yv,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Rl(a,s.invalidClass)}}),kF=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Es([Xe(a.onEvent,l=>{Yv(l,t,s).get(cn)})].concat(a.validateOnLoad?[dr(l=>{Yv(l,t,s).get(oe)})]:[]))).getOr({})}),EF=[Ze("invalidClass"),Ce("getRoot",O.none),Gc("notify",[Ce("aria","alert"),Ce("getContainer",O.none),Ce("validHtml",""),Co("onValid"),Co("onInvalid"),Co("onValidate")]),Gc("validator",[Ze("validate"),Ce("onEvent","input"),Ce("validateOnLoad",!0)])];const Tf=Ka({fields:EF,name:"invalidating",active:kF,apis:fx,extra:{validation:t=>s=>{const a=yt.getValue(s);return Vc.pure(t(a))}}});var Xv=Object.freeze({__proto__:null,events:()=>Es([_2(db(),bt)]),exhibit:()=>eu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Jv=Ka({fields:[],name:"unselecting",active:Xv}),vM=(t,s)=>ru.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:ut([Oi.button(s.providers.isDisabled),Kr(),Jv.config({}),Yr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Vc.nu(l=>t.fetch(l)).map(l=>O.from(fA(Rs(rA(Ht("menu-value"),l,d=>{t.onItemAction(a,d)},t.columns,t.presets,fm.CLOSE_ON_EXECUTE,Kt,s.providers),{movement:sx(t.columns,t.presets)})))),parts:{menu:Fv(!1,1,t.presets)}}),yM=Ht("color-input-change"),CM=Ht("color-swatch-change"),wM=Ht("color-picker-cancel"),_F=(t,s,a,l)=>{const d=ts.parts.field({factory:Hv,inputClasses:["tox-textfield"],data:l,onSetValue:_=>Tf.run(_).get(oe),inputBehaviours:ut([vn.config({disabled:s.providers.isDisabled}),Kr(),Yr.config({}),Tf.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>zl(_.element),notify:{onValid:_=>{const D=yt.getValue(_);mn(_,yM,{color:D})}},validator:{validateOnLoad:!1,validate:_=>{const D=yt.getValue(_);if(D.length===0)return Vc.pure(Pn.value(!0));{const M=Je.fromTag("span");$t(M,"background-color",D);const V=Ss(M,"background-color").fold(()=>Pn.error("blah"),z=>Pn.value(D));return Vc.pure(V)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>tp(_,s.providers)),p=(_,D)=>{mn(_,CM,{value:D})},C=(_,D)=>{k.getOpt(_).each(M=>{D==="custom"?a.colorPicker(V=>{V.fold(()=>es(M,wM),z=>{p(M,z),W_(t.storageKey,z)})},"#ffffff"):D==="remove"?p(M,""):p(M,D)})},k=Vs(vM({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[uc,ic,Ca],onLtr:()=>[ic,uc,Ca]},components:[],fetch:oA(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return ts.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,k.asSpec()]}]),fieldBehaviours:ut([So("form-field-events",[Xe(yM,(_,D)=>{k.getOpt(_).each(M=>{$t(M.element,"background-color",D.event.color)}),mn(_,Ri,{name:t.name})}),Xe(CM,(_,D)=>{ts.getField(_).each(M=>{yt.setValue(M,D.event.value),po.getCurrent(_).each(Tn.focus)})}),Xe(wM,(_,D)=>{ts.getField(_).each(M=>{po.getCurrent(_).each(Tn.focus)})})])])})},AF=ou({schema:[Ze("dom")],name:"label"}),op=t=>ou({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:Es([md(ys(),(d,g,p)=>l(d,p),[s]),md(xc(),(d,g,p)=>l(d,p),[s]),md(ml(),(d,g,p)=>{p.mouseIsDown.get()&&l(d,p)},[s])])}))}),OF=op("top-left"),DF=op("top"),RF=op("top-right"),MF=op("right"),NF=op("bottom-right"),SM=op("bottom"),Qv=op("bottom-left"),D1=op("left"),BF=Ac({name:"thumb",defaults:te({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Es([jf(ys(),t,"spectrum"),jf(va(),t,"spectrum"),jf(Sc(),t,"spectrum"),jf(xc(),t,"spectrum"),jf(ml(),t,"spectrum"),jf(vp(),t,"spectrum")])})}),xM=Ac({schema:[cc("mouseIsDown",()=>H(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:ut([an.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),Tn.config({})]),events:Es([Xe(ys(),l),Xe(va(),l),Xe(xc(),l),Xe(ml(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var TM=[AF,D1,MF,DF,SM,OF,RF,Qv,NF,BF,xM];const OC=te("slider.change.value"),DC=t=>t.type.indexOf("touch")!==-1,R1=t=>{const s=t.event.raw;if(DC(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?O.some(a.touches[0]).map(l=>Ds(l.clientX,l.clientY)):O.none()}else{const a=s;return a.clientX!==void 0?O.some(a).map(l=>Ds(l.clientX,l.clientY)):O.none()}},PF="top",$F="right",IF="bottom",LF="left",M1=t=>t.model.minX,N1=t=>t.model.minY,B1=t=>t.model.minX-1,gx=t=>t.model.minY-1,P1=t=>t.model.maxX,$1=t=>t.model.maxY,RC=t=>t.model.maxX+1,hx=t=>t.model.maxY+1,kM=(t,s,a)=>s(t)-a(t),CA=t=>kM(t,P1,M1),wA=t=>kM(t,$1,N1),EM=t=>CA(t)/2,SA=t=>wA(t)/2,e0=t=>t.stepSize,_M=t=>t.snapToGrid,AM=t=>t.snapStart,OM=t=>t.rounded,px=(t,s)=>t[s+"-edge"]!==void 0,xA=t=>px(t,LF),TA=t=>px(t,$F),DM=t=>px(t,PF),RM=t=>px(t,IF),Ag=t=>t.model.value.get(),Og=(t,s)=>({x:t,y:s}),Fl=(t,s)=>{mn(t,OC(),{value:s})},FF=(t,s)=>{Fl(t,Og(B1(s),gx(s)))},HF=(t,s)=>{Fl(t,gx(s))},VF=(t,s)=>{Fl(t,Og(EM(s),gx(s)))},bx=(t,s)=>{Fl(t,Og(RC(s),gx(s)))},Zu=(t,s)=>{Fl(t,RC(s))},kA=(t,s)=>{Fl(t,Og(RC(s),SA(s)))},MM=(t,s)=>{Fl(t,Og(RC(s),hx(s)))},zF=(t,s)=>{Fl(t,hx(s))},UF=(t,s)=>{Fl(t,Og(EM(s),hx(s)))},WF=(t,s)=>{Fl(t,Og(B1(s),hx(s)))},ZF=(t,s)=>{Fl(t,B1(s))},NM=(t,s)=>{Fl(t,Og(B1(s),SA(s)))},vx=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),EA=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),BM=(t,s,a)=>Math.max(s,Math.min(a,t)),PM=(t,s,a,l,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/l)*l;return BM(s+p,s-1,a+1)},g=>{const p=(t-g)%l,C=Math.round(p/l),k=Math.floor((t-g)/l),_=Math.floor((a-g)/l),D=Math.min(_,k+C),M=g+D*l;return Math.max(g,M)}),jF=(t,s,a)=>Math.min(a,Math.max(t,s))-s,_A=t=>{const{min:s,max:a,range:l,value:d,step:g,snap:p,snapStart:C,rounded:k,hasMinEdge:_,hasMaxEdge:D,minBound:M,maxBound:V,screenRange:z}=t,Q=_?s-1:s,se=D?a+1:a;if(d<M)return Q;if(d>V)return se;{const ke=jF(d,M,V),fe=BM(ke/z*l+s,Q,se);return p&&fe>=s&&fe<=a?PM(fe,s,a,g,C):k?Math.round(fe):fe}},AA=t=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:C,maxOffset:k,centerMinEdge:_,centerMaxEdge:D}=t;return d<s?g?0:_:d>a?p?C:D:(d-s)/l*k},yx="top",$M="right",IM="bottom",OA="left",GF="width",qF="height",kf=t=>t.element.dom.getBoundingClientRect(),au=(t,s)=>t[s],Cx=t=>{const s=kf(t);return au(s,OA)},DA=t=>{const s=kf(t);return au(s,$M)},wx=t=>{const s=kf(t);return au(s,yx)},LM=t=>{const s=kf(t);return au(s,IM)},FM=t=>{const s=kf(t);return au(s,GF)},HM=t=>{const s=kf(t);return au(s,qF)},VM=(t,s,a)=>(t+s)/2-a,zM=(t,s)=>{const a=kf(t),l=kf(s),d=au(a,OA),g=au(a,$M),p=au(l,OA);return VM(d,g,p)},UM=(t,s)=>{const a=kf(t),l=kf(s),d=au(a,yx),g=au(a,IM),p=au(l,yx);return VM(d,g,p)},MC=(t,s)=>{mn(t,OC(),{value:s})},Sx=(t,s,a)=>{const l={min:M1(s),max:P1(s),range:CA(s),value:a,step:e0(s),snap:_M(s),snapStart:AM(s),rounded:OM(s),hasMinEdge:xA(s),hasMaxEdge:TA(s),minBound:Cx(t),maxBound:DA(t),screenRange:FM(t)};return _A(l)},KF=(t,s,a)=>{const l=Sx(t,s,a);return MC(t,l),l},YF=(t,s)=>{const a=M1(s);MC(t,a)},XF=(t,s)=>{const a=P1(s);MC(t,a)},JF=(t,s,a)=>{const d=(t>0?EA:vx)(Ag(a),M1(a),P1(a),e0(a));return MC(s,d),O.some(d)},WM=t=>(s,a)=>JF(t,s,a).map(bt),ZM=t=>R1(t).map(a=>a.left),jM=(t,s,a,l,d)=>{const p=FM(t),C=l.bind(D=>O.some(zM(D,t))).getOr(0),k=d.bind(D=>O.some(zM(D,t))).getOr(p),_={min:M1(s),max:P1(s),range:CA(s),value:a,hasMinEdge:xA(s),hasMaxEdge:TA(s),minBound:Cx(t),minOffset:0,maxBound:DA(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:k};return AA(_)},xx=(t,s,a,l,d,g)=>{const p=jM(s,g,a,l,d);return Cx(s)-Cx(t)+p},RA=(t,s,a,l)=>{const d=Ag(a),g=xx(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),a),p=ar(s.element)/2;$t(s.element,"left",g-p+"px")},QF=WM(-1),GM=WM(1),e6=O.none,t6=O.none,n6={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(Zu),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(ZF)};var o6=Object.freeze({__proto__:null,setValueFrom:KF,setToMin:YF,setToMax:XF,findValueOfOffset:Sx,getValueFromEvent:ZM,findPositionOfValue:xx,setPositionFromValue:RA,onLeft:QF,onRight:GM,onUp:e6,onDown:t6,edgeActions:n6});const t0=(t,s)=>{mn(t,OC(),{value:s})},bm=(t,s,a)=>{const l={min:N1(s),max:$1(s),range:wA(s),value:a,step:e0(s),snap:_M(s),snapStart:AM(s),rounded:OM(s),hasMinEdge:DM(s),hasMaxEdge:RM(s),minBound:wx(t),maxBound:LM(t),screenRange:HM(t)};return _A(l)},s6=(t,s,a)=>{const l=bm(t,s,a);return t0(t,l),l},NC=(t,s)=>{const a=N1(s);t0(t,a)},r6=(t,s)=>{const a=$1(s);t0(t,a)},MA=(t,s,a)=>{const d=(t>0?EA:vx)(Ag(a),N1(a),$1(a),e0(a));return t0(s,d),O.some(d)},qM=t=>(s,a)=>MA(t,s,a).map(bt),a6=t=>R1(t).map(a=>a.top),c6=(t,s,a,l,d)=>{const p=HM(t),C=l.bind(D=>O.some(UM(D,t))).getOr(0),k=d.bind(D=>O.some(UM(D,t))).getOr(p),_={min:N1(s),max:$1(s),range:wA(s),value:a,hasMinEdge:DM(s),hasMaxEdge:RM(s),minBound:wx(t),minOffset:0,maxBound:LM(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:k};return AA(_)},Tx=(t,s,a,l,d,g)=>{const p=c6(s,g,a,l,d);return wx(s)-wx(t)+p},l6=(t,s,a,l)=>{const d=Ag(a),g=Tx(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),a),p=rr(s.element)/2;$t(s.element,"top",g-p+"px")},NA=O.none,BA=O.none,PA=qM(-1),i6=qM(1),cu={"top-left":O.none(),top:O.some(HF),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(zF),"bottom-left":O.none(),left:O.none()};var u6=Object.freeze({__proto__:null,setValueFrom:s6,setToMin:NC,setToMax:r6,findValueOfOffset:bm,getValueFromEvent:a6,findPositionOfValue:Tx,setPositionFromValue:l6,onLeft:NA,onRight:BA,onUp:PA,onDown:i6,edgeActions:cu});const kx=(t,s)=>{mn(t,OC(),{value:s})},BC=(t,s)=>({x:t,y:s}),KM=(t,s,a)=>{const l=Sx(t,s,a.left),d=bm(t,s,a.top),g=BC(l,d);return kx(t,g),g},d6=(t,s,a,l)=>{const d=t>0?EA:vx,g=s?Ag(l).x:d(Ag(l).x,M1(l),P1(l),e0(l)),p=s?d(Ag(l).y,N1(l),$1(l),e0(l)):Ag(l).y;return kx(a,BC(g,p)),O.some(g)},Ex=(t,s)=>(a,l)=>d6(t,s,a,l).map(bt),m6=(t,s)=>{const a=M1(s),l=N1(s);kx(t,BC(a,l))},f6=(t,s)=>{const a=P1(s),l=$1(s);kx(t,BC(a,l))},g6=t=>R1(t),h6=(t,s,a,l)=>{const d=Ag(a),g=xx(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),a),p=Tx(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),a),C=ar(s.element)/2,k=rr(s.element)/2;$t(s.element,"left",g-C+"px"),$t(s.element,"top",p-k+"px")},p6=Ex(-1,!1),YM=Ex(1,!1),b6=Ex(-1,!0),v6=Ex(1,!0),y6={"top-left":O.some(FF),top:O.some(VF),"top-right":O.some(bx),right:O.some(kA),"bottom-right":O.some(MM),bottom:O.some(UF),"bottom-left":O.some(WF),left:O.some(NM)};var XM=Object.freeze({__proto__:null,setValueFrom:KM,setToMin:m6,setToMax:f6,getValueFromEvent:g6,setPositionFromValue:h6,onLeft:p6,onRight:YM,onUp:b6,onDown:v6,edgeActions:y6});const $A=[Ce("stepSize",1),Ce("onChange",oe),Ce("onChoose",oe),Ce("onInit",oe),Ce("onDragStart",oe),Ce("onDragEnd",oe),Ce("snapToGrid",!1),Ce("rounded",!0),Ho("snapStart"),dl("model",Zc("mode",{x:[Ce("minX",0),Ce("maxX",100),cc("value",t=>H(t.mode.minX)),Ze("getInitialValue"),Ns("manager",o6)],y:[Ce("minY",0),Ce("maxY",100),cc("value",t=>H(t.mode.minY)),Ze("getInitialValue"),Ns("manager",u6)],xy:[Ce("minX",0),Ce("maxX",100),Ce("minY",0),Ce("maxY",100),cc("value",t=>H({x:t.mode.minX,y:t.mode.minY})),Ze("getInitialValue"),Ns("manager",XM)]})),ra("sliderBehaviours",[an,yt]),cc("mouseIsDown",()=>H(!1))],lu=Oc({name:"Slider",configFields:$A,partFields:TM,factory:(t,s,a,l)=>{const d=Ae=>Nt(Ae,t,"thumb"),g=Ae=>Nt(Ae,t,"spectrum"),p=Ae=>xs(Ae,t,"left-edge"),C=Ae=>xs(Ae,t,"right-edge"),k=Ae=>xs(Ae,t,"top-edge"),_=Ae=>xs(Ae,t,"bottom-edge"),D=t.model,M=D.manager,V=(Ae,Ct)=>{M.setPositionFromValue(Ae,Ct,t,{getLeftEdge:p,getRightEdge:C,getTopEdge:k,getBottomEdge:_,getSpectrum:g})},z=(Ae,Ct)=>{D.value.set(Ct);const Lt=d(Ae);V(Ae,Lt)},Q=(Ae,Ct)=>{z(Ae,Ct);const Lt=d(Ae);return t.onChange(Ae,Lt,Ct),O.some(!0)},se=Ae=>{M.setToMin(Ae,t)},ke=Ae=>{M.setToMax(Ae,t)},fe=Ae=>{const Ct=()=>{xs(Ae,t,"thumb").each(Dt=>{const dn=D.value.get();t.onChoose(Ae,Dt,dn)})},Lt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Lt&&Ct()},Ee=(Ae,Ct)=>{Ct.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ae,d(Ae))},ht=(Ae,Ct)=>{Ct.stop(),t.onDragEnd(Ae,d(Ae)),fe(Ae)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ya(t.sliderBehaviours,[an.config({mode:"special",focusIn:Ae=>xs(Ae,t,"spectrum").map(an.focusIn).map(bt)}),yt.config({store:{mode:"manual",getValue:Ae=>D.value.get(),setValue:z}}),Si.config({channels:{[mf()]:{onReceive:fe}}})]),events:Es([Xe(OC(),(Ae,Ct)=>{Q(Ae,Ct.event.value)}),dr((Ae,Ct)=>{const Lt=D.getInitialValue();D.value.set(Lt);const Dt=d(Ae);V(Ae,Dt);const dn=g(Ae);t.onInit(Ae,Dt,dn,D.value.get())}),Xe(ys(),Ee),Xe(Sc(),ht),Xe(xc(),Ee),Xe(vp(),ht)]),apis:{resetToMin:se,resetToMax:ke,setValue:z,refresh:V},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),sp=Ht("rgb-hex-update"),IA=Ht("slider-update"),LA=Ht("palette-update"),JM=(t,s)=>{const a=lu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=lu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return lu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:te(0)},components:[a,l],sliderBehaviours:ut([Tn.config({})]),onChange:(d,g,p)=>{mn(d,IA,{value:p})}})},QM="form",C6=[ra("formBehaviours",[yt])],PC=t=>"<alloy.field."+t+">",w6=t=>{const s=(()=>{const g=[];return{field:(C,k)=>(g.push(C),Py(QM,PC(C),k)),record:te(g)}})(),a=t(s),l=s.record(),d=We(l,g=>Ac({name:g,pname:PC(g)}));return d1(QM,C6,d,eN,a)},S6=(t,s)=>t.fold(()=>Pn.error(s),Pn.value),eN=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ya(t.formBehaviours,[yt.config({store:{mode:"manual",getValue:a=>{const l=eS(a,t);return Lo(l,(d,g)=>d().bind(p=>{const C=po.getCurrent(p);return S6(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+qm(p.element)))}).map(yt.getValue))},setValue:(a,l)=>{Un(l,(d,g)=>{xs(a,t,g).each(p=>{po.getCurrent(p).each(C=>{yt.setValue(C,d)})})})}}})]),apis:{getField:(a,l)=>xs(a,t,l).bind(po.getCurrent)}}),I1={getField:fh((t,s,a)=>t.getField(s,a)),sketch:w6},_x=Ht("valid-input"),FA=Ht("invalid-input"),vl=Ht("validating-input"),Ax="colorcustom.rgb.",x6=(t,s,a,l)=>{const d=(V,z)=>Tf.config({invalidClass:s("invalid"),notify:{onValidate:Q=>{mn(Q,vl,{type:V})},onValid:Q=>{mn(Q,_x,{type:V,value:yt.getValue(Q)})},onInvalid:Q=>{mn(Q,FA,{type:V,value:yt.getValue(Q)})}},validator:{validate:Q=>{const se=yt.getValue(Q),ke=z(se)?Pn.value(!0):Pn.error(t("aria.input.invalid"));return Vc.pure(ke)},validateOnLoad:!1}}),g=(V,z,Q,se,ke)=>{const fe=t(Ax+"range"),Ee=ts.parts.label({dom:{tag:"label",attributes:{"aria-label":se}},components:[ya(Q)]}),ht=ts.parts.field({data:ke,factory:Hv,inputAttributes:{type:"text",...z==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:ut([d(z,V),Yr.config({})]),onSetValue:Dt=>{Tf.isInvalid(Dt)&&Tf.run(Dt).get(oe)}}),Ae=[Ee,ht],Ct=z!=="hex"?[ts.parts["aria-descriptor"]({text:fe})]:[],Lt=Ae.concat(Ct);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Lt}},p=(V,z)=>{const Q=CC(z);return I1.getField(V,"hex").each(se=>{Tn.isFocused(se)||yt.setValue(V,{hex:Q.value})}),Q},C=(V,z)=>{const Q=z.red,se=z.green,ke=z.blue;yt.setValue(V,{red:Q,green:se,blue:ke})},k=Vs({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(V,z)=>{k.getOpt(V).each(Q=>{$t(Q.element,"background-color","#"+z.value)})};return _i({factory:()=>{const V={red:H(O.some(255)),green:H(O.some(255)),blue:H(O.some(255)),hex:H(O.some("ffffff"))},z=(tn,ro)=>{const Vo=wC(ro);C(tn,Vo),fe(Vo)},Q=tn=>V[tn].get(),se=(tn,ro)=>{V[tn].set(ro)},ke=()=>Q("red").bind(tn=>Q("green").bind(ro=>Q("blue").map(Vo=>Qh(tn,ro,Vo,1)))),fe=tn=>{const ro=tn.red,Vo=tn.green,To=tn.blue;se("red",O.some(ro)),se("green",O.some(Vo)),se("blue",O.some(To))},Ee=(tn,ro)=>{const Vo=ro.event;Vo.type!=="hex"?se(Vo.type,O.none()):l(tn)},ht=(tn,ro)=>{a(tn);const Vo=_R(ro);se("hex",O.some(ro));const To=wC(Vo);C(tn,To),fe(To),mn(tn,sp,{hex:Vo}),_(tn,Vo)},Ae=(tn,ro,Vo)=>{const To=parseInt(Vo,10);se(ro,O.some(To)),ke().each(it=>{const Ot=p(tn,it);mn(tn,sp,{hex:Ot}),_(tn,Ot)})},Ct=tn=>tn.type==="hex",Lt=(tn,ro)=>{const Vo=ro.event;Ct(Vo)?ht(tn,Vo.value):Ae(tn,Vo.type,Vo.value)},Dt=tn=>({label:t(Ax+tn+".label"),description:t(Ax+tn+".description")}),dn=Dt("red"),fn=Dt("green"),Qn=Dt("blue"),Oo=Dt("hex");return Rs(I1.sketch(tn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[tn.field("red",ts.sketch(g(nx,"red",dn.label,dn.description,255))),tn.field("green",ts.sketch(g(nx,"green",fn.label,fn.description,255))),tn.field("blue",ts.sketch(g(nx,"blue",Qn.label,Qn.description,255))),tn.field("hex",ts.sketch(g(L_,"hex",Oo.label,Oo.description,"ffffff"))),k.asSpec()],formBehaviours:ut([Tf.config({invalidClass:s("form-invalid")}),So("rgb-form-events",[Xe(_x,Lt),Xe(FA,Ee),Xe(vl,Ee)])])})),{apis:{updateHex:(tn,ro)=>{yt.setValue(tn,{hex:ro.value}),z(tn,ro),_(tn,ro)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(V,z,Q)=>{V.updateHex(z,Q)}},extraApis:{}})},T6=(t,s)=>{const a=lu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=lu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,D)=>{const{width:M,height:V}=_,z=_.getContext("2d");if(z===null)return;z.fillStyle=D,z.fillRect(0,0,M,V);const Q=z.createLinearGradient(0,0,M,0);Q.addColorStop(0,"rgba(255,255,255,1)"),Q.addColorStop(1,"rgba(255,255,255,0)"),z.fillStyle=Q,z.fillRect(0,0,M,V);const se=z.createLinearGradient(0,0,0,V);se.addColorStop(0,"rgba(0,0,0,0)"),se.addColorStop(1,"rgba(0,0,0,1)"),z.fillStyle=se,z.fillRect(0,0,M,V)},g=(_,D)=>{const M=_.components()[0].element.dom,V=SC(D,100,100),z=NR(V);d(M,z_(z))},p=(_,D)=>{const M=Z_(wC(D));lu.setValue(_,{x:M.saturation,y:100-M.value})};return _i({factory:_=>{const D=te({x:0,y:0}),M=(Q,se,ke)=>{mn(Q,LA,{value:ke})},V=(Q,se,ke,fe)=>{d(ke.element.dom,z_(BR))},z=ut([po.config({find:O.some}),Tn.config({})]);return lu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,l],onChange:M,onInit:V,sliderBehaviours:z})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,D,M)=>{g(D,M)},setThumb:(_,D,M)=>{p(D,M)}},extraApis:{}})},tN=(t,s)=>{const a=d=>{const g=x6(t,s,d.onValidHex,d.onInvalidHex),p=T6(t,s),C=Lt=>(100-Lt)/100*360,k=Lt=>100-Lt/360*100,_={paletteRgba:H(BR),paletteHue:H(0)},D=Vs(JM(t,s)),M=Vs(p.sketch({})),V=Vs(g.sketch({})),z=(Lt,Dt,dn)=>{M.getOpt(Lt).each(fn=>{p.setHue(fn,dn)})},Q=(Lt,Dt)=>{V.getOpt(Lt).each(dn=>{g.updateHex(dn,Dt)})},se=(Lt,Dt,dn)=>{D.getOpt(Lt).each(fn=>{lu.setValue(fn,k(dn))})},ke=(Lt,Dt)=>{M.getOpt(Lt).each(dn=>{p.setThumb(dn,Dt)})},fe=(Lt,Dt)=>{const dn=wC(Lt);_.paletteRgba.set(dn),_.paletteHue.set(Dt)},Ee=(Lt,Dt,dn,fn)=>{fe(Dt,dn),$(fn,Qn=>{Qn(Lt,Dt,dn)})},ht=()=>{const Lt=[Q];return(Dt,dn)=>{const fn=dn.event.value,Qn=_.paletteHue.get(),Oo=SC(Qn,fn.x,100-fn.y),tn=FR(Oo);Ee(Dt,tn,Qn,Lt)}},Ae=()=>{const Lt=[z,Q];return(Dt,dn)=>{const fn=C(dn.event.value),Qn=_.paletteRgba.get(),Oo=Z_(Qn),tn=SC(fn,Oo.saturation,Oo.value),ro=FR(tn);Ee(Dt,ro,fn,Lt)}},Ct=()=>{const Lt=[z,se,ke];return(Dt,dn)=>{const fn=dn.event.hex,Qn=j_(fn);Ee(Dt,fn,Qn.hue,Lt)}};return{uid:d.uid,dom:d.dom,components:[M.asSpec(),D.asSpec(),V.asSpec()],behaviours:ut([So("colour-picker-events",[Xe(sp,Ct()),Xe(LA,ht()),Xe(IA,Ae())]),po.config({find:Lt=>V.getOpt(Lt)}),an.config({mode:"acyclic"})])}};return _i({name:"ColourPicker",configFields:[Ze("dom"),Ce("onValidHex",oe),Ce("onInvalidHex",oe)],factory:a})},ju={self:()=>po.config({find:O.some}),memento:t=>po.config({find:t.getOpt}),childAt:t=>po.config({find:s=>Ea(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},Ef=nn([Ce("preprocess",cn),Ce("postprocess",cn)]),HA=(t,s)=>{const a=ac("RepresentingConfigs.memento processors",Ef,s);return yt.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=yt.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),p=t.get(l);yt.setValue(p,g)}}})},VA=(t,s,a)=>yt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),n0=(t,s,a)=>VA(t,l=>s(l.element),(l,d)=>a(l.element,d)),Gu={memento:HA,withElement:n0,withComp:VA,domValue:t=>n0(t,ti,Xm),domHtml:t=>n0(t,qd,Gm),memory:t=>yt.config({store:{mode:"memory",initialValue:t}})},k6={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},E6=t=>s=>t.translate(k6[s]),_6=(t,s,a)=>{const l=k=>"tox-"+k,d=tN(E6(s),l),g=k=>{mn(k,_g,{name:"hex-valid",value:!0})},p=k=>{mn(k,_g,{name:"hex-valid",value:!1})},C=Vs(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:ut([Gu.withComp(a,k=>{const _=C.get(k);return po.getCurrent(_).bind(V=>yt.getValue(V).hex).map(V=>"#"+V).getOr("")},(k,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,M=O.from(D.exec(_)).bind(Q=>Is(Q,1)),V=C.get(k);po.getCurrent(V).fold(()=>{console.log("Can not find form")},Q=>{yt.setValue(Q,{hex:M.getOr("")}),I1.getField(Q,"hex").each(se=>{es(se,Wf())})})}),ju.self()])}};var A6=tinymce.util.Tools.resolve("tinymce.Resource");const oN=t=>In(t,"init"),O6=t=>{const s=mr(),a=Vs({dom:{tag:t.tag}}),l=mr();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ut([So("custom-editor-events",[dr(d=>{a.getOpt(d).each(g=>{(oN(t)?t.init(g.element.dom):A6.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{l.on(C=>{p.setValue(C)}),l.clear(),s.set(p)})})})]),Gu.withComp(O.none(),()=>s.get().fold(()=>l.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>l.set(g),p=>p.setValue(g))}),ju.self()]),components:[a.asSpec()]}};var ui=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ox=(t,s)=>{const a=ui.explode(s.getOption("images_file_types")),l=d=>oo(a,g=>ce(d.name.toLowerCase(),`.${g.toLowerCase()}`));return ze(mo(t),l)},D6=(t,s,a)=>{const l=(V,z)=>{z.stop()},d=V=>(z,Q)=>{$(V,se=>{se(z,Q)})},g=(V,z)=>{var Q;if(!vn.isDisabled(V)){const se=z.event.raw;C(V,(Q=se.dataTransfer)===null||Q===void 0?void 0:Q.files)}},p=(V,z)=>{const Q=z.event.raw.target;C(V,Q.files)},C=(V,z)=>{z&&(yt.setValue(V,Ox(z,s)),mn(V,Ri,{name:t.name}))},k=Vs({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ut([So("input-file-events",[uh(Cp()),uh(ah())])])}),_=V=>({uid:V.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ut([Gu.memory(a.getOr([])),ju.self(),vn.config({}),Po.config({toggleClass:"dragenter",toggleOnExecute:!1}),So("dropzone-events",[Xe("dragenter",d([l,Po.toggle])),Xe("dragleave",d([l,Po.toggle])),Xe("dragover",l),Xe("drop",d([l,g])),Xe(yp(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[ya(s.translate("Drop an image here"))]},Ll.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[ya(s.translate("Browse for an image")),k.asSpec()],action:z=>{k.get(z).element.dom.click()},buttonBehaviours:ut([Yr.config({}),Oi.button(s.isDisabled),Kr()])})]}]}),D=t.label.map(V=>tp(V,s)),M=ts.parts.field({factory:{sketch:_}});return EC(D,M,["tox-form__group--stretched"],[])},R6=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:We(t.items,s.interpreter)}),Dx=Ht("alloy-fake-before-tabstop"),Rx=Ht("alloy-fake-after-tabstop"),Mx=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:ut([Tn.config({ignore:!0}),Yr.config({})])}),$C=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[Mx([Dx]),t,Mx([Rx])],behaviours:ut([ju.childAt(1)])}),o0=(t,s)=>{mn(t,Zm(),{raw:{which:9,shiftKey:s}})},IC=(t,s)=>{const a=s.element;Rl(a,Dx)?o0(t,!0):Rl(a,Rx)&&o0(t,!1)},s0=t=>TC(t,["."+Dx,"."+Rx].join(","),Kt),sN=t=>{const s=H(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,l)=>{s.get()!==l&&Rn(a.element,"srcdoc",l),s.set(l)}}},M6=(t,s,a)=>{const l=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(M=>({title:M})).getOr({}),...a.map(M=>({srcdoc:M})).getOr({}),...l?{sandbox:"allow-scripts allow-same-origin"}:{}},C=sN(a),k=t.label.map(M=>tp(M,s)),_=M=>$C({uid:M.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:ut([Yr.config({}),Tn.config({}),Gu.withComp(a,C.getValue,C.setValue)])}),D=ts.parts.field({factory:{sketch:_}});return EC(k,D,["tox-form__group--stretched"],[])},N6=t=>new Promise((s,a)=>{const l=()=>{g(),s(t)},d=[Lc(t,"load",l),Lc(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>$(d,p=>p.unbind());t.dom.complete&&l()}),B6=(t,s,a,l,d)=>{const g=a*d,p=l*d,C=Math.max(0,t/2-g/2),k=Math.max(0,s/2-p/2);return{left:C.toString()+"px",top:k.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},P6=(t,s,a)=>{const l=ar(t),d=rr(t);return Math.min(l/s,d/a,1)},$6=(t,s)=>{const a=H(s.getOr({url:""})),l=Vs({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(k=>({src:k.url})).getOr({})}}),d=Vs({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(k,_)=>{const D={url:_.url};_.zoom.each(V=>D.zoom=V),_.cachedWidth.each(V=>D.cachedWidth=V),_.cachedHeight.each(V=>D.cachedHeight=V),a.set(D);const M=()=>{const{cachedWidth:V,cachedHeight:z,zoom:Q}=D;if(!Bt(V)&&!Bt(z)){if(Bt(Q)){const ke=P6(k.element,V,z);D.zoom=ke}const se=B6(ar(k.element),rr(k.element),V,z,D.zoom);d.getOpt(k).each(ke=>{yr(ke.element,se)})}};l.getOpt(k).each(V=>{const z=V.element;_.url!==Ls(z,"src")&&(Rn(z,"src",_.url),Lr(k.element,"tox-imagepreview__loaded")),M(),N6(z).then(Q=>{k.getSystem().isConnected()&&(Gr(k.element,"tox-imagepreview__loaded"),D.cachedWidth=Q.dom.naturalWidth,D.cachedHeight=Q.dom.naturalHeight,M())})})},p={};t.height.each(k=>p.height=k);const C=s.map(k=>({url:k.url,zoom:O.from(k.zoom),cachedWidth:O.from(k.cachedWidth),cachedHeight:O.from(k.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:ut([ju.self(),Gu.withComp(C,()=>a.get(),g)])}},I6=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[ya(s.providers.translate(t.label))]},l=We(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...l],behaviours:ut([ju.self(),qn.config({}),Gu.domHtml(O.none()),an.config({mode:"acyclic"})])}},rN=Ht("toolbar.button.execute"),aN=t=>Jl((s,a)=>{ex(t,s)(l=>{mn(s,rN,{buttonApi:l}),t.onAction(l)})}),zA={[Xl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},cN=(t,s,a)=>mm(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),LC=(t,s)=>cN(t,s,[]),lN=(t,s)=>cN(t,s,[qn.config({})]),Nx=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[ya(a.translate(t))],behaviours:ut([qn.config({})])}),_f=Ht("update-menu-text"),iN=Ht("update-menu-icon"),Bx=(t,s,a)=>{const l=H(oe),d=t.text.map(M=>Vs(Nx(M,s,a.providers))),g=t.icon.map(M=>Vs(lN(M,a.providers.icons))),p=(M,V)=>{const z=yt.getValue(M);return Tn.focus(z),mn(z,"keydown",{raw:V.event.raw}),ru.close(z),O.some(!0)},C=t.role.fold(()=>({}),M=>({role:M})),k=t.tooltip.fold(()=>({}),M=>{const V=a.providers.translate(M);return{title:V,"aria-label":V}}),_=mm("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons);return Vs(ru.sketch({...t.uid?{uid:t.uid}:{},...C,dom:{tag:"button",classes:[s,`${s}--select`].concat(We(t.classes,M=>`${s}--${M}`)),attributes:{...k}},components:_1([g.map(M=>M.asSpec()),d.map(M=>M.asSpec()),O.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(M,V,z)=>{t.searchable&&qL(z)},dropdownBehaviours:ut([...t.dropdownBehaviours,Oi.button(()=>t.disabled||a.providers.isDisabled()),Kr(),Jv.config({}),qn.config({}),So("dropdown-events",[Ed(t,l),bC(t,l)]),So("menubutton-update-display-text",[Xe(_f,(M,V)=>{d.bind(z=>z.getOpt(M)).each(z=>{qn.set(z,[ya(a.providers.translate(V.event.text))])})}),Xe(iN,(M,V)=>{g.bind(z=>z.getOpt(M)).each(z=>{qn.set(z,[lN(V.event.icon,a.providers.icons)])})})])]),eventOrder:Rs(zA,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:ut([an.config({mode:"special",onLeft:p,onRight:p}),So("dropdown-sandbox-events",[Xe(LS,(M,V)=>{ZL(M),V.stop()}),Xe(FS,(M,V)=>{xf(M,V),V.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Fv(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:ux,onCollapseMenu:(M,V,z)=>{Yo.getHighlighted(z).each(Q=>{ux(M,z,Q)})},onDehighlightItem:Sa}},fetch:M=>Vc.nu(At(t.fetch,M))})).asSpec()},L6=t=>xt(t),uN=t=>t.type==="separator",F6=t=>In(t,"getSubmenuItems"),H6={type:"separator"},dN=(t,s)=>{const a=Wt(t,(l,d)=>L6(d)?d===""?l:d==="|"?l.length>0&&!uN(l[l.length-1])?l.concat([H6]):l:In(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&uN(a[a.length-1])&&a.pop(),a},V6=(t,s)=>{const a=t.getSubmenuItems(),l=Px(a,s),d=Rs(l.menus,{[t.value]:l.items}),g=Rs(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},mN=t=>{const s=Zt(t,"value").getOrThunk(()=>Ht("generated-menu-item"));return Rs({value:s},t)},Px=(t,s)=>{const a=dN(xt(t)?t.split(" "):t,s);return at(a,(l,d)=>{if(F6(d)){const g=mN(d),p=V6(g,s);return{menus:Rs(l.menus,p.menus),items:[p.item,...l.items],expansions:Rs(l.expansions,p.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},Dg=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),UA=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),L1=(t,s,a,l)=>{const d=Ht("primary-menu"),g=Px(t,a.shared.providers.menuItems());if(g.items.length===0)return O.none();const p=Dg(l),C=nM(d,g.items,s,a,l.isHorizontalMenu,p),k=UA(l),_=Lo(g.menus,(M,V)=>nM(V,M,s,a,!1,k)),D=Rs(_,ss(d,C));return O.from(C1.tieredData(d,D,g.expansions))},$x=t=>!In(t,"items"),Ix="data-value",WA=(t,s,a,l)=>We(a,d=>$x(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===l,onAction:()=>{yt.setValue(t,d.value),mn(t,Ri,{name:s}),Tn.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>WA(t,s,d.items,l)}),r0=(t,s)=>er(t,a=>$x(a)?fr(a.value===s,a):r0(a.items,s)),fN=(t,s,a)=>{const l=s.shared.providers,d=a.bind(k=>r0(t.items,k)).orThunk(()=>cs(t.items).filter($x)),g=t.label.map(k=>tp(k,l)),p=ts.parts.field({dom:{},factory:{sketch:k=>Bx({uid:k.uid,text:d.map(_=>_.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(_,D)=>{const M=WA(_,t.name,t.items,yt.getValue(_));D(L1(M,fm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:O.none()}))},onSetup:te(oe),getApi:te({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yr.config({}),Gu.withComp(d.map(_=>_.value),_=>Ls(_.element,Ix),(_,D)=>{r0(t.items,D).each(M=>{Rn(_.element,Ix,M.value),mn(_,_f,{text:M.text})})})]},"tox-listbox",s.shared)}}),C={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return ts.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Be([g.toArray(),[C]]),fieldBehaviours:ut([vn.config({disabled:te(!t.enabled),onDisabled:k=>{ts.getField(k).each(vn.disable)},onEnabled:k=>{ts.getField(k).each(vn.enable)}})])})},gN=(t,s)=>({dom:{tag:"div",classes:t.classes},components:We(t.items,s.shared.interpreter)}),z6=(t,s)=>{const a=We(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>ss("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Ya(t.selectBehaviours,[Tn.config({}),yt.config({store:{mode:"manual",getValue:d=>ti(d.element),setValue:(d,g)=>{zt(t.options,C=>C.value===g).isSome()&&Xm(d.element,g)},...l}})])}},U6=_i({name:"HtmlSelect",configFields:[Ze("options"),ra("selectBehaviours",[Tn,yt]),Ce("selectClasses",[]),Ce("selectAttributes",{}),Ho("data")],factory:z6}),W6=(t,s,a)=>{const l=We(t.items,k=>({text:s.translate(k.text),value:k.value})),d=t.label.map(k=>tp(k,s)),g=ts.parts.field({dom:{},...a.map(k=>({data:k})).getOr({}),selectAttributes:{size:t.size},options:l,factory:U6,selectBehaviours:ut([vn.config({disabled:()=>!t.enabled||s.isDisabled()}),Yr.config({}),So("selectbox-change",[Xe(yp(),(k,_)=>{mn(k,Ri,{name:t.name})})])])}),p=t.size>1?O.none():O.some(mm("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Be([[g],p.toArray()])};return ts.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Be([d.toArray(),[C]]),fieldBehaviours:ut([vn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:k=>{ts.getField(k).each(vn.disable)},onEnabled:k=>{ts.getField(k).each(vn.enable)}}),Kr()])})},Z6=te([Ce("field1Name","field1"),Ce("field2Name","field2"),nf("onLockedChange"),em(["lockClass"]),Ce("locked",!1),ki.field("coupledFieldBehaviours",[po,yt])]),j6=(t,s,a)=>xs(t,s,a).bind(po.getCurrent),ZA=(t,s)=>Ac({factory:ts,name:t,overrides:a=>({fieldBehaviours:ut([So("coupled-input-behaviour",[Xe(Wf(),l=>{j6(l,a,s).each(d=>{xs(l,a,"lock").each(g=>{Po.isOn(g)&&a.onLockedChange(l,d,g)})})})])])})}),hN=te([ZA("field1","field2"),ZA("field2","field1"),Ac({factory:Ll,schema:[Ze("dom")],name:"lock",overrides:t=>({buttonBehaviours:ut([Po.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),G6=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ki.augment(t.coupledFieldBehaviours,[po.config({find:O.some}),yt.config({store:{mode:"manual",getValue:d=>{const g=Sd(d,t,["field1","field2"]);return{[t.field1Name]:yt.getValue(g.field1()),[t.field2Name]:yt.getValue(g.field2())}},setValue:(d,g)=>{const p=Sd(d,t,["field1","field2"]);Zs(g,t.field1Name)&&yt.setValue(p.field1(),g[t.field1Name]),Zs(g,t.field2Name)&&yt.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>xs(d,t,"field1"),getField2:d=>xs(d,t,"field2"),getLock:d=>xs(d,t,"lock")}}),iu=Oc({name:"FormCoupledInputs",configFields:Z6(),partFields:hN(),factory:G6,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),q6=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},a0=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),d=a[2];return Pn.value({value:l,unit:d})}else return Pn.error(t)},pN=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>In(a,d);return t.unit===s?O.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?O.some(t.value):O.some(t.value/a[t.unit]*a[s]):O.none()},jA=t=>O.none(),bN=(t,s)=>a=>pN(a,s).map(l=>({value:l*t,unit:s})),vN=(t,s)=>{const a=a0(t).toOptional(),l=a0(s).toOptional();return us(a,l,(d,g)=>pN(d,g.unit).map(p=>g.value/p).map(p=>bN(p,g.unit)).getOr(jA)).getOr(jA)},K6=(t,s)=>{let a=jA;const l=Ht("ratio-event"),d=M=>mm(M,{tag:"span",classes:["tox-icon","tox-lock-icon__"+M]},s.icons),g=iu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:ut([vn.config({disabled:()=>!t.enabled||s.isDisabled()}),Kr(),Yr.config({})])}),p=M=>({dom:{tag:"div",classes:["tox-form__group"]},components:M}),C=M=>ts.parts.field({factory:Hv,inputClasses:["tox-textfield"],inputBehaviours:ut([vn.config({disabled:()=>!t.enabled||s.isDisabled()}),Kr(),Yr.config({}),So("size-input-events",[Xe(Wm(),(V,z)=>{mn(V,l,{isField1:M})}),Xe(yp(),(V,z)=>{mn(V,Ri,{name:t.name})})])]),selectOnFocus:!1}),k=M=>({dom:{tag:"label",classes:["tox-label"]},components:[ya(s.translate(M))]}),_=iu.parts.field1(p([ts.parts.label(k("Width")),C(!0)])),D=iu.parts.field2(p([ts.parts.label(k("Height")),C(!1)]));return iu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[_,D,p([k(iy),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(M,V,z)=>{a0(yt.getValue(M)).each(Q=>{a(Q).each(se=>{yt.setValue(V,q6(se))})})},coupledFieldBehaviours:ut([vn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:M=>{iu.getField1(M).bind(ts.getField).each(vn.disable),iu.getField2(M).bind(ts.getField).each(vn.disable),iu.getLock(M).each(vn.disable)},onEnabled:M=>{iu.getField1(M).bind(ts.getField).each(vn.enable),iu.getField2(M).bind(ts.getField).each(vn.enable),iu.getLock(M).each(vn.enable)}}),Kr(),So("size-input-events2",[Xe(l,(M,V)=>{const z=V.event.isField1,Q=z?iu.getField1(M):iu.getField2(M),se=z?iu.getField2(M):iu.getField1(M),ke=Q.map(yt.getValue).getOr(""),fe=se.map(yt.getValue).getOr("");a=vN(ke,fe)})])])})},Y6=(t,s,a)=>{const l=lu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ya(s.translate(t.label))]}),d=lu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=lu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return lu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:te(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:ut([ju.self(),Tn.config({})]),onChoose:(p,C,k)=>{mn(p,Ri,{name:t.name,value:k})}})},GA=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),l=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:We(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:We(C,d)}),p=C=>({dom:{tag:"tbody"},components:We(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),p(t.cells)],behaviours:ut([Yr.config({}),Tn.config({})])}},yN=(t,s)=>{const a=t.label.map(V=>tp(V,s)),l=[vn.config({disabled:()=>t.disabled||s.isDisabled()}),Kr(),an.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(es(V,AC),O.some(!0))}),So("textfield-change",[Xe(Wf(),(V,z)=>{mn(V,Ri,{name:t.name})}),Xe(_0(),(V,z)=>{mn(V,Ri,{name:t.name})})]),Yr.config({})],d=t.validation.map(V=>Tf.config({getRoot:z=>zl(z.element),invalidClass:"tox-invalid",validator:{validate:z=>{const Q=yt.getValue(z),se=V.validator(Q);return Vc.pure(se===!0?Pn.value(Q):Pn.error(se))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(te({}),V=>({placeholder:s.translate(V)})),p=t.inputMode.fold(te({}),V=>({inputmode:V})),C={...g,...p},k=ts.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:ut(Be([l,d])),selectOnFocus:!1,factory:Hv}),D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),M=[vn.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:V=>{ts.getField(V).each(vn.disable)},onEnabled:V=>{ts.getField(V).each(vn.enable)}}),Kr()];return EC(a,k,D,M)},X6=(t,s,a)=>yN({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:a},s),J6=(t,s,a)=>yN({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:a},s);var qA=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return Es([Xe(t.event,l),Ci(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Xe(d,()=>s.cancel())]).getOr([])))}});const KA=(t,s)=>{let a=null;return{cancel:()=>{Xo(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Xo(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},CN=(t,s)=>{let a=null;const l=()=>{Xo(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},wN=t=>{const s=H(null);return fl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var Q6=Object.freeze({__proto__:null,throttle:wN,init:t=>t.stream.streams.state(t)});const YA=(t,s)=>{const a=t.stream,l=CN(t.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var xN=[dl("stream",Zc("mode",{throttle:[Ze("delay"),Ce("stopEvent",!0),Ns("streams",{setup:YA,state:wN})]})),Ce("event","input"),Ho("cancelEvent"),nf("onStream")];const XA=Ka({fields:xN,name:"streaming",active:qA,state:Q6}),Lx=(t,s,a)=>{const l=yt.getValue(a);yt.setValue(s,l),QA(s)},JA=(t,s)=>{const a=t.element,l=ti(a),d=a.dom;Ls(a,"type")!=="number"&&s(d,l)},QA=t=>{JA(t,(s,a)=>s.setSelectionRange(a.length,a.length))},e8=(t,s)=>{JA(t,(a,l)=>a.setSelectionRange(s,l.length))},TN=(t,s,a)=>{if(t.selectsOver){const l=yt.getValue(s),d=t.getDisplayText(l),g=yt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?O.some(()=>{Lx(t,s,a),e8(s,d.length)}):O.none()}else return O.none()},Fx=te("alloy.typeahead.itemexecute"),t8=(t,s,a,l)=>{const d=(M,V,z)=>{t.previewing.set(!1);const Q=Rr.getCoupled(M,"sandbox");if(wo.isOpen(Q))po.getCurrent(Q).each(se=>{Yo.getHighlighted(se).fold(()=>{z(se)},()=>{E2(Q,se.element,"keydown",V)})});else{const se=ke=>{po.getCurrent(ke).each(z)};ix(t,p(M),M,Q,l,se,Dr.HighlightMenuAndItem).get(oe)}},g=ID(t),p=M=>V=>V.map(z=>{const Q=lo(z.menus),se=Go(Q,fe=>ze(fe.items,Ee=>Ee.type==="item"));return yt.getState(M).update(We(se,fe=>fe.data)),z}),C=M=>po.getCurrent(M),k="typeaheadevents",_=[Tn.config({}),yt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:M=>ti(M.element),getFallbackEntry:M=>({value:M,meta:{}}),setValue:(M,V)=>{Xm(M.element,t.model.getDisplayText(V))},...t.initialData.map(M=>ss("initialValue",M)).getOr({})}}),XA.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(M,V)=>{const z=Rr.getCoupled(M,"sandbox");if(Tn.isFocused(M)&&ti(M.element).length>=t.minChars){const se=C(z).bind(fe=>Yo.getHighlighted(fe).map(yt.getValue));t.previewing.set(!0);const ke=fe=>{C(z).each(Ee=>{se.fold(()=>{t.model.selectsOver&&Yo.highlightFirst(Ee)},ht=>{Yo.highlightBy(Ee,Ae=>yt.getValue(Ae).value===ht.value),Yo.getHighlighted(Ee).orThunk(()=>(Yo.highlightFirst(Ee),O.none()))})})};ix(t,p(M),M,z,l,ke,Dr.HighlightJustMenu).get(oe)}},cancelEvent:Zf()}),an.config({mode:"special",onDown:(M,V)=>(d(M,V,Yo.highlightFirst),O.some(!0)),onEscape:M=>{const V=Rr.getCoupled(M,"sandbox");return wo.isOpen(V)?(wo.close(V),O.some(!0)):O.none()},onUp:(M,V)=>(d(M,V,Yo.highlightLast),O.some(!0)),onEnter:M=>{const V=Rr.getCoupled(M,"sandbox"),z=wo.isOpen(V);if(z&&!t.previewing.get())return C(V).bind(Q=>Yo.getHighlighted(Q)).map(Q=>(mn(M,Fx(),{item:Q}),!0));{const Q=yt.getValue(M);return es(M,Zf()),t.onExecute(V,M,Q),z&&wo.close(V),O.some(!0)}}}),Po.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Rr.config({others:{sandbox:M=>dA(t,M,{onOpen:()=>Po.on(M),onClose:()=>Po.off(M)})}}),So(k,[dr(M=>{t.lazyTypeaheadComp.set(O.some(M))}),Ci(M=>{t.lazyTypeaheadComp.set(O.none())}),Jl(M=>{const V=oe;uA(t,p(M),M,l,V,Dr.HighlightMenuAndItem).get(oe)}),Xe(Fx(),(M,V)=>{const z=Rr.getCoupled(M,"sandbox");Lx(t.model,M,V.event.item),es(M,Zf()),t.onItemExecute(M,z,V.event.item,yt.getValue(M)),wo.close(z),QA(M)})].concat(t.dismissOnBlur?[Xe(wp(),M=>{const V=Rr.getCoupled(M,"sandbox");xi(V.element).isNone()&&wo.close(V)})]:[]))],D={[ch()]:[yt.name(),XA.name(),k],...t.eventOrder};return{uid:t.uid,dom:LD(Rs(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Ya(t.typeaheadBehaviours,_)},eventOrder:D}},kN=te([Ho("lazySink"),Ze("fetch"),Ce("minChars",5),Ce("responseTime",1e3),Co("onOpen"),Ce("getHotspot",O.some),Ce("getAnchorOverrides",te({})),Ce("layouts",O.none()),Ce("eventOrder",{}),L("model",{},[Ce("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Ce("selectsOver",!0),Ce("populateFromBrowse",!0)]),Co("onSetValue"),Ml("onExecute"),Co("onItemExecute"),Ce("inputClasses",[]),Ce("inputAttributes",{}),Ce("inputStyles",{}),Ce("matchWidth",!0),Ce("useMinWidth",!1),Ce("dismissOnBlur",!0),em(["openClass"]),Ho("initialData"),ra("typeaheadBehaviours",[Tn,yt,XA,an,Po,Rr]),cc("lazyTypeaheadComp",()=>H(O.none)),cc("previewing",()=>H(!0))].concat($D()).concat(mA())),EN=te([Lu({schema:[$p()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{TN(t.model,d,l).fold(()=>{t.model.selectsOver?(Yo.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Lx(t.model,d,l)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(mn(l,Fx(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&Lx(t.model,l,a)})}})})]),_N=Oc({name:"Typeahead",configFields:kN(),partFields:EN(),factory:t8}),Ad=t=>({...t,toCached:()=>Ad(t.toCached()),bindFuture:k=>Ad(t.bind(_=>_.fold(D=>Vc.pure(Pn.error(D)),D=>k(D)))),bindResult:k=>Ad(t.map(_=>_.bind(k))),mapResult:k=>Ad(t.map(_=>_.map(k))),mapError:k=>Ad(t.map(_=>_.mapError(k))),foldResult:(k,_)=>t.map(D=>D.fold(k,_)),withTimeout:(k,_)=>Ad(Vc.nu(D=>{let M=!1;const V=setTimeout(()=>{M=!0,D(Pn.error(_()))},k);t.get(z=>{M||(clearTimeout(V),D(z))})}))}),AN=t=>Ad(Vc.nu(t)),ON=t=>Ad(Vc.pure(Pn.value(t))),s8={nu:AN,wrap:Ad,pure:ON,value:ON,error:t=>Ad(Vc.pure(Pn.error(t))),fromResult:t=>Ad(Vc.pure(t)),fromFuture:t=>Ad(t.map(Pn.value)),fromPromise:t=>AN(s=>{t.then(a=>{s(Pn.value(a))},a=>{s(Pn.error(a))})})},eO=t=>({isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s),setActive:s=>{const a=t.element;s?(Gr(a,"tox-tbtn--enabled"),Rn(a,"aria-pressed",!0)):(Lr(a,"tox-tbtn--enabled"),ne(a,"aria-pressed"))},isActive:()=>Rl(t.element,"tox-tbtn--enabled")}),tO=(t,s,a,l)=>Bx({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(d,g)=>{const p={pattern:t.search.isSome()?KL(d):""};t.fetch(C=>{g(L1(C,fm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},p)},onSetup:t.onSetup,getApi:eO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Yr.config({})]},s,a.shared),r8=(t,s,a)=>{const l=g=>p=>{const C=!p.isActive();p.setActive(C),g.storage.set(C),a.shared.getSink().each(k=>{s().getOpt(k).each(_=>{nm(_.element),mn(_,_g,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(We(t,p=>{const C=p.text.fold(()=>({}),k=>({text:k}));return{type:p.type,active:!1,...C,onAction:l(p),onSetup:d(p)}}))}},DN=(t,s,a=[],l,d,g)=>{const p=s.fold(()=>({}),_=>({action:_})),C={buttonBehaviours:ut([Oi.button(()=>!t.enabled||g.isDisabled()),Kr(),Yr.config({}),So("button press",[A2("click"),A2("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},k=Rs(C,{dom:l});return Rs(k,{components:d})},RN=(t,s,a,l=[])=>{const d=t.tooltip.map(k=>({"aria-label":a.translate(k),title:a.translate(k)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(k=>LC(k,a.icons)),C=_1([p]);return DN(t,s,l,g,C,a)},a8=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},nO=(t,s,a,l=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(V=>LC(V,a.icons)),C=[p.getOrThunk(()=>ya(g))],k=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),M={tag:"button",classes:[...a8(k),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return DN(t,s,l,M,C,a)},oO=(t,s,a,l=[],d=[])=>{const g=nO(t,O.some(s),a,l,d);return Ll.sketch(g)},sO=(t,s)=>a=>{s==="custom"?mn(a,_g,{name:t,value:{}}):s==="submit"?es(a,AC):s==="cancel"?es(a,np):console.error("Unknown button type: ",s)},c8=(t,s)=>s==="menu",l8=(t,s)=>s==="custom"||s==="cancel"||s==="submit",Hx=(t,s,a)=>{if(c8(t,s)){const l=()=>p,d=t,g={...t,type:"menubutton",search:O.none(),onSetup:C=>(C.setEnabled(t.enabled),oe),fetch:r8(d.items,l,a)},p=Vs(tO(g,"tox-tbtn",a,O.none()));return p.asSpec()}else if(l8(t,s)){const l=sO(t.name,s),d={...t,borderless:!1};return oO(d,l,a.shared.providers,[])}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},i8=(t,s)=>{const a=sO(t.name,"custom");return CF(O.none(),ts.parts.field({factory:Ll,...nO(t,O.some(a),s,[Gu.memory(""),ju.self()])}))},MN={type:"separator"},u8=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:oe}),rO=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:oe}),NN=t=>We(t,u8),d8=(t,s)=>ze(s,a=>a.type===t),BN=(t,s)=>NN(d8(t,s)),m8=t=>BN("header",t.targets),PN=t=>BN("anchor",t.targets),f8=t=>O.from(t.anchorTop).map(s=>rO("<top>",s)).toArray(),g8=t=>O.from(t.anchorBottom).map(s=>rO("<bottom>",s)).toArray(),$N=t=>We(t,s=>rO(s,s)),IN=t=>Wt(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(MN,a),[]),Vx=(t,s)=>{const a=t.toLowerCase();return ze(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,p=(d=l.value)!==null&&d!==void 0?d:"";return js(g.toLowerCase(),a)||js(p.toLowerCase(),a)})},zx=(t,s,a)=>{const l=yt.getValue(s),d=l.meta.text!==void 0?l.meta.text:l.value;return a.getLinkInformation().fold(()=>[],p=>{const C=Vx(d,$N(a.getHistory(t)));return t==="file"?IN([C,Vx(d,m8(p)),Vx(d,Be([f8(p),PN(p),g8(p)]))]):C})},LN=Ht("aria-invalid"),h8=(t,s,a,l)=>{const d=s.shared.providers,g=Ee=>{const ht=yt.getValue(Ee);a.addToHistory(ht.value,t.filetype)},p={...l.map(Ee=>({initialData:Ee})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":LN,type:"url"},minChars:0,responseTime:0,fetch:Ee=>{const ht=zx(t.filetype,Ee,a),Ae=L1(ht,fm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:O.none()});return Vc.pure(Ae)},getHotspot:Ee=>Q.getOpt(Ee),onSetValue:(Ee,ht)=>{Ee.hasConfigured(Tf)&&Tf.run(Ee).get(oe)},typeaheadBehaviours:ut([...a.getValidationHandler().map(Ee=>Tf.config({getRoot:ht=>zl(ht.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ht,Ae)=>{D.getOpt(ht).each(Ct=>{Rn(Ct.element,"title",d.translate(Ae))})}},validator:{validate:ht=>{const Ae=yt.getValue(ht);return s8.nu(Ct=>{Ee({type:t.filetype,url:Ae.value},Lt=>{if(Lt.status==="invalid"){const Dt=Pn.error(Lt.message);Ct(Dt)}else{const Dt=Pn.value(Lt.message);Ct(Dt)}})})},validateOnLoad:!1}})).toArray(),vn.config({disabled:()=>!t.enabled||d.isDisabled()}),Yr.config({}),So("urlinput-events",[Xe(Wf(),Ee=>{const ht=ti(Ee.element),Ae=ht.trim();Ae!==ht&&Xm(Ee.element,Ae),t.filetype==="file"&&mn(Ee,Ri,{name:t.name})}),Xe(yp(),Ee=>{mn(Ee,Ri,{name:t.name}),g(Ee)}),Xe(_0(),Ee=>{mn(Ee,Ri,{name:t.name}),g(Ee)})])]),eventOrder:{[Wf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Ee=>Ee.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Fv(!1,1,"normal")},onExecute:(Ee,ht,Ae)=>{mn(ht,AC,{})},onItemExecute:(Ee,ht,Ae,Ct)=>{g(Ee),mn(Ee,Ri,{name:t.name})}},C=ts.parts.field({...p,factory:_N}),k=t.label.map(Ee=>tp(Ee,d)),D=Vs(((Ee,ht,Ae=Ee,Ct=Ee)=>mm(Ae,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Ee],attributes:{title:d.translate(Ct),"aria-live":"polite",...ht.fold(()=>({}),Lt=>({id:Lt}))}},d.icons))("invalid",O.some(LN),"warning")),M=Vs({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),V=a.getUrlPicker(t.filetype),z=Ht("browser.url.event"),Q=Vs({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,M.asSpec()],behaviours:ut([vn.config({disabled:()=>!t.enabled||d.isDisabled()})])}),se=Vs(oO({name:t.name,icon:O.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},Ee=>es(Ee,z),d,[],["tox-browse-url"])),ke=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Be([[Q.asSpec()],V.map(()=>se.asSpec()).toArray()])}),fe=Ee=>{po.getCurrent(Ee).each(ht=>{const Ae=yt.getValue(ht),Ct={fieldname:t.name,...Ae};V.each(Lt=>{Lt(Ct).get(Dt=>{yt.setValue(ht,Dt),mn(Ee,Ri,{name:t.name})})})})};return ts.sketch({dom:SF(),components:k.toArray().concat([ke()]),fieldBehaviours:ut([vn.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:Ee=>{ts.getField(Ee).each(vn.disable),se.getOpt(Ee).each(vn.disable)},onEnabled:Ee=>{ts.getField(Ee).each(vn.enable),se.getOpt(Ee).each(vn.enable)}}),Kr(),So("url-input-events",[Xe(z,fe)])])})},p8=(t,s)=>pm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Ll.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Qy(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{mn(a,_g,{name:"alert-banner",value:t.url})},buttonBehaviours:ut([t_()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),b8=(t,s)=>{t.dom.checked=s},FN=t=>t.dom.checked,HN=(t,s,a)=>{const l=k=>(k.element.dom.click(),O.some(!0)),d=ts.parts.field({factory:{sketch:cn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ut([ju.self(),vn.config({disabled:()=>!t.enabled||s.isDisabled()}),Yr.config({}),Tn.config({}),Gu.withElement(a,FN,b8),an.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),So("checkbox-events",[Xe(yp(),(k,_)=>{mn(k,Ri,{name:t.name})})])])}),g=ts.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[ya(s.translate(t.label))],behaviours:ut([Jv.config({})])}),p=k=>mm(k==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+k]},s.icons),C=Vs({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return ts.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:ut([vn.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:k=>{ts.getField(k).each(vn.disable)},onEnabled:k=>{ts.getField(k).each(vn.enable)}}),Kr()])})},v8=t=>t.presets==="presentation"?pm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):pm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:ut([Yr.config({}),Tn.config({})])}),Ja=t=>(s,a,l,d)=>Zt(a,"name").fold(()=>t(a,d,O.none()),g=>s.field(g,t(a,d,Zt(l,g)))),VN=t=>(s,a,l,d)=>{const g=Rs(a,{source:"dynamic"});return Ja(t)(s,g,l,d)},y8={bar:Ja((t,s)=>gF(t,s.shared)),collection:Ja((t,s,a)=>xF(t,s.shared.providers,a)),alertbanner:Ja((t,s)=>p8(t,s.shared.providers)),input:Ja((t,s,a)=>X6(t,s.shared.providers,a)),textarea:Ja((t,s,a)=>J6(t,s.shared.providers,a)),label:Ja((t,s)=>I6(t,s.shared)),iframe:VN((t,s,a)=>M6(t,s.shared.providers,a)),button:Ja((t,s)=>i8(t,s.shared.providers)),checkbox:Ja((t,s,a)=>HN(t,s.shared.providers,a)),colorinput:Ja((t,s,a)=>_F(t,s.shared,s.colorinput,a)),colorpicker:Ja((t,s,a)=>_6(t,s.shared.providers,a)),dropzone:Ja((t,s,a)=>D6(t,s.shared.providers,a)),grid:Ja((t,s)=>R6(t,s.shared)),listbox:Ja((t,s,a)=>fN(t,s,a)),selectbox:Ja((t,s,a)=>W6(t,s.shared.providers,a)),sizeinput:Ja((t,s)=>K6(t,s.shared.providers)),slider:Ja((t,s,a)=>Y6(t,s.shared.providers,a)),urlinput:Ja((t,s,a)=>h8(t,s,s.urlinput,a)),customeditor:Ja(O6),htmlpanel:Ja(v8),imagepreview:Ja((t,s,a)=>$6(t,a)),table:Ja((t,s)=>GA(t,s.shared.providers)),panel:Ja((t,s)=>gN(t,s))},C8={field:(t,s)=>s,record:te([])},bo=(t,s,a,l)=>{const d=Rs(l,{shared:{interpreter:g=>F1(t,g,a,d)}});return F1(t,s,a,d)},F1=(t,s,a,l)=>Zt(y8,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,l)),aO=(t,s,a)=>F1(C8,t,s,a),Rg="layout-inset",Ux=t=>t.x,cO=(t,s)=>t.x+t.width/2-s.width/2,Wx=(t,s)=>t.x+t.width-s.width,zN=t=>t.y,H1=(t,s)=>t.y+t.height-s.height,UN=(t,s)=>t.y+t.height/2-s.height/2,FC=(t,s,a)=>qa(Wx(t,s),H1(t,s),a.insetSouthwest(),Pb(),"southwest",Ba(t,{right:0,bottom:3}),Rg),Zx=(t,s,a)=>qa(Ux(t),H1(t,s),a.insetSoutheast(),Bb(),"southeast",Ba(t,{left:1,bottom:3}),Rg),HC=(t,s,a)=>qa(Wx(t,s),zN(t),a.insetNorthwest(),Nb(),"northwest",Ba(t,{right:0,top:2}),Rg),VC=(t,s,a)=>qa(Ux(t),zN(t),a.insetNortheast(),Th(),"northeast",Ba(t,{left:1,top:2}),Rg),vm=(t,s,a)=>qa(cO(t,s),zN(t),a.insetNorth(),ew(),"north",Ba(t,{top:2}),Rg),V1=(t,s,a)=>qa(cO(t,s),H1(t,s),a.insetSouth(),z0(),"south",Ba(t,{bottom:3}),Rg),lO=(t,s,a)=>qa(Wx(t,s),UN(t,s),a.insetEast(),$b(),"east",Ba(t,{right:0}),Rg),WN=(t,s,a)=>qa(Ux(t),UN(t,s),a.insetWest(),tw(),"west",Ba(t,{left:1}),Rg),w8=t=>{switch(t){case"north":return vm;case"northeast":return VC;case"northwest":return HC;case"south":return V1;case"southeast":return Zx;case"southwest":return FC;case"east":return lO;case"west":return WN}},ZN=(t,s,a,l,d)=>K0(l).map(w8).getOr(vm)(t,s,a,l,d),jN=t=>{switch(t){case"north":return V1;case"northeast":return Zx;case"northwest":return FC;case"south":return vm;case"southeast":return VC;case"southwest":return HC;case"east":return WN;case"west":return lO}},S8=(t,s,a,l,d)=>K0(l).map(jN).getOr(vm)(t,s,a,l,d),GN={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},x8=(t,s,a)=>{const d={maxHeightFunction:Zp()},g=()=>({type:"node",root:or(fo(t())),node:O.from(t()),bubble:ag(12,12,GN),layouts:{onRtl:()=>[VC],onLtr:()=>[HC]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:ag(-12,12,GN),layouts:{onRtl:()=>[ic],onLtr:()=>[uc]},overrides:d});return()=>a()?g():p()},T8=(t,s,a)=>{const l=()=>({type:"node",root:or(fo(t())),node:O.from(t()),layouts:{onRtl:()=>[vm],onLtr:()=>[vm]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ca],onLtr:()=>[Ca]}});return()=>a()?l():d()},qN=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return O.some(rm.range(Je.fromDom(a.startContainer),a.startOffset,Je.fromDom(a.endContainer),a.endOffset))}}),k8=t=>s=>({type:"node",root:t(),node:s}),E8=(t,s,a)=>{const l=lC(t),d=()=>Je.fromDom(t.getBody()),g=()=>Je.fromDom(t.getContentAreaContainer()),p=()=>l||!a();return{inlineDialog:x8(g,s,p),banner:T8(g,s,p),cursor:qN(t,d),node:k8(d)}},_8=t=>(s,a)=>{ZR(t)(s,a)},A8=t=>()=>X_(t),O8=t=>s=>O1(t,s),D8=t=>s=>Y_(t,s),R8=t=>({colorPicker:_8(t),hasCustomColors:A8(t),getColors:O8(t),getColorCols:D8(t)}),M8=t=>()=>RS(t),N8=t=>({isDraggableModal:M8(t)}),B8=t=>{const s=H(PS(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},KN=t=>Zs(t,"items"),iO=t=>Zs(t,"format"),YN=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],P8=t=>In(t,"items"),$8=t=>In(t,"block"),I8=t=>In(t,"inline"),L8=t=>In(t,"selector"),XN=t=>Wt(t,(s,a)=>{if(P8(a)){const l=XN(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(I8(a)||$8(a)||L8(a)){const d=`custom-${xt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),JN=(t,s)=>{const a=XN(s),l=d=>{$(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},QN=t=>mD(t).map(s=>{const a=JN(t,s);return fD(t)?YN.concat(a):a}).getOr(YN),eB=t=>{const s=yn(t);return s.length===1&&yo(s,"title")},tB=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),uO=(t,s,a,l)=>{const d=k=>tB(k,a,l),g=k=>{const _=C(k.items);return{...k,type:"submenu",getStyleItems:te(_)}},p=k=>{const _=xt(k.name)?k.name:Ht(k.title),D=`custom-${_}`,M={...k,type:"formatter",format:D,isSelected:a(D),getStylePreview:l(D)};return t.formatter.register(_,M),M},C=k=>We(k,_=>KN(_)?g(_):iO(_)?d(_):eB(_)?{..._,type:"separator"}:p(_));return C(s)},nB=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const k=t.formatter.get(C);return k!==void 0?O.some({tag:k.length>0&&(k[0].inline||k[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):O.none()},l=H([]),d=H([]),g=H(!1);return t.on("PreInit",C=>{const k=QN(t),_=uO(t,k,s,a);l.set(_)}),t.on("addStyleModifications",C=>{const k=uO(t,C.items,s,a);d.set(k),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:l.get(),k=d.get();return C.concat(k)}}},oB=t=>co(t)&&t.nodeType===1,F8=ui.trim,dO=t=>s=>!!(oB(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),sB=dO("true"),H8=dO("false"),mO=(t,s,a,l,d)=>({type:t,title:s,url:a,level:l,attach:d}),V8=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return sB(s)}return!1},z8=(t,s)=>We(_c(Je.fromDom(s),t),a=>a.dom),Od=t=>t.innerText||t.textContent,jx=t=>t.id?t.id:Ht("h"),Gx=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,U8=t=>Gx(t)&&rB(t),qx=t=>t&&/^(H[1-6])$/.test(t.nodeName),rB=t=>V8(t)&&!H8(t),fO=t=>qx(t)&&rB(t),aB=t=>qx(t)?parseInt(t.nodeName.substr(1),10):0,gO=t=>{var s;const a=jx(t),l=()=>{t.id=a};return mO("header",(s=Od(t))!==null&&s!==void 0?s:"","#"+a,aB(t),l)},W8=t=>{const s=t.id||t.name,a=Od(t);return mO("anchor",a||"#"+s,"#"+s,0,oe)},cB=t=>We(ze(t,fO),gO),lB=t=>We(ze(t,U8),W8),hO=t=>z8("h1,h2,h3,h4,h5,h6,a:not([href])",t),Z8=t=>F8(t.title).length>0,iB={find:t=>{const s=hO(t);return ze(cB(s).concat(lB(s)),Z8)}},Kx="tinymce-url-history",uB=5,pO=t=>xt(t)&&/^https?/.test(t),dB=t=>Wn(t)&&t.length<=uB&&Fe(t,pO),mB=t=>Gt(t)&&vc(t,s=>!dB(s)).isNone(),fB=()=>{const t=A1.getItem(Kx);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Kx+" was not valid JSON",a),{};throw a}return mB(s)?s:(console.log("Local storage "+Kx+" was not valid format",s),{})},j8=t=>{if(!mB(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));A1.setItem(Kx,JSON.stringify(t))},G8=t=>{const s=fB();return Zt(s,t).getOr([])},gB=(t,s)=>{if(!pO(t))return;const a=fB(),l=Zt(a,s).getOr([]),d=ze(l,g=>g!==t);a[s]=[t].concat(d).slice(0,uB),j8(a)},Dd=t=>!!t,bO=t=>Lo(ui.makeMap(t,/[, ]/),Dd),vO=t=>O.from(vD(t)),q8=t=>{const s=O.from(DS(t)).filter(Dd).map(bO);return vO(t).fold(Kt,a=>s.fold(bt,l=>yn(l).length>0?l:!1))},K8=(t,s)=>{const a=q8(t);return Zo(a)?a?vO(t):O.none():a[s]?vO(t):O.none()},Y8=(t,s)=>K8(t,s).map(a=>l=>Vc.nu(d=>{const g=(C,k)=>{if(!xt(C))throw new Error("Expected value to be string");if(k!==void 0&&!Gt(k))throw new Error("Expected meta to be a object");d({value:C,meta:k})},p={filetype:s,fieldname:l.fieldname,...O.from(l.meta).getOr({})};a.call(t,g,l.value,p)})),hB=t=>O.from(t).filter(xt).getOrUndefined(),pB=t=>Yh(t)?O.some({targets:iB.find(t.getBody()),anchorTop:hB(CD(t)),anchorBottom:hB(wD(t))}):O.none(),bB=t=>O.from(yD(t)),cU=t=>({getHistory:G8,addToHistory:gB,getLinkInformation:()=>pB(t),getValidationHandler:()=>bB(t),getUrlPicker:s=>Y8(t,s)}),lU=(t,s,a)=>{const l=H(!1),d=B8(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:kd.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=cU(s),C=nB(s),k=R8(s),_=N8(s),D=()=>l.get(),M=se=>l.set(se),V={shared:{providers:g,anchors:E8(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:C,colorinput:k,dialog:_,isContextMenuOpen:D,setContextMenuState:M},z={...V,shared:{...V.shared,interpreter:se=>aO(se,{},z),getSink:t.popup}},Q={...V,shared:{...V.shared,interpreter:se=>aO(se,{},Q),getSink:t.dialog}};return{popup:z,dialog:Q}},zc=(t,s,a)=>{const l=(Ae,Ct)=>{$([s,...a],Lt=>{Lt.broadcastEvent(Ae,Ct)})},d=(Ae,Ct)=>{$([s,...a],Lt=>{Lt.broadcastOn([Ae],Ct)})},g=Ae=>d(Cd(),{target:Ae.target}),p=E(),C=Lc(p,"touchstart",g),k=Lc(p,"touchmove",Ae=>l(T2(),Ae)),_=Lc(p,"touchend",Ae=>l(JT(),Ae)),D=Lc(p,"mousedown",g),M=Lc(p,"mouseup",Ae=>{Ae.raw.button===0&&d(mf(),{target:Ae.target})}),V=Ae=>d(Cd(),{target:Je.fromDom(Ae.target)}),z=Ae=>{Ae.button===0&&d(mf(),{target:Je.fromDom(Ae.target)})},Q=()=>{$(t.editorManager.get(),Ae=>{t!==Ae&&Ae.dispatch("DismissPopups",{relatedTarget:t})})},se=Ae=>l(gb(),ey(Ae)),ke=Ae=>{d(df(),{}),l(xp(),ey(Ae))},fe=()=>d(df(),{}),Ee=Ae=>{Ae.state&&d(Cd(),{target:Je.fromDom(t.getContainer())})},ht=Ae=>{d(Cd(),{target:Je.fromDom(Ae.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",V),t.on("tap",V),t.on("mouseup",z),t.on("mousedown",Q),t.on("ScrollWindow",se),t.on("ResizeWindow",ke),t.on("ResizeEditor",fe),t.on("AfterProgressState",Ee),t.on("DismissPopups",ht)}),t.on("remove",()=>{t.off("click",V),t.off("tap",V),t.off("mouseup",z),t.off("mousedown",Q),t.off("ScrollWindow",se),t.off("ResizeWindow",ke),t.off("ResizeEditor",fe),t.off("AfterProgressState",Ee),t.off("DismissPopups",ht),D.unbind(),C.unbind(),k.unbind(),_.unbind(),M.unbind()}),t.on("detach",()=>{$([s,...a],oE),$([s,...a],Ae=>Ae.destroy())})},Ia=Ei,Af=Kw,Yx=te([Ce("shell",!1),Ze("makeItem"),Ce("setupItem",oe),ki.field("listBehaviours",[qn])]),X8=ou({name:"items",overrides:()=>({behaviours:ut([qn.config({})])})}),J8=te([X8]),Q8=te("CustomList"),e7=(t,s,a,l)=>{const d=(C,k)=>{p(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const D=qn.contents(_),M=k.length,V=M-D.length,z=V>0?$s(V,()=>t.makeItem()):[],Q=D.slice(M);$(Q,ke=>qn.remove(_,ke)),$(z,ke=>qn.append(_,ke));const se=qn.contents(_);$(se,(ke,fe)=>{t.setupItem(C,ke,k[fe],fe)})})},g=t.shell?{behaviours:[qn.config({})],components:[]}:{behaviours:[],components:s},p=C=>t.shell?O.some(C):xs(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Ya(t.listBehaviours,g.behaviours),apis:{setItems:d}}},vB=Oc({name:Q8(),configFields:Yx(),partFields:J8(),factory:e7,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),c0=te([Ze("dom"),Ce("shell",!0),ra("toolbarBehaviours",[qn])]),yB=te([ou({name:"groups",overrides:()=>({behaviours:ut([qn.config({})])})})]),Xx=(t,s,a,l)=>{const d=(C,k)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{qn.set(_,k)})},g=C=>t.shell?O.some(C):xs(C,t,"groups"),p=t.shell?{behaviours:[qn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Ya(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},ym=Oc({name:"Toolbar",configFields:c0(),partFields:yB(),factory:Xx,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),CB=oe,t7=Kt,yO=te([]);var n7=Object.freeze({__proto__:null,setup:CB,isDocked:t7,getBehaviours:yO});const wB=t=>(Qr(Ss(t,"position"),"fixed")?O.none():rl(t)).orThunk(()=>{const l=Je.fromTag("span");return ea(t).bind(d=>{rc(d,l);const g=rl(l);return Zi(l),g})}),CO=t=>wB(t).map(Cr).getOrThunk(()=>Ds(0,0)),SB=Re.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),dU=(t,s)=>{const a=t.element;Gr(a,s.transitionClass),Lr(a,s.fadeOutClass),Gr(a,s.fadeInClass),s.onShow(t)},o7=(t,s)=>{const a=t.element;Gr(a,s.transitionClass),Lr(a,s.fadeInClass),Gr(a,s.fadeOutClass),s.onHide(t)},s7=(t,s)=>t.y<s.bottom&&t.bottom>s.y,r7=(t,s)=>t.y>=s.y,xB=(t,s)=>t.bottom<=s.bottom,Jx=(t,s,a)=>Fe(t,l=>{switch(l){case"bottom":return xB(s,a);case"top":return r7(s,a)}}),TB=(t,s)=>s.getInitialPos().map(a=>Yt(a.bounds.x,a.bounds.y,ar(t),rr(t))),a7=(t,s,a)=>{a.setInitialPos({style:Pr(t),position:Ge(t,"position")||"static",bounds:s})},wO=(t,s,a)=>a.getInitialPos().bind(l=>{switch(a.clearInitialPos(),l.position){case"static":return O.some(SB.static());case"absolute":const d=wB(t).map(ho).getOrThunk(()=>ho(zr()));return O.some(SB.absolute(Bu("absolute",Zt(l.style,"left").map(g=>s.x-d.x),Zt(l.style,"top").map(g=>s.y-d.y),Zt(l.style,"right").map(g=>d.right-s.right),Zt(l.style,"bottom").map(g=>d.bottom-s.bottom))));default:return O.none()}}),c7=(t,s,a)=>TB(t,a).filter(l=>Jx(a.getModes(),l,s)).bind(l=>wO(t,l,a)),l7=(t,s,a)=>{const l=ho(t);if(Jx(a.getModes(),l,s))return O.none();{a7(t,l,a);const d=Oa(),g=l.x-d.x,p=s.y-d.y,C=d.bottom-s.bottom,k=l.y<=s.y;return O.some(SB.fixed(Bu("fixed",O.some(g),k?O.some(p):O.none(),O.none(),k?O.none():O.some(C))))}},i7=(t,s,a)=>{const l=t.element;return Qr(Ss(l,"position"),"fixed")?c7(l,s,a):l7(l,s,a)},u7=(t,s)=>{const a=t.element;return TB(a,s).bind(l=>wO(a,l,s))},Qx=(t,s,a)=>{a.setDocked(!1),$(["left","right","top","bottom","position"],l=>Vn(t.element,l)),s.onUndocked(t)},eT=(t,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),Hp(t.element,l),(d?s.onDocked:s.onUndocked)(t)},kB=(t,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const C=s7(p,l);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Yd(t.element,[g.fadeOutClass]),g.onHide(t)):(C?dU:o7)(t,g))})})},d7=(t,s,a)=>{const l=s.lazyViewport(t);a.isDocked()&&kB(t,s,a,l),i7(t,l,a).each(g=>{g.fold(()=>Qx(t,s,a),p=>eT(t,s,a,p),p=>{kB(t,s,a,l,!0),eT(t,s,a,p)})})},m7=(t,s,a)=>{const l=t.element;a.setDocked(!1),u7(t,a).each(d=>{d.fold(()=>Qx(t,s,a),g=>eT(t,s,a,g),oe)}),a.setVisible(!0),s.contextual.each(d=>{ei(l,[d.fadeInClass,d.fadeOutClass,d.transitionClass]),d.onShow(t)}),SO(t,s,a)},SO=(t,s,a)=>{t.getSystem().isConnected()&&d7(t,s,a)},xO=(t,s,a)=>{a.isDocked()&&m7(t,s,a)};var tT=Object.freeze({__proto__:null,refresh:SO,reset:xO,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l)}),kO=Object.freeze({__proto__:null,events:(t,s)=>Es([Na(zd(),(a,l)=>{t.contextual.each(d=>{Rl(a.element,d.transitionClass)&&(ei(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),Xe(gb(),(a,l)=>{SO(a,t,s)}),Xe(xp(),(a,l)=>{xO(a,t,s)})])}),zC=[Gc("contextual",[Ir("fadeInClass"),Ir("fadeOutClass"),Ir("transitionClass"),Zr("lazyContext"),Co("onShow"),Co("onShown"),Co("onHide"),Co("onHidden")]),sa("lazyViewport",Oa),T("modes",["top","bottom"],ta),Co("onDocked"),Co("onUndocked")],g7=Object.freeze({__proto__:null,init:t=>{const s=H(!1),a=H(!0),l=mr(),d=H(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return fl({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Qc=Ka({fields:zC,name:"docking",active:kO,apis:tT,state:g7}),nT=te(Ht("toolbar-height-change")),Cm={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},EB="tox-tinymce--toolbar-sticky-on",oT="tox-tinymce--toolbar-sticky-off",sT=(t,s)=>{const a=ga(s),d=sl(s).dom.innerHeight,g=Al(a),p=Je.fromDom(t.elm),C=qs(p),k=rr(p),_=C.y,D=_+k,M=Cr(s),V=rr(s),z=M.top,Q=z+V,se=Math.abs(z-g.top)<2,ke=Math.abs(Q-(g.top+d))<2;if(se&&_<Q)Gg(g.left,_-V,a);else if(ke&&D>z){const fe=_-d+k+V;Gg(g.left,fe,a)}},EO=(t,s)=>yo(Qc.getModes(t),s),_O=t=>{const s=l=>Hi(l)+(parseInt(Ge(l,"margin-top"),10)||0)+(parseInt(Ge(l,"margin-bottom"),10)||0),a=t.element;zl(a).each(l=>{const d="padding-"+Qc.getModes(t)[0];if(Qc.isDocked(t)){const g=ar(l);$t(a,"width",g+"px"),$t(l,d,s(a)+"px")}else Vn(a,"width"),Vn(l,d)})},z1=(t,s)=>{s?(Lr(t,Cm.fadeOutClass),Yd(t,[Cm.transitionClass,Cm.fadeInClass])):(Lr(t,Cm.fadeInClass),Yd(t,[Cm.fadeOutClass,Cm.transitionClass]))},AO=(t,s)=>{const a=Je.fromDom(t.getContainer());s?(Gr(a,EB),Lr(a,oT)):(Gr(a,oT),Lr(a,EB))},h7=(t,s)=>{const a=ga(s);Bl(a).filter(l=>!ns(s,l)).filter(l=>ns(l,Je.fromDom(a.dom.body))||Tl(t,l)).each(()=>nm(s))},_B=(t,s)=>xi(t).orThunk(()=>s().toOptional().bind(a=>xi(a.element))),OO=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Qc.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(_O)}),t.on("SkinLoaded",()=>{a().each(l=>{Qc.isDocked(l)?Qc.reset(l):Qc.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Qc.reset)})),t.on("AfterScrollIntoView",l=>{a().each(d=>{Qc.refresh(d);const g=d.element;$l(g)&&sT(l,g)})}),t.on("PostRender",()=>{AO(t,!1)})},DO=t=>t().map(Qc.isDocked).getOr(!1),p7=()=>[Si.config({channels:{[nT()]:{onReceive:_O}}})],AB=(t,s)=>{const a=mr(),l=s.getSink,d=C=>{l().each(k=>C(k.element))},g=C=>{t.inline||_O(C),AO(t,Qc.isDocked(C)),C.getSystem().broadcastOn([df()],{}),l().each(k=>k.getSystem().broadcastOn([df()],{}))},p=t.inline?[]:p7();return[Tn.config({}),Qc.config({contextual:{lazyContext:C=>{const k=Hi(C.element),_=t.inline?t.getContentAreaContainer():t.getContainer(),D=ho(Je.fromDom(_)),M=D.height-k,V=D.y+(EO(C,"top")?0:k);return O.some(Yt(D.x,V,D.width,M))},onShow:()=>{d(C=>z1(C,!0))},onShown:C=>{d(k=>ei(k,[Cm.transitionClass,Cm.fadeInClass])),a.get().each(k=>{h7(C.element,k),a.clear()})},onHide:C=>{_B(C.element,l).fold(a.clear,a.set),d(k=>z1(k,!1))},onHidden:()=>{d(C=>ei(C,[Cm.transitionClass]))},...Cm},lazyViewport:C=>{const k=Oa(),_=pD(t),D=k.y+(EO(C,"top")?_:0),M=k.height-(EO(C,"bottom")?_:0);return Yt(k.x,D,k.width,M)},modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var b7=Object.freeze({__proto__:null,setup:OO,isDocked:DO,getBehaviours:AB});const RO=t=>{const s=t.editor,a=t.sticky?AB:yO;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:ut(a(s,t.sharedBackstage))}},v7=nn([aa,dl("items",et([Gl([x_,jc("items",ta)]),ta]))].concat(k1)),y7=t=>Fo("GroupToolbarButton",v7,t),C7=[Ma("text"),Ma("tooltip"),Ma("icon"),na("search",!1,et([Bc,nn([Ma("placeholder")])],t=>Zo(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),Zr("fetch"),sa("onSetup",()=>oe)],w7=nn([aa,...C7]),OB=t=>Fo("menubutton",w7,t),S7=nn([aa,hC,hm,Wv,GD,AI,x1,Kl("presets","normal",["normal","color","listpreview"]),ZS(1),S1,OI]),x7=t=>Fo("SplitButton",S7,t);var MO=_i({factory:(t,s)=>{const a=(d,g)=>{const p=We(g,C=>{const k={type:"menubutton",text:C.text,fetch:D=>{D(C.getItems())}},_=OB(k).mapError(D=>Yi(D)).getOrDie();return tO(_,"tox-mbtn",s.backstage,O.some("menuitem"))});qn.set(d,p)},l={focus:an.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:ut([qn.config({}),So("menubar-events",[dr(d=>{t.onSetup(d)}),Xe(Vd(),(d,g)=>{Fr(d.element,".tox-mbtn--active").each(p=>{wi(g.event.target,".tox-mbtn").each(C=>{ns(p,C)||d.getSystem().getByDom(p).each(k=>{d.getSystem().getByDom(C).each(_=>{ru.expand(_),ru.close(k),Tn.focus(_)})})})})}),Xe(Tp(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{ru.isOpen(p)&&(ru.expand(C),ru.close(p))})})})]),an.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),O.some(!0))}),Yr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ze("dom"),Ze("uid"),Ze("onEscape"),Ze("backstage"),Ce("onSetup",oe)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const UC="⚡️Upgrade",k7="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",E7=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:k7,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:UC}}]}),U1=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Of=t=>t.dimension.property,W1=(t,s)=>t.dimension.getDimension(s),rT=(t,s)=>{const a=U1(t,s);ei(a,[s.shrinkingClass,s.growingClass])},NO=(t,s)=>{Lr(t.element,s.openClass),Gr(t.element,s.closedClass),$t(t.element,Of(s),"0px"),gi(t.element)},BO=(t,s)=>{Lr(t.element,s.closedClass),Gr(t.element,s.openClass),Vn(t.element,Of(s))},DB=(t,s,a,l)=>{a.setCollapsed(),$t(t.element,Of(s),W1(s,t.element)),rT(t,s),NO(t,s),s.onStartShrink(t),s.onShrunk(t)},_7=(t,s,a,l)=>{const d=l.getOrThunk(()=>W1(s,t.element));a.setCollapsed(),$t(t.element,Of(s),d),gi(t.element);const g=U1(t,s);Lr(g,s.growingClass),Gr(g,s.shrinkingClass),NO(t,s),s.onStartShrink(t)},RB=(t,s,a)=>{const l=W1(s,t.element);(l==="0px"?DB:_7)(t,s,a,O.some(l))},MB=(t,s,a)=>{const l=U1(t,s),d=Rl(l,s.shrinkingClass),g=W1(s,t.element);BO(t,s);const p=W1(s,t.element);(d?()=>{$t(t.element,Of(s),g),gi(t.element)}:()=>{NO(t,s)})(),Lr(l,s.shrinkingClass),Gr(l,s.growingClass),BO(t,s),$t(t.element,Of(s),p),a.setExpanded(),s.onStartGrow(t)},A7=(t,s,a)=>{if(a.isExpanded()){Vn(t.element,Of(s));const l=W1(s,t.element);$t(t.element,Of(s),l)}},NB=(t,s,a)=>{a.isExpanded()||MB(t,s,a)},PO=(t,s,a)=>{a.isExpanded()&&RB(t,s,a)},$O=(t,s,a)=>{a.isExpanded()&&DB(t,s,a)},O7=(t,s,a)=>a.isExpanded(),D7=(t,s,a)=>a.isCollapsed(),BB=(t,s,a)=>{const l=U1(t,s);return Rl(l,s.growingClass)===!0},PB=(t,s,a)=>{const l=U1(t,s);return Rl(l,s.shrinkingClass)===!0};var R7=Object.freeze({__proto__:null,refresh:A7,grow:NB,shrink:PO,immediateShrink:$O,hasGrown:O7,hasShrunk:D7,isGrowing:BB,isShrinking:PB,isTransitioning:(t,s,a)=>BB(t,s)||PB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?RB:MB)(t,s,a)},disableTransitions:rT,immediateGrow:(t,s,a)=>{a.isExpanded()||(BO(t,s),$t(t.element,Of(s),W1(s,t.element)),rT(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),M7=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return eu(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:ss(s.dimension.property,"0px")})},events:(t,s)=>Es([Na(zd(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(rT(a,t),s.isExpanded()&&Vn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),IB=[Ze("closedClass"),Ze("openClass"),Ze("shrinkingClass"),Ze("growingClass"),Ho("getAnimationRoot"),Co("onShrunk"),Co("onStartShrink"),Co("onGrown"),Co("onStartGrow"),Ce("expanded",!1),dl("dimension",Zc("property",{width:[Ns("property","width"),Ns("getDimension",t=>ar(t)+"px")],height:[Ns("property","height"),Ns("getDimension",t=>rr(t)+"px")]}))],B7=Object.freeze({__proto__:null,init:t=>{const s=H(t.expanded),a=()=>"expanded: "+s.get();return fl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:At(s.set,!1),setExpanded:At(s.set,!0),readState:a})}});const Rd=Ka({fields:IB,name:"sliding",active:M7,apis:R7,state:B7}),WC="container",cT=[ra("slotBehaviours",[])],LB=t=>"<alloy.field."+t+">",P7=t=>{const s=(()=>{const g=[];return{slot:(C,k)=>(g.push(C),Py(WC,LB(C),k)),record:te(g)}})(),a=t(s),l=s.record(),d=We(l,g=>Ac({name:g,pname:LB(g)}));return d1(WC,cT,d,$7,a)},$7=(t,s)=>{const a=se=>pf(t),l=(se,ke)=>xs(se,t,ke),d=(se,ke)=>(fe,Ee)=>xs(fe,t,Ee).map(ht=>se(ht,Ee)).getOr(ke),g=se=>(ke,fe)=>{$(fe,Ee=>se(ke,Ee))},p=(se,ke)=>Ls(se.element,"aria-hidden")!=="true",C=(se,ke)=>{if(!p(se)){const fe=se.element;Vn(fe,"display"),ne(fe,"aria-hidden"),mn(se,A0(),{name:ke,visible:!0})}},k=(se,ke)=>{if(p(se)){const fe=se.element;$t(fe,"display","none"),Rn(fe,"aria-hidden","true"),mn(se,A0(),{name:ke,visible:!1})}},_=d(p,!1),D=d(k),M=g(D),V=se=>M(se,a()),z=d(C),Q={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:D,hideAllSlots:V,showSlot:z};return{uid:t.uid,dom:t.dom,components:s,behaviours:bg(t.slotBehaviours),apis:Q}},Dc={...Lo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>fh(t)),sketch:P7},LO=nn([hm,hC,sa("onShow",oe),sa("onHide",oe),x1]),FB=t=>Fo("sidebar",LO,t),I7=t=>{const{sidebars:s}=t.ui.registry.getAll();$(yn(s),a=>{const l=s[a],d=()=>Qr(O.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},FO=t=>({element:()=>t.element.dom}),L7=(t,s)=>{const a=We(yn(s),l=>{const d=s[l],g=Ki(FB(d));return{name:l,getApi:FO,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return We(a,l=>{const d=H(oe);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:E1.unnamedEvents([Ed(l,d),bC(l,d),Xe(A0(),(g,p)=>{const C=p.event;zt(a,_=>_.name===C.name).each(_=>{(C.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},F7=t=>Dc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:L7(s,t),slotBehaviours:E1.unnamedEvents([dr(a=>Dc.hideAllSlots(a))])})),H7=(t,s,a)=>{po.getCurrent(t).each(d=>{qn.set(d,[F7(s)]);const g=a==null?void 0:a.toLowerCase();xt(g)&&In(s,g)&&po.getCurrent(d).each(p=>{Dc.showSlot(p,g),Rd.immediateGrow(d),Vn(d.element,"width")})})},ZC=(t,s)=>{po.getCurrent(t).each(l=>{po.getCurrent(l).each(g=>{Rd.hasGrown(l)?Dc.isShowing(g,s)?Rd.shrink(l):(Dc.hideAllSlots(g),Dc.showSlot(g,s)):(Dc.hideAllSlots(g),Dc.showSlot(g,s),Rd.grow(l))})})},V7=t=>po.getCurrent(t).bind(a=>Rd.isGrowing(a)||Rd.hasGrown(a)?po.getCurrent(a).bind(g=>zt(Dc.getSlotNames(g),p=>Dc.isShowing(g,p))):O.none()),HO=Ht("FixSizeEvent"),VO=Ht("AutoSizeEvent"),vU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ut([Yr.config({}),Tn.config({}),Rd.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{po.getCurrent(s).each(Dc.hideAllSlots),es(s,VO)},onGrown:s=>{es(s,VO)},onStartGrow:s=>{mn(s,HO,{width:Ss(s.element,"width").getOr("")})},onStartShrink:s=>{mn(s,HO,{width:ar(s.element)+"px"})}}),qn.config({}),po.config({find:s=>{const a=qn.contents(s);return cs(a)}})])}],behaviours:ut([ju.childAt(0),So("sidebar-sliding-events",[Xe(HO,(s,a)=>{$t(s.element,"width",a.event.width)}),Xe(VO,(s,a)=>{Vn(s.element,"width")})])])});var U7=Object.freeze({__proto__:null,block:(t,s,a,l)=>{Rn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=ut([an.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),Tn.config({})]),p=l(d,g),C=d.getSystem().build(p);qn.append(d,ni(C)),C.hasConfigured(an)&&s.focus&&an.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>qn.remove(d,C))},unblock:(t,s,a)=>{ne(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),HB=[sa("getRoot",O.none),oa("focus",!0),Co("onBlock"),Co("onUnblock")],W7=Object.freeze({__proto__:null,init:()=>{const t=Rk(),s=a=>{t.set({destroy:a})};return fl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Mg=Ka({fields:HB,name:"blocking",apis:U7,state:W7}),Z7=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Wt(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},j7=t=>Array.prototype.slice.call(t.dom.classList,0),Ng=t=>{const s=Je.fromHtml(t),a=ws(s),l=Z7(s),d=j7(s),g=a.length===0?{}:{innerHtml:qd(s)};return{tag:Bo(s),classes:d,attributes:l,...g}},G7=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Ng('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),VB=t=>po.getCurrent(t).each(s=>nm(s.element)),q7=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;O.from(t.iframeElement).map(Je.fromDom).each(d=>{s?(B(d,a).each(g=>Rn(d,l,g)),Rn(d,a,-1)):(ne(d,a),B(d,l).each(g=>{Rn(d,a,g),ne(d,l)}))})},CU=(t,s,a,l)=>{const d=s.element;if(q7(t,a),a)Mg.block(s,G7(l)),Vn(d,"display"),ne(d,"aria-hidden"),t.hasFocus()&&VB(s);else{const g=po.getCurrent(s).exists(p=>j0(p.element));Mg.unblock(s),$t(d,"display","none"),Rn(d,"aria-hidden","true"),g&&t.focus()}},wU=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ut([qn.config({}),Mg.config({focus:!1}),po.config({find:s=>cs(s.components())})]),components:[]}),zB=t=>t.type==="focusin",UB=t=>zB(t)?(t.composed?cs(t.composedPath()):O.from(t.target)).map(Je.fromDom).filter(Os).exists(a=>Rl(a,"mce-pastebin")):!1,K7=(t,s,a)=>{const l=H(!1),d=mr(),g=C=>{l.get()&&!UB(C)&&(C.preventDefault(),VB(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const p=C=>{C!==l.get()&&(l.set(C),CU(t,s(),C,a.providers),uL(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),_n(C.time)){const k=Mv.setEditorTimeout(t,()=>p(C.state),C.time);d.set(k)}else p(C.state),d.clear()})},Y7=(t,s)=>Wt(t,(d,g)=>s(g,d.len).fold(te(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,Mi=(t,s,a)=>({within:t,extra:s,withinWidth:a}),WB=(t,s,a)=>{const l=Y7(t,(C,k)=>{const _=a(C);return O.some({element:C,start:k,finish:k+_,width:_})}),d=ze(l,C=>C.finish<=s),g=at(d,(C,k)=>C+k.width,0),p=l.slice(d.length);return{within:d,extra:p,withinWidth:g}},jC=t=>We(t,s=>s.element),ZB=(t,s,a)=>{const l=jC(t.concat(s));return Mi(l,[],a)},X7=(t,s,a,l)=>{const d=jC(t).concat([a]);return Mi(d,jC(s),l)},GC=(t,s,a)=>Mi(jC(t),[],a),J7=(t,s,a)=>{const l=WB(s,t,a);return l.extra.length===0?O.some(l):O.none()},lT=(t,s,a,l)=>{const d=J7(t,s,a).getOrThunk(()=>WB(s,t-a(l),a)),g=d.within,p=d.extra,C=d.withinWidth;return p.length===1&&p[0].width<=a(l)?ZB(g,p,C):p.length>=1?X7(g,p,l,C):GC(g,p,C)},jB=(t,s)=>{const a=We(s,l=>ni(l));ym.setGroups(t,a)},iT=t=>er(t,s=>xi(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),GB=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Nt(t,s,"primary"),g=Rr.getCoupled(t,"overflowGroup");$t(d.element,"visibility","hidden");const p=l.concat([g]),C=iT(p);a([]),jB(d,p);const k=ar(d.element),_=lT(k,s.builtGroups.get(),D=>ar(D.element),g);_.extra.length===0?(qn.remove(d,g),a([])):(jB(d,_.within),a(_.extra)),Vn(d.element,"visibility"),gi(d.element),C.each(Tn.focus)},qu=te([ra("splitToolbarBehaviours",[Rr]),cc("builtGroups",()=>H([]))]),Q7=te([em(["overflowToggledClass"]),zf("getOverflowBounds"),Ze("lazySink"),cc("overflowGroups",()=>H([])),Co("onOpened"),Co("onClosed")].concat(qu())),uT=te([Ac({factory:ym,schema:c0(),name:"primary"}),Lu({schema:c0(),name:"overflow"}),Lu({name:"overflow-button"}),Lu({name:"overflow-group"})]),dT=te((t,s)=>{bs(t,Math.floor(s))}),eH=te([em(["toggledClass"]),Ze("lazySink"),Zr("fetch"),zf("getBounds"),Gc("fireDismissalEventInstead",[Ce("event",Wd())]),af(),Co("onToggled")]),tH=te([Lu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ut([Po.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Lu({factory:ym,schema:c0(),name:"toolbar",overrides:t=>({toolbarBehaviours:ut([an.config({mode:"cyclic",onEscape:s=>(xs(s,t,"button").each(Tn.focus),O.none())})])})})]),qB=(t,s)=>{const a=Rr.getCoupled(t,"toolbarSandbox");wo.isOpen(a)?wo.close(a):wo.open(a,s.toolbar())},zO=(t,s,a,l)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();Fc.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:dT()}}},d)},KB=(t,s,a,l,d)=>{ym.setGroups(s,d),zO(t,s,a,l),Po.on(t)},nH=(t,s,a)=>{const l=Db(),d=(p,C)=>{a.fetch().get(k=>{KB(t,C,a,s.layouts,k),l.link(t.element),an.focusIn(C)})},g=()=>{Po.off(t),Tn.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:ut([an.config({mode:"special",onEscape:p=>(wo.close(p),O.some(!0))}),wo.config({onOpen:d,onClose:g,isPartOf:(p,C,k)=>Jd(C,k)||Jd(t,k),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Si.config({channels:{...Bh({isExtraPart:Kt,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...iv({doReposition:()=>{wo.getState(Rr.getCoupled(t,"toolbarSandbox")).each(p=>{zO(t,p,a,s.layouts)})}})}})])}},rp=Oc({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...Ll.sketch({...l.button(),action:d=>{qB(d,l)},buttonBehaviours:ki.augment({dump:l.button().buttonBehaviours},[Rr.config({others:{toolbarSandbox:d=>nH(d,a,t)}})])}),apis:{setGroups:(d,g)=>{wo.getState(Rr.getCoupled(d,"toolbarSandbox")).each(p=>{KB(d,p,t,a.layouts,g)})},reposition:d=>{wo.getState(Rr.getCoupled(d,"toolbarSandbox")).each(g=>{zO(d,g,t,a.layouts)})},toggle:d=>{qB(d,l)},getToolbar:d=>wo.getState(Rr.getCoupled(d,"toolbarSandbox")),isOpen:d=>wo.isOpen(Rr.getCoupled(d,"toolbarSandbox"))}}),configFields:eH(),partFields:tH(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),YB=te([Ze("items"),em(["itemSelector"]),ra("tgroupBehaviours",[an])]),XB=te([u1({name:"items",unit:"item"})]),oH=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ya(t.tgroupBehaviours,[an.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),qC=Oc({name:"ToolbarGroup",configFields:YB(),partFields:XB(),factory:oH}),JB=t=>We(t,s=>ni(s)),QB=(t,s,a)=>{GB(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(d=>{rp.setGroups(d,JB(l))})})},sH=(t,s,a,l)=>{const d=Vs(rp.sketch({fetch:()=>Vc.nu(g=>{g(JB(t.overflowGroups.get()))}),layouts:{onLtr:()=>[uc,ic],onRtl:()=>[ic,uc],onBottomLtr:()=>[Ec,Ic],onBottomRtl:()=>[Ic,Ec]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ya(t.splitToolbarBehaviours,[Rr.config({others:{overflowGroup:()=>qC.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(We(p,g.getSystem().build)),QB(g,d,t)},refresh:g=>QB(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{rp.toggle(p)})},isOpen:g=>d.getOpt(g).map(rp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{rp.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(rp.getToolbar)},domModification:{attributes:{role:"group"}}}},eP=Oc({name:"SplitFloatingToolbar",configFields:Q7(),partFields:uT(),factory:sH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),rH=te([em(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Co("onOpened"),Co("onClosed")].concat(qu())),aH=te([Ac({factory:ym,schema:c0(),name:"primary"}),Ac({factory:ym,schema:c0(),name:"overflow",overrides:t=>({toolbarBehaviours:ut([Rd.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{xs(s,t,"overflow-button").each(a=>{Po.off(a),Tn.focus(a)}),t.onClosed(s)},onGrown:s=>{an.focusIn(s),t.onOpened(s)},onStartGrow:s=>{xs(s,t,"overflow-button").each(Po.on)}}),an.config({mode:"acyclic",onEscape:s=>(xs(s,t,"overflow-button").each(Tn.focus),O.some(!0))})])})}),Lu({name:"overflow-button",overrides:t=>({buttonBehaviours:ut([Po.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Lu({name:"overflow-group"})]),cH=(t,s)=>xs(t,s,"overflow").map(Rd.hasGrown).getOr(!1),tP=(t,s)=>{xs(t,s,"overflow-button").bind(()=>xs(t,s,"overflow")).each(a=>{UO(t,s),Rd.toggleGrow(a)})},UO=(t,s)=>{xs(t,s,"overflow").each(a=>{GB(t,s,l=>{const d=We(l,g=>ni(g));ym.setGroups(a,d)}),xs(t,s,"overflow-button").each(l=>{Rd.hasGrown(a)&&Po.on(l)}),Rd.refresh(a)})},lH=(t,s,a,l)=>{const d="alloy.toolbar.toggle",g=(p,C)=>{const k=We(C,p.getSystem().build);t.builtGroups.set(k)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ya(t.splitToolbarBehaviours,[Rr.config({others:{overflowGroup:p=>qC.sketch({...l["overflow-group"](),items:[Ll.sketch({...l["overflow-button"](),action:C=>{es(p,d)}})]})}}),So("toolbar-toggle-events",[Xe(d,p=>{tP(p,t)})])]),apis:{setGroups:(p,C)=>{g(p,C),UO(p,t)},refresh:p=>UO(p,t),toggle:p=>tP(p,t),isOpen:p=>cH(p,t)},domModification:{attributes:{role:"group"}}}},WO=Oc({name:"SplitSlidingToolbar",configFields:rH(),partFields:aH(),factory:lH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),nP=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[qC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:ut([Yr.config({}),Tn.config({})])}},mT=t=>qC.sketch(nP(t)),ZO=(t,s)=>{const a=dr(l=>{const d=We(t.initGroups,mT);ym.setGroups(l,d)});return ut([Oi.toolbarButton(t.providers.isDisabled),Kr(),an.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),So("toolbar-events",[a])])},KC=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":nP({title:O.none(),items:[]}),"overflow-button":RN({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("More..."),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:ZO(t,s)}},jO=t=>{const s=KC(t),a=4,l=eP.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return eP.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=qs(d),p=kl(d),C=qs(p),k=Math.max(p.dom.scrollHeight,C.height);return Yt(g.x+a,C.y,g.width-a*2,k)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},iH=t=>{const s=WO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=WO.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=KC(t);return WO.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([nT()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([nT()],{type:"closed"}),t.onToggled(d,!1)}})},fT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return ym.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Uu.scrolling?["tox-toolbar--scrolling"]:[])},components:[ym.parts.groups({})],toolbarBehaviours:ZO(t,s)})},oP=[Hf("type",["button"]),kg,Kl("buttonType","secondary",["primary","secondary"]),Zr("onAction")],uH=Zc("type",{button:oP}),dH=nn([T("buttons",[],uH),Zr("onShow"),Zr("onHide")]),mH=t=>Fo("view",dH,t),sP=(t,s)=>oO({text:t.text,enabled:!0,primary:!1,name:"name",icon:O.none(),borderless:!1,buttonType:O.some(t.buttonType)},a=>{t.onAction()},s),fH=t=>{const s=We(t.buttons,a=>sP(a,t.providers));return{uid:t.uid,dom:{tag:"div",classes:["tox-view__header"]},components:[pm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),pm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:s})]}},gH=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),GO=(t,s,a,l)=>{const d={getPane:g=>Ia.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var l0=Oc({name:"silver.View",configFields:[Ze("viewConfig")],partFields:[ou({factory:{sketch:fH},schema:[Ze("buttons"),Ze("providers")],name:"header"}),ou({factory:{sketch:gH},schema:[],name:"pane"})],factory:GO,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const hH=(t,s,a)=>Dn(s,(l,d)=>{const g=Ki(mH(l));return t.slot(d,l0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[l0.parts.header({buttons:g.buttons,providers:a})]:[],l0.parts.pane({})]}))}),rP=(t,s)=>Dc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:hH(a,t,s),slotBehaviours:E1.unnamedEvents([dr(l=>Dc.hideAllSlots(l))])})),aP=t=>zt(Dc.getSlotNames(t),s=>Dc.isShowing(t,s)),cP=t=>{const s=t.element;$t(s,"display","none"),Rn(s,"aria-hidden","true")},pH=t=>{const s=t.element;Vn(s,"display"),ne(s,"aria-hidden")},lP=t=>({getContainer:te(t)}),iP=(t,s,a)=>{Dc.getSlot(t,s).each(l=>{l0.getPane(l).each(d=>{a(l)(lP(d.element.dom))})})},bH=(t,s)=>iP(t,s,l0.getOnShow),vH=(t,s)=>iP(t,s,l0.getOnHide);var gT=_i({factory:(t,s)=>{const g={setViews:(p,C)=>{qn.set(p,[rP(C,s.backstage.shared.providers)])},whichView:p=>po.getCurrent(p).bind(aP),toggleView:(p,C,k,_)=>po.getCurrent(p).exists(D=>{const M=aP(D),V=M.exists(Q=>_===Q),z=Dc.getSlot(D,_).isSome();return z&&(Dc.hideAllSlots(D),V?(cP(p),C()):(k(),pH(p),Dc.showSlot(D,_),bH(D,_)),M.each(Q=>vH(D,Q))),z})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:ut([qn.config({}),po.config({find:p=>{const C=qn.contents(p);return cs(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ze("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,d)=>t.toggleView(s,a,l,d),whichView:(t,s)=>t.whichView(s)}});const CH=(t,s,a)=>{let l=!1;const d={getSocket:g=>Ia.getPart(g,t,"socket"),setSidebar:(g,p,C)=>{Ia.getPart(g,t,"sidebar").each(k=>H7(k,p,C))},toggleSidebar:(g,p)=>{Ia.getPart(g,t,"sidebar").each(C=>ZC(C,p))},whichSidebar:g=>Ia.getPart(g,t,"sidebar").bind(V7).getOrNull(),getHeader:g=>Ia.getPart(g,t,"header"),getToolbar:g=>Ia.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{Ia.getPart(g,t,"toolbar").each(C=>{const k=We(p,mT);C.getApis().setGroups(C,k)})},setToolbars:(g,p)=>{Ia.getPart(g,t,"multiple-toolbar").each(C=>{const k=We(p,_=>We(_,mT));vB.setItems(C,k)})},refreshToolbar:g=>{Ia.getPart(g,t,"toolbar").each(C=>C.getApis().refresh(C))},toggleToolbarDrawer:g=>{Ia.getPart(g,t,"toolbar").each(p=>{hn(p.getApis().toggle,C=>C(p))})},isToolbarDrawerToggled:g=>Ia.getPart(g,t,"toolbar").bind(p=>O.from(p.getApis().isOpen).map(C=>C(p))).getOr(!1),getThrobber:g=>Ia.getPart(g,t,"throbber"),focusToolbar:g=>{Ia.getPart(g,t,"toolbar").orThunk(()=>Ia.getPart(g,t,"multiple-toolbar")).each(C=>{an.focusIn(C)})},setMenubar:(g,p)=>{Ia.getPart(g,t,"menubar").each(C=>{MO.setMenus(C,p)})},focusMenubar:g=>{Ia.getPart(g,t,"menubar").each(p=>{MO.focus(p)})},setViews:(g,p)=>{Ia.getPart(g,t,"viewWrapper").each(C=>{gT.setViews(C,p)})},toggleView:(g,p)=>Ia.getPart(g,t,"viewWrapper").exists(C=>gT.toggleView(C,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>Ia.getPart(g,t,"viewWrapper").bind(gT.whichView).getOrNull(),hideMainView:g=>{l=d.isToolbarDrawerToggled(g),l&&d.toggleToolbarDrawer(g),Ia.getPart(g,t,"editorContainer").each(p=>{const C=p.element;$t(C,"display","none"),Rn(C,"aria-hidden","true")})},showMainView:g=>{l&&d.toggleToolbarDrawer(g),Ia.getPart(g,t,"editorContainer").each(p=>{const C=p.element;Vn(C,"display"),ne(C,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},wH=Af.optional({factory:MO,name:"menubar",schema:[Ze("backstage")]}),qO=t=>t.type===Uu.sliding?iH:t.type===Uu.floating?jO:fT,KO=Af.optional({factory:{sketch:t=>vB.sketch({uid:t.uid,dom:t.dom,listBehaviours:ut([an.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>fT({type:t.type,uid:Ht("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(s,a,l,d)=>{ym.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Ze("dom"),Ze("onEscape")]}),SH=Af.optional({factory:{sketch:t=>{const s=qO(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Ze("dom"),Ze("onEscape"),Ze("getSink")]}),xH=Af.optional({factory:{sketch:RO},name:"header",schema:[Ze("dom")]}),TH=Af.optional({factory:{sketch:E7},name:"promotion",schema:[Ze("dom")]}),kH=Af.optional({name:"socket",schema:[Ze("dom")]}),EH=Af.optional({factory:{sketch:vU},name:"sidebar",schema:[Ze("dom")]}),_H=Af.optional({factory:{sketch:wU},name:"throbber",schema:[Ze("dom")]}),AH=Af.optional({factory:gT,name:"viewWrapper",schema:[Ze("backstage")]}),OH=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),uP=Af.optional({factory:{sketch:OH},name:"editorContainer",schema:[]});var As=Oc({name:"OuterContainer",factory:CH,configFields:[Ze("dom"),Ze("behaviours")],partFields:[xH,wH,SH,KO,kH,EH,TH,_H,AH,uP],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const YO="file edit view insert format tools table help",XO={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},i0=(t,s,a)=>{const l=OS(a).split(/[ ,]/);return{text:t.title,getItems:()=>Go(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:oo(l,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},hT=t=>t.split(" "),dP=(t,s)=>{const a={...XO,...s.menus},l=yn(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?hT(YO):hT(s.menubar===!1?"":s.menubar),g=ze(d,C=>{const k=In(XO,C);return l?k||Zt(s.menus,C).exists(_=>In(_,"items")):k}),p=We(g,C=>{const k=a[C];return i0({title:k.title,items:hT(k.items)},s,t)});return ze(p,C=>{const k=_=>xt(_)||_.type!=="separator";return C.getItems().length>0&&oo(C.getItems(),k)})},mP=t=>{const s=()=>{t._skinLoaded=!0,aL(t)};return()=>{t.initialized?s():t.on("init",s)}},DH=(t,s)=>()=>cL(t,{message:s}),fP=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),RH=(t,s)=>{const a=s+"/skin.min.css";return fP(t,a,t.ui.styleSheetLoader)},MH=(t,s)=>{if(os(Je.fromDom(t.getElement()))){const l=s+"/skin.shadowdom.min.css";return fP(t,l,eC.DOM.styleSheetLoader)}else return Promise.resolve()},gP=(t,s)=>{const a=$v(s);a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!NS(s)&&xt(a)?Promise.all([RH(s,a),MH(s,a)]).then(mP(s),DH(s,"Skin could not be loaded")):mP(s)()},hP=At(gP,!1),NH=At(gP,!0),pT=(t,s)=>a=>{const l=rg(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},YC=(t,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},pP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Ku=(t,s)=>()=>t.execCommand(s),BH=(t,s,a)=>{const l=(C,k,_,D)=>{const M=s.shared.providers.translate(C.title);if(C.type==="separator")return O.some({type:"separator",text:M});if(C.type==="submenu"){const V=Go(C.getStyleItems(),z=>d(z,k,D));return k===0&&V.length<=0?O.none():O.some({type:"nestedmenuitem",text:M,enabled:V.length>0,getSubmenuItems:()=>Go(C.getStyleItems(),z=>d(z,k,D))})}else return O.some({type:"togglemenuitem",text:M,icon:C.icon,active:C.isSelected(D),enabled:!_,onAction:a.onAction(C),...C.getStylePreview().fold(()=>({}),V=>({meta:{style:V}}))})},d=(C,k,_)=>{const D=C.type==="formatter"&&a.isInvalid(C);return k===0?D?[]:l(C,k,!1,_).toArray():l(C,k,D,_).toArray()},g=C=>{const k=a.getCurrentValue(),_=a.shouldHide?0:1;return Go(C,D=>d(D,_,k))};return{validateItems:g,getFetch:(C,k)=>(_,D)=>{const M=k(),V=g(M),z=L1(V,fm.CLOSE_ON_EXECUTE,C,{isHorizontalMenu:!1,search:O.none()});D(z)}}},u0=(t,s,a)=>{const l=a.dataset,d=l.type==="basic"?()=>We(l.data,g=>tB(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:BH(t,s,a),getStyleItems:d}},XC=(t,s,a)=>{const{items:l,getStyleItems:d}=u0(t,s,a),g=C=>({getComponent:te(C)}),p=YC(t,"NodeChange",C=>{const k=C.getComponent();a.updateText(k)});return Bx({text:a.icon.isSome()?O.none():a.text,icon:a.icon,tooltip:O.from(a.tooltip),role:O.none(),fetch:l.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},PH=t=>We(t,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),bP=t=>({type:"basic",data:t});var Z1;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Z1||(Z1={}));const vP=(t,s)=>s===Z1.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),JO=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:PH(vP(l,a))}},bT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],yP=t=>{const s=()=>zt(bT,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),l=C=>O.none,d=C=>{const _=s().fold(te("left"),D=>D.title.toLowerCase());mn(C,iN,{icon:`align-${_}`})},g=bP(bT),p=C=>()=>zt(bT,k=>k.format===C.format).each(k=>t.execCommand(k.command));return{tooltip:"Align",text:O.none(),icon:O.some("align-left"),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},$H=(t,s)=>XC(t,s,yP(t)),IH=(t,s)=>{const a=u0(t,s,yP(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},QO=(t,s)=>{const a=s(),l=We(a,d=>d.format);return O.from(t.formatter.closest(l)).bind(d=>zt(a,g=>g.format===d)).orThunk(()=>fr(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},CP=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),l=p=>()=>{const C=t.formatter.get(p);return C?O.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},d=p=>{const k=QO(t,()=>g.data).fold(te(s),_=>_.title);mn(p,_f,{text:k})},g=JO(t,"block_formats",Z1.SemiColon);return{tooltip:"Blocks",text:O.some(s),icon:O.none(),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:pP(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},wP=(t,s)=>XC(t,s,CP(t)),LH=(t,s)=>{const a=u0(t,s,CP(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},FH=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],SP=t=>{const s=t.split(/\s*,\s*/);return We(s,a=>a.replace(/^['"]+|['"]+$/g,""))},HH=t=>{const s=()=>{const a=SP(t.toLowerCase());return Fe(FH,l=>a.indexOf(l.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},xP=t=>{const s="System Font",a=()=>{const _=Q=>Q?SP(Q)[0]:"",D=t.queryCommandValue("FontName"),M=k.data,V=D?D.toLowerCase():"";return{matchOpt:zt(M,Q=>{const se=Q.format;return se.toLowerCase()===V||_(se).toLowerCase()===_(V).toLowerCase()}).orThunk(()=>fr(HH(V),{title:s,format:V})),font:D}},l=_=>D=>D.exists(M=>M.format===_),d=()=>{const{matchOpt:_}=a();return _},g=_=>()=>O.some({tag:"div",styles:_.indexOf("dings")===-1?{"font-family":_}:{}}),p=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,_.format)})},C=_=>{const{matchOpt:D,font:M}=a(),V=D.fold(te(M),z=>z.title);mn(_,_f,{text:V})},k=JO(t,"font_family_formats",Z1.SemiColon);return{tooltip:"Fonts",text:O.some(s),icon:O.none(),isSelectedFor:l,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:C,dataset:k,shouldHide:!1,isInvalid:Kt}},TP=(t,s)=>XC(t,s,xP(t)),VH=(t,s)=>{const a=u0(t,s,xP(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},zH={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},UH={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},WH=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},ZH=(t,s)=>/[0-9.]+px$/.test(t)?WH(parseInt(t,10)*72/96,s||0)+"pt":Zt(UH,t).getOr(t),jH=t=>Zt(zH,t).getOr(""),kP=t=>{const s=()=>{let k=O.none();const _=C.data,D=t.queryCommandValue("FontSize");if(D)for(let M=3;k.isNone()&&M>=0;M--){const V=ZH(D,M),z=jH(V);k=zt(_,Q=>Q.format===D||Q.format===V||Q.format===z)}return{matchOpt:k,size:D}},a=k=>_=>_.exists(D=>D.format===k),l=()=>{const{matchOpt:k}=s();return k},d=te(O.none),g=k=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,k.format)})},p=k=>{const{matchOpt:_,size:D}=s(),M=_.fold(te(D),V=>V.title);mn(k,_f,{text:M})},C=JO(t,"font_size_formats",Z1.Space);return{tooltip:"Font sizes",text:O.some("12pt"),icon:O.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:Kt}},EP=(t,s)=>XC(t,s,kP(t)),GH=(t,s)=>{const a=u0(t,s,kP(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},_P=(t,s)=>{const a="Paragraph",l=p=>()=>t.formatter.match(p),d=p=>()=>{const C=t.formatter.get(p);return C!==void 0?O.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},g=p=>{const C=M=>KN(M)?Go(M.items,C):iO(M)?[{title:M.title,format:M.format}]:[],k=Go(QN(t),C),D=QO(t,te(k)).fold(te(a),M=>M.title);mn(p,_f,{text:D})};return{tooltip:"Formats",text:O.some(a),icon:O.none(),isSelectedFor:l,getCurrentValue:O.none,getPreviewFor:d,onAction:pP(t),updateText:g,shouldHide:gD(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},AP=(t,s)=>{const a={type:"advanced",...s.styles};return XC(t,s,_P(t,a))},qH=(t,s)=>{const a={type:"advanced",...s.styles},l=u0(t,s,_P(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})};var OP=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,d)=>{t.updateState.each(g=>{const p=g(l,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?Ov:P3)(l,p)})};return Es([Xe(Ji(),(l,d)=>{const g=d;if(!g.universal){const p=t.channel;yo(g.channels,p)&&a(l,g.data)}}),dr((l,d)=>{t.initialData.each(g=>{a(l,g)})})])}}),YH=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),XH=[Ze("channel"),Ho("renderComponents"),Ho("updateState"),Ho("initialData"),oa("reuseDom",!0)],JH=Object.freeze({__proto__:null,init:()=>{const t=H(O.none()),s=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Ni=Ka({fields:XH,name:"reflecting",active:OP,apis:YH,state:JH}),QH=te([Ze("toggleClass"),Ze("fetch"),nf("onExecute"),Ce("getHotspot",O.some),Ce("getAnchorOverrides",te({})),af(),nf("onItemExecute"),Ho("lazySink"),Ze("dom"),Co("onOpen"),ra("splitDropdownBehaviours",[Rr,an,Tn]),Ce("matchWidth",!1),Ce("useMinWidth",!1),Ce("eventOrder",{}),Ho("role")].concat(mA())),eV=Ac({factory:Ll,schema:[Ze("dom")],name:"arrow",defaults:()=>({buttonBehaviours:ut([Tn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Zd)},buttonBehaviours:ut([Po.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),tV=Ac({factory:Ll,schema:[Ze("dom")],name:"button",defaults:()=>({buttonBehaviours:ut([Tn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),nV=te([eV,tV,ou({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),Lu({schema:[$p()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),lx()]),oV=(t,s,a,l)=>{const d=D=>{po.getCurrent(D).each(M=>{Yo.highlightFirst(M),an.focusIn(M)})},g=D=>{uA(t,cn,D,l,d,Dr.HighlightMenuAndItem).get(oe)},p=D=>(g(D),O.some(!0)),C=D=>{const M=Nt(D,t,"button");return Zd(M),O.some(!0)},k={...Es([dr((D,M)=>{xs(D,t,"aria-descriptor").each(z=>{const Q=Ht("aria");Rn(z.element,"id",Q),Rn(D.element,"aria-describedby",Q)})})]),...wS(O.some(g))},_={repositionMenus:D=>{Po.isOn(D)&&tM(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:{...t.eventOrder,[Xl()]:["disabling","toggling","alloy.base.behaviour"]},events:k,behaviours:Ya(t.splitDropdownBehaviours,[Rr.config({others:{sandbox:D=>{const M=Nt(D,t,"arrow");return dA(t,D,{onOpen:()=>{Po.on(M),Po.on(D)},onClose:()=>{Po.off(M),Po.off(D)}})}}}),an.config({mode:"special",onSpace:C,onEnter:C,onDown:p}),Tn.config({}),Po.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},vT=Oc({name:"SplitDropdown",configFields:QH(),partFields:nV(),factory:oV,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),e4=t=>({isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s)}),sV=t=>({setActive:s=>{Po.set(t,s)},isActive:()=>Po.isOn(t),isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s)}),DP=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),t4=Ht("focus-button"),yT=(t,s,a,l,d,g)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:DP(a,g)},components:_1([t.map(p=>LC(p,g.icons)),s.map(p=>Nx(p,"tox-tbtn",g))]),eventOrder:{[xc()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:ut([Oi.toolbarButton(g.isDisabled),Kr(),So("common-button-display-events",[Xe(xc(),(p,C)=>{C.event.prevent(),es(p,t4)})])].concat(l.map(p=>Ni.config({channel:p,initialData:{icon:t,text:s},renderComponents:(C,k)=>_1([C.icon.map(_=>LC(_,g.icons)),C.text.map(_=>Nx(_,"tox-tbtn",g))])})).toArray()).concat(d.getOr([])))}),rV=(t,s,a,l)=>{const d=s.shared;return rp.sketch({lazySink:d.getSink,fetch:()=>Vc.nu(g=>{g(We(a(t.items),mT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:yT(t.icon,t.text,t.tooltip,O.none(),O.none(),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},RP=(t,s,a)=>{const l=H(oe),d=yT(t.icon,t.text,t.tooltip,O.none(),O.none(),a);return Ll.sketch({dom:d.dom,components:d.components,eventOrder:zA,buttonBehaviours:ut([So("toolbar-button-events",[aN({onAction:t.onAction,getApi:s.getApi}),Ed(s,l),bC(s,l)]),Oi.toolbarButton(()=>!t.enabled||a.isDisabled()),Kr()].concat(s.toolbarButtonBehaviours))})},aV=(t,s)=>MP(t,s,[]),MP=(t,s,a)=>RP(t,{toolbarButtonBehaviours:a.length>0?[So("toolbarButtonWith",a)]:[],getApi:e4,onSetup:t.onSetup},s),cV=(t,s)=>NP(t,s,[]),NP=(t,s,a)=>RP(t,{toolbarButtonBehaviours:[qn.config({}),Po.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[So("toolbarToggleButtonWith",a)]:[]),getApi:sV,onSetup:t.onSetup},s),CT=(t,s,a)=>l=>Vc.nu(d=>s.fetch(d)).map(d=>O.from(fA(Rs(rA(Ht("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,fm.CLOSE_ON_EXECUTE,s.select.getOr(Kt),a),{movement:sx(s.columns,s.presets),menuBehaviours:E1.unnamedEvents(s.columns!=="auto"?[]:[dr((g,p)=>{O_(g,4,PD(s.presets)).each(({numRows:C,numColumns:k})=>{an.setGridSize(g,C,k)})})])})))),lV=(t,s)=>{const a=Ht("channel-update-split-dropdown-display"),l=p=>({isEnabled:()=>!vn.isDisabled(p),setEnabled:C=>vn.set(p,!C),setIconFill:(C,k)=>{Fr(p.element,'svg path[id="'+C+'"], rect[id="'+C+'"]').each(_=>{Rn(_,"fill",k)})},setActive:C=>{Rn(p.element,"aria-pressed",C),Fr(p.element,"span").each(k=>{p.getSystem().getByDom(k).each(_=>Po.set(_,C))})},isActive:()=>Fr(p.element,"span").exists(C=>p.getSystem().getByDom(C).exists(Po.isOn))}),d=H(oe),g={getApi:l,onSetup:t.onSetup};return vT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...DP(t.tooltip,s.providers)}},onExecute:p=>{t.onAction(l(p))},onItemExecute:(p,C,k)=>{},splitDropdownBehaviours:ut([Oi.splitButton(s.providers.isDisabled),Kr(),So("split-dropdown-events",[Xe(t4,Tn.focus),Ed(g,d),bC(g,d)]),Jv.config({})]),eventOrder:{[dd()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:CT(l,t,s.providers),parts:{menu:Fv(!1,t.columns,t.presets)},components:[vT.parts.button(yT(t.icon,t.text,O.none(),O.some(a),O.some([Po.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),vT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Qy("chevron-down",s.providers.icons)},buttonBehaviours:ut([Oi.splitButton(s.providers.isDisabled),Kr(),t_()])}),vT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},wT=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],ap=(t,s)=>(a,l,d)=>{const g=t(a).mapError(p=>Yi(p)).getOrDie();return s(g,l,d)},n4={button:ap(XD,(t,s)=>aV(t,s.shared.providers)),togglebutton:ap(__,(t,s)=>cV(t,s.shared.providers)),menubutton:ap(OB,(t,s)=>tO(t,"tox-tbtn",s,O.none())),splitbutton:ap(x7,(t,s)=>lV(t,s.shared)),grouptoolbarbutton:ap(y7,(t,s,a)=>{const l=a.ui.registry.getAll().buttons,d=p=>QC(a,{buttons:l,toolbar:p,allowToolbarGroups:!1},s,O.none()),g={[oy]:s.shared.header.isPositionedAtTop()?om.TopToBottom:om.BottomToTop};switch(Pv(a)){case Uu.floating:return rV(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},iV=(t,s,a)=>Zt(n4,t.type).fold(()=>(console.error("skipping button defined by",t),O.none()),l=>O.some(l(t,s,a))),BP={styles:AP,fontsize:EP,fontfamily:TP,blocks:wP,align:$H},uV=t=>{const s=We(wT,a=>{const l=ze(a.items,d=>In(t,d)||In(BP,d));return{name:a.name,items:l}});return ze(s,a=>a.items.length>0)},dV=t=>{const s=t.split("|");return We(s,a=>({items:a.trim().split(" ")}))},mV=t=>Ye(t,s=>In(s,"name")&&In(s,"items")),fV=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?uV(a):xt(s)?dV(s):mV(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},ST=(t,s,a,l,d,g)=>Zt(s,a.toLowerCase()).orThunk(()=>g.bind(p=>er(p,C=>Zt(s,C+a.toLowerCase())))).fold(()=>Zt(BP,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),O.none()):iV(p,d,t)),QC=(t,s,a,l)=>{const d=fV(s),g=We(d,p=>{const C=Go(p.items,k=>k.trim().length===0?[]:ST(t,s.buttons,k,s.allowToolbarGroups,a,l).toArray());return{title:O.from(t.translate(p.name)),items:C}});return ze(g,p=>p.items.length>0)},o4=(t,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Ye(g,xt)){const C=g.map(k=>{const _={toolbar:k,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return QC(t,_,l,O.none())});As.setToolbars(d,C)}else As.setToolbar(d,QC(t,a,l,O.none()))},s4=wc(),PP=s4.os.isiOS()&&s4.os.version.major<=12,gV=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=H(Ds(d.innerWidth,d.innerHeight)),C=H(Ds(g.offsetWidth,g.offsetHeight)),k=()=>{const V=p.get();(V.left!==d.innerWidth||V.top!==d.innerHeight)&&(p.set(Ds(d.innerWidth,d.innerHeight)),U_(t))},_=()=>{const V=t.getDoc().documentElement,z=C.get();(z.left!==V.offsetWidth||z.top!==V.offsetHeight)&&(C.set(Ds(V.offsetWidth,V.offsetHeight)),U_(t))},D=V=>{PR(t,V)};l.bind(d,"resize",k),l.bind(d,"scroll",D);const M=Q0(Je.fromDom(t.getBody()),"load",_);t.on("hide",()=>{$(a,V=>{$t(V.element,"display","none")})}),t.on("show",()=>{$(a,V=>{Vn(V.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{M.unbind(),l.unbind(d,"resize",k),l.unbind(d,"scroll",D),d=null})},$P=(t,s)=>{nu(t,s.dialogUi.mothership)};var hV=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=s,C=H(0),k=g.outerContainer;hP(t);const _=Je.fromDom(d.targetNode),D=or(fo(_));yy(_,g.mothership),$P(D,s),t.on("PostRender",()=>{As.setSidebar(k,a.sidebar,MS(t)),o4(t,s,a,l),C.set(t.getWin().innerWidth),As.setMenubar(k,dP(t,a)),As.setViews(k,a.views),gV(t,s)});const M=As.getSocket(k).getOrDie("Could not find expected socket element");if(PP){yr(M.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const se=KA(()=>{t.dispatch("ScrollContent")},20),ke=Lc(M.element,"scroll",se.throttle);t.on("remove",ke.unbind)}D_(t,s),t.addCommand("ToggleSidebar",(se,ke)=>{As.toggleSidebar(k,ke),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var se;return(se=As.whichSidebar(k))!==null&&se!==void 0?se:""}),t.addCommand("ToggleView",(se,ke)=>{if(As.toggleView(k,ke)){const fe=k.element;g.mothership.broadcastOn([Cd()],{target:fe}),$(p,Ee=>{Ee.broadcastOn([Cd()],{target:fe})}),Xo(As.whichView(k))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var se;return(se=As.whichView(k))!==null&&se!==void 0?se:""});const V=Pv(t),z=()=>{As.refreshToolbar(s.mainUi.outerContainer)};(V===Uu.sliding||V===Uu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const se=t.getWin().innerWidth;se!==C.get()&&(z(),C.set(se))});const Q={setEnabled:se=>{JS(s,!se)},isEnabled:()=>!vn.isDisabled(k)};return{iframeContainer:M.element.dom,editorContainer:k.element.dom,api:Q}}});const r4=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),a4=t=>_n(t)?t+"px":t,xT=(t,s,a)=>{const l=s.filter(g=>t<g),d=a.filter(g=>t>g);return l.or(d).getOr(t)},pV=t=>{const s=ES(t),a=oC(t),l=r_(t);return r4(s).map(d=>xT(d,a,l))},bV=t=>pV(t).getOr(ES(t)),c4=t=>{const s=_S(t),a=s_(t),l=AS(t);return r4(s).map(d=>xT(d,a,l))},vV=t=>c4(t).getOr(_S(t)),{ToolbarLocation:l4,ToolbarMode:IP}=iI,yV=(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=a,C=eC.DOM,k=lC(t),_=uC(t),D=AS(t).or(c4(t)),M=l.shared.header,V=M.isPositionedAtTop,z=Pv(t),Q=z===IP.sliding||z===IP.floating,se=H(!1),ke=()=>se.get()&&!t.removed,fe=Oo=>Q?Oo.fold(te(0),tn=>tn.components().length>1?rr(tn.components()[1].element):0):0,Ee=Oo=>{switch(c_(t)){case l4.auto:const tn=As.getToolbar(g.outerContainer),ro=fe(tn),Vo=rr(Oo.element)-ro,To=ho(s);if(To.y>Vo)return"top";{const Ot=kl(s),Bn=Math.max(Ot.dom.scrollHeight,rr(Ot));return To.bottom<Bn-Vo||Oa().bottom<To.bottom-Vo?"bottom":"top"}case l4.bottom:return"bottom";case l4.top:default:return"top"}},ht=Oo=>{d.on(tn=>{Qc.setModes(tn,[Oo]),M.setDockingMode(Oo);const ro=V()?om.TopToBottom:om.BottomToTop;Rn(tn.element,oy,ro)})},Ae=()=>{d.on(Oo=>{const tn=D.getOrThunk(()=>{const ro=r4(Ge(zr(),"margin-left")).getOr(0);return ar(zr())-Cr(s).left+ro});$t(Oo.element,"max-width",tn+"px")})},Ct=()=>{d.on(Oo=>{const tn=As.getToolbar(g.outerContainer),ro=fe(tn),Vo=ho(s),To=V()?Math.max(Vo.y-rr(Oo.element)+ro,0):Vo.bottom;yr(g.outerContainer.element,{position:"absolute",top:Math.round(To)+"px",left:Math.round(Vo.x)+"px"})})},Lt=()=>{$(p,Oo=>{Oo.broadcastOn([df()],{})})},Dt=(Oo=!1)=>{if(ke()){if(k||Ae(),Q&&As.refreshToolbar(g.outerContainer),k||Ct(),_){const tn=Oo?Qc.reset:Qc.refresh;d.on(tn)}Lt()}},dn=(Oo=!0)=>{k||!_||!ke()||d.on(tn=>{const ro=M.getDockingMode(),Vo=Ee(tn);Vo!==ro&&(ht(Vo),Oo&&Dt(!0))})};return{isVisible:ke,isPositionedAtTop:V,show:()=>{se.set(!0),$t(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),$(p,Oo=>{Vn(Oo.element,"display")}),dn(!1),Dt()},hide:()=>{se.set(!1),$t(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),$(p,Oo=>{$t(Oo.element,"display","none")})},update:Dt,updateMode:dn,repositionPopups:Lt}},LP=(t,s)=>{const a=ho(t);return{pos:s?a.y:a.bottom,bounds:a}},d0=(t,s,a,l)=>{const d=H(LP(s,a.isPositionedAtTop())),g=C=>{const{pos:k,bounds:_}=LP(s,a.isPositionedAtTop()),{pos:D,bounds:M}=d.get(),V=_.height!==M.height||_.width!==M.width;d.set({pos:k,bounds:_}),V&&U_(t,C),a.isVisible()&&(D!==k?a.update(!0):V&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(!0)),t.on("NodeChange keydown",C=>{requestAnimationFrame(()=>g(C))}),t.on("ScrollWindow",()=>a.updateMode());const p=rg();p.set(Q0(Je.fromDom(t.getBody()),"load",C=>g(C.raw))),t.on("remove",()=>{p.clear()})},i4=(t,s)=>{nu(t,s.dialogUi.mothership)};var CV=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>{const{mainUi:g}=s,p=mr(),C=Je.fromDom(d.targetNode),k=yV(t,C,s,l,p),_=hD(t);NH(t);const D=()=>{if(p.isSet()){k.show();return}p.set(As.getHeader(g.outerContainer).getOrDie());const V=iC(t);nu(V,g.mothership),i4(V,s),o4(t,s,a,l),As.setMenubar(g.outerContainer,dP(t,a)),k.show(),d0(t,C,k,_),t.nodeChanged()};t.on("show",D),t.on("hide",k.hide),_||(t.on("focus",D),t.on("blur",k.hide)),t.on("init",()=>{(t.hasFocus()||_)&&D()}),D_(t,s);const M={show:D,hide:k.hide,setEnabled:V=>{JS(s,!V)},isEnabled:()=>!vn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:M}}});const FP=()=>{const t=mr(),s=mr(),a=mr();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>[...t.get().map(g=>g.mothership).toArray()],setupDialogUi:g=>{t.set(g)},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(C=>p(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},u4="contexttoolbar-show",d4="contexttoolbar-hide",HP=t=>({hide:()=>es(t,Sp()),getValue:()=>yt.getValue(t)}),VP=(t,s)=>Xe(rN,(a,l)=>{const d=t.get(a),g=HP(d);s.onAction(g,l.event.buttonApi)}),m0=(t,s,a)=>{const{primary:l,...d}=s.original,g=Ki(XD({...d,type:"button",onAction:oe}));return MP(g,a,[VP(t,s)])},TT=(t,s,a)=>{const{primary:l,...d}=s.original,g=Ki(__({...d,type:"togglebutton",onAction:oe}));return NP(g,a,[VP(t,s)])},m4=t=>t.type==="contextformtogglebutton",zP=(t,s,a)=>m4(s)?TT(t,s,a):m0(t,s,a),UP=(t,s,a)=>{const l=We(s,p=>Vs(zP(t,p,a)));return{asSpecs:()=>We(l,p=>p.asSpec()),findPrimary:p=>er(s,(C,k)=>C.primary?O.from(l[k]).bind(_=>_.getOpt(p)).filter(ge(vn.isDisabled)):O.none())}},f4=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=Vs(Hv.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ut([an.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(Zd(p),!0)),onLeft:(g,p)=>(p.cut(),O.none()),onRight:(g,p)=>(p.cut(),O.none())})])})),d=UP(l,t.commands,s);return[{title:O.none(),items:[l.asSpec()]},{title:O.none(),items:d.asSpecs()}]},wV={renderContextForm:(t,s,a)=>fT({type:t,uid:Ht("context-toolbar"),initGroups:f4(s,a),onEscape:O.none,cyclicKeying:!0,providers:a}),buildInitGroups:f4},WP=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,SV=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=he(Je.fromDom(t.startContainer),t.startOffset).element;return(fa(a)?ea(a):O.some(a)).filter(Os).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},g4=t=>{const s=t.selection.getRng(),a=SV(s);if(t.inline){const l=Al();return Yt(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=qs(Je.fromDom(t.getBody()));return Yt(l.x+a.left,l.y+a.top,a.width,a.height)}},ZP=(t,s)=>s.filter(a=>Br(a)&&za(a)).map(qs).getOrThunk(()=>g4(t)),kT=(t,s,a)=>{const l=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:l,width:d-l}},jP=(t,s,a,l,d,g)=>{const p=Je.fromDom(t.getContainer()),C=Fr(p,".tox-editor-header").getOr(p),k=ho(C),_=k.y>=s.bottom,D=l&&!_;if(t.inline&&D)return{y:Math.max(k.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(k.y-g,a.bottom)};const M=d==="line"?ho(p):s;return D?{y:Math.max(k.bottom+g,a.y),bottom:Math.min(M.bottom-g,a.bottom)}:{y:Math.max(M.y+g,a.y),bottom:Math.min(k.y-g,a.bottom)}},h4=(t,s,a,l=0)=>{const d=Zl(window),g=ho(Je.fromDom(t.getContentAreaContainer())),p=BS(t)||Iv(t)||cC(t),{x:C,width:k}=kT(g,d,l);if(t.inline&&!p)return Yt(C,d.y,k,d.height);{const _=s.header.isPositionedAtTop(),{y:D,bottom:M}=jP(t,g,d,_,a,l);return Yt(C,D,k,M-D)}},f0=12,GP={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},p4={maxHeightFunction:Zp(),maxWidthFunction:dT()},xV=(t,s)=>{const a=t.selection.getRng(),l=he(Je.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&ns(l.element,s)},TV=(t,s,a)=>{const l=Ss(t,"position");$t(t,"position",s);const d=a(t);return l.each(g=>$t(t,"position",g)),d},e2=t=>t==="node",qP=(t,s,a,l,d)=>{const g=g4(t),p=l.lastElement().exists(C=>ns(a,C));if(xV(t,a))return p?ZN:vm;if(p)return TV(s,l.getMode(),()=>WP(g,ho(s),-20)&&!l.isReposition()?S8:ZN);{const C=l.getMode()==="fixed"?d.y+Al().top:d.y,k=rr(s)+f0;return C+k<=g.y?vm:V1}},kV=(t,s,a,l)=>{const d=k=>(_,D,M,V,z)=>{const Q=qP(t,V,k,a,z),se={..._,y:z.y,height:z.height};return{...Q(se,D,M,V,z),alwaysFit:!0}},g=k=>e2(l)?[d(k)]:[];return s?{onLtr:k=>[Ca,ic,uc,Ic,Ec,Nl].concat(g(k)),onRtl:k=>[Ca,uc,ic,Ec,Ic,Nl].concat(g(k))}:{onLtr:k=>[Nl,Ca,Ic,ic,Ec,uc].concat(g(k)),onRtl:k=>[Nl,Ca,Ec,uc,Ic,ic].concat(g(k))}},EV=(t,s,a,l)=>s==="line"?{bubble:ag(f0,0,GP),layouts:{onLtr:()=>[Lb],onRtl:()=>[Fb]},overrides:p4}:{bubble:ag(0,f0,GP,1/f0),layouts:kV(t,a,l,s),overrides:p4},b4=(t,s)=>{const a=ze(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=nt(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},_V=t=>{if(t.length<=1)return t;{const s=g=>oo(t,p=>p.position===g),a=g=>ze(t,p=>p.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),p=We(a("selection"),C=>({...C,position:"node"}));return g.concat(p)}else return a(l?"selection":"node");else return a("line")}},AV=t=>{if(t.length<=1)return t;{const s=l=>zt(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>ze(t,d=>d.position===l))}},KP=(t,s,a)=>{const l=b4(t,s);if(l.contextForms.length>0)return O.some({elem:t,toolbars:[l.contextForms[0]]});{const d=b4(t,a);if(d.contextForms.length>0)return O.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=_V(l.contextToolbars.concat(d.contextToolbars));return O.some({elem:t,toolbars:g})}else return O.none()}},YP=(t,s,a)=>t(s)?O.none():sh(s,l=>{if(Os(l)){const{contextToolbars:d,contextForms:g}=b4(l,a.inNodeScope),p=g.length>0?g:AV(d);return p.length>0?O.some({elem:l,toolbars:p}):O.none()}else return O.none()},t),OV=(t,s)=>{const a=Je.fromDom(s.getBody()),l=p=>ns(p,a),d=p=>!l(p)&&!Tl(a,p),g=Je.fromDom(s.selection.getNode());return d(g)?O.none():KP(g,t.inNodeScope,t.inEditorScope).orThunk(()=>YP(l,g,t))},DV=(t,s)=>{const a={},l=[],d=[],g={},p={},C=(D,M)=>{const V=Ki(NI(M));a[D]=V,V.launch.map(z=>{g["form:"+D]={...M.launch,type:z.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(V)}}}),V.scope==="editor"?d.push(V):l.push(V),p[D]=V},k=(D,M)=>{pC(M).each(V=>{M.scope==="editor"?d.push(V):l.push(V),p[D]=V})},_=yn(t);return $(_,D=>{const M=t[D];M.type==="contextform"?C(D,M):M.type==="contexttoolbar"&&k(D,M)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:p,formNavigators:g}},v4=Ht("forward-slide"),XP=Ht("backward-slide"),y4=Ht("change-slide-event"),C4="tox-pop--resizing",RV=t=>{const s=H([]);return Tr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Tr.getContent(a).each(l=>{Vn(l.element,"visibility")}),Lr(a.element,C4),Vn(a.element,"width")},inlineBehaviours:ut([So("context-toolbar-events",[Na(zd(),(a,l)=>{l.event.raw.propertyName==="width"&&(Lr(a.element,C4),Vn(a.element,"width"))}),Xe(y4,(a,l)=>{const d=a.element;Vn(d,"width");const g=ar(d);Tr.setContent(a,l.event.contents),Gr(d,C4);const p=ar(d);$t(d,"width",g+"px"),Tr.getContent(a).each(C=>{l.event.focus.bind(k=>(nm(k),xi(d))).orThunk(()=>(an.focusIn(C),Bl(fo(d))))}),setTimeout(()=>{$t(a.element,"width",p+"px")},0)}),Xe(v4,(a,l)=>{Tr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Bl(fo(a.element))}]))}),mn(a,y4,{contents:l.event.forwardContents,focus:O.none()})}),Xe(XP,(a,l)=>{br(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),mn(a,y4,{contents:ni(d.bar),focus:d.focus})})})]),an.config({mode:"special",onEscape:a=>br(s.get()).fold(()=>t.onEscape(),l=>(es(a,XP),O.some(!0)))})]),lazySink:()=>Pn.value(t.sink)})},w4="tox-pop--transition",S4=(t,s,a,l)=>{const d=l.backstage,g=d.shared,p=wc().deviceType.isTouch,C=mr(),k=mr(),_=mr(),D=Yc(RV({sink:a,onEscape:()=>(t.focus(),O.some(!0))})),M=()=>{const fn=_.get().getOr("node"),Qn=e2(fn)?1:0;return h4(t,g,fn,Qn)},V=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),z=fn=>Qr(us(fn,C.get(),ns),!0),Q=()=>{if(V()){const fn=M(),Qn=Qr(_.get(),"node")?ZP(t,C.get()):g4(t);return fn.height<=0||!WP(Qn,fn,.01)}else return!0},se=()=>{C.clear(),k.clear(),_.clear(),Tr.hide(D)},ke=()=>{if(Tr.isOpen(D)){const fn=D.element;Vn(fn,"display"),Q()?$t(fn,"display","none"):(k.set(0),Tr.reposition(D))}},fe=fn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[fn],behaviours:ut([an.config({mode:"acyclic"}),So("pop-dialog-wrap-events",[dr(Qn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>an.focusIn(Qn))}),Ci(Qn=>{t.shortcuts.remove("ctrl+F9")})])])}),Ee=hr(()=>DV(s,fn=>{const Qn=Ct([fn]);mn(D,v4,{forwardContents:fe(Qn)})})),ht=(fn,Qn)=>QC(t,{buttons:fn,toolbar:Qn.items,allowToolbarGroups:!1},l.backstage,O.some(["form:"])),Ae=(fn,Qn)=>wV.buildInitGroups(fn,Qn),Ct=fn=>{const{buttons:Qn}=t.ui.registry.getAll(),Oo=Ee(),tn={...Qn,...Oo.formNavigators},ro=Pv(t)===Uu.scrolling?Uu.scrolling:Uu.default,Vo=Be(We(fn,To=>To.type==="contexttoolbar"?ht(tn,To):Ae(To,g.providers)));return fT({type:ro,uid:Ht("context-toolbar"),initGroups:Vo,onEscape:O.none,cyclicKeying:!0,providers:g.providers})},Lt=(fn,Qn)=>{const Oo=fn==="node"?g.anchors.node(Qn):g.anchors.cursor(),tn=EV(t,fn,p(),{lastElement:C.get,isReposition:()=>Qr(k.get(),0),getMode:()=>Fc.getMode(a)});return Rs(Oo,tn)},Dt=(fn,Qn)=>{if(dn.cancel(),!V())return;const Oo=Ct(fn),tn=fn[0].position,ro=Lt(tn,Qn);_.set(tn),k.set(1);const Vo=D.element;Vn(Vo,"display"),z(Qn)||(Lr(Vo,w4),Fc.reset(a,D)),Tr.showWithinBounds(D,fe(Oo),{anchor:ro,transition:{classes:[w4],mode:"placement"}},()=>O.some(M())),Qn.fold(C.clear,C.set),Q()&&$t(Vo,"display","none")},dn=CN(()=>{if(!(!t.hasFocus()||t.removed))if(Rl(D.element,w4))dn.throttle();else{const fn=Ee();OV(fn,t).fold(se,Qn=>{Dt(Qn.toolbars,O.some(Qn.elem))})}},17);t.on("init",()=>{t.on("remove",se),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ke),t.on("click keyup focus SetContent",dn.throttle),t.on(d4,se),t.on(u4,fn=>{const Qn=Ee();Zt(Qn.lookupTable,fn.toolbarKey).each(Oo=>{Dt([Oo],fr(fn.target!==t,fn.target)),Tr.getContent(D).each(an.focusIn)})}),t.on("focusout",fn=>{Mv.setEditorTimeout(t,()=>{xi(a.element).isNone()&&xi(D.element).isNone()&&se()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&se()}),t.on("AfterProgressState",fn=>{fn.state?se():t.hasFocus()&&dn.throttle()}),t.on("NodeChange",fn=>{xi(D.element).fold(dn.throttle,oe)})})},MV=t=>{$([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Ku(t,a.cmd),onSetup:pT(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Ku(t,"JustifyNone")})},NV={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},x4=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",d=C=>`(?:${C})?`,p=`[+-]?(?:${["Infinity",t+l+d(t)+d(a),l+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),JP=(t,s)=>oo(s,a=>oo(NV[a],l=>t===l)),QP=(t,s)=>O.from(x4.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return JP(g,s)?O.some({value:d,unit:g}):O.none()}),BV=(t,s)=>QP(t,s).map(({value:a,unit:l})=>a+l),e$=(t,s)=>{const a=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=mr();return We(l,p=>({type:"togglemenuitem",text:s.display(p),onSetup:C=>{const k=D=>{D&&(g.on(M=>M.setActive(!1)),g.set(C)),C.setActive(D)};k(Qr(d,s.hash(p)));const _=s.watcher(t,p,k);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},PV={name:"lineheight",text:"Line height",icon:"line-height",getOptions:kD,hash:t=>BV(t,["fixed","relative","empty"]).getOr(t),display:cn,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>O.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},$V=t=>O.from(a_(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:te(a),hash:l=>Bt(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var p;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:l=>{const d=Je.fromDom(l.selection.getNode());return ud(d,g=>O.some(g).filter(Os).bind(p=>B(p,"lang").map(k=>{const _=B(p,"data-mce-lang").getOrUndefined();return{code:k,customCode:_,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=rg();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),d.clear}})),IV=t=>{e$(t,PV),$V(t).each(s=>e$(t,s))},t$=(t,s)=>{IH(t,s),VH(t,s),qH(t,s),LH(t,s),GH(t,s)},LV=t=>YC(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),n$=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:LV(t),onAction:Ku(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Ku(t,"indent")})},FV=t=>{n$(t)},o$=(t,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",l),()=>t.off("PastePlainTextToggle",l)},T4=t=>{const s=H(u_(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:o$(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:o$(t,s)})},ET=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},s$=t=>{ui.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:pT(t,s.name),onAction:ET(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:pT(t,a),onAction:ET(t,a)})}},k4=t=>{ui.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ku(t,s.action)})})},HV=t=>{ui.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ku(t,s.action),onSetup:pT(t,s.name)})})},VV=t=>{s$(t),k4(t),HV(t)},zV=t=>{ui.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Ku(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:ET(t,"code")})},UV=t=>{VV(t),zV(t)},t2=(t,s)=>YC(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),WV=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:t2(t,"hasUndo"),onAction:Ku(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:t2(t,"hasRedo"),onAction:Ku(t,"redo")})},ZV=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:t2(t,"hasUndo"),onAction:Ku(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:t2(t,"hasRedo"),onAction:Ku(t,"redo")})},jV=t=>{WV(t),ZV(t)},GV=t=>YC(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),qV=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:GV(t),onAction:Ku(t,"mceToggleVisualAid")})},KV=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ku(t,"mceToggleVisualAid")})},YV=t=>{KV(t),qV(t)},XV=(t,s)=>{MV(t),UV(t),t$(t,s),jV(t),bL(t),YV(t),FV(t),IV(t),T4(t)},r$=t=>xt(t)?t.split(/[ ,]/):t,a$=t=>s=>s.options.get(t),c$=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:xt(a)||Ye(a,xt)?{value:r$(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},l$=a$("contextmenu_never_use_native"),JV=a$("contextmenu_avoid_overlap"),QV=t=>cp(t).length===0,cp=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:ze(a,l=>In(s,l))},g0=(t,s)=>({type:"makeshift",x:t,y:s}),ez=(t,s,a)=>g0(t.x+s,t.y+a),i$=t=>t.type==="longpress"||t.type.indexOf("touch")===0,tz=t=>{if(i$(t)){const s=t.touches[0];return g0(s.pageX,s.pageY)}else return g0(t.pageX,t.pageY)},nz=t=>{if(i$(t)){const s=t.touches[0];return g0(s.clientX,s.clientY)}else return g0(t.clientX,t.clientY)},u$=(t,s)=>{const a=eC.DOM.getPos(t);return ez(s,a.x,a.y)},oz=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?tz(s):u$(t.getContentAreaContainer(),nz(s)):d$(t),d$=t=>({type:"selection",root:Je.fromDom(t.selection.getNode())}),sz=t=>({type:"node",node:O.some(Je.fromDom(t.selection.getNode())),root:Je.fromDom(t.getBody())}),m$=(t,s,a)=>{switch(a){case"node":return sz(t);case"point":return oz(t,s);case"selection":return d$(t)}},rz=(t,s,a,l,d,g)=>{const p=a(),C=m$(t,s,g);L1(p,fm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:O.none()}).map(k=>{s.preventDefault(),Tr.showMenuAt(d,{anchor:C},{menu:{markers:w1("normal")},data:k})})},az={onLtr:()=>[Ca,ic,uc,Ic,Ec,Nl,vm,V1,VC,Zx,HC,FC],onRtl:()=>[Ca,uc,ic,Ec,Ic,Nl,vm,V1,HC,FC,VC,Zx]},cz=12,lz={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},f$=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return nv(t.getWin(),rm.domRange(d)).exists(p=>p.left<=l.clientX&&p.right>=l.clientX&&p.top<=l.clientY&&p.bottom>=l.clientY)}},g$=t=>{const s=t.selection.getRng(),a=()=>{Mv.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const l=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",l)}},iz=(t,s,a)=>{const l=m$(t,s,a);return{bubble:ag(0,a==="point"?cz:0,lz),layouts:az,overrides:{maxWidthFunction:dT(),maxHeightFunction:Zp()},...l}},n2=(t,s,a,l,d,g,p)=>{const C=iz(t,s,g);L1(a,fm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:O.none()}).map(k=>{s.preventDefault();const _=p?Dr.HighlightMenuAndItem:Dr.HighlightNone;Tr.showMenuWithinBounds(d,{anchor:C},{menu:{markers:w1("normal"),highlightOnOpen:_},data:k,type:"horizontal"},()=>O.some(h4(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(d4)})},uz=(t,s,a,l,d,g)=>{const p=wc(),C=p.os.isiOS(),k=p.os.isMacOS(),_=p.os.isAndroid(),D=p.deviceType.isTouch(),M=()=>!(_||C||k&&D),V=()=>{const z=a();n2(t,s,z,l,d,g,M())};if((k||C)&&g!=="node"){const z=()=>{g$(t),V()};f$(t,s)?z():(t.once("selectionchange",z),t.once("touchend",()=>t.off("selectionchange",z)))}else V()},h$=t=>xt(t)?t==="|":t.type==="separator",o2={type:"separator"},p$=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(xt(t))return t;switch(t.type){case"separator":return o2;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return xt(l)?l:We(l,p$)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Pt(a.onAction)}}},b$=(t,s)=>{if(s.length===0)return t;const l=br(t).filter(d=>!h$(d)).fold(()=>[],d=>[o2]);return t.concat(l).concat(s).concat([o2])},dz=(t,s,a)=>{const l=Wt(s,(d,g)=>Zt(t,g.toLowerCase()).map(p=>{const C=p.update(a);if(xt(C))return b$(d,C.split(" "));if(C.length>0){const k=We(C,p$);return b$(d,k)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&h$(l[l.length-1])&&l.pop(),l},mz=(t,s)=>s.ctrlKey&&!l$(t),fz=t=>t.type==="longpress"||In(t,"touches"),v$=(t,s)=>!fz(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),y$=(t,s)=>v$(t,s)?t.selection.getStart(!0):s.target,gz=(t,s)=>{const a=JV(t),l=v$(t,s)?"selection":"point";if($e(a)){const d=y$(t,s);return TC(Je.fromDom(d),a)?"node":l}else return l},hz=(t,s,a)=>{const d=wc().deviceType.isTouch,g=Yc(Tr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:ut([So("dismissContextMenu",[Xe(Wd(),(k,_)=>{wo.close(k),t.focus()})])])})),p=()=>Tr.hide(g),C=k=>{if(l$(t)&&k.preventDefault(),mz(t,k)||QV(t))return;const _=gz(t,k),D=()=>{const V=y$(t,k),z=t.ui.registry.getAll(),Q=cp(t);return dz(z.contextMenus,Q,V)};(d()?uz:rz)(t,k,D,a,g,_)};t.on("init",()=>{const k="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(k,p),t.on("longpress contextmenu",C)})},E4=Re.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),_T=t=>s=>s.translate(-t.left,-t.top),AT=t=>s=>s.translate(t.left,t.top),Bg=t=>(s,a)=>Wt(t,(l,d)=>d(l),Ds(s,a)),OT=(t,s,a)=>t.fold(Bg([AT(a),_T(s)]),Bg([_T(s)]),Bg([])),h0=(t,s,a)=>t.fold(Bg([AT(a)]),Bg([]),Bg([AT(s)])),C$=(t,s,a)=>t.fold(Bg([]),Bg([_T(a)]),Bg([AT(s),_T(a)])),pz=(t,s,a,l,d,g)=>{const p=h0(t,d,g),C=h0(s,d,g);return Math.abs(p.left-C.left)<=a&&Math.abs(p.top-C.top)<=l},DT=(t,s,a,l,d,g)=>{const p=h0(t,d,g),C=h0(s,d,g),k=Math.abs(p.left-C.left),_=Math.abs(p.top-C.top);return Ds(k,_)},w$=(t,s,a)=>{const l=t.fold((d,g)=>({position:O.some("absolute"),left:O.some(d+"px"),top:O.some(g+"px")}),(d,g)=>({position:O.some("absolute"),left:O.some(d-a.left+"px"),top:O.some(g-a.top+"px")}),(d,g)=>({position:O.some("fixed"),left:O.some(d+"px"),top:O.some(g+"px")}));return{right:O.none(),bottom:O.none(),...l}},bz=(t,s,a)=>t.fold((l,d)=>RT(l+s,d+a),(l,d)=>lp(l+s,d+a),(l,d)=>j1(l+s,d+a)),_4=(t,s,a,l)=>{const d=(g,p)=>(C,k)=>{const _=g(s,a,l);return p(C.getOr(_.left),k.getOr(_.top))};return t.fold(d(C$,RT),d(h0,lp),d(OT,j1))},RT=E4.offset,lp=E4.absolute,j1=E4.fixed,A4=(t,s)=>{const a=Ls(t,s);return Bt(a)?NaN:parseInt(a,10)},vz=(t,s)=>{const a=t.element,l=A4(a,s.leftAttr),d=A4(a,s.topAttr);return isNaN(l)||isNaN(d)?O.none():O.some(Ds(l,d))},yz=(t,s,a)=>{const l=t.element;Rn(l,s.leftAttr,a.left+"px"),Rn(l,s.topAttr,a.top+"px")},Cz=(t,s)=>{const a=t.element;ne(a,s.leftAttr),ne(a,s.topAttr)},wz=(t,s,a,l)=>vz(t,s).fold(()=>a,d=>j1(d.left+l.left,d.top+l.top)),Sz=(t,s,a,l,d,g)=>{const p=wz(t,s,a,l),C=s.mustSnap?xz(t,s,p,d,g):Tz(t,s,p,d,g),k=OT(p,d,g);return yz(t,s,k),C.fold(()=>({coord:j1(k.left,k.top),extra:O.none()}),_=>({coord:_.output,extra:_.extra}))},O4=(t,s)=>{Cz(t,s)},D4=(t,s,a,l)=>er(t,d=>{const g=d.sensor;return pz(s,g,d.range.left,d.range.top,a,l)?O.some({output:_4(d.output,s,a,l),extra:d.extra}):O.none()}),xz=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return D4(g,a,l,d).orThunk(()=>Wt(g,(k,_)=>{const D=_.sensor,M=DT(a,D,_.range.left,_.range.top,l,d);return k.deltas.fold(()=>({deltas:O.some(M),snap:O.some(_)}),V=>{const z=(M.left+M.top)/2,Q=(V.left+V.top)/2;return z<=Q?{deltas:O.some(M),snap:O.some(_)}:k})},{deltas:O.none(),snap:O.none()}).snap.map(k=>({output:_4(k.output,a,l,d),extra:k.extra})))},Tz=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return D4(g,a,l,d)},kz=(t,s,a)=>({coord:_4(t.output,t.output,s,a),extra:t.extra});var Ez=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ga(t.element),p=Al(g),C=CO(d),k=kz(l,p,C),_=w$(k.coord,p,C);Gs(d,_)}}});const R4="data-initial-z-index",_z=t=>{ea(t.element).filter(Os).each(s=>{B(s,R4).fold(()=>Vn(s,"z-index"),a=>$t(s,"z-index",a)),ne(s,R4)})},Az=t=>{ea(t.element).filter(Os).each(s=>{Ss(s,"z-index").each(a=>{Rn(s,R4,a)}),$t(s,"z-index",Ge(t.element,"z-index"))})},S$=(t,s)=>{t.getSystem().addToGui(s),Az(s)},Oz=t=>{_z(t),t.getSystem().removeFromGui(t)},x$=(t,s,a)=>t.getSystem().build(pm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var Dz=Gc("snaps",[Ze("getSnapPoints"),Co("onSensor"),Ze("leftAttr"),Ze("topAttr"),Ce("lazyViewport",Oa),Ce("mustSnap",!1)]);const M4=[Ce("useFixed",Kt),Ze("blockerClass"),Ce("getTarget",cn),Ce("onDrag",oe),Ce("repositionTarget",!0),Ce("onDrop",oe),sa("getBounds",Oa),Dz],Rz=t=>No(Ss(t,"left"),Ss(t,"top"),Ss(t,"position"),(s,a,l)=>(l==="fixed"?j1:RT)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Cr(t);return lp(s.left,s.top)}),Mz=(t,s,a,l,d)=>{const g=d.bounds,p=h0(s,a,l),C=oi(p.left,g.x,g.x+g.width-d.width),k=oi(p.top,g.y,g.y+g.height-d.height),_=lp(C,k);return s.fold(()=>{const D=C$(_,a,l);return RT(D.left,D.top)},te(_),()=>{const D=OT(_,a,l);return j1(D.left,D.top)})},Nz=(t,s,a,l,d,g,p)=>{const C=s.fold(()=>{const k=bz(a,g.left,g.top),_=OT(k,l,d);return j1(_.left,_.top)},k=>{const _=Sz(t,k,a,g,l,d);return _.extra.each(D=>{k.onSensor(t,D)}),_.coord});return Mz(t,C,l,d,p)},Bz=(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ga(t.element),p=Al(g),C=CO(d),k=Rz(d),_=Nz(t,s.snaps,k,p,C,l,a),D=w$(_,p,C);Gs(d,D)}s.onDrag(t,d,l)},T$=(t,s)=>({bounds:t.getBounds(),height:Hi(s.element),width:wr(s.element)}),N4=(t,s,a,l,d)=>{const g=a.update(l,d),p=a.getStartData().getOrThunk(()=>T$(s,t));g.each(C=>{Bz(t,s,p,C)})},k$=(t,s,a,l)=>{s.each(Oz),a.snaps.each(g=>{O4(t,g)});const d=a.getTarget(t.element);l.reset(),a.onDrop(t,d)},B4=t=>(s,a)=>{const l=d=>{a.setStartData(T$(s,d))};return Es([Xe(gb(),d=>{a.getStartData().each(()=>l(d))}),...t(s,a,l)])},E$=t=>Es([Xe(xc(),t.forceDrop),Xe(vp(),t.drop),Xe(ml(),(s,a)=>{t.move(a.event)}),Xe(Ou(),t.delayDrop)]);var $z=Object.freeze({__proto__:null,getData:t=>O.from(Ds(t.x,t.y)),getDelta:(t,s)=>Ds(s.left-t.left,s.top-t.top)});const MT=(t,s,a)=>[Xe(xc(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>k$(l,O.some(_),t,s),C=oM(p,200),k={drop:p,delayDrop:C.schedule,forceDrop:p,move:M=>{C.cancel(),N4(l,t,s,$z,M)}},_=x$(l,t.blockerClass,E$(k));(()=>{a(l),S$(l,_)})()})],NT=[...M4,Ns("dragger",{handlers:B4(MT)})],Iz=t=>Es([Xe(ys(),t.forceDrop),Xe(Sc(),t.drop),Xe(yi(),t.drop),Xe(va(),(s,a)=>{t.move(a.event)})]),Lz=t=>{const s=t[0];return O.some(Ds(s.clientX,s.clientY))};var _$=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?Lz(a):O.none()},getDelta:(t,s)=>Ds(s.left-t.left,s.top-t.top)});const ip=(t,s,a)=>{const l=mr(),d=g=>{k$(g,l.get(),t,s),l.clear()};return[Xe(ys(),(g,p)=>{p.stop();const C=()=>d(g),k={drop:C,delayDrop:oe,forceDrop:C,move:M=>{N4(g,t,s,_$,M)}},_=x$(g,t.blockerClass,Iz(k));l.set(_),(()=>{a(g),S$(g,_)})()}),Xe(va(),(g,p)=>{p.stop(),N4(g,t,s,_$,p.event)}),Xe(Sc(),(g,p)=>{p.stop(),d(g)}),Xe(yi(),d)]},A$=[...M4,Ns("dragger",{handlers:B4(ip)})],Fz=(t,s,a)=>[...MT(t,s,a),...ip(t,s,a)],Hz=[...M4,Ns("dragger",{handlers:B4(Fz)})];var Vz=Object.freeze({__proto__:null,mouse:NT,touch:A$,mouseOrTouch:Hz}),zz=Object.freeze({__proto__:null,init:()=>{let t=O.none(),s=O.none();const a=()=>{t=O.none(),s=O.none()},l=(k,_)=>{const D=t.map(M=>k.getDelta(M,_));return t=O.some(_),D},d=(k,_)=>k.getData(_).bind(D=>l(k,D)),g=k=>{s=O.some(k)},p=()=>s,C=te({});return fl({readState:C,reset:a,update:d,getStartData:p,setStartData:g})}});const Pg=Z0({branchKey:"mode",branches:Vz,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:zz,apis:Ez}),G1=40,b0=G1/2,s2=(t,s,a,l,d,g)=>t.fold(()=>Pg.snap({sensor:lp(a-b0,l-b0),range:Ds(d,g),output:lp(O.some(a),O.some(l)),extra:{td:s}}),p=>{const C=a-b0,k=l-b0,_=G1,D=G1,M=p.element.dom.getBoundingClientRect();return Pg.snap({sensor:lp(C,k),range:Ds(_,D),output:lp(O.some(a-M.width/2),O.some(l-M.height/2)),extra:{td:s}})}),up=(t,s,a)=>{const l=(d,g)=>d.exists(p=>ns(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;l(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},r2=t=>Vs(Ll.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ut([Pg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Jv.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Uz=(t,s)=>{const a=H([]),l=H([]),d=H(!1),g=mr(),p=mr(),C=Dt=>{const dn=qs(Dt);return s2(z.getOpt(s),Dt,dn.x,dn.y,dn.width,dn.height)},k=()=>We(a.get(),Dt=>C(Dt)),_=Dt=>{const dn=qs(Dt);return s2(Q.getOpt(s),Dt,dn.right,dn.bottom,dn.width,dn.height)},D=()=>We(l.get(),Dt=>_(Dt)),M=up(k,g,Dt=>{p.get().each(dn=>{t.dispatch("TableSelectorChange",{start:Dt,finish:dn})})}),V=up(D,p,Dt=>{g.get().each(dn=>{t.dispatch("TableSelectorChange",{start:dn,finish:Dt})})}),z=r2(M),Q=r2(V),se=Yc(z.asSpec()),ke=Yc(Q.asSpec()),fe=(Dt,dn,fn,Qn)=>{const Oo=dn.dom.getBoundingClientRect();Vn(Dt.element,"display");const tn=sl(Je.fromDom(t.getBody())).dom.innerHeight,ro=fn(Oo),Vo=Qn(Oo,tn);(ro||Vo)&&$t(Dt.element,"display","none")},Ee=(Dt,dn,fn,Qn)=>{const Oo=fn(dn);Pg.snapTo(Dt,Oo),fe(Dt,dn,Vo=>Vo[Qn]<0,(Vo,To)=>Vo[Qn]>To)},ht=Dt=>Ee(se,Dt,C,"top"),Ae=()=>g.get().each(ht),Ct=Dt=>Ee(ke,Dt,_,"bottom"),Lt=()=>p.get().each(Ct);wc().deviceType.isTouch()&&(t.on("TableSelectionChange",Dt=>{d.get()||(mc(s,se),mc(s,ke),d.set(!0)),g.set(Dt.start),p.set(Dt.finish),Dt.otherCells.each(dn=>{a.set(dn.upOrLeftCells),l.set(dn.downOrRightCells),ht(Dt.start),Ct(Dt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ae(),Lt()}),t.on("TableSelectionClear",()=>{d.get()&&(fc(se),fc(ke),d.set(!1)),g.clear(),p.clear()}))};var O$=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const D$=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",R$=(t,s,a)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(_,D,M)=>Ll.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":M,"aria-level":M+1}},components:[ya(_)],action:V=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:ut([Oi.button(a.isDisabled),Kr()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[ya(` ${d} `)]}),C=_=>Wt(_,(D,M,V)=>{const z=g(M.name,M.element,V);return V===0?D.concat([z]):D.concat([p(),z])},[]),k=_=>{const D=[];let M=_.length;for(;M-- >0;){const V=_[M];if(V.nodeType===1&&!D$(V)){const z=dL(t,V);if(z.isDefaultPrevented()||D.push({name:z.name,element:V}),z.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ut([an.config({mode:"flow",selector:"div[role=button]"}),vn.config({disabled:a.isDisabled}),Kr(),Yr.config({}),qn.config({}),So("elementPathEvents",[dr((_,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>an.focusIn(_)),t.on("NodeChange",M=>{const V=k(M.parents),z=V.length>0?C(V):[];qn.set(_,z)})})])]),components:[]}};var q1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(q1||(q1={}));const Wz=(t,s,a,l,d)=>{const g={height:xT(l+s.top,oC(t),r_(t))};return a===q1.Both&&(g.width=xT(d+s.left,s_(t),AS(t))),g},M$=(t,s,a)=>{const l=Je.fromDom(t.getContainer()),d=Wz(t,s,a,rr(l),ar(l));Un(d,(g,p)=>{_n(g)&&$t(l,p,a4(g))}),lL(t)},N$=t=>{const s=i_(t);return s===!1?q1.None:s==="both"?q1.Both:q1.Vertical},a2=(t,s,a,l)=>{const g=Ds(a*20,l*20);return M$(t,g,s),O.some(!0)},P4=(t,s)=>{const a=N$(t);return a===q1.None?O.none():O.some(mm("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[Pg.config({mode:"mouse",repositionTarget:!1,onDrag:(l,d,g)=>M$(t,g,a),blockerClass:"tox-blocker"}),an.config({mode:"special",onLeft:()=>a2(t,a,-1,0),onRight:()=>a2(t,a,1,0),onUp:()=>a2(t,a,0,-1),onDown:()=>a2(t,a,0,1)}),Yr.config({}),Tn.config({})]},s.icons))},Zz=(t,s)=>{const a=(l,d,g)=>qn.set(l,[ya(s.translate(["{0} "+g,d[g]]))]);return Ll.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ut([Oi.button(s.isDisabled),Kr(),Yr.config({}),qn.config({}),yt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),So("wordcount-events",[Jl(l=>{const d=yt.getValue(l),g=d.mode==="words"?"characters":"words";yt.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),dr(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=yt.getValue(l);yt.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[Xl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},jz=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":kd.translate(["Powered by {0}","Tiny"])},innerHtml:O$.trim()},behaviours:ut([Tn.config({})])}]}),l=()=>{const g=[];return l_(t)&&g.push(R$(t,{},s)),t.hasPlugin("wordcount")&&g.push(Zz(t,s)),xD(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=l(),p=P4(t,s);return g.concat(p.toArray())})()}},B$=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),P$=t=>{const s=t.inline,a=s?CV:hV,l=uC(t)?b7:n7,d=FP(),g=mr(),p=mr(),D=wc().deviceType.isTouch()?["tox-platform-touch"]:[],M=PS(t),V=Pv(t),z=Vs({dom:{tag:"div",classes:["tox-anchorbar"]}}),Q=()=>d.mainUi.get().map(To=>To.outerContainer).bind(As.getHeader),se=()=>Pn.fromOption(d.dialogUi.get().map(To=>To.sink),"UI has not been rendered"),ke=()=>Pn.fromOption(d.popupUi.get().map(To=>To.sink),"(popup) UI has not been rendered"),fe=d.lazyGetInOuterOrDie("anchor bar",z.getOpt),Ee=d.lazyGetInOuterOrDie("toolbar",As.getToolbar),ht=d.lazyGetInOuterOrDie("throbber",As.getThrobber),Ae=lU({popup:ke,dialog:se},t,fe),Ct=()=>{const To={attributes:{[oy]:M?om.BottomToTop:om.TopToBottom}},it=As.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ae.popup,onEscape:()=>{t.focus()}}),Ot=As.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ae.popup.shared.getSink,providers:Ae.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:p2=>{mL(t,p2)},type:V,lazyToolbar:Ee,lazyHeader:()=>Q().getOrDie("Could not find header element"),...To}),Bn=As.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ae.popup.shared.providers,onEscape:()=>{t.focus()},type:V}),io=cC(t),as=Iv(t),Io=BS(t),Rc=TD(t),Xs=Lt(),Hg=io||as||Io,Ta=()=>io?[Bn]:as?[Ot]:[],Q1=Rc?[Xs,it]:[it];return As.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Hg?[]:["tox-editor-header--empty"]),...To},components:Be([Io?Q1:[],Ta(),lC(t)?[]:[z.asSpec()]]),sticky:uC(t),editor:t,sharedBackstage:Ae.popup.shared})},Lt=()=>As.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Dt=()=>{const To=As.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),it=As.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[To,it]}},dn=()=>{const To=iC(t),it=ns(zr(),To)&&Ge(To,"display")==="grid",Ot={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(D),attributes:{...kd.isRtl()?{dir:"rtl"}:{}}},behaviours:ut([Fc.config({useFixed:()=>l.isDocked(Q)})])},Bn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Es([Xe(xp(),Io=>{$t(Io.element,"width",document.body.clientWidth+"px")})])},io=Yc(Rs(Ot,it?Bn:{})),as=iM(io);return p.set(as),{sink:io,mothership:as}},fn=cn,Qn=()=>{const To=Ct(),it=Dt(),Ot=As.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ae.popup}),Bn=As.parts.viewWrapper({backstage:Ae.popup}),io=SD(t)&&!s?O.some(jz(t,Ae.popup.shared.providers)):O.none(),as=Be([M?[]:[To],s?[]:[it],M?[To]:[]]),Io=As.parts.editorContainer({components:Be([as,s?[]:io.toArray()])}),Rc=d_(t),Xs={role:"application",...kd.isRtl()?{dir:"rtl"}:{},...Rc?{"aria-hidden":"true"}:{}},Hg=Yc(As.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(s?["tox-tinymce-inline"]:[]).concat(M?["tox-tinymce--toolbar-bottom"]:[]).concat(D),styles:{visibility:"hidden",...Rc?{opacity:"0",border:"0"}:{}},attributes:Xs},components:[Io,...s?[]:[Bn],Ot],behaviours:ut([Kr(),vn.config({disableClass:"tox-tinymce--disabled"}),an.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Ta=iM(Hg);return g.set(Ta),{mothership:Ta,outerContainer:Hg}},Oo=To=>{const it=a4(bV(t)),Ot=a4(vV(t));return t.inline||(Li("div","width",Ot)&&$t(To.element,"width",Ot),Li("div","height",it)?$t(To.element,"height",it):$t(To.element,"height","400px")),it},tn=To=>{t.addShortcut("alt+F9","focus menubar",()=>{As.focusMenubar(To)}),t.addShortcut("alt+F10","focus toolbar",()=>{As.focusToolbar(To)}),t.addCommand("ToggleToolbarDrawer",()=>{As.toggleToolbarDrawer(To)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>As.isToolbarDrawerToggled(To))},ro=To=>{const{mainUi:it,popupUi:Ot,uiMotherships:Bn}=To;Lo(sC(t),(H4,Y$)=>{t.ui.registry.addGroupToolbarButton(Y$,H4)});const{buttons:io,menuItems:as,contextToolbars:Io,sidebars:Rc,views:Xs}=t.ui.registry.getAll(),Hg=aC(t),Ta={menuItems:as,menus:_D(t),menubar:bD(t),toolbar:Hg.getOrThunk(()=>rC(t)),allowToolbarGroups:V===Uu.floating,buttons:io,sidebar:Rc,views:Xs};tn(it.outerContainer),zc(t,it.mothership,Bn),l.setup(t,Ae.popup.shared,Q),XV(t,Ae.popup),hz(t,Ae.popup.shared.getSink,Ae.popup),I7(t),K7(t,ht,Ae.popup.shared),S4(t,Io,Ot.sink,{backstage:Ae.popup}),Uz(t,Ot.sink);const Q1=t.getElement(),p2=Oo(it.outerContainer),K$={targetNode:Q1,height:p2};return a.render(t,To,Ta,Ae.popup,K$)},Vo=()=>{const To=Qn(),it=dn(),Ot=fn(it);d.dialogUi.set(it),d.popupUi.set(Ot),d.mainUi.set(To);const Bn={popupUi:Ot,dialogUi:it,mainUi:To,uiMotherships:d.getUiMotherships()};return ro(Bn)};return{popups:{backstage:Ae.popup,getMothership:()=>B$("popups",p)},dialogs:{backstage:Ae.dialog,getMothership:()=>B$("dialogs",p)},renderUI:Vo}},Gz=(t,s)=>{const a=O.from(Ls(t,"id")).fold(()=>{const l=Ht("dialog-describe");return Rn(s,"id",l),l},cn);Rn(t,"aria-describedby",a)},qz=(t,s)=>{const a=B(t,"id").fold(()=>{const l=Ht("dialog-label");return Rn(s,"id",l),l},cn);Rn(t,"aria-labelledby",a)},Kz=te([Ze("lazySink"),Ho("dragBlockClass"),sa("getBounds",Oa),Ce("useTabstopAt",bt),Ce("eventOrder",{}),ra("modalBehaviours",[an]),Ml("onExecute"),H0("onEscape")]),c2={sketch:cn},$4=te([ou({name:"draghandle",overrides:(t,s)=>({behaviours:ut([Pg.config({mode:"mouse",getTarget:a=>Xd(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Ac({schema:[Ze("dom")],name:"title"}),Ac({factory:c2,schema:[Ze("dom")],name:"close"}),Ac({factory:c2,schema:[Ze("dom")],name:"body"}),ou({factory:c2,schema:[Ze("dom")],name:"footer"}),Lu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Ce("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ce("components",[])],name:"blocker"})]),Yz=(t,s,a,l)=>{const d=mr(),g=z=>{d.set(z);const Q=t.lazySink(z).getOrDie(),se=l.blocker(),ke=Q.getSystem().build({...se,components:se.components.concat([ni(z)]),behaviours:ut([Tn.config({}),So("dialog-blocker-events",[Na(Wm(),()=>{an.focusIn(z)})])])});mc(Q,ke),an.focusIn(z)},p=z=>{d.clear(),ea(z.element).each(Q=>{z.getSystem().getByDom(Q).each(se=>{fc(se)})})},C=z=>Nt(z,t,"body"),k=z=>Nt(z,t,"footer"),_=(z,Q)=>{Mg.block(z,Q)},D=z=>{Mg.unblock(z)},M=Ht("modal-events"),V={...t.eventOrder,[dd()]:[M].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:C,getFooter:k,setIdle:D,setBusy:_},eventOrder:V,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ya(t.modalBehaviours,[qn.config({}),an.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),Mg.config({getRoot:d.get}),So(M,[dr(z=>{qz(z.element,Nt(z,t,"title").element),Gz(z.element,Nt(z,t,"body").element)})])])}},xa=Oc({name:"ModalDialog",configFields:Kz(),partFields:$4(),factory:Yz,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),Xz=nn([aa,x_].concat(jv)),Jz=Bc,I4=[k_("button"),hm,Kl("align","end",["start","end"]),Zv,Wu,Vf("buttonType",["primary","secondary"])],$$=[...I4,kg],L4=[Hf("type",["submit","cancel","custom"]),...$$],K1=[Hf("type",["menu"]),Wv,hC,hm,jc("items",Xz),...I4],I$=Zc("type",{submit:L4,cancel:L4,custom:L4,menu:K1}),Qz=[aa,kg,Hf("level",["info","warn","error","success"]),WD,Ce("url","")],BT=nn(Qz),v0=t=>[aa,t],PT=[aa,kg,Wu,k_("button"),hm,DI,Vf("buttonType",["primary","secondary","toolbar"]),Zv],L$=nn(PT),$g=[aa,x_],ca=$g.concat([US]),$T=$g.concat([T_,Wu]),F$=nn($T),H$=Bc,e9=ca.concat([ZS("auto")]),t9=nn(e9),dp=Gl([fC,kg,WD]),BU=ca.concat([Hs("storageKey","default")]),n9=nn(BU),V$=ta,IT=nn(ca),z$=ta,o9=$g.concat([Hs("tag","textarea"),Ir("scriptId"),Ir("scriptUrl"),w("settings",void 0)]),s9=$g.concat([Hs("tag","textarea"),Zr("init")]),r9=$r(t=>Fo("customeditor.old",Da(s9),t).orThunk(()=>Fo("customeditor.new",Da(o9),t))),a9=ta,PU=nn(ca),c9=Vm(),l9=t=>[aa,T0("columns"),t],$U=[aa,Ir("html"),Kl("presets","presentation",["presentation","document"])],i9=nn($U),u9=ca.concat([oa("sandboxed",!0),oa("transparent",!0)]),u2=nn(u9),d9=ta,m9=nn($g.concat([Ma("height")])),U$=nn([Ir("url"),Hd("zoom"),Hd("cachedWidth"),Hd("cachedHeight")]),f9=ca.concat([Ma("inputMode"),Ma("placeholder"),oa("maximized",!1),Wu]),IU=nn(f9),e=ta,n=t=>[aa,T_,t],o=[kg,fC],r=[kg,jc("items",ib("items",()=>c))],c=et([nn(o),nn(r)]),u=ca.concat([jc("items",c),Wu]),f=nn(u),b=ta,y=ca.concat([Xi("items",[kg,fC]),ub("size",1),Wu]),x=nn(y),R=ta,P=ca.concat([oa("constrain",!0),Wu]),F=nn(P),Y=nn([Ir("width"),Ir("height")]),J=$g.concat([T_,ub("min",0),ub("max",0)]),q=nn(J),ee=pr,me=[aa,jc("header",ta),jc("cells",Mc(ta))],de=nn(me),ye=ca.concat([Ma("placeholder"),oa("maximized",!1),Wu]),xe=nn(ye),Ue=ta,mt=ca.concat([Kl("filetype","file",["image","media","file"]),Wu]),lt=nn(mt),Oe=nn([fC,jS]),Se=t=>Ra("items","items",ja(),Mc($r(s=>Fo(`Checking item of ${t}`,St,s).fold(a=>Pn.error(Yi(a)),a=>Pn.value(a))))),St=Tu(()=>nh("type",{alertbanner:BT,bar:nn(v0(Se("bar"))),button:L$,checkbox:F$,colorinput:n9,colorpicker:IT,dropzone:PU,grid:nn(l9(Se("grid"))),iframe:u2,input:IU,listbox:f,selectbox:x,sizeinput:F,slider:q,textarea:xe,urlinput:lt,customeditor:r9,htmlpanel:i9,imagepreview:m9,collection:t9,label:nn(n(Se("label"))),table:de,panel:sn})),en=[aa,Ce("classes",[]),jc("items",St)],sn=nn(en),Yn=[k_("tab"),_I,jc("items",St)],_o=[aa,Xi("tabs",Yn)],ls=nn(_o),rs=$$,la=I$,el=nn([Ir("title"),dl("body",nh("type",{panel:sn,tabpanel:ls})),Hs("size","normal"),jc("buttons",la),Ce("initialData",{}),sa("onAction",oe),sa("onChange",oe),sa("onSubmit",oe),sa("onClose",oe),sa("onCancel",oe),sa("onTabChange",oe)]),rt=t=>Fo("dialog",el,t),Xn=nn([Hf("type",["cancel","custom"]),...rs]),ln=nn([Ir("title"),Ir("url"),Hd("height"),Hd("width"),Uf("buttons",Xn),sa("onAction",oe),sa("onCancel",oe),sa("onClose",oe),sa("onMessage",oe)]),Ys=t=>Fo("dialog",ln,t),wt=t=>Gt(t)?[t].concat(Go(lo(t),wt)):Wn(t)?Go(t,wt):[],kn=t=>xt(t.type)&&xt(t.name),bn={checkbox:H$,colorinput:V$,colorpicker:z$,dropzone:c9,input:e,iframe:d9,imagepreview:U$,selectbox:R,sizeinput:Y,slider:ee,listbox:b,size:Y,textarea:Ue,urlinput:Oe,customeditor:a9,collection:dp,togglemenuitem:Jz},pt=t=>O.from(bn[t.type]),xo=t=>ze(wt(t),kn),vo=t=>{const s=xo(t),a=Go(s,l=>pt(l).fold(()=>[],d=>[dl(l.name,d)]));return nn(a)},La=t=>{var s;const a=Ki(rt(t)),l=vo(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:d}},Us={open:(t,s)=>{const a=La(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Ki(Ys(s));return t(a)},redial:t=>La(t)},Mn=t=>{const s=[],a={};return Un(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Pn.error(s):Pn.value(a)},Wo=(t,s,a)=>{const l=Vs(I1.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:We(t.items,g=>bo(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:ut([an.config({mode:"acyclic",useTabstopAt:ge(s0)}),ju.memento(l),Gu.memento(l,{postprocess:d=>Mn(d).fold(g=>(console.error(g),{}),cn)})])}},Xr=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:wS(t.action),behaviours:Ya(t.tabButtonBehaviours,[Tn.config({}),an.config({mode:"execution",useSpace:!0,useEnter:!0}),yt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Bs=_i({name:"TabButton",configFields:[Ce("uid",void 0),Ze("value"),Ra("dom","dom",Pm(()=>({attributes:{role:"tab",id:Ht("aria"),"aria-selected":"false"}})),Nc()),Ho("action"),Ce("domModification",{}),ra("tabButtonBehaviours",[Tn,an,yt]),Ze("view")],factory:Xr}),kr=te([Ze("tabs"),Ze("dom"),Ce("clickToDismiss",!1),ra("tabbarBehaviours",[Yo,an]),em(["tabClass","selectedClass"])]),Vr=u1({factory:Bs,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{Yo.dehighlight(l,d),mn(l,k2(),{tabbar:l,button:d})},a=(l,d)=>{Yo.highlight(l,d),mn(l,pb(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=Yo.isHighlighted(d,l);(()=>g&&t.clickToDismiss?s:g?oe:a)()(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),cr=te([Vr]),ia=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ya(t.tabbarBehaviours,[Yo.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Rn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Rn(g.element,"aria-selected","false")}}),an.config({mode:"flow",getInitial:d=>Yo.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),uu=Oc({name:"Tabbar",configFields:kr(),partFields:cr(),factory:ia}),Uc=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Ya(t.tabviewBehaviours,[qn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),wm=_i({name:"Tabview",configFields:[ra("tabviewBehaviours",[qn])],factory:Uc}),du=te([Ce("selectFirst",!0),Co("onChangeTab"),Co("onDismissTab"),Ce("tabs",[]),ra("tabSectionBehaviours",[])]),Y1=Ac({factory:uu,schema:[Ze("dom"),ql("markers",[Ze("tabClass"),Ze("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),X1=Ac({factory:wm,name:"tabview"}),Sm=te([Y1,X1]),Md=(t,s,a,l)=>{const d=p=>{const C=yt.getValue(p);xs(p,t,"tabview").each(k=>{zt(t.tabs,D=>D.value===C).each(D=>{const M=D.view();B(p.element,"id").each(V=>{Rn(k.element,"aria-labelledby",V)}),qn.set(k,M),t.onChangeTab(k,p,M)})})},g=(p,C)=>{xs(p,t,"tabbar").each(k=>{C(k).each(Zd)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:bg(t.tabSectionBehaviours),events:Es(Be([t.selectFirst?[dr((p,C)=>{g(p,Yo.getFirst)})]:[],[Xe(pb(),(p,C)=>{const k=C.event.button;d(k)}),Xe(k2(),(p,C)=>{const k=C.event.button;t.onDismissTab(p,k)})]])),apis:{getViewItems:p=>xs(p,t,"tabview").map(C=>qn.contents(C)).getOr([]),showTab:(p,C)=>{g(p,_=>{const D=Yo.getCandidates(_);return zt(D,V=>yt.getValue(V)===C).filter(V=>!Yo.isHighlighted(_,V))})}}}},Er=Oc({name:"TabSection",configFields:du(),partFields:Sm(),factory:Md,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Yu=(t,s,a)=>We(t,(l,d)=>{qn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return qn.set(a,[]),g.height}),xm=t=>cs(jn(t,(s,a)=>s>a?-1:s<a?1:0)),Xu=(t,s,a)=>{const l=kl(t).dom,d=Xd(t,".tox-dialog-wrap").getOr(t),g=Ge(d,"position")==="fixed";let p;g?p=Math.max(l.clientHeight,window.innerHeight):p=Math.max(l.offsetHeight,l.scrollHeight);const C=rr(s),_=s.dom.offsetLeft>=a.dom.offsetLeft+ar(a)?Math.max(rr(a),C):C,D=parseInt(Ge(t,"margin-top"),10)||0,M=parseInt(Ge(t,"margin-bottom"),10)||0,z=rr(t)+D+M-_;return p-z},Ju=(t,s)=>{cs(t).each(a=>Er.showTab(s,a.value))},Tm=(t,s)=>{$t(t,"height",s+"px"),$t(t,"flex-basis",s+"px")},bc=(t,s,a)=>{Xd(t,'[role="dialog"]').each(l=>{Fr(l,'[role="tablist"]').each(d=>{a.get().map(g=>($t(s,"height","0"),$t(s,"flex-basis","0"),Math.min(g,Xu(l,s,d)))).each(g=>{Tm(s,g)})})})},km=t=>Fr(t,'[role="tabpanel"]'),Df=t=>{const s=mr();return{extraEvents:[dr(d=>{const g=d.element;km(g).each(p=>{$t(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(C=>{const k=Yu(t,p,C);xm(k).fold(s.clear,s.set)}),bc(g,p,s),Vn(p,"visibility"),Ju(t,d),requestAnimationFrame(()=>{bc(g,p,s)})})}),Xe(xp(),d=>{const g=d.element;km(g).each(p=>{bc(g,p,s)})}),Xe(mx,(d,g)=>{const p=d.element;km(p).each(C=>{const k=Bl(fo(C));$t(C,"visibility","hidden");const _=Ss(C,"height").map(V=>parseInt(V,10));Vn(C,"height"),Vn(C,"flex-basis");const D=C.dom.getBoundingClientRect().height;_.forall(V=>D>V)?(s.set(D),bc(p,C,s)):_.each(V=>{Tm(C,V)}),Vn(C,"visibility"),k.each(nm)})})],selectFirst:!1}},Qu="send-data-to-section",Ig="send-data-to-view",LT=(t,s,a)=>{const l=H({}),d=_=>{const D=yt.getValue(_),M=Mn(D).getOr({}),V=l.get(),z=Rs(V,M);l.set(z)},g=_=>{const D=l.get();yt.setValue(_,D)},p=H(null),C=We(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[ya(a.shared.providers.translate(_.title))],view:()=>[I1.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:We(_.items,M=>bo(D,M,s,a)),formBehaviours:ut([an.config({mode:"acyclic",useTabstopAt:ge(s0)}),So("TabView.form.events",[dr(g),Ci(d)]),Si.config({channels:vs([{key:Qu,value:{onReceive:d}},{key:Ig,value:{onReceive:g}}])})])}))]})),k=Df(C);return Er.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,M)=>{const V=yt.getValue(D);mn(_,fM,{name:V,oldName:p.get()}),p.set(V)},tabs:C,components:[Er.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[uu.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ut([Yr.config({})])}),Er.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:k.selectFirst,tabSectionBehaviours:ut([So("tabpanel",k.extraEvents),an.config({mode:"acyclic"}),po.config({find:_=>cs(Er.getViewItems(_))}),Gu.withComp(O.none(),_=>(_.getSystem().broadcastOn([Qu],{}),l.get()),(_,D)=>{l.set(D),_.getSystem().broadcastOn([Ig],{})})])})},d2=Ht("update-dialog"),m2=Ht("update-title"),FT=Ht("update-body"),HT=Ht("update-footer"),Lg=Ht("body-send-message"),mp=(t,s,a,l,d)=>{const g=k=>{const _=k.body;switch(_.type){case"tabpanel":return[LT(_,k.initialData,l)];default:return[Wo(_,k.initialData,l)]}},p=(k,_)=>O.some({isTabPanel:()=>_.body.type==="tabpanel"}),C={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(k=>({id:k})).getOr({}),...d?C:{}}},components:[],behaviours:ut([ju.childAt(0),Ni.config({channel:`${FT}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},Te=(t,s,a,l,d)=>mp(t,s,O.some(a),l,d),_e=(t,s,a)=>{const l=mp(t,s,O.none(),a,!1);return xa.parts.body(l)},st=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[$C({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:ut([Yr.config({}),Tn.config({})])})]}],behaviours:ut([an.config({mode:"acyclic",useTabstopAt:ge(s0)})])};return xa.parts.body(s)};function Ke(t){"@babel/helpers - typeof";return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ke(t)}function Jt(t,s){return Jt=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},Jt(t,s)}function $o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qs(t,s,a){return $o()?Qs=Reflect.construct:Qs=function(d,g,p){var C=[null];C.push.apply(C,g);var k=Function.bind.apply(d,C),_=new k;return p&&Jt(_,p.prototype),_},Qs.apply(null,arguments)}function Cs(t){return mu(t)||f2(t)||W$(t)||Z$()}function mu(t){if(Array.isArray(t))return VT(t)}function f2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function W$(t,s){if(t){if(typeof t=="string")return VT(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return VT(t,s)}}function VT(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,l=new Array(s);a<s;a++)l[a]=t[a];return l}function Z$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g9=Object.hasOwnProperty,so=Object.setPrototypeOf,Me=Object.isFrozen,It=Object.getPrototypeOf,Nn=Object.getOwnPropertyDescriptor,gs=Object.freeze,Qa=Object.seal,di=Object.create,yl=typeof Reflect<"u"&&Reflect,J1=yl.apply,tl=yl.construct;J1||(J1=function(s,a,l){return s.apply(a,l)}),gs||(gs=function(s){return s}),Qa||(Qa=function(s){return s}),tl||(tl=function(s,a){return Qs(s,Cs(a))});var j$=Fg(Array.prototype.forEach),h9=Fg(Array.prototype.pop),g2=Fg(Array.prototype.push),F4=Fg(String.prototype.toLowerCase),PW=Fg(String.prototype.match),y0=Fg(String.prototype.replace),$W=Fg(String.prototype.indexOf),IW=Fg(String.prototype.trim),ed=Fg(RegExp.prototype.test),p9=LW(TypeError);function Fg(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return J1(t,s,l)}}function LW(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return tl(t,a)}}function Ws(t,s){so&&so(t,null);for(var a=s.length;a--;){var l=s[a];if(typeof l=="string"){var d=F4(l);d!==l&&(Me(s)||(s[a]=d),l=d)}t[l]=!0}return t}function h2(t){var s=di(null),a;for(a in t)J1(g9,t,[a])&&(s[a]=t[a]);return s}function G$(t,s){for(;t!==null;){var a=Nn(t,s);if(a){if(a.get)return Fg(a.get);if(typeof a.value=="function")return Fg(a.value)}t=It(t)}function l(d){return console.warn("fallback value for",d),null}return l}var LU=gs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),b9=gs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),v9=gs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),FW=gs(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),y9=gs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),HW=gs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),FU=gs(["#text"]),HU=gs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),C9=gs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),VU=gs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q$=gs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VW=Qa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),zW=Qa(/<%[\w\W]*|[\w\W]*%>/gm),UW=Qa(/^data-[\-\w.\u00B7-\uFFFF]/),WW=Qa(/^aria-[\-\w]+$/),ZW=Qa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),jW=Qa(/^(?:\w+script|data):/i),GW=Qa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qW=Qa(/^html$/i),KW=function(){return typeof window>"u"?null:window},YW=function(s,a){if(Ke(s)!=="object"||typeof s.createPolicy!="function")return null;var l=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(l=a.currentScript.getAttribute(d));var g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML:function(C){return C}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function zU(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:KW(),s=function(Ne){return zU(Ne)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,l=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,C=t.Element,k=t.NodeFilter,_=t.NamedNodeMap,D=_===void 0?t.NamedNodeMap||t.MozNamedAttrMap:_,M=t.HTMLFormElement,V=t.DOMParser,z=t.trustedTypes,Q=C.prototype,se=G$(Q,"cloneNode"),ke=G$(Q,"nextSibling"),fe=G$(Q,"childNodes"),Ee=G$(Q,"parentNode");if(typeof g=="function"){var ht=l.createElement("template");ht.content&&ht.content.ownerDocument&&(l=ht.content.ownerDocument)}var Ae=YW(z,a),Ct=Ae?Ae.createHTML(""):"",Lt=l,Dt=Lt.implementation,dn=Lt.createNodeIterator,fn=Lt.createDocumentFragment,Qn=Lt.getElementsByTagName,Oo=a.importNode,tn={};try{tn=h2(l).documentMode?l.documentMode:{}}catch{}var ro={};s.isSupported=typeof Ee=="function"&&Dt&&typeof Dt.createHTMLDocument<"u"&&tn!==9;var Vo=VW,To=zW,it=UW,Ot=WW,Bn=jW,io=GW,as=ZW,Io=null,Rc=Ws({},[].concat(Cs(LU),Cs(b9),Cs(v9),Cs(y9),Cs(FU))),Xs=null,Hg=Ws({},[].concat(Cs(HU),Cs(C9),Cs(VU),Cs(q$))),Ta=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Q1=null,p2=null,K$=!0,H4=!0,Y$=!1,zT=!1,b2=!1,T9=!1,k9=!1,UT=!1,X$=!1,J$=!1,uW=!0,E9=!0,V4=!1,WT={},ZT=null,dW=Ws({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),mW=null,fW=Ws({},["audio","video","img","source","image","track"]),_9=null,gW=Ws({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),A9="http://www.w3.org/1998/Math/MathML",O9="http://www.w3.org/2000/svg",C0="http://www.w3.org/1999/xhtml",Q$=C0,D9=!1,jT,xZ=["application/xhtml+xml","text/html"],TZ="text/html",v2,GT=null,kZ=l.createElement("form"),hW=function(Ne){return Ne instanceof RegExp||Ne instanceof Function},R9=function(Ne){GT&&GT===Ne||((!Ne||Ke(Ne)!=="object")&&(Ne={}),Ne=h2(Ne),Io="ALLOWED_TAGS"in Ne?Ws({},Ne.ALLOWED_TAGS):Rc,Xs="ALLOWED_ATTR"in Ne?Ws({},Ne.ALLOWED_ATTR):Hg,_9="ADD_URI_SAFE_ATTR"in Ne?Ws(h2(gW),Ne.ADD_URI_SAFE_ATTR):gW,mW="ADD_DATA_URI_TAGS"in Ne?Ws(h2(fW),Ne.ADD_DATA_URI_TAGS):fW,ZT="FORBID_CONTENTS"in Ne?Ws({},Ne.FORBID_CONTENTS):dW,Q1="FORBID_TAGS"in Ne?Ws({},Ne.FORBID_TAGS):{},p2="FORBID_ATTR"in Ne?Ws({},Ne.FORBID_ATTR):{},WT="USE_PROFILES"in Ne?Ne.USE_PROFILES:!1,K$=Ne.ALLOW_ARIA_ATTR!==!1,H4=Ne.ALLOW_DATA_ATTR!==!1,Y$=Ne.ALLOW_UNKNOWN_PROTOCOLS||!1,zT=Ne.SAFE_FOR_TEMPLATES||!1,b2=Ne.WHOLE_DOCUMENT||!1,UT=Ne.RETURN_DOM||!1,X$=Ne.RETURN_DOM_FRAGMENT||!1,J$=Ne.RETURN_TRUSTED_TYPE||!1,k9=Ne.FORCE_BODY||!1,uW=Ne.SANITIZE_DOM!==!1,E9=Ne.KEEP_CONTENT!==!1,V4=Ne.IN_PLACE||!1,as=Ne.ALLOWED_URI_REGEXP||as,Q$=Ne.NAMESPACE||C0,Ne.CUSTOM_ELEMENT_HANDLING&&hW(Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ta.tagNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&hW(Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ta.attributeNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&typeof Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ta.allowCustomizedBuiltInElements=Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),jT=xZ.indexOf(Ne.PARSER_MEDIA_TYPE)===-1?jT=TZ:jT=Ne.PARSER_MEDIA_TYPE,v2=jT==="application/xhtml+xml"?function(Ut){return Ut}:F4,zT&&(H4=!1),X$&&(UT=!0),WT&&(Io=Ws({},Cs(FU)),Xs=[],WT.html===!0&&(Ws(Io,LU),Ws(Xs,HU)),WT.svg===!0&&(Ws(Io,b9),Ws(Xs,C9),Ws(Xs,q$)),WT.svgFilters===!0&&(Ws(Io,v9),Ws(Xs,C9),Ws(Xs,q$)),WT.mathMl===!0&&(Ws(Io,y9),Ws(Xs,VU),Ws(Xs,q$))),Ne.ADD_TAGS&&(Io===Rc&&(Io=h2(Io)),Ws(Io,Ne.ADD_TAGS)),Ne.ADD_ATTR&&(Xs===Hg&&(Xs=h2(Xs)),Ws(Xs,Ne.ADD_ATTR)),Ne.ADD_URI_SAFE_ATTR&&Ws(_9,Ne.ADD_URI_SAFE_ATTR),Ne.FORBID_CONTENTS&&(ZT===dW&&(ZT=h2(ZT)),Ws(ZT,Ne.FORBID_CONTENTS)),E9&&(Io["#text"]=!0),b2&&Ws(Io,["html","head","body"]),Io.table&&(Ws(Io,["tbody"]),delete Q1.tbody),gs&&gs(Ne),GT=Ne)},pW=Ws({},["mi","mo","mn","ms","mtext"]),bW=Ws({},["foreignobject","desc","title","annotation-xml"]),EZ=Ws({},["title","style","font","a","script"]),e5=Ws({},b9);Ws(e5,v9),Ws(e5,FW);var M9=Ws({},y9);Ws(M9,HW);var _Z=function(Ne){var Ut=Ee(Ne);(!Ut||!Ut.tagName)&&(Ut={namespaceURI:C0,tagName:"template"});var Hn=F4(Ne.tagName),ua=F4(Ut.tagName);return Ne.namespaceURI===O9?Ut.namespaceURI===C0?Hn==="svg":Ut.namespaceURI===A9?Hn==="svg"&&(ua==="annotation-xml"||pW[ua]):!!e5[Hn]:Ne.namespaceURI===A9?Ut.namespaceURI===C0?Hn==="math":Ut.namespaceURI===O9?Hn==="math"&&bW[ua]:!!M9[Hn]:Ne.namespaceURI===C0?Ut.namespaceURI===O9&&!bW[ua]||Ut.namespaceURI===A9&&!pW[ua]?!1:!M9[Hn]&&(EZ[Hn]||!e5[Hn]):!1},eb=function(Ne){g2(s.removed,{element:Ne});try{Ne.parentNode.removeChild(Ne)}catch{try{Ne.outerHTML=Ct}catch{Ne.remove()}}},t5=function(Ne,Ut){try{g2(s.removed,{attribute:Ut.getAttributeNode(Ne),from:Ut})}catch{g2(s.removed,{attribute:null,from:Ut})}if(Ut.removeAttribute(Ne),Ne==="is"&&!Xs[Ne])if(UT||X$)try{eb(Ut)}catch{}else try{Ut.setAttribute(Ne,"")}catch{}},vW=function(Ne){var Ut,Hn;if(k9)Ne="<remove></remove>"+Ne;else{var ua=PW(Ne,/^[\r\n\t ]+/);Hn=ua&&ua[0]}jT==="application/xhtml+xml"&&(Ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ne+"</body></html>");var Nd=Ae?Ae.createHTML(Ne):Ne;if(Q$===C0)try{Ut=new V().parseFromString(Nd,jT)}catch{}if(!Ut||!Ut.documentElement){Ut=Dt.createDocument(Q$,"template",null);try{Ut.documentElement.innerHTML=D9?"":Nd}catch{}}var fu=Ut.body||Ut.documentElement;return Ne&&Hn&&fu.insertBefore(l.createTextNode(Hn),fu.childNodes[0]||null),Q$===C0?Qn.call(Ut,b2?"html":"body")[0]:b2?Ut.documentElement:fu},yW=function(Ne){return dn.call(Ne.ownerDocument||Ne,Ne,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT,null,!1)},AZ=function(Ne){return Ne instanceof M&&(typeof Ne.nodeName!="string"||typeof Ne.textContent!="string"||typeof Ne.removeChild!="function"||!(Ne.attributes instanceof D)||typeof Ne.removeAttribute!="function"||typeof Ne.setAttribute!="function"||typeof Ne.namespaceURI!="string"||typeof Ne.insertBefore!="function")},z4=function(Ne){return Ke(p)==="object"?Ne instanceof p:Ne&&Ke(Ne)==="object"&&typeof Ne.nodeType=="number"&&typeof Ne.nodeName=="string"},tb=function(Ne,Ut,Hn){ro[Ne]&&j$(ro[Ne],function(ua){ua.call(s,Ut,Hn,GT)})},CW=function(Ne){var Ut;if(tb("beforeSanitizeElements",Ne,null),AZ(Ne)||ed(/[\u0080-\uFFFF]/,Ne.nodeName))return eb(Ne),!0;var Hn=v2(Ne.nodeName);if(tb("uponSanitizeElement",Ne,{tagName:Hn,allowedTags:Io}),Ne.hasChildNodes()&&!z4(Ne.firstElementChild)&&(!z4(Ne.content)||!z4(Ne.content.firstElementChild))&&ed(/<[/\w]/g,Ne.innerHTML)&&ed(/<[/\w]/g,Ne.textContent)||Hn==="select"&&ed(/<template/i,Ne.innerHTML))return eb(Ne),!0;if(!Io[Hn]||Q1[Hn]){if(!Q1[Hn]&&SW(Hn)&&(Ta.tagNameCheck instanceof RegExp&&ed(Ta.tagNameCheck,Hn)||Ta.tagNameCheck instanceof Function&&Ta.tagNameCheck(Hn)))return!1;if(E9&&!ZT[Hn]){var ua=Ee(Ne)||Ne.parentNode,Nd=fe(Ne)||Ne.childNodes;if(Nd&&ua)for(var fu=Nd.length,Bi=fu-1;Bi>=0;--Bi)ua.insertBefore(se(Nd[Bi],!0),ke(Ne))}return eb(Ne),!0}return Ne instanceof C&&!_Z(Ne)||(Hn==="noscript"||Hn==="noembed")&&ed(/<\/no(script|embed)/i,Ne.innerHTML)?(eb(Ne),!0):(zT&&Ne.nodeType===3&&(Ut=Ne.textContent,Ut=y0(Ut,Vo," "),Ut=y0(Ut,To," "),Ne.textContent!==Ut&&(g2(s.removed,{element:Ne.cloneNode()}),Ne.textContent=Ut)),tb("afterSanitizeElements",Ne,null),!1)},wW=function(Ne,Ut,Hn){if(uW&&(Ut==="id"||Ut==="name")&&(Hn in l||Hn in kZ))return!1;if(!(H4&&!p2[Ut]&&ed(it,Ut))){if(!(K$&&ed(Ot,Ut))){if(!Xs[Ut]||p2[Ut]){if(!(SW(Ne)&&(Ta.tagNameCheck instanceof RegExp&&ed(Ta.tagNameCheck,Ne)||Ta.tagNameCheck instanceof Function&&Ta.tagNameCheck(Ne))&&(Ta.attributeNameCheck instanceof RegExp&&ed(Ta.attributeNameCheck,Ut)||Ta.attributeNameCheck instanceof Function&&Ta.attributeNameCheck(Ut))||Ut==="is"&&Ta.allowCustomizedBuiltInElements&&(Ta.tagNameCheck instanceof RegExp&&ed(Ta.tagNameCheck,Hn)||Ta.tagNameCheck instanceof Function&&Ta.tagNameCheck(Hn))))return!1}else if(!_9[Ut]){if(!ed(as,y0(Hn,io,""))){if(!((Ut==="src"||Ut==="xlink:href"||Ut==="href")&&Ne!=="script"&&$W(Hn,"data:")===0&&mW[Ne])){if(!(Y$&&!ed(Bn,y0(Hn,io,"")))){if(Hn)return!1}}}}}}return!0},SW=function(Ne){return Ne.indexOf("-")>0},xW=function(Ne){var Ut,Hn,ua,Nd;tb("beforeSanitizeAttributes",Ne,null);var fu=Ne.attributes;if(fu){var Bi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Xs};for(Nd=fu.length;Nd--;){Ut=fu[Nd];var n5=Ut,Pi=n5.name,TW=n5.namespaceURI;Hn=Pi==="value"?Ut.value:IW(Ut.value),ua=v2(Pi);var DZ=Hn;if(Bi.attrName=ua,Bi.attrValue=Hn,Bi.keepAttr=!0,Bi.forceKeepAttr=void 0,tb("uponSanitizeAttribute",Ne,Bi),Hn=Bi.attrValue,!Bi.forceKeepAttr){if(!Bi.keepAttr){t5(Pi,Ne);continue}if(ed(/\/>/i,Hn)){t5(Pi,Ne);continue}zT&&(Hn=y0(Hn,Vo," "),Hn=y0(Hn,To," "));var RZ=v2(Ne.nodeName);if(!wW(RZ,ua,Hn)){t5(Pi,Ne);continue}if(Hn!==DZ)try{TW?Ne.setAttributeNS(TW,Pi,Hn):Ne.setAttribute(Pi,Hn)}catch{t5(Pi,Ne)}}}tb("afterSanitizeAttributes",Ne,null)}},OZ=function ko(Ne){var Ut,Hn=yW(Ne);for(tb("beforeSanitizeShadowDOM",Ne,null);Ut=Hn.nextNode();)tb("uponSanitizeShadowNode",Ut,null),!CW(Ut)&&(Ut.content instanceof d&&ko(Ut.content),xW(Ut));tb("afterSanitizeShadowDOM",Ne,null)};return s.sanitize=function(ko,Ne){var Ut,Hn,ua,Nd,fu;if(D9=!ko,D9&&(ko="<!-->"),typeof ko!="string"&&!z4(ko)){if(typeof ko.toString!="function")throw p9("toString is not a function");if(ko=ko.toString(),typeof ko!="string")throw p9("dirty is not a string, aborting")}if(!s.isSupported){if(Ke(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof ko=="string")return t.toStaticHTML(ko);if(z4(ko))return t.toStaticHTML(ko.outerHTML)}return ko}if(T9||R9(Ne),s.removed=[],typeof ko=="string"&&(V4=!1),V4){if(ko.nodeName){var Bi=v2(ko.nodeName);if(!Io[Bi]||Q1[Bi])throw p9("root node is forbidden and cannot be sanitized in-place")}}else if(ko instanceof p)Ut=vW("<!---->"),Hn=Ut.ownerDocument.importNode(ko,!0),Hn.nodeType===1&&Hn.nodeName==="BODY"||Hn.nodeName==="HTML"?Ut=Hn:Ut.appendChild(Hn);else{if(!UT&&!zT&&!b2&&ko.indexOf("<")===-1)return Ae&&J$?Ae.createHTML(ko):ko;if(Ut=vW(ko),!Ut)return UT?null:J$?Ct:""}Ut&&k9&&eb(Ut.firstChild);for(var n5=yW(V4?ko:Ut);ua=n5.nextNode();)ua.nodeType===3&&ua===Nd||CW(ua)||(ua.content instanceof d&&OZ(ua.content),xW(ua),Nd=ua);if(Nd=null,V4)return ko;if(UT){if(X$)for(fu=fn.call(Ut.ownerDocument);Ut.firstChild;)fu.appendChild(Ut.firstChild);else fu=Ut;return Xs.shadowroot&&(fu=Oo.call(a,fu,!0)),fu}var Pi=b2?Ut.outerHTML:Ut.innerHTML;return b2&&Io["!doctype"]&&Ut.ownerDocument&&Ut.ownerDocument.doctype&&Ut.ownerDocument.doctype.name&&ed(qW,Ut.ownerDocument.doctype.name)&&(Pi="<!DOCTYPE "+Ut.ownerDocument.doctype.name+`>
`+Pi),zT&&(Pi=y0(Pi,Vo," "),Pi=y0(Pi,To," ")),Ae&&J$?Ae.createHTML(Pi):Pi},s.setConfig=function(ko){R9(ko),T9=!0},s.clearConfig=function(){GT=null,T9=!1},s.isValidAttribute=function(ko,Ne,Ut){GT||R9({});var Hn=v2(ko),ua=v2(Ne);return wW(Hn,ua,Ut)},s.addHook=function(ko,Ne){typeof Ne=="function"&&(ro[ko]=ro[ko]||[],g2(ro[ko],Ne))},s.removeHook=function(ko){if(ro[ko])return h9(ro[ko])},s.removeHooks=function(ko){ro[ko]&&(ro[ko]=[])},s.removeAllHooks=function(){ro={}},s}var XW=zU();const JW=t=>XW().sanitize(t),QW=Bv.deviceType.isTouch(),UU=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),WU=(t,s)=>xa.parts.close(Ll.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:ut([Yr.config({})])})),ZU=()=>xa.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),jU=(t,s)=>xa.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Ng(`<p>${JW(s.translate(t))}</p>`)}]}]}),GU=t=>xa.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),qU=(t,s)=>[pm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),pm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],w9=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return xa.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),O.some(!0)),useTabstopAt:g=>!s0(g),dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Ng(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:QW?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:ut([Tn.config({}),So("dialog-events",t.dialogEvents.concat([Na(Wm(),(g,p)=>{an.focusIn(g)})])),So("scroll-lock",[dr(()=>{Gr(zr(),d)}),Ci(()=>{Lr(zr(),d)})]),...t.extraBehaviours]),eventOrder:{[Xl()]:["dialog-events"],[dd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ch()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},KU=t=>Ll.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[mm("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{es(s,np)}}),YU=(t,s,a,l)=>{const d=g=>[ya(l.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:ut([Ni.config({channel:`${m2}-${s}`,initialData:t,renderComponents:d})])}},XU=()=>({dom:Ng('<div class="tox-dialog__draghandle"></div>')}),eZ=(t,s,a,l)=>pm.sketch({dom:Ng('<div class="tox-dialog__header"></div>'),components:[YU(t,s,O.some(a),l),XU(),KU(l)],containerBehaviours:ut([Pg.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>wi(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),tZ=(t,s,a)=>{const l=xa.parts.title(YU(t,s,O.none(),a)),d=xa.parts.draghandle(XU()),g=xa.parts.close(KU(a)),p=[l].concat(t.draggable?[d]:[]).concat([g]);return pm.sketch({dom:Ng('<div class="tox-dialog__header"></div>'),components:p})},JU=(t,s,a)=>tZ({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),QU=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:Ng('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),eW=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{xa.setBusy(t(),(d,g)=>QU(l.message,g,s))},onUnblock:()=>{xa.setIdle(t())}}),tW=(t,s,a,l)=>{const d=(g,p)=>O.some(p);return Yc(w9({...t,lazySink:l.shared.getSink,extraBehaviours:[Ni.config({channel:`${d2}-${t.id}`,updateState:d,initialData:s}),Gu.memory({}),...t.extraBehaviours],onEscape:g=>{es(g,np)},dialogEvents:a,eventOrder:{[Ji()]:[Ni.name(),Si.name()],[dd()]:["scroll-lock",Ni.name(),"messages","dialog-events","alloy.base.behaviour"],[ch()]:["alloy.base.behaviour","dialog-events","messages",Ni.name(),"scroll-lock"]}}))},nW=t=>{const s=a=>{const l=We(a.items,d=>{const g=H(!1);return{...d,storage:g}});return{...a,items:l}};return We(t,a=>a.type==="menu"?s(a):a)},oW=t=>Wt(t,(s,a)=>a.type==="menu"?Wt(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),sW=(t,s)=>[ih(Wm(),IC),t(_C,(a,l)=>{s.onClose(),l.onClose()}),t(np,(a,l,d,g)=>{l.onCancel(a),es(g,_C)}),Xe(bA,(a,l)=>s.onUnblock()),Xe(pA,(a,l)=>s.onBlock(l.event))],S9={initUrlDialog:(t,s)=>{const a=(d,g)=>Xe(d,(p,C)=>{l(p,(k,_)=>{g(t(),k,C.event,p)})}),l=(d,g)=>{Ni.getState(d).get().each(p=>{g(p,d)})};return[...sW(a,s),a(_g,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const l=(g,p)=>Xe(g,(C,k)=>{d(C,(_,D)=>{p(t(),_,k.event,C)})}),d=(g,p)=>{Ni.getState(g).get().each(C=>{p(C.internalDialog,g)})};return[...sW(l,s),l(AC,(g,p)=>p.onSubmit(g)),l(Ri,(g,p,C)=>{p.onChange(g,{name:C.name})}),l(_g,(g,p,C,k)=>{const _=()=>an.focusIn(k),D=z=>G(z,"disabled")||B(z,"aria-disabled").exists(Q=>Q==="true"),M=fo(k.element),V=Bl(M);p.onAction(g,{name:C.name,value:C.value}),Bl(M).fold(_,z=>{D(z)||V.exists(Q=>Tl(z,Q)&&D(Q))?_():a().toOptional().filter(Q=>!Tl(Q.element,z)).each(_)})}),l(fM,(g,p,C)=>{p.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Ci(g=>{const p=t();yt.setValue(g,p.getData())})]}},nZ=(t,s)=>Hx(t,t.type,s),oZ=(t,s,a)=>zt(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),sZ=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),l=nt(a,C=>C.align==="start"),d=(C,k)=>pm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:We(k,_=>_.memento.asSpec())}),g=d("start",l.pass),p=d("end",l.fail);return[g,p]},rW=(t,s,a)=>{const l=(d,g)=>{const p=We(g.buttons,k=>{const _=Vs(nZ(k,a));return{name:k.name,align:k.align,memento:_}}),C=k=>oZ(d,p,k);return O.some({lookupByName:C,footerButtons:p})};return{dom:Ng('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ut([Ni.config({channel:`${HT}-${s}`,initialData:t,updateState:l,renderComponents:sZ})])}},rZ=(t,s,a)=>rW(t,s,a),aW=(t,s,a)=>xa.parts.footer(rW(t,s,a)),cW=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=po.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return I1.getField(l,s).orThunk(()=>{const d=t.getFooter();return Ni.getState(d).get().bind(p=>p.lookupByName(s))})}else return O.none()},aZ=(t,s)=>{const a=t.getRoot();return Ni.getState(a).get().map(l=>Ki(Fo("data",l.dataValidator,s))).getOr(s)},lW=(t,s,a)=>{const l=Q=>{const se=t.getRoot();se.getSystem().isConnected()&&Q(se)},z={getData:()=>{const Q=t.getRoot(),se=Q.getSystem().isConnected()?t.getFormWrapper():Q,ke=yt.getValue(se),fe=Lo(a,Ee=>Ee.get());return{...ke,...fe}},setData:Q=>{l(se=>{const ke=z.getData(),fe=Rs(ke,Q),Ee=aZ(t,fe),ht=t.getFormWrapper();yt.setValue(ht,Ee),Un(a,(Ae,Ct)=>{In(fe,Ct)&&Ae.set(fe[Ct])})})},setEnabled:(Q,se)=>{cW(t,Q).each(se?vn.enable:vn.disable)},focus:Q=>{cW(t,Q).each(Tn.focus)},block:Q=>{if(!xt(Q))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(se=>{mn(se,pA,{message:Q})})},unblock:()=>{l(Q=>{es(Q,bA)})},showTab:Q=>{l(se=>{const ke=t.getBody();Ni.getState(ke).get().exists(Ee=>Ee.isTabPanel())&&po.getCurrent(ke).each(Ee=>{Er.showTab(Ee,Q)})})},redial:Q=>{l(se=>{const ke=t.getId(),fe=s(Q);se.getSystem().broadcastOn([`${d2}-${ke}`],fe),se.getSystem().broadcastOn([`${m2}-${ke}`],fe.internalDialog),se.getSystem().broadcastOn([`${FT}-${ke}`],fe.internalDialog),se.getSystem().broadcastOn([`${HT}-${ke}`],fe.internalDialog),z.setData(fe.initialData)})},close:()=>{l(Q=>{es(Q,_C)})}};return z},cZ=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},lZ=(t,s,a)=>{const l=Ht("dialog"),d=t.internalDialog,g=JU(d.title,l,a),p=_e({body:d.body,initialData:d.initialData},l,a),C=nW(d.buttons),k=oW(C),_=aW({buttons:C},l,a),D=S9.initDialog(()=>se,eW(()=>z,a.shared.providers,s),a.shared.getSink),M=cZ(d.size),V={id:l,header:g,body:p,footer:O.some(_),extraClasses:M,extraBehaviours:[],extraStyles:{}},z=tW(V,t,D,a),Q=(()=>{const ke=()=>{const fe=xa.getBody(z);return po.getCurrent(fe).getOr(fe)};return{getId:te(l),getRoot:te(z),getBody:()=>xa.getBody(z),getFooter:()=>xa.getFooter(z),getFormWrapper:ke}})(),se=lW(Q,s.redial,k);return{dialog:z,instanceApi:se}},iZ=(t,s,a,l)=>{const d=Ht("dialog"),g=Ht("dialog-label"),p=Ht("dialog-content"),C=t.internalDialog,k=(fe,Ee)=>O.some(Ee),_=Vs(eZ({title:C.title,draggable:!0},d,g,a.shared.providers)),D=Vs(Te({body:C.body,initialData:C.initialData},d,p,a,l)),M=nW(C.buttons),V=oW(M),z=Vs(rZ({buttons:M},d,a)),Q=S9.initDialog(()=>ke,{onBlock:fe=>{Mg.block(se,(Ee,ht)=>QU(fe.message,ht,a.shared.providers))},onUnblock:()=>{Mg.unblock(se)},onClose:()=>s.closeWindow()},a.shared.getSink),se=Yc({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog","aria-labelledby":g,"aria-describedby":p}},eventOrder:{[Ji()]:[Ni.name(),Si.name()],[Xl()]:["execute-on-form"],[dd()]:["reflecting","execute-on-form"]},behaviours:ut([an.config({mode:"cyclic",onEscape:fe=>(es(fe,_C),O.some(!0)),useTabstopAt:fe=>!s0(fe)&&(Bo(fe)!=="button"||Ls(fe,"disabled")!=="disabled")}),Ni.config({channel:`${d2}-${d}`,updateState:k,initialData:t}),Tn.config({}),So("execute-on-form",Q.concat([Na(Wm(),(fe,Ee)=>{an.focusIn(fe)})])),Mg.config({getRoot:()=>O.some(se)}),qn.config({}),Gu.memory({})]),components:[_.asSpec(),D.asSpec(),z.asSpec()]}),ke=lW({getId:te(d),getRoot:te(se),getFooter:()=>z.get(se),getBody:()=>D.get(se),getFormWrapper:()=>{const fe=D.get(se);return po.getCurrent(fe).getOr(fe)}},s.redial,V);return{dialog:se,instanceApi:ke}};var x9=tinymce.util.Tools.resolve("tinymce.util.URI");const uZ=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!xt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{mn(C,pA,{message:p})})},unblock:()=>{s(p=>{es(p,bA)})},close:()=>{s(p=>{es(p,_C)})},sendMessage:p=>{s(C=>{C.getSystem().broadcastOn([Lg],p)})}}},dZ=["insertContent","setContent","execCommand","close","block","unblock"],iW=t=>Gt(t)&&dZ.indexOf(t.mceAction)!==-1,mZ=t=>!iW(t)&&Gt(t)&&In(t,"mceAction"),fZ=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=Zo(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},gZ=(t,s,a,l)=>{const d=Ht("dialog"),g=JU(t.title,d,l),p=st(t),C=t.buttons.bind(Ee=>Ee.length===0?O.none():O.some(aW({buttons:Ee},d,l))),k=S9.initUrlDialog(()=>fe,eW(()=>ke,l.shared.providers,s)),_={...t.height.fold(()=>({}),Ee=>({height:Ee+"px","max-height":Ee+"px"})),...t.width.fold(()=>({}),Ee=>({width:Ee+"px","max-width":Ee+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],M=new x9(t.url,{base_uri:new x9(window.location.href)}),V=`${M.protocol}://${M.host}${M.port?":"+M.port:""}`,z=rg(),Q=[So("messages",[dr(()=>{const Ee=Lc(Je.fromDom(window),"message",ht=>{if(M.isSameOrigin(new x9(ht.raw.origin))){const Ae=ht.raw.data;iW(Ae)?fZ(a,fe,Ae):mZ(Ae)&&t.onMessage(fe,Ae)}});z.set(Ee)}),Ci(z.clear)]),Si.config({channels:{[Lg]:{onReceive:(Ee,ht)=>{Fr(Ee.element,"iframe").each(Ae=>{const Ct=Ae.dom.contentWindow;co(Ct)&&Ct.postMessage(ht,V)})}}}})],ke=tW({id:d,header:g,body:p,footer:C,extraClasses:D,extraBehaviours:Q,extraStyles:_},t,k,l),fe=uZ(ke);return{dialog:ke,instanceApi:fe}},hZ=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{xa.hide(_),d()},p=Vs(Hx({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),C=ZU(),k=WU(g,s.providers),_=Yc(w9({lazySink:()=>s.getSink(),header:UU(C,k),body:jU(l,s.providers),footer:O.some(GU(qU([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Xe(np,g)],eventOrder:{}}));xa.show(_);const D=p.get(_);Tn.focus(D)}}},pZ=t=>{const s=t.shared;return{open:(l,d)=>{const g=V=>{xa.hide(D),d(V)},p=Vs(Hx({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),C=Hx({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),k=ZU(),_=WU(()=>g(!1),s.providers),D=Yc(w9({lazySink:()=>s.getSink(),header:UU(k,_),body:jU(l,s.providers),footer:O.some(GU(qU([],[C,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Xe(np,()=>g(!1)),Xe(AC,()=>g(!0))],eventOrder:{}}));xa.show(D);const M=p.get(D);Tn.focus(M)}}},bZ=(t,s)=>Ki(Fo("data",s,t)),vZ=t=>TC(t,".tox-alert-dialog")||TC(t,".tox-confirm-dialog"),yZ=(t,s,a)=>s&&a?[]:[Qc.config({contextual:{lazyContext:()=>O.some(ho(Je.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],CZ=t=>{const s=t.editor,a=uC(s),l=hZ(t.backstages.dialog),d=pZ(t.backstages.dialog),g=(z,Q,se)=>Q!==void 0&&Q.inline==="toolbar"?_(z,t.backstages.popup.shared.anchors.inlineDialog(),se,Q.ariaAttrs):Q!==void 0&&Q.inline==="cursor"?_(z,t.backstages.popup.shared.anchors.cursor(),se,Q.ariaAttrs):k(z,se),p=(z,Q)=>C(z,Q),C=(z,Q)=>{const se=ke=>{const fe=gZ(ke,{closeWindow:()=>{xa.hide(fe.dialog),Q(fe.instanceApi)}},s,t.backstages.dialog);return xa.show(fe.dialog),fe.instanceApi};return Us.openUrl(se,z)},k=(z,Q)=>{const se=(ke,fe,Ee)=>{const ht=fe,Ct=lZ({dataValidator:Ee,initialData:ht,internalDialog:ke},{redial:Us.redial,closeWindow:()=>{xa.hide(Ct.dialog),Q(Ct.instanceApi)}},t.backstages.dialog);return xa.show(Ct.dialog),Ct.instanceApi.setData(ht),Ct.instanceApi};return Us.open(se,z)},_=(z,Q,se,ke=!1)=>{const fe=(Ee,ht,Ae)=>{const Ct=bZ(ht,Ae),Lt=mr(),Dt=t.backstages.popup.shared.header.isPositionedAtTop(),dn={dataValidator:Ae,initialData:Ct,internalDialog:Ee},fn=()=>Lt.on(tn=>{Tr.reposition(tn),Qc.refresh(tn)}),Qn=iZ(dn,{redial:Us.redial,closeWindow:()=>{Lt.on(Tr.hide),s.off("ResizeEditor",fn),Lt.clear(),se(Qn.instanceApi)}},t.backstages.popup,ke),Oo=Yc(Tr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...Dt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ut([So("window-manager-inline-events",[Xe(Wd(),(tn,ro)=>{es(Qn.dialog,np)})]),...yZ(s,a,Dt)]),isExtraPart:(tn,ro)=>vZ(ro)}));return Lt.set(Oo),Tr.showWithin(Oo,ni(Qn.dialog),{anchor:Q},O.some(zr())),(!a||!Dt)&&(Qc.refresh(Oo),s.on("ResizeEditor",fn)),Qn.instanceApi.setData(Ct),an.focusIn(Qn.dialog),Qn.instanceApi};return Us.open(fe,z)};return{open:g,openUrl:p,alert:(z,Q)=>{l.open(z,Q)},close:z=>{z.close()},confirm:(z,Q)=>{d.open(z,Q)}}},wZ=t=>{dD(t),HR(t),c$(t)};var SZ=()=>{gn.add("silver",t=>{wZ(t);const{dialogs:s,popups:a,renderUI:l}=P$(t);eF.register(t,a.backstage.shared);const d=CZ({editor:t,backstages:{popup:a.backstage,dialog:s.backstage}}),g=()=>o_(t,{backstage:a.backstage},a.getMothership());return{renderUI:l,getWindowManagerImpl:te(d),getNotificationManagerImpl:g}})};SZ()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var vt=tinymce.util.Tools.resolve("tinymce.ModelManager");const On=(i,m,h)=>{var v;return h(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},wn=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&On(i,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Sn=i=>m=>wn(m)===i,En=i=>m=>typeof m===i,eo=i=>m=>i===m,ao=Sn("string"),xt=Sn("object"),Gt=Sn("array"),uo=eo(null),Wn=En("boolean"),Xo=eo(void 0),Zo=i=>i==null,Bt=i=>!Zo(i),$n=En("function"),co=En("number"),Qe=()=>{},_n=(i,m)=>(...h)=>i(m.apply(null,h)),Ye=(i,m)=>h=>i(m(h)),oe=i=>()=>i,Pt=i=>i,Ps=(i,m)=>i===m;function Zn(i,...m){return(...h)=>{const v=m.concat(h);return i.apply(null,v)}}const te=i=>m=>!i(m),cn=i=>()=>{throw new Error(i)},jo=i=>i(),At=oe(!1),ge=oe(!0);class X{constructor(m,h){this.tag=m,this.value=h}static some(m){return new X(!0,m)}static none(){return X.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?X.some(m(this.value)):X.none()}bind(m){return this.tag?m(this.value):X.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:X.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Bt(m)?X.some(m):X.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}X.singletonNone=new X(!1);const An=Array.prototype.slice,Kt=Array.prototype.indexOf,bt=Array.prototype.push,gn=(i,m)=>Kt.call(i,m),O=(i,m)=>gn(i,m)>-1,je=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const S=i[h];if(m(S,h))return!0}return!1},Eo=(i,m)=>{const h=[];for(let v=0;v<i;v++)h.push(m(v));return h},qt=(i,m)=>{const h=i.length,v=new Array(h);for(let S=0;S<h;S++){const A=i[S];v[S]=m(A,S)}return v},Le=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const S=i[h];m(S,h)}},lr=(i,m)=>{for(let h=i.length-1;h>=0;h--){const v=i[h];m(v,h)}},yo=(i,m)=>{const h=[],v=[];for(let S=0,A=i.length;S<A;S++){const I=i[S];(m(I,S)?h:v).push(I)}return{pass:h,fail:v}},oo=(i,m)=>{const h=[];for(let v=0,S=i.length;v<S;v++){const A=i[v];m(A,v)&&h.push(A)}return h},$s=(i,m,h)=>(lr(i,(v,S)=>{h=m(h,v,S)}),h),rn=(i,m,h)=>(Le(i,(v,S)=>{h=m(h,v,S)}),h),We=(i,m,h)=>{for(let v=0,S=i.length;v<S;v++){const A=i[v];if(m(A,v))return X.some(A);if(h(A,v))break}return X.none()},$=(i,m)=>We(i,m,At),Mr=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const S=i[h];if(m(S,h))return X.some(h)}return X.none()},nt=i=>{const m=[];for(let h=0,v=i.length;h<v;++h){if(!Gt(i[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+i);bt.apply(m,i[h])}return m},ze=(i,m)=>nt(qt(i,m)),at=(i,m)=>{for(let h=0,v=i.length;h<v;++h){const S=i[h];if(m(S,h)!==!0)return!1}return!0},Wt=i=>{const m=An.call(i,0);return m.reverse(),m},on=(i,m)=>{const h={};for(let v=0,S=i.length;v<S;v++){const A=i[v];h[String(A)]=m(A,v)}return h},zt=(i,m)=>{const h=An.call(i,0);return h.sort(m),h},Xt=(i,m)=>m>=0&&m<i.length?X.some(i[m]):X.none(),Be=i=>Xt(i,0),Go=i=>Xt(i,i.length-1),Fe=(i,m)=>{for(let h=0;h<i.length;h++){const v=m(i[h],h);if(v.isSome())return v}return X.none()},be=Object.keys,kt=Object.hasOwnProperty,Mt=(i,m)=>{const h=be(i);for(let v=0,S=h.length;v<S;v++){const A=h[v],I=i[A];m(I,A)}},qo=(i,m)=>jn(i,(h,v)=>({k:v,v:m(h,v)})),jn=(i,m)=>{const h={};return Mt(i,(v,S)=>{const A=m(v,S);h[A.k]=A.v}),h},Is=i=>(m,h)=>{i[h]=m},cs=(i,m,h,v)=>{Mt(i,(S,A)=>{(m(S,A)?h:v)(S,A)})},br=(i,m)=>{const h={};return cs(i,m,Is(h),Qe),h},mo=(i,m)=>{const h=[];return Mt(i,(v,S)=>{h.push(m(v,S))}),h},er=i=>mo(i,Pt),yn=(i,m)=>Ko(i,m)?X.from(i[m]):X.none(),Ko=(i,m)=>kt.call(i,m),Un=(i,m)=>Ko(i,m)&&i[m]!==void 0&&i[m]!==null,Lo=i=>{for(const m in i)if(kt.call(i,m))return!1;return!0};typeof window<"u"||Function("return this;")();const Jn=8,Do=9,is=11,Jr=1,ka=3,Dn=i=>i.dom.nodeName.toLowerCase(),vc=i=>i.dom.nodeType,lo=i=>m=>vc(m)===i,Zt=i=>vc(i)===Jn||Dn(i)==="#comment",In=lo(Jr),Zs=lo(ka),Qr=lo(Do),mi=lo(is),Jo=i=>m=>In(m)&&Dn(m)===i,nl=(i,m,h)=>{if(ao(h)||Wn(h)||co(h))i.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",i),new Error("Attribute value was not simple")},us=(i,m,h)=>{nl(i.dom,m,h)},No=(i,m)=>{const h=i.dom;Mt(m,(v,S)=>{nl(h,S,v)})},hn=(i,m)=>{Mt(m,(h,v)=>{h.fold(()=>{hs(i,v)},S=>{nl(i.dom,v,S)})})},fr=(i,m)=>{const h=i.dom.getAttribute(m);return h===null?void 0:h},Fa=(i,m)=>X.from(fr(i,m)),hs=(i,m)=>{i.dom.removeAttribute(m)},Ha=i=>rn(i.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),da=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,i),new Error(S)}return ec(v.childNodes[0])},Hl=(i,m)=>{const v=(m||document).createElement(i);return ec(v)},js=(i,m)=>{const v=(m||document).createTextNode(i);return ec(v)},ec=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},Z={fromHtml:da,fromTag:Hl,fromText:js,fromDom:ec,fromPoint:(i,m,h)=>X.from(i.dom.elementFromPoint(m,h)).map(ec)},De=(i,m)=>{const h=i.dom;if(h.nodeType!==Jr)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},$e=i=>i.nodeType!==Jr&&i.nodeType!==Do&&i.nodeType!==is||i.childElementCount===0,jt=(i,m)=>{const h=m===void 0?document:m.dom;return $e(h)?[]:qt(h.querySelectorAll(i),Z.fromDom)},Qt=(i,m)=>{const h=m===void 0?document:m.dom;return $e(h)?X.none():X.from(h.querySelector(i)).map(Z.fromDom)},Ft=(i,m)=>i.dom===m.dom,Qo=(i,m)=>{const h=i.dom,v=m.dom;return h===v?!1:h.contains(v)},Ro=De,Ln=i=>Z.fromDom(i.dom.ownerDocument),Js=i=>Qr(i)?i:Ln(i),Je=i=>Z.fromDom(Js(i).dom.documentElement),tr=i=>Z.fromDom(Js(i).dom.defaultView),ma=i=>X.from(i.dom.parentNode).map(Z.fromDom),tc=i=>X.from(i.dom.parentElement).map(Z.fromDom),Va=(i,m)=>{const h=$n(m)?m:At;let v=i.dom;const S=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const A=v.parentNode,I=Z.fromDom(A);if(S.push(I),h(I)===!0)break;v=A}return S},Cl=i=>X.from(i.dom.previousSibling).map(Z.fromDom),Nr=i=>X.from(i.dom.nextSibling).map(Z.fromDom),ds=i=>qt(i.dom.childNodes,Z.fromDom),vr=(i,m)=>{const h=i.dom.childNodes;return X.from(h[m]).map(Z.fromDom)},ms=i=>vr(i,0),nr=(i,m)=>{ma(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},Wc=(i,m)=>{Nr(i).fold(()=>{ma(i).each(S=>{Bo(S,m)})},v=>{nr(v,m)})},wl=(i,m)=>{ms(i).fold(()=>{Bo(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},Bo=(i,m)=>{i.dom.appendChild(m.dom)},Bd=(i,m,h)=>{vr(i,h).fold(()=>{Bo(i,m)},v=>{nr(v,m)})},fi=(i,m)=>{nr(i,m),Bo(m,i)},za=(i,m)=>{Le(m,(h,v)=>{const S=v===0?i:m[v-1];Wc(S,h)})},Os=(i,m)=>{Le(m,h=>{Bo(i,h)})},fa=i=>{i.dom.textContent="",Le(ds(i),m=>{_r(m)})},_r=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},ol=i=>{const m=ds(i);m.length>0&&za(i,m),_r(i)},nc=(i,m)=>Z.fromDom(i.dom.cloneNode(m)),Sl=i=>nc(i,!1),Vl=i=>nc(i,!0),xl=(i,m)=>{const h=Z.fromTag(m),v=Ha(i);return No(h,v),h},$i=(i,m)=>{const h=xl(i,m),v=ds(Vl(i));return Os(h,v),h},ns=(i,m)=>{const h=xl(i,m);Wc(i,h);const v=ds(i);return Os(h,v),_r(i),h},Tl=["tfoot","thead","tbody","colgroup"],ga=i=>O(Tl,i),yc=(i,m)=>({rows:i,columns:m}),kl=(i,m)=>({row:i,column:m}),sl=(i,m,h)=>({element:i,rowspan:m,colspan:h}),ea=(i,m,h,v)=>({element:i,rowspan:m,colspan:h,isNew:v}),zl=(i,m,h,v,S,A)=>({element:i,rowspan:m,colspan:h,row:v,column:S,isLocked:A}),rl=(i,m,h)=>({element:i,cells:m,section:h}),Ii=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),ws=(i,m,h)=>({element:i,isNew:m,isLocked:h}),Ea=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),j=(i,m,h,v)=>({startRow:i,startCol:m,finishRow:h,finishCol:v}),le=(i,m,h)=>({element:i,colspan:m,column:h}),he=(i,m)=>({element:i,columns:m}),Ie=i=>mi(i)&&Bt(i.dom.host),ot=$n(Element.prototype.attachShadow)&&$n(Node.prototype.getRootNode),un=oe(ot),fo=ot?i=>Z.fromDom(i.dom.getRootNode()):Js,or=i=>{const m=fo(i);return Ie(m)?X.some(m):X.none()},os=i=>Z.fromDom(i.dom.host),ir=i=>{if(un()&&Bt(i.target)){const m=Z.fromDom(i.target);if(In(m)&&sr(m)&&i.composed&&i.composedPath){const h=i.composedPath();if(h)return Be(h)}}return X.from(i.target)},sr=i=>Bt(i.dom.shadowRoot),gr=i=>{const m=Zs(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return or(Z.fromDom(m)).fold(()=>h.body.contains(m),Ye(gr,os))},Ua=()=>Br(Z.fromDom(document)),Br=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return Z.fromDom(m)},zr=(i,m,h)=>oo(Va(i,h),m),al=(i,m)=>oo(ds(i),m),cl=(i,m)=>{let h=[];return Le(ds(i),v=>{m(v)&&(h=h.concat([v])),h=h.concat(cl(v,m))}),h},Rn=(i,m,h)=>zr(i,v=>De(v,m),h),Ao=(i,m)=>al(i,h=>De(h,m)),Ls=(i,m)=>jt(m,i);var B=(i,m,h,v,S)=>i(h,v)?X.some(h):$n(S)&&S(h)?X.none():m(h,v,S);const G=(i,m,h)=>{let v=i.dom;const S=$n(h)?h:At;for(;v.parentNode;){v=v.parentNode;const A=Z.fromDom(v);if(m(A))return X.some(A);if(S(A))break}return X.none()},ne=(i,m,h)=>B((S,A)=>A(S),G,i,m,h),we=(i,m)=>{const h=S=>m(Z.fromDom(S));return $(i.dom.childNodes,h).map(Z.fromDom)},Et=(i,m)=>{const h=v=>{for(let S=0;S<v.childNodes.length;S++){const A=Z.fromDom(v.childNodes[S]);if(m(A))return X.some(A);const I=h(v.childNodes[S]);if(I.isSome())return I}return X.none()};return h(i.dom)},Fn=(i,m,h)=>G(i,v=>De(v,m),h),$t=(i,m)=>we(i,h=>De(h,m)),yr=(i,m)=>Qt(m,i),Gs=(i,m,h)=>B((S,A)=>De(S,A),Fn,i,m,h),Ge=(i,m,h=Ps)=>i.exists(v=>h(v,m)),ha=i=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(h);return m},Ss=(i,m)=>i!=null?m(i):X.none(),Pr=(i,m)=>i?X.some(m):X.none(),Li=(i,m,h)=>m===""||i.length>=m.length&&i.substr(h,h+m.length)===m,Vn=(i,m,h=0,v)=>{const S=i.indexOf(m,h);return S!==-1?Xo(v)?!0:S+m.length<=v:!1},gi=(i,m)=>Li(i,m,0),_a=(i,m)=>Li(i,m,i.length-m.length),rr=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),Hi=i=>i.length>0,Fs=i=>{const m=parseFloat(i);return isNaN(m)?X.none():X.some(m)},gu=i=>i.style!==void 0&&$n(i.style.getPropertyValue),Ds=(i,m,h)=>{if(!ao(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",i),new Error("CSS value must be a string: "+h);gu(i)&&i.style.setProperty(m,h)},fp=(i,m)=>{gu(i)&&i.style.removeProperty(m)},ps=(i,m,h)=>{const v=i.dom;Ds(v,m,h)},Cr=(i,m)=>{const h=i.dom;Mt(m,(v,S)=>{Ds(h,S,v)})},El=(i,m)=>{const h=i.dom,S=window.getComputedStyle(h).getPropertyValue(m);return S===""&&!gr(i)?hu(h,m):S},hu=(i,m)=>gu(i)?i.style.getPropertyValue(m):"",Vi=(i,m)=>{const h=i.dom,v=hu(h,m);return X.from(v).filter(S=>S.length>0)},ar=(i,m)=>{const h=i.dom;fp(h,m),Ge(Fa(i,"style").map(rr),"")&&hs(i,"style")},wr=(i,m)=>{const h=i.dom,v=m.dom;gu(h)&&gu(v)&&(v.style.cssText=h.style.cssText)},bs=(i,m,h=0)=>Fa(i,m).map(v=>parseInt(v,10)).getOr(h),hr=(i,m)=>bs(i,m,1),oc=i=>Jo("col")(i)?bs(i,"span",1)>1:hr(i,"colspan")>1,hi=i=>hr(i,"rowspan")>1,Sr=(i,m)=>parseInt(El(i,m),10),zi=oe(10),pu=oe(10),Wa=(i,m)=>bu(i,m,ge),bu=(i,m,h)=>ze(ds(i),v=>De(v,m)?h(v)?[v]:[]:bu(v,m,h)),Vg=(i,m,h=At)=>{if(h(m))return X.none();if(O(i,Dn(m)))return X.some(m);const v=S=>De(S,"table")||h(S);return Fn(m,i.join(","),v)},Cc=(i,m)=>Vg(["td","th"],i,m),pi=i=>Wa(i,"th,td"),td=i=>De(i,"colgroup")?Ao(i,"col"):ze(vu(i),m=>Ao(m,"col")),pa=(i,m)=>Gs(i,"table",m),Ul=i=>Wa(i,"tr"),vu=i=>pa(i).fold(oe([]),m=>Ao(m,"colgroup")),Pd=(i,m)=>qt(i,h=>{if(Dn(h)==="colgroup"){const v=qt(td(h),S=>{const A=bs(S,"span",1);return sl(S,1,A)});return rl(h,v,"colgroup")}else{const v=qt(pi(h),S=>{const A=bs(S,"rowspan",1),I=bs(S,"colspan",1);return sl(S,A,I)});return rl(h,v,m(h))}}),Ui=i=>ma(i).map(m=>{const h=Dn(m);return ga(h)?h:"tbody"}).getOr("tbody"),Em=i=>{const m=Ul(i),v=[...vu(i),...m];return Pd(v,Ui)},$d=(i,m)=>Pd(i,()=>m),ll=i=>{let m=!1,h;return(...v)=>(m||(m=!0,h=i.apply(null,v)),h)},zg=(i,m,h,v)=>{const S=i.isiOS()&&/ipad/i.test(h)===!0,A=i.isiOS()&&!S,I=i.isiOS()||i.isAndroid(),W=I||v("(pointer:coarse)"),K=S||!A&&I&&v("(min-device-width:768px)"),ae=A||I&&!K,ve=m.isSafari()&&i.isiOS()&&/safari/i.test(h)===!1,qe=!ae&&!K&&!ve;return{isiPad:oe(S),isiPhone:oe(A),isTablet:oe(K),isPhone:oe(ae),isTouch:oe(W),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:oe(ve),isDesktop:oe(qe)}},_m=(i,m)=>{for(let h=0;h<i.length;h++){const v=i[h];if(v.test(m))return v}},yu=(i,m)=>{const h=_m(i,m);if(!h)return{major:0,minor:0};const v=S=>Number(m.replace(h,"$"+S));return re(v(1),v(2))},Id=(i,m)=>{const h=String(m).toLowerCase();return i.length===0?il():yu(i,h)},il=()=>re(0,0),re=(i,m)=>({major:i,minor:m}),Wi={nu:re,detect:Id,unknown:il},ul=(i,m)=>Fe(m.brands,h=>{const v=h.brand.toLowerCase();return $(i,S=>{var A;return v===((A=S.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(S=>({current:S.name,version:Wi.nu(parseInt(h.version,10),0)}))}),Am=(i,m)=>{const h=String(m).toLowerCase();return $(i,v=>v.search(h))},Om=(i,m)=>Am(i,m).map(h=>{const v=Wi.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Ug=(i,m)=>Am(i,m).map(h=>{const v=Wi.detect(h.versionRegexes,m);return{current:h.name,version:v}}),zo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Aa=i=>m=>Vn(m,i),Rf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>Vn(i,"edge/")&&Vn(i,"chrome")&&Vn(i,"safari")&&Vn(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,zo],search:i=>Vn(i,"chrome")&&!Vn(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>Vn(i,"msie")||Vn(i,"trident")},{name:"Opera",versionRegexes:[zo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Aa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Aa("firefox")},{name:"Safari",versionRegexes:[zo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(Vn(i,"safari")||Vn(i,"mobile/"))&&Vn(i,"applewebkit")}],_l=[{name:"Windows",search:Aa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>Vn(i,"iphone")||Vn(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Aa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Aa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Aa("linux"),versionRegexes:[]},{name:"Solaris",search:Aa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Aa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Aa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Dm={browsers:oe(Rf),oses:oe(_l)},Cu="Edge",sc="Chromium",Mf="IE",nd="Opera",Wg="Firefox",wc="Safari",Ld=()=>Rm({current:void 0,version:Wi.unknown()}),Rm=i=>{const m=i.current,h=i.version,v=S=>()=>m===S;return{current:m,version:h,isEdge:v(Cu),isChromium:v(sc),isIE:v(Mf),isOpera:v(nd),isFirefox:v(Wg),isSafari:v(wc)}},od={unknown:Ld,nu:Rm,edge:oe(Cu),chromium:oe(sc),ie:oe(Mf),opera:oe(nd),firefox:oe(Wg),safari:oe(wc)},Ur="Windows",Fd="iOS",Nf="Android",Mm="Linux",wu="macOS",Zg="Solaris",Nm="FreeBSD",rc="ChromeOS",jg=()=>Wl({current:void 0,version:Wi.unknown()}),Wl=i=>{const m=i.current,h=i.version,v=S=>()=>m===S;return{current:m,version:h,isWindows:v(Ur),isiOS:v(Fd),isAndroid:v(Nf),isMacOS:v(wu),isLinux:v(Mm),isSolaris:v(Zg),isFreeBSD:v(Nm),isChromeOS:v(rc)}},sd={unknown:jg,nu:Wl,windows:oe(Ur),ios:oe(Fd),android:oe(Nf),linux:oe(Mm),macos:oe(wu),solaris:oe(Zg),freebsd:oe(Nm),chromeos:oe(rc)},Al={detect:(i,m,h)=>{const v=Dm.browsers(),S=Dm.oses(),A=m.bind(K=>ul(v,K)).orThunk(()=>Om(v,i)).fold(od.unknown,od.nu),I=Ug(S,i).fold(sd.unknown,sd.nu),W=zg(I,A,i,h);return{browser:A,os:I,deviceType:W}}},Gg=i=>window.matchMedia(i).matches;let qg=ll(()=>Al.detect(navigator.userAgent,X.from(navigator.userAgentData),Gg));const Bf=()=>qg(),Zl=(i,m)=>{const h=(W,K)=>{if(!co(K)&&!K.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+K);const ae=W.dom;gu(ae)&&(ae.style[i]=K+"px")},v=W=>{const K=m(W);if(K<=0||K===null){const ae=El(W,i);return parseFloat(ae)||0}return K},S=v,A=(W,K)=>rn(K,(ae,ve)=>{const qe=El(W,ve),dt=qe===void 0?0:parseInt(qe,10);return isNaN(dt)?ae:ae+dt},0);return{set:h,get:v,getOuter:S,aggregate:A,max:(W,K,ae)=>{const ve=A(W,ae);return K>ve?K-ve:0}}},E=(i,m)=>Fs(i).getOr(m),N=(i,m,h)=>E(El(i,m),h),U=(i,m,h,v)=>{const S=N(i,`padding-${h}`,0),A=N(i,`padding-${v}`,0),I=N(i,`border-${h}-width`,0),W=N(i,`border-${v}-width`,0);return m-S-A-I-W},ie=(i,m)=>{const h=i.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:U(i,v,"left","right")},pe=i=>N(i,"height",i.dom.offsetHeight),ft=i=>N(i,"width",i.dom.offsetWidth),pn=i=>ie(i,"content-box"),go=Zl("width",i=>i.dom.offsetWidth),to=i=>go.get(i),Yt=i=>go.getOuter(i),ho=pn,qs=ft,Oa=(i,m,h)=>{const v=i.cells,S=v.slice(0,m),A=v.slice(m),I=S.concat(h).concat(A);return w0(i,I)},Ar=(i,m,h)=>Oa(i,m,[h]),Bm=(i,m,h)=>{const v=i.cells;v[m]=h},w0=(i,m)=>Ea(i.element,m,i.section,i.isNew),Pn=(i,m)=>{const h=i.cells,v=qt(h,m);return Ea(i.element,v,i.section,i.isNew)},ur=(i,m)=>i.cells[m],Uo=(i,m)=>ur(i,m).element,Za=i=>i.cells.length,ba=i=>{const m=yo(i,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},Pf=(i,m,h)=>{const v=qt(i.cells,h);return Ea(m(i.element),v,i.section,!0)},$f="data-snooker-locked-cols",Kg=i=>Fa(i,$f).bind(m=>X.from(m.match(/\d+/g))).map(m=>on(m,ge)),ji=i=>{const m=rn(ba(i).rows,(v,S)=>(Le(S.cells,(A,I)=>{A.isLocked&&(v[I]=!0)}),v),{}),h=mo(m,(v,S)=>parseInt(S,10));return zt(h)},If=(i,m)=>i+","+m,S0=(i,m,h)=>X.from(i.access[If(m,h)]),w2=(i,m,h)=>{const v=xr(i,S=>h(m,S.element));return v.length>0?X.some(v[0]):X.none()},xr=(i,m)=>{const h=ze(i.all,v=>v.cells);return oo(h,m)},Yg=i=>{const m={};let h=0;return Le(i.cells,v=>{const S=v.colspan;Eo(S,A=>{const I=h+A;m[I]=le(v.element,S,I)}),h+=S}),m},nb=i=>{const m={},h=[],S=Be(i).map(ct=>ct.element).bind(pa).bind(Kg).getOr({});let A=0,I=0,W=0;const{pass:K,fail:ae}=yo(i,ct=>ct.section==="colgroup");Le(ae,ct=>{const He=[];Le(ct.cells,gt=>{let Ve=0;for(;m[If(W,Ve)]!==void 0;)Ve++;const Vt=Un(S,Ve.toString()),Cn=zl(gt.element,gt.rowspan,gt.colspan,W,Ve,Vt);for(let Kn=0;Kn<gt.colspan;Kn++)for(let Ks=0;Ks<gt.rowspan;Ks++){const Xa=W+Ks,Hr=Ve+Kn,pl=If(Xa,Hr);m[pl]=Cn,I=Math.max(I,Hr+1)}He.push(Cn)}),A++,h.push(rl(ct.element,He,ct.section)),W++});const{columns:ve,colgroups:qe}=Go(K).map(ct=>{const He=Yg(ct);return{colgroups:[he(ct.element,er(He))],columns:He}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:yc(A,I),access:m,all:h,columns:ve,colgroups:qe}},Gn={fromTable:i=>{const m=Em(i);return nb(m)},generate:nb,getAt:S0,findItem:w2,filterItems:xr,justCells:i=>ze(i.all,m=>m.cells),justColumns:i=>er(i.columns),hasColumns:i=>be(i.columns).length>0,getColumnAt:(i,m)=>X.from(i.columns[m])},ja=(i,m=ge)=>{const h=i.grid,v=Eo(h.columns,Pt),S=Eo(h.rows,Pt);return qt(v,A=>Gi(()=>ze(S,ae=>Gn.getAt(i,ae,A).filter(ve=>ve.column===A).toArray()),ae=>ae.colspan===1&&m(ae.element),()=>Gn.getAt(i,0,A)))},Gi=(i,m,h)=>{const v=i();return $(v,m).orThunk(()=>X.from(v[0]).orThunk(h)).map(I=>I.element)},Su=i=>{const m=i.grid,h=Eo(m.rows,Pt),v=Eo(m.columns,Pt);return qt(h,S=>Gi(()=>ze(v,K=>Gn.getAt(i,S,K).filter(ae=>ae.row===S).fold(oe([]),ae=>[ae])),K=>K.rowspan===1,()=>Gn.getAt(i,S,0)))},Xg=(i,m)=>{if(m<0||m>=i.length-1)return X.none();const h=i[m].fold(()=>{const S=Wt(i.slice(0,m));return Fe(S,(A,I)=>A.map(W=>({value:W,delta:I+1})))},S=>X.some({value:S,delta:0})),v=i[m+1].fold(()=>{const S=i.slice(m+1);return Fe(S,(A,I)=>A.map(W=>({value:W,delta:I+1})))},S=>X.some({value:S,delta:1}));return h.bind(S=>v.map(A=>{const I=A.delta+S.delta;return Math.abs(A.value-S.value)/I}))},Pm=(i,m)=>h=>sb(h)==="rtl"?m:i,sb=i=>El(i,"direction")==="rtl"?"rtl":"ltr",rb=Zl("height",i=>{const m=i.dom;return gr(i)?m.getBoundingClientRect().height:m.offsetHeight}),$m=i=>rb.get(i),Jg=i=>rb.getOuter(i),Im=pe,bi=(i,m)=>({left:i,top:m,translate:(v,S)=>bi(i+v,m+S)}),vi=bi,x0=i=>{const m=i.getBoundingClientRect();return vi(m.left,m.top)},ad=(i,m)=>i!==void 0?i:m!==void 0?m:0,xu=i=>{const m=i.dom.ownerDocument,h=m.body,v=m.defaultView,S=m.documentElement;if(h===i.dom)return vi(h.offsetLeft,h.offsetTop);const A=ad(v==null?void 0:v.pageYOffset,S.scrollTop),I=ad(v==null?void 0:v.pageXOffset,S.scrollLeft),W=ad(S.clientTop,h.clientTop),K=ad(S.clientLeft,h.clientLeft);return Ff(i).translate(I-K,A-W)},Ff=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?vi(v.offsetLeft,v.offsetTop):gr(i)?x0(m):vi(0,0)},cd=(i,m)=>({row:i,y:m}),Qg=(i,m)=>({col:i,x:m}),Wr=i=>xu(i).left+Yt(i),Ol=i=>xu(i).left,Lm=(i,m)=>Qg(i,Ol(m)),_t=(i,m)=>Qg(i,Wr(m)),Fm=i=>xu(i).top,jl=(i,m)=>cd(i,Fm(m)),eh=(i,m)=>cd(i,Fm(m)+Jg(m)),th=(i,m,h)=>{if(h.length===0)return[];const v=qt(h.slice(1),(A,I)=>A.map(W=>i(I,W))),S=h[h.length-1].map(A=>m(h.length-1,A));return v.concat([S])},S2=i=>-i,Tu={delta:Pt,positions:i=>th(jl,eh,i),edge:Fm},nn=Pm({delta:Pt,edge:Ol,positions:i=>th(Lm,_t,i)},{delta:S2,edge:Wr,positions:i=>th(_t,Lm,i)}),Mc={delta:(i,m)=>nn(m).delta(i,m),positions:(i,m)=>nn(m).positions(i,m),edge:i=>nn(i).edge(i)},et={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ab=(()=>{const i="[0-9]+",h="[eE]"+("[+-]?"+i),v="\\.",S=W=>`(?:${W})?`,I=`[+-]?(?:${["Infinity",i+v+S(i)+S(h),v+i+S(h),i+S(h)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),cb=(i,m)=>je(m,h=>je(et[h],v=>i===v)),Gl=(i,m)=>X.from(ab.exec(i)).bind(v=>{const S=Number(v[1]),A=v[2];return cb(A,m)?X.some({value:S,unit:A}):X.none()}),Nc=/(\d+(\.\d+)?)%/,Hm=/(\d+(\.\d+)?)px|em/,pr=Jo("col"),ta=(i,m,h)=>{const v=tc(i).getOrThunk(()=>Br(Ln(i)));return m(i)/h(v)*100},Bc=(i,m)=>{ps(i,"width",m+"px")},Ts=(i,m)=>{ps(i,"width",m+"%")},ku=(i,m)=>{ps(i,"height",m+"px")},lb=i=>Im(i)+"px",qi=(i,m,h,v)=>{const S=pa(i).map(A=>{const I=h(A);return Math.floor(m/100*I)}).getOr(m);return v(i,S),S},nh=(i,m,h,v)=>{const S=parseFloat(i);return _a(i,"%")&&Dn(m)!=="table"?qi(m,S,h,v):S},Vm=i=>{const m=lb(i);return m?nh(m,i,$m,ku):$m(i)},$r=(i,m,h)=>{const v=h(i),S=hr(i,m);return v/S},oh=(i,m)=>Vi(i,m).orThunk(()=>Fa(i,m).map(h=>h+"px")),zm=i=>oh(i,"width"),Fo=i=>oh(i,"height"),Ki=i=>ta(i,to,ho),ac=i=>pr(i)?to(i):qs(i),Yi=i=>$r(i,"rowspan",Vm),Zc=i=>zm(i).bind(h=>Gl(h,["fixed","relative","empty"])),ib=(i,m,h)=>{ps(i,"width",m+h)},Ra=i=>to(i)+"px",cc=i=>ta(i,to,ho)+"%",hp=i=>zm(i).exists(m=>Nc.test(m)),Ze=i=>zm(i).exists(m=>Hm.test(m)),dl=i=>zm(i).isNone(),T0=oe(Nc),Ir=Jo("col"),Hf=i=>zm(i).getOrThunk(()=>ac(i)+"px"),ld=i=>Fo(i).getOrThunk(()=>Yi(i)+"px"),Zr=i=>qt(Gn.justColumns(i),m=>X.from(m.element)),k0=i=>{const m=Bf().browser,h=m.isChromium()||m.isFirefox();return Ir(i)?h:!0},ql=(i,m,h,v,S,A)=>i.filter(v).fold(()=>A(Xg(h,m)),I=>S(I)),Xi=(i,m,h,v)=>{const S=ja(i),A=Gn.hasColumns(i)?Zr(i):S,I=[X.some(Mc.edge(m))].concat(qt(Mc.positions(S,m),K=>K.map(ae=>ae.x))),W=te(oc);return qt(A,(K,ae)=>ql(K,ae,I,W,ve=>{if(k0(ve))return h(ve);{const qe=Ss(S[ae],Pt);return ql(qe,ae,I,W,dt=>v(X.some(to(dt))),v)}},v))},jc=i=>i.map(m=>m+"px").getOr(""),Ho=(i,m)=>Xi(i,m,Hf,jc),Dl=(i,m,h)=>Xi(i,m,Ki,v=>v.fold(()=>h.minCellWidth(),S=>S/h.pixelWidth()*100)),Hd=(i,m,h)=>Xi(i,m,ac,v=>v.getOrThunk(h.minCellWidth)),Ma=(i,m,h,v,S)=>{const A=Su(i),I=[X.some(h.edge(m))].concat(qt(h.positions(A,m),W=>W.map(K=>K.y)));return qt(A,(W,K)=>ql(W,K,I,te(hi),v,S))},Vf=(i,m,h)=>Ma(i,m,h,Yi,v=>v.getOrThunk(pu)),zf=(i,m,h)=>Ma(i,m,h,ld,jc),Uf=(i,m)=>()=>gr(i)?m(i):parseFloat(Vi(i,"width").getOr("0")),Gc=i=>{const m=Uf(i,to),h=oe(0);return{width:m,pixelWidth:m,getWidths:(S,A)=>Hd(S,i,A),getCellDelta:h,singleColumnWidth:oe([0]),minCellWidth:h,setElementWidth:Qe,adjustTableWidth:Qe,isRelative:!0,label:"none"}},pp=i=>{const m=Uf(i,K=>parseFloat(cc(K))),h=Uf(i,to);return{width:m,pixelWidth:h,getWidths:(K,ae)=>Dl(K,i,ae),getCellDelta:K=>K/h()*100,singleColumnWidth:(K,ae)=>[100-K],minCellWidth:()=>zi()/h()*100,setElementWidth:Ts,adjustTableWidth:K=>{const ae=m(),ve=K/100*ae,qe=ae+ve;Ts(i,qe)},isRelative:!0,label:"percent"}},Ce=i=>{const m=Uf(i,to);return{width:m,pixelWidth:m,getWidths:(I,W)=>Hd(I,i,W),getCellDelta:Pt,singleColumnWidth:(I,W)=>[Math.max(zi(),I+W)-I],minCellWidth:zi,setElementWidth:Bc,adjustTableWidth:I=>{const W=m()+I;Bc(i,W)},isRelative:!1,label:"pixel"}},na=(i,m)=>T0().exec(m)!==null?pp(i):Ce(i),Hs={getTableSize:i=>zm(i).fold(()=>Gc(i),h=>na(i,h)),pixelSize:Ce,percentageSize:pp,noneSize:Gc},Kl=(i,m,h,v,S,A)=>({minRow:i,minCol:m,maxRow:h,maxCol:v,allCells:S,selectedCells:A}),oa=(i,m)=>{const h=i.grid.columns;let S=i.grid.rows,A=h,I=0,W=0;const K=[],ae=[];return Mt(i.access,ve=>{if(K.push(ve),m(ve)){ae.push(ve);const qe=ve.row,dt=qe+ve.rowspan-1,ct=ve.column,He=ct+ve.colspan-1;qe<S?S=qe:dt>I&&(I=dt),ct<A?A=ct:He>W&&(W=He)}}),Kl(S,A,I,W,K,ae)},sa=(i,m,h)=>{const v=i[h].element,S=Z.fromTag("td");Bo(S,Z.fromTag("br")),(m?Bo:wl)(v,S)},w=(i,m,h,v)=>{const S=oo(i,W=>W.section!=="colgroup"),A=m.grid.columns,I=m.grid.rows;for(let W=0;W<I;W++){let K=!1;for(let ae=0;ae<A;ae++)W<h.minRow||W>h.maxRow||ae<h.minCol||ae>h.maxCol||(Gn.getAt(m,W,ae).filter(v).isNone()?sa(S,K,W):K=!0)}},T=(i,m,h,v)=>{Mt(h.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&_r(I.element)});const S=oo(Wa(i,"tr"),I=>I.dom.childElementCount===0);Le(S,_r),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Le(Wa(i,"th,td"),I=>{hs(I,"rowspan"),hs(I,"colspan")}),hs(i,$f),hs(i,"data-snooker-col-series"),Hs.getTableSize(i).adjustTableWidth(v)},L=(i,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const S=Hd(m,i,h),A=rn(S,(ae,ve)=>ae+ve,0),K=rn(S.slice(v.minCol,v.maxCol+1),(ae,ve)=>ae+ve,0)/A*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(K)},H=(i,m)=>{const h=dt=>De(dt.element,m),v=Vl(i),S=Em(v),A=Hs.getTableSize(i),I=Gn.generate(S),W=oa(I,h),K="th:not("+m+"),td:not("+m+")",ae=bu(v,"th,td",dt=>De(dt,K));Le(ae,_r),w(S,I,W,h);const ve=Gn.fromTable(i),qe=L(i,ve,A,W);return T(v,W,I,qe),v},ue=" ",tt=((i,m)=>{const h=A=>{if(!i(A))throw new Error("Can only get "+m+" value of a "+m+" node");return v(A).getOr("")},v=A=>i(A)?X.from(A.dom.nodeValue):X.none();return{get:h,getOption:v,set:(A,I)=>{if(!i(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=I}}})(Zs,"text"),Tt=i=>tt.get(i),zn=i=>tt.getOption(i),no=(i,m)=>tt.set(i,m),ks=i=>Dn(i)==="img"?1:zn(i).fold(()=>ds(i).length,m=>m.length),ss=i=>zn(i).filter(m=>m.trim().length!==0||m.indexOf(ue)>-1).isSome(),vs=["img","br"],Pc=i=>ss(i)||O(vs,Dn(i)),Yl=i=>Et(i,Pc),Eu=i=>id(i,Pc),id=(i,m)=>{const h=v=>{const S=ds(v);for(let A=S.length-1;A>=0;A--){const I=S[A];if(m(I))return X.some(I);const W=h(I);if(W.isSome())return W}return X.none()};return h(i)},sh={scope:["row","col"]},ud=i=>()=>{const m=Z.fromTag("td",i.dom);return Bo(m,Z.fromTag("br",i.dom)),m},_u=i=>()=>Z.fromTag("col",i.dom),Um=i=>()=>Z.fromTag("colgroup",i.dom),Au=i=>()=>Z.fromTag("tr",i.dom),qc=(i,m,h)=>{const v=$i(i,m);return Mt(h,(S,A)=>{S===null?hs(v,A):us(v,A,S)}),v},rh=i=>i,bp=(i,m,h)=>Yl(i).map(S=>{const A=h.join(","),I=Rn(S,A,W=>Ft(W,i));return $s(I,(W,K)=>{const ae=Sl(K);return hs(ae,"contenteditable"),Bo(W,ae),ae},m)}).getOr(m),E0=(i,m)=>{Mt(sh,(h,v)=>Fa(i,v).filter(S=>O(h,S)).each(S=>us(m,v,S)))},xn=(i,m,h)=>{const v=(I,W)=>{wr(I.element,W),ar(W,"height"),I.colspan!==1&&ar(W,"width")},S=I=>{const W=Z.fromTag(Dn(I.element),m.dom),K=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ae=K.length>0?bp(I.element,W,K):W;return Bo(ae,Z.fromTag("br")),v(I,W),E0(I.element,W),i(I.element,W),W};return{col:I=>{const W=Z.fromTag(Dn(I.element),m.dom);return v(I,W),i(I.element,W),W},colgroup:Um(m),row:Au(m),cell:S,replace:qc,colGap:_u(m),gap:ud(m)}},ys=i=>({col:_u(i),colgroup:Um(i),row:Au(i),cell:ud(i),replace:rh,colGap:_u(i),gap:ud(i)}),va=(i,m)=>{const v=(m||document).createElement("div");return v.innerHTML=i,ds(Z.fromDom(v))},Sc=i=>qt(i,Z.fromDom),yi=i=>Z.fromDom(i.getBody()),xc=i=>m=>Ft(m,yi(i)),ml=i=>{hs(i,"data-mce-style");const m=h=>hs(h,"data-mce-style");Le(pi(i),m),Le(td(i),m),Le(Ul(i),m)},Ou=i=>Z.fromDom(i.selection.getStart()),vp=i=>i.getBoundingClientRect().width,Vd=i=>i.getBoundingClientRect().height,Wm=(i,m)=>{const h=i.dom.getStyle(m,"width")||i.dom.getAttrib(m,"width");return X.from(h).filter(Hi)},KT=i=>/^(\d+(\.\d+)?)%$/.test(i),Zm=i=>/^(\d+(\.\d+)?)px$/.test(i),YT=(i,m)=>{const h=m.column,v=m.column+m.colspan-1,S=m.row,A=m.row+m.rowspan-1;return h<=i.finishCol&&v>=i.startCol&&S<=i.finishRow&&A>=i.startRow},Wf=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,yp=(i,m)=>{let h=!0;const v=Zn(Wf,m);for(let S=m.startRow;S<=m.finishRow;S++)for(let A=m.startCol;A<=m.finishCol;A++)h=h&&Gn.getAt(i,S,A).exists(v);return h?X.some(m):X.none()},Cp=(i,m)=>j(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),jr=(i,m,h)=>{const v=Gn.findItem(i,m,Ft),S=Gn.findItem(i,h,Ft);return v.bind(A=>S.map(I=>Cp(A,I)))},zd=(i,m,h)=>jr(i,m,h).bind(v=>yp(i,v)),XT=(i,m,h,v)=>Gn.findItem(i,m,Ft).bind(S=>{const A=h>0?S.row+S.rowspan-1:S.row,I=v>0?S.column+S.colspan-1:S.column;return Gn.getAt(i,A+h,I+v).map(K=>K.element)}),db=(i,m,h)=>jr(i,m,h).map(v=>{const S=Gn.filterItems(i,Zn(YT,v));return qt(S,A=>A.element)}),Or=(i,m)=>{const h=(v,S)=>Qo(S,v);return Gn.findItem(i,m,h).map(v=>v.element)},x2=(i,m,h)=>pa(i).bind(v=>{const S=Ji(v);return XT(S,i,m,h)}),Ud=(i,m,h)=>{const v=Ji(i);return db(v,m,h)},wp=(i,m,h,v,S)=>{const A=Ji(i),I=Ft(i,h)?X.some(m):Or(A,m),W=Ft(i,S)?X.some(v):Or(A,v);return I.bind(K=>W.bind(ae=>db(A,K,ae)))},_0=(i,m,h)=>{const v=Ji(i);return zd(v,m,h)},Ji=Gn.fromTable;var Xl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],jm=()=>{const i=ae=>Z.fromDom(ae.dom.cloneNode(!1)),m=ae=>Js(ae).dom,h=ae=>In(ae)?Dn(ae)==="body"?!0:O(Xl,Dn(ae)):!1,v=ae=>In(ae)?O(["br","img","hr","input"],Dn(ae)):!1,S=ae=>In(ae)&&fr(ae,"contenteditable")==="false",A=(ae,ve)=>ae.dom.compareDocumentPosition(ve.dom),I=(ae,ve)=>{const qe=Ha(ae);No(ve,qe)},W=ae=>{const ve=Dn(ae);return O(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ve)},K=ae=>In(ae)?Fa(ae,"lang"):X.none();return{up:oe({selector:Fn,closest:Gs,predicate:G,all:Va}),down:oe({selector:Ls,predicate:cl}),styles:oe({get:El,getRaw:Vi,set:ps,remove:ar}),attrs:oe({get:fr,set:us,remove:hs,copyTo:I}),insert:oe({before:nr,after:Wc,afterAll:za,append:Bo,appendAll:Os,prepend:wl,wrap:fi}),remove:oe({unwrap:ol,remove:_r}),create:oe({nu:Z.fromTag,clone:i,text:Z.fromText}),query:oe({comparePosition:A,prevSibling:Cl,nextSibling:Nr}),property:oe({children:ds,name:Dn,parent:ma,document:m,isText:Zs,isComment:Zt,isElement:In,isSpecial:W,getLanguage:K,getText:Tt,setText:no,isBoundary:h,isEmptyTag:v,isNonEditable:S}),eq:Ft,is:Ro}};const ah=(i,m,h,v)=>{const S=h[0],A=h.slice(1);return v(i,m,S,A)},mb=(i,m,h)=>h.length>0?ah(i,m,h,Sp):X.none(),Sp=(i,m,h,v)=>{const S=m(i,h);return $s(v,(A,I)=>{const W=m(i,I);return Zf(i,A,W)},S)},Zf=(i,m,h)=>m.bind(v=>h.filter(Zn(i.eq,v))),fb=(i,m)=>Zn(i.eq,m),T2=(i,m,h,v=At)=>{const S=[m].concat(i.up().all(m)),A=[h].concat(i.up().all(h)),I=ve=>Mr(ve,v).fold(()=>ve,dt=>ve.slice(0,dt+1)),W=I(S),K=I(A),ae=$(W,ve=>je(K,fb(i,ve)));return{firstpath:W,secondpath:K,shared:ae}},JT=mb,gb=T2,xp=jm(),dd=(i,m)=>JT(xp,(h,v)=>i(v),m),ch=(i,m,h)=>gb(xp,i,m,h),Wd=i=>Fn(i,"table"),hb=(i,m,h)=>{const v=S=>A=>h!==void 0&&h(A)||Ft(A,S);return Ft(i,m)?X.some({boxes:X.some([i]),start:i,finish:m}):Wd(i).bind(S=>Wd(m).bind(A=>{if(Ft(S,A))return X.some({boxes:Ud(S,i,m),start:i,finish:m});if(Qo(S,A)){const I=Rn(m,"td,th",v(S)),W=I.length>0?I[I.length-1]:m;return X.some({boxes:wp(S,i,S,m,A),start:i,finish:W})}else if(Qo(A,S)){const I=Rn(i,"td,th",v(A)),W=I.length>0?I[I.length-1]:i;return X.some({boxes:wp(A,i,S,m,A),start:i,finish:W})}else return ch(i,m).shared.bind(I=>Gs(I,"table",h).bind(W=>{const K=Rn(m,"td,th",v(W)),ae=K.length>0?K[K.length-1]:m,ve=Rn(i,"td,th",v(W)),qe=ve.length>0?ve[ve.length-1]:i;return X.some({boxes:wp(W,i,S,m,A),start:qe,finish:ae})}))}))},Tp=(i,m)=>{const h=Ls(i,m);return h.length>0?X.some(h):X.none()},A0=(i,m)=>$(i,h=>De(h,m)),pb=(i,m,h)=>yr(i,m).bind(v=>yr(i,h).bind(S=>dd(Wd,[v,S]).map(A=>({first:v,last:S,table:A})))),k2=(i,m)=>Fn(i,"table").bind(h=>yr(h,m).bind(v=>hb(v,i).bind(S=>S.boxes.map(A=>({boxes:A,start:S.start,finish:S.finish}))))),O0=(i,m,h,v,S)=>A0(i,S).bind(A=>x2(A,m,h).bind(I=>k2(I,v))),bb=(i,m)=>Tp(i,m),es=(i,m,h)=>pb(i,m,h).bind(v=>{const S=K=>Ft(i,K),A="thead,tfoot,tbody,table",I=Fn(v.first,A,S),W=Fn(v.last,A,S);return I.bind(K=>W.bind(ae=>Ft(K,ae)?_0(v.table,v.first,v.last):X.none()))}),mn=Pt,Zd=i=>{const m=(v,S)=>Fa(v,S).exists(A=>parseInt(A,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&at(i,h)?X.some(i):X.none()},D0=(i,m,h)=>m.length<=1?X.none():es(i,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),jd="data-mce-selected",vb="td["+jd+"],th["+jd+"]",E2="["+jd+"]",Es="data-mce-first-selected",_2="td["+Es+"],th["+Es+"]",Gd="data-mce-last-selected",A2="td["+Gd+"],th["+Gd+"]",Xe=E2,md={selected:jd,selectedSelector:vb,firstSelected:Es,firstSelectedSelector:_2,lastSelected:Gd,lastSelectedSelector:A2},lh=(i,m,h)=>({element:h,mergable:D0(m,i,md),unmergable:Zd(i),selection:mn(i)}),kp=(i,m,h)=>({element:i,clipboard:m,generators:h}),QT=(i,m,h,v)=>({selection:mn(i),clipboard:h,generators:v}),jf=i=>pa(i).bind(m=>bb(m,md.firstSelectedSelector)).fold(oe(i),m=>m[0]),ih=i=>(m,h)=>{const v=Dn(m),S=v==="col"||v==="colgroup"?jf(m):m;return Gs(S,i,h)},uh=ih("th,td,caption"),O2=ih("th,td"),Na=i=>Sc(i.model.table.getSelectedCells()),dr=i=>oo(Na(i),m=>De(m,md.selectedSelector)),Ci=i=>pa(i[0]).map(m=>{const h=H(m,Xe);return ml(h),[h]}),ek=(i,m)=>qt(m,h=>i.selection.serializer.serialize(h.dom,{})).join(""),Jl=i=>qt(i,m=>m.dom.innerText).join(""),$c=(i,m)=>{i.on("BeforeGetContent",h=>{const v=S=>{h.preventDefault(),Ci(S).each(A=>{h.content=h.format==="text"?Jl(A):ek(i,A)})};if(h.selection===!0){const S=dr(i);S.length>=1&&v(S)}}),i.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=Na(i);Be(v).each(S=>{pa(S).each(A=>{const I=oo(va(h.content),K=>Dn(K)!=="meta"),W=Jo("table");if(I.length===1&&W(I[0])){h.preventDefault();const K=Z.fromDom(i.getDoc()),ae=ys(K),ve=kp(S,I[0],ae);m.pasteCells(A,ve).each(()=>{i.focus()})}})})}})},qd=(i,m)=>({element:i,offset:m}),Gm=(i,m,h)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?h(m).bind(v=>Gm(i,v,h).orThunk(()=>X.some(v))):X.none(),D2=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,lc=(i,m)=>{const h=Gm(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(h))return qd(h,D2(i,h));const v=i.property().children(h);return v.length>0?lc(i,v[v.length-1]):qd(h,D2(i,h))},R2=lc,M2=jm(),qm=i=>R2(M2,i),R0=(i,m)=>{oc(i)||Zc(i).each(v=>{const S=v.value/2;ib(i,S,v.unit),ib(m,S,v.unit)})},Du=i=>qt(i,oe(0)),yb=(i,m,h,v,S)=>S(i.slice(0,m)).concat(v).concat(S(i.slice(h))),M0=i=>(m,h,v,S)=>{if(i(v)){const A=Math.max(S,m[h]-Math.abs(v)),I=Math.abs(A-m[h]);return v>=0?I:-I}else return v},Ht=M0(i=>i<0),tk=M0(ge),N2=()=>{const i=(W,K,ae,ve,qe)=>{const dt=Ht(W,K,ve,qe);return yb(W,K,ae+1,[dt,0],Du)},m=(W,K,ae,ve)=>{const qe=(100+ae)/100,dt=Math.max(ve,(W[K]+ae)/qe);return qt(W,(ct,He)=>(He===K?dt:ct/qe)-ct)},h=(W,K,ae,ve,qe,dt)=>dt?m(W,K,ve,qe):i(W,K,ae,ve,qe);return{resizeTable:(W,K)=>W(K),clampTableDelta:Ht,calcLeftEdgeDeltas:h,calcMiddleDeltas:(W,K,ae,ve,qe,dt,ct)=>h(W,ae,ve,qe,dt,ct),calcRightEdgeDeltas:(W,K,ae,ve,qe,dt)=>{if(dt)return m(W,ae,ve,qe);{const ct=Ht(W,ae,ve,qe);return Du(W.slice(0,ae)).concat([ct])}},calcRedestributedWidths:(W,K,ae,ve)=>{if(ve){const dt=(K+ae)/K,ct=qt(W,He=>He/dt);return{delta:dt*100-100,newSizes:ct}}else return{delta:ae,newSizes:W}}}},Cb=()=>{const i=(I,W,K,ae,ve)=>{const qe=ae>=0?K:W,dt=tk(I,qe,ae,ve);return yb(I,W,K+1,[dt,-dt],Du)};return{resizeTable:(I,W,K)=>{K&&I(W)},clampTableDelta:(I,W,K,ae,ve)=>{if(ve){if(K>=0)return K;{const qe=rn(I,(dt,ct)=>dt+ct-ae,0);return Math.max(-qe,K)}}else return Ht(I,W,K,ae)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(I,W,K,ae,ve,qe)=>i(I,K,ae,ve,qe),calcRightEdgeDeltas:(I,W,K,ae,ve,qe)=>{if(qe)return Du(I);{const dt=ae/I.length;return qt(I,oe(dt))}},calcRedestributedWidths:(I,W,K,ae)=>({delta:0,newSizes:I})}},dh=i=>Gn.fromTable(i).grid,wb=Jo("th"),mh=i=>at(i,m=>wb(m.element)),Gf=(i,m)=>i&&m?"sectionCells":i?"section":"cells",fd=i=>{const m=i.section==="thead",h=Ge(N0(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:Gf(m,h)}:{type:"body"}},N0=i=>{const m=oo(i,h=>wb(h.element));return m.length===0?X.some("td"):m.length===i.length?X.some("th"):X.none()},Km=i=>{const m=qt(i,S=>fd(S).type),h=O(m,"header"),v=O(m,"footer");if(!h&&!v)return X.some("body");{const S=O(m,"body");return h&&!S&&!v?X.some("header"):!h&&!S&&v?X.some("footer"):X.none()}},nk=i=>Fe(i.all,m=>{const h=fd(m);return h.type==="header"?X.from(h.subType):X.none()}),Kd=(i,m,h)=>ws(h(i.element,m),!0,i.isLocked),qf=(i,m)=>i.section!==m?Ea(i.element,i.cells,m,i.isNew):i,Sb=()=>({transformRow:qf,transformCell:(i,m,h)=>{const v=h(i.element,m),S=Dn(v)!=="td"?ns(v,"td"):v;return ws(S,i.isNew,i.isLocked)}}),xb=()=>({transformRow:qf,transformCell:Kd}),Ep=()=>({transformRow:(i,m)=>qf(i,m==="thead"?"tbody":m),transformCell:Kd}),Ru={getTableSectionType:(i,m)=>{const h=Gn.fromTable(i);switch(nk(h).getOr(m)){case"section":return Sb();case"sectionCells":return xb();case"cells":return Ep()}},section:Sb,sectionCells:xb,cells:Ep,fallback:()=>({transformRow:Pt,transformCell:Kd})},fh=i=>Gs(i,"[contenteditable]"),Qi=(i,m=!1)=>gr(i)?i.dom.isContentEditable:fh(i).fold(oe(m),h=>fl(h)==="true"),fl=i=>i.dom.contentEditable,Ap=(i,m,h,v)=>{h===v?hs(i,m):us(i,m,h)},Ms=(i,m,h)=>{Go(Ao(i,m)).fold(()=>wl(i,h),v=>Wc(v,h))},sk=(i,m)=>{const h=$t(i,m).getOrThunk(()=>{const v=Z.fromTag(m,Ln(i).dom);return m==="thead"?Ms(i,"caption,colgroup",v):m==="colgroup"?Ms(i,"caption",v):Bo(i,v),v});return fa(h),h},B2=(i,m)=>{const h=[],v=[],S=ct=>qt(ct,He=>{He.isNew&&h.push(He.element);const gt=He.element;return fa(gt),Le(He.cells,Ve=>{Ve.isNew&&v.push(Ve.element),Ap(Ve.element,"colspan",Ve.colspan,1),Ap(Ve.element,"rowspan",Ve.rowspan,1),Bo(gt,Ve.element)}),gt}),A=ct=>ze(ct,He=>qt(He.cells,gt=>(Ap(gt.element,"span",gt.colspan,1),gt.element))),I=(ct,He)=>{const gt=sk(i,He),Vt=(He==="colgroup"?A:S)(ct);Os(gt,Vt)},W=ct=>{$t(i,ct).each(_r)},K=(ct,He)=>{ct.length>0?I(ct,He):W(He)},ae=[],ve=[],qe=[],dt=[];return Le(m,ct=>{switch(ct.section){case"thead":ae.push(ct);break;case"tbody":ve.push(ct);break;case"tfoot":qe.push(ct);break;case"colgroup":dt.push(ct);break}}),K(dt,"colgroup"),K(ae,"thead"),K(ve,"tbody"),K(qe,"tfoot"),{newRows:h,newCells:v}},eu=i=>qt(i,m=>{const h=Sl(m.element);return Le(m.cells,v=>{const S=Vl(v.element);Ap(S,"colspan",v.colspan,1),Ap(S,"rowspan",v.rowspan,1),Bo(h,S)}),h}),Tb=(i,m)=>qt(i,h=>ur(h,m)),P2=(i,m)=>i[m],gd=(i,m)=>{if(i.length===0)return 0;const h=i[0];return Mr(i,S=>!m(h.element,S.element)).getOr(i.length)},Ga=(i,m,h,v)=>{const S=P2(i,m),A=S.section==="colgroup",I=gd(S.cells.slice(h),v),W=A?1:gd(Tb(i.slice(m),h),v);return{colspan:I,rowspan:W}},rk=(i,m)=>{const h=qt(i,S=>qt(S.cells,At)),v=(S,A,I,W)=>{for(let K=S;K<S+I;K++)for(let ae=A;ae<A+W;ae++)h[K][ae]=!0};return qt(i,(S,A)=>{const I=ze(S.cells,(W,K)=>{if(h[A][K]===!1){const ae=Ga(i,A,K,m);return v(A,K,ae.rowspan,ae.colspan),[ea(W.element,ae.rowspan,ae.colspan,W.isNew)]}else return[]});return Ii(S.element,I,S.section,S.isNew)})},Op=(i,m,h)=>{const v=[];Le(i.colgroups,S=>{const A=[];for(let I=0;I<i.grid.columns;I++){const W=Gn.getColumnAt(i,I).map(K=>ws(K.element,h,!1)).getOrThunk(()=>ws(m.colGap(),!0,!1));A.push(W)}v.push(Ea(S.element,A,"colgroup",h))});for(let S=0;S<i.grid.rows;S++){const A=[];for(let K=0;K<i.grid.columns;K++){const ae=Gn.getAt(i,S,K).map(ve=>ws(ve.element,h,ve.isLocked)).getOrThunk(()=>ws(m.gap(),!0,!1));A.push(ae)}const I=i.all[S],W=Ea(I.element,A,I.section,h);v.push(W)}return v},Kf=(i,m)=>Op(i,m,!1),gh=i=>rk(i,Ft),kb=(i,m)=>Fe(i.all,h=>$(h.cells,v=>Ft(m,v.element))),$2=(i,m,h)=>{const v=qt(m.selection,A=>Cc(A).bind(I=>kb(i,I)).filter(h)),S=ha(v);return Pr(S.length>0,S)},Tc=(i,m,h,v,S)=>(A,I,W,K)=>{const ae=Gn.fromTable(A),ve=X.from(K==null?void 0:K.section).getOrThunk(Ru.fallback);return m(ae,I).map(dt=>{const ct=Kf(ae,W),He=i(ct,dt,Ft,S(W),ve),gt=ji(He.grid),Ve=gh(He.grid);return{info:dt,grid:Ve,cursor:He.cursor,lockedColumns:gt}}).bind(dt=>{const ct=B2(A,dt.grid),He=X.from(K==null?void 0:K.sizing).getOrThunk(()=>Hs.getTableSize(A)),gt=X.from(K==null?void 0:K.resize).getOrThunk(Cb);return h(A,dt.grid,dt.info,{sizing:He,resize:gt,section:ve}),v(A),hs(A,$f),dt.lockedColumns.length>0&&us(A,$f,dt.lockedColumns.join(",")),X.some({cursor:dt.cursor,newRows:ct.newRows,newCells:ct.newCells})})},U4=(i,m)=>Cc(m.element).bind(h=>kb(i,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),I2=(i,m)=>$2(i,m,ge).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),W4=(i,m)=>m.mergable,Z4=(i,m)=>m.unmergable,Ql=(i,m)=>$2(i,m,ge),kc=(i,m)=>$2(i,m,h=>!h.isLocked),Kc=(i,m)=>kb(i,m).exists(h=>!h.isLocked),L2=(i,m)=>at(m,h=>Kc(i,h)),ak=(i,m)=>W4(i,m).filter(h=>L2(i,h.cells)),Ym=(i,m)=>Z4(i,m).filter(h=>L2(i,h)),hh=(i,m,h,v)=>{const S=ba(i).rows;if(S.length===0)return i;for(let A=m.startRow;A<=m.finishRow;A++)for(let I=m.startCol;I<=m.finishCol;I++){const W=S[A],K=ur(W,I).isLocked;Bm(W,I,ws(v(),!1,K))}return i},Eb=(i,m,h,v)=>{const S=ba(i).rows;let A=!0;for(let I=0;I<S.length;I++)for(let W=0;W<Za(S[0]);W++){const K=S[I],ae=ur(K,W),ve=ae.element,qe=h(ve,m);qe&&!A?Bm(K,W,ws(v(),!0,ae.isLocked)):qe&&(A=!1)}return i},Dp=(i,m)=>rn(i,(h,v)=>je(h,S=>m(S.element,v.element))?h:h.concat([v]),[]),Mu=(i,m,h,v)=>(m>0&&m<i[0].cells.length&&Le(i,S=>{const A=S.cells[m-1];let I=0;const W=v();for(;S.cells.length>m+I&&h(A.element,S.cells[m+I].element);)Bm(S,m+I,ws(W,!0,S.cells[m+I].isLocked)),I++}),i),Yf=(i,m,h,v)=>{const S=ba(i).rows;if(m>0&&m<S.length){const A=S[m-1].cells,I=Dp(A,h);Le(I,W=>{let K=X.none();for(let ae=m;ae<S.length;ae++)for(let ve=0;ve<Za(S[0]);ve++){const qe=S[ae],dt=ur(qe,ve);h(dt.element,W.element)&&(K.isNone()&&(K=X.some(v())),K.each(He=>{Bm(qe,ve,ws(He,!0,dt.isLocked))}))}})}return i},ph=i=>{const m=A=>A(i),h=oe(i),v=()=>S,S={tag:!0,inner:i,fold:(A,I)=>I(i),isValue:ge,isError:At,map:A=>Rp.value(A(i)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:A=>{A(i)},toOptional:()=>X.some(i)};return S},bh=i=>{const m=()=>h,h={tag:!1,inner:i,fold:(v,S)=>v(i),isValue:At,isError:ge,map:m,mapError:v=>Rp.error(v(i)),bind:m,exists:At,forall:ge,getOr:Pt,or:Pt,getOrThunk:jo,orThunk:jo,getOrDie:cn(String(i)),each:Qe,toOptional:X.none};return h},Rp={value:ph,error:bh,fromOption:(i,m)=>i.fold(()=>bh(m),ph)},Lr=(i,m,h)=>{if(i.row>=m.length||i.column>Za(m[0]))return Rp.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),S=v[0].cells.slice(i.column),A=Za(h[0]),I=h.length;return Rp.value({rowDelta:v.length-I,colDelta:S.length-A})},Rl=(i,m)=>{const h=Za(i[0]),v=Za(m[0]);return{rowDelta:0,colDelta:h-v}},Yd=(i,m)=>{const h=i.length,v=m.length;return{rowDelta:h-v,colDelta:0}},ei=(i,m,h,v)=>{const S=m.section==="colgroup"?h.col:h.cell;return Eo(i,A=>ws(S(),!0,v(A)))},F2=(i,m,h,v)=>{const S=i[i.length-1];return i.concat(Eo(m,()=>{const A=S.section==="colgroup"?h.colgroup:h.row,I=Pf(S,A,Pt),W=ei(I.cells.length,I,h,K=>Ko(v,K.toString()));return w0(I,W)}))},ck=(i,m,h,v)=>qt(i,S=>{const A=ei(m,S,h,At);return Oa(S,v,A)}),lk=(i,m,h)=>qt(i,v=>rn(h,(S,A)=>{const I=ei(1,v,m,ge)[0];return Ar(S,A,I)},v)),ti=(i,m,h)=>{const v=m.colDelta<0?ck:Pt,S=m.rowDelta<0?F2:Pt,A=ji(i),I=Za(i[0]),W=je(A,ve=>ve===I-1),K=v(i,Math.abs(m.colDelta),h,W?I-1:I),ae=ji(K);return S(K,Math.abs(m.rowDelta),h,on(ae,ge))},Xm=(i,m,h,v)=>{const S=ur(i[m],h),A=Zn(v,S.element),I=i[m];return i.length>1&&Za(I)>1&&(h>0&&A(Uo(I,h-1))||h<I.cells.length-1&&A(Uo(I,h+1))||m>0&&A(Uo(i[m-1],h))||m<i.length-1&&A(Uo(i[m+1],h)))},H2=(i,m,h,v,S,A)=>{const I=i.row,W=i.column,K=h.length,ae=Za(h[0]),ve=I+K,qe=W+ae+A.length,dt=on(A,ge);for(let ct=I;ct<ve;ct++){let He=0;for(let gt=W;gt<qe;gt++){if(dt[gt]){He++;continue}Xm(m,ct,gt,S)&&Eb(m,Uo(m[ct],gt),S,v.cell);const Ve=gt-W-He,Vt=ur(h[ct-I],Ve),Cn=Vt.element,Kn=v.replace(Cn);Bm(m[ct],gt,ws(Kn,!0,Vt.isLocked))}}return m},V2=(i,m,h)=>{const v=Za(m[0]),S=ba(m).cols.length+i.row,A=Eo(v-i.column,W=>W+i.column),I=$(A,W=>at(h,K=>K!==W)).getOr(v-1);return{row:S,column:I}},B0=(i,m,h)=>oo(h,v=>v>=i.column&&v<=Za(m[0])+i.column),P0=(i,m,h,v,S)=>{const A=ji(m),I=V2(i,m,A),W=ba(h).rows,K=B0(I,W,A);return Lr(I,m,W).map(ve=>{const qe={...ve,colDelta:ve.colDelta-K.length},dt=ti(m,qe,v),ct=ji(dt),He=B0(I,W,ct);return H2(I,dt,W,v,S,He)})},Xf=(i,m,h,v,S)=>{Mu(m,i,S,v.cell);const A=Yd(h,m),I=ti(h,A,v),W=Yd(m,I),K=ti(m,W,v);return qt(K,(ae,ve)=>Oa(ae,i,I[ve].cells))},$0=(i,m,h,v,S)=>{Yf(m,i,S,v.cell);const A=ji(m),I=Rl(m,h),W={...I,colDelta:I.colDelta-A.length},K=ti(m,W,v),{cols:ae,rows:ve}=ba(K),qe=ji(K),dt=Rl(h,m),ct={...dt,colDelta:dt.colDelta+qe.length},He=lk(h,v,qe),gt=ti(He,ct,v);return[...ae,...ve.slice(0,i),...gt,...ve.slice(i,ve.length)]},z2=(i,m,h,v)=>Pf(i,S=>v(S,h),m),U2=(i,m,h,v,S)=>{const{rows:A,cols:I}=ba(i),W=A.slice(0,m),K=A.slice(m),ae=z2(A[h],(ve,qe)=>m>0&&m<A.length&&v(Uo(A[m-1],qe),Uo(A[m],qe))?ur(A[m],qe):ws(S(ve.element,v),!0,ve.isLocked),v,S);return[...I,...W,ae,...K]},W2=(i,m,h,v,S,A,I)=>{if(h==="colgroup"||!v){const W=ur(i,S);return ws(I(W.element,A),!0,!1)}else return ur(i,m)},Jm=(i,m,h,v,S)=>qt(i,A=>{const I=m>0&&m<Za(A)&&v(Uo(A,m-1),Uo(A,m)),W=W2(A,m,A.section,I,h,v,S);return Ar(A,m,W)}),vh=(i,m)=>ze(i,h=>{const v=h.cells,S=$s(m,(A,I)=>I>=0&&I<A.length?A.slice(0,I).concat(A.slice(I+1)):A,v);return S.length>0?[Ea(h.element,S,h.section,h.isNew)]:[]}),Jf=(i,m,h)=>{const{rows:v,cols:S}=ba(i);return[...S,...v.slice(0,m),...v.slice(h+1)]},Z2=(i,m,h,v)=>Uo(i[m],h)!==void 0&&m>0&&v(Uo(i[m-1],h),Uo(i[m],h)),ik=(i,m,h)=>m>0&&h(Uo(i,m-1),Uo(i,m)),I0=(i,m,h,v)=>Z2(i,m,h,v)||ik(i[m],h,v),Mp=(i,m)=>at(m,Pt)&&mh(i.cells)?ge:(v,S,A)=>!(Dn(v.element)==="th"&&m[A]),Np=(i,m)=>at(m,Pt)&&mh(i)?ge:(v,S,A)=>!(Dn(v.element)==="th"&&m[S]),j2=(i,m,h,v)=>{const S=I=>I==="row"?hi(m):oc(m),A=I=>S(I)?`${I}group`:I;return i?wb(m)?A(h):null:v&&wb(m)?A(h==="row"?"col":"row"):null},uk=(i,m)=>(h,v,S)=>X.some(j2(i,h.element,"col",m[S])),G2=(i,m)=>(h,v)=>X.some(j2(i,h.element,"row",m[v])),ya=(i,m,h)=>ws(h(i.element,m),!0,i.isLocked),_b=(i,m,h,v,S,A,I)=>{const W=K=>je(m,ae=>h(K.element,ae.element));return qt(i,(K,ae)=>Pn(K,(ve,qe)=>{if(W(ve)){const dt=I(ve,ae,qe)?S(ve,h,v):ve;return A(dt,ae,qe).each(ct=>{hn(dt.element,{scope:X.from(ct)})}),dt}else return ve}))},Bp=(i,m,h)=>ze(i,(v,S)=>I0(i,S,m,h)?[]:[ur(v,m)]),Qm=(i,m,h)=>{const v=i[m];return ze(v.cells,(S,A)=>I0(i,m,A,h)?[]:[S])},Ab=(i,m,h,v,S)=>{const A=ba(i).rows,I=ze(m,ve=>Bp(A,ve,v)),W=qt(A,ve=>mh(ve.cells)),K=Np(I,W),ae=G2(h,W);return _b(i,I,v,S,ya,ae,K)},Yc=(i,m,h,v,S,A,I)=>{const{cols:W,rows:K}=ba(i),ae=K[m[0]],ve=ze(m,Ve=>Qm(K,Ve,S)),qe=qt(ae.cells,(Ve,Vt)=>mh(Bp(K,Vt,S))),dt=[...K];Le(m,Ve=>{dt[Ve]=I.transformRow(K[Ve],h)});const ct=[...W,...dt],He=Mp(ae,qe),gt=uk(v,qe);return _b(ct,ve,S,A,I.transformCell,gt,He)},ni=(i,m,h,v)=>{const S=ba(i).rows,A=qt(m,I=>ur(S[I.row],I.column));return _b(i,A,h,v,ya,X.none,ge)},ef={generate:i=>{if(!Gt(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],h={};return Le(i,(v,S)=>{const A=be(v);if(A.length!==1)throw new Error("one and only one name per case");const I=A[0],W=v[I];if(h[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Gt(W))throw new Error("case arguments must be an array");m.push(I),h[I]=(...K)=>{const ae=K.length;if(ae!==W.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+W.length+" ("+W+"), got "+ae);return{fold:(...qe)=>{if(qe.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+qe.length);return qe[S].apply(null,K)},match:qe=>{const dt=be(qe);if(m.length!==dt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+dt.join(","));if(!at(m,He=>O(dt,He)))throw new Error("Not all branches were specified when using match. Specified: "+dt.join(", ")+`
Required: `+m.join(", "));return qe[I].apply(null,K)},log:qe=>{console.log(qe,{constructors:m,constructor:I,params:K})}}}}),h}},yh={...ef.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},K2=(i,m)=>i.length===0?yh.none():i.length===1?yh.only(0):m===0?yh.left(0,1):m===i.length-1?yh.right(m-1,m):m>0&&m<i.length-1?yh.middle(m-1,m,m+1):yh.none(),Y2=(i,m,h,v,S)=>{const A=i.slice(0),I=K2(i,m),W=oe(qt(A,oe(0))),K=dt=>v.singleColumnWidth(A[dt],h),ae=(dt,ct)=>S.calcLeftEdgeDeltas(A,dt,ct,h,v.minCellWidth(),v.isRelative),ve=(dt,ct,He)=>S.calcMiddleDeltas(A,dt,ct,He,h,v.minCellWidth(),v.isRelative),qe=(dt,ct)=>S.calcRightEdgeDeltas(A,dt,ct,h,v.minCellWidth(),v.isRelative);return I.fold(W,K,ae,ve,qe)},Xd=(i,m,h)=>{let v=0;for(let S=i;S<m;S++)v+=h[S]!==void 0?h[S]:0;return v},mk=(i,m)=>{const h=Gn.justCells(i);return qt(h,v=>{const S=Xd(v.column,v.column+v.colspan,m);return{element:v.element,width:S,colspan:v.colspan}})},Fr=(i,m)=>{const h=Gn.justColumns(i);return qt(h,(v,S)=>({element:v.element,width:m[S],colspan:v.colspan}))},wi=(i,m)=>{const h=Gn.justCells(i);return qt(h,v=>{const S=Xd(v.row,v.row+v.rowspan,m);return{element:v.element,height:S,rowspan:v.rowspan}})},Ch=(i,m)=>qt(i.all,(h,v)=>({element:h.element,height:m[v]})),Ob=i=>$s(i,(m,h)=>m+h,0),Db=(i,m)=>Gn.hasColumns(i)?Fr(i,m):mk(i,m),Pp=(i,m,h)=>{const v=Db(i,m);Le(v,S=>{h.setElementWidth(S.element,S.width)})},Jd=(i,m,h,v,S)=>{const A=Gn.fromTable(i),I=S.getCellDelta(m),W=S.getWidths(A,S),K=h===A.grid.columns-1,ae=v.clampTableDelta(W,h,I,S.minCellWidth(),K),ve=Y2(W,h,ae,S,v),qe=qt(ve,(dt,ct)=>dt+W[ct]);Pp(A,qe,S),v.resizeTable(S.adjustTableWidth,ae,K)},Rb=(i,m,h,v)=>{const S=Gn.fromTable(i),A=Vf(S,i,v),I=qt(A,(ve,qe)=>h===qe?Math.max(m+ve,pu()):ve),W=wi(S,I),K=Ch(S,I);Le(K,ve=>{ku(ve.element,ve.height)}),Le(W,ve=>{ku(ve.element,ve.height)});const ae=Ob(I);ku(i,ae)},wh=(i,m,h,v,S)=>{const A=Gn.generate(m),I=v.getWidths(A,v),W=v.pixelWidth(),{newSizes:K,delta:ae}=S.calcRedestributedWidths(I,W,h.pixelDelta,v.isRelative);Pp(A,K,v),v.adjustTableWidth(ae)},L0=(i,m,h,v)=>{const S=Gn.generate(m),A=v.getWidths(S,v);Pp(S,A,v)},Qf=i=>rn(i,(h,v)=>je(h,A=>A.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),Qd=Jo("col"),tf=Jo("colgroup"),X2=i=>Dn(i)==="tr"||tf(i),Pe=i=>{const m=bs(i,"colspan",1),h=bs(i,"rowspan",1);return{element:i,colspan:m,rowspan:h}},Sh=(i,m=Pe)=>{const h=W=>Qd(W.element)?i.col(W):i.cell(W),v=W=>tf(W.element)?i.colgroup(W):i.row(W),S=W=>{if(X2(W))return v({element:W});{const K=W,ae=h(m(K));return A=X.some({item:K,replacement:ae}),ae}};let A=X.none();return{getOrInit:(W,K)=>A.fold(()=>S(W),ae=>K(W,ae.item)?ae.replacement:S(W))}},fk=i=>m=>{const h=[],v=(I,W)=>$(h,K=>W(K.item,I)),S=I=>{const W=i==="td"?{scope:null}:{},K=m.replace(I,i,W);return h.push({item:I,sub:K}),K};return{replaceOrInit:(I,W)=>{if(X2(I)||Qd(I))return I;{const K=I;return v(K,W).fold(()=>S(K),ae=>W(I,ae.item)?ae.sub:S(K))}}}},F0=i=>Fa(i,"scope").map(m=>m.substr(0,3)),qr={modification:Sh,transform:fk,merging:i=>({unmerge:v=>{const S=F0(v);return S.each(A=>us(v,"scope",A)),()=>{const A=i.cell({element:v,colspan:1,rowspan:1});return ar(A,"width"),ar(v,"width"),S.each(I=>us(A,"scope",I)),A}},merge:v=>{const S=()=>{const A=ha(qt(v,F0));if(A.length===0)return X.none();{const I=A[0],W=["row","col"];return je(A,ae=>ae!==I&&O(W,ae))?X.none():X.from(I)}};return ar(v[0],"width"),S().fold(()=>hs(v[0],"scope"),A=>us(v[0],"scope",A+"group")),oe(v[0])}})},J2=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Q2=(i,m)=>{const h=i.property().name(m);return O(["ol","ul"],h)},$p=(i,m)=>{const h=i.property().name(m);return O(J2,h)},em=(i,m)=>O(["br","img","hr","input"],i.property().name(m)),xh=jm(),Co=i=>$p(xh,i),Ml=i=>Q2(xh,i),nf=i=>em(xh,i),H0=i=>{const m=Jo("br"),h=K=>at(K,ae=>m(ae)||Zs(ae)&&Tt(ae).trim().length===0),v=K=>Dn(K)==="li"||G(K,Ml).isSome(),S=K=>Nr(K).map(ae=>Co(ae)?!0:nf(ae)?Dn(ae)!=="img":!1).getOr(!1),A=K=>Eu(K).bind(ae=>{const ve=S(ae);return ma(ae).map(qe=>ve===!0||v(qe)||m(ae)||Co(qe)&&!Ft(K,qe)?[]:[Z.fromTag("br")])}).getOr([]),W=(()=>{const K=ze(i,ae=>{const ve=ds(ae);return h(ve)?[]:ve.concat(A(ae))});return K.length===0?[Z.fromTag("br")]:K})();fa(i[0]),Os(i[0],W)},Ns=i=>Qi(i,!0),V0=i=>{pi(i).length===0&&_r(i)},Ip=(i,m)=>({grid:i,cursor:m}),qa=i=>Fe(i,m=>Fe(m.cells,h=>{const v=h.element;return Pr(Ns(v),v)})),Nu=(i,m,h)=>{var v,S;const A=ba(i).rows;return X.from((S=(v=A[m])===null||v===void 0?void 0:v.cells[h])===null||S===void 0?void 0:S.element).filter(Ns).orThunk(()=>qa(A))},gl=(i,m,h)=>{const v=Nu(i,m,h);return Ip(i,v)},Lp=i=>rn(i,(h,v)=>je(h,A=>A.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),gk=(i,m,h,v)=>{const S=m[0].row,A=Lp(m),I=$s(A,(W,K)=>({grid:U2(W.grid,S,K.row+W.delta,h,v.getOrInit),delta:W.delta+1}),{grid:i,delta:0}).grid;return gl(I,S,m[0].column)},Th=(i,m,h,v)=>{const S=Lp(m),A=S[S.length-1],I=A.row+A.rowspan,W=$s(S,(K,ae)=>U2(K,I,ae.row,h,v.getOrInit),i);return gl(W,I,m[0].column)},Nb=(i,m,h,v)=>{const S=m.details,A=Qf(S),I=A[0].column,W=$s(A,(K,ae)=>({grid:Jm(K.grid,I,ae.column+K.delta,h,v.getOrInit),delta:K.delta+1}),{grid:i,delta:0}).grid;return gl(W,S[0].row,I)},Bb=(i,m,h,v)=>{const S=m.details,A=S[S.length-1],I=A.column+A.colspan,W=Qf(S),K=$s(W,(ae,ve)=>Jm(ae,I,ve.column,h,v.getOrInit),i);return gl(K,S[0].row,I)},Pb=(i,m,h,v)=>{const S=Qf(m),A=qt(S,W=>W.column),I=Ab(i,A,!0,h,v.replaceOrInit);return gl(I,m[0].row,m[0].column)},ew=(i,m,h,v)=>{const S=ni(i,m,h,v.replaceOrInit);return gl(S,m[0].row,m[0].column)},z0=(i,m,h,v)=>{const S=Qf(m),A=qt(S,W=>W.column),I=Ab(i,A,!1,h,v.replaceOrInit);return gl(I,m[0].row,m[0].column)},tw=(i,m,h,v)=>{const S=ni(i,m,h,v.replaceOrInit);return gl(S,m[0].row,m[0].column)},$b=(i,m)=>(h,v,S,A,I)=>{const W=Lp(v),K=qt(W,ve=>ve.row),ae=Yc(h,K,i,m,S,A.replaceOrInit,I);return gl(ae,v[0].row,v[0].column)},eg=$b("thead",!0),oi=$b("tbody",!1),hk=$b("tfoot",!1),Ba=(i,m,h,v)=>{const S=Qf(m.details),A=vh(i,qt(S,W=>W.column)),I=A.length>0?A[0].cells.length-1:0;return gl(A,S[0].row,Math.min(S[0].column,I))},nw=(i,m,h,v)=>{const S=Lp(m),A=Jf(i,S[0].row,S[S.length-1].row),I=A.length>0?A.length-1:0;return gl(A,Math.min(m[0].row,I),m[0].column)},tm=(i,m,h,v)=>{const S=m.cells;H0(S);const A=hh(i,m.bounds,h,v.merge(S));return Ip(A,X.from(S[0]))},pk=(i,m,h,v)=>{const A=$s(m,(I,W)=>Eb(I,W,h,v.unmerge(W)),i);return Ip(A,X.from(m[0]))},Xc=(i,m,h,v)=>{const A=((K,ae)=>{const ve=Gn.fromTable(K);return Op(ve,ae,!0)})(m.clipboard,m.generators),I=kl(m.row,m.column);return P0(I,i,A,m.generators,h).fold(()=>Ip(i,X.some(m.element)),K=>gl(K,m.row,m.column))},Ib=(i,m,h)=>{const v=$d(i,h.section),S=Gn.generate(v);return Op(S,m,!0)},tu=(i,m,h,v)=>{const S=ba(i).rows,A=m.cells[0].column,I=S[m.cells[0].row],W=Ib(m.clipboard,m.generators,I),K=Xf(A,i,W,m.generators,h);return gl(K,m.cells[0].row,m.cells[0].column)},U0=(i,m,h,v)=>{const S=ba(i).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=S[m.cells[0].row],W=Ib(m.clipboard,m.generators,I),K=Xf(A,i,W,m.generators,h);return gl(K,m.cells[0].row,m.cells[0].column)},ow=(i,m,h,v)=>{const S=ba(i).rows,A=m.cells[0].row,I=S[A],W=Ib(m.clipboard,m.generators,I),K=$0(A,i,W,m.generators,h);return gl(K,m.cells[0].row,m.cells[0].column)},bk=(i,m,h,v)=>{const S=ba(i).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=S[m.cells[0].row],W=Ib(m.clipboard,m.generators,I),K=$0(A,i,W,m.generators,h);return gl(K,m.cells[0].row,m.cells[0].column)},vk=(i,m)=>{const h=Gn.fromTable(i);return Ql(h,m).bind(S=>{const A=S[S.length-1],I=S[0].column,W=A.column+A.colspan,K=nt(qt(h.all,ae=>oo(ae.cells,ve=>ve.column>=I&&ve.column<W)));return N0(K)}).getOr("")},ic=(i,m)=>{const h=Gn.fromTable(i);return Ql(h,m).bind(N0).getOr("")},uc=(i,m)=>{const h=Gn.fromTable(i);return Ql(h,m).bind(S=>{const A=S[S.length-1],I=S[0].row,W=A.row+A.rowspan,K=h.all.slice(I,W);return Km(K)}).getOr("")},Ic=(i,m,h,v)=>L0(i,m,h,v.sizing),Ec=(i,m,h,v)=>wh(i,m,h,v.sizing,v.resize),Nl=(i,m)=>je(m,h=>h.column===0&&h.isLocked),Ca=(i,m)=>je(m,h=>h.column+h.colspan>=i.grid.columns&&h.isLocked),Lb=(i,m)=>{const h=ja(i),v=Qf(m);return rn(v,(S,A)=>{const W=h[A.column].map(Yt).getOr(0);return S+W},0)},Fb=i=>(m,h)=>Ql(m,h).filter(v=>!(i?Nl:Ca)(m,v)).map(v=>({details:v,pixelDelta:Lb(m,v)})),sw=(i,m)=>kc(i,m).map(h=>({details:h,pixelDelta:-Lb(i,h)})),Hb=i=>(m,h)=>I2(m,h).filter(v=>!(i?Nl:Ca)(m,v.cells)),Rt=qr.transform("th"),tg=qr.transform("td"),Vb=Tc(gk,Ql,Qe,Qe,qr.modification),W0=Tc(Th,Ql,Qe,Qe,qr.modification),yk=Tc(Nb,Fb(!0),Ec,Qe,qr.modification),j4=Tc(Bb,Fb(!1),Ec,Qe,qr.modification),rw=Tc(Ba,sw,Ec,V0,qr.modification),Ck=Tc(nw,Ql,Qe,V0,qr.modification),wk=Tc(Pb,kc,Qe,Qe,Rt),zb=Tc(z0,kc,Qe,Qe,tg),Sk=Tc(eg,kc,Qe,Qe,Rt),si=Tc(oi,kc,Qe,Qe,tg),Fp=Tc(hk,kc,Qe,Qe,tg),xk=Tc(ew,kc,Qe,Qe,Rt),aw=Tc(tw,kc,Qe,Qe,tg),ut=Tc(tm,ak,Ic,Qe,qr.merging),Tk=Tc(pk,Ym,Ic,Qe,qr.merging),Ka=Tc(Xc,U4,Ic,Qe,qr.modification),cw=Tc(tu,Hb(!0),Qe,Qe,qr.modification),Z0=Tc(U0,Hb(!1),Qe,Qe,qr.modification),kk=Tc(ow,I2,Qe,Qe,qr.modification),Si=Tc(bk,I2,Qe,Qe,qr.modification),G4=vk,Ek=ic,nm=uc,lw=(i,m)=>i.dispatch("NewRow",{node:m}),j0=(i,m)=>i.dispatch("NewCell",{node:m}),Bl=(i,m,h)=>{i.dispatch("TableModified",{...h,table:m})},xi=(i,m,h,v,S)=>{i.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:S})},Ub=i=>{i.dispatch("TableSelectionClear")},Bu=(i,m,h,v,S)=>{i.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:S})},iw=(i,m,h,v,S)=>{i.dispatch("ObjectResized",{target:m,width:h,height:v,origin:S})},Hp={structure:!1,style:!0},wa={structure:!0,style:!1},uw={structure:!0,style:!0},of=i=>m=>m.options.get(i),Wb="100%",dw=i=>{var m;const h=i.dom,v=(m=h.getParent(i.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:i.getBody();return ho(Z.fromDom(v))+"px"},G0=(i,m)=>zp(i)||!mw(i)?m:kh(i)?{...m,width:dw(i)}:{...m,width:Wb},_k=(i,m)=>zp(i)||mw(i)?m:kh(i)?{...m,width:dw(i)}:{...m,width:Wb},Ak=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=O(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=O(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},q0=i=>X.from(i.options.get("table_clone_elements")),Ok=i=>{const m=i.options.get("object_resizing");return O(m.split(","),"table")},ng=of("table_header_type"),Vp=of("table_column_resizing"),Zb=i=>Vp(i)==="preservetable",K0=i=>Vp(i)==="resizetable",og=of("table_sizing_mode"),sg=i=>og(i)==="relative",kh=i=>og(i)==="fixed",zp=i=>og(i)==="responsive",Dk=of("table_resize_bars"),mw=of("table_style_by_css"),Y0=i=>{const m=i.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:_k(i,h)},X0=i=>{const m=i.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:G0(i,h)},Rk=of("table_use_colgroups"),rg=(i,m)=>sg(i)?Hs.percentageSize(m):kh(i)?Hs.pixelSize(m):Hs.getTableSize(m),mr=(i,m,h)=>{const v=Hc=>Dn(yi(Hc))==="table",S=Hc=>!v(i)||dh(Hc).rows>1,A=Hc=>!v(i)||dh(Hc).columns>1,I=q0(i),W=K0(i)?Qe:R0,K=Hc=>{switch(ng(i)){case"section":return Ru.section();case"sectionCells":return Ru.sectionCells();case"cells":return Ru.cells();default:return Ru.getTableSectionType(Hc,"section")}},ae=(Hc,bl)=>bl.cursor.fold(()=>{const Wh=pi(Hc);return Be(Wh).filter(gr).map(Vu=>{h.clearSelectedCells(Hc.dom);const pc=i.dom.createRng();return pc.selectNode(Vu.dom),i.selection.setRng(pc),us(Vu,"data-mce-selected","1"),pc})},Wh=>{const Vu=qm(Wh),pc=i.dom.createRng();return pc.setStart(Vu.element.dom,Vu.offset),pc.setEnd(Vu.element.dom,Vu.offset),i.selection.setRng(pc),h.clearSelectedCells(Hc.dom),X.some(pc)}),ve=(Hc,bl,Wh,Vu)=>(pc,DE,RE=!1)=>{ml(pc);const Zh=Z.fromDom(i.getDoc()),Gy=xn(Wh,Zh,I),ME={sizing:rg(i,pc),resize:K0(i)?N2():Cb(),section:K(pc)};return bl(pc)?Hc(pc,DE,Gy,ME).bind(qy=>{m.refresh(pc.dom),Le(qy.newRows,b1=>{lw(i,b1.dom)}),Le(qy.newCells,b1=>{j0(i,b1.dom)});const Av=ae(pc,qy);return gr(pc)&&(ml(pc),RE||Bl(i,pc.dom,Vu)),Av.map(b1=>({rng:b1,effect:Vu}))}):X.none()},qe=ve(Ck,S,Qe,wa),dt=ve(rw,A,Qe,wa),ct=ve(Vb,ge,Qe,wa),He=ve(W0,ge,Qe,wa),gt=ve(yk,ge,W,wa),Ve=ve(j4,ge,W,wa),Vt=ve(ut,ge,Qe,wa),Cn=ve(Tk,ge,Qe,wa),Kn=ve(cw,ge,Qe,wa),Ks=ve(Z0,ge,Qe,wa),Xa=ve(kk,ge,Qe,wa),Hr=ve(Si,ge,Qe,wa),pl=ve(Ka,ge,Qe,uw),Cf=ve(xk,ge,Qe,wa),p1=ve(aw,ge,Qe,wa),Ev=ve(wk,ge,Qe,wa),_v=ve(zb,ge,Qe,wa),fs=ve(Sk,ge,Qe,wa),gc=ve(si,ge,Qe,wa),hc=ve(Fp,ge,Qe,wa);return{deleteRow:qe,deleteColumn:dt,insertRowsBefore:ct,insertRowsAfter:He,insertColumnsBefore:gt,insertColumnsAfter:Ve,mergeCells:Vt,unmergeCells:Cn,pasteColsBefore:Kn,pasteColsAfter:Ks,pasteRowsBefore:Xa,pasteRowsAfter:Hr,pasteCells:pl,makeCellsHeader:Cf,unmakeCellsHeader:p1,makeColumnsHeader:Ev,unmakeColumnsHeader:_v,makeRowsHeader:fs,makeRowsBody:gc,makeRowsFooter:hc,getTableRowType:nm,getTableCellType:Ek,getTableColType:G4}},J0=(i,m,h)=>{const v=bs(i,m,1);h===1||v<=1?hs(i,m):us(i,m,Math.min(h,v))},Lc=(i,m)=>h=>{const v=h.column+h.colspan-1,S=h.column;return v>=i&&S<m},Q0=(i,m,h)=>{if(Gn.hasColumns(i)){const v=oo(Gn.justColumns(i),Lc(m,h)),S=qt(v,I=>{const W=Vl(I.element);return J0(W,"span",h-m),W}),A=Z.fromTag("colgroup");return Os(A,S),[A]}else return[]},ey=(i,m,h)=>qt(i.all,v=>{const S=oo(v.cells,Lc(m,h)),A=qt(S,W=>{const K=Vl(W.element);return J0(K,"colspan",h-m),K}),I=Z.fromTag("tr");return Os(I,A),I}),Up=(i,m)=>{const h=Gn.fromTable(i);return kc(h,m).map(S=>{const A=S[S.length-1],I=S[0].column,W=A.column+A.colspan,K=Q0(h,I,W),ae=ey(h,I,W);return[...K,...ae]})},jb=(i,m,h)=>{const v=Gn.fromTable(i);return Ql(v,m).bind(A=>{const I=Op(v,h,!1),K=ba(I).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),ae=ze(K,qe=>{const dt=oo(qe.cells,ct=>!ct.isLocked);return dt.length>0?[{...qe,cells:dt}]:[]}),ve=gh(ae);return Pr(ve.length>0,ve)}).map(A=>eu(A))},Wp=ef.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),fw=(i,m,h)=>{const v=h.substring(0,h.length-i.length),S=parseFloat(v);return v===S.toString()?m(S):Wp.invalid(h)},sf={...Wp,from:i=>_a(i,"%")?fw("%",Wp.percent,i):_a(i,"px")?fw("px",Wp.pixels,i):Wp.invalid(i)},Mk=(i,m)=>qt(i,h=>sf.from(h).fold(()=>h,S=>S/m*100+"%",S=>S+"%")),Nk=(i,m,h)=>{const v=h/m;return qt(i,S=>sf.from(S).fold(()=>S,I=>I*v+"px",I=>I/100*h+"px"))},Bk=(i,m)=>{const h=i.fold(()=>oe(""),v=>{const S=v/m;return oe(S+"px")},()=>{const v=100/m;return oe(v+"%")});return Eo(m,h)},Pk=(i,m,h)=>i.fold(()=>m,v=>Nk(m,h,v),v=>Mk(m,h)),gw=(i,m,h)=>{const v=sf.from(h),S=at(i,A=>A==="0px")?Bk(v,i.length):Pk(v,i,m);return Gb(S)},ty=(i,m)=>i.length===0?m:$s(i,(h,v)=>sf.from(v).fold(oe(0),Pt,Pt)+h,0),$k=(i,m)=>{const h=Math.floor(i);return{value:h+m,remainder:i-h}},Ik=(i,m)=>sf.from(i).fold(oe(i),h=>h+m+"px",h=>h+m+"%"),Gb=i=>{if(i.length===0)return i;const m=$s(i,(v,S)=>{const A=sf.from(S).fold(()=>({value:S,remainder:0}),I=>$k(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[A.value].concat(v.output),remainder:v.remainder+A.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([Ik(h[h.length-1],Math.round(m.remainder))])},Lk=sf.from,hw=(i,m,h)=>{Le(m,v=>{const S=i.slice(v.column,v.colspan+v.column),A=ty(S,zi());ps(v.element,"width",A+h)})},Fk=(i,m,h)=>{Le(m,(v,S)=>{const A=ty([i[S]],zi());ps(v.element,"width",A+h)})},Zp=(i,m,h,v)=>{Le(h,S=>{const A=i.slice(S.row,S.rowspan+S.row),I=ty(A,pu());ps(S.element,"height",I+v)}),Le(m,(S,A)=>{ps(S.element,"height",i[A])})},ny=i=>Lk(i).fold(oe("px"),oe("px"),oe("%")),pw=(i,m,h)=>{const v=Gn.fromTable(i),S=v.all,A=Gn.justCells(v),I=Gn.justColumns(v);m.each(W=>{const K=ny(W),ae=to(i),ve=Ho(v,i),qe=gw(ve,ae,W);Gn.hasColumns(v)?Fk(qe,I,K):hw(qe,A,K),ps(i,"width",W)}),h.each(W=>{const K=ny(W),ae=$m(i),ve=zf(v,i,Tu),qe=gw(ve,ae,W);Zp(qe,S,A,K),ps(i,"height",W)})},bw=hp,vw=Ze,ag=dl,cg=i=>{hs(i,"width")},rf=i=>{const m=cc(i);pw(i,X.some(m),X.none()),cg(i)},Eh=i=>{const m=Ra(i);pw(i,X.some(m),X.none()),cg(i)},yw=i=>{ar(i,"width");const m=td(i),h=m.length>0?m:pi(i);Le(h,v=>{ar(v,"width"),cg(v)}),cg(i)},om={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},oy=()=>Z.fromTag("th"),Hk=()=>Z.fromTag("td"),af=()=>Z.fromTag("col"),qb=(i,m,h,v)=>{const S=Z.fromTag("tr");for(let A=0;A<i;A++){const I=v<m||A<h?oy():Hk();A<h&&us(I,"scope","row"),v<m&&us(I,"scope","col"),Bo(I,Z.fromTag("br")),Bo(S,I)}return S},Vk=i=>{const m=Z.fromTag("colgroup");return Eo(i,()=>Bo(m,af())),m},sy=(i,m,h,v)=>Eo(i,S=>qb(m,h,v,S)),zk=(i,m,h,v,S,A=om)=>{const I=Z.fromTag("table"),W=S!=="cells";Cr(I,A.styles),No(I,A.attributes),A.colGroups&&Bo(I,Vk(m));const K=Math.min(i,h);if(W&&h>0){const ct=Z.fromTag("thead");Bo(I,ct);const gt=sy(h,m,S==="sectionCells"?K:0,v);Os(ct,gt)}const ae=Z.fromTag("tbody");Bo(I,ae);const ve=W?i-K:i,dt=sy(ve,m,W?0:h,v);return Os(ae,dt),I},Uk=i=>i.dom.innerHTML,ry=i=>{const m=Z.fromTag("div"),h=Z.fromDom(i.dom.cloneNode(!0));return Bo(m,h),Uk(m)},Cw=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},ww=(i,m)=>{yr(m,"td,th").each(Zn(Cw,i))},ay=(i,m)=>{Le(Ls(m,"tr"),h=>{lw(i,h.dom),Le(Ls(h,"th,td"),v=>{j0(i,v.dom)})})},Sw=i=>ao(i)&&i.indexOf("%")!==-1,xw=(i,m,h,v,S)=>{const A=X0(i),I={styles:A,attributes:Y0(i),colGroups:Rk(i)};return i.undoManager.ignore(()=>{const W=zk(h,m,S,v,ng(i),I);us(W,"data-mce-id","__mce");const K=ry(W);i.insertContent(K),i.addVisual()}),yr(yi(i),'table[data-mce-id="__mce"]').map(W=>(kh(i)?Eh(W):zp(i)?yw(W):(sg(i)||Sw(A.width))&&rf(W),ml(W),hs(W,"data-mce-id"),ay(i,W),ww(i,W),W.dom)).getOrNull()},Wk=(i,m,h,v={})=>{const S=A=>co(A)&&A>0;if(S(m)&&S(h)){const A=v.headerRows||0,I=v.headerColumns||0;return xw(i,h,m,I,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Kb=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Tw="x-tinymce/dom-table-",Yb=Tw+"rows",hd=Tw+"columns",cy=i=>{const m=Kb.FakeClipboardItem(i);Kb.write([m])},ly=i=>{var m;const h=(m=Kb.read())!==null&&m!==void 0?m:[];return Fe(h,v=>X.from(v.getType(i)))},kw=i=>{ly(i).isSome()&&Kb.clear()},Ew=i=>{i.fold(K4,m=>cy({[Yb]:m}))},iy=()=>ly(Yb),K4=()=>kw(Yb),Xb=i=>{i.fold(Gp,m=>cy({[hd]:m}))},jp=()=>ly(hd),Gp=()=>kw(hd),lg=i=>uh(Ou(i),xc(i)),Zk=i=>O2(Ou(i),xc(i)),uy=(i,m)=>{const h=xc(i),v=()=>lg(i).each(Ve=>{pa(Ve,h).filter(te(h)).each(Vt=>{const Cn=Z.fromText("");if(Wc(Vt,Cn),_r(Vt),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const Kn=i.dom.createRng();Kn.setStart(Cn.dom,0),Kn.setEnd(Cn.dom,0),i.selection.setRng(Kn),i.nodeChanged()}})}),S=Ve=>lg(i).each(Vt=>{zp(i)||kh(i)||sg(i)||pa(Vt,h).each(Kn=>{Ve==="relative"&&!bw(Kn)?rf(Kn):Ve==="fixed"&&!vw(Kn)?Eh(Kn):Ve==="responsive"&&!ag(Kn)&&yw(Kn),ml(Kn),Bl(i,Kn.dom,wa)})}),A=Ve=>pa(Ve,h),I=Ve=>Zk(i).bind(Vt=>A(Vt).map(Cn=>Ve(Cn,Vt))),W=(Ve,Vt)=>{I(Cn=>{i.formatter.toggle("tableclass",{value:Vt},Cn.dom),Bl(i,Cn.dom,Hp)})},K=(Ve,Vt)=>{I(Cn=>{const Kn=Na(i),Xa=at(Kn,Hr=>i.formatter.match("tablecellclass",{value:Vt},Hr.dom))?i.formatter.remove:i.formatter.apply;Le(Kn,Hr=>Xa("tablecellclass",{value:Vt},Hr.dom)),Bl(i,Cn.dom,Hp)})},ae=()=>{lg(i).each(Ve=>{pa(Ve,h).each(Vt=>{$t(Vt,"caption").fold(()=>{const Cn=Z.fromTag("caption");Bo(Cn,Z.fromText("Caption")),Bd(Vt,Cn,0),i.selection.setCursorLocation(Cn.dom,0)},Cn=>{Jo("caption")(Ve)&&Qt("td",Vt).each(Kn=>i.selection.setCursorLocation(Kn.dom,0)),_r(Cn)}),Bl(i,Vt.dom,wa)})})},ve=Ve=>{i.focus()},qe=(Ve,Vt=!1)=>I((Cn,Kn)=>{const Ks=lh(Na(i),Cn,Kn);Ve(Cn,Ks,Vt).each(ve)}),dt=()=>I((Ve,Vt)=>{const Cn=lh(Na(i),Ve,Vt),Kn=xn(Qe,Z.fromDom(i.getDoc()),X.none());return jb(Ve,Cn,Kn)}),ct=()=>I((Ve,Vt)=>{const Cn=lh(Na(i),Ve,Vt);return Up(Ve,Cn)}),He=(Ve,Vt)=>Vt().each(Cn=>{const Kn=qt(Cn,Ks=>Vl(Ks));I((Ks,Xa)=>{const Hr=ys(Z.fromDom(i.getDoc())),pl=QT(Na(i),Xa,Kn,Hr);Ve(Ks,pl).each(ve)})}),gt=Ve=>(Vt,Cn)=>yn(Cn,"type").each(Kn=>{qe(Ve(Kn),Cn.no_events)});Mt({mceTableSplitCells:()=>qe(m.unmergeCells),mceTableMergeCells:()=>qe(m.mergeCells),mceTableInsertRowBefore:()=>qe(m.insertRowsBefore),mceTableInsertRowAfter:()=>qe(m.insertRowsAfter),mceTableInsertColBefore:()=>qe(m.insertColumnsBefore),mceTableInsertColAfter:()=>qe(m.insertColumnsAfter),mceTableDeleteCol:()=>qe(m.deleteColumn),mceTableDeleteRow:()=>qe(m.deleteRow),mceTableCutCol:()=>ct().each(Ve=>{Xb(Ve),qe(m.deleteColumn)}),mceTableCutRow:()=>dt().each(Ve=>{Ew(Ve),qe(m.deleteRow)}),mceTableCopyCol:()=>ct().each(Ve=>Xb(Ve)),mceTableCopyRow:()=>dt().each(Ve=>Ew(Ve)),mceTablePasteColBefore:()=>He(m.pasteColsBefore,jp),mceTablePasteColAfter:()=>He(m.pasteColsAfter,jp),mceTablePasteRowBefore:()=>He(m.pasteRowsBefore,iy),mceTablePasteRowAfter:()=>He(m.pasteRowsAfter,iy),mceTableDelete:v,mceTableCellToggleClass:K,mceTableToggleClass:W,mceTableToggleCaption:ae,mceTableSizingMode:(Ve,Vt)=>S(Vt),mceTableCellType:gt(Ve=>Ve==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:gt(Ve=>Ve==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:gt(Ve=>{switch(Ve){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Ve,Vt)=>i.addCommand(Vt,Ve)),i.addCommand("mceInsertTable",(Ve,Vt)=>{Wk(i,Vt.rows,Vt.columns,Vt.options)}),i.addCommand("mceTableApplyCellStyle",(Ve,Vt)=>{const Cn=Xa=>"tablecell"+Xa.toLowerCase().replace("-","");if(!xt(Vt))return;const Kn=Na(i);if(Kn.length===0)return;const Ks=br(Vt,(Xa,Hr)=>i.formatter.has(Cn(Hr))&&ao(Xa));Lo(Ks)||(Mt(Ks,(Xa,Hr)=>{const pl=Cn(Hr);Le(Kn,Cf=>{Xa===""?i.formatter.remove(pl,{value:null},Cf.dom,!0):i.formatter.apply(pl,{value:Xa},Cf.dom)})}),A(Kn[0]).each(Xa=>Bl(i,Xa.dom,Hp)))})},jk=(i,m)=>{const h=xc(i),v=S=>O2(Ou(i)).bind(A=>pa(A,h).map(I=>{const W=lh(Na(i),I,A);return S(I,W)})).getOr("");Mt({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(S,A)=>i.addQueryValueHandler(A,S))},Jb=ef.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),qp=(i,m,h,v)=>i.fold(m,h,v),_w=i=>i.fold(Pt,Pt,Pt),Gk=Jb.before,qk=Jb.on,Kk=Jb.after,Pa={before:Gk,on:qk,after:Kk,cata:qp,getStart:_w},sm={create:(i,m)=>({selection:i,kill:m})},rm=(i,m)=>{const h=i.document.createRange();return h.selectNode(m.dom),h},Yk=(i,m)=>{const h=i.document.createRange();return cf(h,m),h},cf=(i,m)=>i.selectNodeContents(m.dom),Pu=(i,m)=>{m.fold(h=>{i.setStartBefore(h.dom)},(h,v)=>{i.setStart(h.dom,v)},h=>{i.setStartAfter(h.dom)})},Qb=(i,m)=>{m.fold(h=>{i.setEndBefore(h.dom)},(h,v)=>{i.setEnd(h.dom,v)},h=>{i.setEndAfter(h.dom)})},ev=(i,m,h)=>{const v=i.document.createRange();return Pu(v,m),Qb(v,h),v},dy=(i,m,h,v,S)=>{const A=i.document.createRange();return A.setStart(m.dom,h),A.setEnd(v.dom,S),A},Aw=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),am=i=>{const m=i.getClientRects(),h=m.length>0?m[0]:i.getBoundingClientRect();return h.width>0||h.height>0?X.some(h).map(Aw):X.none()},pd=ef.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),tv=(i,m,h)=>m(Z.fromDom(h.startContainer),h.startOffset,Z.fromDom(h.endContainer),h.endOffset),Ow=(i,m)=>m.match({domRange:h=>({ltr:oe(h),rtl:X.none}),relative:(h,v)=>({ltr:ll(()=>ev(i,h,v)),rtl:ll(()=>X.some(ev(i,v,h)))}),exact:(h,v,S,A)=>({ltr:ll(()=>dy(i,h,v,S,A)),rtl:ll(()=>X.some(dy(i,S,A,h,v)))})}),Kp=(i,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(S=>S.collapsed===!1).map(S=>pd.rtl(Z.fromDom(S.endContainer),S.endOffset,Z.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>tv(i,pd.ltr,h)):tv(i,pd.ltr,h)},Ah=(i,m)=>{const h=Ow(i,m);return Kp(i,h)},_c=(i,m)=>Ah(i,m).match({ltr:(v,S,A,I)=>{const W=i.document.createRange();return W.setStart(v.dom,S),W.setEnd(A.dom,I),W},rtl:(v,S,A,I)=>{const W=i.document.createRange();return W.setStart(A.dom,I),W.setEnd(v.dom,S),W}});pd.ltr,pd.rtl;const lf={create:(i,m,h,v)=>({start:i,soffset:m,finish:h,foffset:v})},my={create:(i,m,h,v)=>({start:Pa.on(i,m),finish:Pa.on(h,v)})},$u=(i,m)=>{const h=_c(i,m);return lf.create(Z.fromDom(h.startContainer),h.startOffset,Z.fromDom(h.endContainer),h.endOffset)},Yp=my.create,nv=(i,m,h,v,S,A,I)=>Ft(h,S)&&v===A?X.none():Gs(h,"td,th",m).bind(W=>Gs(S,"td,th",m).bind(K=>ig(i,m,W,K,I))),ig=(i,m,h,v,S)=>Ft(h,v)?X.none():hb(h,v,m).bind(A=>{const I=A.boxes.getOr([]);return I.length>1?(S(i,I,A.start,A.finish),X.some(sm.create(X.some(Yp(h,0,h,ks(h))),!0))):X.none()}),Xk=(i,m,h,v,S)=>{const A=I=>(S.clearBeforeUpdate(h),S.selectRange(h,I.boxes,I.start,I.finish),I.boxes);return O0(v,i,m,S.firstSelectedSelector,S.lastSelectedSelector).map(A)},Oh=(i,m)=>({item:i,mode:m}),Rw=(i,m,h,v=bd)=>i.property().parent(m).map(S=>Oh(S,v)),bd=(i,m,h,v=Dh)=>h.sibling(i,m).map(S=>Oh(S,v)),Dh=(i,m,h,v=Dh)=>{const S=i.property().children(m);return h.first(S).map(I=>Oh(I,v))},Mw=[{current:Rw,next:bd,fallback:X.none()},{current:bd,next:Dh,fallback:X.some(Rw)},{current:Dh,next:Dh,fallback:X.some(bd)}],Xp=(i,m,h,v,S=Mw)=>$(S,I=>I.current===h).bind(I=>I.current(i,m,v,I.next).orThunk(()=>I.fallback.bind(W=>Xp(i,m,W,v)))),Jp={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?X.some(h[h.length-1]):X.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?X.some(h[0]):X.none()})},Qp=(i,m,h,v,S,A)=>Xp(i,m,v,S).bind(W=>A(W.item)?X.none():h(W.item)?X.some(W.item):Qp(i,W.item,h,W.mode,S,A)),fy=(i,m,h,v)=>Qp(i,m,h,bd,Jp.left(),v),gy=(i,m,h,v)=>Qp(i,m,h,bd,Jp.right(),v),hy=i=>m=>i.property().children(m).length===0,Nw=(i,m,h)=>Rh(i,m,hy(i),h),ri=(i,m,h)=>ov(i,m,hy(i),h),Rh=fy,ov=gy,vd=jm(),Jc=(i,m)=>Nw(vd,i,m),ai=(i,m)=>ri(vd,i,m),hl=(i,m,h)=>Rh(vd,i,m,h),yd=(i,m,h)=>ov(vd,i,m,h),py=(i,m,h)=>G(i,m,h).isSome(),ci=ef.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ug=(i,m,h)=>{const v=i.getRect(m),S=i.getRect(h);return S.right>v.left&&S.left<v.right},Jk=i=>Gs(i,"tr"),dg={...ci,verify:(i,m,h,v,S,A,I)=>Gs(v,"td,th",I).bind(W=>Gs(m,"td,th",I).map(K=>Ft(W,K)?Ft(v,W)&&ks(W)===S?A(K):ci.none("in same cell"):dd(Jk,[W,K]).fold(()=>ug(i,K,W)?ci.success():A(K),ae=>A(K)))).getOr(ci.none("default")),cata:(i,m,h,v,S)=>i.fold(m,h,v,S)},by=(i,m,h,v)=>({parent:i,children:m,element:h,index:v}),e1=i=>ma(i).bind(m=>{const h=ds(m);return Qk(h,i).map(v=>by(m,h,i,v))}),Qk=(i,m)=>Mr(i,Zn(Ft,m)),Bw=Jo("br"),vy=(i,m,h)=>m(i,h).bind(v=>Zs(v)&&Tt(v).trim().length===0?vy(v,m,h):X.some(v)),Q4=(i,m,h)=>h.traverse(m).orThunk(()=>vy(m,h.gather,i)).map(h.relative),eE=(i,m)=>vr(i,m).filter(Bw).orThunk(()=>vr(i,m-1).filter(Bw)),Fc=(i,m,h,v)=>eE(m,h).bind(S=>v.traverse(S).fold(()=>vy(S,v.gather,i).map(v.relative),A=>e1(A).map(I=>Pa.on(I.parent,I.index)))),sv=(i,m,h,v)=>(Bw(m)?Q4(i,m,v):Fc(i,m,h,v)).map(A=>({start:A,finish:A})),mg=i=>dg.cata(i,m=>X.none(),()=>X.none(),m=>X.some(qd(m,0)),m=>X.some(qd(m,ks(m)))),lm=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),t1=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),rv=(i,m,h)=>({left:i.left+m,top:i.top+h,right:i.right+m,bottom:i.bottom+h}),Pw=i=>i.top,tE=i=>i.bottom,nE=(i,m,h)=>h>=0&&h<ks(m)?i.getRangedRect(m,h,m,h+1):h>0?i.getRangedRect(m,h-1,m,h):X.none(),av=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),mc=(i,m)=>X.some(i.getRect(m)),$w=(i,m,h)=>In(m)?mc(i,m).map(av):Zs(m)?nE(i,m,h).map(av):X.none(),Mh=(i,m)=>In(m)?mc(i,m).map(av):Zs(m)?i.getRangedRect(m,0,m,ks(m)).map(av):X.none(),fc=5,cv=100,nu=ef.generate([{none:[]},{retry:["caret"]}]),yy=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,Cy=(i,m,h)=>ne(m,Co).fold(At,v=>Mh(i,v).exists(S=>yy(h,S))),oE=(i,m,h,v,S)=>{const A=lm(S,fc);return Math.abs(h.bottom-v.bottom)<1||h.top>S.bottom?nu.retry(A):h.top===S.bottom?nu.retry(lm(S,1)):Cy(i,m,S)?nu.retry(rv(A,fc,0)):nu.none()},wy={point:Pw,adjuster:(i,m,h,v,S)=>{const A=t1(S,fc);return Math.abs(h.top-v.top)<1||h.bottom<S.top?nu.retry(A):h.bottom===S.top?nu.retry(t1(S,1)):Cy(i,m,S)?nu.retry(rv(A,fc,0)):nu.none()},move:t1,gather:Jc},Iw={point:tE,adjuster:oE,move:lm,gather:ai},rE=(i,m,h)=>i.elementFromPoint(m,h).filter(v=>Dn(v)==="table").isSome(),n1=(i,m,h,v,S)=>Nh(i,m,h,m.move(v,fc),S),Nh=(i,m,h,v,S)=>S===0?X.some(v):rE(i,v.left,m.point(v))?n1(i,m,h,v,S-1):i.situsFromPoint(v.left,m.point(v)).bind(A=>A.start.fold(X.none,I=>Mh(i,I).bind(W=>m.adjuster(i,I,W,h,v).fold(X.none,K=>Nh(i,m,h,K,S-1))).orThunk(()=>X.some(v)),X.none)),aE=(i,m,h)=>i.point(m)>h.getInnerHeight()?X.some(i.point(m)-h.getInnerHeight()):i.point(m)<0?X.some(-i.point(m)):X.none(),Lw=(i,m,h)=>{const v=i.move(h,fc),S=Nh(m,i,h,v,cv).getOr(v);return aE(i,S,m).fold(()=>m.situsFromPoint(S.left,i.point(S)),A=>(m.scrollBy(0,A),m.situsFromPoint(S.left,i.point(S)-A)))},Sy={tryUp:Zn(Lw,wy),tryDown:Zn(Lw,Iw),getJumpSize:oe(fc)},cE=20,xy=(i,m,h)=>i.getSelection().bind(v=>sv(m,v.finish,v.foffset,h).fold(()=>X.some(qd(v.finish,v.foffset)),S=>{const A=i.fromSitus(S),I=dg.verify(i,v.finish,v.foffset,A.finish,A.foffset,h.failure,m);return mg(I)})),uf=(i,m,h,v,S,A)=>A===0?X.none():e3(i,m,h,v,S).bind(I=>{const W=i.fromSitus(I),K=dg.verify(i,h,v,W.finish,W.foffset,S.failure,m);return dg.cata(K,()=>X.none(),()=>X.some(I),ae=>Ft(h,ae)&&v===0?fg(i,h,v,t1,S):uf(i,m,ae,0,S,A-1),ae=>Ft(h,ae)&&v===ks(ae)?fg(i,h,v,lm,S):uf(i,m,ae,ks(ae),S,A-1))}),fg=(i,m,h,v,S)=>$w(i,m,h).bind(A=>Fw(i,S,v(A,Sy.getJumpSize()))),Fw=(i,m,h)=>{const v=Bf().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,h):X.none()},e3=(i,m,h,v,S)=>$w(i,h,v).bind(A=>Fw(i,S,A)),Hw=(i,m,h)=>xy(i,m,h).bind(v=>uf(i,m,v.element,v.offset,h,cE).map(i.fromSitus)),Ty=(i,m)=>py(i,h=>ma(h).exists(v=>Ft(v,m))),ky=(i,m,h,v,S)=>Gs(v,"td,th",m).bind(A=>Gs(A,"table",m).bind(I=>Ty(S,I)?Hw(i,m,h).bind(W=>Gs(W.finish,"td,th",m).map(K=>({start:A,finish:K,range:W}))):X.none())),lv=(i,m,h,v,S,A)=>A(v,m).orThunk(()=>ky(i,m,h,v,S).map(I=>{const W=I.range;return sm.create(X.some(Yp(W.start,W.soffset,W.finish,W.foffset)),!0)})),wo=(i,m)=>Gs(i,"tr",m).bind(h=>Gs(h,"table",m).bind(v=>{const S=Ls(v,"tr");return Ft(h,S[0])?hl(v,A=>Eu(A).isSome(),m).map(A=>{const I=ks(A);return sm.create(X.some(Yp(A,I,A,I)),!0)}):X.none()})),Cd=(i,m)=>Gs(i,"tr",m).bind(h=>Gs(h,"table",m).bind(v=>{const S=Ls(v,"tr");return Ft(h,S[S.length-1])?yd(v,A=>Yl(A).isSome(),m).map(A=>sm.create(X.some(Yp(A,0,A,0)),!0)):X.none()})),df=(i,m,h,v,S,A,I)=>ky(i,h,v,S,A).bind(W=>ig(m,h,W.start,W.finish,I)),mf=i=>{let m=i;return{get:()=>m,set:S=>{m=S}}},Ey=i=>{const m=mf(X.none()),h=()=>m.get().each(i);return{clear:()=>{h(),m.set(X.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:W=>{h(),m.set(X.some(W))}}},Bh=()=>{const i=Ey(Qe);return{...i,on:h=>i.get().each(h)}},ff=(i,m)=>Gs(i,"td,th",m),iv=(i,m,h,v)=>{const S=Bh(),A=S.clear,I=ve=>{S.on(qe=>{v.clearBeforeUpdate(m),ff(ve.target,h).each(dt=>{hb(qe,dt,h).each(ct=>{const He=ct.boxes.getOr([]);if(He.length===1){const gt=He[0],Ve=fl(gt)==="false",Vt=Ge(fh(ve.target),gt,Ft);Ve&&Vt&&(v.selectRange(m,He,gt,gt),i.selectContents(gt))}else He.length>1&&(v.selectRange(m,He,ct.start,ct.finish),i.selectContents(dt))})})})};return{clearstate:A,mousedown:ve=>{v.clear(m),ff(ve.target,h).each(S.set)},mouseover:ve=>{I(ve)},mouseup:ve=>{I(ve),A()}}},uv={traverse:Nr,gather:ai,relative:Pa.before,retry:Sy.tryDown,failure:dg.failedDown},dv={traverse:Cl,gather:Jc,relative:Pa.before,retry:Sy.tryUp,failure:dg.failedUp},gg=i=>m=>m===i,hg=gg(38),o1=gg(40),mv=i=>i>=37&&i<=40,t3={isBackward:gg(37),isForward:gg(39)},Vw={isBackward:gg(39),isForward:gg(37)},im=i=>{const m=i!==void 0?i.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return vi(h,v)},_y=(i,m,h)=>{const S=(h!==void 0?h.dom:document).defaultView;S&&S.scrollBy(i,m)},pg=ef.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ay=i=>pg.exact(i.start,i.soffset,i.finish,i.foffset),zw=i=>i.match({domRange:m=>Z.fromDom(m.startContainer),relative:(m,h)=>Pa.getStart(m),exact:(m,h,v,S)=>m}),s1=pg.domRange,Oy=pg.relative,lE=pg.exact,iE=i=>{const m=zw(i);return tr(m)},wd=lf.create,Ph={domRange:s1,relative:Oy,exact:lE,exactFromRange:Ay,getWin:iE,range:wd},uE=(i,m,h)=>{var v,S;return X.from((S=(v=i.dom).caretPositionFromPoint)===null||S===void 0?void 0:S.call(v,m,h)).bind(A=>{if(A.offsetNode===null)return X.none();const I=i.dom.createRange();return I.setStart(A.offsetNode,A.offset),I.collapse(),X.some(I)})},Ti=(i,m,h)=>{var v,S;return X.from((S=(v=i.dom).caretRangeFromPoint)===null||S===void 0?void 0:S.call(v,m,h))},$a=(()=>document.caretPositionFromPoint?uE:document.caretRangeFromPoint?Ti:X.none)(),dE=(i,m,h)=>{const v=Z.fromDom(i.document);return $a(v,m,h).map(S=>lf.create(Z.fromDom(S.startContainer),S.startOffset,Z.fromDom(S.endContainer),S.endOffset))},$h=(i,m)=>{const h=Dn(i);return h==="input"?Pa.after(i):O(["br","img"],h)?m===0?Pa.before(i):Pa.after(i):Pa.on(i,m)},Ih=(i,m)=>{const h=i.fold(Pa.before,$h,Pa.after),v=m.fold(Pa.before,$h,Pa.after);return Ph.relative(h,v)},Uw=(i,m,h,v)=>{const S=$h(i,m),A=$h(h,v);return Ph.relative(S,A)},Ww=(i,m,h,v)=>{const A=Ln(i).dom.createRange();return A.setStart(i.dom,m),A.setEnd(h.dom,v),A},mE=(i,m,h,v)=>{const S=Ww(i,m,h,v),A=Ft(i,h)&&m===v;return S.collapsed&&!A},yt=i=>X.from(i.getSelection()),ra=(i,m)=>{yt(i).each(h=>{h.removeAllRanges(),h.addRange(m)})},bg=(i,m,h,v,S)=>{const A=dy(i,m,h,v,S);ra(i,A)},Ya=(i,m,h,v,S,A)=>{m.collapse(h.dom,v),m.extend(S.dom,A)},ki=(i,m)=>Ah(i,m).match({ltr:(h,v,S,A)=>{bg(i,h,v,S,A)},rtl:(h,v,S,A)=>{yt(i).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(h.dom,v,S.dom,A);else if(I.extend)try{Ya(i,I,h,v,S,A)}catch{bg(i,S,A,h,v)}else bg(i,S,A,h,v)})}}),fv=(i,m,h,v,S)=>{const A=Uw(m,h,v,S);ki(i,A)},Lh=(i,m,h)=>{const v=Ih(m,h);ki(i,v)},r1=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),h=i.getRangeAt(i.rangeCount-1);return X.some(lf.create(Z.fromDom(m.startContainer),m.startOffset,Z.fromDom(h.endContainer),h.endOffset))}else return X.none()},Zw=i=>{if(i.anchorNode===null||i.focusNode===null)return r1(i);{const m=Z.fromDom(i.anchorNode),h=Z.fromDom(i.focusNode);return mE(m,i.anchorOffset,h,i.focusOffset)?X.some(lf.create(m,i.anchorOffset,h,i.focusOffset)):r1(i)}},a1=(i,m,h=!0)=>{const S=(h?Yk:rm)(i,m);ra(i,S)},Dy=i=>yt(i).filter(m=>m.rangeCount>0).bind(Zw),gf=i=>Dy(i).map(m=>Ph.exact(m.start,m.soffset,m.finish,m.foffset)),c1=(i,m)=>{const h=_c(i,m);return am(h)},fE=(i,m,h)=>dE(i,m,h),jw=i=>{yt(i).each(m=>m.removeAllRanges())},Ry=i=>({elementFromPoint:(Ve,Vt)=>Z.fromPoint(Z.fromDom(i.document),Ve,Vt),getRect:Ve=>Ve.dom.getBoundingClientRect(),getRangedRect:(Ve,Vt,Cn,Kn)=>{const Ks=Ph.exact(Ve,Vt,Cn,Kn);return c1(i,Ks)},getSelection:()=>gf(i).map(Ve=>$u(i,Ve)),fromSitus:Ve=>{const Vt=Ph.relative(Ve.start,Ve.finish);return $u(i,Vt)},situsFromPoint:(Ve,Vt)=>fE(i,Ve,Vt).map(Cn=>my.create(Cn.start,Cn.soffset,Cn.finish,Cn.foffset)),clearSelection:()=>{jw(i)},collapseSelection:(Ve=!1)=>{gf(i).each(Vt=>Vt.fold(Cn=>Cn.collapse(Ve),(Cn,Kn)=>{const Ks=Ve?Cn:Kn;Lh(i,Ks,Ks)},(Cn,Kn,Ks,Xa)=>{const Hr=Ve?Cn:Ks,pl=Ve?Kn:Xa;fv(i,Hr,pl,Hr,pl)}))},setSelection:Ve=>{fv(i,Ve.start,Ve.soffset,Ve.finish,Ve.foffset)},setRelativeSelection:(Ve,Vt)=>{Lh(i,Ve,Vt)},selectNode:Ve=>{a1(i,Ve,!1)},selectContents:Ve=>{a1(i,Ve)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>im(Z.fromDom(i.document)).top,scrollBy:(Ve,Vt)=>{_y(Ve,Vt,Z.fromDom(i.document))}}),vg=(i,m)=>({rows:i,cols:m}),l1=(i,m,h,v)=>{const S=Ry(i),A=iv(S,m,h,v);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},gv=(i,m,h,v)=>{const S=Ry(i),A=()=>(v.clear(m),X.none());return{keydown:(K,ae,ve,qe,dt,ct)=>{const He=K.raw,gt=He.which,Ve=He.shiftKey===!0;return Tp(m,v.selectedSelector).fold(()=>(mv(gt)&&!Ve&&v.clearBeforeUpdate(m),o1(gt)&&Ve?Zn(df,S,m,h,uv,qe,ae,v.selectRange):hg(gt)&&Ve?Zn(df,S,m,h,dv,qe,ae,v.selectRange):o1(gt)?Zn(lv,S,h,uv,qe,ae,Cd):hg(gt)?Zn(lv,S,h,dv,qe,ae,wo):X.none),Cn=>{const Kn=Ks=>()=>Fe(Ks,Hr=>Xk(Hr.rows,Hr.cols,m,Cn,v)).fold(()=>pb(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Hr=>{const pl=o1(gt)||ct.isForward(gt)?Pa.after:Pa.before;return S.setRelativeSelection(Pa.on(Hr.first,0),pl(Hr.table)),v.clear(m),sm.create(X.none(),!0)}),Hr=>X.some(sm.create(X.none(),!0)));return o1(gt)&&Ve?Kn([vg(1,0)]):hg(gt)&&Ve?Kn([vg(-1,0)]):ct.isBackward(gt)&&Ve?Kn([vg(0,-1),vg(-1,0)]):ct.isForward(gt)&&Ve?Kn([vg(0,1),vg(1,0)]):mv(gt)&&!Ve?A:X.none})()},keyup:(K,ae,ve,qe,dt)=>Tp(m,v.selectedSelector).fold(()=>{const ct=K.raw,He=ct.which;return ct.shiftKey===!0&&mv(He)?nv(m,h,ae,ve,qe,dt,v.selectRange):X.none()},X.none)}},hv=(i,m,h,v)=>{const S=Ry(i);return(A,I)=>{v.clearBeforeUpdate(m),hb(A,I,h).each(W=>{const K=W.boxes.getOr([]);v.selectRange(m,K,W.start,W.finish),S.selectContents(I),S.collapseSelection()})}},Fh=(i,m)=>{const h=fr(i,m);return h===void 0||h===""?[]:h.split(" ")},My=(i,m,h)=>{const S=Fh(i,m).concat([h]);return us(i,m,S.join(" ")),!0},Gw=(i,m,h)=>{const v=oo(Fh(i,m),S=>S!==h);return v.length>0?us(i,m,v.join(" ")):hs(i,m),!1},Iu=i=>i.dom.classList!==void 0,i1=i=>Fh(i,"class"),gE=(i,m)=>My(i,"class",m),hE=(i,m)=>Gw(i,"class",m),um=(i,m)=>{Iu(i)?i.dom.classList.add(m):gE(i,m)},pE=i=>{(Iu(i)?i.dom.classList:i1(i)).length===0&&hs(i,"class")},qw=(i,m)=>{Iu(i)?i.dom.classList.remove(m):hE(i,m),pE(i)},pv=(i,m)=>Iu(i)&&i.dom.classList.contains(m),bE=(i,m)=>{Le(m,h=>{qw(i,h)})},bv=i=>m=>{um(m,i)},Ac=i=>m=>{bE(m,i)},u1={byClass:i=>{const m=bv(i.selected),h=Ac([i.selected,i.lastSelected,i.firstSelected]),v=A=>{const I=Ls(A,i.selectedSelector);Le(I,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(A,I,W,K)=>{v(A),Le(I,m),um(W,i.firstSelected),um(K,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,h)=>{const v=K=>{hs(K,i.selected),hs(K,i.firstSelected),hs(K,i.lastSelected)},S=K=>{us(K,i.selected,"1")},A=K=>{I(K),h()},I=K=>{const ae=Ls(K,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);Le(ae,v)};return{clearBeforeUpdate:I,clear:A,selectRange:(K,ae,ve,qe)=>{A(K),Le(ae,S),us(ve,i.firstSelected,"1"),us(qe,i.lastSelected,"1"),m(ae,ve,qe)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},vv=(i,m,h,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return h(i.elements)}},Kw=()=>({tag:"none"}),Ny=i=>({tag:"multiple",elements:i}),Yw=i=>({tag:"single",element:i}),By=(i,m,h)=>({get:()=>bb(i(),h).fold(()=>m().fold(Kw,Yw),Ny)}),Xw=(i,m)=>{const h=i.slice(0,m[m.length-1].row+1),v=gh(h);return ze(v,S=>{const A=S.cells.slice(0,m[m.length-1].column+1);return qt(A,I=>I.element)})},Py=(i,m)=>{const h=i.slice(m[0].row+m[0].rowspan-1,i.length),v=gh(h);return ze(v,S=>{const A=S.cells.slice(m[0].column+m[0].colspan-1,S.cells.length);return qt(A,I=>I.element)})},Jw=(i,m,h)=>{const v=Gn.fromTable(i);return Ql(v,m).map(A=>{const I=Op(v,h,!1),{rows:W}=ba(I),K=Xw(W,A),ae=Py(W,A);return{upOrLeftCells:K,downOrRightCells:ae}})},Qw=(i,m,h,v,S,A,I)=>({target:i,x:m,y:h,stop:v,prevent:S,kill:A,raw:I}),yv=i=>{const m=Z.fromDom(ir(i).getOr(i.target)),h=()=>i.stopPropagation(),v=()=>i.preventDefault(),S=_n(v,h);return Qw(m,i.clientX,i.clientY,h,v,S,i)},$y=(i,m)=>h=>{i(h)&&m(yv(h))},xs=(i,m,h,v,S)=>{const A=$y(h,v);return i.dom.addEventListener(m,A,S),{unbind:Zn(hf,i,m,A,S)}},Nt=(i,m,h,v)=>xs(i,m,h,v,!1),hf=(i,m,h,v)=>{i.dom.removeEventListener(m,h,v)},eS=ge,pf=(i,m,h)=>Nt(i,m,eS,h),Sd=yv,Hh=i=>!pv(Z.fromDom(i.target),"ephox-snooker-resizer-bar"),Iy=(i,m)=>{const h=By(()=>Z.fromDom(i.getBody()),()=>O2(Ou(i),xc(i)),md.selectedSelector),v=(K,ae,ve)=>{pa(ae).each(dt=>{const ct=q0(i),He=xn(Qe,Z.fromDom(i.getDoc()),ct),gt=Na(i),Ve=Jw(dt,{selection:gt},He);xi(i,K,ae,ve,Ve)})},S=()=>Ub(i),A=u1.byAttr(md,v,S);return i.on("init",K=>{const ae=i.getWin(),ve=yi(i),qe=xc(i),dt=()=>{const fs=i.selection,gc=Z.fromDom(fs.getStart()),hc=Z.fromDom(fs.getEnd());dd(pa,[gc,hc]).fold(()=>A.clear(ve),Qe)},ct=l1(ae,ve,qe,A),He=gv(ae,ve,qe,A),gt=hv(ae,ve,qe,A),Ve=fs=>fs.raw.shiftKey===!0;i.on("TableSelectorChange",fs=>gt(fs.start,fs.finish));const Vt=(fs,gc)=>{Ve(fs)&&(gc.kill&&fs.kill(),gc.selection.each(hc=>{const Hu=Ph.relative(hc.start,hc.finish),$l=_c(ae,Hu);i.selection.setRng($l)}))},Cn=fs=>{const gc=Sd(fs);if(gc.raw.shiftKey&&mv(gc.raw.which)){const hc=i.selection.getRng(),Hu=Z.fromDom(hc.startContainer),$l=Z.fromDom(hc.endContainer);He.keyup(gc,Hu,hc.startOffset,$l,hc.endOffset).each(Uh=>{Vt(gc,Uh)})}},Kn=fs=>{const gc=Sd(fs);m.hide();const hc=i.selection.getRng(),Hu=Z.fromDom(hc.startContainer),$l=Z.fromDom(hc.endContainer),Uh=Pm(t3,Vw)(Z.fromDom(i.selection.getStart()));He.keydown(gc,Hu,hc.startOffset,$l,hc.endOffset,Uh).each(Hc=>{Vt(gc,Hc)}),m.show()},Ks=fs=>fs.button===0,Xa=fs=>fs.buttons===void 0?!0:(fs.buttons&1)!==0,Hr=fs=>{ct.clearstate()},pl=fs=>{Ks(fs)&&Hh(fs)&&ct.mousedown(Sd(fs))},Cf=fs=>{Xa(fs)&&Hh(fs)&&ct.mouseover(Sd(fs))},p1=fs=>{Ks(fs)&&Hh(fs)&&ct.mouseup(Sd(fs))},_v=(()=>{const fs=mf(Z.fromDom(ve)),gc=mf(0);return{touchEnd:Hu=>{const $l=Z.fromDom(Hu.target);if(Jo("td")($l)||Jo("th")($l)){const Uh=fs.get(),Hc=gc.get();Ft(Uh,$l)&&Hu.timeStamp-Hc<300&&(Hu.preventDefault(),gt($l,$l))}fs.set($l),gc.set(Hu.timeStamp)}}})();i.on("dragstart",Hr),i.on("mousedown",pl),i.on("mouseover",Cf),i.on("mouseup",p1),i.on("touchend",_v.touchEnd),i.on("keyup",Cn),i.on("keydown",Kn),i.on("NodeChange",dt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(md.firstSelected),i.serializer.addTempAttr(md.lastSelected)}),{getSelectedCells:()=>vv(h.get(),oe([]),K=>qt(K,ae=>ae.dom),K=>[K.dom]),clearSelectedCells:K=>A.clear(Z.fromDom(K))}},Ei=i=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=oo(m,I=>I!==A)},trigger:(...A)=>{const I={};Le(i,(W,K)=>{I[W]=A[K]}),Le(m,W=>{W(I)})}}},yg=i=>{const m=qo(i,v=>({bind:v.bind,unbind:v.unbind})),h=qo(i,v=>v.trigger);return{registry:m,trigger:h}},tS=(i,m)=>{let h=null;const v=()=>{uo(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...A)=>{v(),h=setTimeout(()=>{h=null,i.apply(null,A)},m)}}},Vh=i=>i.slice(0).sort(),d1=(i,m)=>{throw new Error("All required keys ("+Vh(i).join(", ")+") were not specified. Specified keys were: "+Vh(m).join(", ")+".")},m1=i=>{throw new Error("Unsupported keys for object: "+Vh(i).join(", "))},Ly=(i,m)=>{if(!Gt(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");Le(m,h=>{if(!ao(h))throw new Error("The value "+h+" in the "+i+" fields was not a string.")})},vE=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Vh(i).join(", ")+") were not.")},yE=i=>{const m=Vh(i);$(m,(v,S)=>S<m.length-1&&v===m[S+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},CE=(i,m)=>_i(i,m,{validate:$n,label:"function"}),_i=(i,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Ly("required",m),yE(m),v=>{const S=be(v);at(m,W=>O(S,W))||d1(m,S),i(m,S);const I=oo(m,W=>!h.validate(v[W],W));return I.length>0&&vE(I,h.label),v}},Oc=(i,m)=>{const h=oo(m,v=>!O(i,v));h.length>0&&m1(h)},bf=i=>CE(Oc,i),n3=bf(["compare","extract","mutate","sink"]),wE=bf(["element","start","stop","destroy"]),SE=bf(["forceDrop","drop","move","delayDrop"]),po=()=>{let i=X.none();const m=()=>{i=X.none()},h=(A,I)=>{const W=i.map(K=>A.compare(K,I));return i=X.some(I),W},v=(A,I)=>{I.extract(A).each(K=>{h(I,K).each(ve=>{S.trigger.move(ve)})})},S=yg({move:Ei(["info"])});return{onEvent:v,reset:m,events:S.registry}},xE=()=>{const i=yg({move:Ei(["info"])});return{onEvent:Qe,reset:Qe,events:i.registry}},nS=()=>{const i=xE(),m=po();let h=i;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=i},isOn:()=>h===m,onEvent:(W,K)=>{h.onEvent(W,K)},events:m.events}},Fy=(i,m,h)=>{let v=!1;const S=yg({start:Ei([]),stop:Ei([])}),A=nS(),I=()=>{ct.stop(),A.isOn()&&(A.off(),S.trigger.stop())},W=tS(I,200),K=gt=>{ct.start(gt),A.on(),S.trigger.start()},ae=gt=>{W.cancel(),A.onEvent(gt,m)};A.events.move.bind(gt=>{m.mutate(i,gt.info)});const ve=()=>{v=!0},qe=()=>{v=!1},dt=gt=>(...Ve)=>{v&&gt.apply(null,Ve)},ct=m.sink(SE({forceDrop:I,drop:dt(I),move:dt(ae),delayDrop:dt(W.throttle)}),h),He=()=>{ct.destroy()};return{element:ct.element,go:K,on:ve,off:qe,destroy:He,events:S.registry}},oS=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},xd=oS("ephox-dragster").resolve,Cv=i=>{const m={layerClass:xd("blocker"),...i},h=Z.fromTag("div");return us(h,"role","presentation"),Cr(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),um(h,xd("blocker")),um(h,m.layerClass),{element:oe(h),destroy:()=>{_r(h)}}};var aS=n3({compare:(i,m)=>vi(m.left-i.left,m.top-i.top),extract:i=>X.some(vi(i.x,i.y)),sink:(i,m)=>{const h=Cv(m),v=pf(h.element(),"mousedown",i.forceDrop),S=pf(h.element(),"mouseup",i.drop),A=pf(h.element(),"mousemove",i.move),I=pf(h.element(),"mouseout",i.delayDrop),W=()=>{h.destroy(),S.unbind(),A.unbind(),I.unbind(),v.unbind()},K=ve=>{Bo(ve,h.element())},ae=()=>{_r(h.element())};return wE({element:h.element,start:K,stop:ae,destroy:W})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const a3=(i,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:aS;return Fy(i,v,m)},vf=oS("ephox-snooker").resolve,Hy=()=>{const i=yg({drag:Ei(["xDelta","yDelta"])});return{mutate:(h,v)=>{i.trigger.drag(h,v)},events:i.registry}},TE=()=>{const i=yg({drag:Ei(["xDelta","yDelta","target"])});let m=X.none();const h=Hy();return h.events.drag.bind(A=>{m.each(I=>{i.trigger.drag(A.xDelta,A.yDelta,I)})}),{assign:A=>{m=X.some(A)},get:()=>m,mutate:h.mutate,events:i.registry}},cS=(i,m,h,v,S)=>{const A=Z.fromTag("div");return Cr(A,{position:"absolute",left:m-v/2+"px",top:h+"px",height:S+"px",width:v+"px"}),No(A,{"data-column":i,role:"presentation"}),A},vn=(i,m,h,v,S)=>{const A=Z.fromTag("div");return Cr(A,{position:"absolute",left:m+"px",top:h-S/2+"px",height:S+"px",width:v+"px"}),No(A,{"data-row":i,role:"presentation"}),A},zh=vf("resizer-bar"),lS=vf("resizer-rows"),iS=vf("resizer-cols"),Cg=7,Vy=(i,m)=>ze(i.all,(h,v)=>m(h.element)?[v]:[]),kE=(i,m)=>{const h=[];return Eo(i.grid.columns,v=>{Gn.getColumnAt(i,v).map(A=>A.element).forall(m)&&h.push(v)}),oo(h,v=>{const S=Gn.filterItems(i,A=>A.column===v);return at(S,A=>m(A.element))})},wv=i=>{const m=Ls(i.parent(),"."+zh);Le(m,_r)},uS=(i,m,h)=>{const v=i.origin();Le(m,S=>{S.each(A=>{const I=h(v,A);um(I,zh),Bo(i.parent(),I)})})},zy=(i,m,h,v)=>{uS(i,m,(S,A)=>{const I=cS(A.col,A.x-S.left,h.top-S.top,Cg,v);return um(I,iS),I})},dS=(i,m,h,v)=>{uS(i,m,(S,A)=>{const I=vn(A.row,h.left-S.left,A.y-S.top,v,Cg);return um(I,lS),I})},EE=(i,m,h,v,S)=>{const A=xu(h),I=m.isResizable,W=v.length>0?Tu.positions(v,h):[],K=W.length>0?Vy(i,I):[],ae=oo(W,(ct,He)=>je(K,gt=>He===gt));dS(m,ae,A,Yt(h));const ve=S.length>0?Mc.positions(S,h):[],qe=ve.length>0?kE(i,I):[],dt=oo(ve,(ct,He)=>je(qe,gt=>He===gt));zy(m,dt,A,Jg(h))},Sv=(i,m)=>{if(wv(i),i.isResizable(m)){const h=Gn.fromTable(m),v=Su(h),S=ja(h);EE(h,i,m,v,S)}},f1=(i,m)=>{const h=Ls(i.parent(),"."+zh);Le(h,m)},Uy=i=>{f1(i,m=>{ps(m,"display","none")})},xv=i=>{f1(i,m=>{ps(m,"display","block")})},Tv=i=>pv(i,lS),g1=i=>pv(i,iS),wg=vf("resizer-bar-dragging"),l3=i=>{const m=TE(),h=a3(m,{});let v=X.none();const S=(He,gt)=>X.from(fr(He,gt));m.events.drag.bind(He=>{S(He.target,"data-row").each(gt=>{const Ve=Sr(He.target,"top");ps(He.target,"top",Ve+He.yDelta+"px")}),S(He.target,"data-column").each(gt=>{const Ve=Sr(He.target,"left");ps(He.target,"left",Ve+He.xDelta+"px")})});const A=(He,gt)=>{const Ve=Sr(He,gt),Vt=bs(He,"data-initial-"+gt,0);return Ve-Vt};h.events.stop.bind(()=>{m.get().each(He=>{v.each(gt=>{S(He,"data-row").each(Ve=>{const Vt=A(He,"top");hs(He,"data-initial-top"),ct.trigger.adjustHeight(gt,Vt,parseInt(Ve,10))}),S(He,"data-column").each(Ve=>{const Vt=A(He,"left");hs(He,"data-initial-left"),ct.trigger.adjustWidth(gt,Vt,parseInt(Ve,10))}),Sv(i,gt)})})});const I=(He,gt)=>{ct.trigger.startAdjust(),m.assign(He),us(He,"data-initial-"+gt,Sr(He,gt)),um(He,wg),ps(He,"opacity","0.2"),h.go(i.parent())},W=pf(i.parent(),"mousedown",He=>{Tv(He.target)&&I(He.target,"top"),g1(He.target)&&I(He.target,"left")}),K=He=>Ft(He,i.view()),ae=He=>Gs(He,"table",K).filter(Qi),ve=pf(i.view(),"mouseover",He=>{ae(He.target).fold(()=>{gr(He.target)&&wv(i)},gt=>{v=X.some(gt),Sv(i,gt)})}),qe=()=>{W.unbind(),ve.unbind(),h.destroy(),wv(i)},dt=He=>{Sv(i,He)},ct=yg({adjustHeight:Ei(["table","delta","row"]),adjustWidth:Ei(["table","delta","column"]),startAdjust:Ei([])});return{destroy:qe,refresh:dt,on:h.on,off:h.off,hideBars:Zn(Uy,i),showBars:Zn(xv,i),events:ct.registry}},_E={create:(i,m,h)=>{const v=Tu,S=Mc,A=l3(i),I=yg({beforeResize:Ei(["table","type"]),afterResize:Ei(["table","type"]),startDrag:Ei([])});return A.events.adjustHeight.bind(W=>{const K=W.table;I.trigger.beforeResize(K,"row");const ae=v.delta(W.delta,K);Rb(K,ae,W.row,v),I.trigger.afterResize(K,"row")}),A.events.startAdjust.bind(W=>{I.trigger.startDrag()}),A.events.adjustWidth.bind(W=>{const K=W.table;I.trigger.beforeResize(K,"col");const ae=S.delta(W.delta,K),ve=h(K);Jd(K,ae,W.column,m,ve),I.trigger.afterResize(K,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:I.registry}}},Pl={only:(i,m)=>{const h=Qr(i)?Je(i):i;return{parent:oe(h),view:oe(i),origin:oe(vi(0,0)),isResizable:m}},detached:(i,m,h)=>{const v=()=>xu(m);return{parent:oe(m),view:oe(i),origin:v,isResizable:h}},body:(i,m,h)=>({parent:oe(m),view:oe(i),origin:oe(vi(0,0)),isResizable:h})},Zy=()=>{const i=Z.fromTag("div");return Cr(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Bo(Ua(),i),i},h1=(i,m)=>i.inline?Pl.body(Z.fromDom(i.getBody()),Zy(),m):Pl.only(Z.fromDom(i.getDoc()),m),kv=(i,m)=>{i.inline&&_r(m.parent())},dm=i=>Bt(i)&&i.nodeName==="TABLE",jy="bar-",AE=i=>fr(i,"data-mce-resize")!=="false",OE=i=>{const m=Gn.fromTable(i);Gn.hasColumns(m)||Le(pi(i),h=>{const v=El(h,"width");ps(h,"width",v),hs(h,"width")})},mS=i=>{const m=Bh(),h=Bh(),v=Bh();let S,A;const I=He=>rg(i,He),W=()=>Zb(i)?Cb():N2(),K=He=>dh(He).columns,ae=(He,gt,Ve)=>{const Vt=_a(gt,"e");if(A===""&&rf(He),Ve!==S&&A!==""){ps(He,"width",A);const Cn=W(),Kn=I(He),Ks=Zb(i)||Vt?K(He)-1:0;Jd(He,Ve-S,Ks,Cn,Kn)}else if(KT(A)){const Cn=parseFloat(A.replace("%","")),Kn=Ve*Cn/S;ps(He,"width",Kn+"%")}Zm(A)&&OE(He)},ve=()=>{h.on(He=>{He.destroy()}),v.on(He=>{kv(i,He)})};return i.on("init",()=>{const He=h1(i,AE);if(v.set(He),Ok(i)&&Dk(i)){const gt=W(),Ve=_E.create(He,gt,I);Ve.on(),Ve.events.startDrag.bind(Vt=>{m.set(i.selection.getRng())}),Ve.events.beforeResize.bind(Vt=>{const Cn=Vt.table.dom;Bu(i,Cn,vp(Cn),Vd(Cn),jy+Vt.type)}),Ve.events.afterResize.bind(Vt=>{const Cn=Vt.table,Kn=Cn.dom;ml(Cn),m.on(Ks=>{i.selection.setRng(Ks),i.focus()}),iw(i,Kn,vp(Kn),Vd(Kn),jy+Vt.type),i.undoManager.add()}),h.set(Ve)}}),i.on("ObjectResizeStart",He=>{const gt=He.target;if(dm(gt)){const Ve=Z.fromDom(gt);Le(i.dom.select(".mce-clonedresizable"),Vt=>{i.dom.addClass(Vt,"mce-"+Vp(i)+"-columns")}),!vw(Ve)&&kh(i)?Eh(Ve):!bw(Ve)&&sg(i)&&rf(Ve),ag(Ve)&&gi(He.origin,jy)&&rf(Ve),S=He.width,A=zp(i)?"":Wm(i,gt).getOr("")}}),i.on("ObjectResized",He=>{const gt=He.target;if(dm(gt)){const Ve=Z.fromDom(gt),Vt=He.origin;gi(Vt,"corner-")&&ae(Ve,Vt,He.width),ml(Ve),Bl(i,Ve.dom,Hp)}}),i.on("SwitchMode",()=>{h.on(He=>{i.mode.isReadOnly()?He.hideBars():He.showBars()})}),i.on("remove",()=>{ve()}),{refresh:He=>{h.on(gt=>gt.refreshBars(Z.fromDom(He)))},hide:()=>{h.on(He=>He.hideBars())},show:()=>{h.on(He=>He.showBars())}}},Mo=i=>{Ak(i);const m=mS(i),h=Iy(i,m),v=mr(i,m,h);return uy(i,v),jk(i,v),$c(i,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},Fu=i=>({table:Mo(i)});var Sg=()=>{vt.add("dom",Fu)};Sg()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(xt,Gt)=>{xt.focus(),xt.undoManager.transact(()=>{xt.setContent(Gt)}),xt.selection.setCursorLocation(),xt.nodeChanged()},wn=xt=>xt.getContent({source_view:!0}),Sn=xt=>{const Gt=wn(xt);xt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Gt},onSubmit:uo=>{On(xt,uo.getData().code),uo.close()}})},En=xt=>{xt.addCommand("mceCodeEditor",()=>{Sn(xt)})},eo=xt=>{const Gt=()=>xt.execCommand("mceCodeEditor");xt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Gt}),xt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Gt})};var ao=()=>{vt.add("code",xt=>(En(xt),eo(xt),{}))};ao()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=Object.getPrototypeOf,wn=(B,G,ne)=>{var we;return ne(B,G.prototype)?!0:((we=B.constructor)===null||we===void 0?void 0:we.name)===G.name},Sn=B=>{const G=typeof B;return B===null?"null":G==="object"&&Array.isArray(B)?"array":G==="object"&&wn(B,String,(ne,we)=>we.isPrototypeOf(ne))?"string":G},En=B=>G=>Sn(G)===B,eo=B=>G=>typeof G===B,ao=B=>G=>B===G,xt=(B,G)=>uo(B)&&wn(B,G,(ne,we)=>On(ne)===we),Gt=En("string"),uo=En("object"),Wn=B=>xt(B,Object),Xo=En("array"),Zo=ao(null),Bt=eo("boolean"),$n=B=>B==null,co=B=>!$n(B),Qe=eo("function"),_n=eo("number"),Ye=(B,G)=>{if(Xo(B)){for(let ne=0,we=B.length;ne<we;++ne)if(!G(B[ne]))return!1;return!0}return!1},oe=()=>{};class Pt{constructor(G,ne){this.tag=G,this.value=ne}static some(G){return new Pt(!0,G)}static none(){return Pt.singletonNone}fold(G,ne){return this.tag?ne(this.value):G()}isSome(){return this.tag}isNone(){return!this.tag}map(G){return this.tag?Pt.some(G(this.value)):Pt.none()}bind(G){return this.tag?G(this.value):Pt.none()}exists(G){return this.tag&&G(this.value)}forall(G){return!this.tag||G(this.value)}filter(G){return!this.tag||G(this.value)?this:Pt.none()}getOr(G){return this.tag?this.value:G}or(G){return this.tag?this:G}getOrThunk(G){return this.tag?this.value:G()}orThunk(G){return this.tag?this:G()}getOrDie(G){if(this.tag)return this.value;throw new Error(G??"Called getOrDie on None")}static from(G){return co(G)?Pt.some(G):Pt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(G){this.tag&&G(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Pt.singletonNone=new Pt(!1);const Ps=Object.keys,Zn=Object.hasOwnProperty,te=(B,G)=>{const ne=Ps(B);for(let we=0,Et=ne.length;we<Et;we++){const Fn=ne[we],$t=B[Fn];G($t,Fn)}},cn=B=>(G,ne)=>{B[ne]=G},jo=(B,G,ne,we)=>{te(B,(Et,Fn)=>{(G(Et,Fn)?ne:we)(Et,Fn)})},At=(B,G)=>{const ne={};return jo(B,G,cn(ne),oe),ne},ge=(B,G)=>Zn.call(B,G),X=(B,G)=>ge(B,G)&&B[G]!==void 0&&B[G]!==null,An=Array.prototype.push,Kt=B=>{const G=[];for(let ne=0,we=B.length;ne<we;++ne){if(!Xo(B[ne]))throw new Error("Arr.flatten item "+ne+" was not an array, input: "+B);An.apply(G,B[ne])}return G},bt=(B,G)=>G>=0&&G<B.length?Pt.some(B[G]):Pt.none(),gn=B=>bt(B,0),O=(B,G)=>{for(let ne=0;ne<B.length;ne++){const we=G(B[ne],ne);if(we.isSome())return we}return Pt.none()};typeof window<"u"||Function("return this;")();const je=(B,G,ne)=>{if(Gt(ne)||Bt(ne)||_n(ne))B.setAttribute(G,ne+"");else throw console.error("Invalid call to Attribute.set. Key ",G,":: Value ",ne,":: Element ",B),new Error("Attribute value was not simple")},Eo=(B,G,ne)=>{je(B.dom,G,ne)},qt=(B,G)=>{B.dom.removeAttribute(G)},Le=(B,G)=>{const we=(G||document).createElement("div");if(we.innerHTML=B,!we.hasChildNodes()||we.childNodes.length>1){const Et="HTML does not have a single root node";throw console.error(Et,B),new Error(Et)}return oo(we.childNodes[0])},lr=(B,G)=>{const we=(G||document).createElement(B);return oo(we)},yo=(B,G)=>{const we=(G||document).createTextNode(B);return oo(we)},oo=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},rn={fromHtml:Le,fromTag:lr,fromText:yo,fromDom:oo,fromPoint:(B,G,ne)=>Pt.from(B.dom.elementFromPoint(G,ne)).map(oo)};var We=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$=tinymce.util.Tools.resolve("tinymce.util.URI");const Mr=B=>B.length>0,nt=B=>G=>G.options.get(B),ze=B=>{const G=B.options.register;G("image_dimensions",{processor:"boolean",default:!0}),G("image_advtab",{processor:"boolean",default:!1}),G("image_uploadtab",{processor:"boolean",default:!0}),G("image_prepend_url",{processor:"string",default:""}),G("image_class_list",{processor:"object[]"}),G("image_description",{processor:"boolean",default:!0}),G("image_title",{processor:"boolean",default:!1}),G("image_caption",{processor:"boolean",default:!1}),G("image_list",{processor:ne=>{const we=ne===!1||Gt(ne)||Ye(ne,uo)||Qe(ne);return we?{value:ne,valid:we}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},at=nt("image_dimensions"),Wt=nt("image_advtab"),on=nt("image_uploadtab"),zt=nt("image_prepend_url"),Xt=nt("image_class_list"),Be=nt("image_description"),Go=nt("image_title"),Fe=nt("image_caption"),be=nt("image_list"),kt=nt("a11y_advanced_options"),Mt=nt("automatic_uploads"),qo=B=>Mr(B.options.get("images_upload_url")),jn=B=>co(B.options.get("images_upload_handler")),Is=(B,G)=>Math.max(parseInt(B,10),parseInt(G,10)),cs=B=>new Promise(G=>{const ne=document.createElement("img"),we=Fn=>{ne.onload=ne.onerror=null,ne.parentNode&&ne.parentNode.removeChild(ne),G(Fn)};ne.onload=()=>{const Fn=Is(ne.width,ne.clientWidth),$t=Is(ne.height,ne.clientHeight),yr={width:Fn,height:$t};we(Promise.resolve(yr))},ne.onerror=()=>{we(Promise.reject(`Failed to get image dimensions for: ${B}`))};const Et=ne.style;Et.visibility="hidden",Et.position="fixed",Et.bottom=Et.left="0px",Et.width=Et.height="auto",document.body.appendChild(ne),ne.src=B}),br=B=>(B&&(B=B.replace(/px$/,"")),B),mo=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),er=B=>{if(B.margin){const G=String(B.margin).split(" ");switch(G.length){case 1:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[0],B["margin-bottom"]=B["margin-bottom"]||G[0],B["margin-left"]=B["margin-left"]||G[0];break;case 2:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[1],B["margin-bottom"]=B["margin-bottom"]||G[0],B["margin-left"]=B["margin-left"]||G[1];break;case 3:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[1],B["margin-bottom"]=B["margin-bottom"]||G[2],B["margin-left"]=B["margin-left"]||G[1];break;case 4:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[1],B["margin-bottom"]=B["margin-bottom"]||G[2],B["margin-left"]=B["margin-left"]||G[3]}delete B.margin}return B},yn=(B,G)=>{const ne=be(B);Gt(ne)?fetch(ne).then(we=>{we.ok&&we.json().then(G)}):Qe(ne)?ne(G):G(ne)},Ko=(B,G,ne)=>{const we=()=>{ne.onload=ne.onerror=null,B.selection&&(B.selection.select(ne),B.nodeChanged())};ne.onload=()=>{!G.width&&!G.height&&at(B)&&B.dom.setAttribs(ne,{width:String(ne.clientWidth),height:String(ne.clientHeight)}),we()},ne.onerror=we},Un=B=>new Promise((G,ne)=>{const we=new FileReader;we.onload=()=>{G(we.result)},we.onerror=()=>{var Et;ne((Et=we.error)===null||Et===void 0?void 0:Et.message)},we.readAsDataURL(B)}),Lo=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),Jn=(B,G)=>{const ne=B.options.get;return $.isDomSafe(G,"img",{allow_html_data_urls:ne("allow_html_data_urls"),allow_script_urls:ne("allow_script_urls"),allow_svg_data_urls:ne("allow_svg_data_urls")})},Do=We.DOM,is=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?br(B.style.marginLeft):"",Jr=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?br(B.style.marginTop):"",ka=B=>B.style.borderWidth?br(B.style.borderWidth):"",Dn=(B,G)=>{var ne;return B.hasAttribute(G)&&(ne=B.getAttribute(G))!==null&&ne!==void 0?ne:""},vc=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",lo=(B,G,ne)=>{ne===""||ne===null?B.removeAttribute(G):B.setAttribute(G,ne)},Zt=B=>{const G=Do.create("figure",{class:"image"});Do.insertAfter(G,B),G.appendChild(B),G.appendChild(Do.create("figcaption",{contentEditable:"true"},"Caption")),G.contentEditable="false"},In=B=>{const G=B.parentNode;co(G)&&(Do.insertAfter(B,G),Do.remove(G))},Zs=B=>{vc(B)?In(B):Zt(B)},Qr=(B,G)=>{const ne=B.getAttribute("style"),we=G(ne!==null?ne:"");we.length>0?(B.setAttribute("style",we),B.setAttribute("data-mce-style",we)):B.removeAttribute("style")},mi=(B,G)=>(ne,we,Et)=>{const Fn=ne.style;Fn[we]?(Fn[we]=mo(Et),Qr(ne,G)):lo(ne,we,Et)},Jo=(B,G)=>B.style[G]?br(B.style[G]):Dn(B,G),nl=(B,G)=>{const ne=mo(G);B.style.marginLeft=ne,B.style.marginRight=ne},us=(B,G)=>{const ne=mo(G);B.style.marginTop=ne,B.style.marginBottom=ne},No=(B,G)=>{const ne=mo(G);B.style.borderWidth=ne},hn=(B,G)=>{B.style.borderStyle=G},fr=B=>{var G;return(G=B.style.borderStyle)!==null&&G!==void 0?G:""},Fa=B=>co(B)&&B.nodeName==="FIGURE",hs=B=>B.nodeName==="IMG",Ha=B=>Do.getAttrib(B,"alt").length===0&&Do.getAttrib(B,"role")==="presentation",da=B=>Ha(B)?"":Dn(B,"alt"),Hl=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),js=(B,G)=>{var ne;const we=document.createElement("img");return lo(we,"style",G.style),(is(we)||G.hspace!=="")&&nl(we,G.hspace),(Jr(we)||G.vspace!=="")&&us(we,G.vspace),(ka(we)||G.border!=="")&&No(we,G.border),(fr(we)||G.borderStyle!=="")&&hn(we,G.borderStyle),B((ne=we.getAttribute("style"))!==null&&ne!==void 0?ne:"")},ec=(B,G)=>{const ne=document.createElement("img");if(Qt(B,{...G,caption:!1},ne),De(ne,G.alt,G.isDecorative),G.caption){const we=Do.create("figure",{class:"image"});return we.appendChild(ne),we.appendChild(Do.create("figcaption",{contentEditable:"true"},"Caption")),we.contentEditable="false",we}else return ne},ce=(B,G)=>({src:Dn(G,"src"),alt:da(G),title:Dn(G,"title"),width:Jo(G,"width"),height:Jo(G,"height"),class:Dn(G,"class"),style:B(Dn(G,"style")),caption:vc(G),hspace:is(G),vspace:Jr(G),border:ka(G),borderStyle:fr(G),isDecorative:Ha(G)}),Z=(B,G,ne,we,Et)=>{ne[we]!==G[we]&&Et(B,we,String(ne[we]))},De=(B,G,ne)=>{if(ne){Do.setAttrib(B,"role","presentation");const we=rn.fromDom(B);Eo(we,"alt","")}else{if(Zo(G)){const we=rn.fromDom(B);qt(we,"alt")}else{const we=rn.fromDom(B);Eo(we,"alt",G)}Do.getAttrib(B,"role")==="presentation"&&Do.setAttrib(B,"role","")}},$e=(B,G,ne)=>{(ne.alt!==G.alt||ne.isDecorative!==G.isDecorative)&&De(B,ne.alt,ne.isDecorative)},jt=(B,G)=>(ne,we,Et)=>{B(ne,Et),Qr(ne,G)},Qt=(B,G,ne)=>{const we=ce(B,ne);Z(ne,we,G,"caption",(Et,Fn,$t)=>Zs(Et)),Z(ne,we,G,"src",lo),Z(ne,we,G,"title",lo),Z(ne,we,G,"width",mi("width",B)),Z(ne,we,G,"height",mi("height",B)),Z(ne,we,G,"class",lo),Z(ne,we,G,"style",jt((Et,Fn)=>lo(Et,"style",Fn),B)),Z(ne,we,G,"hspace",jt(nl,B)),Z(ne,we,G,"vspace",jt(us,B)),Z(ne,we,G,"border",jt(No,B)),Z(ne,we,G,"borderStyle",jt(hn,B)),$e(ne,we,G)},Ft=(B,G)=>{const ne=B.dom.styles.parse(G),we=er(ne),Et=B.dom.styles.parse(B.dom.styles.serialize(we));return B.dom.styles.serialize(Et)},Qo=B=>{const G=B.selection.getNode(),ne=B.dom.getParent(G,"figure.image");return ne?B.dom.select("img",ne)[0]:G&&(G.nodeName!=="IMG"||Lo(G))?null:G},Ro=(B,G)=>{var ne;const we=B.dom,Et=At(B.schema.getTextBlockElements(),($t,yr)=>!B.schema.isValidChild(yr,"figure")),Fn=we.getParent(G.parentNode,$t=>X(Et,$t.nodeName),B.getBody());return Fn&&(ne=we.split(Fn,G))!==null&&ne!==void 0?ne:G},Ln=B=>{const G=Qo(B);return G?ce(ne=>Ft(B,ne),G):Hl()},Js=(B,G)=>{const ne=ec(Et=>Ft(B,Et),G);B.dom.setAttrib(ne,"data-mce-id","__mcenew"),B.focus(),B.selection.setContent(ne.outerHTML);const we=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(we,"data-mce-id",null),Fa(we)){const Et=Ro(B,we);B.selection.select(Et)}else B.selection.select(we)},Je=(B,G)=>{B.dom.setAttrib(G,"src",G.getAttribute("src"))},tr=(B,G)=>{if(G){const ne=B.dom.is(G.parentNode,"figure.image")?G.parentNode:G;B.dom.remove(ne),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},ma=(B,G)=>{const ne=Qo(B);if(ne)if(Qt(we=>Ft(B,we),G,ne),Je(B,ne),Fa(ne.parentNode)){const we=ne.parentNode;Ro(B,we),B.selection.select(ne.parentNode)}else B.selection.select(ne),Ko(B,G,ne)},tc=(B,G)=>{const ne=G.src;return{...G,src:Jn(B,ne)?ne:""}},Va=(B,G)=>{const ne=Qo(B);if(ne){const Et={...ce($t=>Ft(B,$t),ne),...G},Fn=tc(B,Et);Et.src?ma(B,Fn):tr(B,ne)}else G.src&&Js(B,{...Hl(),...G})},ds=(B=>(...G)=>{if(G.length===0)throw new Error("Can't merge zero objects");const ne={};for(let we=0;we<G.length;we++){const Et=G[we];for(const Fn in Et)ge(Et,Fn)&&(ne[Fn]=B(ne[Fn],Et[Fn]))}return ne})((B,G)=>Wn(B)&&Wn(G)?ds(B,G):G);var vr=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ms=tinymce.util.Tools.resolve("tinymce.util.Tools");const nr=B=>Gt(B.value)?B.value:"",Wc=B=>Gt(B.text)?B.text:Gt(B.title)?B.title:"",wl=(B,G)=>{const ne=[];return ms.each(B,we=>{const Et=Wc(we);if(we.menu!==void 0){const Fn=wl(we.menu,G);ne.push({text:Et,items:Fn})}else{const Fn=G(we);ne.push({text:Et,value:Fn})}}),ne},Bo=(B=nr)=>G=>G?Pt.from(G).map(ne=>wl(ne,B)):Pt.none(),Bd=B=>Bo(nr)(B),fi=B=>ge(B,"items"),za=(B,G)=>O(B,ne=>fi(ne)?za(ne.items,G):ne.value===G?Pt.some(ne):Pt.none()),fa={sanitizer:Bo,sanitize:Bd,findEntry:(B,G)=>B.bind(ne=>za(ne,G))},ol={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},nc=B=>{const G=fa.sanitizer(_a=>B.convertURL(_a.value||_a.url||"","src")),ne=new Promise(_a=>{yn(B,Fi=>{_a(G(Fi).map(rr=>Kt([[{text:"None",value:""}],rr])))})}),we=fa.sanitize(Xt(B)),Et=Wt(B),Fn=on(B),$t=qo(B),yr=jn(B),Gs=Ln(B),Ge=Be(B),ha=Go(B),Ss=at(B),Pr=Fe(B),Li=kt(B),Vn=Mt(B),gi=Pt.some(zt(B)).filter(_a=>Gt(_a)&&_a.length>0);return ne.then(_a=>({image:Gs,imageList:_a,classList:we,hasAdvTab:Et,hasUploadTab:Fn,hasUploadUrl:$t,hasUploadHandler:yr,hasDescription:Ge,hasImageTitle:ha,hasDimensions:Ss,hasImageCaption:Pr,prependURL:gi,hasAccessibilityOptions:Li,automaticUploads:Vn}))},Sl=B=>{const G={name:"src",type:"urlinput",filetype:"image",label:"Source"},ne=B.imageList.map(ha=>({name:"images",type:"listbox",label:"Image list",items:ha})),we={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},Et={name:"title",type:"input",label:"Image title"},Fn={name:"dimensions",type:"sizeinput"},$t={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},yr=B.classList.map(ha=>({name:"classes",type:"listbox",label:"Class",items:ha})),Gs={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Ge=ha=>ha?{type:"grid",columns:2}:{type:"panel"};return Kt([[G],ne.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[$t]:[],B.hasDescription?[we]:[],B.hasImageTitle?[Et]:[],B.hasDimensions?[Fn]:[],[{...Ge(B.classList.isSome()&&B.hasImageCaption),items:Kt([yr.toArray(),B.hasImageCaption?[Gs]:[]])}]])},xl={makeTab:B=>({title:"General",name:"general",items:Sl(B)}),makeItems:Sl},ns={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Tl=B=>({prevImage:fa.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),ga=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),yc=(B,G)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&G?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),kl=(B,G)=>/^(?:[a-zA-Z]+:)?\/\//.test(G)?Pt.none():B.prependURL.bind(ne=>G.substring(0,ne.length)!==ne?Pt.some(ne+G):Pt.none()),sl=(B,G)=>{const ne=G.getData();kl(B,ne.src.value).each(we=>{G.setData({src:{value:we,meta:ne.src.meta}})})},ea=(B,G,ne)=>{B.hasDescription&&Gt(ne.alt)&&(G.alt=ne.alt),B.hasAccessibilityOptions&&(G.isDecorative=ne.isDecorative||G.isDecorative||!1),B.hasImageTitle&&Gt(ne.title)&&(G.title=ne.title),B.hasDimensions&&(Gt(ne.width)&&(G.dimensions.width=ne.width),Gt(ne.height)&&(G.dimensions.height=ne.height)),Gt(ne.class)&&fa.findEntry(B.classList,ne.class).each(we=>{G.classes=we.value}),B.hasImageCaption&&Bt(ne.caption)&&(G.caption=ne.caption),B.hasAdvTab&&(Gt(ne.style)&&(G.style=ne.style),Gt(ne.vspace)&&(G.vspace=ne.vspace),Gt(ne.border)&&(G.border=ne.border),Gt(ne.hspace)&&(G.hspace=ne.hspace),Gt(ne.borderstyle)&&(G.borderstyle=ne.borderstyle))},zl=(B,G)=>{const ne=G.getData(),we=ne.src.meta;if(we!==void 0){const Et=ds({},ne);ea(B,Et,we),G.setData(Et)}},rl=(B,G,ne,we)=>{const Et=we.getData(),Fn=Et.src.value,$t=Et.src.meta||{};!$t.width&&!$t.height&&G.hasDimensions&&(Mr(Fn)?B.imageSize(Fn).then(yr=>{ne.open&&we.setData({dimensions:yr})}).catch(yr=>console.error(yr)):we.setData({dimensions:{width:"",height:""}}))},Ii=(B,G,ne)=>{const we=ne.getData(),Et=fa.findEntry(B.imageList,we.src.value);G.prevImage=Et,ne.setData({images:Et.map(Fn=>Fn.value).getOr("")})},ws=(B,G,ne,we)=>{sl(G,we),zl(G,we),rl(B,G,ne,we),Ii(G,ne,we)},Ea=(B,G,ne,we)=>{const Et=we.getData(),Fn=fa.findEntry(G.imageList,Et.images);Fn.each($t=>{Et.alt===""||ne.prevImage.map(Gs=>Gs.text===Et.alt).getOr(!1)?$t.value===""?we.setData({src:$t,alt:ne.prevAlt}):we.setData({src:$t,alt:$t.text}):we.setData({src:$t})}),ne.prevImage=Fn,ws(B,G,ne,we)},j=(B,G,ne,we)=>{const Et=we.getData();we.block("Uploading image"),gn(Et.fileinput).fold(()=>{we.unblock()},Fn=>{const $t=URL.createObjectURL(Fn),yr=()=>{we.unblock(),URL.revokeObjectURL($t)},Gs=Ge=>{we.setData({src:{value:Ge,meta:{}}}),we.showTab("general"),ws(B,G,ne,we)};Un(Fn).then(Ge=>{const ha=B.createBlobCache(Fn,$t,Ge);G.automaticUploads?B.uploadImage(ha).then(Ss=>{Gs(Ss.url),yr()}).catch(Ss=>{yr(),B.alertErr(Ss)}):(B.addToBlobCache(ha),Gs(ha.blobUri()),we.unblock())})})},le=(B,G,ne)=>(we,Et)=>{Et.name==="src"?ws(B,G,ne,we):Et.name==="images"?Ea(B,G,ne,we):Et.name==="alt"?ne.prevAlt=we.getData().alt:Et.name==="fileinput"?j(B,G,ne,we):Et.name==="isDecorative"&&we.setEnabled("alt",!we.getData().isDecorative)},he=B=>()=>{B.open=!1},Ie=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:Kt([[xl.makeTab(B)],B.hasAdvTab?[ol.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[ns.makeTab(B)]:[]])}:{type:"panel",items:xl.makeItems(B)},ot=(B,G,ne)=>we=>{const Et=ds(ga(G.image),we.getData()),Fn={...Et,style:js(ne.normalizeCss,yc(Et,!1))};B.execCommand("mceUpdateImage",!1,yc(Fn,G.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),we.close()},un=B=>G=>Jn(B,G)?cs(B.documentBaseURI.toAbsolute(G)).then(ne=>({width:String(ne.width),height:String(ne.height)})):Promise.resolve({width:"",height:""}),fo=B=>(G,ne,we)=>{var Et;return B.editorUpload.blobCache.create({blob:G,blobUri:ne,name:(Et=G.name)===null||Et===void 0?void 0:Et.replace(/\.[^\.]+$/,""),filename:G.name,base64:we.split(",")[1]})},or=B=>G=>{B.editorUpload.blobCache.add(G)},os=B=>G=>{B.windowManager.alert(G)},ir=B=>G=>Ft(B,G),sr=B=>G=>B.dom.parseStyle(G),gr=B=>(G,ne)=>B.dom.serializeStyle(G,ne),Ua=B=>G=>vr(B).upload([G],!1).then(ne=>{var we;return ne.length===0?Promise.reject("Failed to upload image"):ne[0].status===!1?Promise.reject((we=ne[0].error)===null||we===void 0?void 0:we.message):ne[0]}),Br=B=>{const G={imageSize:un(B),addToBlobCache:or(B),createBlobCache:fo(B),alertErr:os(B),normalizeCss:ir(B),parseStyle:sr(B),serializeStyle:gr(B),uploadImage:Ua(B)};return{open:()=>{nc(B).then(we=>{const Et=Tl(we);return{title:"Insert/Edit Image",size:"normal",body:Ie(we),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ga(we.image),onSubmit:ot(B,we,G),onChange:le(G,we,Et),onClose:he(Et)}}).then(B.windowManager.open)}}},zr=B=>{B.addCommand("mceImage",Br(B).open),B.addCommand("mceUpdateImage",(G,ne)=>{B.undoManager.transact(()=>Va(B,ne))})},al=B=>{const G=B.attr("class");return co(G)&&/\bimage\b/.test(G)},cl=B=>G=>{let ne=G.length;const we=Et=>{Et.attr("contenteditable",B?"true":null)};for(;ne--;){const Et=G[ne];al(Et)&&(Et.attr("contenteditable",B?"false":null),ms.each(Et.getAll("figcaption"),we))}},Rn=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",cl(!0)),B.serializer.addNodeFilter("figure",cl(!1))})},Ao=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Br(B).open,onSetup:G=>(G.setActive(co(Qo(B))),B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",G.setActive).unbind)}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Br(B).open}),B.ui.registry.addContextMenu("image",{update:G=>Fa(G)||hs(G)&&!Lo(G)?["image"]:[]})};var Ls=()=>{vt.add("image",B=>{ze(B),Rn(B),Ao(B),zr(B)})};Ls()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(ce,Z,De)=>{var $e;return De(ce,Z.prototype)?!0:(($e=ce.constructor)===null||$e===void 0?void 0:$e.name)===Z.name},wn=ce=>{const Z=typeof ce;return ce===null?"null":Z==="object"&&Array.isArray(ce)?"array":Z==="object"&&On(ce,String,(De,$e)=>$e.isPrototypeOf(De))?"string":Z},Sn=ce=>Z=>wn(Z)===ce,En=Sn("string"),eo=Sn("object"),ao=Sn("array"),xt=ce=>ce==null,Gt=ce=>!xt(ce);class uo{constructor(Z,De){this.tag=Z,this.value=De}static some(Z){return new uo(!0,Z)}static none(){return uo.singletonNone}fold(Z,De){return this.tag?De(this.value):Z()}isSome(){return this.tag}isNone(){return!this.tag}map(Z){return this.tag?uo.some(Z(this.value)):uo.none()}bind(Z){return this.tag?Z(this.value):uo.none()}exists(Z){return this.tag&&Z(this.value)}forall(Z){return!this.tag||Z(this.value)}filter(Z){return!this.tag||Z(this.value)?this:uo.none()}getOr(Z){return this.tag?this.value:Z}or(Z){return this.tag?this:Z}getOrThunk(Z){return this.tag?this.value:Z()}orThunk(Z){return this.tag?this:Z()}getOrDie(Z){if(this.tag)return this.value;throw new Error(Z??"Called getOrDie on None")}static from(Z){return Gt(Z)?uo.some(Z):uo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Z){this.tag&&Z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}uo.singletonNone=new uo(!1);const Wn=Array.prototype.push,Xo=(ce,Z)=>{for(let De=0,$e=ce.length;De<$e;De++){const jt=ce[De];Z(jt,De)}},Zo=ce=>{const Z=[];for(let De=0,$e=ce.length;De<$e;++De){if(!ao(ce[De]))throw new Error("Arr.flatten item "+De+" was not an array, input: "+ce);Wn.apply(Z,ce[De])}return Z},Bt=ce=>{let Z=ce;return{get:()=>Z,set:jt=>{Z=jt}}},$n=Object.keys,co=Object.hasOwnProperty,Qe=(ce,Z)=>{const De=$n(ce);for(let $e=0,jt=De.length;$e<jt;$e++){const Qt=De[$e],Ft=ce[Qt];Z(Ft,Qt)}},_n=(ce,Z)=>Ye(ce,Z)?uo.from(ce[Z]):uo.none(),Ye=(ce,Z)=>co.call(ce,Z),oe=ce=>Z=>Z.options.get(ce),Pt=ce=>{const Z=ce.options.register;Z("audio_template_callback",{processor:"function"}),Z("video_template_callback",{processor:"function"}),Z("iframe_template_callback",{processor:"function"}),Z("media_live_embeds",{processor:"boolean",default:!0}),Z("media_filter_html",{processor:"boolean",default:!0}),Z("media_url_resolver",{processor:"function"}),Z("media_alt_source",{processor:"boolean",default:!0}),Z("media_poster",{processor:"boolean",default:!0}),Z("media_dimensions",{processor:"boolean",default:!0})},Ps=oe("audio_template_callback"),Zn=oe("video_template_callback"),te=oe("iframe_template_callback"),cn=oe("media_live_embeds"),jo=oe("media_filter_html"),At=oe("media_url_resolver"),ge=oe("media_alt_source"),X=oe("media_poster"),An=oe("media_dimensions");var Kt=tinymce.util.Tools.resolve("tinymce.util.Tools"),bt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),gn=tinymce.util.Tools.resolve("tinymce.html.DomParser");const O=bt.DOM,je=ce=>ce.replace(/px$/,""),Eo=ce=>{const Z=ce.attr("style"),De=Z?O.parseStyle(Z):{};return{type:"ephox-embed-iri",source:ce.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:_n(De,"max-width").map(je).getOr(""),height:_n(De,"max-height").map(je).getOr("")}},qt=(ce,Z)=>{let De={};const jt=gn({validate:!1,forced_root_block:!1},Z).parse(ce);for(let Qt=jt;Qt;Qt=Qt.walk())if(Qt.type===1){const Ft=Qt.name;if(Qt.attr("data-ephox-embed-iri")){De=Eo(Qt);break}else!De.source&&Ft==="param"&&(De.source=Qt.attr("movie")),(Ft==="iframe"||Ft==="object"||Ft==="embed"||Ft==="video"||Ft==="audio")&&(De.type||(De.type=Ft),De=Kt.extend(Qt.attributes.map,De)),Ft==="script"&&(De={type:"script",source:Qt.attr("src")}),Ft==="source"&&(De.source?De.altsource||(De.altsource=Qt.attr("src")):De.source=Qt.attr("src")),Ft==="img"&&!De.poster&&(De.poster=Qt.attr("src"))}return De.source=De.source||De.src||"",De.altsource=De.altsource||"",De.poster=De.poster||"",De},Le=ce=>{var Z;const De={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},$e=(Z=ce.toLowerCase().split(".").pop())!==null&&Z!==void 0?Z:"";return _n(De,$e).getOr("")};var lr=tinymce.util.Tools.resolve("tinymce.html.Node"),yo=tinymce.util.Tools.resolve("tinymce.html.Serializer");const oo=(ce,Z={})=>gn({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...Z},ce),$s=bt.DOM,rn=ce=>/^[0-9.]+$/.test(ce)?ce+"px":ce,We=(ce,Z)=>{const De=Z.attr("style"),$e=De?$s.parseStyle(De):{};Gt(ce.width)&&($e["max-width"]=rn(ce.width)),Gt(ce.height)&&($e["max-height"]=rn(ce.height)),Z.attr("style",$s.serializeStyle($e))},$=["source","altsource"],Mr=(ce,Z,De,$e)=>{let jt=0,Qt=0;const Ft=oo($e);Ft.addNodeFilter("source",Ro=>jt=Ro.length);const Qo=Ft.parse(ce);for(let Ro=Qo;Ro;Ro=Ro.walk())if(Ro.type===1){const Ln=Ro.name;if(Ro.attr("data-ephox-embed-iri")){We(Z,Ro);break}else{switch(Ln){case"video":case"object":case"embed":case"img":case"iframe":Z.height!==void 0&&Z.width!==void 0&&(Ro.attr("width",Z.width),Ro.attr("height",Z.height));break}if(De)switch(Ln){case"video":Ro.attr("poster",Z.poster),Ro.attr("src",null);for(let Je=jt;Je<2;Je++)if(Z[$[Je]]){const tr=new lr("source",1);tr.attr("src",Z[$[Je]]),tr.attr("type",Z[$[Je]+"mime"]||null),Ro.append(tr)}break;case"iframe":Ro.attr("src",Z.source);break;case"object":const Js=Ro.getAll("img").length>0;if(Z.poster&&!Js){Ro.attr("src",Z.poster);const Je=new lr("img",1);Je.attr("src",Z.poster),Je.attr("width",Z.width),Je.attr("height",Z.height),Ro.append(Je)}break;case"source":if(Qt<2&&(Ro.attr("src",Z[$[Qt]]),Ro.attr("type",Z[$[Qt]+"mime"]||null),!Z[$[Qt]])){Ro.remove();continue}Qt++;break;case"img":Z.poster||Ro.remove();break}}}return yo({},$e).serialize(Qo)},nt=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ze=ce=>{const Z=ce.match(/^(https?:\/\/|www\.)(.+)$/i);return Z&&Z.length>1?Z[1]==="www."?"https://":Z[1]:"https://"},at=(ce,Z)=>{const De=ze(Z),$e=ce.regex.exec(Z);let jt=De+ce.url;if(Gt($e))for(let Qt=0;Qt<$e.length;Qt++)jt=jt.replace("$"+Qt,()=>$e[Qt]?$e[Qt]:"");return jt.replace(/\?$/,"")},Wt=ce=>{const Z=nt.filter(De=>De.regex.test(ce));return Z.length>0?Kt.extend({},Z[0],{url:at(Z[0],ce)}):null},on=(ce,Z)=>{if(Z)return Z(ce);{const De=ce.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ce.source+'" width="'+ce.width+'" height="'+ce.height+'"'+De+"></iframe>"}},zt=ce=>{let Z='<object data="'+ce.source+'" width="'+ce.width+'" height="'+ce.height+'" type="application/x-shockwave-flash">';return ce.poster&&(Z+='<img src="'+ce.poster+'" width="'+ce.width+'" height="'+ce.height+'" />'),Z+="</object>",Z},Xt=(ce,Z)=>Z?Z(ce):'<audio controls="controls" src="'+ce.source+'">'+(ce.altsource?`
<source src="`+ce.altsource+'"'+(ce.altsourcemime?' type="'+ce.altsourcemime+'"':"")+` />
`:"")+"</audio>",Be=(ce,Z)=>Z?Z(ce):'<video width="'+ce.width+'" height="'+ce.height+'"'+(ce.poster?' poster="'+ce.poster+'"':"")+` controls="controls">
<source src="`+ce.source+'"'+(ce.sourcemime?' type="'+ce.sourcemime+'"':"")+` />
`+(ce.altsource?'<source src="'+ce.altsource+'"'+(ce.altsourcemime?' type="'+ce.altsourcemime+'"':"")+` />
`:"")+"</video>",Go=ce=>'<script src="'+ce.source+'"><\/script>',Fe=(ce,Z)=>{var De;const $e=Kt.extend({},Z);if(!$e.source&&(Kt.extend($e,qt((De=$e.embed)!==null&&De!==void 0?De:"",ce.schema)),!$e.source))return"";$e.altsource||($e.altsource=""),$e.poster||($e.poster=""),$e.source=ce.convertURL($e.source,"source"),$e.altsource=ce.convertURL($e.altsource,"source"),$e.sourcemime=Le($e.source),$e.altsourcemime=Le($e.altsource),$e.poster=ce.convertURL($e.poster,"poster");const jt=Wt($e.source);if(jt&&($e.source=jt.url,$e.type=jt.type,$e.allowfullscreen=jt.allowFullscreen,$e.width=$e.width||String(jt.w),$e.height=$e.height||String(jt.h)),$e.embed)return Mr($e.embed,$e,!0,ce.schema);{const Qt=Ps(ce),Ft=Zn(ce),Qo=te(ce);return $e.width=$e.width||"300",$e.height=$e.height||"150",Kt.each($e,(Ro,Ln)=>{$e[Ln]=ce.dom.encode(""+Ro)}),$e.type==="iframe"?on($e,Qo):$e.sourcemime==="application/x-shockwave-flash"?zt($e):$e.sourcemime.indexOf("audio")!==-1?Xt($e,Qt):$e.type==="script"?Go($e):Be($e,Ft)}},be=ce=>ce.hasAttribute("data-mce-object")||ce.hasAttribute("data-ephox-embed-iri"),kt=ce=>{ce.on("click keyup touchend",()=>{const Z=ce.selection.getNode();Z&&ce.dom.hasClass(Z,"mce-preview-object")&&ce.dom.getAttrib(Z,"data-mce-selected")&&Z.setAttribute("data-mce-selected","2")}),ce.on("ObjectSelected",Z=>{Z.target.getAttribute("data-mce-object")==="script"&&Z.preventDefault()}),ce.on("ObjectResized",Z=>{const De=Z.target;if(De.getAttribute("data-mce-object")){let $e=De.getAttribute("data-mce-html");$e&&($e=unescape($e),De.setAttribute("data-mce-html",escape(Mr($e,{width:String(Z.width),height:String(Z.height)},!1,ce.schema))))}})},Mt={},qo=(ce,Z,De)=>new Promise(($e,jt)=>{const Qt=Ft=>(Ft.html&&(Mt[ce.source]=Ft),$e({url:ce.source,html:Ft.html?Ft.html:Z(ce)}));Mt[ce.source]?Qt(Mt[ce.source]):De({url:ce.source},Qt,jt)}),jn=(ce,Z)=>Promise.resolve({html:Z(ce),url:ce.source}),Is=ce=>Z=>Fe(ce,Z),cs=(ce,Z)=>{const De=At(ce);return De?qo(Z,Is(ce),De):jn(Z,Is(ce))},br=ce=>Ye(Mt,ce),mo=(ce,Z)=>_n(Z,ce).bind(De=>_n(De,"meta")),er=(ce,Z,De)=>$e=>{const jt=()=>_n(ce,$e),Qt=()=>_n(Z,$e),Ft=Ln=>_n(Ln,"value").bind(Js=>Js.length>0?uo.some(Js):uo.none()),Qo=()=>jt().bind(Ln=>eo(Ln)?Ft(Ln).orThunk(Qt):Qt().orThunk(()=>uo.from(Ln))),Ro=()=>Qt().orThunk(()=>jt().bind(Ln=>eo(Ln)?Ft(Ln):uo.from(Ln)));return{[$e]:($e===De?Qo():Ro()).getOr("")}},yn=(ce,Z)=>{const De={};return _n(ce,"dimensions").each($e=>{Xo(["width","height"],jt=>{_n(Z,jt).orThunk(()=>_n($e,jt)).each(Qt=>De[jt]=Qt)})}),De},Ko=(ce,Z)=>{const De=Z&&Z!=="dimensions"?mo(Z,ce).getOr({}):{},$e=er(ce,De,Z);return{...$e("source"),...$e("altsource"),...$e("poster"),...$e("embed"),...yn(ce,De)}},Un=ce=>{const Z={...ce,source:{value:_n(ce,"source").getOr("")},altsource:{value:_n(ce,"altsource").getOr("")},poster:{value:_n(ce,"poster").getOr("")}};return Xo(["width","height"],De=>{_n(ce,De).each($e=>{const jt=Z.dimensions||{};jt[De]=$e,Z.dimensions=jt})}),Z},Lo=ce=>Z=>{const De=Z&&Z.msg?"Media embed handler error: "+Z.msg:"Media embed handler threw unknown error.";ce.notificationManager.open({type:"error",text:De})},Jn=ce=>{const Z=ce.selection.getNode(),De=be(Z)?ce.serializer.serialize(Z,{selection:!0}):"";return{embed:De,...qt(De,ce.schema)}},Do=(ce,Z)=>De=>{if(En(De.url)&&De.url.trim().length>0){const $e=De.html,Qt={...qt($e,Z.schema),source:De.url,embed:$e};ce.setData(Un(Qt))}},is=(ce,Z)=>{const De=ce.dom.select("*[data-mce-object]");for(let $e=0;$e<Z.length;$e++)for(let jt=De.length-1;jt>=0;jt--)Z[$e]===De[jt]&&De.splice(jt,1);ce.selection.select(De[0])},Jr=(ce,Z)=>{const De=ce.dom.select("*[data-mce-object]");ce.insertContent(Z),is(ce,De),ce.nodeChanged()},ka=(ce,Z,De)=>{var $e;Z.embed=Mr(($e=Z.embed)!==null&&$e!==void 0?$e:"",Z,!1,De.schema),Z.embed&&(ce.source===Z.source||br(Z.source))?Jr(De,Z.embed):cs(De,Z).then(jt=>{Jr(De,jt.html)}).catch(Lo(De))},Dn=ce=>{const Z=Jn(ce),De=Bt(Z),$e=Un(Z),jt=(Nr,ds)=>{const vr=Ko(ds.getData(),"source");Nr.source!==vr.source&&(Do(Cl,ce)({url:vr.source,html:""}),cs(ce,vr).then(Do(Cl,ce)).catch(Lo(ce)))},Qt=Nr=>{var ds;const vr=Ko(Nr.getData()),ms=qt((ds=vr.embed)!==null&&ds!==void 0?ds:"",ce.schema);Nr.setData(Un(ms))},Ft=(Nr,ds)=>{const vr=Ko(Nr.getData(),ds),ms=Fe(ce,vr);Nr.setData(Un({...vr,embed:ms}))},Qo=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],Ro=An(ce)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Ln={title:"General",name:"general",items:Zo([Qo,Ro])},Je={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},tr=[];ge(ce)&&tr.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),X(ce)&&tr.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const ma={title:"Advanced",name:"advanced",items:tr},tc=[Ln,Je];tr.length>0&&tc.push(ma);const Va={type:"tabpanel",tabs:tc},Cl=ce.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Va,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Nr=>{const ds=Ko(Nr.getData());ka(De.get(),ds,ce),Nr.close()},onChange:(Nr,ds)=>{switch(ds.name){case"source":jt(De.get(),Nr);break;case"embed":Qt(Nr);break;case"dimensions":case"altsource":case"poster":Ft(Nr,ds.name);break}De.set(Ko(Nr.getData()))},initialData:$e})},vc=ce=>({showDialog:()=>{Dn(ce)}}),lo=ce=>{const Z=()=>{Dn(ce)};ce.addCommand("mceMedia",Z)},Zt=(ce,Z,De)=>Z===""||ce.length>=Z.length&&ce.substr(De,De+Z.length)===Z,In=(ce,Z)=>Zt(ce,Z,0);var Zs=tinymce.util.Tools.resolve("tinymce.Env");const Qr=ce=>{const Z=ce.name;return Z==="iframe"||Z==="video"||Z==="audio"},mi=(ce,Z,De,$e=null)=>{const jt=ce.attr(De);return Gt(jt)?jt:Ye(Z,De)?null:$e},Jo=(ce,Z,De)=>{const $e=Z.name==="img"||ce.name==="video",jt=$e?"300":null,Qt=ce.name==="audio"?"30":"150",Ft=$e?Qt:null;Z.attr({width:mi(ce,De,"width",jt),height:mi(ce,De,"height",Ft)})},nl=(ce,Z,De,$e)=>{const jt=oo(ce.schema).parse($e,{context:Z});for(;jt.firstChild;)De.append(jt.firstChild)},us=(ce,Z)=>{const De=Z.name,$e=new lr("img",1);return hn(ce,Z,$e),Jo(Z,$e,{}),$e.attr({style:Z.attr("style"),src:Zs.transparentSrc,"data-mce-object":De,class:"mce-object mce-object-"+De}),$e},No=(ce,Z)=>{var De;const $e=Z.name,jt=new lr("span",1);jt.attr({contentEditable:"false",style:Z.attr("style"),"data-mce-object":$e,class:"mce-preview-object mce-object-"+$e}),hn(ce,Z,jt);const Qt=ce.dom.parseStyle((De=Z.attr("style"))!==null&&De!==void 0?De:""),Ft=new lr($e,1);if(Jo(Z,Ft,Qt),Ft.attr({src:Z.attr("src"),style:Z.attr("style"),class:Z.attr("class")}),$e==="iframe")Ft.attr({allowfullscreen:Z.attr("allowfullscreen"),frameborder:"0"});else{Xo(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Js=>{Ft.attr(Js,Z.attr(Js))});const Ln=jt.attr("data-mce-html");Gt(Ln)&&nl(ce,$e,Ft,unescape(Ln))}const Qo=new lr("span",1);return Qo.attr("class","mce-shim"),jt.append(Ft),jt.append(Qo),jt},hn=(ce,Z,De)=>{var $e;const jt=($e=Z.attributes)!==null&&$e!==void 0?$e:[];let Qt=jt.length;for(;Qt--;){const Ln=jt[Qt].name;let Js=jt[Qt].value;Ln!=="width"&&Ln!=="height"&&Ln!=="style"&&!In(Ln,"data-mce-")&&((Ln==="data"||Ln==="src")&&(Js=ce.convertURL(Js,Ln)),De.attr("data-mce-p-"+Ln,Js))}const Ft=yo({inner:!0},ce.schema),Qo=new lr("div",1);Xo(Z.children(),Ln=>Qo.append(Ln));const Ro=Ft.serialize(Qo);Ro&&(De.attr("data-mce-html",escape(Ro)),De.empty())},fr=ce=>{const Z=ce.attr("class");return En(Z)&&/\btiny-pageembed\b/.test(Z)},Fa=ce=>{let Z=ce;for(;Z=Z.parent;)if(Z.attr("data-ephox-embed-iri")||fr(Z))return!0;return!1},hs=ce=>Z=>{let De=Z.length,$e;for(;De--;)$e=Z[De],$e.parent&&($e.parent.attr("data-mce-object")||(Qr($e)&&cn(ce)?Fa($e)||$e.replace(No(ce,$e)):Fa($e)||$e.replace(us(ce,$e))))},Ha=(ce,Z,De)=>{const $e=jo(ce);return oo(ce.schema,{validate:$e}).parse(De,{context:Z})},da=ce=>{ce.on("PreInit",()=>{const{schema:Z,serializer:De,parser:$e}=ce,jt=Z.getBoolAttrs();Xo("webkitallowfullscreen mozallowfullscreen".split(" "),Qt=>{jt[Qt]={}}),Qe({embed:["wmode"]},(Qt,Ft)=>{const Qo=Z.getElementRule(Ft);Qo&&Xo(Qt,Ro=>{Qo.attributes[Ro]={},Qo.attributesOrder.push(Ro)})}),$e.addNodeFilter("iframe,video,audio,object,embed,script",hs(ce)),De.addAttributeFilter("data-mce-object",(Qt,Ft)=>{var Qo;let Ro=Qt.length;for(;Ro--;){const Ln=Qt[Ro];if(!Ln.parent)continue;const Js=Ln.attr(Ft),Je=new lr(Js,1);if(Js!=="audio"&&Js!=="script"){const Va=Ln.attr("class");Va&&Va.indexOf("mce-preview-object")!==-1&&Ln.firstChild?Je.attr({width:Ln.firstChild.attr("width"),height:Ln.firstChild.attr("height")}):Je.attr({width:Ln.attr("width"),height:Ln.attr("height")})}Je.attr({style:Ln.attr("style")});const tr=(Qo=Ln.attributes)!==null&&Qo!==void 0?Qo:[];let ma=tr.length;for(;ma--;){const Va=tr[ma].name;Va.indexOf("data-mce-p-")===0&&Je.attr(Va.substr(11),tr[ma].value)}Js==="script"&&Je.attr("type","text/javascript");const tc=Ln.attr("data-mce-html");if(tc){const Va=Ha(ce,Js,unescape(tc));Xo(Va.children(),Cl=>Je.append(Cl))}Ln.replace(Je)}})}),ce.on("SetContent",()=>{const Z=ce.dom;Xo(Z.select("span.mce-preview-object"),De=>{Z.select("span.mce-shim",De).length===0&&Z.add(De,"span",{class:"mce-shim"})})})},Hl=ce=>{ce.on("ResolveName",Z=>{let De;Z.target.nodeType===1&&(De=Z.target.getAttribute("data-mce-object"))&&(Z.name=De)})},js=ce=>{const Z=()=>ce.execCommand("mceMedia");ce.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Z,onSetup:De=>{const $e=ce.selection;return De.setActive(be($e.getNode())),$e.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",De.setActive).unbind}}),ce.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Z})};var ec=()=>{vt.add("media",ce=>(Pt(ce),lo(ce),js(ce),Hl(ce),da(ce),kt(ce),vc(ce)))};ec()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(j,le,he)=>{var Ie;return he(j,le.prototype)?!0:((Ie=j.constructor)===null||Ie===void 0?void 0:Ie.name)===le.name},wn=j=>{const le=typeof j;return j===null?"null":le==="object"&&Array.isArray(j)?"array":le==="object"&&On(j,String,(he,Ie)=>Ie.isPrototypeOf(he))?"string":le},Sn=j=>le=>wn(le)===j,En=j=>le=>typeof le===j,eo=j=>le=>j===le,ao=Sn("string"),xt=Sn("object"),Gt=Sn("array"),uo=eo(null),Wn=En("boolean"),Xo=j=>j==null,Zo=j=>!Xo(j),Bt=En("function"),$n=(j,le)=>{if(Gt(j)){for(let he=0,Ie=j.length;he<Ie;++he)if(!le(j[he]))return!1;return!0}return!1},co=()=>{},Qe=j=>()=>j,_n=(j,le)=>j===le;class Ye{constructor(le,he){this.tag=le,this.value=he}static some(le){return new Ye(!0,le)}static none(){return Ye.singletonNone}fold(le,he){return this.tag?he(this.value):le()}isSome(){return this.tag}isNone(){return!this.tag}map(le){return this.tag?Ye.some(le(this.value)):Ye.none()}bind(le){return this.tag?le(this.value):Ye.none()}exists(le){return this.tag&&le(this.value)}forall(le){return!this.tag||le(this.value)}filter(le){return!this.tag||le(this.value)?this:Ye.none()}getOr(le){return this.tag?this.value:le}or(le){return this.tag?this:le}getOrThunk(le){return this.tag?this.value:le()}orThunk(le){return this.tag?this:le()}getOrDie(le){if(this.tag)return this.value;throw new Error(le??"Called getOrDie on None")}static from(le){return Zo(le)?Ye.some(le):Ye.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(le){this.tag&&le(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ye.singletonNone=new Ye(!1);const oe=Array.prototype.indexOf,Pt=Array.prototype.push,Ps=(j,le)=>oe.call(j,le),Zn=(j,le)=>Ps(j,le)>-1,te=(j,le)=>{const he=j.length,Ie=new Array(he);for(let ot=0;ot<he;ot++){const un=j[ot];Ie[ot]=le(un,ot)}return Ie},cn=(j,le)=>{for(let he=0,Ie=j.length;he<Ie;he++){const ot=j[he];le(ot,he)}},jo=(j,le,he)=>(cn(j,(Ie,ot)=>{he=le(he,Ie,ot)}),he),At=j=>{const le=[];for(let he=0,Ie=j.length;he<Ie;++he){if(!Gt(j[he]))throw new Error("Arr.flatten item "+he+" was not an array, input: "+j);Pt.apply(le,j[he])}return le},ge=(j,le)=>At(te(j,le)),X=(j,le)=>{for(let he=0;he<j.length;he++){const Ie=le(j[he],he);if(Ie.isSome())return Ie}return Ye.none()},An=(j,le,he=_n)=>j.exists(Ie=>he(Ie,le)),Kt=j=>{const le=[],he=Ie=>{le.push(Ie)};for(let Ie=0;Ie<j.length;Ie++)j[Ie].each(he);return le},bt=(j,le)=>j?Ye.some(le):Ye.none(),gn=j=>le=>le.options.get(j),O=j=>{const le=j.options.register;le("link_assume_external_targets",{processor:he=>{const Ie=ao(he)||Wn(he);return Ie?he===!0?{value:1,valid:Ie}:he==="http"||he==="https"?{value:he,valid:Ie}:{value:0,valid:Ie}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),le("link_context_toolbar",{processor:"boolean",default:!1}),le("link_list",{processor:he=>ao(he)||Bt(he)||$n(he,xt)}),le("link_default_target",{processor:"string"}),le("link_default_protocol",{processor:"string",default:"https"}),le("link_target_list",{processor:he=>Wn(he)||$n(he,xt),default:!0}),le("link_rel_list",{processor:"object[]",default:[]}),le("link_class_list",{processor:"object[]",default:[]}),le("link_title",{processor:"boolean",default:!0}),le("allow_unsafe_link_target",{processor:"boolean",default:!1}),le("link_quicklink",{processor:"boolean",default:!1})},je=gn("link_assume_external_targets"),Eo=gn("link_context_toolbar"),qt=gn("link_list"),Le=gn("link_default_target"),lr=gn("link_default_protocol"),yo=gn("link_target_list"),oo=gn("link_rel_list"),$s=gn("link_class_list"),rn=gn("link_title"),We=gn("allow_unsafe_link_target"),$=gn("link_quicklink");var Mr=tinymce.util.Tools.resolve("tinymce.util.Tools");const nt=j=>ao(j.value)?j.value:"",ze=j=>ao(j.text)?j.text:ao(j.title)?j.title:"",at=(j,le)=>{const he=[];return Mr.each(j,Ie=>{const ot=ze(Ie);if(Ie.menu!==void 0){const un=at(Ie.menu,le);he.push({text:ot,items:un})}else{const un=le(Ie);he.push({text:ot,value:un})}}),he},Wt=(j=nt)=>le=>Ye.from(le).map(he=>at(he,j)),Xt={sanitize:j=>Wt(nt)(j),sanitizeWith:Wt,createUi:(j,le)=>he=>({name:j,type:"listbox",label:le,items:he}),getValue:nt},Be=Object.keys,Go=Object.hasOwnProperty,Fe=(j,le)=>{const he=Be(j);for(let Ie=0,ot=he.length;Ie<ot;Ie++){const un=he[Ie],fo=j[un];le(fo,un)}},be=j=>(le,he)=>{j[he]=le},kt=(j,le,he,Ie)=>{Fe(j,(ot,un)=>{(le(ot,un)?he:Ie)(ot,un)})},Mt=(j,le)=>{const he={};return kt(j,le,be(he),co),he},qo=(j,le)=>Go.call(j,le),jn=(j,le)=>qo(j,le)&&j[le]!==void 0&&j[le]!==null;var Is=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),cs=tinymce.util.Tools.resolve("tinymce.util.URI");const br=j=>Zo(j)&&j.nodeName.toLowerCase()==="a",mo=j=>br(j)&&!!Ko(j),er=(j,le)=>{if(j.collapsed)return[];{const he=j.cloneContents(),Ie=he.firstChild,ot=new Is(Ie,he),un=[];let fo=Ie;do le(fo)&&un.push(fo);while(fo=ot.next());return un}},yn=j=>/^\w+:/i.test(j),Ko=j=>{var le,he;return(he=(le=j.getAttribute("data-mce-href"))!==null&&le!==void 0?le:j.getAttribute("href"))!==null&&he!==void 0?he:""},Un=(j,le)=>{const he=["noopener"],Ie=j?j.split(/\s+/):[],ot=os=>Mr.trim(os.sort().join(" ")),un=os=>(os=fo(os),os.length>0?os.concat(he):he),fo=os=>os.filter(ir=>Mr.inArray(he,ir)===-1),or=le?un(Ie):fo(Ie);return or.length>0?ot(or):""},Lo=j=>j.replace(/\uFEFF/g,""),Jn=(j,le)=>(le=le||j.selection.getNode(),vc(le)?Ye.from(j.dom.select("a[href]",le)[0]):Ye.from(j.dom.getParent(le,"a[href]"))),Do=(j,le)=>Jn(j,le).isSome(),is=(j,le)=>{const he=le.fold(()=>j.getContent({format:"text"}),Ie=>Ie.innerText||Ie.textContent||"");return Lo(he)},Jr=j=>Mr.grep(j,mo).length>0,ka=j=>er(j,mo).length>0,Dn=j=>{const le=j.schema.getTextInlineElements(),he=un=>un.nodeType===1&&!br(un)&&!qo(le,un.nodeName.toLowerCase());if(Jn(j).exists(un=>un.hasAttribute("data-mce-block")))return!1;const ot=j.selection.getRng();return ot.collapsed?!0:er(ot,he).length===0},vc=j=>Zo(j)&&j.nodeName==="FIGURE"&&/\bimage\b/i.test(j.className),lo=j=>jo(["title","rel","class","target"],(he,Ie)=>(j[Ie].each(ot=>{he[Ie]=ot.length>0?ot:null}),he),{href:j.href}),Zt=(j,le)=>(le==="http"||le==="https")&&!yn(j)?le+"://"+j:j,In=(j,le)=>{const he={...le};if(oo(j).length===0&&!We(j)){const Ie=Un(he.rel,he.target==="_blank");he.rel=Ie||null}return Ye.from(he.target).isNone()&&yo(j)===!1&&(he.target=Le(j)),he.href=Zt(he.href,je(j)),he},Zs=(j,le,he,Ie)=>{he.each(ot=>{qo(le,"innerText")?le.innerText=ot:le.textContent=ot}),j.dom.setAttribs(le,Ie),j.selection.select(le)},Qr=(j,le,he,Ie)=>{const ot=j.dom;vc(le)?hs(ot,le,Ie):he.fold(()=>{j.execCommand("mceInsertLink",!1,Ie)},un=>{j.insertContent(ot.createHTML("a",Ie,ot.encode(un)))})},mi=(j,le,he)=>{const Ie=j.selection.getNode(),ot=Jn(j,Ie),un=In(j,lo(he));j.undoManager.transact(()=>{he.href===le.href&&le.attach(),ot.fold(()=>{Qr(j,Ie,he.text,un)},fo=>{j.focus(),Zs(j,fo,he.text,un)})})},Jo=j=>{const le=j.dom,he=j.selection,Ie=he.getBookmark(),ot=he.getRng().cloneRange(),un=le.getParent(ot.startContainer,"a[href]",j.getBody()),fo=le.getParent(ot.endContainer,"a[href]",j.getBody());un&&ot.setStartBefore(un),fo&&ot.setEndAfter(fo),he.setRng(ot),j.execCommand("unlink"),he.moveToBookmark(Ie)},nl=j=>{j.undoManager.transact(()=>{const le=j.selection.getNode();vc(le)?Fa(j,le):Jo(j),j.focus()})},us=j=>{const{class:le,href:he,rel:Ie,target:ot,text:un,title:fo}=j;return Mt({class:le.getOrNull(),href:he,rel:Ie.getOrNull(),target:ot.getOrNull(),text:un.getOrNull(),title:fo.getOrNull()},(or,os)=>uo(or)===!1)},No=(j,le)=>{const he=j.options.get,Ie={allow_html_data_urls:he("allow_html_data_urls"),allow_script_urls:he("allow_script_urls"),allow_svg_data_urls:he("allow_svg_data_urls")},ot=le.href;return{...le,href:cs.isDomSafe(ot,"a",Ie)?ot:""}},hn=(j,le,he)=>{const Ie=No(j,he);j.hasPlugin("rtc",!0)?j.execCommand("createlink",!1,us(Ie)):mi(j,le,Ie)},fr=j=>{j.hasPlugin("rtc",!0)?j.execCommand("unlink"):nl(j)},Fa=(j,le)=>{var he;const Ie=j.dom.select("img",le)[0];if(Ie){const ot=j.dom.getParents(Ie,"a[href]",le)[0];ot&&((he=ot.parentNode)===null||he===void 0||he.insertBefore(Ie,ot),j.dom.remove(ot))}},hs=(j,le,he)=>{var Ie;const ot=j.select("img",le)[0];if(ot){const un=j.create("a",he);(Ie=ot.parentNode)===null||Ie===void 0||Ie.insertBefore(un,ot),un.appendChild(ot)}},Ha=j=>jn(j,"items"),da=(j,le)=>X(le,he=>Ha(he)?da(j,he.items):bt(he.value===j,he)),Hl=(j,le,he,Ie)=>{const ot=Ie[le],un=j.length>0;return ot!==void 0?da(ot,he).map(fo=>({url:{value:fo.value,meta:{text:un?j:fo.text,attach:co}},text:un?j:fo.text})):Ye.none()},js=(j,le)=>le==="link"?j.link:le==="anchor"?j.anchor:Ye.none(),ce={init:(j,le)=>{const he={text:j.text,title:j.title},Ie=os=>{var ir;return bt(he.title.length<=0,Ye.from((ir=os.meta)===null||ir===void 0?void 0:ir.title).getOr(""))},ot=os=>{var ir;return bt(he.text.length<=0,Ye.from((ir=os.meta)===null||ir===void 0?void 0:ir.text).getOr(os.value))},un=os=>{const ir=ot(os.url),sr=Ie(os.url);return ir.isSome()||sr.isSome()?Ye.some({...ir.map(gr=>({text:gr})).getOr({}),...sr.map(gr=>({title:gr})).getOr({})}):Ye.none()},fo=(os,ir)=>{const sr=js(le,ir).getOr([]);return Hl(he.text,ir,sr,os)};return{onChange:(os,ir)=>{const sr=ir.name;return sr==="url"?un(os()):Zn(["anchor","link"],sr)?fo(os(),sr):((sr==="text"||sr==="title")&&(he[sr]=os()[sr]),Ye.none())}}},getDelta:Hl};var Z=tinymce.util.Tools.resolve("tinymce.util.Delay");const De=(j,le,he)=>{const Ie=j.selection.getRng();Z.setEditorTimeout(j,()=>{j.windowManager.confirm(le,ot=>{j.selection.setRng(Ie),he(ot)})})},$e=j=>{const le=j.href;return le.indexOf("@")>0&&le.indexOf("/")===-1&&le.indexOf("mailto:")===-1?Ye.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ie=>({...Ie,href:"mailto:"+le})}):Ye.none()},jt=(j,le)=>he=>{const Ie=he.href;return j===1&&!yn(Ie)||j===0&&/^\s*www(\.|\d\.)/i.test(Ie)?Ye.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${le}:// prefix?`,preprocess:un=>({...un,href:le+"://"+Ie})}):Ye.none()},Ft={preprocess:(j,le)=>X([$e,jt(je(j),lr(j))],he=>he(le)).fold(()=>Promise.resolve(le),he=>new Promise(Ie=>{De(j,he.message,ot=>{Ie(ot?he.preprocess(le):le)})}))},Ro={getAnchors:j=>{const le=j.dom.select("a:not([href])"),he=ge(le,Ie=>{const ot=Ie.name||Ie.id;return ot?[{text:ot,value:"#"+ot}]:[]});return he.length>0?Ye.some([{text:"None",value:""}].concat(he)):Ye.none()}},Js={getClasses:j=>{const le=$s(j);return le.length>0?Xt.sanitize(le):Ye.none()}},Je=j=>{try{return Ye.some(JSON.parse(j))}catch{return Ye.none()}},ma={getLinks:j=>{const le=Ie=>j.convertURL(Ie.value||Ie.url||"","href"),he=qt(j);return new Promise(Ie=>{ao(he)?fetch(he).then(ot=>ot.ok?ot.text().then(Je):Promise.reject()).then(Ie,()=>Ie(Ye.none())):Bt(he)?he(ot=>Ie(Ye.some(ot))):Ie(Ye.from(he))}).then(Ie=>Ie.bind(Xt.sanitizeWith(le)).map(ot=>ot.length>0?[{text:"None",value:""}].concat(ot):ot))}},Va={getRels:(j,le)=>{const he=oo(j);if(he.length>0){const Ie=An(le,"_blank"),ot=We(j)===!1,un=or=>Un(Xt.getValue(or),Ie);return(ot?Xt.sanitizeWith(un):Xt.sanitize)(he)}return Ye.none()}},Cl=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ds={getTargets:j=>{const le=yo(j);return Gt(le)?Xt.sanitize(le).orThunk(()=>Ye.some(Cl)):le===!1?Ye.none():Ye.some(Cl)}},vr=(j,le,he)=>{const Ie=j.getAttrib(le,he);return Ie!==null&&Ie.length>0?Ye.some(Ie):Ye.none()},ms=(j,le)=>{const he=j.dom,ot=Dn(j)?Ye.some(is(j.selection,le)):Ye.none(),un=le.bind(sr=>Ye.from(he.getAttrib(sr,"href"))),fo=le.bind(sr=>Ye.from(he.getAttrib(sr,"target"))),or=le.bind(sr=>vr(he,sr,"rel")),os=le.bind(sr=>vr(he,sr,"class")),ir=le.bind(sr=>vr(he,sr,"title"));return{url:un,text:ot,title:ir,target:fo,rel:or,linkClass:os}},Wc={collect:(j,le)=>ma.getLinks(j).then(he=>{const Ie=ms(j,le);return{anchor:Ie,catalogs:{targets:ds.getTargets(j),rels:Va.getRels(j,Ie.target),classes:Js.getClasses(j),anchor:Ro.getAnchors(j),link:he},optNode:le,flags:{titleEnabled:rn(j)}}})},wl=(j,le)=>he=>{const Ie=he.getData();if(!Ie.url.value){fr(j),he.close();return}const ot=or=>Ye.from(Ie[or]).filter(os=>!An(le.anchor[or],os)),un={href:Ie.url.value,text:ot("text"),target:ot("target"),rel:ot("rel"),class:ot("linkClass"),title:ot("title")},fo={href:Ie.url.value,attach:Ie.url.meta!==void 0&&Ie.url.meta.attach?Ie.url.meta.attach:co};Ft.preprocess(j,un).then(or=>{hn(j,fo,or)}),he.close()},Bo=j=>{const le=Jn(j);return Wc.collect(j,le)},Bd=(j,le)=>{const he=j.anchor,Ie=he.url.getOr("");return{url:{value:Ie,meta:{original:{value:Ie}}},text:he.text.getOr(""),title:he.title.getOr(""),anchor:Ie,link:Ie,rel:he.rel.getOr(""),target:he.target.or(le).getOr(""),linkClass:he.linkClass.getOr("")}},fi=(j,le,he)=>{const Ie=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],ot=j.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),un=j.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],fo=Ye.from(Le(he)),or=Bd(j,fo),os=j.catalogs,ir=ce.init(or,os);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:At([Ie,ot,un,Kt([os.anchor.map(Xt.createUi("anchor","Anchors")),os.rels.map(Xt.createUi("rel","Rel")),os.targets.map(Xt.createUi("target","Open link in...")),os.link.map(Xt.createUi("link","Link list")),os.classes.map(Xt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:or,onChange:(gr,{name:Ua})=>{ir.onChange(gr.getData,{name:Ua}).each(Br=>{gr.setData(Br)})},onSubmit:le}},za=j=>{Bo(j).then(he=>{const Ie=wl(j,he);return fi(he,Ie,j)}).then(he=>{j.windowManager.open(he)})},Os=j=>{j.addCommand("mceLink",(le,he)=>{(he==null?void 0:he.dialog)===!0||!$(j)?za(j):j.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var fa=tinymce.util.Tools.resolve("tinymce.util.VK");const _r=(j,le)=>{document.body.appendChild(j),j.dispatchEvent(le),document.body.removeChild(j)},ol=j=>{const le=document.createElement("a");le.target="_blank",le.href=j,le.rel="noreferrer noopener";const he=document.createEvent("MouseEvents");he.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),_r(le,he)},nc=(j,le)=>j.dom.getParent(le,"a[href]"),Sl=j=>nc(j,j.selection.getStart()),Vl=j=>j.altKey===!0&&j.shiftKey===!1&&j.ctrlKey===!1&&j.metaKey===!1,xl=(j,le)=>{if(le){const he=Ko(le);if(/^#/.test(he)){const Ie=j.dom.select(he);Ie.length&&j.selection.scrollIntoView(Ie[0],!0)}else ol(le.href)}},$i=j=>()=>{j.execCommand("mceLink",!1,{dialog:!0})},ns=j=>()=>{xl(j,Sl(j))},Tl=j=>{j.on("click",le=>{const he=nc(j,le.target);he&&fa.metaKeyPressed(le)&&(le.preventDefault(),xl(j,he))}),j.on("keydown",le=>{if(!le.isDefaultPrevented()&&le.keyCode===13&&Vl(le)){const he=Sl(j);he&&(le.preventDefault(),xl(j,he))}})},ga=(j,le)=>(j.on("NodeChange",le),()=>j.off("NodeChange",le)),yc=j=>le=>{const he=()=>le.setActive(!j.mode.isReadOnly()&&Do(j,j.selection.getNode()));return he(),ga(j,he)},kl=j=>le=>{const he=()=>le.setEnabled(Do(j,j.selection.getNode()));return he(),ga(j,he)},sl=j=>le=>{const he=ot=>Jr(ot)||ka(j.selection.getRng()),Ie=j.dom.getParents(j.selection.getStart());return le.setEnabled(he(Ie)),ga(j,ot=>le.setEnabled(he(ot.parents)))},ea=j=>{j.addShortcut("Meta+K","",()=>{j.execCommand("mceLink")})},zl=j=>{j.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:$i(j),onSetup:yc(j)}),j.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ns(j),onSetup:kl(j)}),j.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>fr(j),onSetup:sl(j)})},rl=j=>{j.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ns(j),onSetup:kl(j)}),j.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:$i(j)}),j.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>fr(j),onSetup:sl(j)})},Ii=j=>{const le="link unlink openlink",he="link";j.ui.registry.addContextMenu("link",{update:Ie=>Jr(j.dom.getParents(Ie,"a"))?le:he})},ws=j=>{const le=ot=>{ot.selection.collapse(!1)},he=ot=>{const un=j.selection.getNode();return ot.setEnabled(Do(j,un)),co},Ie=ot=>{const un=Jn(j),fo=Dn(j);if(un.isNone()&&fo){const or=is(j.selection,un);return Ye.some(or.length>0?or:ot)}else return Ye.none()};j.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:yc(j)},label:"Link",predicate:ot=>Eo(j)&&Do(j,ot),initValue:()=>Jn(j).fold(Qe(""),Ko),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:ot=>{const un=j.selection.getNode();return ot.setActive(Do(j,un)),yc(j)(ot)},onAction:ot=>{const un=ot.getValue(),fo=Ie(un);hn(j,{href:un,attach:co},{href:un,text:fo,title:Ye.none(),rel:Ye.none(),target:Ye.none(),class:Ye.none()}),le(j),ot.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:he,onAction:ot=>{fr(j),ot.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:he,onAction:ot=>{ns(j)(),ot.hide()}}]})};var Ea=()=>{vt.add("link",j=>{O(j),zl(j),rl(j),Ii(j),ws(j),Tl(j),Os(j),ea(j)})};Ea()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager"),On=tinymce.util.Tools.resolve("tinymce.Env"),wn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Sn=Bt=>$n=>$n.options.get(Bt),En=Sn("content_style"),eo=Sn("content_css_cors"),ao=Sn("body_class"),xt=Sn("body_id"),Gt=Bt=>{var $n;let co="";const Qe=Bt.dom.encode,_n=($n=En(Bt))!==null&&$n!==void 0?$n:"";co+='<base href="'+Qe(Bt.documentBaseURI.getURI())+'">';const Ye=eo(Bt)?' crossorigin="anonymous"':"";wn.each(Bt.contentCSS,At=>{co+='<link type="text/css" rel="stylesheet" href="'+Qe(Bt.documentBaseURI.toAbsolute(At))+'"'+Ye+">"}),_n&&(co+='<style type="text/css">'+_n+"</style>");const oe=xt(Bt),Pt=ao(Bt),Zn='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(On.os.isMacOS()||On.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",te=Bt.getBody().dir,cn=te?' dir="'+Qe(te)+'"':"";return"<!DOCTYPE html><html><head>"+co+'</head><body id="'+Qe(oe)+'" class="mce-content-body '+Qe(Pt)+'"'+cn+">"+Bt.getContent()+Zn+"</body></html>"},uo=Bt=>{const $n=Gt(Bt);Bt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:$n}}).focus("close")},Wn=Bt=>{Bt.addCommand("mcePreview",()=>{uo(Bt)})},Xo=Bt=>{const $n=()=>Bt.execCommand("mcePreview");Bt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:$n}),Bt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:$n})};var Zo=()=>{vt.add("preview",Bt=>{Wn(Bt),Xo(Bt)})};Zo()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(Fe,be,kt)=>{var Mt;return kt(Fe,be.prototype)?!0:((Mt=Fe.constructor)===null||Mt===void 0?void 0:Mt.name)===be.name},wn=Fe=>{const be=typeof Fe;return Fe===null?"null":be==="object"&&Array.isArray(Fe)?"array":be==="object"&&On(Fe,String,(kt,Mt)=>Mt.isPrototypeOf(kt))?"string":be},Sn=Fe=>be=>wn(be)===Fe,En=Fe=>be=>typeof be===Fe,eo=Sn("string"),ao=Sn("object"),xt=Sn("array"),Gt=Fe=>Fe==null,uo=Fe=>!Gt(Fe),Wn=En("function"),Xo=(Fe,be)=>{if(xt(Fe)){for(let kt=0,Mt=Fe.length;kt<Mt;++kt)if(!be(Fe[kt]))return!1;return!0}return!1},Zo=Fe=>()=>Fe;function Bt(Fe,...be){return(...kt)=>{const Mt=be.concat(kt);return Fe.apply(null,Mt)}}const $n=Zo(!1),co=Fe=>Fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var Qe=tinymce.util.Tools.resolve("tinymce.util.Tools");const _n=Fe=>be=>be.options.get(Fe),Ye=Fe=>{const be=Fe.options.register;be("template_cdate_classes",{processor:"string",default:"cdate"}),be("template_mdate_classes",{processor:"string",default:"mdate"}),be("template_selected_content_classes",{processor:"string",default:"selcontent"}),be("template_preview_replace_values",{processor:"object"}),be("template_replace_values",{processor:"object"}),be("templates",{processor:kt=>eo(kt)||Xo(kt,ao)||Wn(kt),default:[]}),be("template_cdate_format",{processor:"string",default:Fe.translate("%Y-%m-%d")}),be("template_mdate_format",{processor:"string",default:Fe.translate("%Y-%m-%d")})},oe=_n("template_cdate_classes"),Pt=_n("template_mdate_classes"),Ps=_n("template_selected_content_classes"),Zn=_n("template_preview_replace_values"),te=_n("template_replace_values"),cn=_n("templates"),jo=_n("template_cdate_format"),At=_n("template_mdate_format"),ge=_n("content_style"),X=_n("content_css_cors"),An=_n("body_class"),Kt=(Fe,be)=>{if(Fe=""+Fe,Fe.length<be)for(let kt=0;kt<be-Fe.length;kt++)Fe="0"+Fe;return Fe},bt=(Fe,be,kt=new Date)=>{const Mt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),qo="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),jn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Is="January February March April May June July August September October November December".split(" ");return be=be.replace("%D","%m/%d/%Y"),be=be.replace("%r","%I:%M:%S %p"),be=be.replace("%Y",""+kt.getFullYear()),be=be.replace("%y",""+kt.getYear()),be=be.replace("%m",Kt(kt.getMonth()+1,2)),be=be.replace("%d",Kt(kt.getDate(),2)),be=be.replace("%H",""+Kt(kt.getHours(),2)),be=be.replace("%M",""+Kt(kt.getMinutes(),2)),be=be.replace("%S",""+Kt(kt.getSeconds(),2)),be=be.replace("%I",""+((kt.getHours()+11)%12+1)),be=be.replace("%p",kt.getHours()<12?"AM":"PM"),be=be.replace("%B",""+Fe.translate(Is[kt.getMonth()])),be=be.replace("%b",""+Fe.translate(jn[kt.getMonth()])),be=be.replace("%A",""+Fe.translate(qo[kt.getDay()])),be=be.replace("%a",""+Fe.translate(Mt[kt.getDay()])),be=be.replace("%%","%"),be};class gn{constructor(be,kt){this.tag=be,this.value=kt}static some(be){return new gn(!0,be)}static none(){return gn.singletonNone}fold(be,kt){return this.tag?kt(this.value):be()}isSome(){return this.tag}isNone(){return!this.tag}map(be){return this.tag?gn.some(be(this.value)):gn.none()}bind(be){return this.tag?be(this.value):gn.none()}exists(be){return this.tag&&be(this.value)}forall(be){return!this.tag||be(this.value)}filter(be){return!this.tag||be(this.value)?this:gn.none()}getOr(be){return this.tag?this.value:be}or(be){return this.tag?this:be}getOrThunk(be){return this.tag?this.value:be()}orThunk(be){return this.tag?this:be()}getOrDie(be){if(this.tag)return this.value;throw new Error(be??"Called getOrDie on None")}static from(be){return uo(be)?gn.some(be):gn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(be){this.tag&&be(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}gn.singletonNone=new gn(!1);const O=(Fe,be)=>{for(let kt=0,Mt=Fe.length;kt<Mt;kt++){const qo=Fe[kt];if(be(qo,kt))return!0}return!1},je=(Fe,be)=>{const kt=Fe.length,Mt=new Array(kt);for(let qo=0;qo<kt;qo++){const jn=Fe[qo];Mt[qo]=be(jn,qo)}return Mt},Eo=(Fe,be,kt)=>{for(let Mt=0,qo=Fe.length;Mt<qo;Mt++){const jn=Fe[Mt];if(be(jn,Mt))return gn.some(jn);if(kt(jn,Mt))break}return gn.none()},qt=(Fe,be)=>Eo(Fe,be,$n),Le=Object.hasOwnProperty,lr=(Fe,be)=>yo(Fe,be)?gn.from(Fe[be]):gn.none(),yo=(Fe,be)=>Le.call(Fe,be),oo={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},$s=Fe=>Fe.replace(/["'<>&]/g,be=>lr(oo,be).getOr(be)),rn=(Fe,be,kt)=>O(kt.split(/\s+/),Mt=>Fe.hasClass(be,Mt)),We=(Fe,be)=>()=>{const kt=cn(Fe);Wn(kt)?kt(be):eo(kt)?fetch(kt).then(Mt=>{Mt.ok&&Mt.json().then(be)}):be(kt)},$=(Fe,be)=>(Qe.each(be,(kt,Mt)=>{Wn(kt)&&(kt=kt(Mt)),Fe=Fe.replace(new RegExp("\\{\\$"+co(Mt)+"\\}","g"),kt)}),Fe),Mr=(Fe,be)=>{const kt=Fe.dom,Mt=te(Fe);Qe.each(kt.select("*",be),qo=>{Qe.each(Mt,(jn,Is)=>{kt.hasClass(qo,Is)&&Wn(jn)&&jn(qo)})})},nt=(Fe,be,kt)=>{const Mt=Fe.dom,qo=Fe.selection.getContent();kt=$(kt,te(Fe));let jn=Mt.create("div",{},kt);const Is=Mt.select(".mceTmpl",jn);Is&&Is.length>0&&(jn=Mt.create("div"),jn.appendChild(Is[0].cloneNode(!0))),Qe.each(Mt.select("*",jn),cs=>{rn(Mt,cs,oe(Fe))&&(cs.innerHTML=bt(Fe,jo(Fe))),rn(Mt,cs,Pt(Fe))&&(cs.innerHTML=bt(Fe,At(Fe))),rn(Mt,cs,Ps(Fe))&&(cs.innerHTML=qo)}),Mr(Fe,jn),Fe.execCommand("mceInsertContent",!1,jn.innerHTML),Fe.addVisual()};var ze=tinymce.util.Tools.resolve("tinymce.Env");const at=(Fe,be)=>{var kt;if(be.indexOf("<html>")===-1){let Mt="";const qo=(kt=ge(Fe))!==null&&kt!==void 0?kt:"",jn=X(Fe)?' crossorigin="anonymous"':"";Qe.each(Fe.contentCSS,Ko=>{Mt+='<link type="text/css" rel="stylesheet" href="'+Fe.documentBaseURI.toAbsolute(Ko)+'"'+jn+">"}),qo&&(Mt+='<style type="text/css">'+qo+"</style>");const Is=An(Fe),cs=Fe.dom.encode,mo='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(ze.os.isMacOS()||ze.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",er=Fe.getBody().dir,yn=er?' dir="'+cs(er)+'"':"";be='<!DOCTYPE html><html><head><base href="'+cs(Fe.documentBaseURI.getURI())+'">'+Mt+mo+'</head><body class="'+cs(Is)+'"'+yn+">"+be+"</body></html>"}return $(be,Zn(Fe))},Wt=(Fe,be)=>{const kt=()=>{if(!be||be.length===0){const yn=Fe.translate("No templates defined.");return Fe.notificationManager.open({text:yn,type:"info"}),gn.none()}return gn.from(Qe.map(be,(yn,Ko)=>{const Un=Lo=>Lo.url!==void 0;return{selected:Ko===0,text:yn.title,value:{url:Un(yn)?gn.from(yn.url):gn.none(),content:Un(yn)?gn.none():gn.from(yn.content),description:yn.description}}}))},Mt=yn=>je(yn,Ko=>({text:Ko.text,value:Ko.text})),qo=(yn,Ko)=>qt(yn,Un=>Un.text===Ko),jn=yn=>{Fe.windowManager.alert("Could not load the specified template.",()=>yn.focus("template"))},Is=yn=>yn.value.url.fold(()=>Promise.resolve(yn.value.content.getOr("")),Ko=>fetch(Ko).then(Un=>Un.ok?Un.text():Promise.reject())),cs=(yn,Ko)=>(Un,Lo)=>{if(Lo.name==="template"){const Jn=Un.getData().template;qo(yn,Jn).each(Do=>{Un.block("Loading..."),Is(Do).then(is=>{Ko(Un,Do,is)}).catch(()=>{Ko(Un,Do,""),Un.setEnabled("save",!1),jn(Un)})})}},br=yn=>Ko=>{const Un=Ko.getData();qo(yn,Un.template).each(Lo=>{Is(Lo).then(Jn=>{Fe.execCommand("mceInsertTemplate",!1,Jn),Ko.close()}).catch(()=>{Ko.setEnabled("save",!1),jn(Ko)})})},mo=yn=>{const Ko=Mt(yn),Un=(Do,is)=>({title:"Insert Template",size:"large",body:{type:"panel",items:Do},initialData:is,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:br(yn),onChange:cs(yn,Lo)}),Lo=(Do,is,Jr)=>{const ka=at(Fe,Jr),Dn=[{type:"selectbox",name:"template",label:"Templates",items:Ko},{type:"htmlpanel",html:`<p aria-live="polite">${$s(is.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],vc={template:is.text,preview:ka};Do.unblock(),Do.redial(Un(Dn,vc)),Do.focus("template")},Jn=Fe.windowManager.open(Un([],{template:"",preview:""}));Jn.block("Loading..."),Is(yn[0]).then(Do=>{Lo(Jn,yn[0],Do)}).catch(()=>{Lo(Jn,yn[0],""),Jn.setEnabled("save",!1),jn(Jn)})};kt().each(mo)},on=Fe=>be=>{Wt(Fe,be)},zt=Fe=>{Fe.addCommand("mceInsertTemplate",Bt(nt,Fe)),Fe.addCommand("mceTemplate",We(Fe,on(Fe)))},Xt=Fe=>{Fe.on("PreProcess",be=>{const kt=Fe.dom,Mt=At(Fe);Qe.each(kt.select("div",be.node),qo=>{kt.hasClass(qo,"mceTmpl")&&(Qe.each(kt.select("*",qo),jn=>{rn(kt,jn,Pt(Fe))&&(jn.innerHTML=bt(Fe,Mt))}),Mr(Fe,qo))})})},Be=Fe=>{const be=()=>Fe.execCommand("mceTemplate");Fe.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:be}),Fe.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:be})};var Go=()=>{vt.add("template",Fe=>{Ye(Fe),Be(Fe),zt(Fe),Xt(Fe)})};Go()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(w,T,L)=>{var H;return L(w,T.prototype)?!0:((H=w.constructor)===null||H===void 0?void 0:H.name)===T.name},wn=w=>{const T=typeof w;return w===null?"null":T==="object"&&Array.isArray(w)?"array":T==="object"&&On(w,String,(L,H)=>H.isPrototypeOf(L))?"string":T},Sn=w=>T=>wn(T)===w,En=w=>T=>typeof T===w,eo=w=>T=>w===T,ao=Sn("string"),xt=Sn("array"),Gt=En("boolean"),uo=eo(void 0),Wn=w=>w==null,Xo=w=>!Wn(w),Zo=En("function"),Bt=En("number"),$n=()=>{},co=(w,T)=>L=>w(T(L)),Qe=w=>()=>w,_n=w=>w,Ye=(w,T)=>w===T;function oe(w,...T){return(...L)=>{const H=T.concat(L);return w.apply(null,H)}}const Pt=w=>{w()},Ps=Qe(!1),Zn=Qe(!0);class te{constructor(T,L){this.tag=T,this.value=L}static some(T){return new te(!0,T)}static none(){return te.singletonNone}fold(T,L){return this.tag?L(this.value):T()}isSome(){return this.tag}isNone(){return!this.tag}map(T){return this.tag?te.some(T(this.value)):te.none()}bind(T){return this.tag?T(this.value):te.none()}exists(T){return this.tag&&T(this.value)}forall(T){return!this.tag||T(this.value)}filter(T){return!this.tag||T(this.value)?this:te.none()}getOr(T){return this.tag?this.value:T}or(T){return this.tag?this:T}getOrThunk(T){return this.tag?this.value:T()}orThunk(T){return this.tag?this:T()}getOrDie(T){if(this.tag)return this.value;throw new Error(T??"Called getOrDie on None")}static from(T){return Xo(T)?te.some(T):te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(T){this.tag&&T(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}te.singletonNone=new te(!1);const cn=Object.keys,jo=Object.hasOwnProperty,At=(w,T)=>{const L=cn(w);for(let H=0,ue=L.length;H<ue;H++){const Re=L[H],tt=w[Re];T(tt,Re)}},ge=w=>(T,L)=>{w[L]=T},X=(w,T,L,H)=>{At(w,(ue,Re)=>{(T(ue,Re)?L:H)(ue,Re)})},An=(w,T)=>{const L={};return X(w,T,ge(L),$n),L},Kt=(w,T)=>{const L=[];return At(w,(H,ue)=>{L.push(T(H,ue))}),L},bt=w=>Kt(w,_n),gn=w=>cn(w).length,O=(w,T)=>je(w,T)?te.from(w[T]):te.none(),je=(w,T)=>jo.call(w,T),Eo=(w,T)=>je(w,T)&&w[T]!==void 0&&w[T]!==null,qt=Array.prototype.indexOf,Le=Array.prototype.push,lr=(w,T)=>qt.call(w,T),yo=(w,T)=>lr(w,T)>-1,oo=(w,T)=>{for(let L=0,H=w.length;L<H;L++){const ue=w[L];if(T(ue,L))return!0}return!1},$s=(w,T)=>{const L=[];for(let H=0;H<w;H++)L.push(T(H));return L},rn=(w,T)=>{const L=w.length,H=new Array(L);for(let ue=0;ue<L;ue++){const Re=w[ue];H[ue]=T(Re,ue)}return H},We=(w,T)=>{for(let L=0,H=w.length;L<H;L++){const ue=w[L];T(ue,L)}},$=(w,T)=>{for(let L=w.length-1;L>=0;L--){const H=w[L];T(H,L)}},Mr=(w,T)=>{const L=[],H=[];for(let ue=0,Re=w.length;ue<Re;ue++){const tt=w[ue];(T(tt,ue)?L:H).push(tt)}return{pass:L,fail:H}},nt=(w,T)=>{const L=[];for(let H=0,ue=w.length;H<ue;H++){const Re=w[H];T(Re,H)&&L.push(Re)}return L},ze=(w,T,L)=>($(w,(H,ue)=>{L=T(L,H,ue)}),L),at=(w,T,L)=>(We(w,(H,ue)=>{L=T(L,H,ue)}),L),Wt=(w,T,L)=>{for(let H=0,ue=w.length;H<ue;H++){const Re=w[H];if(T(Re,H))return te.some(Re);if(L(Re,H))break}return te.none()},on=(w,T)=>Wt(w,T,Ps),zt=w=>{const T=[];for(let L=0,H=w.length;L<H;++L){if(!xt(w[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+w);Le.apply(T,w[L])}return T},Xt=(w,T)=>zt(rn(w,T)),Be=(w,T)=>{for(let L=0,H=w.length;L<H;++L){const ue=w[L];if(T(ue,L)!==!0)return!1}return!0},Go=(w,T)=>{const L={};for(let H=0,ue=w.length;H<ue;H++){const Re=w[H];L[String(Re)]=T(Re,H)}return L},Fe=(w,T)=>T>=0&&T<w.length?te.some(w[T]):te.none(),be=w=>Fe(w,0),kt=w=>Fe(w,w.length-1),Mt=(w,T)=>{for(let L=0;L<w.length;L++){const H=T(w[L],L);if(H.isSome())return H}return te.none()},qo=(w,T)=>{const H=(T||document).createElement("div");if(H.innerHTML=w,!H.hasChildNodes()||H.childNodes.length>1){const ue="HTML does not have a single root node";throw console.error(ue,w),new Error(ue)}return cs(H.childNodes[0])},jn=(w,T)=>{const H=(T||document).createElement(w);return cs(H)},Is=(w,T)=>{const H=(T||document).createTextNode(w);return cs(H)},cs=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},mo={fromHtml:qo,fromTag:jn,fromText:Is,fromDom:cs,fromPoint:(w,T,L)=>te.from(w.dom.elementFromPoint(T,L)).map(cs)};typeof window<"u"||Function("return this;")();const er=8,yn=9,Ko=11,Un=1,Lo=3,Jn=w=>w.dom.nodeName.toLowerCase(),Do=w=>w.dom.nodeType,is=w=>T=>Do(T)===w,Jr=w=>Do(w)===er||Jn(w)==="#comment",ka=is(Un),Dn=is(Lo),vc=is(yn),lo=is(Ko),Zt=w=>T=>ka(T)&&Jn(T)===w,In=(w,T)=>{const L=w.dom;if(L.nodeType!==Un)return!1;{const H=L;if(H.matches!==void 0)return H.matches(T);if(H.msMatchesSelector!==void 0)return H.msMatchesSelector(T);if(H.webkitMatchesSelector!==void 0)return H.webkitMatchesSelector(T);if(H.mozMatchesSelector!==void 0)return H.mozMatchesSelector(T);throw new Error("Browser lacks native selectors")}},Zs=w=>w.nodeType!==Un&&w.nodeType!==yn&&w.nodeType!==Ko||w.childElementCount===0,Qr=(w,T)=>{const L=T===void 0?document:T.dom;return Zs(L)?[]:rn(L.querySelectorAll(w),mo.fromDom)},mi=(w,T)=>{const L=T===void 0?document:T.dom;return Zs(L)?te.none():te.from(L.querySelector(w)).map(mo.fromDom)},Jo=(w,T)=>w.dom===T.dom,nl=In,us=w=>mo.fromDom(w.dom.ownerDocument),No=w=>vc(w)?w:us(w),hn=w=>te.from(w.dom.parentNode).map(mo.fromDom),fr=(w,T)=>{const L=Zo(T)?T:Ps;let H=w.dom;const ue=[];for(;H.parentNode!==null&&H.parentNode!==void 0;){const Re=H.parentNode,tt=mo.fromDom(Re);if(ue.push(tt),L(tt)===!0)break;H=Re}return ue},Fa=w=>te.from(w.dom.previousSibling).map(mo.fromDom),hs=w=>te.from(w.dom.nextSibling).map(mo.fromDom),Ha=w=>rn(w.dom.childNodes,mo.fromDom),da=(w,T)=>{const L=w.dom.childNodes;return te.from(L[T]).map(mo.fromDom)},Hl=w=>da(w,0),js=w=>lo(w)&&Xo(w.dom.host),ce=Zo(Element.prototype.attachShadow)&&Zo(Node.prototype.getRootNode)?w=>mo.fromDom(w.dom.getRootNode()):No,Z=w=>{const T=ce(w);return js(T)?te.some(T):te.none()},De=w=>mo.fromDom(w.dom.host),$e=w=>{const T=Dn(w)?w.dom.parentNode:w.dom;if(T==null||T.ownerDocument===null)return!1;const L=T.ownerDocument;return Z(mo.fromDom(T)).fold(()=>L.body.contains(T),co($e,De))},jt=(w,T)=>nt(Ha(w),T),Qt=(w,T)=>{let L=[];return We(Ha(w),H=>{T(H)&&(L=L.concat([H])),L=L.concat(Qt(H,T))}),L},Ft=(w,T)=>jt(w,L=>In(L,T)),Qo=(w,T)=>Qr(T,w);var Ro=(w,T,L,H,ue)=>w(L,H)?te.some(L):Zo(ue)&&ue(L)?te.none():T(L,H,ue);const Ln=(w,T,L)=>{let H=w.dom;const ue=Zo(L)?L:Ps;for(;H.parentNode;){H=H.parentNode;const Re=mo.fromDom(H);if(T(Re))return te.some(Re);if(ue(Re))break}return te.none()},Js=(w,T)=>{const L=ue=>T(mo.fromDom(ue));return on(w.dom.childNodes,L).map(mo.fromDom)},Je=(w,T,L)=>Ln(w,H=>In(H,T),L),tr=(w,T)=>Js(w,L=>In(L,T)),ma=(w,T)=>mi(T,w),tc=(w,T,L)=>Ro((ue,Re)=>In(ue,Re),Je,w,T,L),Va=(w,T,L)=>{if(ao(L)||Gt(L)||Bt(L))w.setAttribute(T,L+"");else throw console.error("Invalid call to Attribute.set. Key ",T,":: Value ",L,":: Element ",w),new Error("Attribute value was not simple")},Cl=(w,T,L)=>{Va(w.dom,T,L)},Nr=(w,T)=>{const L=w.dom;At(T,(H,ue)=>{Va(L,ue,H)})},ds=(w,T)=>{const L=w.dom.getAttribute(T);return L===null?void 0:L},vr=(w,T)=>te.from(ds(w,T)),ms=(w,T)=>{w.dom.removeAttribute(T)},nr=w=>at(w.dom.attributes,(T,L)=>(T[L.name]=L.value,T),{}),Wc=(w,T,L=Ye)=>w.exists(H=>L(H,T)),wl=w=>{const T=[],L=H=>{T.push(H)};for(let H=0;H<w.length;H++)w[H].each(L);return T},Bo=(w,T,L)=>w.isSome()&&T.isSome()?te.some(L(w.getOrDie(),T.getOrDie())):te.none(),Bd=w=>w.bind(_n),fi=(w,T)=>w?te.some(T):te.none(),za=(w,T)=>w.substring(T),Os=(w,T,L)=>T===""||w.length>=T.length&&w.substr(L,L+T.length)===T,fa=(w,T)=>_r(w,T)?za(w,T.length):w,_r=(w,T)=>Os(w,T,0),nc=(w=>T=>T.replace(w,""))(/^\s+|\s+$/g),Sl=w=>w.length>0,Vl=w=>!Sl(w),xl=(w,T=10)=>{const L=parseInt(w,T);return isNaN(L)?te.none():te.some(L)},$i=w=>{const T=parseFloat(w);return isNaN(T)?te.none():te.some(T)},ns=w=>w.style!==void 0&&Zo(w.style.getPropertyValue),Tl=(w,T,L)=>{if(!ao(L))throw console.error("Invalid call to CSS.set. Property ",T,":: Value ",L,":: Element ",w),new Error("CSS value must be a string: "+L);ns(w)&&w.style.setProperty(T,L)},ga=(w,T)=>{ns(w)&&w.style.removeProperty(T)},yc=(w,T,L)=>{const H=w.dom;Tl(H,T,L)},kl=(w,T)=>{const L=w.dom,ue=window.getComputedStyle(L).getPropertyValue(T);return ue===""&&!$e(w)?sl(L,T):ue},sl=(w,T)=>ns(w)?w.style.getPropertyValue(T):"",ea=(w,T)=>{const L=w.dom,H=sl(L,T);return te.from(H).filter(ue=>ue.length>0)},zl=(w,T)=>{const L=w.dom;ga(L,T),Wc(vr(w,"style").map(nc),"")&&ms(w,"style")},rl=(w,T,L=0)=>vr(w,T).map(H=>parseInt(H,10)).getOr(L),Ii=(w,T)=>ws(w,T,Zn),ws=(w,T,L)=>Xt(Ha(w),H=>In(H,T)?L(H)?[H]:[]:ws(H,T,L)),Ea=["tfoot","thead","tbody","colgroup"],j=w=>yo(Ea,w),le=(w,T)=>({rows:w,columns:T}),he=(w,T,L)=>({element:w,rowspan:T,colspan:L}),Ie=(w,T,L,H,ue,Re)=>({element:w,rowspan:T,colspan:L,row:H,column:ue,isLocked:Re}),ot=(w,T,L)=>({element:w,cells:T,section:L}),un=(w,T,L,H)=>({startRow:w,startCol:T,finishRow:L,finishCol:H}),fo=(w,T,L)=>({element:w,colspan:T,column:L}),or=(w,T)=>({element:w,columns:T}),os=(w,T,L=Ps)=>{if(L(T))return te.none();if(yo(w,Jn(T)))return te.some(T);const H=ue=>In(ue,"table")||L(ue);return Je(T,w.join(","),H)},ir=(w,T)=>os(["td","th"],w,T),sr=w=>Ii(w,"th,td"),gr=w=>In(w,"colgroup")?Ft(w,"col"):Xt(zr(w),T=>Ft(T,"col")),Ua=(w,T)=>tc(w,"table",T),Br=w=>Ii(w,"tr"),zr=w=>Ua(w).fold(Qe([]),T=>Ft(T,"colgroup")),al=(w,T)=>rn(w,L=>{if(Jn(L)==="colgroup"){const H=rn(gr(L),ue=>{const Re=rl(ue,"span",1);return he(ue,1,Re)});return ot(L,H,"colgroup")}else{const H=rn(sr(L),ue=>{const Re=rl(ue,"rowspan",1),tt=rl(ue,"colspan",1);return he(ue,Re,tt)});return ot(L,H,T(L))}}),cl=w=>hn(w).map(T=>{const L=Jn(T);return j(L)?L:"tbody"}).getOr("tbody"),Rn=w=>{const T=Br(w),H=[...zr(w),...T];return al(H,cl)},Ao="data-snooker-locked-cols",Ls=w=>vr(w,Ao).bind(T=>te.from(T.match(/\d+/g))).map(T=>Go(T,Zn)),B=(w,T)=>w+","+T,G=(w,T,L)=>te.from(w.access[B(T,L)]),ne=(w,T,L)=>{const H=we(w,ue=>L(T,ue.element));return H.length>0?te.some(H[0]):te.none()},we=(w,T)=>{const L=Xt(w.all,H=>H.cells);return nt(L,T)},Et=w=>{const T={};let L=0;return We(w.cells,H=>{const ue=H.colspan;$s(ue,Re=>{const tt=L+Re;T[tt]=fo(H.element,ue,tt)}),L+=ue}),T},Fn=w=>{const T={},L=[],ue=be(w).map(Pc=>Pc.element).bind(Ua).bind(Ls).getOr({});let Re=0,tt=0,Tt=0;const{pass:zn,fail:no}=Mr(w,Pc=>Pc.section==="colgroup");We(no,Pc=>{const Yl=[];We(Pc.cells,Eu=>{let id=0;for(;T[B(Tt,id)]!==void 0;)id++;const sh=Eo(ue,id.toString()),ud=Ie(Eu.element,Eu.rowspan,Eu.colspan,Tt,id,sh);for(let _u=0;_u<Eu.colspan;_u++)for(let Um=0;Um<Eu.rowspan;Um++){const Au=Tt+Um,qc=id+_u,rh=B(Au,qc);T[rh]=ud,tt=Math.max(tt,qc+1)}Yl.push(ud)}),Re++,L.push(ot(Pc.element,Yl,Pc.section)),Tt++});const{columns:ks,colgroups:ss}=kt(zn).map(Pc=>{const Yl=Et(Pc);return{colgroups:[or(Pc.element,bt(Yl))],columns:Yl}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:le(Re,tt),access:T,all:L,columns:ks,colgroups:ss}},Ss={fromTable:w=>{const T=Rn(w);return Fn(T)},generate:Fn,getAt:G,findItem:ne,filterItems:we,justCells:w=>Xt(w.all,T=>T.cells),justColumns:w=>bt(w.columns),hasColumns:w=>cn(w.columns).length>0,getColumnAt:(w,T)=>te.from(w.columns[T])};var Pr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Li=(w,T,L)=>{const H=w.select("td,th",T);let ue;for(let Re=0;Re<H.length;Re++){const tt=w.getStyle(H[Re],L);if(uo(ue)&&(ue=tt),ue!==tt)return""}return ue},Vn=(w,T,L)=>{Pr.each("left center right".split(" "),H=>{H!==L&&w.formatter.remove("align"+H,{},T)}),L&&w.formatter.apply("align"+L,{},T)},gi=(w,T,L)=>{Pr.each("top middle bottom".split(" "),H=>{H!==L&&w.formatter.remove("valign"+H,{},T)}),L&&w.formatter.apply("valign"+L,{},T)},_a=(w,T,L)=>{w.dispatch("TableModified",{...L,table:T})},Fi=(w,T)=>$i(w).getOr(T),rr=(w,T,L)=>Fi(kl(w,T),L),Hi=(w,T,L,H)=>{const ue=rr(w,`padding-${L}`,0),Re=rr(w,`padding-${H}`,0),tt=rr(w,`border-${L}-width`,0),Tt=rr(w,`border-${H}-width`,0);return T-ue-Re-tt-Tt},Fs=(w,T)=>{const L=w.dom,H=L.getBoundingClientRect().width||L.offsetWidth;return T==="border-box"?H:Hi(w,H,"left","right")},Ds=w=>Fs(w,"content-box");var fp=tinymce.util.Tools.resolve("tinymce.Env");const ps="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Cr=$s(5,w=>{const T=`${w+1}px`;return{title:T,value:T}}),El=rn(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),hu="100%",Vi=w=>{var T;const L=w.dom,H=(T=L.getParent(w.selection.getStart(),L.isBlock))!==null&&T!==void 0?T:w.getBody();return Ds(mo.fromDom(H))+"px"},ar=(w,T)=>Em(w)||!Cc(w)?T:Ui(w)?{...T,width:Vi(w)}:{...T,width:hu},wr=(w,T)=>Em(w)||Cc(w)?T:Ui(w)?{...T,width:Vi(w)}:{...T,width:hu},bs=w=>T=>T.options.get(w),hr=w=>{const T=w.options.register;T("table_border_widths",{processor:"object[]",default:Cr}),T("table_border_styles",{processor:"object[]",default:El}),T("table_cell_advtab",{processor:"boolean",default:!0}),T("table_row_advtab",{processor:"boolean",default:!0}),T("table_advtab",{processor:"boolean",default:!0}),T("table_appearance_options",{processor:"boolean",default:!0}),T("table_grid",{processor:"boolean",default:!fp.deviceType.isTouch()}),T("table_cell_class_list",{processor:"object[]",default:[]}),T("table_row_class_list",{processor:"object[]",default:[]}),T("table_class_list",{processor:"object[]",default:[]}),T("table_toolbar",{processor:"string",default:ps}),T("table_background_color_map",{processor:"object[]",default:[]}),T("table_border_color_map",{processor:"object[]",default:[]})},oc=bs("table_sizing_mode"),hi=bs("table_border_widths"),Sr=bs("table_border_styles"),zi=bs("table_cell_advtab"),pu=bs("table_row_advtab"),Wa=bs("table_advtab"),bu=bs("table_appearance_options"),Vg=bs("table_grid"),Cc=bs("table_style_by_css"),pi=bs("table_cell_class_list"),td=bs("table_row_class_list"),pa=bs("table_class_list"),Ul=bs("table_toolbar"),vu=bs("table_background_color_map"),Pd=bs("table_border_color_map"),Ui=w=>oc(w)==="fixed",Em=w=>oc(w)==="responsive",$d=w=>{const T=w.options,L=T.get("table_default_styles");return T.isSet("table_default_styles")?L:ar(w,L)},ll=w=>{const T=w.options,L=T.get("table_default_attributes");return T.isSet("table_default_attributes")?L:wr(w,L)},zg=w=>w.nodeName.toLowerCase(),_m=w=>mo.fromDom(w.getBody()),yu=w=>T=>Jo(T,_m(w)),Id=w=>w?w.replace(/px$/,""):"",il=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,re=w=>mo.fromDom(w.selection.getStart()),Wi=w=>mo.fromDom(w.selection.getEnd()),ul=(w,T)=>T.column>=w.startCol&&T.column+T.colspan-1<=w.finishCol&&T.row>=w.startRow&&T.row+T.rowspan-1<=w.finishRow,Am=(w,T)=>{let L=!0;const H=oe(ul,T);for(let ue=T.startRow;ue<=T.finishRow;ue++)for(let Re=T.startCol;Re<=T.finishCol;Re++)L=L&&Ss.getAt(w,ue,Re).exists(H);return L?te.some(T):te.none()},Om=(w,T)=>un(Math.min(w.row,T.row),Math.min(w.column,T.column),Math.max(w.row+w.rowspan-1,T.row+T.rowspan-1),Math.max(w.column+w.colspan-1,T.column+T.colspan-1)),Ug=(w,T,L)=>{const H=Ss.findItem(w,T,Jo),ue=Ss.findItem(w,L,Jo);return H.bind(Re=>ue.map(tt=>Om(Re,tt)))},zo=(w,T,L)=>Ug(w,T,L).bind(H=>Am(w,H)),Aa=(w,T,L)=>{const H=Rf(w);return zo(H,T,L)},Rf=Ss.fromTable,_l=(w,T)=>{hn(w).each(H=>{H.dom.insertBefore(T.dom,w.dom)})},Dm=(w,T)=>{hs(w).fold(()=>{hn(w).each(ue=>{sc(ue,T)})},H=>{_l(H,T)})},Cu=(w,T)=>{Hl(w).fold(()=>{sc(w,T)},H=>{w.dom.insertBefore(T.dom,H.dom)})},sc=(w,T)=>{w.dom.appendChild(T.dom)},Mf=(w,T)=>{_l(w,T),sc(T,w)},nd=(w,T)=>{We(T,(L,H)=>{const ue=H===0?w:T[H-1];Dm(ue,L)})},Wg=(w,T)=>{We(T,L=>{sc(w,L)})},wc=w=>{const T=w.dom;T.parentNode!==null&&T.parentNode.removeChild(T)},Ld=w=>{const T=Ha(w);T.length>0&&nd(w,T),wc(w)},od=((w,T)=>{const L=Re=>{if(!w(Re))throw new Error("Can only get "+T+" value of a "+T+" node");return H(Re).getOr("")},H=Re=>w(Re)?te.from(Re.dom.nodeValue):te.none();return{get:L,getOption:H,set:(Re,tt)=>{if(!w(Re))throw new Error("Can only set raw "+T+" value of a "+T+" node");Re.dom.nodeValue=tt}}})(Dn,"text"),Ur=w=>od.get(w),Fd=(w,T)=>od.set(w,T);var Nf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Mm=()=>{const w=no=>mo.fromDom(no.dom.cloneNode(!1)),T=no=>No(no).dom,L=no=>ka(no)?Jn(no)==="body"?!0:yo(Nf,Jn(no)):!1,H=no=>ka(no)?yo(["br","img","hr","input"],Jn(no)):!1,ue=no=>ka(no)&&ds(no,"contenteditable")==="false",Re=(no,ks)=>no.dom.compareDocumentPosition(ks.dom),tt=(no,ks)=>{const ss=nr(no);Nr(ks,ss)},Tt=no=>{const ks=Jn(no);return yo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ks)},zn=no=>ka(no)?vr(no,"lang"):te.none();return{up:Qe({selector:Je,closest:tc,predicate:Ln,all:fr}),down:Qe({selector:Qo,predicate:Qt}),styles:Qe({get:kl,getRaw:ea,set:yc,remove:zl}),attrs:Qe({get:ds,set:Cl,remove:ms,copyTo:tt}),insert:Qe({before:_l,after:Dm,afterAll:nd,append:sc,appendAll:Wg,prepend:Cu,wrap:Mf}),remove:Qe({unwrap:Ld,remove:wc}),create:Qe({nu:mo.fromTag,clone:w,text:mo.fromText}),query:Qe({comparePosition:Re,prevSibling:Fa,nextSibling:hs}),property:Qe({children:Ha,name:Jn,parent:hn,document:T,isText:Dn,isComment:Jr,isElement:ka,isSpecial:Tt,getLanguage:zn,getText:Ur,setText:Fd,isBoundary:L,isEmptyTag:H,isNonEditable:ue}),eq:Jo,is:nl}};const wu=(w,T,L,H)=>{const ue=L[0],Re=L.slice(1);return H(w,T,ue,Re)},Zg=(w,T,L)=>L.length>0?wu(w,T,L,Nm):te.none(),Nm=(w,T,L,H)=>{const ue=T(w,L);return ze(H,(Re,tt)=>{const Tt=T(w,tt);return rc(w,Re,Tt)},ue)},rc=(w,T,L)=>T.bind(H=>L.filter(oe(w.eq,H))),jg=Zg,Wl=Mm(),sd=(w,T)=>jg(Wl,(L,H)=>w(H),T),Zi=w=>Je(w,"table"),Al=(w,T)=>{const L=Qo(w,T);return L.length>0?te.some(L):te.none()},Gg=(w,T,L)=>ma(w,T).bind(H=>ma(w,L).bind(ue=>sd(Zi,[H,ue]).map(Re=>({first:H,last:ue,table:Re})))),qg=(w,T)=>Al(w,T),Bf=(w,T,L)=>Gg(w,T,L).bind(H=>{const ue=zn=>Jo(w,zn),Re="thead,tfoot,tbody,table",tt=Je(H.first,Re,ue),Tt=Je(H.last,Re,ue);return tt.bind(zn=>Tt.bind(no=>Jo(zn,no)?Aa(H.table,H.first,H.last):te.none()))}),Zl=w=>rn(w,mo.fromDom),E="data-mce-selected",N="td["+E+"],th["+E+"]",U="data-mce-first-selected",ie="td["+U+"],th["+U+"]",pe="data-mce-last-selected",ft="td["+pe+"],th["+pe+"]",pn={selected:E,selectedSelector:N,firstSelected:U,firstSelectedSelector:ie,lastSelected:pe,lastSelectedSelector:ft},go=w=>Ua(w).bind(T=>qg(T,pn.firstSelectedSelector)).fold(Qe(w),T=>T[0]),to=w=>(T,L)=>{const H=Jn(T),ue=H==="col"||H==="colgroup"?go(T):T;return tc(ue,w,L)},Yt=to("th,td,caption"),ho=to("th,td"),qs=w=>Zl(w.model.table.getSelectedCells()),Oa=(w,T)=>{const L=ho(w),H=L.bind(ue=>Ua(ue)).map(ue=>Br(ue));return Bo(L,H,(ue,Re)=>nt(Re,tt=>oo(Zl(tt.dom.cells),Tt=>ds(Tt,T)==="1"||Jo(Tt,ue)))).getOr([])},Ar=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Bm=w=>({value:w}),w0=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Pn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ur=w=>w0.test(w)||Pn.test(w),Uo=w=>fa(w,"#").toUpperCase(),Za=w=>ur(w)?te.some({value:Uo(w)}):te.none(),ba=w=>{const T=w.toString(16);return(T.length===1?"0"+T:T).toUpperCase()},Pf=w=>{const T=ba(w.red)+ba(w.green)+ba(w.blue);return Bm(T)},$f=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Kg=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ji=(w,T,L,H)=>({red:w,green:T,blue:L,alpha:H}),If=(w,T,L,H)=>{const ue=parseInt(w,10),Re=parseInt(T,10),tt=parseInt(L,10),Tt=parseFloat(H);return ji(ue,Re,tt,Tt)},S0=w=>{if(w==="transparent")return te.some(ji(0,0,0,0));const T=$f.exec(w);if(T!==null)return te.some(If(T[1],T[2],T[3],"1"));const L=Kg.exec(w);return L!==null?te.some(If(L[1],L[2],L[3],L[4])):te.none()},w2=w=>Za(w).orThunk(()=>S0(w).map(Pf)).getOrThunk(()=>{const T=document.createElement("canvas");T.height=1,T.width=1;const L=T.getContext("2d");L.clearRect(0,0,T.width,T.height),L.fillStyle="#FFFFFF",L.fillStyle=w,L.fillRect(0,0,1,1);const H=L.getImageData(0,0,1,1).data,ue=H[0],Re=H[1],tt=H[2],Tt=H[3];return Pf(ji(ue,Re,tt,Tt))}),xr=w=>S0(w).map(Pf).map(T=>"#"+T.value).getOr(w),Yg=w=>{let T=w;return{get:()=>T,set:ue=>{T=ue}}},nb=w=>{const T=Yg(te.none()),L=()=>T.get().each(w);return{clear:()=>{L(),T.set(te.none())},isSet:()=>T.get().isSome(),get:()=>T.get(),set:Tt=>{L(),T.set(te.some(Tt))}}},gp=()=>nb(w=>w.unbind()),Lf=(w,T,L)=>H=>{const ue=gp(),Re=Vl(L),tt=()=>{const Tt=qs(w),zn=no=>w.formatter.match(T,{value:L},no.dom,Re);Re?(H.setActive(!oo(Tt,zn)),ue.set(w.formatter.formatChanged(T,no=>H.setActive(!no),!0))):(H.setActive(Be(Tt,zn)),ue.set(w.formatter.formatChanged(T,H.setActive,!1,{value:L})))};return w.initialized?tt():w.on("init",tt),ue.clear},ob=w=>Eo(w,"menu"),rd=w=>rn(w,T=>{const L=T.text||T.title||"";return ob(T)?{text:L,items:rd(T.menu)}:{text:L,value:T.value}}),Rs=(w,T,L,H)=>rn(T,ue=>{const Re=ue.text||ue.title;return ob(ue)?{type:"nestedmenuitem",text:Re,getSubmenuItems:()=>Rs(w,ue.menu,L,H)}:{text:Re,type:"togglemenuitem",onAction:()=>H(ue.value),onSetup:Lf(w,L,ue.value)}}),Gn=(w,T)=>L=>{w.execCommand("mceTableApplyCellStyle",!1,{[T]:L})},ja=w=>Xt(w,T=>ob(T)?[{...T,menu:ja(T.menu)}]:Sl(T.value)?[T]:[]),Gi=(w,T,L,H)=>ue=>ue(Rs(w,T,L,H)),Su=(w,T,L)=>{const H=rn(T,ue=>({text:ue.title,value:"#"+w2(ue.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:H.length>0?H:void 0,allowCustomColors:!1},onAction:ue=>{const Re=ue.value==="remove"?"":ue.value;w.execCommand("mceTableApplyCellStyle",!1,{[L]:Re})}}]},Xg=w=>()=>{const L=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:L})},Pm=w=>()=>{const L=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:L})},sb=w=>{const T=rd(pi(w));return T.length>0?te.some({name:"class",type:"listbox",label:"Class",items:T}):te.none()},rb=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Ar}],$m=w=>rb.concat(sb(w).toArray()),Jg=(w,T)=>{const H=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(rd(Sr(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:T==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(H):H}},bi={normal:(w,T)=>{const L=w.dom;return{setAttrib:(tt,Tt)=>{L.setAttrib(T,tt,Tt)},setStyle:(tt,Tt)=>{L.setStyle(T,tt,Tt)},setFormat:(tt,Tt)=>{Tt===""?w.formatter.remove(tt,{value:null},T,!0):w.formatter.apply(tt,{value:Tt},T)}}}},vi=Zt("th"),x0=(w,T)=>w&&T?"sectionCells":w?"section":"cells",ad=w=>{const T=w.section==="thead",L=Wc(xu(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:T||L?{type:"header",subType:x0(T,L)}:{type:"body"}},xu=w=>{const T=nt(w,L=>vi(L.element));return T.length===0?te.some("td"):T.length===w.length?te.some("th"):te.none()},Ff=w=>{const T=rn(w,ue=>ad(ue).type),L=yo(T,"header"),H=yo(T,"footer");if(!L&&!H)return te.some("body");{const ue=yo(T,"body");return L&&!ue&&!H?te.some("header"):!L&&!ue&&H?te.some("footer"):te.none()}},cd=w=>{let T=!1,L;return(...H)=>(T||(T=!0,L=w.apply(null,H)),L)},Qg=(w,T)=>Mt(w.all,L=>on(L.cells,H=>Jo(T,H.element))),Wr=(w,T,L)=>{const H=rn(T.selection,Re=>ir(Re).bind(tt=>Qg(w,tt)).filter(L)),ue=wl(H);return fi(ue.length>0,ue)},Ol=(w,T)=>T.mergable,Lm=(w,T)=>T.unmergable,_t=(w,T)=>Wr(w,T,Zn),Fm=(w,T)=>Qg(w,T).exists(L=>!L.isLocked),jl=(w,T)=>Be(T,L=>Fm(w,L)),eh=(w,T)=>Ol(w,T).filter(L=>jl(w,L.cells)),th=(w,T)=>Lm(w,T).filter(L=>jl(w,L));({...{generate:w=>{if(!xt(w))throw new Error("cases must be an array");if(w.length===0)throw new Error("there must be at least one case");const T=[],L={};return We(w,(H,ue)=>{const Re=cn(H);if(Re.length!==1)throw new Error("one and only one name per case");const tt=Re[0],Tt=H[tt];if(L[tt]!==void 0)throw new Error("duplicate key detected:"+tt);if(tt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!xt(Tt))throw new Error("case arguments must be an array");T.push(tt),L[tt]=(...zn)=>{const no=zn.length;if(no!==Tt.length)throw new Error("Wrong number of arguments to case "+tt+". Expected "+Tt.length+" ("+Tt+"), got "+no);return{fold:(...ss)=>{if(ss.length!==w.length)throw new Error("Wrong number of arguments to fold. Expected "+w.length+", got "+ss.length);return ss[ue].apply(null,zn)},match:ss=>{const vs=cn(ss);if(T.length!==vs.length)throw new Error("Wrong number of arguments to match. Expected: "+T.join(",")+`
Actual: `+vs.join(","));if(!Be(T,Yl=>yo(vs,Yl)))throw new Error("Not all branches were specified when using match. Specified: "+vs.join(", ")+`
Required: `+T.join(", "));return ss[tt].apply(null,zn)},log:ss=>{console.log(ss,{constructors:T,constructor:tt,params:zn})}}}}),L}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const nn=(w,T)=>{const L=Ss.fromTable(w);return _t(L,T).bind(ue=>{const Re=ue[ue.length-1],tt=ue[0].row,Tt=Re.row+Re.rowspan,zn=L.all.slice(tt,Tt);return Ff(zn)}).getOr("")},Mc=w=>_r(w,"rgb")?xr(w):w,et=w=>{const T=mo.fromDom(w);return{borderwidth:ea(T,"border-width").getOr(""),borderstyle:ea(T,"border-style").getOr(""),bordercolor:ea(T,"border-color").map(Mc).getOr(""),backgroundcolor:ea(T,"background-color").map(Mc).getOr("")}},ab=w=>{const T=w[0],L=w.slice(1);return We(L,H=>{We(cn(T),ue=>{At(H,(Re,tt)=>{const Tt=T[ue];Tt!==""&&ue===tt&&Tt!==Re&&(T[ue]="")})})}),T},cb=(w,T,L,H)=>on(w,ue=>!uo(L.formatter.matchNode(H,T+ue))).getOr(""),Gl=oe(cb,["left","center","right"],"align"),Nc=oe(cb,["top","middle","bottom"],"valign"),Hm=(w,T)=>{const L=$d(w),H=ll(w),ue=()=>({borderstyle:O(L,"border-style").getOr(""),bordercolor:Mc(O(L,"border-color").getOr("")),backgroundcolor:Mc(O(L,"background-color").getOr(""))}),Re={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},tt=()=>{const ks=L["border-width"];return Cc(w)&&ks?{border:ks}:O(H,"border").fold(()=>({}),ss=>({border:ss}))},Tt=T?ue():{},zn=()=>{const ks=O(L,"border-spacing").or(O(H,"cellspacing")).fold(()=>({}),vs=>({cellspacing:vs})),ss=O(L,"border-padding").or(O(H,"cellpadding")).fold(()=>({}),vs=>({cellpadding:vs}));return{...ks,...ss}};return{...Re,...L,...H,...Tt,...tt(),...zn()}},pr=w=>Ua(mo.fromDom(w)).map(T=>{const L={selection:Zl(w.cells)};return nn(T,L)}).getOr(""),ta=(w,T,L)=>{const H=(Tt,zn)=>{const no=ea(mo.fromDom(zn),"border-width");return Cc(w)&&no.isSome()?no.getOr(""):Tt.getAttrib(zn,"border")||Li(w.dom,zn,"border-width")||Li(w.dom,zn,"border")||""},ue=w.dom,Re=Cc(w)?ue.getStyle(T,"border-spacing")||ue.getAttrib(T,"cellspacing"):ue.getAttrib(T,"cellspacing")||ue.getStyle(T,"border-spacing"),tt=Cc(w)?Li(ue,T,"padding")||ue.getAttrib(T,"cellpadding"):ue.getAttrib(T,"cellpadding")||Li(ue,T,"padding");return{width:ue.getStyle(T,"width")||ue.getAttrib(T,"width"),height:ue.getStyle(T,"height")||ue.getAttrib(T,"height"),cellspacing:Re??"",cellpadding:tt??"",border:H(ue,T),caption:!!ue.select("caption",T)[0],class:ue.getAttrib(T,"class",""),align:Gl(w,T),...L?et(T):{}}},Bc=(w,T,L)=>{const H=w.dom;return{height:H.getStyle(T,"height")||H.getAttrib(T,"height"),class:H.getAttrib(T,"class",""),type:pr(T),align:Gl(w,T),...L?et(T):{}}},Ts=(w,T,L,H)=>{const ue=w.dom,Re=H.getOr(T),tt=(Tt,zn)=>ue.getStyle(Tt,zn)||ue.getAttrib(Tt,zn);return{width:tt(Re,"width"),height:tt(T,"height"),scope:ue.getAttrib(T,"scope"),celltype:zg(T),class:ue.getAttrib(T,"class",""),halign:Gl(w,T),valign:Nc(w,T),...L?et(T):{}}},ku=(w,T)=>{const L=Ss.fromTable(w),H=Ss.justCells(L),ue=nt(H,Re=>oo(T,tt=>Jo(Re.element,tt)));return rn(ue,Re=>({element:Re.element.dom,column:Ss.getColumnAt(L,Re.column).map(tt=>tt.element.dom)}))},lb=(w,T,L,H)=>{H("scope")&&w.setAttrib("scope",L.scope),H("class")&&w.setAttrib("class",L.class),H("height")&&w.setStyle("height",il(L.height)),H("width")&&T.setStyle("width",il(L.width))},qi=(w,T,L)=>{L("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",T.backgroundcolor),L("bordercolor")&&w.setFormat("tablecellbordercolor",T.bordercolor),L("borderstyle")&&w.setFormat("tablecellborderstyle",T.borderstyle),L("borderwidth")&&w.setFormat("tablecellborderwidth",il(T.borderwidth))},nh=(w,T,L,H)=>{const ue=T.length===1;We(T,Re=>{const tt=Re.element,Tt=ue?Zn:H,zn=bi.normal(w,tt),no=Re.column.map(ks=>bi.normal(w,ks)).getOr(zn);lb(zn,no,L,Tt),zi(w)&&qi(zn,L,Tt),H("halign")&&Vn(w,tt,L.halign),H("valign")&&gi(w,tt,L.valign)})},Vm=(w,T)=>{w.execCommand("mceTableCellType",!1,{type:T.celltype,no_events:!0})},$r=(w,T,L,H)=>{const ue=An(H,(Re,tt)=>L[tt]!==Re);gn(ue)>0&&T.length>=1&&Ua(T[0]).each(Re=>{const tt=ku(Re,T),Tt=gn(An(ue,(no,ks)=>ks!=="scope"&&ks!=="celltype"))>0,zn=je(ue,"celltype");(Tt||je(ue,"scope"))&&nh(w,tt,H,oe(je,ue)),zn&&Vm(w,H),_a(w,Re.dom,{structure:zn,style:Tt})})},oh=(w,T,L,H)=>{const ue=H.getData();H.close(),w.undoManager.transact(()=>{$r(w,T,L,ue),w.focus()})},zm=(w,T)=>{const L=Ua(T[0]).map(H=>rn(ku(H,T),ue=>Ts(w,ue.element,zi(w),ue.column)));return ab(L.getOrDie())},Fo=w=>{const T=qs(w);if(T.length===0)return;const L=zm(w,T),H={type:"tabpanel",tabs:[{title:"General",name:"general",items:$m(w)},Jg(w,"cell")]},ue={type:"panel",items:[{type:"grid",columns:2,items:$m(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:zi(w)?H:ue,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:L,onSubmit:oe(oh,w,T,L)})},Ki=w=>{const T=rd(td(w));return T.length>0?te.some({name:"class",type:"listbox",label:"Class",items:T}):te.none()},ac=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Yi=w=>ac.concat(Ki(w).toArray()),Zc=(w,T,L)=>{L("class")&&w.setAttrib("class",T.class),L("height")&&w.setStyle("height",il(T.height))},ib=(w,T,L)=>{L("backgroundcolor")&&w.setStyle("background-color",T.backgroundcolor),L("bordercolor")&&w.setStyle("border-color",T.bordercolor),L("borderstyle")&&w.setStyle("border-style",T.borderstyle)},Ra=(w,T,L,H)=>{const Re=T.length===1?Zn:H;We(T,tt=>{const Tt=bi.normal(w,tt);Zc(Tt,L,Re),pu(w)&&ib(Tt,L,Re),H("align")&&Vn(w,tt,L.align)})},cc=(w,T)=>{w.execCommand("mceTableRowType",!1,{type:T.type,no_events:!0})},hp=(w,T,L,H)=>{const ue=An(H,(Re,tt)=>L[tt]!==Re);if(gn(ue)>0){const Re=je(ue,"type"),tt=Re?gn(ue)>1:!0;tt&&Ra(w,T,H,oe(je,ue)),Re&&cc(w,H),Ua(mo.fromDom(T[0])).each(Tt=>_a(w,Tt.dom,{structure:Re,style:tt}))}},Ze=(w,T,L,H)=>{const ue=H.getData();H.close(),w.undoManager.transact(()=>{hp(w,T,L,ue),w.focus()})},dl=w=>{const T=Oa(re(w),pn.selected);if(T.length===0)return;const L=rn(T,tt=>Bc(w,tt.dom,pu(w))),H=ab(L),ue={type:"tabpanel",tabs:[{title:"General",name:"general",items:Yi(w)},Jg(w,"row")]},Re={type:"panel",items:[{type:"grid",columns:2,items:Yi(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:pu(w)?ue:Re,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:H,onSubmit:oe(Ze,w,rn(T,tt=>tt.dom),H)})},T0=(w,T,L)=>{const H=L?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ue=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Re=bu(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],tt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Tt=T.length>0?[{type:"listbox",name:"class",label:"Class",items:T}]:[];return H.concat(ue).concat(Re).concat(tt).concat(Tt)},Ir=(w,T,L,H)=>{if(T.tagName==="TD"||T.tagName==="TH")ao(L)&&Xo(H)?w.setStyle(T,L,H):w.setStyles(T,L);else if(T.children)for(let ue=0;ue<T.children.length;ue++)Ir(w,T.children[ue],L,H)},Hf=(w,T,L)=>{const H=w.dom,ue={},Re={};if(uo(L.class)||(ue.class=L.class),Re.height=il(L.height),Cc(w)?Re.width=il(L.width):H.getAttrib(T,"width")&&(ue.width=Id(L.width)),Cc(w)?(Re["border-width"]=il(L.border),Re["border-spacing"]=il(L.cellspacing)):(ue.border=L.border,ue.cellpadding=L.cellpadding,ue.cellspacing=L.cellspacing),Cc(w)&&T.children)for(let tt=0;tt<T.children.length;tt++)Ir(H,T.children[tt],{"border-width":il(L.border),padding:il(L.cellpadding)}),Wa(w)&&Ir(H,T.children[tt],{"border-color":L.bordercolor});if(Wa(w)){const tt=L;Re["background-color"]=tt.backgroundcolor,Re["border-color"]=tt.bordercolor,Re["border-style"]=tt.borderstyle}ue.style=H.serializeStyle({...$d(w),...Re}),H.setAttribs(T,{...ll(w),...ue})},ld=(w,T,L,H)=>{const ue=w.dom,Re=H.getData(),tt=An(Re,(Tt,zn)=>L[zn]!==Tt);H.close(),Re.class===""&&delete Re.class,w.undoManager.transact(()=>{if(!T){const Tt=xl(Re.cols).getOr(1),zn=xl(Re.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:zn,columns:Tt}),T=ho(re(w),yu(w)).bind(no=>Ua(no,yu(w))).map(no=>no.dom).getOrDie()}if(gn(tt)>0){Hf(w,T,Re);const Tt=ue.select("caption",T)[0];(Tt&&!Re.caption||!Tt&&Re.caption)&&w.execCommand("mceTableToggleCaption"),Vn(w,T,Re.align)}if(w.focus(),w.addVisual(),gn(tt)>0){const Tt=je(tt,"caption"),zn=Tt?gn(tt)>1:!0;_a(w,T,{structure:Tt,style:zn})}})},Zr=(w,T)=>{const L=w.dom;let H,ue=Hm(w,Wa(w));T?(ue.cols="1",ue.rows="1",Wa(w)&&(ue.borderstyle="",ue.bordercolor="",ue.backgroundcolor="")):(H=L.getParent(w.selection.getStart(),"table",w.getBody()),H?ue=ta(w,H,Wa(w)):Wa(w)&&(ue.borderstyle="",ue.bordercolor="",ue.backgroundcolor=""));const Re=rd(pa(w));Re.length>0&&ue.class&&(ue.class=ue.class.replace(/\s*mce\-item\-table\s*/g,""));const tt={type:"grid",columns:2,items:T0(w,Re,T)},Tt=()=>({type:"panel",items:[tt]}),zn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[tt]},Jg(w,"table")]}),no=Wa(w)?zn():Tt();w.windowManager.open({title:"Table Properties",size:"normal",body:no,onSubmit:oe(ld,w,H,ue),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ue})},k0=w=>{At({mceTableProps:oe(Zr,w,!1),mceTableRowProps:oe(dl,w),mceTableCellProps:oe(Fo,w)},(T,L)=>w.addCommand(L,()=>T())),w.addCommand("mceInsertTableDialog",T=>{Zr(w,!0)})},ql=(w,T)=>tr(w,T).isSome(),Xi=_n,jc=w=>{const T=(H,ue)=>vr(H,ue).exists(Re=>parseInt(Re,10)>1),L=H=>T(H,"rowspan")||T(H,"colspan");return w.length>0&&Be(w,L)?te.some(w):te.none()},Ho=(w,T,L)=>T.length<=1?te.none():Bf(w,L.firstSelectedSelector,L.lastSelectedSelector).map(H=>({bounds:H,cells:T})),Dl=w=>({element:w,mergable:te.none(),unmergable:te.none(),selection:[w]}),Hd=(w,T,L)=>({element:L,mergable:Ho(T,w,pn),unmergable:jc(w),selection:Xi(w)}),Ma=w=>{const T=Yg(te.none()),L=Yg([]);let H=te.none();const ue=Zt("caption"),Re=xn=>H.forall(ys=>!ys[xn]),tt=()=>Yt(re(w),yu(w)),Tt=()=>Yt(Wi(w),yu(w)),zn=()=>tt().bind(xn=>Bd(Bo(Ua(xn),Tt().bind(Ua),(ys,va)=>Jo(ys,va)?ue(xn)?te.some(Dl(xn)):te.some(Hd(qs(w),ys,xn)):te.none()))),no=xn=>Ua(xn.element).map(va=>{const Sc=Ss.fromTable(va),yi=_t(Sc,xn).getOr([]),xc=at(yi,(ml,Ou)=>(Ou.isLocked&&(ml.onAny=!0,Ou.column===0?ml.onFirst=!0:Ou.column+Ou.colspan>=Sc.grid.columns&&(ml.onLast=!0)),ml),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:eh(Sc,xn).isSome(),unmergeable:th(Sc,xn).isSome(),locked:xc}}),ks=()=>{T.set(cd(zn)()),H=T.get().bind(no),We(L.get(),Pt)},ss=xn=>(xn(),L.set(L.get().concat([xn])),()=>{L.set(nt(L.get(),ys=>ys!==xn))}),vs=(xn,ys)=>ss(()=>T.get().fold(()=>{xn.setEnabled(!1)},va=>{xn.setEnabled(!ys(va))})),Pc=(xn,ys,va)=>ss(()=>T.get().fold(()=>{xn.setEnabled(!1),xn.setActive(!1)},Sc=>{xn.setEnabled(!ys(Sc)),xn.setActive(va(Sc))})),Yl=xn=>H.exists(ys=>ys.locked[xn]),Eu=xn=>vs(xn,ys=>!1),id=xn=>vs(xn,ys=>ue(ys.element)),sh=xn=>ys=>vs(ys,va=>ue(va.element)||Yl(xn)),ud=xn=>ys=>vs(ys,va=>ue(va.element)||xn().isNone()),_u=(xn,ys)=>va=>vs(va,Sc=>ue(Sc.element)||xn().isNone()||Yl(ys)),Um=xn=>vs(xn,ys=>Re("mergeable")),Au=xn=>vs(xn,ys=>Re("unmergeable")),qc=xn=>Pc(xn,Ps,ys=>Ua(ys.element,yu(w)).exists(Sc=>ql(Sc,"caption"))),rh=(xn,ys)=>va=>Pc(va,Sc=>ue(Sc.element),()=>w.queryCommandValue(xn)===ys),bp=rh("mceTableRowType","header"),E0=rh("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",ks),{onSetupTable:Eu,onSetupCellOrRow:id,onSetupColumn:sh,onSetupPasteable:ud,onSetupPasteableColumn:_u,onSetupMergeable:Um,onSetupUnmergeable:Au,resetTargets:ks,onSetupTableWithCaption:qc,onSetupTableRowHeaders:bp,onSetupTableColumnHeaders:E0,targets:T.get}};var Vf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const zf="x-tinymce/dom-table-",Uf=zf+"rows",Gc=zf+"columns",pp=w=>{var T;const L=(T=Vf.read())!==null&&T!==void 0?T:[];return Mt(L,H=>te.from(H.getType(w)))},Ce=()=>pp(Uf),na=()=>pp(Gc),ub=(w,T)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:Tt=>Tt("inserttable | cell row column | advtablesort | tableprops deletetable")});const L=Tt=>()=>w.execCommand(Tt),H=(Tt,zn)=>{w.queryCommandSupported(zn.command)&&w.ui.registry.addButton(Tt,{...zn,onAction:Zo(zn.onAction)?zn.onAction:L(zn.command)})},ue=(Tt,zn)=>{w.queryCommandSupported(zn.command)&&w.ui.registry.addToggleButton(Tt,{...zn,onAction:Zo(zn.onAction)?zn.onAction:L(zn.command)})};H("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:T.onSetupTable}),H("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:T.onSetupTable}),H("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:T.onSetupCellOrRow}),H("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:T.onSetupMergeable}),H("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:T.onSetupUnmergeable}),H("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:T.onSetupCellOrRow}),H("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:T.onSetupCellOrRow}),H("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:T.onSetupCellOrRow}),H("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:T.onSetupCellOrRow}),H("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:T.onSetupColumn("onFirst")}),H("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:T.onSetupColumn("onLast")}),H("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:T.onSetupColumn("onAny")}),H("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:T.onSetupCellOrRow}),H("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:T.onSetupCellOrRow}),H("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:T.onSetupPasteable(Ce)}),H("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:T.onSetupPasteable(Ce)}),H("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:T.onSetupColumn("onAny")}),H("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:T.onSetupColumn("onAny")}),H("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:T.onSetupPasteableColumn(na,"onFirst")}),H("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:T.onSetupPasteableColumn(na,"onLast")}),H("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const Re=ja(pa(w));Re.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Gi(w,Re,"tableclass",Tt=>w.execCommand("mceTableToggleClass",!1,Tt)),onSetup:T.onSetupTable});const tt=ja(pi(w));tt.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Gi(w,tt,"tablecellclass",Tt=>w.execCommand("mceTableCellToggleClass",!1,Tt)),onSetup:T.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Gi(w,Ar,"tablecellverticalalign",Gn(w,"vertical-align")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Gi(w,hi(w),"tablecellborderwidth",Gn(w,"border-width")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Gi(w,Sr(w),"tablecellborderstyle",Gn(w,"border-style")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Tt=>Tt(Su(w,vu(w),"background-color")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Tt=>Tt(Su(w,Pd(w),"border-color")),onSetup:T.onSetupCellOrRow})),ue("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:T.onSetupTableWithCaption}),ue("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Xg(w),onSetup:T.onSetupTableRowHeaders}),ue("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Pm(w),onSetup:T.onSetupTableColumnHeaders})},Hs=w=>{const T=H=>w.dom.is(H,"table")&&w.getBody().contains(H),L=Ul(w);L.length>0&&w.ui.registry.addContextToolbar("table",{predicate:T,items:L,scope:"node",position:"node"})},Kl=(w,T)=>{const L=ss=>()=>w.execCommand(ss),H=(ss,vs)=>w.queryCommandSupported(vs.command)?(w.ui.registry.addMenuItem(ss,{...vs,onAction:Zo(vs.onAction)?vs.onAction:L(vs.command)}),!0):!1,ue=(ss,vs)=>{w.queryCommandSupported(vs.command)&&w.ui.registry.addToggleMenuItem(ss,{...vs,onAction:Zo(vs.onAction)?vs.onAction:L(vs.command)})},Re=ss=>{w.execCommand("mceInsertTable",!1,{rows:ss.numRows,columns:ss.numColumns})},tt=[H("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:T.onSetupCellOrRow}),H("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:T.onSetupCellOrRow}),H("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:T.onSetupCellOrRow}),H("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:T.onSetupCellOrRow}),H("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:T.onSetupCellOrRow}),H("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:T.onSetupCellOrRow}),H("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:T.onSetupPasteable(Ce)}),H("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:T.onSetupPasteable(Ce)})],Tt=[H("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:T.onSetupColumn("onFirst")}),H("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:T.onSetupColumn("onLast")}),H("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:T.onSetupColumn("onAny")}),H("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:T.onSetupColumn("onAny")}),H("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:T.onSetupColumn("onAny")}),H("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:T.onSetupPasteableColumn(na,"onFirst")}),H("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:T.onSetupPasteableColumn(na,"onLast")})],zn=[H("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:T.onSetupCellOrRow}),H("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:T.onSetupMergeable}),H("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:T.onSetupUnmergeable})];Vg(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Re}]}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTableDialog")}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTableDialog")}),H("tableprops",{text:"Table properties",onSetup:T.onSetupTable,command:"mceTableProps"}),H("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:T.onSetupTable,command:"mceTableDelete"}),yo(tt,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Qe("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),yo(Tt,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Qe("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),yo(zn,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Qe("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(T.resetTargets(),T.targets().fold(Qe(""),ss=>Jn(ss.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const no=ja(pa(w));no.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Rs(w,no,"tableclass",ss=>w.execCommand("mceTableToggleClass",!1,ss)),onSetup:T.onSetupTable});const ks=ja(pi(w));ks.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Rs(w,ks,"tablecellclass",ss=>w.execCommand("mceTableCellToggleClass",!1,ss)),onSetup:T.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Rs(w,Ar,"tablecellverticalalign",Gn(w,"vertical-align")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Rs(w,hi(w),"tablecellborderwidth",Gn(w,"border-width")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Rs(w,Sr(w),"tablecellborderstyle",Gn(w,"border-style")),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Su(w,vu(w),"background-color"),onSetup:T.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Su(w,Pd(w),"border-color"),onSetup:T.onSetupCellOrRow})),ue("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:T.onSetupTableWithCaption}),ue("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Xg(w),onSetup:T.onSetupTableRowHeaders}),ue("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Pm(w),onSetup:T.onSetupTableRowHeaders})},oa=w=>{const T=Ma(w);hr(w),k0(w),Kl(w,T),ub(w,T),Hs(w)};var sa=()=>{vt.add("table",oa)};sa()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager"),On=tinymce.util.Tools.resolve("tinymce.Env");const wn=Bt=>$n=>$n.options.get(Bt),Sn=Bt=>{const $n=Bt.options.register;$n("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),$n("pagebreak_split_block",{processor:"boolean",default:!1})},En=wn("pagebreak_separator"),eo=wn("pagebreak_split_block"),ao="mce-pagebreak",xt=Bt=>{const $n=`<img src="${On.transparentSrc}" class="${ao}" data-mce-resize="false" data-mce-placeholder />`;return Bt?`<p>${$n}</p>`:$n},Gt=Bt=>{const $n=En(Bt),co=()=>eo(Bt),Qe=new RegExp($n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,_n=>"\\"+_n),"gi");Bt.on("BeforeSetContent",_n=>{_n.content=_n.content.replace(Qe,xt(co()))}),Bt.on("PreInit",()=>{Bt.serializer.addNodeFilter("img",_n=>{let Ye=_n.length,oe,Pt;for(;Ye--;)if(oe=_n[Ye],Pt=oe.attr("class"),Pt&&Pt.indexOf(ao)!==-1){const Ps=oe.parent;if(Ps&&Bt.schema.getBlockElements()[Ps.name]&&co()){Ps.type=3,Ps.value=$n,Ps.raw=!0,oe.remove();continue}oe.type=3,oe.value=$n,oe.raw=!0}})})},uo=Bt=>{Bt.addCommand("mcePageBreak",()=>{Bt.insertContent(xt(eo(Bt)))})},Wn=Bt=>{Bt.on("ResolveName",$n=>{$n.target.nodeName==="IMG"&&Bt.dom.hasClass($n.target,ao)&&($n.name="pagebreak")})},Xo=Bt=>{const $n=()=>Bt.execCommand("mcePageBreak");Bt.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:$n}),Bt.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:$n})};var Zo=()=>{vt.add("pagebreak",Bt=>{Sn(Bt),uo(Bt),Xo(Bt),Gt(Bt),Wn(Bt)})};Zo()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(E,N,U)=>{var ie;return U(E,N.prototype)?!0:((ie=E.constructor)===null||ie===void 0?void 0:ie.name)===N.name},wn=E=>{const N=typeof E;return E===null?"null":N==="object"&&Array.isArray(E)?"array":N==="object"&&On(E,String,(U,ie)=>ie.isPrototypeOf(U))?"string":N},Sn=E=>N=>wn(N)===E,En=E=>N=>typeof N===E,eo=Sn("string"),ao=Sn("object"),xt=Sn("array"),Gt=En("boolean"),uo=E=>E==null,Wn=E=>!uo(E),Xo=En("function"),Zo=En("number"),Bt=()=>{},$n=E=>()=>E,co=(E,N)=>E===N,Qe=E=>N=>!E(N),_n=$n(!1);class Ye{constructor(N,U){this.tag=N,this.value=U}static some(N){return new Ye(!0,N)}static none(){return Ye.singletonNone}fold(N,U){return this.tag?U(this.value):N()}isSome(){return this.tag}isNone(){return!this.tag}map(N){return this.tag?Ye.some(N(this.value)):Ye.none()}bind(N){return this.tag?N(this.value):Ye.none()}exists(N){return this.tag&&N(this.value)}forall(N){return!this.tag||N(this.value)}filter(N){return!this.tag||N(this.value)?this:Ye.none()}getOr(N){return this.tag?this.value:N}or(N){return this.tag?this:N}getOrThunk(N){return this.tag?this.value:N()}orThunk(N){return this.tag?this:N()}getOrDie(N){if(this.tag)return this.value;throw new Error(N??"Called getOrDie on None")}static from(N){return Wn(N)?Ye.some(N):Ye.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(N){this.tag&&N(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ye.singletonNone=new Ye(!1);const oe=Array.prototype.slice,Pt=Array.prototype.indexOf,Ps=Array.prototype.push,Zn=(E,N)=>Pt.call(E,N),te=(E,N)=>Zn(E,N)>-1,cn=(E,N)=>{for(let U=0,ie=E.length;U<ie;U++){const pe=E[U];if(N(pe,U))return!0}return!1},jo=(E,N)=>{const U=E.length,ie=new Array(U);for(let pe=0;pe<U;pe++){const ft=E[pe];ie[pe]=N(ft,pe)}return ie},At=(E,N)=>{for(let U=0,ie=E.length;U<ie;U++){const pe=E[U];N(pe,U)}},ge=(E,N)=>{const U=[];for(let ie=0,pe=E.length;ie<pe;ie++){const ft=E[ie];N(ft,ie)&&U.push(ft)}return U},X=(E,N)=>{if(E.length===0)return[];{let U=N(E[0]);const ie=[];let pe=[];for(let ft=0,pn=E.length;ft<pn;ft++){const go=E[ft],to=N(go);to!==U&&(ie.push(pe),pe=[]),U=to,pe.push(go)}return pe.length!==0&&ie.push(pe),ie}},An=(E,N,U)=>(At(E,(ie,pe)=>{U=N(U,ie,pe)}),U),Kt=(E,N,U)=>{for(let ie=0,pe=E.length;ie<pe;ie++){const ft=E[ie];if(N(ft,ie))return Ye.some(ft);if(U(ft,ie))break}return Ye.none()},bt=(E,N)=>Kt(E,N,_n),gn=E=>{const N=[];for(let U=0,ie=E.length;U<ie;++U){if(!xt(E[U]))throw new Error("Arr.flatten item "+U+" was not an array, input: "+E);Ps.apply(N,E[U])}return N},O=(E,N)=>gn(jo(E,N)),je=E=>{const N=oe.call(E,0);return N.reverse(),N},Eo=(E,N)=>N>=0&&N<E.length?Ye.some(E[N]):Ye.none(),qt=E=>Eo(E,0),Le=E=>Eo(E,E.length-1),lr=(E,N)=>{const U=[],ie=Xo(N)?pe=>cn(U,ft=>N(ft,pe)):pe=>te(U,pe);for(let pe=0,ft=E.length;pe<ft;pe++){const pn=E[pe];ie(pn)||U.push(pn)}return U},yo=(E,N,U=co)=>E.exists(ie=>U(ie,N)),oo=(E,N,U=co)=>$s(E,N,U).getOr(E.isNone()&&N.isNone()),$s=(E,N,U)=>E.isSome()&&N.isSome()?Ye.some(U(E.getOrDie(),N.getOrDie())):Ye.none(),rn=1,We=(E,N)=>{const ie=(N||document).createElement("div");if(ie.innerHTML=E,!ie.hasChildNodes()||ie.childNodes.length>1){const pe="HTML does not have a single root node";throw console.error(pe,E),new Error(pe)}return nt(ie.childNodes[0])},$=(E,N)=>{const ie=(N||document).createElement(E);return nt(ie)},Mr=(E,N)=>{const ie=(N||document).createTextNode(E);return nt(ie)},nt=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},at={fromHtml:We,fromTag:$,fromText:Mr,fromDom:nt,fromPoint:(E,N,U)=>Ye.from(E.dom.elementFromPoint(N,U)).map(nt)},Wt=(E,N)=>{const U=E.dom;if(U.nodeType!==rn)return!1;{const ie=U;if(ie.matches!==void 0)return ie.matches(N);if(ie.msMatchesSelector!==void 0)return ie.msMatchesSelector(N);if(ie.webkitMatchesSelector!==void 0)return ie.webkitMatchesSelector(N);if(ie.mozMatchesSelector!==void 0)return ie.mozMatchesSelector(N);throw new Error("Browser lacks native selectors")}},on=(E,N)=>E.dom===N.dom,zt=(E,N)=>{const U=E.dom,ie=N.dom;return U===ie?!1:U.contains(ie)},Xt=Wt;var Be=(E,N,U,ie,pe)=>E(U,ie)?Ye.some(U):Xo(pe)&&pe(U)?Ye.none():N(U,ie,pe);typeof window<"u"||Function("return this;")();const Go=E=>E.dom.nodeName.toLowerCase(),Fe=E=>E.dom.nodeType,kt=(E=>N=>Fe(N)===E)(rn),Mt=E=>N=>kt(N)&&Go(N)===E,qo=E=>Ye.from(E.dom.parentNode).map(at.fromDom),jn=E=>Ye.from(E.dom.parentElement).map(at.fromDom),Is=E=>Ye.from(E.dom.nextSibling).map(at.fromDom),cs=E=>jo(E.dom.childNodes,at.fromDom),br=(E,N)=>{const U=E.dom.childNodes;return Ye.from(U[N]).map(at.fromDom)},mo=E=>br(E,0),er=E=>br(E,E.dom.childNodes.length-1),yn=(E,N,U)=>{let ie=E.dom;const pe=Xo(U)?U:_n;for(;ie.parentNode;){ie=ie.parentNode;const ft=at.fromDom(ie);if(N(ft))return Ye.some(ft);if(pe(ft))break}return Ye.none()},Ko=(E,N,U)=>Be((pe,ft)=>ft(pe),yn,E,N,U),Un=(E,N)=>{qo(E).each(ie=>{ie.dom.insertBefore(N.dom,E.dom)})},Lo=(E,N)=>{Is(E).fold(()=>{qo(E).each(pe=>{Jn(pe,N)})},ie=>{Un(ie,N)})},Jn=(E,N)=>{E.dom.appendChild(N.dom)},Do=(E,N)=>{At(N,U=>{Un(E,U)})},is=(E,N)=>{At(N,U=>{Jn(E,U)})},Jr=E=>{E.dom.textContent="",At(cs(E),N=>{ka(N)})},ka=E=>{const N=E.dom;N.parentNode!==null&&N.parentNode.removeChild(N)};var Dn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),vc=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),lo=tinymce.util.Tools.resolve("tinymce.util.VK");const Zt=E=>jo(E,at.fromDom),In=Object.keys,Zs=(E,N)=>{const U=In(E);for(let ie=0,pe=U.length;ie<pe;ie++){const ft=U[ie],pn=E[ft];N(pn,ft)}},Qr=E=>(N,U)=>{E[U]=N},mi=(E,N,U,ie)=>{Zs(E,(pe,ft)=>{(N(pe,ft)?U:ie)(pe,ft)})},Jo=(E,N)=>{const U={};return mi(E,N,Qr(U),Bt),U},nl=(E,N,U)=>{if(eo(U)||Gt(U)||Zo(U))E.setAttribute(N,U+"");else throw console.error("Invalid call to Attribute.set. Key ",N,":: Value ",U,":: Element ",E),new Error("Attribute value was not simple")},us=(E,N)=>{const U=E.dom;Zs(N,(ie,pe)=>{nl(U,pe,ie)})},No=E=>An(E.dom.attributes,(N,U)=>(N[U.name]=U.value,N),{}),hn=(E,N)=>at.fromDom(E.dom.cloneNode(N)),fr=E=>hn(E,!0),Fa=(E,N)=>{const U=at.fromTag(N),ie=No(E);return us(U,ie),U},hs=(E,N)=>{const U=Fa(E,N);Lo(E,U);const ie=cs(E);return is(U,ie),ka(E),U};var Ha=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),da=tinymce.util.Tools.resolve("tinymce.util.Tools");const Hl=E=>N=>Wn(N)&&N.nodeName.toLowerCase()===E,js=E=>N=>Wn(N)&&E.test(N.nodeName),ec=E=>Wn(E)&&E.nodeType===3,ce=E=>Wn(E)&&E.nodeType===1,Z=js(/^(OL|UL|DL)$/),De=js(/^(OL|UL)$/),$e=Hl("ol"),jt=js(/^(LI|DT|DD)$/),Qt=js(/^(DT|DD)$/),Ft=js(/^(TH|TD)$/),Qo=Hl("br"),Ro=E=>{var N;return((N=E.parentNode)===null||N===void 0?void 0:N.firstChild)===E},Ln=(E,N)=>Wn(N)&&N.nodeName in E.schema.getTextBlockElements(),Js=(E,N)=>Wn(E)&&E.nodeName in N,Je=(E,N)=>Qo(N)?E.isBlock(N.nextSibling)&&!Qo(N.previousSibling):!1,tr=(E,N,U)=>{const ie=E.isEmpty(N);return U&&E.select("span[data-mce-type=bookmark]",N).length>0?!1:ie},ma=(E,N)=>E.isChildOf(N,E.getRoot()),tc=E=>N=>N.options.get(E),Va=E=>{const N=E.options.register;N("lists_indent_on_tab",{processor:"boolean",default:!0})},Cl=tc("lists_indent_on_tab"),Nr=tc("forced_root_block"),ds=tc("forced_root_block_attrs"),vr=(E,N)=>{const U=E.dom,ie=E.schema.getBlockElements(),pe=U.createFragment(),ft=Nr(E),pn=ds(E);let go,to,Yt=!1;for(to=U.create(ft,pn),Js(N.firstChild,ie)||pe.appendChild(to);go=N.firstChild;){const ho=go.nodeName;!Yt&&(ho!=="SPAN"||go.getAttribute("data-mce-type")!=="bookmark")&&(Yt=!0),Js(go,ie)?(pe.appendChild(go),to=null):(to||(to=U.create(ft,pn),pe.appendChild(to)),to.appendChild(go))}return!Yt&&to&&to.appendChild(U.create("br",{"data-mce-bogus":"1"})),pe},ms=Ha.DOM,nr=(E,N,U)=>{const ie=Yt=>{const ho=Yt.parentNode;ho&&da.each(pe,qs=>{ho.insertBefore(qs,U.parentNode)}),ms.remove(Yt)},pe=ms.select('span[data-mce-type="bookmark"]',N),ft=vr(E,U),pn=ms.createRng();pn.setStartAfter(U),pn.setEndAfter(N);const go=pn.extractContents();for(let Yt=go.firstChild;Yt;Yt=Yt.firstChild)if(Yt.nodeName==="LI"&&E.dom.isEmpty(Yt)){ms.remove(Yt);break}E.dom.isEmpty(go)||ms.insertAfter(go,N),ms.insertAfter(ft,N);const to=U.parentElement;to&&tr(E.dom,to)&&ie(to),ms.remove(U),tr(E.dom,N)&&ms.remove(N)},Wc=Mt("dd"),wl=Mt("dt"),Bo=(E,N)=>{Wc(N)?hs(N,"dt"):wl(N)&&jn(N).each(U=>nr(E,U.dom,N.dom))},Bd=E=>{wl(E)&&hs(E,"dd")},fi=(E,N,U)=>{N==="Indent"?At(U,Bd):At(U,ie=>Bo(E,ie))},za=(E,N)=>{if(ec(E))return{container:E,offset:N};const U=Dn.getNode(E,N);return ec(U)?{container:U,offset:N>=E.childNodes.length?U.data.length:0}:U.previousSibling&&ec(U.previousSibling)?{container:U.previousSibling,offset:U.previousSibling.data.length}:U.nextSibling&&ec(U.nextSibling)?{container:U.nextSibling,offset:0}:{container:E,offset:N}},Os=E=>{const N=E.cloneRange(),U=za(E.startContainer,E.startOffset);N.setStart(U.container,U.offset);const ie=za(E.endContainer,E.endOffset);return N.setEnd(ie.container,ie.offset),N},fa=["OL","UL","DL"],_r=fa.join(","),ol=(E,N)=>{const U=N||E.selection.getStart(!0);return E.dom.getParent(U,_r,yc(E,U))},nc=(E,N)=>Wn(E)&&N.length===1&&N[0]===E,Sl=E=>ge(E.querySelectorAll(_r),Z),Vl=E=>{const N=ol(E),U=E.selection.getSelectedBlocks();return nc(N,U)?Sl(N):ge(U,ie=>Z(ie)&&N!==ie)},xl=(E,N)=>{const U=da.map(N,ie=>{const pe=E.dom.getParent(ie,"li,dd,dt",yc(E,ie));return pe||ie});return lr(U)},$i=E=>{const N=E.selection.getSelectedBlocks();return ge(xl(E,N),jt)},ns=E=>ge($i(E),Qt),Tl=(E,N)=>{const U=E.dom.getParents(N,"TD,TH");return U.length>0?U[0]:E.getBody()},ga=(E,N)=>!Z(N)&&!jt(N)&&cn(fa,U=>E.isValidChild(N.nodeName,U)),yc=(E,N)=>{const U=E.dom.getParents(N,E.dom.isBlock);return bt(U,pe=>ga(E.schema,pe)).getOr(E.getBody())},kl=(E,N)=>{const U=E.dom.getParents(N,"ol,ul",yc(E,N));return Le(U)},sl=E=>{const N=kl(E,E.selection.getStart()),U=ge(E.selection.getSelectedBlocks(),De);return N.toArray().concat(U)},ea=E=>{const N=sl(E);return zl(E,N)},zl=(E,N)=>{const U=jo(N,ie=>kl(E,ie).getOr(ie));return lr(U)},rl=E=>/\btox\-/.test(E.className),Ii=(E,N)=>Kt(E,Z,Ft).exists(U=>U.nodeName===N&&!rl(U)),ws=(E,N)=>N!==null&&E.dom.getContentEditableParent(N)==="false",Ea=E=>{const N=ol(E);return ws(E,N)},j=(E,N)=>{const U=E.dom.getParent(N,"ol,ul,dl");return ws(E,U)},le=(E,N)=>{const U=E.selection.getNode();return N({parents:E.dom.getParents(U),element:U}),E.on("NodeChange",N),()=>E.off("NodeChange",N)},he=(E,N)=>{const ie=(N||document).createDocumentFragment();return At(E,pe=>{ie.appendChild(pe.dom)}),at.fromDom(ie)},Ie=(E,N,U)=>E.dispatch("ListMutation",{action:N,element:U}),un=(E=>N=>N.replace(E,""))(/^\s+|\s+$/g),fo=E=>E.length>0,or=E=>!fo(E),os=E=>E.style!==void 0&&Xo(E.style.getPropertyValue),ir=(E,N,U)=>{if(!eo(U))throw console.error("Invalid call to CSS.set. Property ",N,":: Value ",U,":: Element ",E),new Error("CSS value must be a string: "+U);os(E)&&E.style.setProperty(N,U)},sr=(E,N,U)=>{const ie=E.dom;ir(ie,N,U)},gr=(E,N)=>{Jn(E.item,N.list)},Ua=E=>{for(let N=1;N<E.length;N++)gr(E[N-1],E[N])},Br=(E,N)=>{$s(Le(E),qt(N),gr)},zr=(E,N)=>{const U={list:at.fromTag(N,E),item:at.fromTag("li",E)};return Jn(U.list,U.item),U},al=(E,N,U)=>{const ie=[];for(let pe=0;pe<U;pe++)ie.push(zr(E,N.listType));return ie},cl=(E,N)=>{for(let U=0;U<E.length-1;U++)sr(E[U].item,"list-style-type","none");Le(E).each(U=>{us(U.list,N.listAttributes),us(U.item,N.itemAttributes),is(U.item,N.content)})},Rn=(E,N)=>{Go(E.list)!==N.listType&&(E.list=hs(E.list,N.listType)),us(E.list,N.listAttributes)},Ao=(E,N,U)=>{const ie=at.fromTag("li",E);return us(ie,N),is(ie,U),ie},Ls=(E,N)=>{Jn(E.list,N),E.item=N},B=(E,N,U)=>{const ie=N.slice(0,U.depth);return Le(ie).each(pe=>{const ft=Ao(E,U.itemAttributes,U.content);Ls(pe,ft),Rn(pe,U)}),ie},G=(E,N,U)=>{const ie=al(E,U,U.depth-N.length);return Ua(ie),cl(ie,U),Br(N,ie),N.concat(ie)},ne=(E,N)=>{const U=An(N,(ie,pe)=>pe.depth>ie.length?G(E,ie,pe):B(E,ie,pe),[]);return qt(U).map(ie=>ie.list)},we=E=>Xt(E,"OL,UL"),Et=E=>mo(E).exists(we),Fn=E=>er(E).exists(we),$t=E=>E.depth>0,yr=E=>E.isSelected,Gs=E=>{const N=cs(E),U=Fn(E)?N.slice(0,-1):N;return jo(U,fr)},Ge=(E,N,U)=>qo(E).filter(kt).map(ie=>({depth:N,dirty:!1,isSelected:U,content:Gs(E),itemAttributes:No(E),listAttributes:No(ie),listType:Go(ie)})),ha=(E,N)=>{switch(E){case"Indent":N.depth++;break;case"Outdent":N.depth--;break;case"Flatten":N.depth=0}N.dirty=!0},Ss=(E,N)=>{E.listType=N.listType,E.listAttributes={...N.listAttributes}},Pr=E=>{E.listAttributes=Jo(E.listAttributes,(N,U)=>U!=="start")},Li=(E,N)=>{const U=E[N].depth,ie=ft=>ft.depth===U&&!ft.dirty,pe=ft=>ft.depth<U;return Kt(je(E.slice(0,N)),ie,pe).orThunk(()=>Kt(E.slice(N+1),ie,pe))},Vn=E=>(At(E,(N,U)=>{Li(E,U).fold(()=>{N.dirty&&Pr(N)},ie=>Ss(N,ie))}),E),gi=E=>{let N=E;return{get:()=>N,set:pe=>{N=pe}}},_a=(E,N,U,ie)=>mo(ie).filter(we).fold(()=>{N.each(pn=>{on(pn.start,ie)&&U.set(!0)});const pe=Ge(ie,E,U.get());N.each(pn=>{on(pn.end,ie)&&U.set(!1)});const ft=er(ie).filter(we).map(pn=>Fi(E,N,U,pn)).getOr([]);return pe.toArray().concat(ft)},pe=>Fi(E,N,U,pe)),Fi=(E,N,U,ie)=>O(cs(ie),pe=>{const ft=we(pe)?Fi:_a,pn=E+1;return ft(pn,N,U,pe)}),rr=(E,N)=>{const U=gi(!1),ie=0;return jo(E,pe=>({sourceList:pe,entries:Fi(ie,N,U,pe)}))},Hi=(E,N)=>{const U=Vn(N);return jo(U,ie=>{const pe=he(ie.content);return at.fromDom(vr(E,pe.dom))})},Fs=(E,N)=>{const U=Vn(N);return ne(E.contentDocument,U).toArray()},gu=(E,N)=>O(X(N,$t),U=>qt(U).exists($t)?Fs(E,U):Hi(E,U)),Ds=(E,N)=>{At(ge(E,yr),U=>ha(N,U))},fp=E=>{const N=jo($i(E),at.fromDom);return $s(bt(N,Qe(Et)),bt(je(N),Qe(Et)),(U,ie)=>({start:U,end:ie}))},ps=(E,N,U)=>{const ie=rr(N,fp(E));At(ie,pe=>{Ds(pe.entries,U);const ft=gu(E,pe.entries);At(ft,pn=>{Ie(E,U==="Indent"?"IndentList":"OutdentList",pn.dom)}),Do(pe.sourceList,ft),ka(pe.sourceList)})},Cr=(E,N)=>{const U=Zt(ea(E)),ie=Zt(ns(E));let pe=!1;if(U.length||ie.length){const ft=E.selection.getBookmark();ps(E,U,N),fi(E,N,ie),E.selection.moveToBookmark(ft),E.selection.setRng(Os(E.selection.getRng())),E.nodeChanged(),pe=!0}return pe},El=(E,N)=>!Ea(E)&&Cr(E,N),hu=E=>El(E,"Indent"),Vi=E=>El(E,"Outdent"),ar=E=>El(E,"Flatten");var wr=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const bs=Ha.DOM,hr=E=>{const N={},U=ie=>{let pe=E[ie?"startContainer":"endContainer"],ft=E[ie?"startOffset":"endOffset"];if(ce(pe)){const pn=bs.create("span",{"data-mce-type":"bookmark"});pe.hasChildNodes()?(ft=Math.min(ft,pe.childNodes.length-1),ie?pe.insertBefore(pn,pe.childNodes[ft]):bs.insertAfter(pn,pe.childNodes[ft])):pe.appendChild(pn),pe=pn,ft=0}N[ie?"startContainer":"endContainer"]=pe,N[ie?"startOffset":"endOffset"]=ft};return U(!0),E.collapsed||U(),N},oc=E=>{const N=ie=>{const pe=go=>{var to;let Yt=(to=go.parentNode)===null||to===void 0?void 0:to.firstChild,ho=0;for(;Yt;){if(Yt===go)return ho;(!ce(Yt)||Yt.getAttribute("data-mce-type")!=="bookmark")&&ho++,Yt=Yt.nextSibling}return-1};let ft=E[ie?"startContainer":"endContainer"],pn=E[ie?"startOffset":"endOffset"];if(ft){if(ce(ft)&&ft.parentNode){const go=ft;pn=pe(ft),ft=ft.parentNode,bs.remove(go),!ft.hasChildNodes()&&bs.isBlock(ft)&&ft.appendChild(bs.create("br"))}E[ie?"startContainer":"endContainer"]=ft,E[ie?"startOffset":"endOffset"]=pn}};N(!0),N();const U=bs.createRng();return U.setStart(E.startContainer,E.startOffset),E.endContainer&&U.setEnd(E.endContainer,E.endOffset),Os(U)},hi=E=>{switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Sr=(E,N,U)=>{const ie=U["list-style-type"]?U["list-style-type"]:null;E.setStyle(N,"list-style-type",ie)},zi=(E,N)=>{da.each(N,(U,ie)=>{E.setAttribute(ie,U)})},pu=(E,N,U)=>{zi(N,U["list-attributes"]),da.each(E.select("li",N),ie=>{zi(ie,U["list-item-attributes"])})},Wa=(E,N,U)=>{Sr(E,N,U),pu(E,N,U)},bu=(E,N,U)=>{da.each(U,ie=>E.setStyle(N,ie,""))},Vg=(E,N,U,ie)=>{let pe=N[U?"startContainer":"endContainer"];const ft=N[U?"startOffset":"endOffset"];for(ce(pe)&&(pe=pe.childNodes[Math.min(ft,pe.childNodes.length-1)]||pe),!U&&Qo(pe.nextSibling)&&(pe=pe.nextSibling);pe.parentNode!==ie;){const pn=pe.parentNode;if(Ln(E,pe)||/^(TD|TH)$/.test(pn.nodeName))return pe;pe=pn}return pe},Cc=(E,N,U)=>{const ie=[],pe=E.dom,ft=Vg(E,N,!0,U),pn=Vg(E,N,!1,U);let go;const to=[];for(let Yt=ft;Yt&&(to.push(Yt),Yt!==pn);Yt=Yt.nextSibling);return da.each(to,Yt=>{var ho;if(Ln(E,Yt)){ie.push(Yt),go=null;return}if(pe.isBlock(Yt)||Qo(Yt)){Qo(Yt)&&pe.remove(Yt),go=null;return}const qs=Yt.nextSibling;if(wr.isBookmarkNode(Yt)&&(Z(qs)||Ln(E,qs)||!qs&&Yt.parentNode===U)){go=null;return}go||(go=pe.create("p"),(ho=Yt.parentNode)===null||ho===void 0||ho.insertBefore(go,Yt),ie.push(go)),go.appendChild(Yt)}),ie},pi=(E,N,U)=>{const ie=E.getStyle(N,"list-style-type");let pe=U?U["list-style-type"]:"";return pe=pe===null?"":pe,ie===pe},td=(E,N,U)=>{const ie=E.selection.getRng();let pe="LI";const ft=yc(E,E.selection.getStart(!0)),pn=E.dom;if(pn.getContentEditable(E.selection.getNode())==="false")return;N=N.toUpperCase(),N==="DL"&&(pe="DT");const go=hr(ie),to=Cc(E,ie,ft);da.each(to,Yt=>{let ho;const qs=Yt.previousSibling,Oa=Yt.parentNode;jt(Oa)||(qs&&Z(qs)&&qs.nodeName===N&&pi(pn,qs,U)?(ho=qs,Yt=pn.rename(Yt,pe),qs.appendChild(Yt)):(ho=pn.create(N),Oa.insertBefore(ho,Yt),ho.appendChild(Yt),Yt=pn.rename(Yt,pe)),bu(pn,Yt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Wa(pn,ho,U),Ui(E.dom,ho))}),E.selection.setRng(oc(go))},pa=(E,N)=>Z(E)&&E.nodeName===(N==null?void 0:N.nodeName),Ul=(E,N,U)=>{const ie=E.getStyle(N,"list-style-type",!0),pe=E.getStyle(U,"list-style-type",!0);return ie===pe},vu=(E,N)=>E.className===N.className,Pd=(E,N,U)=>pa(N,U)&&Ul(E,N,U)&&vu(N,U),Ui=(E,N)=>{let U,ie=N.nextSibling;if(Pd(E,N,ie)){const pe=ie;for(;U=pe.firstChild;)N.appendChild(U);E.remove(pe)}if(ie=N.previousSibling,Pd(E,N,ie)){const pe=ie;for(;U=pe.lastChild;)N.insertBefore(U,N.firstChild);E.remove(pe)}},Em=(E,N,U,ie)=>{if(N.nodeName!==U){const pe=E.dom.rename(N,U);Wa(E.dom,pe,ie),Ie(E,hi(U),pe)}else Wa(E.dom,N,ie),Ie(E,hi(U),N)},$d=(E,N,U,ie,pe)=>{const ft=Z(N);if(ft&&N.nodeName===ie&&!ll(pe))ar(E);else{td(E,ie,pe);const pn=hr(E.selection.getRng()),go=ft?[N,...U]:U;da.each(go,to=>{Em(E,to,ie,pe)}),E.selection.setRng(oc(pn))}},ll=E=>"list-style-type"in E,zg=(E,N,U,ie)=>{if(N!==E.getBody())if(N)if(N.nodeName===U&&!ll(ie)&&!rl(N))ar(E);else{const pe=hr(E.selection.getRng());Wa(E.dom,N,ie);const ft=E.dom.rename(N,U);Ui(E.dom,ft),E.selection.setRng(oc(pe)),td(E,U,ie),Ie(E,hi(U),ft)}else td(E,U,ie),Ie(E,hi(U),N)},_m=(E,N,U)=>{const ie=ol(E);if(j(E,ie))return;const pe=Vl(E),ft=ao(U)?U:{};pe.length>0?$d(E,ie,pe,N,ft):zg(E,ie,N,ft)},yu=Ha.DOM,Id=(E,N)=>{const U=N.parentElement;if(U&&U.nodeName==="LI"&&U.firstChild===N){const ie=U.previousSibling;ie&&ie.nodeName==="LI"?(ie.appendChild(N),tr(E,U)&&yu.remove(U)):yu.setStyle(U,"listStyleType","none")}if(Z(U)){const ie=U.previousSibling;ie&&ie.nodeName==="LI"&&ie.appendChild(N)}},il=(E,N)=>{const U=da.grep(E.select("ol,ul",N));da.each(U,ie=>{Id(E,ie)})},re=(E,N,U,ie)=>{let pe=N.startContainer;const ft=N.startOffset;if(ec(pe)&&(U?ft<pe.data.length:ft>0))return pe;const pn=E.schema.getNonEmptyElements();ce(pe)&&(pe=Dn.getNode(pe,ft));const go=new vc(pe,ie);U&&Je(E.dom,pe)&&go.next();const to=U?go.next.bind(go):go.prev2.bind(go);for(;pe=to();)if(pe.nodeName==="LI"&&!pe.hasChildNodes()||pn[pe.nodeName]||ec(pe)&&pe.data.length>0)return pe;return null},Wi=(E,N)=>{const U=N.childNodes;return U.length===1&&!Z(U[0])&&E.isBlock(U[0])},ul=(E,N)=>{Wi(E,N)&&E.remove(N.firstChild,!0)},Am=(E,N,U)=>{let ie;const pe=Wi(E,U)?U.firstChild:U;if(ul(E,N),!tr(E,N,!0))for(;ie=N.firstChild;)pe.appendChild(ie)},Om=(E,N,U)=>{let ie;const pe=N.parentNode;if(!ma(E,N)||!ma(E,U))return;Z(U.lastChild)&&(ie=U.lastChild),pe===U.lastChild&&Qo(pe.previousSibling)&&E.remove(pe.previousSibling);const ft=U.lastChild;ft&&Qo(ft)&&N.hasChildNodes()&&E.remove(ft),tr(E,U,!0)&&Jr(at.fromDom(U)),Am(E,N,U),ie&&U.appendChild(ie);const go=zt(at.fromDom(U),at.fromDom(N))?E.getParents(N,Z,U):[];E.remove(N),At(go,to=>{tr(E,to)&&to!==E.getRoot()&&E.remove(to)})},Ug=(E,N,U)=>{Jr(at.fromDom(U)),Om(E.dom,N,U),E.selection.setCursorLocation(U,0)},zo=(E,N,U,ie)=>{const pe=E.dom;if(pe.isEmpty(ie))Ug(E,U,ie);else{const ft=hr(N);Om(pe,U,ie),E.selection.setRng(oc(ft))}},Aa=(E,N,U,ie)=>{const pe=hr(N);Om(E.dom,U,ie);const ft=oc(pe);E.selection.setRng(ft)},Rf=(E,N)=>{const U=E.dom,ie=E.selection,pe=ie.getStart(),ft=Tl(E,pe),pn=U.getParent(ie.getStart(),"LI",ft);if(pn){const go=pn.parentElement;if(go===E.getBody()&&tr(U,go))return!0;const to=Os(ie.getRng()),Yt=U.getParent(re(E,to,N,ft),"LI",ft);if(Yt&&Yt!==pn)return E.undoManager.transact(()=>{N?zo(E,to,Yt,pn):Ro(pn)?Vi(E):Aa(E,to,pn,Yt)}),!0;if(!Yt&&!N&&to.startOffset===0&&to.endOffset===0)return E.undoManager.transact(()=>{ar(E)}),!0}return!1},_l=(E,N,U)=>{const ie=E.getParent(N.parentNode,E.isBlock,U);E.remove(N),ie&&E.isEmpty(ie)&&E.remove(ie)},Dm=(E,N)=>{const U=E.dom,ie=E.selection.getStart(),pe=Tl(E,ie),ft=U.getParent(ie,U.isBlock,pe);if(ft&&U.isEmpty(ft)){const pn=Os(E.selection.getRng()),go=U.getParent(re(E,pn,N,pe),"LI",pe);if(go){const to=Oa=>te(["td","th","caption"],Go(Oa)),Yt=Oa=>Oa.dom===pe,ho=Ko(at.fromDom(go),to,Yt),qs=Ko(at.fromDom(pn.startContainer),to,Yt);return oo(ho,qs,on)?(E.undoManager.transact(()=>{_l(U,ft,pe),Ui(U,go.parentNode),E.selection.select(go,!0),E.selection.collapse(N)}),!0):!1}}return!1},Cu=(E,N)=>Rf(E,N)||Dm(E,N),sc=E=>{const N=E.selection.getStart(),U=Tl(E,N);return E.dom.getParent(N,"LI,DT,DD",U)||$i(E).length>0},Mf=E=>sc(E)?(E.undoManager.transact(()=>{E.execCommand("Delete"),il(E.dom,E.getBody())}),!0):!1,nd=(E,N)=>{const U=E.selection;return!j(E,U.getNode())&&(U.isCollapsed()?Cu(E,N):Mf(E))},Wg=E=>{E.on("ExecCommand",N=>{const U=N.command.toLowerCase();(U==="delete"||U==="forwarddelete")&&sc(E)&&il(E.dom,E.getBody())}),E.on("keydown",N=>{N.keyCode===lo.BACKSPACE?nd(E,!1)&&N.preventDefault():N.keyCode===lo.DELETE&&nd(E,!0)&&N.preventDefault()})},wc=E=>({backspaceDelete:N=>{nd(E,N)}}),Ld=(E,N)=>{const U=ol(E);U===null||j(E,U)||E.undoManager.transact(()=>{ao(N.styles)&&E.dom.setStyles(U,N.styles),ao(N.attrs)&&Zs(N.attrs,(ie,pe)=>E.dom.setAttrib(U,pe,ie))})},Rm=E=>{const N=je(un(E).split("")),U=jo(N,(ie,pe)=>{const ft=ie.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,pe)*ft});return An(U,(ie,pe)=>ie+pe,0)},od=E=>{if(E--,E<0)return"";{const N=E%26,U=Math.floor(E/26),ie=od(U),pe=String.fromCharCode("A".charCodeAt(0)+N);return ie+pe}},Ur=E=>/^[A-Z]+$/.test(E),Fd=E=>/^[a-z]+$/.test(E),Nf=E=>/^[0-9]+$/.test(E),Mm=E=>Nf(E)?2:Ur(E)?0:Fd(E)?1:or(E)?3:4,wu=E=>{switch(Mm(E)){case 2:return Ye.some({listStyleType:Ye.none(),start:E});case 0:return Ye.some({listStyleType:Ye.some("upper-alpha"),start:Rm(E).toString()});case 1:return Ye.some({listStyleType:Ye.some("lower-alpha"),start:Rm(E).toString()});case 3:return Ye.some({listStyleType:Ye.none(),start:""});case 4:return Ye.none()}},Zg=E=>{const N=parseInt(E.start,10);return yo(E.listStyleType,"upper-alpha")?od(N):yo(E.listStyleType,"lower-alpha")?od(N).toLowerCase():E.start},Nm=E=>{const N=ol(E);!$e(N)||j(E,N)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Zg({start:E.dom.getAttrib(N,"start","1"),listStyleType:Ye.from(E.dom.getStyle(N,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:U=>{const ie=U.getData();wu(ie.start).each(pe=>{E.execCommand("mceListUpdate",!1,{attrs:{start:pe.start==="1"?"":pe.start},styles:{"list-style-type":pe.listStyleType.getOr("")}})}),U.close()}})},rc=(E,N)=>()=>{const U=ol(E);return Wn(U)&&U.nodeName===N},jg=E=>{E.addCommand("mceListProps",()=>{Nm(E)})},Wl=E=>{E.on("BeforeExecCommand",N=>{const U=N.command.toLowerCase();U==="indent"?hu(E):U==="outdent"&&Vi(E)}),E.addCommand("InsertUnorderedList",(N,U)=>{_m(E,"UL",U)}),E.addCommand("InsertOrderedList",(N,U)=>{_m(E,"OL",U)}),E.addCommand("InsertDefinitionList",(N,U)=>{_m(E,"DL",U)}),E.addCommand("RemoveList",()=>{ar(E)}),jg(E),E.addCommand("mceListUpdate",(N,U)=>{ao(U)&&Ld(E,U)}),E.addQueryStateHandler("InsertUnorderedList",rc(E,"UL")),E.addQueryStateHandler("InsertOrderedList",rc(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",rc(E,"DL"))},sd=E=>{E.on("keydown",N=>{N.keyCode!==lo.TAB||lo.metaKeyPressed(N)||E.undoManager.transact(()=>{(N.shiftKey?Vi(E):hu(E))&&N.preventDefault()})})},Zi=E=>{Cl(E)&&sd(E),Wg(E)},Al=(E,N)=>U=>le(E,pe=>{U.setActive(Ii(pe.parents,N)),U.setEnabled(!j(E,pe.element))}),Gg=E=>{const N=U=>()=>E.execCommand(U);E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:N("InsertOrderedList"),onSetup:Al(E,"OL")}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:N("InsertUnorderedList"),onSetup:Al(E,"UL")}))},qg=(E,N)=>U=>le(E,pe=>U.setEnabled(Ii(pe.parents,N)&&!j(E,pe.element))),Bf=E=>{const N={text:"List properties...",icon:"ordered-list",onAction:()=>E.execCommand("mceListProps"),onSetup:qg(E,"OL")};E.ui.registry.addMenuItem("listprops",N),E.ui.registry.addContextMenu("lists",{update:U=>{const ie=ol(E,U);return $e(ie)?["listprops"]:[]}})};var Zl=()=>{vt.add("lists",E=>(Va(E),E.hasPlugin("rtc",!0)?jg(E):(Zi(E),Wl(E)),Gg(E),Bf(E),wc(E)))};Zl()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(ge,X,An)=>{const Kt=X==="UL"?"InsertUnorderedList":"InsertOrderedList";ge.execCommand(Kt,!1,An===!1?null:{"list-style-type":An})},wn=ge=>{ge.addCommand("ApplyUnorderedListStyle",(X,An)=>{On(ge,"UL",An["list-style-type"])}),ge.addCommand("ApplyOrderedListStyle",(X,An)=>{On(ge,"OL",An["list-style-type"])})},Sn=ge=>X=>X.options.get(ge),En=ge=>{const X=ge.options.register;X("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),X("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},eo=Sn("advlist_number_styles"),ao=Sn("advlist_bullet_styles"),xt=ge=>ge==null,Gt=ge=>!xt(ge);var uo=tinymce.util.Tools.resolve("tinymce.util.Tools");class Wn{constructor(X,An){this.tag=X,this.value=An}static some(X){return new Wn(!0,X)}static none(){return Wn.singletonNone}fold(X,An){return this.tag?An(this.value):X()}isSome(){return this.tag}isNone(){return!this.tag}map(X){return this.tag?Wn.some(X(this.value)):Wn.none()}bind(X){return this.tag?X(this.value):Wn.none()}exists(X){return this.tag&&X(this.value)}forall(X){return!this.tag||X(this.value)}filter(X){return!this.tag||X(this.value)?this:Wn.none()}getOr(X){return this.tag?this.value:X}or(X){return this.tag?this:X}getOrThunk(X){return this.tag?this.value:X()}orThunk(X){return this.tag?this:X()}getOrDie(X){if(this.tag)return this.value;throw new Error(X??"Called getOrDie on None")}static from(X){return Gt(X)?Wn.some(X):Wn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(X){this.tag&&X(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Wn.singletonNone=new Wn(!1);const Xo=(ge,X)=>ge.dom.isChildOf(X,ge.getBody()),Zo=ge=>Gt(ge)&&/^(TH|TD)$/.test(ge.nodeName),Bt=ge=>X=>Gt(X)&&/^(OL|UL|DL)$/.test(X.nodeName)&&Xo(ge,X),$n=ge=>{const X=ge.dom.getParent(ge.selection.getNode(),"ol,ul"),An=ge.dom.getStyle(X,"listStyleType");return Wn.from(An)},co=(ge,X)=>X!==null&&ge.dom.getContentEditableParent(X)==="false",Qe=(ge,X)=>{const An=ge.dom.getParent(X,"ol,ul,dl");return co(ge,An)},_n=(ge,X)=>{for(let An=0;An<ge.length;An++){const Kt=ge[An];if(X(Kt))return An}return-1},Ye=ge=>ge.replace(/\-/g," ").replace(/\b\w/g,X=>X.toUpperCase()),oe=ge=>xt(ge)||ge==="default"?"":ge,Pt=(ge,X,An)=>{const Kt=_n(X.parents,Zo),bt=Kt!==-1?X.parents.slice(0,Kt):X.parents,gn=uo.grep(bt,Bt(ge));return gn.length>0&&gn[0].nodeName===An},Ps=(ge,X)=>An=>{const Kt=bt=>{An.setActive(Pt(ge,bt,X)),An.setEnabled(!Qe(ge,bt.element))};return ge.on("NodeChange",Kt),()=>ge.off("NodeChange",Kt)},Zn=(ge,X,An,Kt,bt,gn)=>{ge.ui.registry.addSplitButton(X,{tooltip:An,icon:bt==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:O=>{const je=uo.map(gn,Eo=>{const qt=bt==="OL"?"num":"bull",Le=Eo==="disc"||Eo==="decimal"?"default":Eo,lr=oe(Eo),yo=Ye(Eo);return{type:"choiceitem",value:lr,icon:"list-"+qt+"-"+Le,text:yo}});O(je)},onAction:()=>ge.execCommand(Kt),onItemAction:(O,je)=>{On(ge,bt,je)},select:O=>$n(ge).map(Eo=>O===Eo).getOr(!1),onSetup:Ps(ge,bt)})},te=(ge,X,An,Kt,bt,gn)=>{ge.ui.registry.addToggleButton(X,{active:!1,tooltip:An,icon:bt==="OL"?"ordered-list":"unordered-list",onSetup:Ps(ge,bt),onAction:()=>ge.queryCommandState(Kt)||gn===""?ge.execCommand(Kt):On(ge,bt,gn)})},cn=(ge,X,An,Kt,bt,gn)=>{gn.length>1?Zn(ge,X,An,Kt,bt,gn):te(ge,X,An,Kt,bt,oe(gn[0]))},jo=ge=>{cn(ge,"numlist","Numbered list","InsertOrderedList","OL",eo(ge)),cn(ge,"bullist","Bullet list","InsertUnorderedList","UL",ao(ge))};var At=()=>{vt.add("advlist",ge=>{ge.hasPlugin("lists")?(En(ge),jo(ge),wn(ge)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})};At()})();(function(){var vt=tinymce.util.Tools.resolve("tinymce.PluginManager");const On=(nt,ze,at)=>{var Wt;return at(nt,ze.prototype)?!0:((Wt=nt.constructor)===null||Wt===void 0?void 0:Wt.name)===ze.name},wn=nt=>{const ze=typeof nt;return nt===null?"null":ze==="object"&&Array.isArray(nt)?"array":ze==="object"&&On(nt,String,(at,Wt)=>Wt.isPrototypeOf(at))?"string":ze},Sn=nt=>ze=>wn(ze)===nt,En=nt=>ze=>typeof ze===nt,eo=Sn("string"),ao=En("boolean"),xt=nt=>nt==null,Gt=nt=>!xt(nt),uo=En("function"),Wn=nt=>ze=>ze.options.get(nt),Xo=nt=>{const ze=nt.options.register,at=Xt=>Be=>{const Go=ao(Be)||eo(Be);return Go?ao(Be)?{value:Be?Xt:"",valid:Go}:{value:Be.trim(),valid:Go}:{valid:!1,message:"Must be a boolean or string."}},Wt="bold italic | quicklink h2 h3 blockquote";ze("quickbars_selection_toolbar",{processor:at(Wt),default:Wt});const on="quickimage quicktable";ze("quickbars_insert_toolbar",{processor:at(on),default:on});const zt="alignleft aligncenter alignright";ze("quickbars_image_toolbar",{processor:at(zt),default:zt})},Zo=Wn("quickbars_selection_toolbar"),Bt=Wn("quickbars_insert_toolbar"),$n=Wn("quickbars_image_toolbar");let co=0;const Qe=nt=>{const at=new Date().getTime(),Wt=Math.floor(Math.random()*1e9);return co++,nt+"_"+Wt+co+String(at)},_n=(nt,ze,at)=>{nt.execCommand("mceInsertTable",!1,{rows:at,columns:ze})},Ye=(nt,ze,at)=>{const Wt=nt.editorUpload.blobCache,on=Wt.create(Qe("mceu"),at,ze);Wt.add(on),nt.insertContent(nt.dom.createHTML("img",{src:on.blobUri()}))},oe=nt=>new Promise(ze=>{const at=new FileReader;at.onloadend=()=>{ze(at.result.split(",")[1])},at.readAsDataURL(nt)});var Pt=tinymce.util.Tools.resolve("tinymce.Env"),Ps=tinymce.util.Tools.resolve("tinymce.util.Delay");const Zn=nt=>new Promise(ze=>{const at=document.createElement("input");at.type="file",at.accept="image/*",at.style.position="fixed",at.style.left="0",at.style.top="0",at.style.opacity="0.001",document.body.appendChild(at);const Wt=zt=>{ze(Array.prototype.slice.call(zt.target.files))};at.addEventListener("change",Wt);const on=zt=>{const Xt=()=>{var Be;ze([]),(Be=at.parentNode)===null||Be===void 0||Be.removeChild(at)};Pt.os.isAndroid()&&zt.type!=="remove"?Ps.setEditorTimeout(nt,Xt,0):Xt(),nt.off("focusin remove",on)};nt.on("focusin remove",on),at.click()}),te=nt=>{nt.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{Zn(nt).then(ze=>{if(ze.length>0){const at=ze[0];oe(at).then(Wt=>{Ye(nt,Wt,at)})}})}}),nt.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{_n(nt,2,2)}})},jo=(nt=>()=>nt)(!1);class At{constructor(ze,at){this.tag=ze,this.value=at}static some(ze){return new At(!0,ze)}static none(){return At.singletonNone}fold(ze,at){return this.tag?at(this.value):ze()}isSome(){return this.tag}isNone(){return!this.tag}map(ze){return this.tag?At.some(ze(this.value)):At.none()}bind(ze){return this.tag?ze(this.value):At.none()}exists(ze){return this.tag&&ze(this.value)}forall(ze){return!this.tag||ze(this.value)}filter(ze){return!this.tag||ze(this.value)?this:At.none()}getOr(ze){return this.tag?this.value:ze}or(ze){return this.tag?this:ze}getOrThunk(ze){return this.tag?this.value:ze()}orThunk(ze){return this.tag?this:ze()}getOrDie(ze){if(this.tag)return this.value;throw new Error(ze??"Called getOrDie on None")}static from(ze){return Gt(ze)?At.some(ze):At.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ze){this.tag&&ze(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}At.singletonNone=new At(!1),typeof window<"u"||Function("return this;")();const ge=1,X=nt=>nt.dom.nodeName.toLowerCase(),An=(nt,ze)=>{const at=nt.dom;return at&&at.hasAttribute?at.hasAttribute(ze):!1};var Kt=(nt,ze,at,Wt,on)=>nt(at,Wt)?At.some(at):uo(on)&&on(at)?At.none():ze(at,Wt,on);const bt=(nt,ze)=>{const Wt=(ze||document).createElement("div");if(Wt.innerHTML=nt,!Wt.hasChildNodes()||Wt.childNodes.length>1){const on="HTML does not have a single root node";throw console.error(on,nt),new Error(on)}return je(Wt.childNodes[0])},gn=(nt,ze)=>{const Wt=(ze||document).createElement(nt);return je(Wt)},O=(nt,ze)=>{const Wt=(ze||document).createTextNode(nt);return je(Wt)},je=nt=>{if(nt==null)throw new Error("Node cannot be null or undefined");return{dom:nt}},qt={fromHtml:bt,fromTag:gn,fromText:O,fromDom:je,fromPoint:(nt,ze,at)=>At.from(nt.dom.elementFromPoint(ze,at)).map(je)},Le=(nt,ze)=>{const at=nt.dom;if(at.nodeType!==ge)return!1;{const Wt=at;if(Wt.matches!==void 0)return Wt.matches(ze);if(Wt.msMatchesSelector!==void 0)return Wt.msMatchesSelector(ze);if(Wt.webkitMatchesSelector!==void 0)return Wt.webkitMatchesSelector(ze);if(Wt.mozMatchesSelector!==void 0)return Wt.mozMatchesSelector(ze);throw new Error("Browser lacks native selectors")}},lr=(nt,ze,at)=>{let Wt=nt.dom;const on=uo(at)?at:jo;for(;Wt.parentNode;){Wt=Wt.parentNode;const zt=qt.fromDom(Wt);if(ze(zt))return At.some(zt);if(on(zt))break}return At.none()},yo=(nt,ze,at)=>Kt((on,zt)=>zt(on),lr,nt,ze,at),oo=(nt,ze,at)=>yo(nt,ze,at).isSome(),$s=(nt,ze,at)=>lr(nt,Wt=>Le(Wt,ze),at),rn=(nt,ze,at)=>Kt((on,zt)=>Le(on,zt),$s,nt,ze,at),We=nt=>{const ze=Bt(nt);ze.length>0&&nt.ui.registry.addContextToolbar("quickblock",{predicate:at=>{const Wt=qt.fromDom(at),on=nt.schema.getTextBlockElements(),zt=Xt=>Xt.dom===nt.getBody();return!An(Wt,"data-mce-bogus")&&rn(Wt,'table,[data-mce-bogus="all"]',zt).fold(()=>oo(Wt,Xt=>X(Xt)in on&&nt.dom.isEmpty(Xt.dom),zt),jo)},items:ze,position:"line",scope:"editor"})},$=nt=>{const ze=zt=>nt.dom.getContentEditableParent(zt)!=="false",at=zt=>zt.nodeName==="IMG"||zt.nodeName==="FIGURE"&&/image/i.test(zt.className),Wt=$n(nt);Wt.length>0&&nt.ui.registry.addContextToolbar("imageselection",{predicate:at,items:Wt,position:"node"});const on=Zo(nt);on.length>0&&nt.ui.registry.addContextToolbar("textselection",{predicate:zt=>!at(zt)&&!nt.selection.isCollapsed()&&ze(zt),items:on,position:"selection",scope:"editor"})};var Mr=()=>{vt.add("quickbars",nt=>{Xo(nt),te(nt),We(nt),$(nt)})};Mr()})();const lj={components:{Editor:aj},props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},height:{type:Number,default:300},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"code image media link preview table quickbars template pagebreak lists advlist"},toolbar:{type:[String,Array],default:"undo redo |  forecolor backcolor bold italic underline strikethrough link | blocks fontfamily fontsize | 					alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | pagebreak | 					image media table template preview | code selectall"},templates:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}}},data(){return{init:{language_url:"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"tinymce/skins/ui/oxide",content_css:"tinymce/skins/content/default/content.css",menubar:!1,statusbar:!0,plugins:this.plugins,toolbar:this.toolbar,toolbar_mode:"sliding",font_size_formats:"12px 14px 16px 18px 22px 24px 36px 72px",height:this.height,placeholder:this.placeholder,branding:!1,resize:!0,elementpath:!0,content_style:"",templates:this.templates,quickbars_selection_toolbar:"forecolor backcolor bold italic underline strikethrough link",quickbars_image_toolbar:"alignleft aligncenter alignright",quickbars_insert_toolbar:!1,image_caption:!0,image_advtab:!0,convert_urls:!1,images_upload_handler:function(vt){return new Promise((On,wn)=>{const Sn=new FormData;Sn.append("file",vt.blob(),vt.filename()),VZ.common.upload.post(Sn).then(En=>{On(En.data.src)}).catch(()=>{wn("Image upload failed")})})},setup:function(vt){vt.on("init",function(){this.getBody().style.fontSize="14px"}),vt.on("OpenWindow",function(On){var wn=document.querySelector(".el-drawer.open"),Sn=On.target.editorContainer;if(wn&&wn.contains(Sn)){var En=document.activeElement;setTimeout(()=>{document.activeElement.blur(),En.focus()},0)}})},...this.options},contentValue:this.modelValue}},watch:{modelValue(vt){this.contentValue=vt},contentValue(vt){this.$emit("update:modelValue",vt)}},mounted(){DW.init({})},methods:{onClick(vt){this.$emit("onClick",vt,DW)}}},ij={class:"sceditor"};function uj(vt,On,wn,Sn,En,eo){const ao=zZ("Editor");return UZ(),WZ("div",ij,[ZZ(ao,{modelValue:En.contentValue,"onUpdate:modelValue":On[0]||(On[0]=xt=>En.contentValue=xt),init:En.init,disabled:wn.disabled,placeholder:wn.placeholder,onOnClick:eo.onClick},null,8,["modelValue","init","disabled","placeholder","onOnClick"])])}const hj=HZ(lj,[["render",uj],["__file","Z:/works/vue-support-parent-starter/vue-support-config-starter/src/components/scEditor/index.vue"]]);export{hj as default};
